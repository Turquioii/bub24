<!DOCTYPE html>
<!-- Created with https://packager.turbowarp.org/ -->
<html>
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <!-- We only include this to explicitly loosen the CSP of various packager environments. It does not provide any security. -->
  <meta http-equiv="Content-Security-Policy" content="default-src * 'self' 'unsafe-inline' 'unsafe-eval' data: blob:">
  <title>esrres</title>
  <style>
    body {
      color: #ffffff;
      font-family: sans-serif;
      overflow: hidden;
      margin: 0;
      padding: 0;
    }
    :root, body.is-fullscreen {
      background-color: #000000;
    }
    [hidden] {
      display: none !important;
    }
    h1 {
      font-weight: normal;
    }
    a {
      color: inherit;
      text-decoration: underline;
      cursor: pointer;
    }

    #app, #loading, #error, #launch {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
    }
    .screen {
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      text-align: center;
      cursor: default;
      user-select: none;
      -webkit-user-select: none;
      background-color: #000000;
    }
    #launch {
      background-color: rgba(0, 0, 0, 0.7);
      cursor: pointer;
    }
    .green-flag {
      width: 80px;
      height: 80px;
      padding: 16px;
      border-radius: 100%;
      background: rgba(255, 255, 255, 0.75);
      border: 3px solid hsla(0, 100%, 100%, 1);
      display: flex;
      justify-content: center;
      align-items: center;
      box-sizing: border-box;
    }
    #loading {
      
    }
    .progress-bar-outer {
      border: 1px solid currentColor;
      height: 10px;
      width: 200px;
      max-width: 200px;
    }
    .progress-bar-inner {
      height: 100%;
      width: 0;
      background-color: currentColor;
    }
    .loading-text, noscript {
      font-weight: normal;
      font-size: 36px;
      margin: 0 0 16px;
    }
    .loading-image {
      margin: 0 0 16px;
    }
    #error-message, #error-stack {
      font-family: monospace;
      max-width: 600px;
      white-space: pre-wrap;
      user-select: text;
      -webkit-user-select: text;
    }
    #error-stack {
      text-align: left;
      max-height: 200px;
      overflow: auto;
    }
    .control-button {
      width: 2rem;
      height: 2rem;
      padding: 0.375rem;
      margin-top: 0.5rem;
      margin-bottom: 0.5rem;
      user-select: none;
      -webkit-user-select: none;
      cursor: pointer;
      border: 0;
      border-radius: 4px;
    }
    .control-button:hover {
      background: #ff4c4c26;
    }
    .control-button.active {
      background: #ff4c4c59;
    }
    .fullscreen-button {
      background: white !important;
    }
    .standalone-fullscreen-button {
      position: absolute;
      top: 0;
      right: 0;
      background-color: rgba(0, 0, 0, 0.5);
      border-radius: 0 0 0 4px;
      padding: 4px;
      cursor: pointer;
    }
    .sc-canvas {
      cursor: auto;
    }
    .sc-monitor-root[data-opcode^="data_"] .sc-monitor-value-color {
      background-color: #ff8c1a;
    }
    .sc-monitor-row-value-outer {
      background-color: #fc662c;
    }
    .sc-monitor-row-value-editing .sc-monitor-row-value-outer {
      background-color: #e25b27;
    }
    
  </style>
  <meta name="theme-color" content="#000000">
  
</head>
<body>
  <div id="app"></div>

  <div id="launch" class="screen" hidden title="Click to start">
    <div class="green-flag">
      <svg viewBox="0 0 16.63 17.5" width="42" height="44">
        <defs><style>.cls-1,.cls-2{fill:#4cbf56;stroke:#45993d;stroke-linecap:round;stroke-linejoin:round;}.cls-2{stroke-width:1.5px;}</style></defs>
        <path class="cls-1" d="M.75,2A6.44,6.44,0,0,1,8.44,2h0a6.44,6.44,0,0,0,7.69,0V12.4a6.44,6.44,0,0,1-7.69,0h0a6.44,6.44,0,0,0-7.69,0"/>
        <line class="cls-2" x1="0.75" y1="16.75" x2="0.75" y2="0.75"/>
      </svg>
    </div>
  </div>

  <div id="loading" class="screen">
    <noscript>Enable JavaScript</noscript>
    
    
    <div class="progress-bar-outer"><div class="progress-bar-inner" id="loading-inner"></div></div>
  </div>

  <div id="error" class="screen" hidden>
    <h1>Error</h1>
    <details>
      <summary id="error-message"></summary>
      <p id="error-stack"></p>
    </details>
  </div>

  <script src="script.js"></script>
  <script>
    const appElement = document.getElementById('app');
    const launchScreen = document.getElementById('launch');
    const loadingScreen = document.getElementById('loading');
    const loadingInner = document.getElementById('loading-inner');
    const errorScreen = document.getElementById('error');
    const errorScreenMessage = document.getElementById('error-message');
    const errorScreenStack = document.getElementById('error-stack');

    const handleError = (error) => {
      console.error(error);
      if (!errorScreen.hidden) return;
      errorScreen.hidden = false;
      errorScreenMessage.textContent = '' + error;
      let debug = error && error.stack || 'no stack';
      debug += '\nUser agent: ' + navigator.userAgent;
      errorScreenStack.textContent = debug;
    };
    const setProgress = (progress) => {
      if (loadingInner) loadingInner.style.width = progress * 100 + '%';
    };
    const interpolate = (a, b, t) => a + t * (b - a);

    try {
      setProgress(0.1);

      const scaffolding = new Scaffolding.Scaffolding();
      scaffolding.width = 640;
      scaffolding.height = 360;
      scaffolding.resizeMode = "preserve-ratio";
      scaffolding.editableLists = false;
      scaffolding.usePackagedRuntime = false;
      scaffolding.setup();
      scaffolding.appendTo(appElement);

      const vm = scaffolding.vm;
      window.scaffolding = scaffolding;
      window.vm = scaffolding.vm;
      window.Scratch = {
        vm,
        renderer: vm.renderer,
        audioEngine: vm.runtime.audioEngine,
        bitmapAdapter: vm.runtime.v2BitmapAdapter,
        videoProvider: vm.runtime.ioDevices.video.provider
      };

      scaffolding.setUsername("player####".replace(/#/g, () => Math.floor(Math.random() * 10)));
      scaffolding.setAccentColor("#ff4c4c");

      try {
        scaffolding.addCloudProvider(new Scaffolding.Cloud.WebSocketProvider(["wss://clouddata.turbowarp.org","wss://clouddata.turbowarp.xyz"], "p4-@esrres.sb3"));
      } catch (error) {
        console.error(error);
      }

      vm.setTurboMode(false);
      if (vm.setInterpolation) vm.setInterpolation(true);
      if (vm.setFramerate) vm.setFramerate(60);
      if (vm.renderer.setUseHighQualityRender) vm.renderer.setUseHighQualityRender(true);
      if (vm.setRuntimeOptions) vm.setRuntimeOptions({
        fencing: false,
        miscLimits: false,
        maxClones: 9999999999,
      });
      if (vm.setCompilerOptions) vm.setCompilerOptions({
        enabled: true,
        warpTimer: false
      });
      if (vm.renderer.setMaxTextureDimension) vm.renderer.setMaxTextureDimension(2048);

      if (typeof ScaffoldingAddons !== 'undefined') {
        ScaffoldingAddons.run(scaffolding, {"gamepad":false,"pointerlock":false,"specialCloudBehaviors":false,"unsafeCloudBehaviors":false,"pause":false});
      }

      scaffolding.setExtensionSecurityManager({
        getSandboxMode: () => 'unsandboxed',
        canLoadExtensionFromProject: () => true
      });
      for (const extension of ["data:text/javascript;base64,Ly8gTmFtZTogTGF5ZXIgQ29udHJvbAovLyBJRDogU1BsYXllcmluZwovLyBEZXNjcmlwdGlvbjogUmVsYXllciBQZW4sIFZpZGVvIENhbWVyYSwgQmFja2Ryb3BzLCBTcHJpdGVzIGFuZCBNb3JlCi8vIEJ5OiBTaGFya1Bvb2wKCi8vIFZlcnNpb24gVi4xLjAuNAoKKGZ1bmN0aW9uIChTY3JhdGNoKSB7CiAgInVzZSBzdHJpY3QiOwogIGlmICghU2NyYXRjaC5leHRlbnNpb25zLnVuc2FuZGJveGVkKSB0aHJvdyBuZXcgRXJyb3IoIkxheWVyIENvbnRyb2wgbXVzdCBydW4gdW5zYW5kYm94ZWQhIik7CgogIGNvbnN0IHZtID0gU2NyYXRjaC52bTsKICBjb25zdCBydW50aW1lID0gdm0ucnVudGltZTsKCiAgY29uc3QgbWVudUljb25VUkkgPQoiZGF0YTppbWFnZS9zdmcreG1sO2Jhc2U2NCxQSE4yWnlCMlpYSnphVzl1UFNJeExqRWlJSGh0Ykc1elBTSm9kSFJ3T2k4dmQzZDNMbmN6TG05eVp5OHlNREF3TDNOMlp5SWdlRzFzYm5NNmVHeHBibXM5SW1oMGRIQTZMeTkzZDNjdWR6TXViM0puTHpFNU9Ua3ZlR3hwYm1zaUlIZHBaSFJvUFNJeE1EUXVORGcwTlRRaUlHaGxhV2RvZEQwaU1UQTBMalE0TkRVMElpQjJhV1YzUW05NFBTSXdMREFzTVRBMExqUTRORFUwTERFd05DNDBPRFExTkNJK1BHY2dkSEpoYm5ObWIzSnRQU0owY21GdWMyeGhkR1VvTFRFNE55NDNOVGMzTml3dE1USTNMamMxTnpjMktTSStQR2NnWkdGMFlTMXdZWEJsY2kxa1lYUmhQU0o3Sm5GMWIzUTdhWE5RWVdsdWRHbHVaMHhoZVdWeUpuRjFiM1E3T25SeWRXVjlJaUJtYVd4c0xYSjFiR1U5SW01dmJucGxjbThpSUhOMGNtOXJaUzFzYVc1bFkyRndQU0ppZFhSMElpQnpkSEp2YTJVdGJHbHVaV3B2YVc0OUltMXBkR1Z5SWlCemRISnZhMlV0YldsMFpYSnNhVzFwZEQwaU1UQWlJSE4wY205clpTMWtZWE5vWVhKeVlYazlJaUlnYzNSeWIydGxMV1JoYzJodlptWnpaWFE5SWpBaUlITjBlV3hsUFNKdGFYZ3RZbXhsYm1RdGJXOWtaVG9nYm05eWJXRnNJajQ4Y0dGMGFDQmtQU0pOTVRrd0xqSTFOemMzTERFNE1DNHdNREF3TkdNd0xDMHlOeTQwTnpFNE9TQXlNaTR5TnpBek55d3RORGt1TnpReU1qY2dORGt1TnpReU1qY3NMVFE1TGpjME1qSTNZekkzTGpRM01UZzVMREFnTkRrdU56UXlNamNzTWpJdU1qY3dNemNnTkRrdU56UXlNamNzTkRrdU56UXlNamRqTUN3eU55NDBOekU0T1NBdE1qSXVNamN3TXpjc05Ea3VOelF5TWpjZ0xUUTVMamMwTWpJM0xEUTVMamMwTWpJM1l5MHlOeTQwTnpFNE9Td3dJQzAwT1M0M05ESXlOeXd0TWpJdU1qY3dNemNnTFRRNUxqYzBNakkzTEMwME9TNDNOREl5TjNvaUlHWnBiR3c5SWlOaVlqY3haVFlpSUhOMGNtOXJaVDBpSXpnNU5UTmhPQ0lnYzNSeWIydGxMWGRwWkhSb1BTSTFJaTgrUEhCaGRHZ2daRDBpVFRJeE5TNDJNekkxTnl3eE9EUXVOakk0T1ROakxUTXVORGM0T1Rnc01DQXROaTR5T1RreU5Dd3RNaTQ0TWpBeU55QXROaTR5T1RreU5Dd3ROaTR5T1RreU5IWXRNakl1TmprM01URmpNQ3d0TXk0ME56ZzVPQ0F5TGpneU1ESTNMQzAyTGpJNU9USTBJRFl1TWprNU1qUXNMVFl1TWprNU1qUm9Nakl1TmprM01URmpNeTQwTnpnNU9Dd3dJRFl1TWprNU1qUXNNaTQ0TWpBeU55QTJMakk1T1RJMExEWXVNams1TWpSMk1qSXVOamszTVRGak1Dd3pMalEzT0RrNElDMHlMamd5TURJM0xEWXVNams1TWpRZ0xUWXVNams1TWpRc05pNHlPVGt5TkhvaUlHWnBiR3c5SWlObVptWm1abVlpSUhOMGNtOXJaVDBpYm05dVpTSWdjM1J5YjJ0bExYZHBaSFJvUFNJd0lpOCtQSEJoZEdnZ1pEMGlUVEl5T0M0Mk5URTBOQ3d4T1RjdU5qUTNPR010TXk0ME56ZzVPQ3d3SUMwMkxqSTVPVEkwTEMweUxqZ3lNREkzSUMwMkxqSTVPVEkwTEMwMkxqSTVPVEkwZGkweU1pNDJPVGN4TVdNd0xDMHpMalEzT0RrNElESXVPREl3TWpjc0xUWXVNams1TWpRZ05pNHlPVGt5TkN3dE5pNHlPVGt5TkdneU1pNDJPVGN4TVdNekxqUTNPRGs0TERBZ05pNHlPVGt5TkN3eUxqZ3lNREkzSURZdU1qazVNalFzTmk0eU9Ua3lOSFl5TWk0Mk9UY3hNV013TERNdU5EYzRPVGdnTFRJdU9ESXdNamNzTmk0eU9Ua3lOQ0F0Tmk0eU9Ua3lOQ3cyTGpJNU9USTBlaUlnWm1sc2JEMGlibTl1WlNJZ2MzUnliMnRsUFNJalltSTNNV1UySWlCemRISnZhMlV0ZDJsa2RHZzlJamN1TlNJdlBqeHdZWFJvSUdROUlrMHlNamd1TmpVeE5EUXNNVGszTGpZME56aGpMVE11TkRjNE9UZ3NNQ0F0Tmk0eU9Ua3lOQ3d0TWk0NE1qQXlOeUF0Tmk0eU9Ua3lOQ3d0Tmk0eU9Ua3lOSFl0TWpJdU5qazNNVEZqTUN3dE15NDBOemc1T0NBeUxqZ3lNREkzTEMwMkxqSTVPVEkwSURZdU1qazVNalFzTFRZdU1qazVNalJvTWpJdU5qazNNVEZqTXk0ME56ZzVPQ3d3SURZdU1qazVNalFzTWk0NE1qQXlOeUEyTGpJNU9USTBMRFl1TWprNU1qUjJNakl1TmprM01URmpNQ3d6TGpRM09EazRJQzB5TGpneU1ESTNMRFl1TWprNU1qUWdMVFl1TWprNU1qUXNOaTR5T1RreU5Ib2lJR1pwYkd3OUlpTm1abVptWm1ZaUlITjBjbTlyWlQwaWJtOXVaU0lnYzNSeWIydGxMWGRwWkhSb1BTSXdJaTgrUEhCaGRHZ2daRDBpVFRJME1TNDJOekF6TVN3eU1UQXVOalkyTmpkakxUTXVORGM0T1Rnc01DQXROaTR5T1RreU5Dd3RNaTQ0TWpBeU55QXROaTR5T1RreU5Dd3ROaTR5T1RreU5IWXRNakl1TmprM01URmpNQ3d0TXk0ME56ZzVPQ0F5TGpneU1ESTNMQzAyTGpJNU9USTBJRFl1TWprNU1qUXNMVFl1TWprNU1qUm9Nakl1TmprM01URmpNeTQwTnpnNU9Dd3dJRFl1TWprNU1qUXNNaTQ0TWpBeU55QTJMakk1T1RJMExEWXVNams1TWpSMk1qSXVOamszTVRGak1Dd3pMalEzT0RrNElDMHlMamd5TURJM0xEWXVNams1TWpRZ0xUWXVNams1TWpRc05pNHlPVGt5TkhvaUlHWnBiR3c5SW01dmJtVWlJSE4wY205clpUMGlJMkppTnpGbE5pSWdjM1J5YjJ0bExYZHBaSFJvUFNJM0xqVWlMejQ4Y0dGMGFDQmtQU0pOTWpReExqWTNNRE14TERJeE1DNDJOalkyTjJNdE15NDBOemc1T0N3d0lDMDJMakk1T1RJMExDMHlMamd5TURJM0lDMDJMakk1T1RJMExDMDJMakk1T1RJMGRpMHlNaTQyT1RjeE1XTXdMQzB6TGpRM09EazRJREl1T0RJd01qY3NMVFl1TWprNU1qUWdOaTR5T1RreU5Dd3ROaTR5T1RreU5HZ3lNaTQyT1RjeE1XTXpMalEzT0RrNExEQWdOaTR5T1RreU5Dd3lMamd5TURJM0lEWXVNams1TWpRc05pNHlPVGt5TkhZeU1pNDJPVGN4TVdNd0xETXVORGM0T1RnZ0xUSXVPREl3TWpjc05pNHlPVGt5TkNBdE5pNHlPVGt5TkN3MkxqSTVPVEkwZWlJZ1ptbHNiRDBpSTJabVptWm1aaUlnYzNSeWIydGxQU0p1YjI1bElpQnpkSEp2YTJVdGQybGtkR2c5SWpBaUx6NDhMMmMrUEM5blBqd3ZjM1puUGc9PSI7CgogIC8vIENyYXNoIFByZXZlbnRlciAtLSBCeSBHYXJib011ZmZpbiAoTW9yZSBFdmVudHMpCiAgLy8gU2F2aW5nIFByb2plY3RzIHdpdGggSW5jb3JyZWN0IExheWVyaW5nIENvcnJ1cHRzIFByb2plY3RzLCB0aGlzIGZpeGVzIGl0IDpECiAgY29uc3Qgb3JpZ2luYWxTYXZlUHJvamVjdFNiMyA9IHZtLnNhdmVQcm9qZWN0U2IzOwogIHZtLnNhdmVQcm9qZWN0U2IzID0gYXN5bmMgZnVuY3Rpb24gKC4uLmFyZ3MpIHsKICAgIGF3YWl0IGJlZm9yZVNhdmUoKTsKICAgIHJldHVybiBhd2FpdCBvcmlnaW5hbFNhdmVQcm9qZWN0U2IzLmFwcGx5KHRoaXMsIGFyZ3MpOwogIH07CiAgY29uc3QgYmVmb3JlU2F2ZSA9ICgpID0+CiAgICBuZXcgUHJvbWlzZSgocmVzb2x2ZSkgPT4gewogICAgICBjb25zdCBpbnN0YW5jZUNsYXNzID0gbmV3IFNQbGF5ZXJpbmcoKTsKICAgICAgaW5zdGFuY2VDbGFzc1sicmVzZXQiXSgpOwogICAgICByZXNvbHZlKCk7CiAgICB9KTsKICBjb25zdCBvcmlnaW5hbFNhdmVQcm9qZWN0U2IzU3RyZWFtID0gdm0uc2F2ZVByb2plY3RTYjNTdHJlYW07CiAgdm0uc2F2ZVByb2plY3RTYjNTdHJlYW0gPSBmdW5jdGlvbiAoLi4uYXJncykgewogICAgbGV0IHJlYWxTdHJlYW0gPSBudWxsOwogICAgY29uc3QgcXVldWVkQ2FsbHMgPSBbXTsKICAgIGNvbnN0IHdoZW5TdHJlYW1SZWFkeSA9IChtZXRob2ROYW1lLCBhcmdzKSA9PiB7CiAgICAgIGlmIChyZWFsU3RyZWFtKSByZXR1cm4gcmVhbFN0cmVhbVttZXRob2ROYW1lXS5hcHBseShyZWFsU3RyZWFtLCBhcmdzKTsKICAgICAgZWxzZSB7CiAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlKSA9PiB7CiAgICAgICAgICBxdWV1ZWRDYWxscy5wdXNoKHsgcmVzb2x2ZSwgbWV0aG9kTmFtZSwgYXJncyB9KTsKICAgICAgICB9KTsKICAgICAgfQogICAgfTsKICAgIGNvbnN0IHN0cmVhbVdyYXBwZXIgPSB7CiAgICAgIG9uOiAoLi4uYXJncykgPT4gdm9pZCB3aGVuU3RyZWFtUmVhZHkoIm9uIiwgYXJncyksCiAgICAgIHBhdXNlOiAoLi4uYXJncykgPT4gdm9pZCB3aGVuU3RyZWFtUmVhZHkoInBhdXNlIiwgYXJncyksCiAgICAgIHJlc3VtZTogKC4uLmFyZ3MpID0+IHZvaWQgd2hlblN0cmVhbVJlYWR5KCJyZXN1bWUiLCBhcmdzKSwKICAgICAgYWNjdW11bGF0ZTogKC4uLmFyZ3MpID0+IHdoZW5TdHJlYW1SZWFkeSgiYWNjdW11bGF0ZSIsIGFyZ3MpLAogICAgfTsKICAgIGJlZm9yZVNhdmUoKS50aGVuKCgpID0+IHsKICAgICAgcmVhbFN0cmVhbSA9IG9yaWdpbmFsU2F2ZVByb2plY3RTYjNTdHJlYW0uYXBwbHkodGhpcywgYXJncyk7CiAgICAgIGZvciAoY29uc3QgcXVldWVkIG9mIHF1ZXVlZENhbGxzKSB7CiAgICAgICAgcXVldWVkLnJlc29sdmUocmVhbFN0cmVhbVtxdWV1ZWQubWV0aG9kTmFtZV0uYXBwbHkocmVhbFN0cmVhbSwgcXVldWVkLmFyZ3MpKTsKICAgICAgfQogICAgICBxdWV1ZWRDYWxscy5sZW5ndGggPSAwOwogICAgfSk7CiAgICByZXR1cm4gc3RyZWFtV3JhcHBlcjsKICB9OwoKICBjbGFzcyBTUGxheWVyaW5nIHsKICAgIGdldEluZm8oKSB7CiAgICAgIHJldHVybiB7CiAgICAgICAgaWQ6ICJTUGxheWVyaW5nIiwKICAgICAgICBuYW1lOiAiTGF5ZXIgQ29udHJvbCIsCiAgICAgICAgY29sb3IxOiAiI2JiNzFlNiIsCiAgICAgICAgbWVudUljb25VUkksCiAgICAgICAgYmxvY2tzOiBbCiAgICAgICAgICB7CiAgICAgICAgICAgIG9wY29kZTogImdldEFsbElEIiwKICAgICAgICAgICAgYmxvY2tUeXBlOiBTY3JhdGNoLkJsb2NrVHlwZS5SRVBPUlRFUiwKICAgICAgICAgICAgdGV4dDogImdldCBhbGwgbGF5ZXIgSURzIgogICAgICAgICAgfSwKICAgICAgICAgIHsKICAgICAgICAgICAgb3Bjb2RlOiAiZ2V0SUQiLAogICAgICAgICAgICBibG9ja1R5cGU6IFNjcmF0Y2guQmxvY2tUeXBlLlJFUE9SVEVSLAogICAgICAgICAgICB0ZXh0OiAiZ2V0IElEIGxheWVyIG9mIFtUQVJHRVRdIiwKICAgICAgICAgICAgYXJndW1lbnRzOiB7CiAgICAgICAgICAgICAgVEFSR0VUOiB7CiAgICAgICAgICAgICAgICB0eXBlOiBTY3JhdGNoLkFyZ3VtZW50VHlwZS5TVFJJTkcsCiAgICAgICAgICAgICAgICBtZW51OiAiVEFSR0VUUyIsCiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgICB9LAogICAgICAgICAgewogICAgICAgICAgICBvcGNvZGU6ICJnZXRPd25lciIsCiAgICAgICAgICAgIGJsb2NrVHlwZTogU2NyYXRjaC5CbG9ja1R5cGUuUkVQT1JURVIsCiAgICAgICAgICAgIHRleHQ6ICJnZXQgb3duZXIgb2YgbGF5ZXIgSUQgW0lEXSIsCiAgICAgICAgICAgIGFyZ3VtZW50czogewogICAgICAgICAgICAgIElEOiB7CiAgICAgICAgICAgICAgICB0eXBlOiBTY3JhdGNoLkFyZ3VtZW50VHlwZS5OVU1CRVIsCiAgICAgICAgICAgICAgICBkZWZhdWx0VmFsdWU6IDAKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICAgIH0sCiAgICAgICAgICB7CiAgICAgICAgICAgIG9wY29kZTogIm1vdmVJRCIsCiAgICAgICAgICAgIGJsb2NrVHlwZTogU2NyYXRjaC5CbG9ja1R5cGUuQ09NTUFORCwKICAgICAgICAgICAgdGV4dDogInJlbGF5ZXIgSUQgW1RBUkdFVF0gdG8gbGF5ZXIgW09SREVSXSIsCiAgICAgICAgICAgIGFyZ3VtZW50czogewogICAgICAgICAgICAgIE9SREVSOiB7CiAgICAgICAgICAgICAgICB0eXBlOiBTY3JhdGNoLkFyZ3VtZW50VHlwZS5OVU1CRVIsCiAgICAgICAgICAgICAgICBkZWZhdWx0VmFsdWU6IDAKICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgIFRBUkdFVDogewogICAgICAgICAgICAgICAgdHlwZTogU2NyYXRjaC5Bcmd1bWVudFR5cGUuTlVNQkVSLAogICAgICAgICAgICAgICAgZGVmYXVsdFZhbHVlOiAxCiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgICB9LAogICAgICAgICAgewogICAgICAgICAgICBvcGNvZGU6ICJzd2FwSUQiLAogICAgICAgICAgICBibG9ja1R5cGU6IFNjcmF0Y2guQmxvY2tUeXBlLkNPTU1BTkQsCiAgICAgICAgICAgIHRleHQ6ICJzd2FwIGxheWVycyBvZiBJRCBbVEFSR0VUXSB3aXRoIElEIFtPUkRFUl0iLAogICAgICAgICAgICBhcmd1bWVudHM6IHsKICAgICAgICAgICAgICBPUkRFUjogewogICAgICAgICAgICAgICAgdHlwZTogU2NyYXRjaC5Bcmd1bWVudFR5cGUuTlVNQkVSLAogICAgICAgICAgICAgICAgZGVmYXVsdFZhbHVlOiAwCiAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICBUQVJHRVQ6IHsKICAgICAgICAgICAgICAgIHR5cGU6IFNjcmF0Y2guQXJndW1lbnRUeXBlLk5VTUJFUiwKICAgICAgICAgICAgICAgIGRlZmF1bHRWYWx1ZTogMQogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgICAgfSwKICAgICAgICAgIHsKICAgICAgICAgICAgb3Bjb2RlOiAicmVzZXQiLAogICAgICAgICAgICBibG9ja1R5cGU6IFNjcmF0Y2guQmxvY2tUeXBlLkNPTU1BTkQsCiAgICAgICAgICAgIHRleHQ6ICJyZXNldCBzcGVjaWFsIGxheWVycyIKICAgICAgICAgIH0KICAgICAgICBdLAogICAgICAgIG1lbnVzOiB7CiAgICAgICAgICBUQVJHRVRTOiB7CiAgICAgICAgICAgIGFjY2VwdFJlcG9ydGVyczogdHJ1ZSwKICAgICAgICAgICAgaXRlbXM6IHRoaXMuX2dldFRhcmdldHModHJ1ZSkKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH07CiAgICB9CgogICAgX2dldFRhcmdldHMoZW5hYmxlKSB7CiAgICAgIGNvbnN0IHNwcml0ZU5hbWVzID0gW107CiAgICAgIGlmIChlbmFibGUpIHNwcml0ZU5hbWVzLnB1c2goeyB0ZXh0OiAibXlzZWxmIiwgdmFsdWU6ICJfbXlzZWxmXyIgfSk7CiAgICAgIHNwcml0ZU5hbWVzLnB1c2goeyB0ZXh0OiAiU3RhZ2UiLCB2YWx1ZTogIl9zdGFnZV8iIH0pOwogICAgICBzcHJpdGVOYW1lcy5wdXNoKHsgdGV4dDogIlZpZGVvIExheWVyIiwgdmFsdWU6ICJfdmlkZW9fIiB9KTsKICAgICAgc3ByaXRlTmFtZXMucHVzaCh7IHRleHQ6ICJQZW4gTGF5ZXIiLCB2YWx1ZTogIl9wZW5fIiB9KTsKICAgICAgY29uc3QgdGFyZ2V0cyA9IFNjcmF0Y2gudm0ucnVudGltZS50YXJnZXRzOwogICAgICBmb3IgKGxldCBpbmRleCA9IDE7IGluZGV4IDwgdGFyZ2V0cy5sZW5ndGg7IGluZGV4KyspIHsKICAgICAgICBjb25zdCB0YXJnZXQgPSB0YXJnZXRzW2luZGV4XTsKICAgICAgICBpZiAodGFyZ2V0LmlzT3JpZ2luYWwpIHsKICAgICAgICAgIGNvbnN0IHRhcmdldE5hbWUgPSB0YXJnZXQuZ2V0TmFtZSgpOwogICAgICAgICAgc3ByaXRlTmFtZXMucHVzaCh7IHRleHQ6IHRhcmdldE5hbWUsIHZhbHVlOiB0YXJnZXROYW1lIH0pOwogICAgICAgIH0KICAgICAgfQogICAgICByZXR1cm4gc3ByaXRlTmFtZXMubGVuZ3RoID4gMCA/IHNwcml0ZU5hbWVzIDogWyIiXTsKICAgIH0KCiAgICBnZXRBbGxJRCgpIHsgcmV0dXJuIEpTT04uc3RyaW5naWZ5KHZtLnJlbmRlcmVyLl9kcmF3TGlzdCkgfQoKICAgIGdldElEKGFyZ3MsIHV0aWwpIHsKICAgICAgaWYgKGFyZ3MuVEFSR0VUID09PSAiX215c2VsZl8iKSByZXR1cm4gdXRpbC50YXJnZXQuZHJhd2FibGVJRDsKICAgICAgaWYgKGFyZ3MuVEFSR0VUID09PSAiX3N0YWdlXyIpIHJldHVybiBydW50aW1lLmdldFRhcmdldEZvclN0YWdlKCkuZHJhd2FibGVJRDsKICAgICAgaWYgKGFyZ3MuVEFSR0VUID09PSAiX3Blbl8iKSByZXR1cm4gdGhpcy5maW5kU3BlY2lhbCh2bS5yZW5kZXJlci5fYWxsRHJhd2FibGVzLCAiYV9saW5lQ29sb3JJbmRleCIpOwogICAgICBjb25zdCB2aWRlb0wgPSBydW50aW1lLmlvRGV2aWNlcy52aWRlby5fZHJhd2FibGU7CiAgICAgIGlmIChhcmdzLlRBUkdFVCA9PT0gIl92aWRlb18iKSByZXR1cm4gdmlkZW9MICE9PSAtMSA/IHZpZGVvTCA6ICIiOwogICAgICBjb25zdCB0YXJnZXQgPSBydW50aW1lLmdldFNwcml0ZVRhcmdldEJ5TmFtZShhcmdzLlRBUkdFVCk7CiAgICAgIHJldHVybiB0YXJnZXQgPyB0YXJnZXQuZHJhd2FibGVJRCA6ICIiOwogICAgfQogICAgLy8gcmVuZGVyZXIuX3BlblNraW5JRCBkb2VzbnQgd29yaywgd2UgbmVlZCB0byB1c2UgdGhpczoKICAgIGZpbmRTcGVjaWFsKGFycmF5LCBrZXkpIHsKICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBhcnJheS5sZW5ndGg7IGkrKykgewogICAgICAgIGlmIChhcnJheVtpXSAmJiBhcnJheVtpXS5za2luW2tleV0gIT09IHVuZGVmaW5lZCkgcmV0dXJuIGk7CiAgICAgIH0KICAgICAgcmV0dXJuICIiOwogICAgfQoKICAgIGdldE93bmVyKGFyZ3MsIHV0aWwpIHsKICAgICAgLy8gQ2FudCBQcm9wZXJseSBSZXR1cm4gTm9uLUV4aXN0ZW50IFBlbi9WaWRlbyBMYXllciwgRW1wdHkgTnVtYmVyIElucHV0cyBhcmUgMD8KICAgICAgY29uc3QgSUQgPSBTY3JhdGNoLkNhc3QudG9OdW1iZXIoYXJncy5JRCk7CiAgICAgIGNvbnN0IHBlbklEID0gdm0ucmVuZGVyZXIuX3BlblNraW5JZCB8fCAiIjsKICAgICAgY29uc3QgdmlkZW9MID0gcnVudGltZS5pb0RldmljZXMudmlkZW8uX2RyYXdhYmxlOwogICAgICBjb25zdCB2aWRJRCA9IHZpZGVvTCAhPT0gLTEgPyB2aWRlb0wgOiAiIjsKICAgICAgaWYgKElEID09PSBwZW5JRCkgcmV0dXJuICJQZW4gTGF5ZXIiOwogICAgICBpZiAoSUQgPT09IHZpZElEKSByZXR1cm4gIlZpZGVvIExheWVyIjsKICAgICAgaWYgKElEIDwgMCkgcmV0dXJuICIiOwogICAgICBjb25zdCBzcHJpdGVOYW1lcyA9IHt9OwogICAgICBjb25zdCB0YXJnZXRzID0gU2NyYXRjaC52bS5ydW50aW1lLnRhcmdldHM7CiAgICAgIGZvciAobGV0IGluZGV4ID0gMDsgaW5kZXggPCB0YXJnZXRzLmxlbmd0aDsgaW5kZXgrKykgewogICAgICAgIGNvbnN0IHRhcmdldCA9IHRhcmdldHNbaW5kZXhdOwogICAgICAgIHNwcml0ZU5hbWVzW3RhcmdldC5kcmF3YWJsZUlEXSA9IHsKICAgICAgICAgIHRleHQ6IGAke3RhcmdldC5nZXROYW1lKCl9JHt0YXJnZXQuaXNPcmlnaW5hbCA/ICIiIDogIiAoQ2xvbmUpIn1gCiAgICAgICAgfTsKICAgICAgfQogICAgICByZXR1cm4gc3ByaXRlTmFtZXNbSURdID8gc3ByaXRlTmFtZXNbSURdLnRleHQgOiAiIjsKICAgIH0KCiAgICByZXNldCgpIHsKICAgICAgY29uc3QgZHJhd2FibGVzID0gdm0ucmVuZGVyZXIuX2RyYXdMaXN0OwogICAgICBjb25zdCBzdGFnZSA9IHJ1bnRpbWUuZ2V0VGFyZ2V0Rm9yU3RhZ2UoKS5kcmF3YWJsZUlEOwogICAgICBjb25zdCBwZW4gPSB2bS5yZW5kZXJlci5fcGVuU2tpbklkIHx8IC0xOwogICAgICBjb25zdCB2aWRlbyA9IHJ1bnRpbWUuaW9EZXZpY2VzLnZpZGVvLl9kcmF3YWJsZSB8fCAtMTsKICAgICAgY29uc3QgbmV3RHJhdyA9IFtzdGFnZSwgLi4uZHJhd2FibGVzLmZpbHRlcihpdGVtID0+ICFbc3RhZ2UsIHBlbiwgdmlkZW9dLmluY2x1ZGVzKGl0ZW0pKV07CiAgICAgIGlmICh2aWRlbyAhPT0gLTEpIG5ld0RyYXcuc3BsaWNlKDEsIDAsIHZpZGVvKTsKICAgICAgaWYgKHBlbiAhPT0gLTEpIG5ld0RyYXcuc3BsaWNlKHZpZGVvICE9PSAtMSA/IDIgOiAxLCAwLCBwZW4pOwogICAgICB2bS5yZW5kZXJlci5fZHJhd0xpc3QgPSBuZXdEcmF3OwogICAgICB2bS5ydW50aW1lLnRhcmdldHNbMF0udXBkYXRlQWxsRHJhd2FibGVQcm9wZXJ0aWVzKCk7CiAgICAgIHJ1bnRpbWUucmVxdWVzdFJlZHJhdygpOwogICAgfQoKICAgIG1vdmVJRChhcmdzKSB7CiAgICAgIGNvbnN0IGFsbExheSA9IHZtLnJlbmRlcmVyLl9kcmF3TGlzdDsKICAgICAgY29uc3QgaW5kZXggPSBhbGxMYXkuaW5kZXhPZihhcmdzLlRBUkdFVCk7CiAgICAgIGNvbnN0IHRhcmdldEwgPSBNYXRoLm1heCgwLCBNYXRoLm1pbihhbGxMYXkubGVuZ3RoIC0gMSwgTWF0aC5yb3VuZChhcmdzLk9SREVSKSkpOwogICAgICBpZiAoaW5kZXggIT09IC0xKSB7CiAgICAgICAgY29uc3QgcmVtb3ZlZExheWVyID0gYWxsTGF5LnNwbGljZShpbmRleCwgMSlbMF07CiAgICAgICAgdm0ucmVuZGVyZXIuX2RyYXdMaXN0LnNwbGljZSh0YXJnZXRMLCAwLCByZW1vdmVkTGF5ZXIpOwogICAgICAgIHZtLnJ1bnRpbWUudGFyZ2V0c1swXS51cGRhdGVBbGxEcmF3YWJsZVByb3BlcnRpZXMoKTsKICAgICAgICBydW50aW1lLnJlcXVlc3RSZWRyYXcoKTsKICAgICAgfQogICAgfQoKICAgIHN3YXBJRChhcmdzKSB7CiAgICAgIGNvbnN0IGFsbExheSA9IHZtLnJlbmRlcmVyLl9kcmF3TGlzdDsKICAgICAgY29uc3QgdGFyZ2V0MSA9IGFsbExheS5pbmRleE9mKGFyZ3MuVEFSR0VUKTsKICAgICAgY29uc3QgdGFyZ2V0MiA9IGFsbExheS5pbmRleE9mKGFyZ3MuT1JERVIpOwogICAgICBpZiAodGFyZ2V0MSA9PT0gLTEgfHwgdGFyZ2V0MiA9PT0gLTEpIHJldHVybjsKICAgICAgaWYgKHRhcmdldDEgIT09IHRhcmdldDIgJiYgdGFyZ2V0MSA+PSAwICYmIHRhcmdldDEgPCBhbGxMYXkubGVuZ3RoICYmIHRhcmdldDIgPj0gMCAmJiB0YXJnZXQyIDwgYWxsTGF5Lmxlbmd0aCkgewogICAgICAgIFthbGxMYXlbdGFyZ2V0MV0sIGFsbExheVt0YXJnZXQyXV0gPSBbYWxsTGF5W3RhcmdldDJdLCBhbGxMYXlbdGFyZ2V0MV1dOwogICAgICAgIHZtLnJ1bnRpbWUudGFyZ2V0c1swXS51cGRhdGVBbGxEcmF3YWJsZVByb3BlcnRpZXMoKTsKICAgICAgICBydW50aW1lLnJlcXVlc3RSZWRyYXcoKTsKICAgICAgfQogICAgfQogIH0KCiAgU2NyYXRjaC5leHRlbnNpb25zLnJlZ2lzdGVyKG5ldyBTUGxheWVyaW5nKCkpOwp9KShTY3JhdGNoKTsK","data:text/javascript;base64,Ly8gTmFtZTogRXh0cmEgQ29udHJvbHMNCi8vIElEOiBTUGFkdkNvbnRyb2wNCi8vIERlc2NyaXB0aW9uOiBOZXcgQWR2YW5jZWQgQ29udHJvbCBCbG9ja3MNCi8vIEJ5OiBTaGFya1Bvb2wNCg0KLy8gVmVyc2lvbiBWLjEuMi4yDQoNCihmdW5jdGlvbiAoU2NyYXRjaCkgew0KICAidXNlIHN0cmljdCI7DQogIGlmICghU2NyYXRjaC5leHRlbnNpb25zLnVuc2FuZGJveGVkKSB0aHJvdyBuZXcgRXJyb3IoIkV4dHJhIENvbnRyb2xzIG11c3QgcnVuIHVuc2FuZGJveGVkIik7DQoNCiAgY29uc3Qgdm0gPSBTY3JhdGNoLnZtOw0KICBjb25zdCBydW50aW1lID0gdm0ucnVudGltZTsNCiAgY29uc3QgcmVnZW5lcmF0ZWRSZXBvcnRlcnMgPSBbIlNQYWR2Q29udHJvbF90aHJlYWRBcmdzIl07DQoNCiAgY29uc3QgbWVudUljb25VUkkgPQ0KImRhdGE6aW1hZ2Uvc3ZnK3htbDtiYXNlNjQsUEhOMlp5QjJaWEp6YVc5dVBTSXhMakVpSUhodGJHNXpQU0pvZEhSd09pOHZkM2QzTG5jekxtOXlaeTh5TURBd0wzTjJaeUlnZUcxc2JuTTZlR3hwYm1zOUltaDBkSEE2THk5M2QzY3Vkek11YjNKbkx6RTVPVGt2ZUd4cGJtc2lJSGRwWkhSb1BTSTJPUzQxTmpVeU15SWdhR1ZwWjJoMFBTSTJPUzQxTmpVeU15SWdkbWxsZDBKdmVEMGlNQ3d3TERZNUxqVTJOVEl6TERZNUxqVTJOVEl6SWo0OFp5QjBjbUZ1YzJadmNtMDlJblJ5WVc1emJHRjBaU2d0TWpBMUxqSXhOek00TEMweE5EVXVNakUzTXpncElqNDhaeUJrWVhSaExYQmhjR1Z5TFdSaGRHRTlJbnNtY1hWdmREdHBjMUJoYVc1MGFXNW5UR0Y1WlhJbWNYVnZkRHM2ZEhKMVpYMGlJR1pwYkd3dGNuVnNaVDBpYm05dWVtVnlieUlnYzNSeWIydGxMV3hwYm1WcWIybHVQU0p0YVhSbGNpSWdjM1J5YjJ0bExXMXBkR1Z5YkdsdGFYUTlJakV3SWlCemRISnZhMlV0WkdGemFHRnljbUY1UFNJaUlITjBjbTlyWlMxa1lYTm9iMlptYzJWMFBTSXdJaUJ6ZEhsc1pUMGliV2w0TFdKc1pXNWtMVzF2WkdVNklHNXZjbTFoYkNJK1BIQmhkR2dnWkQwaVRUSXdOeTR5TVRjek9Td3hPREJqTUN3dE1UZ3VNVEExTXpNZ01UUXVOamMzTWpnc0xUTXlMamM0TWpZeElETXlMamM0TWpZeExDMHpNaTQzT0RJMk1XTXhPQzR4TURVek5Dd3dJRE15TGpjNE1qWXlMREUwTGpZM056STRJRE15TGpjNE1qWXlMRE15TGpjNE1qWXhZekFzTVRndU1UQTFNek1nTFRFMExqWTNOekk0TERNeUxqYzRNall4SUMwek1pNDNPREkyTWl3ek1pNDNPREkyTVdNdE1UZ3VNVEExTXpNc01DQXRNekl1TnpneU5qRXNMVEUwTGpZM056STRJQzB6TWk0M09ESTJNU3d0TXpJdU56Z3lOakY2SWlCbWFXeHNQU0lqWm1aaFlqRTVJaUJ6ZEhKdmEyVTlJaU5qWmpoaU1UY2lJSE4wY205clpTMTNhV1IwYUQwaU5DSWdjM1J5YjJ0bExXeHBibVZqWVhBOUltSjFkSFFpTHo0OGNHRjBhQ0JrUFNKTk1qWXdMakUyTmpZM0xERTRNR2d0TkRBdU16TXpNek1pSUdacGJHdzlJbTV2Ym1VaUlITjBjbTlyWlQwaUkyWm1abVptWmlJZ2MzUnliMnRsTFhkcFpIUm9QU0kxSWlCemRISnZhMlV0YkdsdVpXTmhjRDBpY205MWJtUWlMejQ4Y0dGMGFDQmtQU0pOTWpZd0xqRTJOalkzTERFMk55NHpPVFU0TkdndE5EQXVNek16TXpNaUlHWnBiR3c5SW01dmJtVWlJSE4wY205clpUMGlJMlptWm1abVppSWdjM1J5YjJ0bExYZHBaSFJvUFNJMUlpQnpkSEp2YTJVdGJHbHVaV05oY0QwaWNtOTFibVFpTHo0OGNHRjBhQ0JrUFNKTk1qWXdMakUyTmpZM0xERTVNaTQyTURReE4yZ3ROREF1TXpNek16TWlJR1pwYkd3OUltNXZibVVpSUhOMGNtOXJaVDBpSTJabVptWm1aaUlnYzNSeWIydGxMWGRwWkhSb1BTSTFJaUJ6ZEhKdmEyVXRiR2x1WldOaGNEMGljbTkxYm1RaUx6NDhjR0YwYUNCa1BTSk5Nakl6TGpnek16TTBMREU0TUM0eE5qWTJOMk13TEMwekxqUXdOVGMxSURJdU56WXdPVEVzTFRZdU1UWTJOallnTmk0eE5qWTJOaXd0Tmk0eE5qWTJObU16TGpRd05UYzFMREFnTmk0eE5qWTJOaXd5TGpjMk1Ea3hJRFl1TVRZMk5qWXNOaTR4TmpZMk5tTXdMRE11TkRBMU56VWdMVEl1TnpZd09URXNOaTR4TmpZMk55QXROaTR4TmpZMk5pdzJMakUyTmpZM1l5MHpMalF3TlRjMUxEQWdMVFl1TVRZMk5qWXNMVEl1TnpZd09USWdMVFl1TVRZMk5qWXNMVFl1TVRZMk5qZDZJaUJtYVd4c1BTSWpabVptWm1abUlpQnpkSEp2YTJVOUlpTm1abUZpTVRraUlITjBjbTlyWlMxM2FXUjBhRDBpTlNJZ2MzUnliMnRsTFd4cGJtVmpZWEE5SW1KMWRIUWlMejQ4Y0dGMGFDQmtQU0pOTWpRekxqZ3pNek0wTERFMk55NDFZekFzTFRNdU5EQTFOelVnTWk0M05qQTVNU3d0Tmk0eE5qWTJOaUEyTGpFMk5qWTJMQzAyTGpFMk5qWTJZek11TkRBMU56VXNNQ0EyTGpFMk5qWTNMREl1TnpZd09URWdOaTR4TmpZMk55dzJMakUyTmpZMll6QXNNeTQwTURVM05TQXRNaTQzTmpBNU1TdzJMakUyTmpZMklDMDJMakUyTmpZM0xEWXVNVFkyTmpaakxUTXVOREExTnpVc01DQXROaTR4TmpZMk5pd3RNaTQzTmpBNU1TQXROaTR4TmpZMk5pd3ROaTR4TmpZMk5ub2lJR1pwYkd3OUlpTm1abVptWm1ZaUlITjBjbTlyWlQwaUkyWm1ZV0l4T1NJZ2MzUnliMnRsTFhkcFpIUm9QU0kxSWlCemRISnZhMlV0YkdsdVpXTmhjRDBpWW5WMGRDSXZQanh3WVhSb0lHUTlJazB5TkRBdU5qWTJOamNzTVRreUxqWTJOalkzWXpBc0xUTXVOREExTnpVZ01pNDNOakE1TVN3dE5pNHhOalkyTmlBMkxqRTJOalkyTEMwMkxqRTJOalkyWXpNdU5EQTFOelVzTUNBMkxqRTJOalkyTERJdU56WXdPVEVnTmk0eE5qWTJOaXcyTGpFMk5qWTJZekFzTXk0ME1EVTNOU0F0TWk0M05qQTVNU3cyTGpFMk5qWTJJQzAyTGpFMk5qWTJMRFl1TVRZMk5qWmpMVE11TkRBMU56VXNNQ0F0Tmk0eE5qWTJOaXd0TWk0M05qQTVNU0F0Tmk0eE5qWTJOaXd0Tmk0eE5qWTJObm9pSUdacGJHdzlJaU5tWm1abVptWWlJSE4wY205clpUMGlJMlptWVdJeE9TSWdjM1J5YjJ0bExYZHBaSFJvUFNJMUlpQnpkSEp2YTJVdGJHbHVaV05oY0QwaVluVjBkQ0l2UGp4d1lYUm9JR1E5SWsweU1qTXVPRE16TXpRc01UZ3dMakUyTmpZM1l6QXNMVE11TkRBMU56VWdNaTQzTmpBNU1Td3ROaTR4TmpZMk5pQTJMakUyTmpZMkxDMDJMakUyTmpZMll6TXVOREExTnpVc01DQTJMakUyTmpZMkxESXVOell3T1RFZ05pNHhOalkyTml3MkxqRTJOalkyWXpBc015NDBNRFUzTlNBdE1pNDNOakE1TVN3MkxqRTJOalkzSUMwMkxqRTJOalkyTERZdU1UWTJOamRqTFRNdU5EQTFOelVzTUNBdE5pNHhOalkyTml3dE1pNDNOakE1TWlBdE5pNHhOalkyTml3dE5pNHhOalkyTjNvaUlHWnBiR3c5SWlObVptWm1abVlpSUhOMGNtOXJaVDBpSTJabVlXSXhPU0lnYzNSeWIydGxMWGRwWkhSb1BTSXdJaUJ6ZEhKdmEyVXRiR2x1WldOaGNEMGlZblYwZENJdlBqeHdZWFJvSUdROUlrMHlORE11T0RNek16UXNNVFkzTGpWak1Dd3RNeTQwTURVM05TQXlMamMyTURreExDMDJMakUyTmpZMklEWXVNVFkyTmpZc0xUWXVNVFkyTmpaak15NDBNRFUzTlN3d0lEWXVNVFkyTmpjc01pNDNOakE1TVNBMkxqRTJOalkzTERZdU1UWTJOalpqTUN3ekxqUXdOVGMxSUMweUxqYzJNRGt4TERZdU1UWTJOallnTFRZdU1UWTJOamNzTmk0eE5qWTJObU10TXk0ME1EVTNOU3d3SUMwMkxqRTJOalkyTEMweUxqYzJNRGt4SUMwMkxqRTJOalkyTEMwMkxqRTJOalkyZWlJZ1ptbHNiRDBpSTJabVptWm1aaUlnYzNSeWIydGxQU0lqWm1aaFlqRTVJaUJ6ZEhKdmEyVXRkMmxrZEdnOUlqQWlJSE4wY205clpTMXNhVzVsWTJGd1BTSmlkWFIwSWk4K1BIQmhkR2dnWkQwaVRUSTBNQzQyTmpZMk55d3hPVEl1TmpZMk5qZGpNQ3d0TXk0ME1EVTNOU0F5TGpjMk1Ea3hMQzAyTGpFMk5qWTJJRFl1TVRZMk5qWXNMVFl1TVRZMk5qWmpNeTQwTURVM05Td3dJRFl1TVRZMk5qWXNNaTQzTmpBNU1TQTJMakUyTmpZMkxEWXVNVFkyTmpaak1Dd3pMalF3TlRjMUlDMHlMamMyTURreExEWXVNVFkyTmpZZ0xUWXVNVFkyTmpZc05pNHhOalkyTm1NdE15NDBNRFUzTlN3d0lDMDJMakUyTmpZMkxDMHlMamMyTURreElDMDJMakUyTmpZMkxDMDJMakUyTmpZMmVpSWdabWxzYkQwaUkyWm1abVptWmlJZ2MzUnliMnRsUFNJalptWmhZakU1SWlCemRISnZhMlV0ZDJsa2RHZzlJakFpSUhOMGNtOXJaUzFzYVc1bFkyRndQU0ppZFhSMElpOCtQQzluUGp3dlp6NDhMM04yWno0PSI7DQoNCiAgY29uc3QgYnJlYWtJY29uID0NCiJkYXRhOmltYWdlL3N2Zyt4bWw7YmFzZTY0LFBITjJaeUIyWlhKemFXOXVQU0l4TGpFaUlIaHRiRzV6UFNKb2RIUndPaTh2ZDNkM0xuY3pMbTl5Wnk4eU1EQXdMM04yWnlJZ2VHMXNibk02ZUd4cGJtczlJbWgwZEhBNkx5OTNkM2N1ZHpNdWIzSm5MekU1T1RrdmVHeHBibXNpSUhkcFpIUm9QU0kyTlM0M09UVTFNU0lnYUdWcFoyaDBQU0kyTUM0d056UTVNaUlnZG1sbGQwSnZlRDBpTUN3d0xEWTFMamM1TlRVeExEWXdMakEzTkRreUlqNDhaeUIwY21GdWMyWnZjbTA5SW5SeVlXNXpiR0YwWlNndE1qQTNMakV3TWpJMUxDMHhORGt1T1RZeU5UUXBJajQ4WnlCa1lYUmhMWEJoY0dWeUxXUmhkR0U5SW5zbWNYVnZkRHRwYzFCaGFXNTBhVzVuVEdGNVpYSW1jWFZ2ZERzNmRISjFaWDBpSUdacGJHd3RjblZzWlQwaWJtOXVlbVZ5YnlJZ2MzUnliMnRsUFNKdWIyNWxJaUJ6ZEhKdmEyVXRiR2x1WldOaGNEMGlZblYwZENJZ2MzUnliMnRsTFd4cGJtVnFiMmx1UFNKdGFYUmxjaUlnYzNSeWIydGxMVzFwZEdWeWJHbHRhWFE5SWpFd0lpQnpkSEp2YTJVdFpHRnphR0Z5Y21GNVBTSWlJSE4wY205clpTMWtZWE5vYjJabWMyVjBQU0l3SWlCemRIbHNaVDBpYldsNExXSnNaVzVrTFcxdlpHVTZJRzV2Y20xaGJDSStQSEJoZEdnZ1pEMGlUVEl5T1M0eE56UXpOU3d4TlRRdU5ETTBNakpqTUN3eExqSWdNQzQxTERJdU5DQXhMakVzTWk0Mll6QXVPU3d3TGpNZ01DNDVMREV1TlNBd0xqTXNOQzR6WXkwd0xqY3NNeUF0TVM0MkxEUXVNU0F0TXk0NUxEUXVPR010TVM0M0xEQXVOU0F0TkM0NExESXVNeUF0Tmk0NUxETXVPR010TkM0NExETXVOU0F0Tnk0eUxETXVOaUF0TVRBdU15d3dMamRqTFRNdU55d3RNeTQxSUMwekxqRXNMVGN1T0NBeUxDMHhNMk15TGpNc0xUSXVOQ0ExTGpnc0xUVXVNU0EzTGpjc0xUWmpOaTR4TEMweklERXdMQzB4TGprZ01UQXNNaTQ0ZWsweU1qQXVOamMwTXpVc01UVTFMamN6TkRJeVl5MDBMamdzTXlBdE9TNDRMRGd1T0NBdE9TNHlMREV3TGpWak1DNDVMREl1TXlBekxqRXNNaUE0TGpRc0xURXVOR015TGpZc0xURXVOeUExTGpNc0xUTWdOaXd0TTJNd0xqY3NNQ0F4TGpNc0xUQXVOU0F4TGpNc0xURmpNQ3d0TUM0MklDMHdMallzTFRFZ0xURXVOQ3d0TVdNdE1TNDVMREFnTFRJdU9Td3RNeUF0TVM0MUxDMDBMalpqTVM0MkxDMHlJQzB3TGpFc0xURXVOeUF0TXk0MkxEQXVOWG9pSUdacGJHd3RiM0JoWTJsMGVUMGlNQzR4TlRZNE5pSWdabWxzYkQwaUl6QXdNREF3TUNJZ2MzUnliMnRsTFhkcFpIUm9QU0l4SWk4K1BIQmhkR2dnWkQwaVRUSXlOQzR6TURjMk5Td3hOVFV1TVRrMk9USmpMVEV1TkN3eExqWWdMVEF1TXpnek9EVXNOQzQyTWprNE55QXhMalV4TmpFMUxEUXVOakk1T0Rkak1DNDRMREFnTVM0ME1EQTFOU3d3TGpRd056WWdNUzQwTURBMU5Td3hMakF3Tnpaak1Dd3dMalVnTFRBdU5qQXdOaXd4TGpBd056VTFJQzB4TGpNd01EWXNNUzR3TURjMU5XTXRNQzQzTERBZ0xUTXVORFF5TXpRc01TNHpOREUzT0NBdE5pNHdOREl6TkN3ekxqQTBNVGM0WXkwMUxqTXNNeTQwSUMwM0xqVTBPREUxTERNdU5qYzVJQzA0TGpRME9ERTFMREV1TXpjNVl5MHdMallzTFRFdU55QTBMalExTkRFMkxDMDNMalUzTmpjMUlEa3VNalUwTVRZc0xURXdMalUzTmpjMVl6TXVOU3d0TWk0eUlEVXVNakl3TWpJc0xUSXVORGc1TURRZ015NDJNakF5TWl3dE1DNDBPRGt3TkhvaUlHUmhkR0V0Y0dGd1pYSXRaR0YwWVQwaWV5WnhkVzkwTzI1dlNHOTJaWEltY1hWdmREczZabUZzYzJVc0puRjFiM1E3YjNKcFowbDBaVzBtY1hWdmREczZXeVp4ZFc5ME8xQmhkR2dtY1hWdmREc3NleVp4ZFc5ME8yRndjR3g1VFdGMGNtbDRKbkYxYjNRN09uUnlkV1VzSm5GMWIzUTdjMlZuYldWdWRITW1jWFZ2ZERzNlcxdGJNakl3TGpZM05ETTBMREUxTlM0M016UXlNbDBzV3pNdU5Td3RNaTR5WFN4YkxUUXVPQ3d6WFYwc1cxc3lNVEV1TkRjME16UXNNVFkyTGpJek5ESXlYU3hiTFRBdU5pd3RNUzQzWFN4Yk1DNDVMREl1TTExZExGdGJNakU1TGpnM05ETTBMREUyTkM0NE16UXlNbDBzV3kwMUxqTXNNeTQwWFN4Yk1pNDJMQzB4TGpkZFhTeGJXekl5TlM0NE56UXpOQ3d4TmpFdU9ETTBNakpkTEZzdE1DNDNMREJkTEZzd0xqY3NNRjFkTEZ0Yk1qSTNMakUzTkRNMExERTJNQzQ0TXpReU1sMHNXekFzTUM0MVhTeGJNQ3d0TUM0MlhWMHNXMXN5TWpVdU56YzBNelFzTVRVNUxqZ3pOREl5WFN4Yk1DNDRMREJkTEZzdE1TNDVMREJkWFN4Yld6SXlOQzR5TnpRek5Dd3hOVFV1TWpNME1qSmRMRnN0TVM0MExERXVObDBzV3pFdU5pd3RNbDFkWFN3bWNYVnZkRHRqYkc5elpXUW1jWFZ2ZERzNmRISjFaU3dtY1hWdmREdG1hV3hzUTI5c2IzSW1jWFZ2ZERzNld6QXNNQ3d3WFgxZGZTSWdabWxzYkQwaUkyWm1abVptWmlJZ2MzUnliMnRsTFhkcFpIUm9QU0l3TGpVaUx6NDhjR0YwYUNCa1BTSk5NalF4TGpRM05ETTFMREUxTUM0MU16UXlNbXcyTGpFc01DNDJZell1T1N3d0xqY2dNVFFzTWk0NUlERTNMalFzTlM0MVl6SXVNU3d4TGpZZ01pNHlMREl1TWlBeExqTXNOaTR5WXkweExqZ3NPQzR5SUMwNUxqWXNNVEl1T1NBdE1UVXNPUzR4WXkweExqWXNMVEV1TWlBdE15NDBMQzB5TGpFZ0xUUXNMVEl1TVdNdE1TNDVMREFnTFRFd0xqRXNMVGd1TWlBdE1UQXVNU3d0TVRBdU1XTXdMQzB4SURFc0xUTXVOQ0F5TGpJc0xUVXVOWHBOTWpReUxqWTNORE0xTERFMU55NHlNelF5TW1NdE1TNDFMREl1TWlBdE1TNDBMREl1TmlBd0xqZ3NOV014TGpNc01TNDBJREl1T0N3eUxqWWdNeTR5TERJdU5tTXdMalVzTUNBeUxqZ3NNQzQ1SURVdU1pd3lMakZqTkN3eExqa2dOQzQxTERJZ05pNDNMREF1TldNeExqUXNMVEF1T0NBeUxqY3NMVE1nTXk0eExDMDBMamRqTUM0NUxDMDBJQzB3TGpZc0xUVXVNeUF0Tnk0M0xDMDJMamhqTFRjdU5Dd3RNUzQySUMwNUxqWXNMVEV1TkNBdE1URXVNeXd4TGpONklpQm1hV3hzTFc5d1lXTnBkSGs5SWpBdU1UVTJPRFlpSUdacGJHdzlJaU13TURBd01EQWlJSE4wY205clpTMTNhV1IwYUQwaU1TSXZQanh3WVhSb0lHUTlJazB5TlRNdU9Ua3lNRGtzTVRVMUxqZzROelEzWXpjdU1Td3hMalVnT0M0Mk16RTVPU3d5TGpnMU1UazNJRGN1TnpNeE9Ua3NOaTQ0TlRFNU4yTXRNQzQwTERFdU55QXRNUzQzTVRFMU5Td3pMamt5TnpBMklDMHpMakV4TVRVMUxEUXVOekkzTURaakxUSXVNaXd4TGpVZ0xUSXVOek0zTXpVc01TNDBNVGMzTVNBdE5pNDNNemN6TlN3dE1DNDBPREl5T1dNdE1pNDBMQzB4TGpJZ0xUUXVOelF6TkRRc0xUSXVNVEl6T0RRZ0xUVXVNalF6TkRRc0xUSXVNVEl6T0RSakxUQXVOQ3d3SUMweExqa3dOekk0TEMweExqSXlNamt5SUMwekxqSXdOekk0TEMweUxqWXlNamt5WXkweUxqSXNMVEl1TkNBdE1pNHlPVFV3TVN3dE1pNDRNalV5TWlBdE1DNDNPVFV3TVN3dE5TNHdNalV5TW1NeExqY3NMVEl1TnlBekxqazJNalkxTEMweUxqa3lORGMySURFeExqTTJNalkxTEMweExqTXlORGMyZWlJZ1pHRjBZUzF3WVhCbGNpMWtZWFJoUFNKN0puRjFiM1E3Ym05SWIzWmxjaVp4ZFc5ME96cG1ZV3h6WlN3bWNYVnZkRHR2Y21sblNYUmxiU1p4ZFc5ME96cGJKbkYxYjNRN1VHRjBhQ1p4ZFc5ME95eDdKbkYxYjNRN1lYQndiSGxOWVhSeWFYZ21jWFZ2ZERzNmRISjFaU3dtY1hWdmREdHpaV2R0Wlc1MGN5WnhkVzkwT3pwYlcxc3lOREl1TmpjME16UXNNVFUzTGpJek5ESXlYU3hiTVM0M0xDMHlMamRkTEZzdE1TNDFMREl1TWwxZExGdGJNalF6TGpRM05ETTBMREUyTWk0eU16UXlNbDBzV3kweUxqSXNMVEl1TkYwc1d6RXVNeXd4TGpSZFhTeGJXekkwTmk0Mk56UXpOQ3d4TmpRdU9ETTBNakpkTEZzdE1DNDBMREJkTEZzd0xqVXNNRjFkTEZ0Yk1qVXhMamczTkRNMExERTJOaTQ1TXpReU1sMHNXeTB5TGpRc0xURXVNbDBzV3pRc01TNDVYVjBzVzFzeU5UZ3VOVGMwTXpRc01UWTNMalF6TkRJeVhTeGJMVEl1TWl3eExqVmRMRnN4TGpRc0xUQXVPRjFkTEZ0Yk1qWXhMalkzTkRNMExERTJNaTQzTXpReU1sMHNXeTB3TGpRc01TNDNYU3hiTUM0NUxDMDBYVjBzVzFzeU5UTXVPVGMwTXpRc01UVTFMamt6TkRJeVhTeGJOeTR4TERFdU5WMHNXeTAzTGpRc0xURXVObDFkWFN3bWNYVnZkRHRqYkc5elpXUW1jWFZ2ZERzNmRISjFaU3dtY1hWdmREdG1hV3hzUTI5c2IzSW1jWFZ2ZERzNld6QXNNQ3d3WFgxZGZTSWdabWxzYkQwaUkyWm1abVptWmlJZ2MzUnliMnRsTFhkcFpIUm9QU0l3TGpVaUx6NDhjR0YwYUNCa1BTSk5NalEzTGpNM05ETTFMREUzTkM0NU16UXlNbXcwTGpRc01pNHhZelF1TXl3eUxqRWdOQzR6TERJdU1TQTNMamtzTUM0eVl6VXVNeXd0TWk0NElEY3NMVEV1TXlBM0xEWXVObU13TGpFc05TNDNJREF1TXl3MkxqTWdNaTQ0TERjdU5tTXpMalFzTVM0NElEUXVOQ3cxTGpZZ01pNDBMRGd1T0dNdE1TNHlMREV1T0NBdE5DNDRMRE11TlNBdE1UUXVNU3cyTGpaakxURTJMallzTlM0MUlDMHhOaTQxTERVdU5pQXRNakl1TlN3dE1UTXVOR010TXk0eUxDMDVMamtnTFRNdU1pd3RNVEFnTFRFdU15d3RNVEl1TldNeUxDMHlMamNnTmk0MkxDMHpMalFnTVRBdU5Dd3RNUzQzWXpFdU15d3dMallnTVM0NUxEQXVNaUF5TGpRc0xURXVPSHBOTWpVeUxqSTNORE0xTERFNE1TNDRNelF5TW1NdE1TNDBMQzB3TGpjZ0xUSXVNU3d0TUM0MElDMHpMakVzTVM0MWJDMHhMak1zTWk0emJDMDBMak1zTFRJdU1XTXROeXd0TXk0eklDMDNMak1zTFRFdU9DQXRNaTQ1TERFeExqTmpNaTR4TERZdU1TQTBMaklzTVRFdU15QTBMalVzTVRFdU5XTXhMREF1TmlBeU1DNDRMQzAyTGpFZ01qSXVOaXd0Tnk0Mll6SXVNaXd0TVM0NElERXVOeXd0TWk0NElDMHpMQzAxTGpGc0xUUXVOQ3d0TWk0eGJERXVOQ3d0TXk0ell6QXVPQ3d0TVM0NElERXVOQ3d0TkM0eklERXVOQ3d0TlM0MFl6QXNMVEl1TVNBdE1TNDBMQzB5TGpjZ0xUSXVOU3d0TVdNdE1DNHpMREF1TlNBdE1pd3hJQzB6TGpZc01XTXRNUzQzTERBZ0xUTXVPQ3d0TUM0MElDMDBMamdzTFRGNklpQm1hV3hzTFc5d1lXTnBkSGs5SWpBdU1UVTJPRFlpSUdacGJHdzlJaU13TURBd01EQWlJSE4wY205clpTMTNhV1IwYUQwaU1TSXZQanh3WVhSb0lHUTlJazB5TlRjdU1Ea3dORGtzTVRneUxqYzROamxqTVM0MkxEQWdNeTR6TVRBeE5Dd3RNQzQwT1RVeU1TQXpMall4TURFMExDMHdMams1TlRJeFl6RXVNU3d0TVM0M0lESXVOVEEzTXpFc0xURXVNRGswTlNBeUxqVXdOek14TERFdU1EQTFOV013TERFdU1TQXRNQzQxT1RFMU1pd3pMall4TURBeklDMHhMak01TVRVeUxEVXVOREV3TUROc0xURXVNemswTVRZc015NHpNVEkzTld3MExqUXdNakE0TERJdU1URTBNelpqTkM0M0xESXVNeUExTGpFNU56RXNNeTR6TVRZMk9DQXlMams1TnpFc05TNHhNVFkyT0dNdE1TNDRMREV1TlNBdE1qRXVOamMwTWpRc09DNHlNalV5TVNBdE1qSXVOamMwTWpRc055NDJNalV5TVdNdE1DNHpMQzB3TGpJZ0xUSXVOREl5TmpNc0xUVXVORE0zTWlBdE5DNDFNakkyTXl3dE1URXVOVE0zTW1NdE5DNDBMQzB4TXk0eElDMDBMakE0TlRFMExDMHhOQzQyTkRBMU9TQXlMamt4TkRnMkxDMHhNUzR6TkRBMU9XdzBMak13TmpRMExESXVNRGswTjJ3eExqTXdPVFEyTEMweUxqTXdOVEUwWXpFc0xURXVPU0F4TGpjeE5ESTJMQzB5TGpJd016VXpJRE11TVRFME1qWXNMVEV1TlRBek5UTmpNU3d3TGpZZ015NHhNakE0T1N3eExqQXdNalExSURRdU9ESXdPRGtzTVM0d01ESTBOWG9pSUdSaGRHRXRjR0Z3WlhJdFpHRjBZVDBpZXlaeGRXOTBPMjV2U0c5MlpYSW1jWFZ2ZERzNlptRnNjMlVzSm5GMWIzUTdiM0pwWjBsMFpXMG1jWFZ2ZERzNld5WnhkVzkwTzFCaGRHZ21jWFZ2ZERzc2V5WnhkVzkwTzJGd2NHeDVUV0YwY21sNEpuRjFiM1E3T25SeWRXVXNKbkYxYjNRN2MyVm5iV1Z1ZEhNbWNYVnZkRHM2VzF0Yk1qVXlMakkzTkRNMExERTRNUzQ0TXpReU1sMHNXekVzTUM0MlhTeGJMVEV1TkN3dE1DNDNYVjBzVzFzeU5Ea3VNVGMwTXpRc01UZ3pMak16TkRJeVhTeGJNU3d0TVM0NVhTeGJNQ3d3WFYwc1d6STBOeTQ0TnpRek5Dd3hPRFV1TmpNME1qSmRMRnRiTWpRekxqVTNORE0wTERFNE15NDFNelF5TWwwc1d6QXNNRjBzV3kwM0xDMHpMak5kWFN4Yld6STBNQzQyTnpRek5Dd3hPVFF1T0RNME1qSmRMRnN0TkM0MExDMHhNeTR4WFN4Yk1pNHhMRFl1TVYxZExGdGJNalExTGpFM05ETTBMREl3Tmk0ek16UXlNbDBzV3kwd0xqTXNMVEF1TWwwc1d6RXNNQzQyWFYwc1cxc3lOamN1TnpjME16UXNNVGs0TGpjek5ESXlYU3hiTFRFdU9Dd3hMalZkTEZzeUxqSXNMVEV1T0YxZExGdGJNalkwTGpjM05ETTBMREU1TXk0Mk16UXlNbDBzV3pRdU55d3lMak5kTEZzd0xEQmRYU3hiTWpZd0xqTTNORE0wTERFNU1TNDFNelF5TWwwc1cxc3lOakV1TnpjME16UXNNVGc0TGpJek5ESXlYU3hiTUN3d1hTeGJNQzQ0TEMweExqaGRYU3hiV3pJMk15NHhOelF6TkN3eE9ESXVPRE0wTWpKZExGc3dMREV1TVYwc1d6QXNMVEl1TVYxZExGdGJNall3TGpZM05ETTBMREU0TVM0NE16UXlNbDBzV3pFdU1Td3RNUzQzWFN4YkxUQXVNeXd3TGpWZFhTeGJXekkxTnk0d056UXpOQ3d4T0RJdU9ETTBNakpkTEZzeExqWXNNRjBzV3kweExqY3NNRjFkWFN3bWNYVnZkRHRqYkc5elpXUW1jWFZ2ZERzNmRISjFaU3dtY1hWdmREdG1hV3hzUTI5c2IzSW1jWFZ2ZERzNld6QXNNQ3d3WFgxZGZTSWdabWxzYkQwaUkyWm1abVptWmlJZ2MzUnliMnRsTFhkcFpIUm9QU0l3TGpVaUx6NDhMMmMrUEM5blBqd3ZjM1puUGc9PSI7DQoNCiAgY29uc3QgbmV3VGhyZWFkID0NCiJkYXRhOmltYWdlL3N2Zyt4bWw7YmFzZTY0LFBITjJaeUIyWlhKemFXOXVQU0l4TGpFaUlIaHRiRzV6UFNKb2RIUndPaTh2ZDNkM0xuY3pMbTl5Wnk4eU1EQXdMM04yWnlJZ2VHMXNibk02ZUd4cGJtczlJbWgwZEhBNkx5OTNkM2N1ZHpNdWIzSm5MekU1T1RrdmVHeHBibXNpSUhkcFpIUm9QU0l5TVM0ek16TXpNeUlnYUdWcFoyaDBQU0l5TVM0ek16TXpNeUlnZG1sbGQwSnZlRDBpTUN3d0xESXhMak16TXpNekxESXhMak16TXpNeklqNDhaeUIwY21GdWMyWnZjbTA5SW5SeVlXNXpiR0YwWlNndE1qSTVMak16TXpNekxDMHhOamt1TXpNek16TXBJajQ4WnlCa1lYUmhMWEJoY0dWeUxXUmhkR0U5SW5zbWNYVnZkRHRwYzFCaGFXNTBhVzVuVEdGNVpYSW1jWFZ2ZERzNmRISjFaWDBpSUhOMGNtOXJaUzFzYVc1bFkyRndQU0ppZFhSMElpQnpkSEp2YTJVdGJHbHVaV3B2YVc0OUltMXBkR1Z5SWlCemRISnZhMlV0YldsMFpYSnNhVzFwZEQwaU1UQWlJSE4wY205clpTMWtZWE5vWVhKeVlYazlJaUlnYzNSeWIydGxMV1JoYzJodlptWnpaWFE5SWpBaUlITjBlV3hsUFNKdGFYZ3RZbXhsYm1RdGJXOWtaVG9nYm05eWJXRnNJajQ4Y0dGMGFDQmtQU0pOTWpRMExqTTBOelk0TERFM05pNDFPVEE1T0dndE1pNHhNRFk1Tkd3dE1DNHlPREF5TERJdU1UYzBNVGxzTFRNdU9UY3pNelVzTUM0d01EWXhNV3d0TUM0eU56UTVOU3d0TWk0eE9EQXphQzB5TGpBMU56azNZeTB3TGpVNE5qUXhMREFnTFRBdU9EWTVNakVzTFRBdU56TXlOalVnTFRBdU5EWXpPVGtzTFRFdU1UVTJPREpzTkM0ek5EUTROeXd0TkM0MU56VTROMk13TGpJMU56QTVMQzB3TGpJMU56QTNJREF1TmpjME5UWXNMVEF1TWpVM01EY2dNQzQ1TVRneE9Dd3diRFF1TXpVNU5UWXNOQzQxTnpVNE4yTXdMalF3TkRBeExEQXVOREkwTVRjZ01DNHhNVEF4T1N3eExqRTFOamd5SUMwd0xqUTJOVEl5TERFdU1UVTJPRElpSUdacGJHdzlJbTV2Ym1VaUlHWnBiR3d0Y25Wc1pUMGlaWFpsYm05a1pDSWdjM1J5YjJ0bExXOXdZV05wZEhrOUlqQXVNaUlnYzNSeWIydGxQU0lqTURBd01EQXdJaUJ6ZEhKdmEyVXRkMmxrZEdnOUlqSXVOU0l2UGp4d1lYUm9JR1E5SWsweU5EUXVNelEzTmpnc01UZ3pMalF3T1RBell6QXVOVGMxTkN3d0lEQXVPRFk1TWpJc01DNDNNekkyTlNBd0xqUTJOVEl5TERFdU1UVTJPREpzTFRRdU16VTVOVFlzTkM0MU56VTROMk10TUM0eU5ETTJNeXd3TGpJMU56QTNJQzB3TGpZMk1UQTVMREF1TWpVM01EY2dMVEF1T1RFNE1UZ3NNR3d0TkM0ek5EUTROeXd0TkM0MU56VTROMk10TUM0ME1EVXlNeXd0TUM0ME1qUXhOeUF0TUM0eE1qSTBNaXd0TVM0eE5UWTRNaUF3TGpRMk16azVMQzB4TGpFMU5qZ3lhREl1TURVM09UZHNNQzR5TlRJMkxDMHlMakUwT0Rac015NDVPREEyTWl3d0xqQXlNekUyYkRBdU1qazFNamdzTWk0eE1qVTBOR2d5TGpFd05qazBJaUJrWVhSaExYQmhjR1Z5TFdSaGRHRTlJbnNtY1hWdmREdHBibVJsZUNaeGRXOTBPenB1ZFd4c2ZTSWdabWxzYkQwaWJtOXVaU0lnWm1sc2JDMXlkV3hsUFNKbGRtVnViMlJrSWlCemRISnZhMlV0YjNCaFkybDBlVDBpTUM0eUlpQnpkSEp2YTJVOUlpTXdNREF3TURBaUlITjBjbTlyWlMxM2FXUjBhRDBpTWk0MUlpOCtQSEJoZEdnZ1pEMGlUVEkwTkM0ek5EYzJPQ3d4TnpZdU5Ua3dPVGhvTFRJdU1UQTJPVFJzTFRBdU9UQTBOeklzTmk0NE16Z3hZeTB3TGpBNU56azBMREF1TnpnME1EY2dMVEF1TnprMU56WXNNUzR6TXpZM055QXRNUzQxTlRRNExERXVNakl4TURsakxUQXVOakV5TVRJc0xUQXVNRGc1T1RnZ0xURXVNRGc1TlRnc0xUQXVOakEwTVRJZ0xURXVNVFkwTWpZc0xURXVNakl4TURsc0xUQXVPVEEwTnpJc0xUWXVPRE00TVdndE1pNHdOVGM1TjJNdE1DNDFPRFkwTVN3d0lDMHdMamcyT1RJeExDMHdMamN6TWpZMUlDMHdMalEyTXprNUxDMHhMakUxTmpneWJEUXVNelEwT0Rjc0xUUXVOVGMxT0Rkak1DNHlOVGN3T1N3dE1DNHlOVGN3TnlBd0xqWTNORFUyTEMwd0xqSTFOekEzSURBdU9URTRNVGdzTUd3MExqTTFPVFUyTERRdU5UYzFPRGRqTUM0ME1EUXdNU3d3TGpReU5ERTNJREF1TVRFd01Ua3NNUzR4TlRZNE1pQXRNQzQwTmpVeU1pd3hMakUxTmpneUlpQm1hV3hzUFNJalptWm1abVptSWlCbWFXeHNMWEoxYkdVOUltVjJaVzV2WkdRaUlITjBjbTlyWlQwaWJtOXVaU0lnYzNSeWIydGxMWGRwWkhSb1BTSXhJaTgrUEhCaGRHZ2daRDBpVFRJME5DNHpORGMyT0N3eE9ETXVOREE1TUROak1DNDFOelUwTERBZ01DNDROamt5TWl3d0xqY3pNalkxSURBdU5EWTFNaklzTVM0eE5UWTRNbXd0TkM0ek5UazFOaXcwTGpVM05UZzNZeTB3TGpJME16WXpMREF1TWpVM01EY2dMVEF1TmpZeE1Ea3NNQzR5TlRjd055QXRNQzQ1TVRneE9Dd3diQzAwTGpNME5EZzNMQzAwTGpVM05UZzNZeTB3TGpRd05USXpMQzB3TGpReU5ERTNJQzB3TGpFeU1qUXlMQzB4TGpFMU5qZ3lJREF1TkRZek9Ua3NMVEV1TVRVMk9ESm9NaTR3TlRjNU4yd3dMamt3TkRjeUxDMDJMamd6T0RFeFl6QXVNRGMwTmpnc0xUQXVOakUyT1RjZ01DNDFOVEl4TkN3dE1TNHhNekV4TVNBeExqRTJOREkyTEMweExqSXlNVEE1WXpBdU56VTVNRFFzTFRBdU1URTFOamdnTVM0ME5UWTROaXd3TGpRek56QXlJREV1TlRVME9Dd3hMakl5TVRBNWJEQXVPVEEwTnpJc05pNDRNemd4TVdneUxqRXdOamswSWlCa1lYUmhMWEJoY0dWeUxXUmhkR0U5SW5zbWNYVnZkRHRwYm1SbGVDWnhkVzkwT3pwdWRXeHNmU0lnWm1sc2JEMGlJMlptWm1abVppSWdabWxzYkMxeWRXeGxQU0psZG1WdWIyUmtJaUJ6ZEhKdmEyVTlJbTV2Ym1VaUlITjBjbTlyWlMxM2FXUjBhRDBpTVNJdlBqeHdZWFJvSUdROUlrMHlNamt1TXpNek16TXNNVGt3TGpZMk5qWTNkaTB5TVM0ek16TXpNMmd5TVM0ek16TXpNM1l5TVM0ek16TXpNM29pSUdacGJHdzlJbTV2Ym1VaUlHWnBiR3d0Y25Wc1pUMGlibTl1ZW1WeWJ5SWdjM1J5YjJ0bFBTSnViMjVsSWlCemRISnZhMlV0ZDJsa2RHZzlJakFpTHo0OEwyYytQQzluUGp3dmMzWm5QZz09IjsNCg0KICBjb25zdCB0aW1lSWNvbiA9DQoiZGF0YTppbWFnZS9zdmcreG1sO2Jhc2U2NCxQSE4yWnlCMlpYSnphVzl1UFNJeExqRWlJSGh0Ykc1elBTSm9kSFJ3T2k4dmQzZDNMbmN6TG05eVp5OHlNREF3TDNOMlp5SWdlRzFzYm5NNmVHeHBibXM5SW1oMGRIQTZMeTkzZDNjdWR6TXViM0puTHpFNU9Ua3ZlR3hwYm1zaUlIZHBaSFJvUFNJeE9DNDBNVEF5TlNJZ2FHVnBaMmgwUFNJeE9DNDBNVEF5TlNJZ2RtbGxkMEp2ZUQwaU1Dd3dMREU0TGpReE1ESTFMREU0TGpReE1ESTFJajQ4WnlCMGNtRnVjMlp2Y20wOUluUnlZVzV6YkdGMFpTZ3RNak13TGpjNU5EZzRMQzB4TnpBdU56azBPU2tpUGp4bklHUmhkR0V0Y0dGd1pYSXRaR0YwWVQwaWV5WnhkVzkwTzJselVHRnBiblJwYm1kTVlYbGxjaVp4ZFc5ME96cDBjblZsZlNJZ1ptbHNiQzF5ZFd4bFBTSnViMjU2WlhKdklpQnpkSEp2YTJVdGJHbHVaV05oY0QwaVluVjBkQ0lnYzNSeWIydGxMV3hwYm1WcWIybHVQU0p0YVhSbGNpSWdjM1J5YjJ0bExXMXBkR1Z5YkdsdGFYUTlJakV3SWlCemRISnZhMlV0WkdGemFHRnljbUY1UFNJaUlITjBjbTlyWlMxa1lYTm9iMlptYzJWMFBTSXdJaUJ6ZEhsc1pUMGliV2w0TFdKc1pXNWtMVzF2WkdVNklHNXZjbTFoYkNJK1BIQmhkR2dnWkQwaVRUSXpNaTQ1TWpNeExERTRNQzQyTnpReU0yTXdMQzB5TGpVek9USTNJREV1TXpNM016WXNMVFF1TnpZMk1UZ2dNeTR6TkRZeE5Td3ROaTR3TVRRNGRpMHdMalkzT0RNMll6QXNMVEF1T1RVMk5qUWdNQzQzTnpVMU1Td3RNUzQzTXpJeE5TQXhMamN6TWpFMUxDMHhMamN6TWpFMWFETXVPVGszTWpWak1DNDVOVFkyTkN3d0lERXVOek15TVRVc01DNDNOelUxTVNBeExqY3pNakUxTERFdU56TXlNVFYyTUM0Mk56Z3pObU15TGpBd09EYzVMREV1TWpRNE5qTWdNeTR6TkRZeE5pd3pMalEzTlRVMElETXVNelEyTVRZc05pNHdNVFE0WXpBc015NDVNRGcwT0NBdE15NHhOamcwTlN3M0xqQTNOamt5SUMwM0xqQTNOamt6TERjdU1EYzJPVEpqTFRNdU9UQTRORGdzTUNBdE55NHdOelk1TWl3dE15NHhOamcwTkNBdE55NHdOelk1TWl3dE55NHdOelk1TW5wTk1qUXhMall5TlRVNExERTNOeTQ0T1RRNE4yTXdMakl5TXpNM0xEQWdNQzR6TXpjME1pd3RNQzR5T0RRME1TQXdMakU0TURVNUxDMHdMalEwT1RBM2JDMHhMalk1TWpNMUxDMHhMamMzTmpNell5MHdMakE1TkRVM0xDMHdMakE1T1RnZ0xUQXVNalUyTmpNc0xUQXVNRGs1T0NBdE1DNHpOVFkwTXl3d2JDMHhMalk0TmpZMUxERXVOemMyTXpOakxUQXVNVFUzTXpFc01DNHhOalEyTmlBdE1DNHdORGMxTWl3d0xqUTBPVEEzSURBdU1UZ3dNVElzTUM0ME5Ea3dOMmd3TGpjNU9EZzViREF1TXpRek9USXNNaTQxT1RrME0yTXRNQzR5TVN3d0xqRTFPVGd6SUMwd0xqTTBOVFUzTERBdU5ERXlORFFnTFRBdU16UTFOVGNzTUM0Mk9UWTNNbU13TERBdU5EZ3pNalVnTUM0ek9URTNOU3d3TGpnM05TQXdMamczTlN3d0xqZzNOV013TGpBeE1UTTFMREFnTUM0d01qSTJOaXd0TUM0d01EQXlNU0F3TGpBek16a3NMVEF1TURBd05qUnNNUzQ0T1RZME9Td3hMalk1T0RneWJDMHhMakF6T0RVNExEQXVOekl5T0dNdE1DNHhOakE1Tnl3d0xqRTJNRGszSUMwd0xqQXpOelE1TERBdU5ETTVOekVnTUM0eE9UQXhPQ3d3TGpRME5EbHNNaTQwTkRnM0xEQXVNRFl6TkRGak1DNHhOREV4TXl3d0lEQXVNalUxTnpJc0xUQXVNVEUwTmlBd0xqSTFNakF6TEMwd0xqSTFNakEwYkMwd0xqQTFPVE00TEMweUxqUTFNamN6WXkwd0xqQXdOVFUwTEMwd0xqSXlOek16SUMwd0xqSTROekk1TEMwd0xqTTBOemM0SUMwd0xqUTBOVEl6TEMwd0xqRTRPVGd6YkMwd0xqVTNPRE0wTERBdU5UYzRNelJzTFRFdU9ESTRPVGNzTFRFdU5EQXhOVGRqTUM0d01ESTNPU3d0TUM0d01qZzBOQ0F3TGpBd05ESXhMQzB3TGpBMU56STRJREF1TURBME1qRXNMVEF1TURnMk5EWmpNQ3d0TUM0eU56azJOU0F0TUM0eE16RXhPU3d0TUM0MU1qZzJOaUF0TUM0ek16VXpPQ3d0TUM0Mk9EZzROR3d0TUM0d01qTTBOU3d0TWk0NE1UYzROSG9pSUdacGJHdzlJbTV2Ym1VaUlITjBjbTlyWlMxdmNHRmphWFI1UFNJd0xqSWlJSE4wY205clpUMGlJekF3TURBd01DSWdjM1J5YjJ0bExYZHBaSFJvUFNJeExqYzFJaTgrUEhCaGRHZ2daRDBpVFRJek1DNDNPVFE0T1N3eE9Ea3VNakExTVRaMkxURTRMalF4TURJMWFERTRMalF4TURJMWRqRTRMalF4TURJMWVpSWdabWxzYkQwaWJtOXVaU0lnYzNSeWIydGxQU0p1YjI1bElpQnpkSEp2YTJVdGQybGtkR2c5SWpBaUx6NDhjR0YwYUNCa1BTSk5Nak15TGpreU16RXNNVGd3TGpZM05ESXpZekFzTFRJdU5UTTVNamNnTVM0ek16Y3pOaXd0TkM0M05qWXhPQ0F6TGpNME5qRTFMQzAyTGpBeE5EaDJMVEF1TmpjNE16WmpNQ3d0TUM0NU5UWTJOQ0F3TGpjM05UVXhMQzB4TGpjek1qRTFJREV1TnpNeU1UVXNMVEV1TnpNeU1UVm9NeTQ1T1RjeU5XTXdMamsxTmpZMExEQWdNUzQzTXpJeE5Td3dMamMzTlRVeElERXVOek15TVRVc01TNDNNekl4TlhZd0xqWTNPRE0yWXpJdU1EQTROemtzTVM0eU5EZzJNeUF6TGpNME5qRTFMRE11TkRjMU5UUWdNeTR6TkRZeE5TdzJMakF4TkRoak1Dd3pMamt3T0RRNElDMHpMakUyT0RRMUxEY3VNRGMyT1RJZ0xUY3VNRGMyT1RJc055NHdOelk1TW1NdE15NDVNRGcwT0N3d0lDMDNMakEzTmpreUxDMHpMakUyT0RRMElDMDNMakEzTmpreUxDMDNMakEzTmpreWVrMHlOREV1TmpJMU5UZ3NNVGMzTGpnNU5EZzNZekF1TWpJek16Y3NNQ0F3TGpNek56UXpMQzB3TGpJNE5EUXhJREF1TVRnd05pd3RNQzQwTkRrd04yd3RNUzQyT1RJek5Td3RNUzQzTnpZek1tTXRNQzR3T1RRMU55d3RNQzR3T1RrNElDMHdMakkxTmpZekxDMHdMakE1T1RnZ0xUQXVNelUyTkRNc01Hd3RNUzQyT0RZMk5Td3hMamMzTmpNeVl5MHdMakUxTnpNeExEQXVNVFkwTmpZZ0xUQXVNRFEzTlRJc01DNDBORGt3TnlBd0xqRTRNREV5TERBdU5EUTVNRGRvTUM0M09UZzRPV3d3TGpNME16a3lMREl1TlRrNU5ETmpMVEF1TWpFc01DNHhOVGs0TXlBdE1DNHpORFUxTnl3d0xqUXhNalEwSUMwd0xqTTBOVFUzTERBdU5qazJOekZqTUN3d0xqUTRNekkxSURBdU16a3hOelVzTUM0NE56VWdNQzQ0TnpVc01DNDROelZqTUM0d01URXpOU3d3SURBdU1ESXlOalVzTFRBdU1EQXdNakVnTUM0d016TTVMQzB3TGpBd01EWTBiREV1TkRJeU9ERXNNUzQ0TlRZM01Xd3RNQzQxTmpRNUxEQXVOVFkwT1RGakxUQXVNVFl3T1Rjc01DNHhOakE1TnlBdE1DNHdNemMwT1N3d0xqUXpPVGN4SURBdU1Ua3dNVGNzTUM0ME5EUTViREl1TkRRNE55d3dMakEyTXpReFl6QXVNVFF4TVRNc01DQXdMakkxTlRjekxDMHdMakV4TkRZZ01DNHlOVEl3TkN3dE1DNHlOVEl3Tkd3dE1DNHdOVGt6T0N3dE1pNDBOVEkzTW1NdE1DNHdNRFUxTkN3dE1DNHlNamN6TXlBdE1DNHlPRGN5T1N3dE1DNHpORGMzT0NBdE1DNDBORFV5TXl3dE1DNHhPRGs0Tkd3dE1DNDFOemd6TkN3d0xqVTNPRE0wYkMweExqZ3lPRGs0TEMweExqUXdNVFUzWXpBdU1EQXlOemtzTFRBdU1ESTRORFFnTUM0d01EUXlNaXd0TUM0d05UY3lPQ0F3TGpBd05ESXlMQzB3TGpBNE5qUTJZekFzTFRBdU1qYzVOalVnTFRBdU1UTXhNVGtzTFRBdU5USTROallnTFRBdU16TTFNemdzTFRBdU5qZzRPRFJzTUM0ek5EUTVOeXd0TWk0Mk1EY3pNWG9pSUdacGJHdzlJaU5tWm1abVptWWlJSE4wY205clpTMXZjR0ZqYVhSNVBTSXdMaklpSUhOMGNtOXJaVDBpSXpBd01EQXdNQ0lnYzNSeWIydGxMWGRwWkhSb1BTSXdJaTgrUEM5blBqd3ZaejQ4TDNOMlp6ND0iOw0KDQogIGNvbnN0IGtleXNNZW51ID0gWw0KICAgIHsgdGV4dDogInNwYWNlIiwgdmFsdWU6ICJzcGFjZSIgfSwNCiAgICB7IHRleHQ6ICJ1cCBhcnJvdyIsIHZhbHVlOiAidXAgYXJyb3ciIH0sIHsgdGV4dDogImRvd24gYXJyb3ciLCB2YWx1ZTogImRvd24gYXJyb3ciIH0sDQogICAgeyB0ZXh0OiAicmlnaHQgYXJyb3ciLCB2YWx1ZTogInJpZ2h0IGFycm93IiB9LCB7IHRleHQ6ICJsZWZ0IGFycm93IiwgdmFsdWU6ICJsZWZ0IGFycm93IiB9LA0KICAgIHsgdGV4dDogImEiLCB2YWx1ZTogImEiIH0sIHsgdGV4dDogImIiLCB2YWx1ZTogImIiIH0sIHsgdGV4dDogImMiLCB2YWx1ZTogImMiIH0sDQogICAgeyB0ZXh0OiAiZCIsIHZhbHVlOiAiZCIgfSwgeyB0ZXh0OiAiZSIsIHZhbHVlOiAiZSIgfSwgeyB0ZXh0OiAiZiIsIHZhbHVlOiAiZiIgfSwNCiAgICB7IHRleHQ6ICJnIiwgdmFsdWU6ICJnIiB9LCB7IHRleHQ6ICJoIiwgdmFsdWU6ICJoIiB9LCB7IHRleHQ6ICJpIiwgdmFsdWU6ICJpIiB9LA0KICAgIHsgdGV4dDogImoiLCB2YWx1ZTogImoiIH0sIHsgdGV4dDogImsiLCB2YWx1ZTogImsiIH0sIHsgdGV4dDogImwiLCB2YWx1ZTogImwiIH0sDQogICAgeyB0ZXh0OiAibSIsIHZhbHVlOiAibSIgfSwgeyB0ZXh0OiAibiIsIHZhbHVlOiAibiIgfSwgeyB0ZXh0OiAibyIsIHZhbHVlOiAibyIgfSwNCiAgICB7IHRleHQ6ICJwIiwgdmFsdWU6ICJwIiB9LCB7IHRleHQ6ICJxIiwgdmFsdWU6ICJxIiB9LCB7IHRleHQ6ICJyIiwgdmFsdWU6ICJyIiB9LA0KICAgIHsgdGV4dDogInMiLCB2YWx1ZTogInMiIH0sIHsgdGV4dDogInQiLCB2YWx1ZTogInQiIH0sIHsgdGV4dDogInUiLCB2YWx1ZTogInUiIH0sDQogICAgeyB0ZXh0OiAidiIsIHZhbHVlOiAidiIgfSwgeyB0ZXh0OiAidyIsIHZhbHVlOiAidyIgfSwgeyB0ZXh0OiAieCIsIHZhbHVlOiAieCIgfSwNCiAgICB7IHRleHQ6ICJ5IiwgdmFsdWU6ICJ5IiB9LCB7IHRleHQ6ICJ6IiwgdmFsdWU6ICJ6IiB9LCB7IHRleHQ6ICIwIiwgdmFsdWU6ICIwIiB9LA0KICAgIHsgdGV4dDogIjEiLCB2YWx1ZTogIjEiIH0sIHsgdGV4dDogIjIiLCB2YWx1ZTogIjIiIH0sIHsgdGV4dDogIjMiLCB2YWx1ZTogIjMiIH0sDQogICAgeyB0ZXh0OiAiNCIsIHZhbHVlOiAiNCIgfSwgeyB0ZXh0OiAiNSIsIHZhbHVlOiAiNSIgfSwgeyB0ZXh0OiAiNiIsIHZhbHVlOiAiNiIgfSwNCiAgICB7IHRleHQ6ICI3IiwgdmFsdWU6ICI3IiB9LCB7IHRleHQ6ICI4IiwgdmFsdWU6ICI4IiB9LCB7IHRleHQ6ICI5IiwgdmFsdWU6ICI5IiB9DQogIF07DQoNCiAgbGV0IGNvbmRpdGlvblN0b3JhZ2UgPSBbXTsNCiAgbGV0IGtleWJpbmRzID0ge307DQogIGxldCBoYXRzID0geyAuLi5ydW50aW1lLl9oYXRzIH07DQogIHJ1bnRpbWUub24oIktFWV9QUkVTU0VEIiwga2V5ID0+IHsNCiAgICBrZXkgPSBrZXkudG9Mb3dlckNhc2UoKTsNCiAgICBpZiAoa2V5YmluZHNba2V5XSkgew0KICAgICAgLy8gVXNlIHRoaXMgZm9yIGNvbXBhdGliaWxpdHkgd2l0aCBvdGhlciBleHRlbnNpb25zDQogICAgICBrZXliaW5kc1trZXldLmtleVYuZm9yRWFjaChpdGVtID0+IHsNCiAgICAgICAgaWYgKGl0ZW0gPT09ICJzcGFjZSIpIGl0ZW0gPSAiICI7DQogICAgICAgIGlmIChpdGVtLmluY2x1ZGVzKCJhcnJvdyIpKSBpdGVtID0gaXRlbS5jaGFyQXQoMCkudG9VcHBlckNhc2UoKSArIGl0ZW0uc2xpY2UoMSkucmVwbGFjZSgiIGFycm93IiwgIiIpOw0KICAgICAgICBydW50aW1lLmlvRGV2aWNlcy5rZXlib2FyZC5wb3N0RGF0YSh7IGtleTogaXRlbSwgaXNEb3duOiB0cnVlIH0pOw0KICAgICAgfSk7DQogICAgfQ0KICB9KTsNCiAgcnVudGltZS5vbigiUFJPSkVDVF9TVE9QX0FMTCIsICgpID0+IHsgY29uZGl0aW9uU3RvcmFnZSA9IFtdIH0pOw0KICBydW50aW1lLm9uKCJQUk9KRUNUX1NUQVJUIiwgKCkgPT4geyBjb25kaXRpb25TdG9yYWdlID0gW10gfSk7DQoNCiAgdm0ub24oIkVYVEVOU0lPTl9BRERFRCIsIHRyeVVzZVNjcmF0Y2hCbG9ja3MpOw0KICB2bS5vbigiQkxPQ0tTSU5GT19VUERBVEUiLCB0cnlVc2VTY3JhdGNoQmxvY2tzKTsNCiAgdHJ5VXNlU2NyYXRjaEJsb2NrcygpOw0KICBmdW5jdGlvbiB0cnlVc2VTY3JhdGNoQmxvY2tzKCkgew0KICAgIGlmICghd2luZG93LlNjcmF0Y2hCbG9ja3MpIHJldHVybjsNCiAgICB2bS5yZW1vdmVMaXN0ZW5lcigiRVhURU5TSU9OX0FEREVEIiwgdHJ5VXNlU2NyYXRjaEJsb2Nrcyk7DQogICAgdm0ucmVtb3ZlTGlzdGVuZXIoIkJMT0NLU0lORk9fVVBEQVRFIiwgdHJ5VXNlU2NyYXRjaEJsb2Nrcyk7DQogICAgY29uc3Qgb3JpZ2luYWxDaGVjayA9IFNjcmF0Y2hCbG9ja3Muc2NyYXRjaEJsb2Nrc1V0aWxzLmlzU2hhZG93QXJndW1lbnRSZXBvcnRlcjsNCiAgICBTY3JhdGNoQmxvY2tzLnNjcmF0Y2hCbG9ja3NVdGlscy5pc1NoYWRvd0FyZ3VtZW50UmVwb3J0ZXIgPSBmdW5jdGlvbiAoYmxvY2spIHsNCiAgICAgIGNvbnN0IHJlc3VsdCA9IG9yaWdpbmFsQ2hlY2soYmxvY2spOw0KICAgICAgaWYgKHJlc3VsdCkgcmV0dXJuIHRydWU7DQogICAgICByZXR1cm4gYmxvY2suaXNTaGFkb3coKSAmJiByZWdlbmVyYXRlZFJlcG9ydGVycy5pbmNsdWRlcyhibG9jay50eXBlKTsNCiAgICB9Ow0KICB9DQoNCiAgLy8gVGhhbmsgeW91IHNvIG11Y2ggdG8gQEZ1cnJ5UiBmb3IgdGhlIGhlbHAgPDMNCiAgZnVuY3Rpb24gZ2V0Q29tcGlsZXIoKSB7DQogICAgaWYgKHZtLmV4cG9ydHMuSlNHZW5lcmF0b3IgJiYgdm0uZXhwb3J0cy5TY3JpcHRUcmVlR2VuZXJhdG9yKSByZXR1cm4gdm0uZXhwb3J0czsNCiAgICBlbHNlIGlmICh2bS5leHBvcnRzLmlfd2lsbF9ub3RfYXNrX2Zvcl9oZWxwX3doZW5fdGhlc2VfYnJlYWspIHJldHVybiB2bS5leHBvcnRzLmlfd2lsbF9ub3RfYXNrX2Zvcl9oZWxwX3doZW5fdGhlc2VfYnJlYWsoKTsNCiAgfQ0KICBjb25zdCBjb21waWxlciA9IGdldENvbXBpbGVyKCk7DQogIGlmIChjb21waWxlcikgew0KICAgIGNvbnN0IHsgSlNHZW5lcmF0b3IsIFNjcmlwdFRyZWVHZW5lcmF0b3IgfSA9IGNvbXBpbGVyOw0KICAgIGNvbnN0IF9JUmRlc2NlbmRTdGFja2VkQmxvY2sgPSBTY3JpcHRUcmVlR2VuZXJhdG9yLnByb3RvdHlwZS5kZXNjZW5kU3RhY2tlZEJsb2NrOw0KICAgIFNjcmlwdFRyZWVHZW5lcmF0b3IucHJvdG90eXBlLmRlc2NlbmRTdGFja2VkQmxvY2sgPSBmdW5jdGlvbiAoYmxvY2spIHsNCiAgICAgIGlmIChibG9jay5vcGNvZGUgPT09ICJTUGFkdkNvbnRyb2xfYnJlYWtMb29wIikgew0KICAgICAgICAvLyBjb25maXJtIGlmIGluc2lkZSBsb29wDQogICAgICAgIGlmIChjaGVjazRDQmxvY2soYmxvY2suaWQsIHRoaXMuYmxvY2tzKSkgcmV0dXJuIHsga2luZDogIlNQYWR2Q29udHJvbC5icmVhayIgfTsNCiAgICAgICAgZWxzZSByZXR1cm4gX0lSZGVzY2VuZFN0YWNrZWRCbG9jay5jYWxsKHRoaXMsIGJsb2NrKTsNCiAgICAgIH0gZWxzZSByZXR1cm4gX0lSZGVzY2VuZFN0YWNrZWRCbG9jay5jYWxsKHRoaXMsIGJsb2NrKTsNCiAgICB9Ow0KICAgIGNvbnN0IF9KU2Rlc2NlbmRTdGFja2VkQmxvY2sgPSBKU0dlbmVyYXRvci5wcm90b3R5cGUuZGVzY2VuZFN0YWNrZWRCbG9jazsNCiAgICBKU0dlbmVyYXRvci5wcm90b3R5cGUuZGVzY2VuZFN0YWNrZWRCbG9jayA9IGZ1bmN0aW9uIChub2RlKSB7DQogICAgICBpZiAobm9kZS5raW5kID09PSAiU1BhZHZDb250cm9sLmJyZWFrIikgdGhpcy5zb3VyY2UgKz0gImJyZWFrO1xuIjsNCiAgICAgIGVsc2UgcmV0dXJuIF9KU2Rlc2NlbmRTdGFja2VkQmxvY2suY2FsbCh0aGlzLCBub2RlKTsNCiAgICB9Ow0KICB9DQogIGZ1bmN0aW9uIGNoZWNrNENCbG9jayhpZCwgY29udGFpbmVyKSB7DQogICAgbGV0IG5ld0lEID0gY29udGFpbmVyLmdldEJsb2NrKGlkKTsNCiAgICBsZXQgY29uID0gdHJ1ZTsNCiAgICBpZiAoIW5ld0lEKSByZXR1cm4gZmFsc2U7DQogICAgd2hpbGUgKGNvbikgew0KICAgICAgaWYgKG5ld0lELnBhcmVudCAhPT0gbnVsbCkgew0KICAgICAgICBuZXdJRCA9IGNvbnRhaW5lci5nZXRCbG9jayhuZXdJRC5wYXJlbnQpOw0KICAgICAgICBpZiAoY29udGFpbmVyLmdldEJyYW5jaChuZXdJRC5pZCkgIT09IG51bGwpIHsNCiAgICAgICAgICBuZXdJRCA9IHRydWU7DQogICAgICAgICAgY29uID0gZmFsc2U7DQogICAgICAgIH0NCiAgICAgIH0gZWxzZSB7DQogICAgICAgIG5ld0lEID0gZmFsc2U7DQogICAgICAgIGNvbiA9IGZhbHNlOw0KICAgICAgICBicmVhazsNCiAgICAgIH0NCiAgICB9DQogICAgcmV0dXJuIG5ld0lEOw0KICB9DQoNCiAgY2xhc3MgU1BhZHZDb250cm9sIHsNCiAgICBnZXRJbmZvKCkgew0KICAgICAgcmV0dXJuIHsNCiAgICAgICAgaWQ6ICJTUGFkdkNvbnRyb2wiLA0KICAgICAgICBuYW1lOiAiRXh0cmEgQ29udHJvbHMiLA0KICAgICAgICBjb2xvcjE6ICIjRkZBQjE5IiwNCiAgICAgICAgY29sb3IyOiAiI0VDOUMxMyIsDQogICAgICAgIGNvbG9yMzogIiNDRjhCMTciLA0KICAgICAgICBtZW51SWNvblVSSSwNCiAgICAgICAgYmxvY2tzOiBbDQogICAgICAgICAgew0KICAgICAgICAgICAgb3Bjb2RlOiAiZm9yY2VIYXQiLA0KICAgICAgICAgICAgZXh0ZW5zaW9uczogWyJjb2xvdXJzX2NvbnRyb2wiXSwNCiAgICAgICAgICAgIGJsb2NrVHlwZTogU2NyYXRjaC5CbG9ja1R5cGUuQ09NTUFORCwNCiAgICAgICAgICAgIHRleHQ6ICJmb3JjZSBoYXQgW0hBVF0gdG8gW1RZUEVdIG9uIGFjdGl2YXRlIiwNCiAgICAgICAgICAgIGFyZ3VtZW50czogew0KICAgICAgICAgICAgICBIQVQ6IHsgdHlwZTogU2NyYXRjaC5Bcmd1bWVudFR5cGUuU1RSSU5HLCBtZW51OiAiSEFUX01FTlUiIH0sDQogICAgICAgICAgICAgIFRZUEU6IHsgdHlwZTogU2NyYXRjaC5Bcmd1bWVudFR5cGUuU1RSSU5HLCBtZW51OiAiQUNUSVZBVEUiIH0NCiAgICAgICAgICAgIH0NCiAgICAgICAgICB9LA0KICAgICAgICAgIHsNCiAgICAgICAgICAgIG9wY29kZTogInJlc2V0SGF0cyIsDQogICAgICAgICAgICBleHRlbnNpb25zOiBbImNvbG91cnNfY29udHJvbCJdLA0KICAgICAgICAgICAgYmxvY2tUeXBlOiBTY3JhdGNoLkJsb2NrVHlwZS5DT01NQU5ELA0KICAgICAgICAgICAgdGV4dDogInJlc2V0IGZvcmNlZCBoYXRzIg0KICAgICAgICAgIH0sDQogICAgICAgICAgIi0tLSIsDQogICAgICAgICAgew0KICAgICAgICAgICAgb3Bjb2RlOiAia2V5YmluZCIsDQogICAgICAgICAgICBleHRlbnNpb25zOiBbImNvbG91cnNfY29udHJvbCJdLA0KICAgICAgICAgICAgYmxvY2tUeXBlOiBTY3JhdGNoLkJsb2NrVHlwZS5DT01NQU5ELA0KICAgICAgICAgICAgdGV4dDogImJpbmQga2V5IFtLRVkyXSB0byBbS0VZMV0iLA0KICAgICAgICAgICAgYXJndW1lbnRzOiB7DQogICAgICAgICAgICAgIEtFWTE6IHsgdHlwZTogU2NyYXRjaC5Bcmd1bWVudFR5cGUuU1RSSU5HLCBtZW51OiAia2V5cyIgfSwNCiAgICAgICAgICAgICAgS0VZMjogeyB0eXBlOiBTY3JhdGNoLkFyZ3VtZW50VHlwZS5TVFJJTkcsIG1lbnU6ICJrZXlzIiB9DQogICAgICAgICAgICB9DQogICAgICAgICAgfSwNCiAgICAgICAgICB7DQogICAgICAgICAgICBvcGNvZGU6ICJnZXRLZXliaW5kIiwNCiAgICAgICAgICAgIGV4dGVuc2lvbnM6IFsiY29sb3Vyc19jb250cm9sIl0sDQogICAgICAgICAgICBibG9ja1R5cGU6IFNjcmF0Y2guQmxvY2tUeXBlLlJFUE9SVEVSLA0KICAgICAgICAgICAgdGV4dDogImJpbmRzIG9mIFtLRVldIGtleSIsDQogICAgICAgICAgICBhcmd1bWVudHM6IHsNCiAgICAgICAgICAgICAgS0VZOiB7IHR5cGU6IFNjcmF0Y2guQXJndW1lbnRUeXBlLlNUUklORywgbWVudTogImtleXMiIH0NCiAgICAgICAgICAgIH0NCiAgICAgICAgICB9LA0KICAgICAgICAgIHsNCiAgICAgICAgICAgIG9wY29kZTogInJlc2V0S2V5IiwNCiAgICAgICAgICAgIGV4dGVuc2lvbnM6IFsiY29sb3Vyc19jb250cm9sIl0sDQogICAgICAgICAgICBibG9ja1R5cGU6IFNjcmF0Y2guQmxvY2tUeXBlLkNPTU1BTkQsDQogICAgICAgICAgICB0ZXh0OiAidW5iaW5kIGFsbCBrZXliaW5kcyBvZiBbS0VZXSIsDQogICAgICAgICAgICBhcmd1bWVudHM6IHsNCiAgICAgICAgICAgICAgS0VZOiB7IHR5cGU6IFNjcmF0Y2guQXJndW1lbnRUeXBlLlNUUklORywgbWVudTogImtleXMiIH0NCiAgICAgICAgICAgIH0NCiAgICAgICAgICB9LA0KICAgICAgICAgIHsNCiAgICAgICAgICAgIG9wY29kZTogInJlc2V0QmluZHMiLA0KICAgICAgICAgICAgZXh0ZW5zaW9uczogWyJjb2xvdXJzX2NvbnRyb2wiXSwNCiAgICAgICAgICAgIGJsb2NrVHlwZTogU2NyYXRjaC5CbG9ja1R5cGUuQ09NTUFORCwNCiAgICAgICAgICAgIHRleHQ6ICJyZXNldCBrZXliaW5kcyINCiAgICAgICAgICB9LA0KICAgICAgICAgICItLS0iLA0KICAgICAgICAgIHsNCiAgICAgICAgICAgIG9wY29kZTogInJlcGVhdEZvclVudGlsIiwNCiAgICAgICAgICAgIGV4dGVuc2lvbnM6IFsiY29sb3Vyc19jb250cm9sIl0sDQogICAgICAgICAgICBibG9ja1R5cGU6IFNjcmF0Y2guQmxvY2tUeXBlLkxPT1AsDQogICAgICAgICAgICB0ZXh0OiAicmVwZWF0IFtOVU1dIG9yIHVudGlsIFtDT05dIiwNCiAgICAgICAgICAgIGFyZ3VtZW50czogew0KICAgICAgICAgICAgICBOVU06IHsgdHlwZTogU2NyYXRjaC5Bcmd1bWVudFR5cGUuU1RSSU5HLCBkZWZhdWx0VmFsdWU6IDEwIH0sDQogICAgICAgICAgICAgIENPTjogeyB0eXBlOiBTY3JhdGNoLkFyZ3VtZW50VHlwZS5CT09MRUFOIH0NCiAgICAgICAgICAgIH0NCiAgICAgICAgICB9LA0KICAgICAgICAgIHsNCiAgICAgICAgICAgIG9wY29kZTogInJlcGVhdFNlY1VudGlsIiwNCiAgICAgICAgICAgIGV4dGVuc2lvbnM6IFsiY29sb3Vyc19jb250cm9sIl0sDQogICAgICAgICAgICBibG9ja1R5cGU6IFNjcmF0Y2guQmxvY2tUeXBlLkxPT1AsDQogICAgICAgICAgICB0ZXh0OiAicmVwZWF0IGZvciBbTlVNXSBzZWNzIG9yIHVudGlsIFtDT05dIiwNCiAgICAgICAgICAgIGFyZ3VtZW50czogew0KICAgICAgICAgICAgICBOVU06IHsgdHlwZTogU2NyYXRjaC5Bcmd1bWVudFR5cGUuU1RSSU5HLCBkZWZhdWx0VmFsdWU6IDEgfSwNCiAgICAgICAgICAgICAgQ09OOiB7IHR5cGU6IFNjcmF0Y2guQXJndW1lbnRUeXBlLkJPT0xFQU4gfQ0KICAgICAgICAgICAgfQ0KICAgICAgICAgIH0sDQogICAgICAgICAgew0KICAgICAgICAgICAgb3Bjb2RlOiAic3BheWVkQ29uZGl0aW9uIiwNCiAgICAgICAgICAgIGV4dGVuc2lvbnM6IFsiY29sb3Vyc19jb250cm9sIl0sDQogICAgICAgICAgICBibG9ja1R5cGU6IFNjcmF0Y2guQmxvY2tUeXBlLkxPT1AsDQogICAgICAgICAgICB0ZXh0OiBbImlmIFtDT04xXSBzdGFydCBsb29wIiwgInJlcGVhdCB1bnRpbCBbQ09OMl0iXSwNCiAgICAgICAgICAgIGJyYW5jaEljb25VUkk6ICIiLA0KICAgICAgICAgICAgYXJndW1lbnRzOiB7DQogICAgICAgICAgICAgIENPTjE6IHsgdHlwZTogU2NyYXRjaC5Bcmd1bWVudFR5cGUuQk9PTEVBTiB9LA0KICAgICAgICAgICAgICBDT04yOiB7IHR5cGU6IFNjcmF0Y2guQXJndW1lbnRUeXBlLkJPT0xFQU4gfQ0KICAgICAgICAgICAgfQ0KICAgICAgICAgIH0sDQogICAgICAgICAgIi0tLSIsDQogICAgICAgICAgew0KICAgICAgICAgICAgb3Bjb2RlOiAiYnJlYWtMb29wIiwNCiAgICAgICAgICAgIGV4dGVuc2lvbnM6IFsiY29sb3Vyc19jb250cm9sIl0sDQogICAgICAgICAgICBibG9ja1R5cGU6IFNjcmF0Y2guQmxvY2tUeXBlLkNPTU1BTkQsDQogICAgICAgICAgICB0ZXh0OiAiYnJlYWsgb3V0IGxvb3AgW0lDT05dIiwNCiAgICAgICAgICAgIGlzVGVybWluYWw6IHRydWUsDQogICAgICAgICAgICBhcmd1bWVudHM6IHsNCiAgICAgICAgICAgICAgSUNPTjogeyB0eXBlOiBTY3JhdGNoLkFyZ3VtZW50VHlwZS5JTUFHRSwgZGF0YVVSSTogYnJlYWtJY29uIH0NCiAgICAgICAgICAgIH0NCiAgICAgICAgICB9LA0KICAgICAgICAgICItLS0iLA0KICAgICAgICAgIHsNCiAgICAgICAgICAgIG9wY29kZTogInNpbXVSdW4iLA0KICAgICAgICAgICAgZXh0ZW5zaW9uczogWyJjb2xvdXJzX2NvbnRyb2wiXSwNCiAgICAgICAgICAgIGJsb2NrVHlwZTogU2NyYXRjaC5CbG9ja1R5cGUuQ09ORElUSU9OQUwsDQogICAgICAgICAgICB0ZXh0OiAic2ltdWx0YW5lb3VzbHkgcnVuIiwNCiAgICAgICAgICAgIGJyYW5jaENvdW50OiAyDQogICAgICAgICAgfSwNCiAgICAgICAgICB7DQogICAgICAgICAgICBvcGNvZGU6ICJydW5UeXBlIiwNCiAgICAgICAgICAgIGV4dGVuc2lvbnM6IFsiY29sb3Vyc19jb250cm9sIl0sDQogICAgICAgICAgICBibG9ja1R5cGU6IFNjcmF0Y2guQmxvY2tUeXBlLkxPT1AsDQogICAgICAgICAgICB0ZXh0OiAicnVuIFtUWVBFXSIsDQogICAgICAgICAgICBhcmd1bWVudHM6IHsNCiAgICAgICAgICAgICAgVFlQRTogeyB0eXBlOiBTY3JhdGNoLkFyZ3VtZW50VHlwZS5TVFJJTkcsIG1lbnU6ICJydW5UeXBlcyIgfQ0KICAgICAgICAgICAgfQ0KICAgICAgICAgIH0sDQogICAgICAgICAgew0KICAgICAgICAgICAgb3Bjb2RlOiAiYXN5bmNDb2RlIiwNCiAgICAgICAgICAgIGV4dGVuc2lvbnM6IFsiY29sb3Vyc19jb250cm9sIl0sDQogICAgICAgICAgICBibG9ja1R5cGU6IFNjcmF0Y2guQmxvY2tUeXBlLkxPT1AsDQogICAgICAgICAgICBicmFuY2hJY29uVVJJOiAiIiwNCiAgICAgICAgICAgIHRleHQ6ICJbSUNPTl0gYXN5bmMiLA0KICAgICAgICAgICAgYXJndW1lbnRzOiB7DQogICAgICAgICAgICAgIElDT046IHsgdHlwZTogU2NyYXRjaC5Bcmd1bWVudFR5cGUuSU1BR0UsIGRhdGFVUkk6IHRpbWVJY29uIH0NCiAgICAgICAgICAgIH0NCiAgICAgICAgICB9LA0KICAgICAgICAgIHsgYmxvY2tUeXBlOiBTY3JhdGNoLkJsb2NrVHlwZS5YTUwsIHhtbDogYDxibG9jayB0eXBlPSJTUGFkdkNvbnRyb2xfbmV3VGhyZWFkQWR2Ij48dmFsdWUgbmFtZT0iQVJHUyI+PHNoYWRvdyB0eXBlPSJ0ZXh0Ij48ZmllbGQgbmFtZT0iVEVYVCI+eyBpbmZvIDogMSB9PC9maWVsZD48L3NoYWRvdz48L3ZhbHVlPjx2YWx1ZSBuYW1lPSJGUkFNRSI+PHNoYWRvdyB0eXBlPSJTUGFkdkNvbnRyb2xfdGhyZWFkQXJncyI+PC9zaGFkb3c+PC92YWx1ZT48L2Jsb2NrPmAgfSwNCiAgICAgICAgICB7DQogICAgICAgICAgICBvcGNvZGU6ICJuZXdUaHJlYWRBZHYiLCBibG9ja1R5cGU6IFNjcmF0Y2guQmxvY2tUeXBlLkxPT1AsDQogICAgICAgICAgICB0ZXh0OiAic3RhcnQgbmV3IHRocmVhZCB3aXRoIFtGUkFNRV0gc2V0IHRvIFtBUkdTXSIsDQogICAgICAgICAgICBoaWRlRnJvbVBhbGV0dGU6IHRydWUsIGJyYW5jaEljb25VUkk6IG5ld1RocmVhZCwNCiAgICAgICAgICAgIGFyZ3VtZW50czogew0KICAgICAgICAgICAgICBBUkdTOiB7IHR5cGU6IFNjcmF0Y2guQXJndW1lbnRUeXBlLlNUUklORywgZGVmYXVsdFZhbHVlOiAieyBpbmZvIDogMSB9IiB9LA0KICAgICAgICAgICAgICBGUkFNRToge30NCiAgICAgICAgICAgIH0NCiAgICAgICAgICB9LA0KICAgICAgICAgIHsNCiAgICAgICAgICAgIG9wY29kZTogInRocmVhZEFyZ3MiLCBibG9ja1R5cGU6IFNjcmF0Y2guQmxvY2tUeXBlLlJFUE9SVEVSLA0KICAgICAgICAgICAgaGlkZUZyb21QYWxldHRlOiB0cnVlLCB0ZXh0OiAiYXJndW1lbnQiDQogICAgICAgICAgfSwNCiAgICAgICAgICAiLS0tIiwNCiAgICAgICAgICB7DQogICAgICAgICAgICBvcGNvZGU6ICJpZlJ1bkJsb2NrIiwNCiAgICAgICAgICAgIGV4dGVuc2lvbnM6IFsiY29sb3Vyc19jb250cm9sIl0sDQogICAgICAgICAgICBibG9ja1R5cGU6IFNjcmF0Y2guQmxvY2tUeXBlLkNPTkRJVElPTkFMLA0KICAgICAgICAgICAgdGV4dDogInN0ZXAgdGhyb3VnaCBibG9ja3Mgd2hpbGUgW0NPTl0iLA0KICAgICAgICAgICAgYnJhbmNoQ291bnQ6IDEsDQogICAgICAgICAgICBhcmd1bWVudHM6IHsNCiAgICAgICAgICAgICAgQ09OOiB7IHR5cGU6IFNjcmF0Y2guQXJndW1lbnRUeXBlLkJPT0xFQU4gfQ0KICAgICAgICAgICAgfQ0KICAgICAgICAgIH0sDQogICAgICAgICAgew0KICAgICAgICAgICAgb3Bjb2RlOiAiaWZQYXJ0IiwNCiAgICAgICAgICAgIGV4dGVuc2lvbnM6IFsiY29sb3Vyc19jb250cm9sIl0sDQogICAgICAgICAgICBibG9ja1R5cGU6IFNjcmF0Y2guQmxvY2tUeXBlLkNPTkRJVElPTkFMLA0KICAgICAgICAgICAgdGV4dDogWyJpZiBbQ09OXSIsICJteSBJRCBbSURdIl0sDQogICAgICAgICAgICBicmFuY2hDb3VudDogMSwNCiAgICAgICAgICAgIGFyZ3VtZW50czogew0KICAgICAgICAgICAgICBDT046IHsgdHlwZTogU2NyYXRjaC5Bcmd1bWVudFR5cGUuQk9PTEVBTiB9LA0KICAgICAgICAgICAgICBJRDogeyB0eXBlOiBTY3JhdGNoLkFyZ3VtZW50VHlwZS5TVFJJTkcsIGRlZmF1bHRWYWx1ZTogIm15LWJsb2NrMSIgfQ0KICAgICAgICAgICAgfQ0KICAgICAgICAgIH0sDQogICAgICAgICAgew0KICAgICAgICAgICAgb3Bjb2RlOiAiZWxzZVBhcnQiLA0KICAgICAgICAgICAgZXh0ZW5zaW9uczogWyJjb2xvdXJzX2NvbnRyb2wiXSwNCiAgICAgICAgICAgIGJsb2NrVHlwZTogU2NyYXRjaC5CbG9ja1R5cGUuQ09ORElUSU9OQUwsDQogICAgICAgICAgICB0ZXh0OiBbImVsc2UiLCAibXkgSUQgW0lEXSJdLA0KICAgICAgICAgICAgYnJhbmNoQ291bnQ6IDEsDQogICAgICAgICAgICBhcmd1bWVudHM6IHsNCiAgICAgICAgICAgICAgSUQ6IHsgdHlwZTogU2NyYXRjaC5Bcmd1bWVudFR5cGUuU1RSSU5HLCBkZWZhdWx0VmFsdWU6ICJteS1ibG9jazEiIH0NCiAgICAgICAgICAgIH0NCiAgICAgICAgICB9LA0KICAgICAgICAgICItLS0iLA0KICAgICAgICAgIHsNCiAgICAgICAgICAgIG9wY29kZTogIm9uQ2FsbCIsDQogICAgICAgICAgICBleHRlbnNpb25zOiBbImNvbG91cnNfY29udHJvbCJdLA0KICAgICAgICAgICAgYmxvY2tUeXBlOiBTY3JhdGNoLkJsb2NrVHlwZS5DT05ESVRJT05BTCwNCiAgICAgICAgICAgIHRleHQ6ICJvbiBjYWxsIFtDQUxMXSBydW4iLA0KICAgICAgICAgICAgYnJhbmNoQ291bnQ6IDEsDQogICAgICAgICAgICBhcmd1bWVudHM6IHsNCiAgICAgICAgICAgICAgQ0FMTDogeyB0eXBlOiBTY3JhdGNoLkFyZ3VtZW50VHlwZS5TVFJJTkcsIGRlZmF1bHRWYWx1ZTogImJyYW5jaDEiIH0NCiAgICAgICAgICAgIH0NCiAgICAgICAgICB9LA0KICAgICAgICAgIHsNCiAgICAgICAgICAgIG9wY29kZTogInJ1bkJyYW5jaCIsDQogICAgICAgICAgICBleHRlbnNpb25zOiBbImNvbG91cnNfY29udHJvbCJdLA0KICAgICAgICAgICAgYmxvY2tUeXBlOiBTY3JhdGNoLkJsb2NrVHlwZS5DT01NQU5ELA0KICAgICAgICAgICAgdGV4dDogImNhbGwgW0lEXSB0byBydW4iLA0KICAgICAgICAgICAgYXJndW1lbnRzOiB7DQogICAgICAgICAgICAgIElEOiB7IHR5cGU6IFNjcmF0Y2guQXJndW1lbnRUeXBlLlNUUklORywgZGVmYXVsdFZhbHVlOiAiYnJhbmNoMSIgfQ0KICAgICAgICAgICAgfQ0KICAgICAgICAgIH0sDQogICAgICAgICAgew0KICAgICAgICAgICAgb3Bjb2RlOiAicnVuQnJhbmNoV2FpdCIsDQogICAgICAgICAgICBleHRlbnNpb25zOiBbImNvbG91cnNfY29udHJvbCJdLA0KICAgICAgICAgICAgYmxvY2tUeXBlOiBTY3JhdGNoLkJsb2NrVHlwZS5DT01NQU5ELA0KICAgICAgICAgICAgdGV4dDogImNhbGwgW0lEXSB0byBydW4gYW5kIHdhaXQiLA0KICAgICAgICAgICAgYXJndW1lbnRzOiB7DQogICAgICAgICAgICAgIElEOiB7IHR5cGU6IFNjcmF0Y2guQXJndW1lbnRUeXBlLlNUUklORywgZGVmYXVsdFZhbHVlOiAiYnJhbmNoMSIgfQ0KICAgICAgICAgICAgfQ0KICAgICAgICAgIH0sDQogICAgICAgICAgIi0tLSIsDQogICAgICAgICAgew0KICAgICAgICAgICAgb3Bjb2RlOiAiYXNDbG9uZSIsDQogICAgICAgICAgICBleHRlbnNpb25zOiBbImNvbG91cnNfY29udHJvbCJdLA0KICAgICAgICAgICAgYmxvY2tUeXBlOiBTY3JhdGNoLkJsb2NrVHlwZS5MT09QLA0KICAgICAgICAgICAgdGV4dDogImFzIGNsb25lcyBvZiBteXNlbGYgd2l0aCBbVkFSXSBzZXQgdG8gW1ZBTF0iLA0KICAgICAgICAgICAgYXJndW1lbnRzOiB7DQogICAgICAgICAgICAgIFZBUjogeyB0eXBlOiBTY3JhdGNoLkFyZ3VtZW50VHlwZS5TVFJJTkcsIG1lbnU6ICJ2YXJzTWVudSIgfSwNCiAgICAgICAgICAgICAgVkFMOiB7IHR5cGU6IFNjcmF0Y2guQXJndW1lbnRUeXBlLlNUUklORywgZGVmYXVsdFZhbHVlOiAiMCIgfQ0KICAgICAgICAgICAgfQ0KICAgICAgICAgIH0sDQogICAgICAgICAgew0KICAgICAgICAgICAgb3Bjb2RlOiAiZGVsZXRlUnVuIiwNCiAgICAgICAgICAgIGV4dGVuc2lvbnM6IFsiY29sb3Vyc19jb250cm9sIl0sDQogICAgICAgICAgICBibG9ja1R5cGU6IFNjcmF0Y2guQmxvY2tUeXBlLkxPT1AsDQogICAgICAgICAgICB0ZXh0OiAiZGVsZXRlIHRoaXMgY2xvbmUgYW5kIHRlbGwgbWFpbiBzcHJpdGUiLA0KICAgICAgICAgICAgaXNUZXJtaW5hbDogdHJ1ZQ0KICAgICAgICAgIH0sDQogICAgICAgIF0sDQogICAgICAgIG1lbnVzOiB7DQogICAgICAgICAgQUNUSVZBVEU6IFsiZmluaXNoIiwgInJlc3RhcnQiXSwNCiAgICAgICAgICBIQVRfTUVOVTogew0KICAgICAgICAgICAgYWNjZXB0UmVwb3J0ZXJzOiB0cnVlLA0KICAgICAgICAgICAgaXRlbXM6ICJvcmdhbml6ZUhhdHMiDQogICAgICAgICAgfSwNCiAgICAgICAgICB2YXJzTWVudTogew0KICAgICAgICAgICAgYWNjZXB0UmVwb3J0ZXJzOiB0cnVlLA0KICAgICAgICAgICAgaXRlbXM6ICJnZXRQcml2YXRlVmFycyINCiAgICAgICAgICB9LA0KICAgICAgICAgIHJ1blR5cGVzOiB7DQogICAgICAgICAgICBhY2NlcHRSZXBvcnRlcnM6IHRydWUsDQogICAgICAgICAgICBpdGVtczogWyJmb3J3YXJkIiwgInJldmVyc2VkIiwgImZvcndhcmQgYW5kIHJldmVyc2VkIiwgInJhbmRvbWl6ZWQiXQ0KICAgICAgICAgIH0sDQogICAgICAgICAga2V5czogew0KICAgICAgICAgICAgYWNjZXB0UmVwb3J0ZXJzOiB0cnVlLA0KICAgICAgICAgICAgaXRlbXM6IGtleXNNZW51DQogICAgICAgICAgfQ0KICAgICAgICB9LA0KICAgICAgfTsNCiAgICB9DQoNCiAgICBnZXRQcml2YXRlVmFycygpIHsNCiAgICAgIGNvbnN0IHZhcnMgPSB0eXBlb2YgQmxvY2tseSA9PT0gInVuZGVmaW5lZCIgPyBbXSA6IEJsb2NrbHkuZ2V0TWFpbldvcmtzcGFjZSgpDQogICAgICAgIC5nZXRWYXJpYWJsZU1hcCgpLmdldFZhcmlhYmxlc09mVHlwZSgiIikuZmlsdGVyKChtb2RlbCkgPT4gbW9kZWwuaXNMb2NhbCkubWFwKChtb2RlbCkgPT4gKG1vZGVsLm5hbWUpKTsNCiAgICAgIGlmICh2YXJzLmxlbmd0aCA+IDApIHJldHVybiB2YXJzOw0KICAgICAgZWxzZSByZXR1cm4gWyJwcml2YXRlIHZhcmlhYmxlIl07DQogICAgfQ0KDQogICAgb3JnYW5pemVIYXRzKCkgew0KICAgICAgY29uc3QgYWxsSGF0cyA9IHJ1bnRpbWUuX2hhdHM7DQogICAgICBjb25zdCB2YW5pbGxhSGF0cyA9IFsNCiAgICAgICAge3RleHQ6ICJ3aGVuIEkgc3RhcnQgYXMgY2xvbmUiLCB2YWx1ZTogImNvbnRyb2xfc3RhcnRfYXNfY2xvbmUifSwNCiAgICAgICAge3RleHQ6ICJ3aGVuIGdyZWVuIGZsYWcgY2xpY2tlZCIsIHZhbHVlOiAiZXZlbnRfd2hlbmZsYWdjbGlja2VkIn0sDQogICAgICAgIHt0ZXh0OiAid2hlbiBrZXkgcHJlc3NlZCIsIHZhbHVlOiAiZXZlbnRfd2hlbmtleXByZXNzZWQifSwNCiAgICAgICAge3RleHQ6ICJ3aGVuIHNwcml0ZSBjbGlja2VkIiwgdmFsdWU6ICJldmVudF93aGVudGhpc3Nwcml0ZWNsaWNrZWQifSwNCiAgICAgICAge3RleHQ6ICJ3aGVuIHN0YWdlIGNsaWNrZWQiLCB2YWx1ZTogImV2ZW50X3doZW5zdGFnZWNsaWNrZWQifSwNCiAgICAgICAge3RleHQ6ICJ3aGVuIGJhY2tkcm9wIHN3aXRjaGVzIiwgdmFsdWU6ICJldmVudF93aGVuYmFja2Ryb3Bzd2l0Y2hlc3RvIn0sDQogICAgICAgIHt0ZXh0OiAid2hlbiB0b3VjaGluZyBvYmplY3QiLCB2YWx1ZTogImV2ZW50X3doZW50b3VjaGluZ29iamVjdCJ9LA0KICAgICAgICB7dGV4dDogIndoZW4gdmFsdWUgZ3JlYXRlciB0aGFuIiwgdmFsdWU6ICJldmVudF93aGVuZ3JlYXRlcnRoYW4ifSwNCiAgICAgICAge3RleHQ6ICJ3aGVuIGJyb2FkY2FzdCByZWNlaXZlZCIsIHZhbHVlOiAiZXZlbnRfd2hlbmJyb2FkY2FzdHJlY2VpdmVkIn0NCiAgICAgIF07DQogICAgICBjb25zdCBzdGFydEluZGV4ID0gT2JqZWN0LmtleXMoYWxsSGF0cykuZmluZEluZGV4KGtleSA9PiBrZXkgPT09ICJldmVudF93aGVuYnJvYWRjYXN0cmVjZWl2ZWQiKTsNCiAgICAgIGNvbnN0IGZpbHRlcmVkSGF0cyA9IE9iamVjdC5rZXlzKGFsbEhhdHMpDQogICAgICAgIC5maWx0ZXIoKGtleSwgaW5kZXgpID0+IGluZGV4ID4gc3RhcnRJbmRleCkNCiAgICAgICAgLm1hcChrZXkgPT4gKHsgdGV4dDoga2V5LCB2YWx1ZToga2V5IH0pKTsNCiAgICAgIHJldHVybiBbLi4udmFuaWxsYUhhdHMsIC4uLmZpbHRlcmVkSGF0c107DQogICAgfQ0KDQogICAgZm9yY2VIYXQoYXJncykgew0KICAgICAgY29uc3QgdHlwZSA9IGFyZ3MuVFlQRSA9PT0gInJlc3RhcnQiOw0KICAgICAgY29uc3QgdGhpc0hhdCA9IHJ1bnRpbWUuX2hhdHNbYXJncy5IQVRdOw0KICAgICAgaWYgKHRoaXNIYXQpIHRoaXNIYXQucmVzdGFydEV4aXN0aW5nVGhyZWFkcyA9IHR5cGU7DQogICAgfQ0KDQogICAgcmVzZXRIYXRzKGFyZ3MpIHsNCiAgICAgIGNvbnN0IGN1cnJlbnRIYXRzID0gcnVudGltZS5faGF0czsNCiAgICAgIGZvciAoY29uc3Qga2V5IGluIGhhdHMpIHsNCiAgICAgICAgY3VycmVudEhhdHNba2V5XS5yZXN0YXJ0RXhpc3RpbmdUaHJlYWRzID0gaGF0c1trZXldLnJlc3RhcnRFeGlzdGluZ1RocmVhZHM7DQogICAgICB9DQogICAgICBoYXRzID0geyAuLi5ydW50aW1lLl9oYXRzIH07DQogICAgfQ0KDQogICAga2V5YmluZChhcmdzKSB7DQogICAgICBjb25zdCBrZXkxID0gU2NyYXRjaC5DYXN0LnRvU3RyaW5nKGFyZ3MuS0VZMSk7DQogICAgICBjb25zdCBrZXkyID0gU2NyYXRjaC5DYXN0LnRvU3RyaW5nKGFyZ3MuS0VZMik7DQogICAgICBpZiAoa2V5MSA9PT0ga2V5MikgcmV0dXJuOw0KICAgICAgaWYgKGtleWJpbmRzW2tleTFdKSB7DQogICAgICAgIGlmIChrZXliaW5kc1trZXkxXS5rZXlWLmluZGV4T2Yoa2V5MikgPT09IC0xKSBrZXliaW5kc1trZXkxXS5rZXlWLnB1c2goa2V5Mik7DQogICAgICB9IGVsc2UgeyBrZXliaW5kc1trZXkxXSA9IHsga2V5ViA6IFtrZXkyXSB9IH0NCiAgICB9DQoNCiAgICBnZXRLZXliaW5kKGFyZ3MpIHsNCiAgICAgIGNvbnN0IGtleSA9IGtleWJpbmRzW1NjcmF0Y2guQ2FzdC50b1N0cmluZyhhcmdzLktFWSldOw0KICAgICAgcmV0dXJuIGtleSA/IEpTT04uc3RyaW5naWZ5KGtleS5rZXlWKSA6IGBbIiR7YXJncy5LRVl9Il1gOw0KICAgIH0NCg0KICAgIHJlc2V0S2V5KGFyZ3MpIHsgZGVsZXRlIGtleWJpbmRzW1NjcmF0Y2guQ2FzdC50b1N0cmluZyhhcmdzLktFWSldIH0NCg0KICAgIHJlc2V0QmluZHMoKSB7IGtleWJpbmRzID0ge30gfQ0KDQogICAgcmVwZWF0Rm9yVW50aWwoYXJncywgdXRpbCkgew0KICAgICAgY29uc3QgY29uZGl0aW9uID0gU2NyYXRjaC5DYXN0LnRvQm9vbGVhbihhcmdzLkNPTik7DQogICAgICBpZiAodHlwZW9mIHV0aWwuc3RhY2tGcmFtZS5sb29wQ291bnRlciA9PT0gInVuZGVmaW5lZCIpIHV0aWwuc3RhY2tGcmFtZS5sb29wQ291bnRlciA9IE1hdGgucm91bmQoU2NyYXRjaC5DYXN0LnRvTnVtYmVyKGFyZ3MuTlVNKSk7DQogICAgICB1dGlsLnN0YWNrRnJhbWUubG9vcENvdW50ZXItLTsNCiAgICAgIGlmICghY29uZGl0aW9uICYmIHV0aWwuc3RhY2tGcmFtZS5sb29wQ291bnRlciA+PSAwKSB1dGlsLnN0YXJ0QnJhbmNoKDEsIHRydWUpOw0KICAgIH0NCg0KICAgIHJlcGVhdFNlY1VudGlsKGFyZ3MsIHV0aWwpIHsNCiAgICAgIGNvbnN0IGNvbmRpdGlvbiA9IFNjcmF0Y2guQ2FzdC50b0Jvb2xlYW4oYXJncy5DT04pOw0KICAgICAgaWYgKGNvbmRpdGlvbikgcmV0dXJuOyAvLyBEb250IHJ1biBvbmNlDQogICAgICBpZiAodXRpbC5zdGFja1RpbWVyTmVlZHNJbml0KCkpIHsNCiAgICAgICAgYXJncy5OVU0gPSBNYXRoLm1heCgwLCAxMDAwICogYXJncy5OVU0pOw0KICAgICAgICB1dGlsLnN0YXJ0U3RhY2tUaW1lcihhcmdzLk5VTSk7DQogICAgICAgIFNjcmF0Y2gudm0ucnVudGltZS5yZXF1ZXN0UmVkcmF3KCk7DQogICAgICAgIHV0aWwuc3RhcnRCcmFuY2goMSwgdHJ1ZSk7DQogICAgICB9IGVsc2UgaWYgKCF1dGlsLnN0YWNrVGltZXJGaW5pc2hlZCgpICYmICFjb25kaXRpb24pIHsNCiAgICAgICAgdXRpbC5zdGFydEJyYW5jaCgxLCB0cnVlKTsNCiAgICAgIH0NCiAgICB9DQoNCiAgICBzcGF5ZWRDb25kaXRpb24oYXJncywgdXRpbCkgew0KICAgICAgaWYgKHR5cGVvZiB1dGlsLnN0YWNrRnJhbWUuaW5kZXggPT09ICJ1bmRlZmluZWQiKSB1dGlsLnN0YWNrRnJhbWUuaW5kZXggPSB0cnVlOw0KICAgICAgaWYgKCFTY3JhdGNoLkNhc3QudG9Cb29sZWFuKGFyZ3MuQ09OMSkgJiYgdXRpbC5zdGFja0ZyYW1lLmluZGV4KSB7DQogICAgICAgIHJldHVybjsNCiAgICAgIH0gZWxzZSB7DQogICAgICAgIGlmICghU2NyYXRjaC5DYXN0LnRvQm9vbGVhbihhcmdzLkNPTjIpKSB7DQogICAgICAgICAgdXRpbC5zdGFja0ZyYW1lLmluZGV4ID0gZmFsc2U7DQogICAgICAgICAgdXRpbC5zdGFydEJyYW5jaCgxLCB0cnVlKTsNCiAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICB1dGlsLnN0YWNrRnJhbWUuaW5kZXggPSB0cnVlOw0KICAgICAgICAgIHJldHVybjsNCiAgICAgICAgfQ0KICAgICAgfQ0KICAgIH0NCg0KICAgIHNpbXVSdW4oYXJncywgdXRpbCkgew0KICAgICAgaWYgKA0KICAgICAgICB1dGlsLnRocmVhZC50YXJnZXQuYmxvY2tzLmdldEJyYW5jaCh1dGlsLnRocmVhZC5wZWVrU3RhY2soKSwgMSkgJiYNCiAgICAgICAgdXRpbC50aHJlYWQudGFyZ2V0LmJsb2Nrcy5nZXRCcmFuY2godXRpbC50aHJlYWQucGVla1N0YWNrKCksIDIpDQogICAgICApIHsNCiAgICAgICAgbGV0IHRocmVhZDEgPSB1dGlsLnRocmVhZC50YXJnZXQuYmxvY2tzLmdldEJyYW5jaCh1dGlsLnRocmVhZC5wZWVrU3RhY2soKSwgMSk7DQogICAgICAgIGNvbnN0IHRocmVhZDIgPSB1dGlsLnRocmVhZC50YXJnZXQuYmxvY2tzLmdldEJyYW5jaCh1dGlsLnRocmVhZC5wZWVrU3RhY2soKSwgMik7DQogICAgICAgIGNvbnN0IHRhcmdldCA9IHV0aWwudGFyZ2V0Ow0KICAgICAgICBjb25zdCBuZXdSdW50aW1lID0gdXRpbC5zZXF1ZW5jZXIucnVudGltZTsNCiAgICAgICAgLy9taW5pbWl6ZSBwdXNoIHRpbWUNCiAgICAgICAgdGhyZWFkMSA9IG5ld1J1bnRpbWUuX3B1c2hUaHJlYWQodGhyZWFkMSwgdGFyZ2V0KTsNCiAgICAgICAgdGhyZWFkMS5zdGF0dXMgPSAxOw0KICAgICAgICBuZXdSdW50aW1lLl9wdXNoVGhyZWFkKHRocmVhZDIsIHRhcmdldCk7DQogICAgICAgIHRocmVhZDEuc3RhdHVzID0gMDsNCiAgICAgIH0NCiAgICB9DQoNCiAgICBhc3luYyBydW5UeXBlKGFyZ3MsIHV0aWwpIHsNCiAgICAgIGNvbnN0IGJyYW5jaCA9IHV0aWwudGhyZWFkLnRhcmdldC5ibG9ja3MuZ2V0QnJhbmNoKHV0aWwudGhyZWFkLnBlZWtTdGFjaygpLCAxKTsNCiAgICAgIGlmIChicmFuY2gpIHsNCiAgICAgICAgaWYgKGFyZ3MuVFlQRSA9PT0gImZvcndhcmQiKSBydW50aW1lLl9wdXNoVGhyZWFkKGJyYW5jaCwgdXRpbC50YXJnZXQpOw0KICAgICAgICBlbHNlIGlmIChhcmdzLlRZUEUgPT09ICJyZXZlcnNlZCIgfHwgYXJncy5UWVBFID09PSAicmFuZG9taXplZCIpIHsNCiAgICAgICAgICBjb25zdCBjb250YWluZXIgPSB1dGlsLnRhcmdldC5ibG9ja3M7DQogICAgICAgICAgbGV0IGJsb2NrT3JkZXIgPSBbXTsNCiAgICAgICAgICBsZXQgSUQgPSBicmFuY2g7DQogICAgICAgICAgd2hpbGUgKElEICE9PSBudWxsKSB7DQogICAgICAgICAgICBibG9ja09yZGVyLnB1c2goSUQpOw0KICAgICAgICAgICAgdmFyIGJsb2NrSW5mbyA9IGNvbnRhaW5lci5nZXRCbG9jayhJRCk7DQogICAgICAgICAgICBJRCA9IGJsb2NrSW5mby5uZXh0Ow0KICAgICAgICAgIH0NCiAgICAgICAgICBpZiAoYXJncy5UWVBFID09PSAicmV2ZXJzZWQiKSBibG9ja09yZGVyID0gYmxvY2tPcmRlci5yZXZlcnNlKCk7DQogICAgICAgICAgZWxzZSBibG9ja09yZGVyID0gYmxvY2tPcmRlci5zb3J0KCgpID0+IE1hdGgucmFuZG9tKCkgLSAwLjUpOw0KICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgYmxvY2tPcmRlci5sZW5ndGg7IGkrKykgew0KICAgICAgICAgICAgSUQgPSBibG9ja09yZGVyW2ldOw0KICAgICAgICAgICAgdmFyIGJsb2NrSW5mbyA9IGNvbnRhaW5lci5nZXRCbG9jayhJRCk7DQogICAgICAgICAgICB2YXIgb2xkSW5mbyA9IFtibG9ja0luZm8ucGFyZW50LCBibG9ja0luZm8ubmV4dF07DQogICAgICAgICAgICBibG9ja0luZm8ucGFyZW50ID0gbnVsbDsNCiAgICAgICAgICAgIGJsb2NrSW5mby5uZXh0ID0gbnVsbDsNCiAgICAgICAgICAgIHZhciB0aHJlYWQgPSBydW50aW1lLl9wdXNoVGhyZWFkKElELCB1dGlsLnRhcmdldCwge3N0YWNrQ2xpY2s6IHRydWV9KTsNCiAgICAgICAgICAgIHRocmVhZC5zdGFjayA9IFtdOw0KICAgICAgICAgICAgdGhyZWFkLnB1c2hTdGFjayhJRCk7DQogICAgICAgICAgICBpZiAodm0ucnVudGltZS5jb21waWxlck9wdGlvbnMuZW5hYmxlZCkgdGhyZWFkLnRyeUNvbXBpbGUoKTsNCiAgICAgICAgICAgIGF3YWl0IG5ldyBQcm9taXNlKHJlc29sdmUgPT4gew0KICAgICAgICAgICAgICBjb25zdCBpbnRlcnZhbCA9IHNldEludGVydmFsKCgpID0+IHsNCiAgICAgICAgICAgICAgICBpZiAoIXZtLnJ1bnRpbWUuaXNBY3RpdmVUaHJlYWQodGhyZWFkKSkgew0KICAgICAgICAgICAgICAgICAgY2xlYXJJbnRlcnZhbChpbnRlcnZhbCk7DQogICAgICAgICAgICAgICAgICByZXNvbHZlKCk7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICB9LCAxKTsNCiAgICAgICAgICAgIH0pOw0KICAgICAgICAgICAgYmxvY2tJbmZvLnBhcmVudCA9IG9sZEluZm9bMF07DQogICAgICAgICAgICBibG9ja0luZm8ubmV4dCA9IG9sZEluZm9bMV07DQogICAgICAgICAgfQ0KICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgIGNvbnN0IHRocmVhZCA9IHJ1bnRpbWUuX3B1c2hUaHJlYWQoYnJhbmNoLCB1dGlsLnRhcmdldCk7DQogICAgICAgICAgYXdhaXQgbmV3IFByb21pc2UocmVzb2x2ZSA9PiB7DQogICAgICAgICAgICBjb25zdCBjaGVja1RocmVhZCA9ICgpID0+IHsNCiAgICAgICAgICAgICAgaWYgKCF2bS5ydW50aW1lLmlzQWN0aXZlVGhyZWFkKHRocmVhZCkpIHJlc29sdmUoKTsNCiAgICAgICAgICAgICAgZWxzZSBzZXRUaW1lb3V0KGNoZWNrVGhyZWFkLCAxKTsNCiAgICAgICAgICAgIH07DQogICAgICAgICAgICBjaGVja1RocmVhZCgpOw0KICAgICAgICAgIH0pOw0KICAgICAgICAgIGF3YWl0IHRoaXMucnVuVHlwZSh7IC4uLmFyZ3MsIFRZUEU6ICJyZXZlcnNlZCIgfSwgdXRpbCk7DQogICAgICAgIH0NCiAgICAgIH0NCiAgICB9DQoNCiAgICBvbkNhbGwoKSB7IC8qIGlnbm9yZSBpbml0aWFsbHkgcnVubmluZyAqLyB9DQoNCiAgICBydW5CcmFuY2goYXJncywgdXRpbCkgew0KICAgICAgY29uc3QgY2FsbElEID0gU2NyYXRjaC5DYXN0LnRvU3RyaW5nKGFyZ3MuSUQpOw0KICAgICAgY29uc3QgdGhyZWFkczJXYWl0ID0gW107IC8vIHVzZWQgZm9yICJydW4gYW5kIHdhaXQiDQogICAgICBmb3IgKGNvbnN0IHRhcmdldCBvZiBydW50aW1lLnRhcmdldHMpIHsNCiAgICAgICAgY29uc3QgYmxvY2tzID0gdGFyZ2V0LmJsb2NrczsNCiAgICAgICAgY29uc3QgYmxvY2tJRHMgPSBPYmplY3Qua2V5cyhibG9ja3MuX2Jsb2NrcykNCiAgICAgICAgICAuZmlsdGVyKGtleSA9PiB7DQogICAgICAgICAgICBjb25zdCBibG9jayA9IGJsb2Nrcy5fYmxvY2tzW2tleV07DQogICAgICAgICAgICByZXR1cm4gKA0KICAgICAgICAgICAgICBibG9jay5vcGNvZGUgPT09ICJTUGFkdkNvbnRyb2xfb25DYWxsIiAmJiANCiAgICAgICAgICAgICAgYmxvY2tzLmdldEJsb2NrKGJsb2NrLmlucHV0cy5DQUxMLmJsb2NrKT8uZmllbGRzPy5URVhUPy52YWx1ZSA9PT0gY2FsbElEDQogICAgICAgICAgICApOw0KICAgICAgICAgIH0pDQogICAgICAgICAgLm1hcChrZXkgPT4gYmxvY2tzLl9ibG9ja3Nba2V5XS5pZCk7DQogICAgICAgIGZvciAoY29uc3QgYmxvY2tJRCBvZiBibG9ja0lEcykgew0KICAgICAgICAgIGNvbnN0IGJyYW5jaCA9IGJsb2Nrcy5nZXRCcmFuY2goYmxvY2tJRCwgMSk7DQogICAgICAgICAgaWYgKGJyYW5jaCkgdGhyZWFkczJXYWl0LnB1c2godXRpbC5zZXF1ZW5jZXIucnVudGltZS5fcHVzaFRocmVhZChicmFuY2gsIHRhcmdldCkpOw0KICAgICAgICB9DQogICAgICB9DQogICAgICByZXR1cm4gdGhyZWFkczJXYWl0Ow0KICAgIH0NCg0KICAgIGFzeW5jIHJ1bkJyYW5jaFdhaXQoYXJncywgdXRpbCkgew0KICAgICAgbGV0IHRocmVhZHMyV2FpdCA9IHRoaXMucnVuQnJhbmNoKGFyZ3MsIHV0aWwpOw0KICAgICAgYXdhaXQgbmV3IFByb21pc2UocmVzb2x2ZSA9PiB7DQogICAgICAgIGNvbnN0IGludGVydmFsID0gc2V0SW50ZXJ2YWwoKCkgPT4gew0KICAgICAgICAgIGZvciAobGV0IGkgPSB0aHJlYWRzMldhaXQubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pIHsNCiAgICAgICAgICAgIGlmICghdm0ucnVudGltZS5pc0FjdGl2ZVRocmVhZCh0aHJlYWRzMldhaXRbaV0pKSB0aHJlYWRzMldhaXQuc3BsaWNlKGksIDEpOw0KICAgICAgICAgIH0NCiAgICAgICAgICBpZiAodGhyZWFkczJXYWl0Lmxlbmd0aCA9PT0gMCkgew0KICAgICAgICAgICAgY2xlYXJJbnRlcnZhbChpbnRlcnZhbCk7DQogICAgICAgICAgICByZXNvbHZlKCk7DQogICAgICAgICAgfQ0KICAgICAgICB9LCAxKTsNCiAgICAgIH0pOw0KICAgIH0NCg0KICAgIGFzeW5jIGFzeW5jQ29kZShhcmdzLCB1dGlsKSB7DQogICAgICBjb25zdCB0YXJnZXQgPSB1dGlsLnRhcmdldDsNCiAgICAgIGNvbnN0IGNvbnRhaW5lciA9IHRhcmdldC5ibG9ja3M7DQogICAgICBpZiAodXRpbC50aHJlYWQudGFyZ2V0LmJsb2Nrcy5nZXRCcmFuY2godXRpbC50aHJlYWQucGVla1N0YWNrKCksIDEpKSB7DQogICAgICAgIGxldCBJRCA9IHV0aWwudGhyZWFkLnRhcmdldC5ibG9ja3MuZ2V0QnJhbmNoKHV0aWwudGhyZWFkLnBlZWtTdGFjaygpLCAxKTsNCiAgICAgICAgd2hpbGUgKElEICE9PSBudWxsKSB7DQogICAgICAgICAgdmFyIGJsb2NrSW5mbyA9IGNvbnRhaW5lci5nZXRCbG9jayhJRCk7DQogICAgICAgICAgdmFyIG9sZEluZm8gPSBbYmxvY2tJbmZvLnBhcmVudCwgYmxvY2tJbmZvLm5leHRdOw0KICAgICAgICAgIGJsb2NrSW5mby5wYXJlbnQgPSBudWxsOw0KICAgICAgICAgIGJsb2NrSW5mby5uZXh0ID0gbnVsbDsNCiAgICAgICAgICB2YXIgdGhyZWFkID0gcnVudGltZS5fcHVzaFRocmVhZChJRCwgdGFyZ2V0LCB7c3RhY2tDbGljazogdHJ1ZX0pOw0KICAgICAgICAgIHRocmVhZC5zdGFjayA9IFtdOw0KICAgICAgICAgIHRocmVhZC5wdXNoU3RhY2soSUQpOw0KICAgICAgICAgIGlmICh2bS5ydW50aW1lLmNvbXBpbGVyT3B0aW9ucy5lbmFibGVkKSB0aHJlYWQudHJ5Q29tcGlsZSgpOw0KICAgICAgICAgIGF3YWl0IG5ldyBQcm9taXNlKHJlc29sdmUgPT4gew0KICAgICAgICAgICAgY29uc3QgaW50ZXJ2YWwgPSBzZXRJbnRlcnZhbCgoKSA9PiB7DQogICAgICAgICAgICAgIGlmICghdm0ucnVudGltZS5pc0FjdGl2ZVRocmVhZCh0aHJlYWQpKSB7DQogICAgICAgICAgICAgICAgY2xlYXJJbnRlcnZhbChpbnRlcnZhbCk7DQogICAgICAgICAgICAgICAgcmVzb2x2ZSgpOw0KICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9LCAxMCk7DQogICAgICAgICAgfSk7DQogICAgICAgICAgYmxvY2tJbmZvLnBhcmVudCA9IG9sZEluZm9bMF07DQogICAgICAgICAgYmxvY2tJbmZvLm5leHQgPSBvbGRJbmZvWzFdOw0KICAgICAgICAgIElEID0gYmxvY2tJbmZvLm5leHQ7DQogICAgICAgIH0NCiAgICAgIH0NCiAgICB9DQoNCiAgICBpZlJ1bkJsb2NrKGFyZ3MsIHV0aWwpIHsNCiAgICAgIGNvbnN0IGJyYW5jaCA9IHV0aWwudGhyZWFkLnRhcmdldC5ibG9ja3MuZ2V0QnJhbmNoKHV0aWwudGhyZWFkLnBlZWtTdGFjaygpLCAxKTsNCiAgICAgIGNvbnN0IGNvbiA9IFNjcmF0Y2guQ2FzdC50b0Jvb2xlYW4oYXJncy5DT04pOw0KICAgICAgaWYgKGJyYW5jaCkgew0KICAgICAgICBpZiAoY29uKSB7DQogICAgICAgICAgaWYgKHV0aWwuc3RhY2tGcmFtZS5TUGN0cmxUaHJlYWQgPT09IHVuZGVmaW5lZCkgdXRpbC5zdGFja0ZyYW1lLlNQY3RybFRocmVhZCA9IHJ1bnRpbWUuX3B1c2hUaHJlYWQoYnJhbmNoLCB1dGlsLnRhcmdldCk7DQogICAgICAgICAgaWYgKHJ1bnRpbWUuaXNBY3RpdmVUaHJlYWQodXRpbC5zdGFja0ZyYW1lLlNQY3RybFRocmVhZCkpIHV0aWwuc3RhcnRCcmFuY2goMiwgdHJ1ZSk7DQogICAgICAgIH0gZWxzZSBpZiAodXRpbC5zdGFja0ZyYW1lLlNQY3RybFRocmVhZCAhPT0gdW5kZWZpbmVkKSB7DQogICAgICAgICAgY29uc3QgdGhyZWFkID0gdXRpbC5zdGFja0ZyYW1lLlNQY3RybFRocmVhZDsNCiAgICAgICAgICBpZiAocnVudGltZS5pc0FjdGl2ZVRocmVhZCh0aHJlYWQpKSB0aHJlYWQuc3RvcFRoaXNTY3JpcHQoKTsNCiAgICAgICAgfQ0KICAgICAgfQ0KICAgIH0NCg0KICAgIGlmUGFydChhcmdzLCB1dGlsKSB7DQogICAgICBjb25zdCBjb24gPSBTY3JhdGNoLkNhc3QudG9Cb29sZWFuKGFyZ3MuQ09OKTsNCiAgICAgIGNvbnN0IElEID0gU2NyYXRjaC5DYXN0LnRvU3RyaW5nKGFyZ3MuSUQpOw0KICAgICAgY29uc3QgaW5kZXggPSBjb25kaXRpb25TdG9yYWdlLmluZGV4T2YoSUQpOw0KICAgICAgaWYgKGluZGV4ICE9PSAtMSkgY29uZGl0aW9uU3RvcmFnZS5zcGxpY2UoaW5kZXgsIDEpOw0KICAgICAgaWYgKGNvbikgdXRpbC5zdGFydEJyYW5jaCgxLCBmYWxzZSk7DQogICAgICBlbHNlIGNvbmRpdGlvblN0b3JhZ2UucHVzaChJRCk7DQogICAgfQ0KDQogICAgZWxzZVBhcnQoYXJncywgdXRpbCkgew0KICAgICAgY29uc3QgSUQgPSBTY3JhdGNoLkNhc3QudG9TdHJpbmcoYXJncy5JRCk7DQogICAgICBpZiAoY29uZGl0aW9uU3RvcmFnZS5pbmRleE9mKElEKSAhPT0gLTEpIHV0aWwuc3RhcnRCcmFuY2goMSwgZmFsc2UpOw0KICAgIH0NCg0KICAgIGFzQ2xvbmUoYXJncywgdXRpbCkgew0KICAgICAgY29uc3QgY2xvbmVzID0gdXRpbC50YXJnZXQuc3ByaXRlLmNsb25lczsNCiAgICAgIGNvbnN0IGJyYW5jaCA9IHV0aWwudGhyZWFkLnRhcmdldC5ibG9ja3MuZ2V0QnJhbmNoKHV0aWwudGhyZWFkLnBlZWtTdGFjaygpLCAxKTsNCiAgICAgIGlmIChicmFuY2gpIHsNCiAgICAgICAgZm9yICh2YXIgaSA9IDE7IGkgPCBjbG9uZXMubGVuZ3RoOyBpKyspIHsNCiAgICAgICAgICBpZiAoY2xvbmVzW2ldKSB7DQogICAgICAgICAgICBjb25zdCB2YXJpYWJsZSA9IGNsb25lc1tpXS5sb29rdXBWYXJpYWJsZUJ5TmFtZUFuZFR5cGUoYXJncy5WQVIpOw0KICAgICAgICAgICAgaWYgKHZhcmlhYmxlICYmIHZhcmlhYmxlLnZhbHVlID09PSBhcmdzLlZBTCkgcnVudGltZS5fcHVzaFRocmVhZChicmFuY2gsIGNsb25lc1tpXSk7DQogICAgICAgICAgfQ0KICAgICAgICB9DQogICAgICB9DQogICAgfQ0KDQogICAgZGVsZXRlUnVuKGFyZ3MsIHV0aWwpIHsNCiAgICAgIGNvbnN0IHRhcmdldCA9ICB1dGlsLnRhcmdldDsNCiAgICAgIGlmICh0YXJnZXQuaXNPcmlnaW5hbCkgcmV0dXJuOw0KICAgICAgY29uc3QgYnJhbmNoID0gdXRpbC50aHJlYWQudGFyZ2V0LmJsb2Nrcy5nZXRCcmFuY2godXRpbC50aHJlYWQucGVla1N0YWNrKCksIDEpOw0KICAgICAgcnVudGltZS5kaXNwb3NlVGFyZ2V0KHRhcmdldCk7DQogICAgICBydW50aW1lLnN0b3BGb3JUYXJnZXQodGFyZ2V0KTsNCiAgICAgIGlmIChicmFuY2gpIHJ1bnRpbWUuX3B1c2hUaHJlYWQoYnJhbmNoLCB0YXJnZXQuc3ByaXRlLmNsb25lc1swXSk7DQogICAgfQ0KDQogICAgbmV3VGhyZWFkQWR2KGFyZ3MsIHV0aWwpIHsNCiAgICAgIGNvbnN0IGJyYW5jaCA9IHV0aWwudGhyZWFkLnRhcmdldC5ibG9ja3MuZ2V0QnJhbmNoKHV0aWwudGhyZWFkLnBlZWtTdGFjaygpLCAwKTsNCiAgICAgIGlmIChicmFuY2gpIHsNCiAgICAgICAgY29uc3QgdGhyZWFkID0gdXRpbC5zZXF1ZW5jZXIucnVudGltZS5fcHVzaFRocmVhZChicmFuY2gsIHV0aWwudGFyZ2V0KTsNCiAgICAgICAgY29uc3QgcGFyYW1zID0gdGhyZWFkLlNQYWR2Q3RybDsNCiAgICAgICAgaWYgKHR5cGVvZiBwYXJhbXMgPT09ICJ1bmRlZmluZWQiKSB0aHJlYWQuc3RhY2tGcmFtZXNbMF0uU1BhZHZDdHJsID0ge307DQogICAgICAgIHRocmVhZC5zdGFja0ZyYW1lc1swXS5TUGFkdkN0cmwuYXJnID0gU2NyYXRjaC5DYXN0LnRvU3RyaW5nKGFyZ3MuQVJHUyk7DQogICAgICB9DQogICAgfQ0KICAgIHRocmVhZEFyZ3MoYXJncywgdXRpbCkgew0KICAgICAgY29uc3Qgc3RhY2sgPSB1dGlsLnRocmVhZC5zdGFja0ZyYW1lczsNCiAgICAgIGlmICh0eXBlb2Ygc3RhY2sgPT09ICJ1bmRlZmluZWQiKSByZXR1cm4gIiI7DQogICAgICBjb25zdCBwYXJhbXMgPSBzdGFja1swXS5TUGFkdkN0cmw7DQogICAgICBpZiAodHlwZW9mIHBhcmFtcyA9PT0gInVuZGVmaW5lZCIpIHJldHVybiAiIjsNCiAgICAgIHJldHVybiBwYXJhbXMuYXJnIHx8ICIiOw0KICAgIH0NCg0KICAgIC8vIFdpbGwgd29yayBsaWtlIGEgbm9ybWFsIEJyZWFrIExvb3Agd2hlbiBjb21waWxlciBpcyBvbiwgb3RoZXJ3aXNlIHdpbGwgcnVuIHRoaXM6DQogICAgYnJlYWtMb29wKF8sIHV0aWwpIHsNCiAgICAgIHJldHVybiBuZXcgUHJvbWlzZShyZXNvbHZlID0+IHsNCiAgICAgICAgY29uc3QgY29udGFpbmVyID0gdXRpbC50aHJlYWQuYmxvY2tDb250YWluZXI7DQogICAgICAgIGNvbnN0IG15SUQgPSBjb250YWluZXIuZ2V0QmxvY2sodXRpbC50aHJlYWQuaXNDb21waWxlZCA/IHV0aWwudGhyZWFkLnBlZWtTdGFjaygpIDogdXRpbC50aHJlYWQucGVla1N0YWNrRnJhbWUoKS5vcC5pZCk7DQogICAgICAgIGxldCBuZXdJRCA9IG15SUQ7DQogICAgICAgIGxldCBjb24gPSB0cnVlOw0KICAgICAgICBpZiAoIXJ1bnRpbWUuY29tcGlsZXJPcHRpb25zLmVuYWJsZWQpIHsNCiAgICAgICAgICBjb25zb2xlLndhcm4oIkZvciB0aGlzICdCcmVhayBPdXQgTG9vcCcgYmxvY2sgdG8gd29yayBwcm9wZXJseSwgcGxlYXNlIEVuYWJsZSB0aGUgQ29tcGlsZXIiKTsNCiAgICAgICAgfQ0KICAgICAgICBpZiAoIW5ld0lEKSB7DQogICAgICAgICAgcmVzb2x2ZSgpOw0KICAgICAgICAgIHJldHVybjsNCiAgICAgICAgfQ0KICAgICAgICB3aGlsZSAoY29uKSB7DQogICAgICAgICAgaWYgKG5ld0lELnBhcmVudCAhPT0gbnVsbCkgew0KICAgICAgICAgICAgbmV3SUQgPSBjb250YWluZXIuZ2V0QmxvY2sobmV3SUQucGFyZW50KTsNCiAgICAgICAgICAgIC8vIGNoZWNrIGlmIGJsb2NrIGlzIElOIG9yIFVOREVSIHRoaXMgTG9vcCBCbG9jaw0KICAgICAgICAgICAgaWYgKGNvbnRhaW5lci5nZXRCcmFuY2gobmV3SUQuaWQpICE9PSBudWxsICYmIHRoaXMuaXNJbkxvb3AoY29udGFpbmVyLCBteUlELmlkLCBuZXdJRC5pZCkpIHsNCiAgICAgICAgICAgICAgY29uID0gZmFsc2U7DQogICAgICAgICAgICB9DQogICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgIG5ld0lEID0gbnVsbDsNCiAgICAgICAgICAgIGNvbiA9IGZhbHNlOw0KICAgICAgICAgICAgYnJlYWs7DQogICAgICAgICAgfQ0KICAgICAgICB9DQogICAgICAgIGlmICghbmV3SUQpIHsNCiAgICAgICAgICByZXNvbHZlKCk7DQogICAgICAgICAgcmV0dXJuOw0KICAgICAgICB9DQogICAgICAgIG5ld0lEID0gbmV3SUQubmV4dCB8fCB0aGlzLmdldE91dGVyTmV4dChjb250YWluZXIsIG5ld0lEKTsNCiAgICAgICAgdXRpbC5zdG9wVGhpc1NjcmlwdCgpOw0KICAgICAgICBpZiAobmV3SUQpIHZtLnJ1bnRpbWUuX3B1c2hUaHJlYWQobmV3SUQsIHV0aWwudGFyZ2V0KTsNCiAgICAgICAgcmVzb2x2ZSgpOw0KICAgICAgfSk7DQogICAgfQ0KICAgIGlzSW5Mb29wKGNvbnRhaW5lciwgbXlJRCwgbG9vcEJsb2NrKSB7DQogICAgICBsZXQgdmFsdWUgPSBmYWxzZTsNCiAgICAgIGxldCBJRCA9IGNvbnRhaW5lci5nZXRCcmFuY2gobG9vcEJsb2NrLCAxKTsNCiAgICAgIGlmIChJRCkgew0KICAgICAgICB3aGlsZSAoSUQgIT09IG51bGwpIHsNCiAgICAgICAgICB2YXIgYmxvY2tJbmZvID0gY29udGFpbmVyLmdldEJsb2NrKElEKTsNCiAgICAgICAgICBpZiAoSUQgPT09IG15SUQpIHZhbHVlID0gdHJ1ZTsNCiAgICAgICAgICBJRCA9IGJsb2NrSW5mby5uZXh0Ow0KICAgICAgICB9DQogICAgICB9DQogICAgICByZXR1cm4gdmFsdWU7DQogICAgfQ0KICAgIGdldE91dGVyTmV4dChjb250YWluZXIsIGJsb2NrKSB7DQogICAgICBsZXQgdmFsdWUgPSBudWxsOw0KICAgICAgbGV0IElEID0gYmxvY2s7DQogICAgICB3aGlsZSAoSUQgIT09IG51bGwpIHsNCiAgICAgICAgSUQgPSBjb250YWluZXIuZ2V0QmxvY2soSUQucGFyZW50KTsNCiAgICAgICAgaWYgKElEKSB7DQogICAgICAgICAgaWYgKGNvbnRhaW5lci5nZXRCcmFuY2goSUQuaWQpICE9PSBudWxsICYmIElELm5leHQpIHsNCiAgICAgICAgICAgIHZhbHVlID0gSUQubmV4dDsNCiAgICAgICAgICAgIElEID0gbnVsbDsNCiAgICAgICAgICB9DQogICAgICAgIH0gZWxzZSB7IElEID0gbnVsbCB9DQogICAgICB9DQogICAgICByZXR1cm4gdmFsdWU7DQogICAgfQ0KICB9DQoNCiAgU2NyYXRjaC5leHRlbnNpb25zLnJlZ2lzdGVyKG5ldyBTUGFkdkNvbnRyb2woKSk7DQp9KShTY3JhdGNoKTsNCg==","data:text/javascript;base64,Ly8gTmFtZTogTW9yZSBDb250cm9sCi8vIElEOiBsbXNTcEFzTW9yZUNvbnRyb2wKLy8gRGVzY3JpcHRpb246IE1vcmUgY29uZGl0aW9uYWwgYW5kIGxvb3Agc3RhdGVtZW50cy4KLy8gQnk6IExpbHlNYWtlc1RoaW5ncyA8aHR0cHM6Ly9zY3JhdGNoLm1pdC5lZHUvdXNlcnMvTGlseU1ha2VzVGhpbmdzLz4KLy8gQnk6IEFzaGltZSA8aHR0cHM6Ly9zY3JhdGNoLm1pdC5lZHUvdXNlcnMvMHpuencvPgovLyBCeTogU2hhcmtQb29sIDxodHRwczovL3NjcmF0Y2gubWl0LmVkdS91c2Vycy8wem56dy8+CgooZnVuY3Rpb24gKFNjcmF0Y2gpIHsKICAidXNlIHN0cmljdCI7CgogIGNvbnN0IHZtID0gU2NyYXRjaC52bTsKICBjb25zdCBydW50aW1lID0gdm0ucnVudGltZTsKCiAgY29uc3QgaGFzT3duID0gKHByb3AsIG9iamVjdCkgPT4gT2JqZWN0Lmhhc093bihvYmplY3QsIHByb3ApOwogIGNvbnN0IENhc3QgPSBTY3JhdGNoLkNhc3Q7CiAgbGV0IFV0aWxpdGllcyA9IHsKICAgIGNsb25lQmxvY2soaWQsIHRhcmdldCkgewogICAgICBjb25zdCBjbG9uZUJsb2NrID0gVXRpbGl0aWVzLmNsb25lQmxvY2s7CiAgICAgIGZ1bmN0aW9uIGlzSW52YWxpZChkYXRhKSB7CiAgICAgICAgcmV0dXJuIGRhdGEgPT0gbnVsbCB8fCBkYXRhID09IHVuZGVmaW5lZDsKICAgICAgfQogICAgICBsZXQgbmVlZGVkID0gW107CiAgICAgIGxldCBibG9jayA9IHRhcmdldC5ibG9ja3MuZ2V0QmxvY2soaWQpOwogICAgICBpZiAoaXNJbnZhbGlkKGJsb2NrKSkgewogICAgICAgIHJldHVybiBbXTsKICAgICAgfQogICAgICBPYmplY3QudmFsdWVzKGJsb2NrLmlucHV0cykuZm9yRWFjaCgoa2V5KSA9PiB7CiAgICAgICAgaWYgKGhhc093bigic2hhZG93Iiwga2V5KSAmJiBrZXkuYmxvY2sgPT09IGtleS5zaGFkb3cpIHsKICAgICAgICAgIG5lZWRlZCA9IFsuLi5uZWVkZWQsIC4uLmNsb25lQmxvY2soa2V5LmJsb2NrLCB0YXJnZXQpXTsKICAgICAgICAgIHJldHVybjsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgaWYgKGhhc093bigic2hhZG93Iiwga2V5KSkKICAgICAgICAgICAgbmVlZGVkID0gWy4uLm5lZWRlZCwgLi4uY2xvbmVCbG9jayhrZXkuc2hhZG93LCB0YXJnZXQpXTsKICAgICAgICAgIGlmIChoYXNPd24oInNoYWRvdyIsIGJsb2NrKSkKICAgICAgICAgICAgbmVlZGVkID0gWy4uLm5lZWRlZCwgLi4uY2xvbmVCbG9jayhrZXkuYmxvY2ssIHRhcmdldCldOwogICAgICAgIH0KICAgICAgfSk7CiAgICAgIE9iamVjdC52YWx1ZXMoYmxvY2suZmllbGRzKS5mb3JFYWNoKChrZXkpID0+IHsKICAgICAgICBpZiAoaGFzT3duKCJpZCIsIGtleSkpCiAgICAgICAgICBuZWVkZWQgPSBbLi4ubmVlZGVkLCAuLi5jbG9uZUJsb2NrKGtleS5pZCwgdGFyZ2V0KV07CiAgICAgIH0pOwogICAgICBuZWVkZWQucHVzaChibG9jayk7CiAgICAgIHJldHVybiBuZWVkZWQ7CiAgICB9LAogIH07CgogIGNsYXNzIE1vcmVDb250cm9sIHsKICAgIGdldEluZm8oKSB7CiAgICAgIHJldHVybiB7CiAgICAgICAgaWQ6ICJsbXNTcEFzTW9yZUNvbnRyb2wiLAogICAgICAgIG5hbWU6ICJNb3JlIENvbnRyb2wiLAogICAgICAgIGNvbG9yMTogIiNGRkFCMTkiLAogICAgICAgIGNvbG9yMjogIiNFQzlDMTMiLAogICAgICAgIGNvbG9yMzogIiNDRjhCMTciLAogICAgICAgIGJsb2NrczogWwogICAgICAgICAgewogICAgICAgICAgICBvcGNvZGU6ICJzd2l0Y2giLAogICAgICAgICAgICB0ZXh0OiAic3dpdGNoIFtTV0lUQ0hdIiwKICAgICAgICAgICAgYmxvY2tUeXBlOiBTY3JhdGNoLkJsb2NrVHlwZS5DT05ESVRJT05BTCwKICAgICAgICAgICAgYXJndW1lbnRzOiB7CiAgICAgICAgICAgICAgU1dJVENIOiB7CiAgICAgICAgICAgICAgICB0eXBlOiBudWxsLAogICAgICAgICAgICAgIH0sCiAgICAgICAgICAgIH0sCiAgICAgICAgICB9LAogICAgICAgICAgewogICAgICAgICAgICBvcGNvZGU6ICJjYXNlIiwKICAgICAgICAgICAgdGV4dDogImNhc2UgW0NBU0VdIiwKICAgICAgICAgICAgYmxvY2tUeXBlOiBTY3JhdGNoLkJsb2NrVHlwZS5DT05ESVRJT05BTCwKICAgICAgICAgICAgYXJndW1lbnRzOiB7CiAgICAgICAgICAgICAgQ0FTRTogewogICAgICAgICAgICAgICAgdHlwZTogU2NyYXRjaC5Bcmd1bWVudFR5cGUuU1RSSU5HLAogICAgICAgICAgICAgIH0sCiAgICAgICAgICAgIH0sCiAgICAgICAgICB9LAogICAgICAgICAgewogICAgICAgICAgICBvcGNvZGU6ICJkZWZhdWx0IiwKICAgICAgICAgICAgdGV4dDogImRlZmF1bHQiLAogICAgICAgICAgICBibG9ja1R5cGU6IFNjcmF0Y2guQmxvY2tUeXBlLkNPTkRJVElPTkFMLAogICAgICAgICAgICBpc1Rlcm1pbmFsOiB0cnVlLAogICAgICAgICAgfSwKICAgICAgICAgIHsKICAgICAgICAgICAgb3Bjb2RlOiAicnVuQ2FzZSIsCiAgICAgICAgICAgIHRleHQ6ICJydW4gY2FzZSBbQ0FTRV0iLAogICAgICAgICAgICBibG9ja1R5cGU6IFNjcmF0Y2guQmxvY2tUeXBlLkNPTU1BTkQsCiAgICAgICAgICAgIGFyZ3VtZW50czogewogICAgICAgICAgICAgIENBU0U6IHsKICAgICAgICAgICAgICAgIHR5cGU6IFNjcmF0Y2guQXJndW1lbnRUeXBlLlNUUklORywKICAgICAgICAgICAgICB9LAogICAgICAgICAgICB9LAogICAgICAgICAgICBpc1Rlcm1pbmFsOiB0cnVlLAogICAgICAgICAgfSwKICAgICAgICAgIHsKICAgICAgICAgICAgb3Bjb2RlOiAic3dpdGNoVmFsdWUiLAogICAgICAgICAgICB0ZXh0OiAic3dpdGNoIHZhbHVlIiwKICAgICAgICAgICAgYmxvY2tUeXBlOiBTY3JhdGNoLkJsb2NrVHlwZS5SRVBPUlRFUiwKICAgICAgICAgICAgZGlzYWJsZU1vbml0b3I6IHRydWUsCiAgICAgICAgICB9LAogICAgICAgICAgIi0tLSIsCiAgICAgICAgICB7CiAgICAgICAgICAgIG9wY29kZTogImVsc2VJZiIsCiAgICAgICAgICAgIHRleHQ6IFsiaWYgW0NPTkRJVElPTjFdIHRoZW4iLCAiZWxzZSBpZiBbQ09ORElUSU9OMl0gdGhlbiJdLAogICAgICAgICAgICBibG9ja1R5cGU6IFNjcmF0Y2guQmxvY2tUeXBlLkNPTkRJVElPTkFMLAogICAgICAgICAgICBicmFuY2hDb3VudDogMiwKICAgICAgICAgICAgYXJndW1lbnRzOiB7CiAgICAgICAgICAgICAgQ09ORElUSU9OMTogewogICAgICAgICAgICAgICAgdHlwZTogU2NyYXRjaC5Bcmd1bWVudFR5cGUuQk9PTEVBTiwKICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgIENPTkRJVElPTjI6IHsKICAgICAgICAgICAgICAgIHR5cGU6IFNjcmF0Y2guQXJndW1lbnRUeXBlLkJPT0xFQU4sCiAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgfSwKICAgICAgICAgIH0sCiAgICAgICAgICB7CiAgICAgICAgICAgIG9wY29kZTogImVsc2VJZkVsc2UiLAogICAgICAgICAgICB0ZXh0OiBbImlmIFtDT05ESVRJT04xXSB0aGVuIiwgImVsc2UgaWYgW0NPTkRJVElPTjJdIHRoZW4iLCAiZWxzZSJdLAogICAgICAgICAgICBibG9ja1R5cGU6IFNjcmF0Y2guQmxvY2tUeXBlLkNPTkRJVElPTkFMLAogICAgICAgICAgICBicmFuY2hDb3VudDogMywKICAgICAgICAgICAgYXJndW1lbnRzOiB7CiAgICAgICAgICAgICAgQ09ORElUSU9OMTogewogICAgICAgICAgICAgICAgdHlwZTogU2NyYXRjaC5Bcmd1bWVudFR5cGUuQk9PTEVBTiwKICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgIENPTkRJVElPTjI6IHsKICAgICAgICAgICAgICAgIHR5cGU6IFNjcmF0Y2guQXJndW1lbnRUeXBlLkJPT0xFQU4sCiAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgfSwKICAgICAgICAgIH0sCiAgICAgICAgICAiLS0tIiwKICAgICAgICAgIHsKICAgICAgICAgICAgb3Bjb2RlOiAid2FpdER1cmF0aW9uIiwKICAgICAgICAgICAgYmxvY2tUeXBlOiBTY3JhdGNoLkJsb2NrVHlwZS5MT09QLAogICAgICAgICAgICB0ZXh0OiAid2FpdCBbRFVSQVRJT05dIFtUWVBFXSIsCiAgICAgICAgICAgIGJyYW5jaENvdW50OiAtMSwKICAgICAgICAgICAgYXJndW1lbnRzOiB7CiAgICAgICAgICAgICAgRFVSQVRJT046IHsKICAgICAgICAgICAgICAgIHR5cGU6IFNjcmF0Y2guQXJndW1lbnRUeXBlLk5VTUJFUiwKICAgICAgICAgICAgICAgIGRlZmF1bHRWYWx1ZTogMSwKICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgIFRZUEU6IHsKICAgICAgICAgICAgICAgIHR5cGU6IFNjcmF0Y2guQXJndW1lbnRUeXBlLlNUUklORywKICAgICAgICAgICAgICAgIGRlZmF1bHRWYWx1ZTogImZyYW1lcyIsCiAgICAgICAgICAgICAgICBtZW51OiAidHlwZXMiLAogICAgICAgICAgICAgIH0sCiAgICAgICAgICAgIH0sCiAgICAgICAgICB9LAogICAgICAgICAgewogICAgICAgICAgICBvcGNvZGU6ICJ3YWl0RHVyYXRpb25PclVudGlsIiwKICAgICAgICAgICAgYmxvY2tUeXBlOiBTY3JhdGNoLkJsb2NrVHlwZS5MT09QLAogICAgICAgICAgICB0ZXh0OiAid2FpdCBbRFVSQVRJT05dIFtUWVBFXSBvciB1bnRpbCBbQ09ORElUSU9OXSIsCiAgICAgICAgICAgIGJyYW5jaENvdW50OiAtMSwKICAgICAgICAgICAgYXJndW1lbnRzOiB7CiAgICAgICAgICAgICAgRFVSQVRJT046IHsKICAgICAgICAgICAgICAgIHR5cGU6IFNjcmF0Y2guQXJndW1lbnRUeXBlLk5VTUJFUiwKICAgICAgICAgICAgICAgIGRlZmF1bHRWYWx1ZTogMSwKICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgIFRZUEU6IHsKICAgICAgICAgICAgICAgIHR5cGU6IFNjcmF0Y2guQXJndW1lbnRUeXBlLlNUUklORywKICAgICAgICAgICAgICAgIG1lbnU6ICJ0eXBlcyIsCiAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICBDT05ESVRJT046IHsKICAgICAgICAgICAgICAgIHR5cGU6IFNjcmF0Y2guQXJndW1lbnRUeXBlLkJPT0xFQU4sCiAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgfSwKICAgICAgICAgIH0sCiAgICAgICAgICAiLS0tIiwKICAgICAgICAgIHsKICAgICAgICAgICAgb3Bjb2RlOiAicmVwZWF0RHVyYXRpb24iLAogICAgICAgICAgICBibG9ja1R5cGU6IFNjcmF0Y2guQmxvY2tUeXBlLkxPT1AsCiAgICAgICAgICAgIHRleHQ6ICJyZXBlYXQgZm9yIFtEVVJBVElPTl0gc2Vjb25kcyIsCiAgICAgICAgICAgIGFyZ3VtZW50czogewogICAgICAgICAgICAgIERVUkFUSU9OOiB7CiAgICAgICAgICAgICAgICB0eXBlOiBTY3JhdGNoLkFyZ3VtZW50VHlwZS5OVU1CRVIsCiAgICAgICAgICAgICAgICBkZWZhdWx0VmFsdWU6IDEsCiAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgfSwKICAgICAgICAgIH0sCiAgICAgICAgICB7CiAgICAgICAgICAgIG9wY29kZTogInJlcGVhdER1cmF0aW9uT3JVbnRpbCIsCiAgICAgICAgICAgIGJsb2NrVHlwZTogU2NyYXRjaC5CbG9ja1R5cGUuTE9PUCwKICAgICAgICAgICAgdGV4dDogInJlcGVhdCBbRFVSQVRJT05dIG9yIHVudGlsIFtDT05ESVRJT05dIiwKICAgICAgICAgICAgYXJndW1lbnRzOiB7CiAgICAgICAgICAgICAgRFVSQVRJT046IHsKICAgICAgICAgICAgICAgIHR5cGU6IFNjcmF0Y2guQXJndW1lbnRUeXBlLk5VTUJFUiwKICAgICAgICAgICAgICAgIGRlZmF1bHRWYWx1ZTogMSwKICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgIFRZUEU6IHsKICAgICAgICAgICAgICAgIHR5cGU6IFNjcmF0Y2guQXJndW1lbnRUeXBlLlNUUklORywKICAgICAgICAgICAgICAgIG1lbnU6ICJ0eXBlcyIsCiAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICBDT05ESVRJT046IHsKICAgICAgICAgICAgICAgIHR5cGU6IFNjcmF0Y2guQXJndW1lbnRUeXBlLkJPT0xFQU4sCiAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgfSwKICAgICAgICAgIH0sCiAgICAgICAgICAiLS0tIiwKICAgICAgICAgIHsKICAgICAgICAgICAgb3Bjb2RlOiAic3RvcFRhcmdldCIsCiAgICAgICAgICAgIGJsb2NrVHlwZTogU2NyYXRjaC5CbG9ja1R5cGUuQ09NTUFORCwKICAgICAgICAgICAgdGV4dDogInN0b3AgW1RBUkdFVF0iLAogICAgICAgICAgICBhcmd1bWVudHM6IHsKICAgICAgICAgICAgICBUQVJHRVQ6IHsKICAgICAgICAgICAgICAgIHR5cGU6IFNjcmF0Y2guQXJndW1lbnRUeXBlLlNUUklORywKICAgICAgICAgICAgICAgIG1lbnU6ICJ0YXJnZXRzTXlzZWxmIiwKICAgICAgICAgICAgICB9LAogICAgICAgICAgICB9LAogICAgICAgICAgfSwKICAgICAgICAgIHsKICAgICAgICAgICAgb3Bjb2RlOiAic3RvcEV4Y2VwdFRhcmdldCIsCiAgICAgICAgICAgIGJsb2NrVHlwZTogU2NyYXRjaC5CbG9ja1R5cGUuQ09NTUFORCwKICAgICAgICAgICAgdGV4dDogInN0b3AgYWxsIGV4Y2VwdCBbVEFSR0VUXSIsCiAgICAgICAgICAgIGFyZ3VtZW50czogewogICAgICAgICAgICAgIFRBUkdFVDogewogICAgICAgICAgICAgICAgdHlwZTogU2NyYXRjaC5Bcmd1bWVudFR5cGUuU1RSSU5HLAogICAgICAgICAgICAgICAgbWVudTogInRhcmdldHNNeXNlbGYiLAogICAgICAgICAgICAgIH0sCiAgICAgICAgICAgIH0sCiAgICAgICAgICB9LAogICAgICAgICAgIi0tLSIsCiAgICAgICAgICB7CiAgICAgICAgICAgIG9wY29kZTogInNwYXllZENvbmRpdGlvbiIsCiAgICAgICAgICAgIGJsb2NrVHlwZTogU2NyYXRjaC5CbG9ja1R5cGUuTE9PUCwKICAgICAgICAgICAgdGV4dDogWyJpZiBbQ09OMV0gc3RhcnQgbG9vcCIsICJyZXBlYXQgdW50aWwgW0NPTjJdIiArICIgIl0sCiAgICAgICAgICAgIGFyZ3VtZW50czogewogICAgICAgICAgICAgIENPTjE6IHsgdHlwZTogU2NyYXRjaC5Bcmd1bWVudFR5cGUuQk9PTEVBTiB9LAogICAgICAgICAgICAgIENPTjI6IHsgdHlwZTogU2NyYXRjaC5Bcmd1bWVudFR5cGUuQk9PTEVBTiB9LAogICAgICAgICAgICB9LAogICAgICAgICAgfSwKICAgICAgICAgIHsKICAgICAgICAgICAgb3Bjb2RlOiAicnVuSW5TcHJpdGUiLAogICAgICAgICAgICBibG9ja1R5cGU6IFNjcmF0Y2guQmxvY2tUeXBlLkNPTkRJVElPTkFMLAogICAgICAgICAgICB0ZXh0OiBbInJ1biBjb2RlIGFzIFtTUFJJVEVdIiwgImFuZCBkb250IHdhaXQgW0RPTlRfV0FJVF0/Il0sCiAgICAgICAgICAgIGFyZ3VtZW50czogewogICAgICAgICAgICAgIFNQUklURTogewogICAgICAgICAgICAgICAgdHlwZTogU2NyYXRjaC5Bcmd1bWVudFR5cGUuU1RSSU5HLAogICAgICAgICAgICAgICAgbWVudTogInRhcmdldHMiLAogICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgRE9OVF9XQUlUOiB7CiAgICAgICAgICAgICAgICB0eXBlOiBTY3JhdGNoLkFyZ3VtZW50VHlwZS5CT09MRUFOLAogICAgICAgICAgICAgIH0sCiAgICAgICAgICAgIH0sCiAgICAgICAgICB9LAogICAgICAgIF0sCiAgICAgICAgbWVudXM6IHsKICAgICAgICAgIHR5cGVzOiB7CiAgICAgICAgICAgIGFjY2VwdFJlcG9ydGVyczogdHJ1ZSwKICAgICAgICAgICAgaXRlbXM6IFsiZnJhbWVzIiwgInNlY29uZHMiXSwKICAgICAgICAgIH0sCiAgICAgICAgICB0YXJnZXRzOiB7CiAgICAgICAgICAgIGFjY2VwdFJlcG9ydGVyczogdHJ1ZSwKICAgICAgICAgICAgaXRlbXM6IHRoaXMuX2dldFRhcmdldHMoInN0YWdlIiksCiAgICAgICAgICB9LAogICAgICAgICAgdGFyZ2V0c015c2VsZjogewogICAgICAgICAgICBhY2NlcHRSZXBvcnRlcnM6IHRydWUsCiAgICAgICAgICAgIGl0ZW1zOiB0aGlzLl9nZXRUYXJnZXRzKCJzdGFnZSIsICJteXNlbGYiKSwKICAgICAgICAgIH0sCiAgICAgICAgfSwKICAgICAgfTsKICAgIH0KCiAgICBzd2l0Y2goYXJncywgdXRpbCkgewogICAgICBpZiAodGhpcy5pc0luUGFsZXR0ZSh1dGlsLnRocmVhZCkpIHJldHVybjsKICAgICAgY29uc3Qgc3dpdGNoVmFsdWUgPSBTY3JhdGNoLkNhc3QudG9TdHJpbmcoYXJncy5TV0lUQ0gpOwogICAgICBjb25zdCBibG9jayA9IHV0aWwudGhyZWFkLnBlZWtTdGFjaygpOwogICAgICBjb25zdCBzZWxmID0gdGhpcy5nZXRCbG9ja0J5SUQodXRpbC50YXJnZXQsIGJsb2NrKTsKICAgICAgc2VsZi5zd2l0Y2hWYWx1ZSA9IHN3aXRjaFZhbHVlOwogICAgICBzZWxmLnJ1bkNhc2UgPSBmYWxzZTsKICAgICAgc2VsZi5pZkNhc2UgPSBudWxsOwogICAgICB0aGlzLnNldEJsb2NrQnlJRCh1dGlsLnRhcmdldCwgYmxvY2ssIHNlbGYpOwogICAgICByZXR1cm4gMTsKICAgIH0KCiAgICBjYXNlKGFyZ3MsIHV0aWwpIHsKICAgICAgaWYgKHRoaXMuaXNJblBhbGV0dGUodXRpbC50aHJlYWQpKSByZXR1cm47CiAgICAgIGNvbnN0IGNhc2VWYWx1ZSA9IFNjcmF0Y2guQ2FzdC50b1N0cmluZyhhcmdzLkNBU0UpOwogICAgICBjb25zdCBvdXRlckJsb2NrID0gdGhpcy5nZXRPdXRlckN0aWxsT3Bjb2RlKAogICAgICAgIHV0aWwudGFyZ2V0LAogICAgICAgIHV0aWwudGhyZWFkLnBlZWtTdGFjaygpLAogICAgICAgICJsbXNTcEFzTW9yZUNvbnRyb2xfc3dpdGNoIgogICAgICApOwogICAgICBpZiAob3V0ZXJCbG9jayA9PSBudWxsKSByZXR1cm47CiAgICAgIGlmICgKICAgICAgICBvdXRlckJsb2NrLnN3aXRjaFZhbHVlID09IGNhc2VWYWx1ZSB8fAogICAgICAgIG91dGVyQmxvY2suaWZDYXNlID09IGNhc2VWYWx1ZQogICAgICApIHsKICAgICAgICBvdXRlckJsb2NrLnJ1bkNhc2UgPSB0cnVlOwogICAgICAgIG91dGVyQmxvY2suaWZDYXNlID0gbnVsbDsKICAgICAgICB0aGlzLnNldEJsb2NrQnlJRCh1dGlsLnRhcmdldCwgb3V0ZXJCbG9jay5pZCwgb3V0ZXJCbG9jayk7CiAgICAgICAgcmV0dXJuIDE7CiAgICAgIH0KICAgICAgcmV0dXJuOwogICAgfQoKICAgIGRlZmF1bHQoYXJncywgdXRpbCkgewogICAgICBpZiAodGhpcy5pc0luUGFsZXR0ZSh1dGlsLnRocmVhZCkpIHJldHVybjsKICAgICAgbGV0IG91dGVyQmxvY2sgPSB0aGlzLmdldE91dGVyQ3RpbGxPcGNvZGUoCiAgICAgICAgdXRpbC50YXJnZXQsCiAgICAgICAgdXRpbC50aHJlYWQucGVla1N0YWNrKCksCiAgICAgICAgImxtc1NwQXNNb3JlQ29udHJvbF9zd2l0Y2giCiAgICAgICk7CiAgICAgIGlmIChvdXRlckJsb2NrID09IG51bGwgfHwgb3V0ZXJCbG9jay5ydW5DYXNlIHx8IG91dGVyQmxvY2submV4dCAhPSBudWxsKQogICAgICAgIHJldHVybiAwOwogICAgICByZXR1cm4gMTsKICAgIH0KCiAgICBydW5DYXNlKGFyZ3MsIHV0aWwpIHsKICAgICAgaWYgKHRoaXMuaXNJblBhbGV0dGUodXRpbC50aHJlYWQpKSByZXR1cm47CiAgICAgIGNvbnN0IGJsb2NrID0gdXRpbC50aHJlYWQucGVla1N0YWNrKCk7CiAgICAgIGNvbnN0IGNhc2VWYWx1ZSA9IFNjcmF0Y2guQ2FzdC50b1N0cmluZyhhcmdzLkNBU0UpOwogICAgICBsZXQgb3V0ZXJCbG9jayA9IHRoaXMuZ2V0T3V0ZXJDdGlsbE9wY29kZSgKICAgICAgICB1dGlsLnRhcmdldCwKICAgICAgICBibG9jaywKICAgICAgICAibG1zU3BBc01vcmVDb250cm9sX3N3aXRjaCIKICAgICAgKTsKICAgICAgaWYgKG91dGVyQmxvY2sgPT0gbnVsbCkgcmV0dXJuIDA7CiAgICAgIG91dGVyQmxvY2suaWZDYXNlID0gY2FzZVZhbHVlOwogICAgICB0aGlzLnNldEJsb2NrQnlJRCh1dGlsLnRhcmdldCwgb3V0ZXJCbG9jay5pZCwgb3V0ZXJCbG9jayk7CiAgICB9CgogICAgc3dpdGNoVmFsdWUoYXJncywgdXRpbCkgewogICAgICBpZiAodGhpcy5pc0luUGFsZXR0ZSh1dGlsLnRocmVhZCkpIHJldHVybiAiIjsKICAgICAgY29uc3Qgb3V0ZXJCbG9jayA9IHRoaXMuZ2V0T3V0ZXJDdGlsbE9wY29kZSgKICAgICAgICB1dGlsLnRhcmdldCwKICAgICAgICB1dGlsLnRocmVhZC5wZWVrU3RhY2soKSwKICAgICAgICAibG1zU3BBc01vcmVDb250cm9sX3N3aXRjaCIKICAgICAgKTsKICAgICAgaWYgKG91dGVyQmxvY2sgPT0gbnVsbCkgcmV0dXJuICIiOwogICAgICByZXR1cm4gb3V0ZXJCbG9jay5zd2l0Y2hWYWx1ZSA/PyAiIjsKICAgIH0KCiAgICBlbHNlSWYoYXJncywgdXRpbCkgewogICAgICBjb25zdCBjb25kaXRpb24xID0gU2NyYXRjaC5DYXN0LnRvQm9vbGVhbihhcmdzLkNPTkRJVElPTjEpOwogICAgICBjb25zdCBjb25kaXRpb24yID0gU2NyYXRjaC5DYXN0LnRvQm9vbGVhbihhcmdzLkNPTkRJVElPTjIpOwogICAgICBpZiAoY29uZGl0aW9uMSkgewogICAgICAgIHJldHVybiAxOwogICAgICB9IGVsc2UgaWYgKGNvbmRpdGlvbjIpIHsKICAgICAgICByZXR1cm4gMjsKICAgICAgfQogICAgfQoKICAgIGVsc2VJZkVsc2UoYXJncywgdXRpbCkgewogICAgICBjb25zdCBjb25kaXRpb24xID0gU2NyYXRjaC5DYXN0LnRvQm9vbGVhbihhcmdzLkNPTkRJVElPTjEpOwogICAgICBjb25zdCBjb25kaXRpb24yID0gU2NyYXRjaC5DYXN0LnRvQm9vbGVhbihhcmdzLkNPTkRJVElPTjIpOwogICAgICBpZiAoY29uZGl0aW9uMSkgewogICAgICAgIHJldHVybiAxOwogICAgICB9IGVsc2UgaWYgKGNvbmRpdGlvbjIpIHsKICAgICAgICByZXR1cm4gMjsKICAgICAgfSBlbHNlIHsKICAgICAgICByZXR1cm4gMzsKICAgICAgfQogICAgfQoKICAgIHdhaXREdXJhdGlvbihhcmdzLCB1dGlsKSB7CiAgICAgIGNvbnN0IHR5cGUgPSBTY3JhdGNoLkNhc3QudG9TdHJpbmcoYXJncy5UWVBFKTsKICAgICAgaWYgKHR5cGUgPT0gImZyYW1lcyIpIHsKICAgICAgICBjb25zdCBkdXJhdGlvbiA9IE1hdGgucm91bmQoQ2FzdC50b051bWJlcihhcmdzLkRVUkFUSU9OKSk7CiAgICAgICAgaWYgKHR5cGVvZiB1dGlsLnN0YWNrRnJhbWUubG9vcENvdW50ZXIgPT09ICJ1bmRlZmluZWQiKSB7CiAgICAgICAgICB1dGlsLnN0YWNrRnJhbWUubG9vcENvdW50ZXIgPSBkdXJhdGlvbjsKICAgICAgICB9CiAgICAgICAgdXRpbC5zdGFja0ZyYW1lLmxvb3BDb3VudGVyLS07CiAgICAgICAgaWYgKHV0aWwuc3RhY2tGcmFtZS5sb29wQ291bnRlciA+PSAwKSB7CiAgICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgICB9CiAgICAgIH0gZWxzZSBpZiAodHlwZSA9PSAic2Vjb25kcyIpIHsKICAgICAgICBpZiAodXRpbC5zdGFja1RpbWVyTmVlZHNJbml0KCkpIHsKICAgICAgICAgIGNvbnN0IGR1cmF0aW9uID0gTWF0aC5tYXgoMCwgMTAwMCAqIENhc3QudG9OdW1iZXIoYXJncy5EVVJBVElPTikpOwoKICAgICAgICAgIHV0aWwuc3RhcnRTdGFja1RpbWVyKGR1cmF0aW9uKTsKICAgICAgICAgIHJ1bnRpbWUucmVxdWVzdFJlZHJhdygpOwogICAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgICAgfSBlbHNlIGlmICghdXRpbC5zdGFja1RpbWVyRmluaXNoZWQoKSkgewogICAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgICAgfQogICAgICB9CiAgICB9CgogICAgd2FpdER1cmF0aW9uT3JVbnRpbChhcmdzLCB1dGlsKSB7CiAgICAgIGNvbnN0IHR5cGUgPSBTY3JhdGNoLkNhc3QudG9TdHJpbmcoYXJncy5UWVBFKTsKICAgICAgaWYgKHR5cGUgPT0gImZyYW1lcyIpIHsKICAgICAgICBjb25zdCBkdXJhdGlvbiA9IE1hdGgucm91bmQoQ2FzdC50b051bWJlcihhcmdzLkRVUkFUSU9OKSk7CiAgICAgICAgaWYgKHR5cGVvZiB1dGlsLnN0YWNrRnJhbWUubG9vcENvdW50ZXIgPT09ICJ1bmRlZmluZWQiKSB7CiAgICAgICAgICB1dGlsLnN0YWNrRnJhbWUubG9vcENvdW50ZXIgPSBkdXJhdGlvbjsKICAgICAgICB9CiAgICAgICAgdXRpbC5zdGFja0ZyYW1lLmxvb3BDb3VudGVyLS07CiAgICAgICAgaWYgKHV0aWwuc3RhY2tGcmFtZS5sb29wQ291bnRlciA+PSAwICYmICFhcmdzLkNPTkRJVElPTikgewogICAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgICAgfQogICAgICB9IGVsc2UgaWYgKHR5cGUgPT0gInNlY29uZHMiKSB7CiAgICAgICAgaWYgKHV0aWwuc3RhY2tUaW1lck5lZWRzSW5pdCgpKSB7CiAgICAgICAgICBjb25zdCBkdXJhdGlvbiA9IE1hdGgubWF4KDAsIDEwMDAgKiBDYXN0LnRvTnVtYmVyKGFyZ3MuRFVSQVRJT04pKTsKCiAgICAgICAgICB1dGlsLnN0YXJ0U3RhY2tUaW1lcihkdXJhdGlvbik7CiAgICAgICAgICBydW50aW1lLnJlcXVlc3RSZWRyYXcoKTsKICAgICAgICAgIHJldHVybiB0cnVlOwogICAgICAgIH0gZWxzZSBpZiAoIXV0aWwuc3RhY2tUaW1lckZpbmlzaGVkKCkgJiYgIWFyZ3MuQ09ORElUSU9OKSB7CiAgICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgICB9CiAgICAgIH0KICAgIH0KCiAgICByZXBlYXREdXJhdGlvbihhcmdzLCB1dGlsKSB7CiAgICAgIGlmICh1dGlsLnN0YWNrVGltZXJOZWVkc0luaXQoKSkgewogICAgICAgIGNvbnN0IGR1cmF0aW9uID0gTWF0aC5tYXgoMCwgMTAwMCAqIENhc3QudG9OdW1iZXIoYXJncy5EVVJBVElPTikpOwoKICAgICAgICB1dGlsLnN0YXJ0U3RhY2tUaW1lcihkdXJhdGlvbik7CiAgICAgICAgcnVudGltZS5yZXF1ZXN0UmVkcmF3KCk7CiAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgIH0gZWxzZSBpZiAoIXV0aWwuc3RhY2tUaW1lckZpbmlzaGVkKCkgJiYgIWFyZ3MuQ09ORElUSU9OKSB7CiAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgIH0KICAgIH0KCiAgICByZXBlYXREdXJhdGlvbk9yVW50aWwoYXJncywgdXRpbCkgewogICAgICBjb25zdCBkdXJhdGlvbiA9IE1hdGgucm91bmQoQ2FzdC50b051bWJlcihhcmdzLkRVUkFUSU9OKSk7CiAgICAgIGlmICh0eXBlb2YgdXRpbC5zdGFja0ZyYW1lLmxvb3BDb3VudGVyID09PSAidW5kZWZpbmVkIikgewogICAgICAgIHV0aWwuc3RhY2tGcmFtZS5sb29wQ291bnRlciA9IGR1cmF0aW9uOwogICAgICB9CiAgICAgIHV0aWwuc3RhY2tGcmFtZS5sb29wQ291bnRlci0tOwogICAgICBpZiAodXRpbC5zdGFja0ZyYW1lLmxvb3BDb3VudGVyID49IDAgJiYgIWFyZ3MuQ09ORElUSU9OKSB7CiAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgIH0KICAgIH0KCiAgICBzdG9wVGFyZ2V0KGFyZ3MsIHV0aWwpIHsKICAgICAgY29uc3QgdGFyZ2V0TmFtZSA9IFNjcmF0Y2guQ2FzdC50b1N0cmluZyhhcmdzLlRBUkdFVCk7CiAgICAgIHJ1bnRpbWUuc3RvcEZvclRhcmdldCh0aGlzLl9nZXRUYXJnZXRGcm9tTWVudSh0YXJnZXROYW1lKSk7CiAgICB9CgogICAgc3RvcEV4Y2VwdFRhcmdldChhcmdzLCB1dGlsKSB7CiAgICAgIGNvbnN0IHRhcmdldHMgPSBydW50aW1lLnRhcmdldHM7CiAgICAgIGNvbnN0IHRhcmdldE5hbWUgPSBTY3JhdGNoLkNhc3QudG9TdHJpbmcoYXJncy5UQVJHRVQpOwogICAgICBjb25zdCBleGNlcHRpb24gPSB0aGlzLl9nZXRUYXJnZXRGcm9tTWVudSh0YXJnZXROYW1lKTsKCiAgICAgIGZvciAoY29uc3QgdGFyZ2V0IG9mIHRhcmdldHMpIHsKICAgICAgICBpZiAodGFyZ2V0ICE9PSBleGNlcHRpb24pIHJ1bnRpbWUuc3RvcEZvclRhcmdldCh0YXJnZXQpOwogICAgICB9CiAgICB9CgogICAgc3BheWVkQ29uZGl0aW9uKGFyZ3MsIHV0aWwpIHsKICAgICAgaWYgKHR5cGVvZiB1dGlsLnN0YWNrRnJhbWUuaW5kZXggPT09ICJ1bmRlZmluZWQiKQogICAgICAgIHV0aWwuc3RhY2tGcmFtZS5pbmRleCA9IDA7CiAgICAgIGlmICghQ2FzdC50b0Jvb2xlYW4oYXJncy5DT04xKSAmJiB1dGlsLnN0YWNrRnJhbWUuaW5kZXggPT09IDApIHsKICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgaWYgKCFDYXN0LnRvQm9vbGVhbihhcmdzLkNPTjIpKSB7CiAgICAgICAgICB1dGlsLnN0YWNrRnJhbWUuaW5kZXggPSAxOwogICAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHV0aWwuc3RhY2tGcmFtZS5pbmRleCA9IDA7CiAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgfQogICAgICB9CiAgICB9CgogICAgYXN5bmMgcnVuSW5TcHJpdGUoYXJncywgdXRpbCkgewogICAgICBjb25zdCBjbG9uZUJsb2NrID0gVXRpbGl0aWVzLmNsb25lQmxvY2s7CiAgICAgIGxldCBTUFJJVEUgPSBDYXN0LnRvU3RyaW5nKGFyZ3MuU1BSSVRFKTsKICAgICAgY29uc3QgRE9OVF9XQUlUID0gQ2FzdC50b0Jvb2xlYW4oYXJncy5ET05UX1dBSVQpOwogICAgICBsZXQgZW5kVGFyZ2V0ID0gdW5kZWZpbmVkOwogICAgICBpZiAoU1BSSVRFLnRvTG93ZXJDYXNlKCkgPT09ICJfc3RhZ2VfIikgZW5kVGFyZ2V0ID0gcnVudGltZS5fc3RhZ2VUYXJnZXQ7CiAgICAgIC8vaWYgKFNQUklURS50b0xvd2VyQ2FzZSgpID09PSAnX215c2VsZl8nKSBlbmRUYXJnZXQgPSB1dGlsLnRhcmdldDsKICAgICAgaWYgKCFlbmRUYXJnZXQpIGVuZFRhcmdldCA9IHJ1bnRpbWUuZ2V0U3ByaXRlVGFyZ2V0QnlOYW1lKFNQUklURSk7CiAgICAgIGlmICghZW5kVGFyZ2V0KSByZXR1cm4gMDsKICAgICAgY29uc3QgdGhyZWFkID0gdXRpbC50aHJlYWQ7CiAgICAgIGNvbnN0IHRhcmdldCA9IHV0aWwudGFyZ2V0OwogICAgICBjb25zdCBibG9ja3MgPSB0YXJnZXQuYmxvY2tzOwogICAgICBjb25zdCBzdGFydEJsb2NrID0gYmxvY2tzLmdldEJyYW5jaCh0aHJlYWQucGVla1N0YWNrKCksIDEpOwogICAgICBsZXQgY2xvbmVPdmVyID0gW107CiAgICAgIGxldCBibG9jayA9IGJsb2Nrcy5nZXRCbG9jayhzdGFydEJsb2NrKTsKICAgICAgY2xvbmVPdmVyLnB1c2goY2xvbmVCbG9jayhibG9jay5pZCwgdGFyZ2V0KSk7CiAgICAgIHdoaWxlIChibG9jay5uZXh0KSB7CiAgICAgICAgaWYgKGJsb2NrLm5leHQpIGJsb2NrID0gYmxvY2tzLmdldEJsb2NrKGJsb2NrLm5leHQpOwogICAgICAgIGNsb25lT3Zlci5wdXNoKGNsb25lQmxvY2soYmxvY2suaWQsIHRhcmdldCkpOwogICAgICB9CiAgICAgIGNsb25lT3ZlclswXS5wYXJlbnQgPSBudWxsOwogICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGNsb25lT3Zlci5sZW5ndGg7IGkrKykgewogICAgICAgIGNvbnN0IGJsb2NrczIgPSBjbG9uZU92ZXJbaV07CiAgICAgICAgZm9yIChsZXQgaiA9IDA7IGogPCBibG9ja3MyLmxlbmd0aDsgaisrKSB7CiAgICAgICAgICBibG9jayA9IGJsb2NrczJbal07CiAgICAgICAgICBlbmRUYXJnZXQuYmxvY2tzLl9ibG9ja3NbYmxvY2suaWRdID0gYmxvY2s7CiAgICAgICAgfQogICAgICB9CiAgICAgIGVuZFRhcmdldC5ibG9ja3MuX2FkZFNjcmlwdChzdGFydEJsb2NrKTsKICAgICAgcnVudGltZS5yZXF1ZXN0QmxvY2tzVXBkYXRlKCk7CiAgICAgIHZtLnJlZnJlc2hXb3Jrc3BhY2UoKTsKICAgICAgdmFyIG5ld1RocmVhZCA9IHJ1bnRpbWUuX3B1c2hUaHJlYWQoc3RhcnRCbG9jaywgZW5kVGFyZ2V0LCB7CiAgICAgICAgc3RhY2tDbGljazogdHJ1ZSwKICAgICAgfSk7CiAgICAgIGlmIChET05UX1dBSVQpIHJldHVybiAwOwogICAgICBhd2FpdCB0aGlzLnVudGlsKChfKSA9PiAhcnVudGltZS5pc0FjdGl2ZVRocmVhZChuZXdUaHJlYWQpID09IHRydWUpOwogICAgICByZXR1cm4gMDsKICAgIH0KCiAgICAvKiBVdGlsaXR5IEZ1bmN0aW9ucyAqLwogICAgX2dldFRhcmdldHMoc3RhZ2UsIG15c2VsZikgewogICAgICBjb25zdCBzcHJpdGVOYW1lcyA9IFtdOwogICAgICBpZiAoc3RhZ2UpIHNwcml0ZU5hbWVzLnB1c2goeyB0ZXh0OiAiU3RhZ2UiLCB2YWx1ZTogIl9zdGFnZV8iIH0pOwogICAgICBpZiAobXlzZWxmKSBzcHJpdGVOYW1lcy5wdXNoKHsgdGV4dDogIm15c2VsZiIsIHZhbHVlOiAiX215c2VsZl8iIH0pOwoKICAgICAgY29uc3QgdGFyZ2V0cyA9IFNjcmF0Y2gudm0ucnVudGltZS50YXJnZXRzOwogICAgICBmb3IgKGxldCBpbmRleCA9IDE7IGluZGV4IDwgdGFyZ2V0cy5sZW5ndGg7IGluZGV4KyspIHsKICAgICAgICBjb25zdCB0YXJnZXROYW1lID0gdGFyZ2V0c1tpbmRleF0uZ2V0TmFtZSgpOwogICAgICAgIHNwcml0ZU5hbWVzLnB1c2goewogICAgICAgICAgdGV4dDogdGFyZ2V0TmFtZSwKICAgICAgICAgIHZhbHVlOiB0YXJnZXROYW1lLAogICAgICAgIH0pOwogICAgICB9CiAgICAgIGlmIChzcHJpdGVOYW1lcy5sZW5ndGggPiAwKSB7CiAgICAgICAgcmV0dXJuIHNwcml0ZU5hbWVzOwogICAgICB9IGVsc2UgewogICAgICAgIHJldHVybiBbeyB0ZXh0OiAiIiwgdmFsdWU6IDAgfV07IC8vdGhpcyBzaG91bGQgbmV2ZXIgaGFwcGVuIGJ1dCBpdCdzIGEgZmFpbHNhZmUKICAgICAgfQogICAgfQoKICAgIHVudGlsKGNvbmRpdGlvbkZ1bmN0aW9uKSB7CiAgICAgIGNvbnN0IHBvbGwgPSAocmVzb2x2ZSkgPT4gewogICAgICAgIGlmIChjb25kaXRpb25GdW5jdGlvbigpKSByZXNvbHZlKCk7CiAgICAgICAgZWxzZSBydW50aW1lLm9uY2UoIkFGVEVSX0VYRUNVVEUiLCAoXykgPT4gcG9sbChyZXNvbHZlKSk7CiAgICAgIH07CiAgICAgIHJldHVybiBuZXcgUHJvbWlzZShwb2xsKTsKICAgIH0KCiAgICBnZXRCbG9ja0J5SUQodGFyZ2V0LCBpZCkgewogICAgICByZXR1cm4gdGFyZ2V0LmJsb2Nrcy5fYmxvY2tzW2lkXTsKICAgIH0KCiAgICBnZXRPdXRlckJsb2NrSUQodGFyZ2V0LCBzdGFydEJsb2NrSUQpIHsKICAgICAgbGV0IGJsb2NrID0gdGhpcy5nZXRCbG9ja0J5SUQodGFyZ2V0LCBzdGFydEJsb2NrSUQpOwoKICAgICAgd2hpbGUgKAogICAgICAgIGJsb2NrLnBhcmVudCAhPSBudWxsICYmCiAgICAgICAgdGhpcy5nZXRCbG9ja0J5SUQodGFyZ2V0LCBibG9jay5wYXJlbnQpLm5leHQKICAgICAgKSB7CiAgICAgICAgYmxvY2sgPSB0aGlzLmdldEJsb2NrQnlJRCh0YXJnZXQsIGJsb2NrLnBhcmVudCk7CiAgICAgIH0KCiAgICAgIGlmIChibG9jay5wYXJlbnQpIGJsb2NrID0gdGhpcy5nZXRCbG9ja0J5SUQodGFyZ2V0LCBibG9jay5wYXJlbnQpOwogICAgICByZXR1cm4gYmxvY2s7CiAgICB9CgogICAgZ2V0T3V0ZXJDYmxvY2sodGFyZ2V0LCBzdGFydElkKSB7CiAgICAgIGxldCBibG9jayA9IHRoaXMuZ2V0QmxvY2tCeUlEKHRhcmdldCwgc3RhcnRJZCk7CiAgICAgIGlmICghYmxvY2sgfHwgdHlwZW9mIGJsb2NrICE9PSAib2JqZWN0IikgcmV0dXJuIG51bGw7CiAgICAgIGxldCBpc0MgPSBmYWxzZTsKICAgICAgd2hpbGUgKCFpc0MgJiYgaGFzT3duKCJwYXJlbnQiLCBibG9jaykgJiYgYmxvY2sucGFyZW50ICE9PSBudWxsKSB7CiAgICAgICAgYmxvY2sgPSB0aGlzLmdldEJsb2NrQnlJRCh0YXJnZXQsIGJsb2NrLnBhcmVudCk7CiAgICAgICAgaXNDID0gaGFzT3duKCJpbnB1dHMiLCBibG9jaykgJiYgaGFzT3duKCJTVUJTVEFDSyIsIGJsb2NrLmlucHV0cyk7CiAgICAgIH0KICAgICAgcmV0dXJuIGlzQyA/IGJsb2NrIDogbnVsbDsKICAgIH0KCiAgICBzZXRCbG9ja0J5SUQodGFyZ2V0LCBpZCwgSlNPTikgewogICAgICB0YXJnZXQuYmxvY2tzLl9ibG9ja3NbaWRdID0gSlNPTjsKICAgIH0KCiAgICBnZXRPdXRlckN0aWxsT3Bjb2RlKHRhcmdldCwgc3RhcnRJZCwgb3Bjb2RlKSB7CiAgICAgIGxldCBjdXJyZW50QyA9IHRoaXMuZ2V0T3V0ZXJDYmxvY2sodGFyZ2V0LCBzdGFydElkKTsKICAgICAgd2hpbGUgKGN1cnJlbnRDICE9IG51bGwgJiYgY3VycmVudEMub3Bjb2RlICE9PSBvcGNvZGUpIHsKICAgICAgICBjdXJyZW50QyA9IHRoaXMuZ2V0T3V0ZXJDYmxvY2sodGFyZ2V0LCBjdXJyZW50Qy5pZCk7CiAgICAgIH0KICAgICAgcmV0dXJuIGN1cnJlbnRDOwogICAgfQoKICAgIGlzSW5QYWxldHRlKHRocmVhZCkgewogICAgICByZXR1cm4gIU9iamVjdC5rZXlzKHRocmVhZC50YXJnZXQuYmxvY2tzLl9ibG9ja3MpLmluY2x1ZGVzKAogICAgICAgIHRocmVhZC5wZWVrU3RhY2soKQogICAgICApOwogICAgfQoKICAgIF9nZXRUYXJnZXRGcm9tTWVudSh0YXJnZXROYW1lLCB1dGlsKSB7CiAgICAgIGxldCB0YXJnZXQgPSBTY3JhdGNoLnZtLnJ1bnRpbWUuZ2V0U3ByaXRlVGFyZ2V0QnlOYW1lKHRhcmdldE5hbWUpOwogICAgICBpZiAodGFyZ2V0TmFtZSA9PT0gIl9teXNlbGZfIikgdGFyZ2V0ID0gdXRpbC50YXJnZXQ7CiAgICAgIGlmICh0YXJnZXROYW1lID09PSAiX3N0YWdlXyIpIHRhcmdldCA9IHJ1bnRpbWUuZ2V0VGFyZ2V0Rm9yU3RhZ2UoKTsKICAgICAgcmV0dXJuIHRhcmdldDsKICAgIH0KICB9CgogIFNjcmF0Y2guZXh0ZW5zaW9ucy5yZWdpc3RlcihuZXcgTW9yZUNvbnRyb2woKSk7Cn0pKFNjcmF0Y2gpOwo=","data:text/javascript;base64,Ly8gTmFtZTogU3ByaXRlIEVmZmVjdHMKLy8gSUQ6IFNQc3ByaXRlRWZmZWN0cwovLyBEZXNjcmlwdGlvbjogQXBwbHkgTmV3IE5vbi1WYW5pbGxhIEVmZmVjdHMgdG8gU3ByaXRlcyBhbmQgdGhlIENhbnZhcyEKLy8gQnk6IFNoYXJrUG9vbAoKLy8gVmVyc2lvbiBWLjEuMy4yCgooZnVuY3Rpb24gKFNjcmF0Y2gpIHsKICAidXNlIHN0cmljdCI7CiAgaWYgKCFTY3JhdGNoLmV4dGVuc2lvbnMudW5zYW5kYm94ZWQpIHRocm93IG5ldyBFcnJvcigiU3ByaXRlIEVmZmVjdHMgbXVzdCBydW4gdW5zYW5kYm94ZWQiKTsKCiAgY29uc3QgbWVudUljb25VUkkgPQoiZGF0YTppbWFnZS9zdmcreG1sO2Jhc2U2NCxQSE4yWnlCMlpYSnphVzl1UFNJeExqRWlJSGh0Ykc1elBTSm9kSFJ3T2k4dmQzZDNMbmN6TG05eVp5OHlNREF3TDNOMlp5SWdlRzFzYm5NNmVHeHBibXM5SW1oMGRIQTZMeTkzZDNjdWR6TXViM0puTHpFNU9Ua3ZlR3hwYm1zaUlIZHBaSFJvUFNJeE16WWlJR2hsYVdkb2REMGlNVE0ySWlCMmFXVjNRbTk0UFNJd0xEQXNNVE0yTERFek5pSStQR2NnZEhKaGJuTm1iM0p0UFNKMGNtRnVjMnhoZEdVb0xURTNNaXd0TVRFeUtTSStQR2NnWkdGMFlTMXdZWEJsY2kxa1lYUmhQU0o3Sm5GMWIzUTdhWE5RWVdsdWRHbHVaMHhoZVdWeUpuRjFiM1E3T25SeWRXVjlJaUJ6ZEhKdmEyVXRiR2x1WldOaGNEMGlZblYwZENJZ2MzUnliMnRsTFd4cGJtVnFiMmx1UFNKdGFYUmxjaUlnYzNSeWIydGxMVzFwZEdWeWJHbHRhWFE5SWpFd0lpQnpkSEp2YTJVdFpHRnphR0Z5Y21GNVBTSWlJSE4wY205clpTMWtZWE5vYjJabWMyVjBQU0l3SWlCemRIbHNaVDBpYldsNExXSnNaVzVrTFcxdlpHVTZJRzV2Y20xaGJDSStQSEJoZEdnZ1pEMGlUVEUzTWl3eE9EQmpNQ3d0TXpjdU5UVTFNellnTXpBdU5EUTBOalFzTFRZNElEWTRMQzAyT0dNek55NDFOVFV6Tml3d0lEWTRMRE13TGpRME5EWTBJRFk0TERZNFl6QXNNemN1TlRVMU16WWdMVE13TGpRME5EWTBMRFk0SUMwMk9DdzJPR010TXpjdU5UVTFNellzTUNBdE5qZ3NMVE13TGpRME5EWTBJQzAyT0N3dE5qaDZJaUJtYVd4c1BTSWpOemMwWkdOaUlpQm1hV3hzTFhKMWJHVTlJbTV2Ym5wbGNtOGlJSE4wY205clpUMGlibTl1WlNJZ2MzUnliMnRsTFhkcFpIUm9QU0l3SWk4K1BIQmhkR2dnWkQwaVRURTNPQzQwTXpJME15d3hPREJqTUN3dE16UXVNREF5T0RNZ01qY3VOVFkwTnpRc0xUWXhMalUyTnpVM0lEWXhMalUyTnpVM0xDMDJNUzQxTmpjMU4yTXpOQzR3TURJNE15d3dJRFl4TGpVMk56VTNMREkzTGpVMk5EYzBJRFl4TGpVMk56VTNMRFl4TGpVMk56VTNZekFzTXpRdU1EQXlPRE1nTFRJM0xqVTJORGMwTERZeExqVTJOelUzSUMwMk1TNDFOamMxTnl3Mk1TNDFOamMxTjJNdE16UXVNREF5T0RNc01DQXROakV1TlRZM05UY3NMVEkzTGpVMk5EYzBJQzAyTVM0MU5qYzFOeXd0TmpFdU5UWTNOVGQ2SWlCbWFXeHNQU0lqT1RrMk5tWm1JaUJtYVd4c0xYSjFiR1U5SW01dmJucGxjbThpSUhOMGNtOXJaVDBpYm05dVpTSWdjM1J5YjJ0bExYZHBaSFJvUFNJd0lpOCtQR2NnWm1sc2JEMGlibTl1WlNJZ1ptbHNiQzF5ZFd4bFBTSnViMjU2WlhKdklpQnpkSEp2YTJVOUltNXZibVVpSUhOMGNtOXJaUzEzYVdSMGFEMGlNU0lnWm05dWRDMW1ZVzFwYkhrOUluTmhibk10YzJWeWFXWWlJR1p2Ym5RdGQyVnBaMmgwUFNKdWIzSnRZV3dpSUdadmJuUXRjMmw2WlQwaU1USWlJSFJsZUhRdFlXNWphRzl5UFNKemRHRnlkQ0l2UGp4bklHWnBiR3c5SWlObVptWm1abVlpSUdacGJHd3RjblZzWlQwaVpYWmxibTlrWkNJZ2MzUnliMnRsUFNKdWIyNWxJaUJ6ZEhKdmEyVXRkMmxrZEdnOUlqRWlQanh3WVhSb0lHUTlJazB5TmprdU5URTRNVFlzTVRjd0xqRTVPRGd5WXpFdU5qazROellzTFRBdU56TTVPRGtnTWk0NE56TTVOU3d0TWk0ek1qa3hPU0F6TGpBNE16VTVMQzAwTGpFM01ERTRiREF1TkRjNU1EVXNMVFF1TVRnMU5UaGpNQzR5TWpnNUxDMHhMamszT1RBMUlESXVPVEkzTWprc0xUSXVNemd6TWpZZ015NDNNak13TlN3dE1DNDFOVGMzYkRFdU5qZzNORGdzTXk0NE5qRXdOV013TGpjek9UZzVMREV1TmprNE56WWdNaTR6TWpreE9Td3lMamczTXprMUlEUXVNVFkzTVRrc015NHdPRFF3Tm13MExqRTROVFU1TERBdU5EYzVNRFpqTVM0NU56a3dOU3d3TGpJeU9Ea2dNaTR6T0RNeU55d3lMamt5TnpNeElEQXVOVFU0TVRVc015NDNNall3Tm13dE15NDROakUxTVN3eExqWTRORFEzWXkweExqWTVOVGMyTERBdU56TTVORE1nTFRJdU9EY3dPVFFzTWk0ek1qZzNOQ0F0TXk0d09ERXdOU3cwTGpFMk5qYzBiQzB3TGpRNE1qQTJMRFF1TVRnMk1EVmpMVEF1TWpJMU9URXNNUzQ1TnpnMklDMHlMamt5TkRNeExESXVNemd5T0RJZ0xUTXVOekl6TURZc01DNDFOVGMyT1d3dE1TNDJPRFEwT0N3dE15NDROakUxTVdNdE1DNDNNemswTXl3dE1TNDJPVFUzTmlBdE1pNHpNamczTkN3dE1pNDROekE1TkNBdE5DNHhOamszTXl3dE15NHdPREEyYkMwMExqRTROVFU0TEMwd0xqUTNPVEEyWXkweExqazNPVEExTEMwd0xqSXlPRGtnTFRJdU16Z3pNamdzTFRJdU9USTNNekVnTFRBdU5UVTRNVFlzTFRNdU56STJNRFY2SWk4K1BDOW5QanhuSUdacGJHdzlJaU5tWm1abVptWWlJR1pwYkd3dGNuVnNaVDBpWlhabGJtOWtaQ0lnYzNSeWIydGxQU0p1YjI1bElpQnpkSEp2YTJVdGQybGtkR2c5SWpFaVBqeHdZWFJvSUdROUlrMHhPVFV1TXpFeE9Ea3NNVGt5TGpnek5ETTJZekV1TkRRek5UTXNMVEV1TlRZd09DQXhMamswTlRJMExDMHpMamMzTWpVMUlERXVNekUyTkRRc0xUVXVPREF6TkROc0xURXVOREkzTURVc0xUUXVOakU0TkdNdE1DNDJOekl5TXl3dE1pNHhPRFE0TVNBeExqazNOak0xTEMwekxqZzFNemsySURNdU5qVTBNeklzTFRJdU16QXlPVGhzTXk0MU5UTTFPU3d6TGpJM09ESTJZekV1TlRZd09Dd3hMalEwTXpVeklETXVOemN5TlRVc01TNDVORFV5TXlBMUxqZ3dNRFE1TERFdU16RTRNekZzTkM0Mk1UZzBNU3d0TVM0ME1qY3dOV015TGpFNE5EZ3hMQzB3TGpZM01qSTBJRE11T0RVek9UY3NNUzQ1TnpZek5TQXlMak13TkRnekxETXVOalUzTWpkc0xUTXVNamd3TVRJc015NDFOVEEyTldNdE1TNDBOREExT0N3eExqVTFPRGt6SUMweExqazBNakk1TERNdU56Y3dOamtnTFRFdU16RTFNellzTlM0M09UZzJNbXd4TGpReU5ERXNOQzQyTWpBeU4yTXdMalkzTlRFM0xESXVNVGd5T1RZZ0xURXVPVGN6TkN3ekxqZzFNakV4SUMwekxqWTFORE15TERJdU16QXlPVGRzTFRNdU5UVXdOalVzTFRNdU1qZ3dNVEpqTFRFdU5UVTRPVE1zTFRFdU5EUXdOVGdnTFRNdU56Y3dOamdzTFRFdU9UUXlNamdnTFRVdU9EQXhOVGNzTFRFdU16RXpOV3d0TkM0Mk1UZzBNU3d4TGpReU56QTFZeTB5TGpFNE5EZ3hMREF1TmpjeU1qUWdMVE11T0RVek9UY3NMVEV1T1RjMk16VWdMVEl1TXpBME9ETXNMVE11TmpVM01qZDZJaTgrUEM5blBqeG5JR1pwYkd3OUlpTm1abVptWm1ZaUlHWnBiR3d0Y25Wc1pUMGlaWFpsYm05a1pDSWdjM1J5YjJ0bFBTSnViMjVsSWlCemRISnZhMlV0ZDJsa2RHZzlJakVpUGp4d1lYUm9JR1E5SWsweU16TXVORGs1TURNc01qRTRMalF4T0RBeFl6RXVNekE1TmpZc0xUQXVOemN6TnpNZ01pNHhNRGN6TEMweUxqRTROamcxSURJdU1Ea3lPVEVzTFRNdU56QTNPVEpzTFRBdU1ETXdOelFzTFRNdU5EVTRORGRqTFRBdU1ERXlOVGdzTFRFdU5qTTFORGtnTWk0eE5EVXpNeXd0TWk0eU16WXlPQ0F5TGprM056TTBMQzB3TGpneU9Ea3hiREV1TnpZek1qa3NNaTQ1TnpZd09XTXdMamMzTXpjekxERXVNekE1TmpZZ01pNHhPRFk0TlN3eUxqRXdOekk1SURNdU56QTFOVElzTWk0d09UTTFPV3d6TGpRMU9EUTNMQzB3TGpBek1EY3pZekV1TmpNMU5Ea3NMVEF1TURFeU5UZ2dNaTR5TXpZeU9Td3lMakUwTlRNeklEQXVPREk1TlRrc01pNDVOemszTTJ3dE1pNDVOelkzT0N3eExqYzJNRGxqTFRFdU16QTNNalVzTUM0M056TXdOaUF0TWk0eE1EUTVMREl1TVRnMk1UZ2dMVEl1TURreE1UZ3NNeTQzTURRNE5td3dMakF5T0RNekxETXVORFU1TVRWak1DNHdNVFE1Tnl3eExqWXpORGd6SUMweUxqRTBNamt6TERJdU1qTTFOakVnTFRJdU9UYzNNek1zTUM0NE1qZzVNV3d0TVM0M05qQTVMQzB5TGprM05qYzVZeTB3TGpjM016QTJMQzB4TGpNd056STFJQzB5TGpFNE5qRTRMQzB5TGpFd05EZzVJQzB6TGpjd056STFMQzB5TGpBNU1EVXliQzB6TGpRMU9EUTJMREF1TURNd056UmpMVEV1TmpNMU5Ea3NNQzR3TVRJMU9DQXRNaTR5TXpZeU9Td3RNaTR4TkRVek15QXRNQzQ0TWprMU9Td3RNaTQ1TnprM00zb2lMejQ4TDJjK1BHY2dabWxzYkQwaUkyWm1abVptWmlJZ1ptbHNiQzF5ZFd4bFBTSnViMjU2WlhKdklpQnpkSEp2YTJVOUlpTm1abVptWm1ZaUlITjBjbTlyWlMxM2FXUjBhRDBpTUNJK1BIQmhkR2dnWkQwaVRUSTJPUzQwTnpjd015d3lNVFF1TnpBME5URnNMVEF1TWpVd05Ea3NMVEF1TWpVd05XTXRNQzR3TURBMU5Dd3RNQzR3TURBMU15QXRNQzR3TURFd055d3RNQzR3TURFd055QXRNQzR3TURFMk1Td3RNQzR3TURFMmJDMHdMakF3TURBeUxDMHdMakF3TURBeWJDMHlOaTR4TkRBMU9Td3RNall1TVRReE5EVmpMVEl1T1RjMU56Y3NNaTR3TkRVMk5DQXROaTQzTnpFeU1pd3lMamczTlRNNUlDMHhNQzQxTmpJME55d3hMams0TURFMVl5MDJMalEwTVRVekxDMHhMalV5TVRBMUlDMHhNQzQyTmpZek9Dd3ROeTQxTURFeUlDMHhNQzR4TnpjME5pd3RNVE11T0RrNU5EbGpMVEF1TXpJM05qa3NNQzR3TWpReU5TQXRNQzQyTlRnM0xEQXVNRE0yTlRrZ0xUQXVPVGt5TlRrc01DNHdNelkxT1dNdE55NHpNak16Tnl3d0lDMHhNeTR5TmpBeU1pd3ROUzQ1TXpZNE5TQXRNVE11TWpZd01qSXNMVEV6TGpJMk1ESXlZekFzTFRJdU56a3dOekVnTUM0NE5qSXhNaXd0TlM0ek9EQXdOeUF5TGpNek5EVTBMQzAzTGpVeE5qTXhiQzB4TGpNM05qZzRMQzB4TGpNM05qa3pZeTB3TGprME1EY3hMQzB3TGprME1EY3hJQzB3TGprME1EY3hMQzB5TGpRMk9EWXhJREFzTFRNdU5EQTVNekpqTUM0NU5EQTNNU3d0TUM0NU5EQTNNU0F5TGpRMk9EWXhMQzB3TGprME1EY3hJRE11TkRBNU16SXNNR3d3TGpJME9EQTNMREF1TWpRNE1EZGpNQzR3TURFek5Td3dMakF3TVRNMElEQXVNREF5Tmprc01DNHdNREkyT0NBd0xqQXdOREEwTERBdU1EQTBNRE5zTVM0eE1qUTRMREV1TVRJME9HTXlMakV6TmpJekxDMHhMalEzTWpRMElEUXVOekkxTmpFc0xUSXVNek0wTlRjZ055NDFNVFl6TkN3dE1pNHpNelExTjJNM0xqTXlNek0zTERBZ01UTXVNall3TWpJc05TNDVNelk0TlNBeE15NHlOakF5TWl3eE15NHlOakF5TW1Nd0xEQXVNek16TkRZZ0xUQXVNREV5TXpFc01DNDJOalF3TkNBdE1DNHdNelkxTERBdU9Ua3hNekpqTVM0ek1qSXlOU3d0TUM0d09UZzVPU0F5TGpZNE1Ua3lMREF1TURBd01qWWdOQzR3TkRFd05Dd3dMak15TVRKak55NHhNamMwTVN3eExqWTRNekF4SURFeExqVTBNRGsxTERndU9ESTFNallnT1M0NE5UYzVOU3d4TlM0NU5USTJObU10TUM0ek9EazBPU3d4TGpZME9UUTNJQzB4TGpBM01UTTNMRE11TVRVek5Ua2dMVEV1T1RjM056a3NOQzQwTnpBME0yd3lOaTR6T0RrMk15d3lOaTR6T0RrMk0yTXdMamswTURjeExEQXVPVFF3TnpFZ01DNDVOREEzTVN3eUxqUTJPRFl5SURBc015NDBNRGt6TTJNdE1DNDBOekV6TXl3d0xqUTJPVE0zSUMweExqQTROems1TERBdU56QTJPVGtnTFRFdU56QTBOalVzTUM0M01EWTVPV2d0TUM0d01EQXdNV010TUM0Mk1UWTJOeXd3SUMweExqSXpNek15TEMwd0xqSXpOVFkySUMweExqY3dORFkxTEMwd0xqY3dOVEEwZWlJdlBqeHdZWFJvSUdROUlrMHlNakV1TXpVeE9Dd3hOell1TkRJNE1tTXROeTR6TWpNek55d3dJQzB4TXk0eU5qQXlNaXd0TlM0NU16WTROU0F0TVRNdU1qWXdNaklzTFRFekxqSTJNREl5WXpBc0xUSXVOemt3TnpFZ01DNDROakl4TVN3dE5TNHpPREF3TnlBeUxqTXpORFV6TEMwM0xqVXhOak14YkMweExqRXlORGM0TEMweExqRXlORGd4WXkwd0xqUTNNRE0yTEMwd0xqUTNNRE0ySUMwd0xqY3dOVFV6TEMweExqQTROelV4SUMwd0xqY3dOVFV6TEMweExqY3dORFkzWXpBc0xUQXVOakUzTVRZZ01DNHlNelV4Tnl3dE1TNHlNelF6TVNBd0xqY3dOVFV6TEMweExqY3dORFkzWXpBdU9UUXdOekVzTFRBdU9UUXdOekVnTWk0ME5qZzJNaXd0TUM0NU5EQTNNU0F6TGpRd09UTXpMREJzTVM0eE1qUTRMREV1TVRJME9HTXlMakV6TmpJekxDMHhMalEzTWpRMElEUXVOekkxTmpFc0xUSXVNek0wTlRjZ055NDFNVFl6TkN3dE1pNHpNelExTjJNM0xqTXlNek0zTERBZ01UTXVNall3TWpJc05TNDVNelk0TlNBeE15NHlOakF5TWl3eE15NHlOakF5TW1Nd0xESXVOemt3TnpNZ0xUQXVPRFl5TVRNc05TNHpPREF4SUMweUxqTXpORFUzTERjdU5URTJNelJzTVRBdU5Ea3dNVElzTVRBdU5Ea3dNVEpqTWk0eE16WXlNeXd0TVM0ME56STBOQ0EwTGpjeU5UWXhMQzB5TGpNek5EVTFJRGN1TlRFMk16TXNMVEl1TXpNME5UVmpOeTR6TWpNek55d3dJREV6TGpJMk1qRTRMRFV1T1RNNE9ESWdNVE11TWpZeU1UZ3NNVE11TWpZd01qSmpNQ3d5TGpjNU1Ea2dMVEF1T0RZeU5USXNOUzR6T0RBM01TQXRNaTR6TXpVME55dzNMalV4TnpNM2JERXhMalkzTlRjMUxERXhMalkzTlRjMVl6QXVPVFF3TnpFc01DNDVOREEzTVNBd0xqazBNRGN4TERJdU5EWTROaklnTUN3ekxqUXdPVE16WXkwd0xqUTNNVE16TERBdU5EWTVNemNnTFRFdU1EZzNPVGtzTUM0M01EWTVPU0F0TVM0M01EUTJOU3d3TGpjd05qazVhQzB3TGpBd01EQXhZeTB3TGpZeE5qWTNMREFnTFRFdU1qTXpNeklzTFRBdU1qTTFOallnTFRFdU56QTBOalVzTFRBdU56QTFNRFJzTFRBdU1EQXdNRElzTUM0d01EQXdNV3d0TVRFdU5qYzJOamtzTFRFeExqWTNOekEzWXkweUxqRXpOalE0TERFdU5EY3lOVFlnTFRRdU56STFPVFVzTWk0ek16UTRNeUF0Tnk0MU1UWTBOQ3d5TGpNek5EZ3pZeTAzTGpNeU16TTNMREFnTFRFekxqSTJNREl5TEMwMUxqa3pPRGd4SUMweE15NHlOakF5TWl3dE1UTXVNall5TVRoak1Dd3RNaTQzT1RBME9DQXdMamcyTVRrM0xDMDFMak0zT1RZMElESXVNek0wTVRZc0xUY3VOVEUxTnpac0xURXdMalE1TURBNUxDMHhNQzQwT1RBME0yTXRNaTR4TXpZeE5pd3hMalEzTWpJNElDMDBMamN5TlRRc01pNHpNelF5T1NBdE55NDFNVFU1TlN3eUxqTXpOREk1ZWlJdlBqeHdZWFJvSUdROUlrMHlOamt1TkRjM01ETXNNakUwTGpjd05EVXhiQzB3TGpVM01UazJMQzB3TGpVM01UazRiQzB4TkM0eE9UWTFNU3d0TVRRdU1UazJOVEZqTFRBdU1ERXdNU3d0TUM0d01UQXdPQ0F0TUM0d01qQXdPQ3d0TUM0d01qQXlNaUF0TUM0d01qazVOaXd0TUM0d016QTBNMnd0TWpVdU9ERXdPRFVzTFRJMUxqZ3hNVFk1WXkweUxqRXpOakUyTERFdU5EY3lNamdnTFRRdU56STFOQ3d5TGpNek5ETWdMVGN1TlRFMU9UVXNNaTR6TXpRell5MDNMak15TXpNM0xEQWdMVEV6TGpJMk1ESXlMQzAxTGprek5qZzFJQzB4TXk0eU5qQXlNaXd0TVRNdU1qWXdNakpqTUN3dE1pNDNPVEEzTVNBd0xqZzJNakV5TEMwMUxqTTRNREEzSURJdU16TTBOVFFzTFRjdU5URTJNekZzTFRFdU1USTBOemdzTFRFdU1USTBPREpqTFRBdU5EY3dNellzTFRBdU5EY3dNellnTFRBdU56QTFOVE1zTFRFdU1EZzNOVEVnTFRBdU56QTFOVE1zTFRFdU56QTBOalpqTUN3dE1DNDJNVGN4TlNBd0xqSXpOVEU0TEMweExqSXpORE14SURBdU56QTFOVE1zTFRFdU56QTBOalpqTUM0NU5EQTNNU3d0TUM0NU5EQTNNU0F5TGpRMk9EWXlMQzB3TGprME1EY3hJRE11TkRBNU16TXNNR3d4TGpFeU5EZ3NNUzR4TWpRNFl6SXVNVE0yTWpNc0xURXVORGN5TkRRZ05DNDNNalUyTVN3dE1pNHpNelExTnlBM0xqVXhOak0wTEMweUxqTXpORFUzWXpjdU16SXpNemNzTUNBeE15NHlOakF5TWl3MUxqa3pOamcxSURFekxqSTJNREl5TERFekxqSTJNREl5WXpBc01pNDNPVEEzTXlBdE1DNDROakl4TXl3MUxqTTRNREVnTFRJdU16TTBOVGNzTnk0MU1UWXpOR3cwTUM0Mk1EZzVMRFF3TGpZd09EbGpNQzQ1TkRBM01Td3dMamswTURjeElEQXVPVFF3TnpFc01pNDBOamcyTWlBd0xETXVOREE1TXpOakxUQXVORGN4TXpNc01DNDBOamt6TnlBdE1TNHdPRGM1T1N3d0xqY3dOams1SUMweExqY3dORFkxTERBdU56QTJPVGxvTFRBdU1EQXdNREZqTFRBdU5qRTJOamNzTUNBdE1TNHlNek16TWl3dE1DNHlNelUyTmlBdE1TNDNNRFEyTlN3dE1DNDNNRFV3TkhvaUx6NDhMMmMrUEdjZ1ptbHNiRDBpSTJabVptWm1aaUlnWm1sc2JDMXlkV3hsUFNKbGRtVnViMlJrSWlCemRISnZhMlU5SW01dmJtVWlJSE4wY205clpTMTNhV1IwYUQwaU1TSStQSEJoZEdnZ1pEMGlUVEl6TlM0Mk5qZzRNeXd4TkRBdU5EWTROV013TGpZNE56TXlMQzB4TGpJMk9ESTFJREF1TmpRMk1qY3NMVEl1T0RBMk5UTWdMVEF1TVRBM056SXNMVFF1TURNMk16RnNMVEV1TnpFeU56VXNMVEl1TnprM01UTmpMVEF1T0RBNE16WXNMVEV1TXpJek55QXdMalkxTXpBM0xDMHlMamcyTlRJNElESXVNREUyTXprc0xUSXVNVEkyT1Rac01pNDRPRFl4TVN3eExqVTFPVFJqTVM0eU5qZ3lOU3d3TGpZNE56TXlJREl1T0RBMk5UTXNNQzQyTkRZeU55QTBMakF6TkRjc0xUQXVNVEEyYkRJdU56azNNVE1zTFRFdU56RXlOelZqTVM0ek1qTTNMQzB3TGpnd09ETTJJREl1T0RZMU1qa3NNQzQyTlRNd055QXlMakV5T0RZNExESXVNREU0TURGc0xURXVOVFl4TVRJc01pNDRPRFExWXkwd0xqWTROVFk1TERFdU1qWTJOVFFnTFRBdU5qUTBOalFzTWk0NE1EUTRNaUF3TGpFd056WXpMRFF1TURNeU9UaHNNUzQzTVRFeE15d3lMamM1T0RnMVl6QXVPREE1T1Rrc01TNHpNakU1T1NBdE1DNDJOVEUwTlN3eUxqZzJNelUzSUMweUxqQXhOak01TERJdU1USTJPVFpzTFRJdU9EZzBOVEVzTFRFdU5UWXhNVE5qTFRFdU1qWTJOVFFzTFRBdU5qZzFOamtnTFRJdU9EQTBPREVzTFRBdU5qUTBOak1nTFRRdU1ETTBOaXd3TGpFd09UTTFiQzB5TGpjNU56RXhMREV1TnpFeU56UmpMVEV1TXpJek55d3dMamd3T0RNMklDMHlMamcyTlRJNUxDMHdMalkxTXpBM0lDMHlMakV5T0RZM0xDMHlMakF4T0RBeGVpSXZQand2Wno0OEwyYytQQzluUGp3dmMzWm5QZz09IjsKCiAgY29uc3Qgdm0gPSBTY3JhdGNoLnZtOwogIGNvbnN0IHJ1bnRpbWUgPSB2bS5ydW50aW1lOwogIFNjcmF0Y2gudm0uZXh0ZW5zaW9uTWFuYWdlci5sb2FkRXh0ZW5zaW9uVVJMKCJodHRwczovL2V4dGVuc2lvbnMudHVyYm93YXJwLm9yZy9MaWx5L1NraW5zLmpzIik7CgogIGxldCBzcHJpdGUgPSB0cnVlOwogIGxldCBuYW1lT2Zmc2V0ID0gMDsKICBsZXQgYWxsRmlsdGVycyA9IFtdOwogIGxldCBkaXNwbGFjZW1lbnRTckNzID0gW107CiAgbGV0IG1hc2tPcHRpb25zID0gWzAsIDAsIDEwMF07CgogIC8vIFRoaXMgZnVuY3Rpb24gd2FzIHJpcHBlZCBmcm9tIExvb2tzIFBsdXMgYnkgTGlseQogIGNvbnN0IHJlcXVpcmVOb25QYWNrYWdlZFJ1bnRpbWUgPSAoKSA9PiB7CiAgICBpZiAocnVudGltZS5pc1BhY2thZ2VkKSB7CiAgICAgIGFsZXJ0KGBUbyB1c2UgdGhpcyBibG9jaywgdGhlIGNyZWF0b3Igb2YgdGhlIHBhY2thZ2VkIHByb2plY3QgbXVzdCB1bmNoZWNrICJSZW1vdmUgcmF3IGFzc2V0IGRhdGEgYWZ0ZXIgbG9hZGluZyB0byBzYXZlIFJBTSIgdW5kZXIgYWR2YW5jZWQgc2V0dGluZ3MgaW4gdGhlIHBhY2thZ2VyLmApOwogICAgICByZXR1cm4gZmFsc2U7CiAgICB9CiAgICByZXR1cm4gdHJ1ZTsKICB9OwoKICBjbGFzcyBTUHNwcml0ZUVmZmVjdHMgewogICAgZ2V0SW5mbygpIHsKICAgICAgcmV0dXJuIHsKICAgICAgICBpZDogIlNQc3ByaXRlRWZmZWN0cyIsCiAgICAgICAgbmFtZTogIlNwcml0ZSBFZmZlY3RzIiwKICAgICAgICBjb2xvcjE6ICIjOTk2NkZGIiwKICAgICAgICBjb2xvcjI6ICIjNzc0RENCIiwKICAgICAgICBtZW51SWNvblVSSSwKICAgICAgICBibG9ja3M6IFsKICAgICAgICAgIHsKICAgICAgICAgICAgZnVuYzogInNvdXJjZVN3aXRjaCIsCiAgICAgICAgICAgIGJsb2NrVHlwZTogU2NyYXRjaC5CbG9ja1R5cGUuQlVUVE9OLAogICAgICAgICAgICB0ZXh0OiAiU3dpdGNoIEVmZmVjdCBTb3VyY2VzIgogICAgICAgICAgfSwKICAgICAgICAgIHsgYmxvY2tUeXBlOiBTY3JhdGNoLkJsb2NrVHlwZS5MQUJFTCwgdGV4dDogIkZpbHRlcnMgYW5kIEVmZmVjdHMiIH0sCiAgICAgICAgICB7CiAgICAgICAgICAgIG9wY29kZTogInNldFNwcml0ZUJsZW5kIiwKICAgICAgICAgICAgYmxvY2tUeXBlOiBTY3JhdGNoLkJsb2NrVHlwZS5SRVBPUlRFUiwKICAgICAgICAgICAgdGV4dDogInNldCBibGVuZCBtb2RlIG9mIFtTUFJJVEVdIHRvIFtCTEVORF0iLAogICAgICAgICAgICBoaWRlRnJvbVBhbGV0dGU6ICFzcHJpdGUsCiAgICAgICAgICAgIGFyZ3VtZW50czogewogICAgICAgICAgICAgIFNQUklURTogeyB0eXBlOiBTY3JhdGNoLkFyZ3VtZW50VHlwZS5TVFJJTkcsIG1lbnU6ICJUQVJHRVRTIiB9LAogICAgICAgICAgICAgIEJMRU5EOiB7IHR5cGU6IFNjcmF0Y2guQXJndW1lbnRUeXBlLlNUUklORywgbWVudTogIkJMRU5ESU5HIiB9LAogICAgICAgICAgICB9LAogICAgICAgICAgfSwKICAgICAgICAgIHsKICAgICAgICAgICAgb3Bjb2RlOiAic2V0SW1hZ2VCbGVuZCIsCiAgICAgICAgICAgIGJsb2NrVHlwZTogU2NyYXRjaC5CbG9ja1R5cGUuUkVQT1JURVIsCiAgICAgICAgICAgIHRleHQ6ICJzZXQgYmxlbmQgbW9kZSBvZiBbU1BSSVRFXSB0byBbQkxFTkRdIiwKICAgICAgICAgICAgaGlkZUZyb21QYWxldHRlOiBzcHJpdGUsCiAgICAgICAgICAgIGFyZ3VtZW50czogewogICAgICAgICAgICAgIFNQUklURTogeyB0eXBlOiBTY3JhdGNoLkFyZ3VtZW50VHlwZS5TVFJJTkcsIGRlZmF1bHRWYWx1ZTogImRhdGEgVVJJIG9yIDxzdmcgY29udGVudD4iIH0sCiAgICAgICAgICAgICAgQkxFTkQ6IHsgdHlwZTogU2NyYXRjaC5Bcmd1bWVudFR5cGUuU1RSSU5HLCBtZW51OiAiQkxFTkRJTkciIH0sCiAgICAgICAgICAgIH0sCiAgICAgICAgICB9LAogICAgICAgICAgewogICAgICAgICAgICBvcGNvZGU6ICJzZXRTcHJpdGVFZmZlY3QiLAogICAgICAgICAgICBibG9ja1R5cGU6IFNjcmF0Y2guQmxvY2tUeXBlLlJFUE9SVEVSLAogICAgICAgICAgICB0ZXh0OiAiYXBwbHkgW0VGRkVDVF0gZWZmZWN0IHRvIFtTUFJJVEVdIGF0IFtOVU1dJSIsCiAgICAgICAgICAgIGhpZGVGcm9tUGFsZXR0ZTogIXNwcml0ZSwKICAgICAgICAgICAgYXJndW1lbnRzOiB7CiAgICAgICAgICAgICAgU1BSSVRFOiB7IHR5cGU6IFNjcmF0Y2guQXJndW1lbnRUeXBlLlNUUklORywgbWVudTogIlRBUkdFVFMiIH0sCiAgICAgICAgICAgICAgRUZGRUNUOiB7IHR5cGU6IFNjcmF0Y2guQXJndW1lbnRUeXBlLlNUUklORywgbWVudTogIkVGRkVDVFMiIH0sCiAgICAgICAgICAgICAgTlVNOiB7IHR5cGU6IFNjcmF0Y2guQXJndW1lbnRUeXBlLk5VTUJFUiwgZGVmYXVsdFZhbHVlOiAxNSB9CiAgICAgICAgICAgIH0sCiAgICAgICAgICB9LAogICAgICAgICAgewogICAgICAgICAgICBvcGNvZGU6ICJzZXRJbWFnZUVmZmVjdCIsCiAgICAgICAgICAgIGJsb2NrVHlwZTogU2NyYXRjaC5CbG9ja1R5cGUuUkVQT1JURVIsCiAgICAgICAgICAgIHRleHQ6ICJhcHBseSBbRUZGRUNUXSBlZmZlY3QgdG8gW1NQUklURV0gYXQgW05VTV0lIiwKICAgICAgICAgICAgaGlkZUZyb21QYWxldHRlOiBzcHJpdGUsCiAgICAgICAgICAgIGFyZ3VtZW50czogewogICAgICAgICAgICAgIFNQUklURTogeyB0eXBlOiBTY3JhdGNoLkFyZ3VtZW50VHlwZS5TVFJJTkcsIGRlZmF1bHRWYWx1ZTogImRhdGEgVVJJIG9yIDxzdmcgY29udGVudD4iIH0sCiAgICAgICAgICAgICAgRUZGRUNUOiB7IHR5cGU6IFNjcmF0Y2guQXJndW1lbnRUeXBlLlNUUklORywgbWVudTogIkVGRkVDVFMiIH0sCiAgICAgICAgICAgICAgTlVNOiB7IHR5cGU6IFNjcmF0Y2guQXJndW1lbnRUeXBlLk5VTUJFUiwgZGVmYXVsdFZhbHVlOiAxNSB9CiAgICAgICAgICAgIH0sCiAgICAgICAgICB9LAogICAgICAgICAgewogICAgICAgICAgICBvcGNvZGU6ICJzZXRTcHJpdGVNb3Rpb24iLAogICAgICAgICAgICBibG9ja1R5cGU6IFNjcmF0Y2guQmxvY2tUeXBlLlJFUE9SVEVSLAogICAgICAgICAgICB0ZXh0OiAiYXBwbHkgbW90aW9uIGJsdXIgdG8gW1NQUklURV0gYXQgeCBbWF0geSBbWV0iLAogICAgICAgICAgICBoaWRlRnJvbVBhbGV0dGU6ICFzcHJpdGUsCiAgICAgICAgICAgIGFyZ3VtZW50czogewogICAgICAgICAgICAgIFNQUklURTogeyB0eXBlOiBTY3JhdGNoLkFyZ3VtZW50VHlwZS5TVFJJTkcsIG1lbnU6ICJUQVJHRVRTIiB9LAogICAgICAgICAgICAgIFg6IHsgdHlwZTogU2NyYXRjaC5Bcmd1bWVudFR5cGUuTlVNQkVSLCBkZWZhdWx0VmFsdWU6IDE1IH0sCiAgICAgICAgICAgICAgWTogeyB0eXBlOiBTY3JhdGNoLkFyZ3VtZW50VHlwZS5OVU1CRVIsIGRlZmF1bHRWYWx1ZTogMCB9CiAgICAgICAgICAgIH0sCiAgICAgICAgICB9LAogICAgICAgICAgewogICAgICAgICAgICBvcGNvZGU6ICJzZXRJbWFnZU1vdGlvbiIsCiAgICAgICAgICAgIGJsb2NrVHlwZTogU2NyYXRjaC5CbG9ja1R5cGUuUkVQT1JURVIsCiAgICAgICAgICAgIHRleHQ6ICJhcHBseSBtb3Rpb24gYmx1ciB0byBbU1BSSVRFXSBhdCB4IFtYXSUgeSBbWV0lIiwKICAgICAgICAgICAgaGlkZUZyb21QYWxldHRlOiBzcHJpdGUsCiAgICAgICAgICAgIGFyZ3VtZW50czogewogICAgICAgICAgICAgIFNQUklURTogeyB0eXBlOiBTY3JhdGNoLkFyZ3VtZW50VHlwZS5TVFJJTkcsIGRlZmF1bHRWYWx1ZTogImRhdGEgVVJJIG9yIDxzdmcgY29udGVudD4iIH0sCiAgICAgICAgICAgICAgWDogeyB0eXBlOiBTY3JhdGNoLkFyZ3VtZW50VHlwZS5OVU1CRVIsIGRlZmF1bHRWYWx1ZTogMTUgfSwKICAgICAgICAgICAgICBZOiB7IHR5cGU6IFNjcmF0Y2guQXJndW1lbnRUeXBlLk5VTUJFUiwgZGVmYXVsdFZhbHVlOiAwIH0KICAgICAgICAgICAgfSwKICAgICAgICAgIH0sCiAgICAgICAgICB7CiAgICAgICAgICAgIG9wY29kZTogImh1ZVNwcml0ZSIsCiAgICAgICAgICAgIGJsb2NrVHlwZTogU2NyYXRjaC5CbG9ja1R5cGUuUkVQT1JURVIsCiAgICAgICAgICAgIHRleHQ6ICJhcHBseSBodWUgW0NPTE9SXSB0byBbU1BSSVRFXSIsCiAgICAgICAgICAgIGhpZGVGcm9tUGFsZXR0ZTogIXNwcml0ZSwKICAgICAgICAgICAgYXJndW1lbnRzOiB7CiAgICAgICAgICAgICAgQ09MT1I6IHsgdHlwZTogU2NyYXRjaC5Bcmd1bWVudFR5cGUuQ09MT1IsIGRlZmF1bHRWYWx1ZTogIiNmZjAwMDAiIH0sCiAgICAgICAgICAgICAgU1BSSVRFOiB7IHR5cGU6IFNjcmF0Y2guQXJndW1lbnRUeXBlLlNUUklORywgbWVudTogIlRBUkdFVFMiIH0KICAgICAgICAgICAgfSwKICAgICAgICAgIH0sCiAgICAgICAgICB7CiAgICAgICAgICAgIG9wY29kZTogImh1ZUltYWdlIiwKICAgICAgICAgICAgYmxvY2tUeXBlOiBTY3JhdGNoLkJsb2NrVHlwZS5SRVBPUlRFUiwKICAgICAgICAgICAgdGV4dDogImFwcGx5IGh1ZSBbQ09MT1JdIHRvIFtTUFJJVEVdIiwKICAgICAgICAgICAgaGlkZUZyb21QYWxldHRlOiBzcHJpdGUsCiAgICAgICAgICAgIGFyZ3VtZW50czogewogICAgICAgICAgICAgIENPTE9SOiB7IHR5cGU6IFNjcmF0Y2guQXJndW1lbnRUeXBlLkNPTE9SLCBkZWZhdWx0VmFsdWU6ICIjZmYwMDAwIiB9LAogICAgICAgICAgICAgIFNQUklURTogeyB0eXBlOiBTY3JhdGNoLkFyZ3VtZW50VHlwZS5TVFJJTkcsIGRlZmF1bHRWYWx1ZTogImRhdGEgVVJJIG9yIDxzdmcgY29udGVudD4iIH0KICAgICAgICAgICAgfSwKICAgICAgICAgIH0sCiAgICAgICAgICB7CiAgICAgICAgICAgIG9wY29kZTogInNwbGl0U3ByaXRlIiwKICAgICAgICAgICAgYmxvY2tUeXBlOiBTY3JhdGNoLkJsb2NrVHlwZS5SRVBPUlRFUiwKICAgICAgICAgICAgdGV4dDogImFwcGx5IFtFRkZFQ1RdIGVmZmVjdCB0byBbU1BSSVRFXSBhdCB4IFtYXSB5IFtZXSB3aXRoIGNvbG9ycyBbQ09MT1IxXSBbQ09MT1IyXSBhbmQgW0NPTE9SM10iLAogICAgICAgICAgICBoaWRlRnJvbVBhbGV0dGU6ICFzcHJpdGUsCiAgICAgICAgICAgIGFyZ3VtZW50czogewogICAgICAgICAgICAgIFNQUklURTogeyB0eXBlOiBTY3JhdGNoLkFyZ3VtZW50VHlwZS5TVFJJTkcsIG1lbnU6ICJUQVJHRVRTIiB9LAogICAgICAgICAgICAgIENPTE9SMTogeyB0eXBlOiBTY3JhdGNoLkFyZ3VtZW50VHlwZS5DT0xPUiwgZGVmYXVsdFZhbHVlOiAiI2ZmMDAwMCIgfSwKICAgICAgICAgICAgICBDT0xPUjI6IHsgdHlwZTogU2NyYXRjaC5Bcmd1bWVudFR5cGUuQ09MT1IsIGRlZmF1bHRWYWx1ZTogIiMwMGZmMDAiIH0sCiAgICAgICAgICAgICAgQ09MT1IzOiB7IHR5cGU6IFNjcmF0Y2guQXJndW1lbnRUeXBlLkNPTE9SLCBkZWZhdWx0VmFsdWU6ICIjMDAwMGZmIiB9LAogICAgICAgICAgICAgIEVGRkVDVDogeyB0eXBlOiBTY3JhdGNoLkFyZ3VtZW50VHlwZS5TVFJJTkcsIG1lbnU6ICJTUExJVFRJTkciIH0sCiAgICAgICAgICAgICAgWDogeyB0eXBlOiBTY3JhdGNoLkFyZ3VtZW50VHlwZS5OVU1CRVIsIGRlZmF1bHRWYWx1ZTogMTUgfSwKICAgICAgICAgICAgICBZOiB7IHR5cGU6IFNjcmF0Y2guQXJndW1lbnRUeXBlLk5VTUJFUiwgZGVmYXVsdFZhbHVlOiAwIH0KICAgICAgICAgICAgfSwKICAgICAgICAgIH0sCiAgICAgICAgICB7CiAgICAgICAgICAgIG9wY29kZTogInNwbGl0SW1hZ2UiLAogICAgICAgICAgICBibG9ja1R5cGU6IFNjcmF0Y2guQmxvY2tUeXBlLlJFUE9SVEVSLAogICAgICAgICAgICB0ZXh0OiAiYXBwbHkgW0VGRkVDVF0gZWZmZWN0IHRvIFtTUFJJVEVdIGF0IHggW1hdIHkgW1ldIHdpdGggY29sb3JzIFtDT0xPUjFdIFtDT0xPUjJdIGFuZCBbQ09MT1IzXSIsCiAgICAgICAgICAgIGhpZGVGcm9tUGFsZXR0ZTogc3ByaXRlLAogICAgICAgICAgICBhcmd1bWVudHM6IHsKICAgICAgICAgICAgICBTUFJJVEU6IHsgdHlwZTogU2NyYXRjaC5Bcmd1bWVudFR5cGUuU1RSSU5HLCBkZWZhdWx0VmFsdWU6ICJkYXRhIFVSSSBvciA8c3ZnIGNvbnRlbnQ+IiB9LAogICAgICAgICAgICAgIENPTE9SMTogeyB0eXBlOiBTY3JhdGNoLkFyZ3VtZW50VHlwZS5DT0xPUiwgZGVmYXVsdFZhbHVlOiAiI2ZmMDAwMCIgfSwKICAgICAgICAgICAgICBDT0xPUjI6IHsgdHlwZTogU2NyYXRjaC5Bcmd1bWVudFR5cGUuQ09MT1IsIGRlZmF1bHRWYWx1ZTogIiMwMGZmMDAiIH0sCiAgICAgICAgICAgICAgQ09MT1IzOiB7IHR5cGU6IFNjcmF0Y2guQXJndW1lbnRUeXBlLkNPTE9SLCBkZWZhdWx0VmFsdWU6ICIjMDAwMGZmIiB9LAogICAgICAgICAgICAgIEVGRkVDVDogeyB0eXBlOiBTY3JhdGNoLkFyZ3VtZW50VHlwZS5TVFJJTkcsIG1lbnU6ICJTUExJVFRJTkciIH0sCiAgICAgICAgICAgICAgWDogeyB0eXBlOiBTY3JhdGNoLkFyZ3VtZW50VHlwZS5OVU1CRVIsIGRlZmF1bHRWYWx1ZTogMTUgfSwKICAgICAgICAgICAgICBZOiB7IHR5cGU6IFNjcmF0Y2guQXJndW1lbnRUeXBlLk5VTUJFUiwgZGVmYXVsdFZhbHVlOiAwIH0KICAgICAgICAgICAgfSwKICAgICAgICAgIH0sCiAgICAgICAgICB7CiAgICAgICAgICAgIG9wY29kZTogImFwcGx5Q3VzdG9tU3ByaXRlIiwKICAgICAgICAgICAgYmxvY2tUeXBlOiBTY3JhdGNoLkJsb2NrVHlwZS5SRVBPUlRFUiwKICAgICAgICAgICAgdGV4dDogImFwcGx5IFtFRkZFQ1RdIGVmZmVjdCB3aXRoIElEIFtJRF0gdG8gW1NQUklURV0iLAogICAgICAgICAgICBoaWRlRnJvbVBhbGV0dGU6ICFzcHJpdGUsCiAgICAgICAgICAgIGFyZ3VtZW50czogewogICAgICAgICAgICAgIEVGRkVDVDogeyB0eXBlOiBTY3JhdGNoLkFyZ3VtZW50VHlwZS5TVFJJTkcsIGRlZmF1bHRWYWx1ZTogImN1c3RvbS1zdmctZmlsdGVyIiB9LAogICAgICAgICAgICAgIElEOiB7IHR5cGU6IFNjcmF0Y2guQXJndW1lbnRUeXBlLlNUUklORywgZGVmYXVsdFZhbHVlOiAibXktZmlsdGVyIiB9LAogICAgICAgICAgICAgIFNQUklURTogeyB0eXBlOiBTY3JhdGNoLkFyZ3VtZW50VHlwZS5TVFJJTkcsIG1lbnU6ICJUQVJHRVRTIiB9CiAgICAgICAgICAgIH0sCiAgICAgICAgICB9LAogICAgICAgICAgewogICAgICAgICAgICBvcGNvZGU6ICJhcHBseUN1c3RvbUltYWdlIiwKICAgICAgICAgICAgYmxvY2tUeXBlOiBTY3JhdGNoLkJsb2NrVHlwZS5SRVBPUlRFUiwKICAgICAgICAgICAgdGV4dDogImFwcGx5IFtFRkZFQ1RdIGVmZmVjdCB3aXRoIElEIFtJRF0gdG8gW1NQUklURV0iLAogICAgICAgICAgICBoaWRlRnJvbVBhbGV0dGU6IHNwcml0ZSwKICAgICAgICAgICAgYXJndW1lbnRzOiB7CiAgICAgICAgICAgICAgRUZGRUNUOiB7IHR5cGU6IFNjcmF0Y2guQXJndW1lbnRUeXBlLlNUUklORywgZGVmYXVsdFZhbHVlOiAiY3VzdG9tLXN2Zy1maWx0ZXIiIH0sCiAgICAgICAgICAgICAgSUQ6IHsgdHlwZTogU2NyYXRjaC5Bcmd1bWVudFR5cGUuU1RSSU5HLCBkZWZhdWx0VmFsdWU6ICJteS1maWx0ZXIiIH0sCiAgICAgICAgICAgICAgU1BSSVRFOiB7IHR5cGU6IFNjcmF0Y2guQXJndW1lbnRUeXBlLlNUUklORywgZGVmYXVsdFZhbHVlOiAiZGF0YSBVUkkgb3IgPHN2ZyBjb250ZW50PiIgfQogICAgICAgICAgICB9LAogICAgICAgICAgfSwKICAgICAgICAgICItLS0iLAogICAgICAgICAgewogICAgICAgICAgICBvcGNvZGU6ICJ3YXZlU3ByaXRlIiwKICAgICAgICAgICAgYmxvY2tUeXBlOiBTY3JhdGNoLkJsb2NrVHlwZS5SRVBPUlRFUiwKICAgICAgICAgICAgdGV4dDogImFwcGx5IHdhdmUgZWZmZWN0IHRvIFtTUFJJVEVdIG9uIFtheGlzXSB3aXRoIHNlZWQgW1NFRURdIGF0IHggW05VTV0geSBbWV0iLAogICAgICAgICAgICBoaWRlRnJvbVBhbGV0dGU6ICFzcHJpdGUsCiAgICAgICAgICAgIGFyZ3VtZW50czogewogICAgICAgICAgICAgIGF4aXM6IHsgdHlwZTogU2NyYXRjaC5Bcmd1bWVudFR5cGUuU1RSSU5HLCBtZW51OiAiQVhJU0VTIiB9LAogICAgICAgICAgICAgIFNQUklURTogeyB0eXBlOiBTY3JhdGNoLkFyZ3VtZW50VHlwZS5TVFJJTkcsIG1lbnU6ICJUQVJHRVRTIiB9LAogICAgICAgICAgICAgIE5VTTogeyB0eXBlOiBTY3JhdGNoLkFyZ3VtZW50VHlwZS5OVU1CRVIsIGRlZmF1bHRWYWx1ZTogNSB9LAogICAgICAgICAgICAgIFk6IHsgdHlwZTogU2NyYXRjaC5Bcmd1bWVudFR5cGUuTlVNQkVSLCBkZWZhdWx0VmFsdWU6IDUgfSwKICAgICAgICAgICAgICBTRUVEOiB7IHR5cGU6IFNjcmF0Y2guQXJndW1lbnRUeXBlLk5VTUJFUiwgZGVmYXVsdFZhbHVlOiAxIH0KICAgICAgICAgICAgfSwKICAgICAgICAgIH0sCiAgICAgICAgICB7CiAgICAgICAgICAgIG9wY29kZTogIndhdmVJbWFnZSIsCiAgICAgICAgICAgIGJsb2NrVHlwZTogU2NyYXRjaC5CbG9ja1R5cGUuUkVQT1JURVIsCiAgICAgICAgICAgIHRleHQ6ICJhcHBseSB3YXZlIGVmZmVjdCB0byBbU1BSSVRFXSBvbiBbYXhpc10gd2l0aCBzZWVkIFtTRUVEXSBhdCBbTlVNXSB5IFtZXSIsCiAgICAgICAgICAgIGhpZGVGcm9tUGFsZXR0ZTogc3ByaXRlLAogICAgICAgICAgICBhcmd1bWVudHM6IHsKICAgICAgICAgICAgICBTUFJJVEU6IHsgdHlwZTogU2NyYXRjaC5Bcmd1bWVudFR5cGUuU1RSSU5HLCBkZWZhdWx0VmFsdWU6ICJkYXRhIFVSSSBvciA8c3ZnIGNvbnRlbnQ+IiB9LAogICAgICAgICAgICAgIGF4aXM6IHsgdHlwZTogU2NyYXRjaC5Bcmd1bWVudFR5cGUuU1RSSU5HLCBtZW51OiAiQVhJU0VTIiB9LAogICAgICAgICAgICAgIE5VTTogeyB0eXBlOiBTY3JhdGNoLkFyZ3VtZW50VHlwZS5OVU1CRVIsIGRlZmF1bHRWYWx1ZTogNSB9LAogICAgICAgICAgICAgIFk6IHsgdHlwZTogU2NyYXRjaC5Bcmd1bWVudFR5cGUuTlVNQkVSLCBkZWZhdWx0VmFsdWU6IDUgfSwKICAgICAgICAgICAgICBTRUVEOiB7IHR5cGU6IFNjcmF0Y2guQXJndW1lbnRUeXBlLk5VTUJFUiwgZGVmYXVsdFZhbHVlOiAxIH0KICAgICAgICAgICAgfSwKICAgICAgICAgIH0sCiAgICAgICAgICB7CiAgICAgICAgICAgIG9wY29kZTogImdsaXRjaFNwcml0ZSIsCiAgICAgICAgICAgIGJsb2NrVHlwZTogU2NyYXRjaC5CbG9ja1R5cGUuUkVQT1JURVIsCiAgICAgICAgICAgIHRleHQ6ICJhcHBseSBnbGl0Y2ggZWZmZWN0IHRvIFtTUFJJVEVdIHdpdGggb2Zmc2V0IHggW1hdIHkgW1ldIHRoaWNrbmVzcyBbTlVNXSBvbiBbYXhpc10iLAogICAgICAgICAgICBoaWRlRnJvbVBhbGV0dGU6ICFzcHJpdGUsCiAgICAgICAgICAgIGFyZ3VtZW50czogewogICAgICAgICAgICAgIGF4aXM6IHsgdHlwZTogU2NyYXRjaC5Bcmd1bWVudFR5cGUuU1RSSU5HLCBtZW51OiAiQVhJU0VTIiB9LAogICAgICAgICAgICAgIFNQUklURTogeyB0eXBlOiBTY3JhdGNoLkFyZ3VtZW50VHlwZS5TVFJJTkcsIG1lbnU6ICJUQVJHRVRTMiIgfSwKICAgICAgICAgICAgICBOVU06IHsgdHlwZTogU2NyYXRjaC5Bcmd1bWVudFR5cGUuTlVNQkVSLCBkZWZhdWx0VmFsdWU6IDUgfSwKICAgICAgICAgICAgICBYOiB7IHR5cGU6IFNjcmF0Y2guQXJndW1lbnRUeXBlLk5VTUJFUiwgZGVmYXVsdFZhbHVlOiAxMCB9LAogICAgICAgICAgICAgIFk6IHsgdHlwZTogU2NyYXRjaC5Bcmd1bWVudFR5cGUuTlVNQkVSLCBkZWZhdWx0VmFsdWU6IDAgfQogICAgICAgICAgICB9LAogICAgICAgICAgfSwKICAgICAgICAgIHsKICAgICAgICAgICAgb3Bjb2RlOiAiZ2xpdGNoSW1hZ2UiLAogICAgICAgICAgICBibG9ja1R5cGU6IFNjcmF0Y2guQmxvY2tUeXBlLlJFUE9SVEVSLAogICAgICAgICAgICB0ZXh0OiAiYXBwbHkgZ2xpdGNoIGVmZmVjdCB0byBbU1BSSVRFXSB3aXRoIG9mZnNldCB4IFtYXSB5IFtZXSB0aGlja25lc3MgW05VTV0gb24gW2F4aXNdIiwKICAgICAgICAgICAgaGlkZUZyb21QYWxldHRlOiBzcHJpdGUsCiAgICAgICAgICAgIGFyZ3VtZW50czogewogICAgICAgICAgICAgIFNQUklURTogeyB0eXBlOiBTY3JhdGNoLkFyZ3VtZW50VHlwZS5TVFJJTkcsIGRlZmF1bHRWYWx1ZTogImRhdGEgVVJJIG9yIDxzdmcgY29udGVudD4iIH0sCiAgICAgICAgICAgICAgYXhpczogeyB0eXBlOiBTY3JhdGNoLkFyZ3VtZW50VHlwZS5TVFJJTkcsIG1lbnU6ICJBWElTRVMiIH0sCiAgICAgICAgICAgICAgTlVNOiB7IHR5cGU6IFNjcmF0Y2guQXJndW1lbnRUeXBlLk5VTUJFUiwgZGVmYXVsdFZhbHVlOiA1IH0sCiAgICAgICAgICAgICAgWDogeyB0eXBlOiBTY3JhdGNoLkFyZ3VtZW50VHlwZS5OVU1CRVIsIGRlZmF1bHRWYWx1ZTogMTAgfSwKICAgICAgICAgICAgICBZOiB7IHR5cGU6IFNjcmF0Y2guQXJndW1lbnRUeXBlLk5VTUJFUiwgZGVmYXVsdFZhbHVlOiAwIH0KICAgICAgICAgICAgfSwKICAgICAgICAgIH0sCiAgICAgICAgICB7CiAgICAgICAgICAgIG9wY29kZTogInRpbGVTcHJpdGUiLAogICAgICAgICAgICBibG9ja1R5cGU6IFNjcmF0Y2guQmxvY2tUeXBlLlJFUE9SVEVSLAogICAgICAgICAgICB0ZXh0OiAiYXBwbHkgbW9zYWljIGVmZmVjdCB0byBbU1BSSVRFXSBhdCB4IFt4XSB5IFt5XSBzaXplIFtOVU1dJSIsCiAgICAgICAgICAgIGhpZGVGcm9tUGFsZXR0ZTogIXNwcml0ZSwKICAgICAgICAgICAgYXJndW1lbnRzOiB7CiAgICAgICAgICAgICAgU1BSSVRFOiB7IHR5cGU6IFNjcmF0Y2guQXJndW1lbnRUeXBlLlNUUklORywgbWVudTogIlRBUkdFVFMiIH0sCiAgICAgICAgICAgICAgTlVNOiB7IHR5cGU6IFNjcmF0Y2guQXJndW1lbnRUeXBlLk5VTUJFUiwgZGVmYXVsdFZhbHVlOiAxNSB9LAogICAgICAgICAgICAgIHg6IHsgdHlwZTogU2NyYXRjaC5Bcmd1bWVudFR5cGUuTlVNQkVSLCBkZWZhdWx0VmFsdWU6IDAgfSwKICAgICAgICAgICAgICB5OiB7IHR5cGU6IFNjcmF0Y2guQXJndW1lbnRUeXBlLk5VTUJFUiwgZGVmYXVsdFZhbHVlOiAwIH0KICAgICAgICAgICAgfSwKICAgICAgICAgIH0sCiAgICAgICAgICB7CiAgICAgICAgICAgIG9wY29kZTogInRpbGVJbWFnZSIsCiAgICAgICAgICAgIGJsb2NrVHlwZTogU2NyYXRjaC5CbG9ja1R5cGUuUkVQT1JURVIsCiAgICAgICAgICAgIHRleHQ6ICJhcHBseSBtb3NhaWMgZWZmZWN0IHRvIFtTUFJJVEVdIGF0IHggW3hdIHkgW3ldIHNpemUgW05VTV0lIiwKICAgICAgICAgICAgaGlkZUZyb21QYWxldHRlOiBzcHJpdGUsCiAgICAgICAgICAgIGFyZ3VtZW50czogewogICAgICAgICAgICAgIFNQUklURTogeyB0eXBlOiBTY3JhdGNoLkFyZ3VtZW50VHlwZS5TVFJJTkcsIGRlZmF1bHRWYWx1ZTogImRhdGEgVVJJIG9yIDxzdmcgY29udGVudD4iIH0sCiAgICAgICAgICAgICAgTlVNOiB7IHR5cGU6IFNjcmF0Y2guQXJndW1lbnRUeXBlLk5VTUJFUiwgZGVmYXVsdFZhbHVlOiAxNSB9LAogICAgICAgICAgICAgIHg6IHsgdHlwZTogU2NyYXRjaC5Bcmd1bWVudFR5cGUuTlVNQkVSLCBkZWZhdWx0VmFsdWU6IDAgfSwKICAgICAgICAgICAgICB5OiB7IHR5cGU6IFNjcmF0Y2guQXJndW1lbnRUeXBlLk5VTUJFUiwgZGVmYXVsdFZhbHVlOiAwIH0KICAgICAgICAgICAgfSwKICAgICAgICAgIH0sCiAgICAgICAgICAiLS0tIiwKICAgICAgICAgIHsKICAgICAgICAgICAgb3Bjb2RlOiAiZGlzdG9ydFNwcml0ZSIsCiAgICAgICAgICAgIGJsb2NrVHlwZTogU2NyYXRjaC5CbG9ja1R5cGUuUkVQT1JURVIsCiAgICAgICAgICAgIHRleHQ6ICJhcHBseSBbRUZGRUNUXSBkaXN0b3J0aW9uIHRvIFtTUFJJVEVdIGF0IHggW1hdIHkgW1ldIGF0IFtOVU1dJSIsCiAgICAgICAgICAgIGhpZGVGcm9tUGFsZXR0ZTogIXNwcml0ZSwKICAgICAgICAgICAgYXJndW1lbnRzOiB7CiAgICAgICAgICAgICAgU1BSSVRFOiB7IHR5cGU6IFNjcmF0Y2guQXJndW1lbnRUeXBlLlNUUklORywgbWVudTogIlRBUkdFVFMyIiB9LAogICAgICAgICAgICAgIEVGRkVDVDogeyB0eXBlOiBTY3JhdGNoLkFyZ3VtZW50VHlwZS5TVFJJTkcsIG1lbnU6ICJESVNUT1JUSU9OIiB9LAogICAgICAgICAgICAgIE5VTTogeyB0eXBlOiBTY3JhdGNoLkFyZ3VtZW50VHlwZS5OVU1CRVIsIGRlZmF1bHRWYWx1ZTogNTAgfSwKICAgICAgICAgICAgICBYOiB7IHR5cGU6IFNjcmF0Y2guQXJndW1lbnRUeXBlLk5VTUJFUiwgZGVmYXVsdFZhbHVlOiAwIH0sCiAgICAgICAgICAgICAgWTogeyB0eXBlOiBTY3JhdGNoLkFyZ3VtZW50VHlwZS5OVU1CRVIsIGRlZmF1bHRWYWx1ZTogMCB9CiAgICAgICAgICAgIH0sCiAgICAgICAgICB9LAogICAgICAgICAgewogICAgICAgICAgICBvcGNvZGU6ICJkaXN0b3J0SW1hZ2UiLAogICAgICAgICAgICBibG9ja1R5cGU6IFNjcmF0Y2guQmxvY2tUeXBlLlJFUE9SVEVSLAogICAgICAgICAgICB0ZXh0OiAiYXBwbHkgW0VGRkVDVF0gZGlzdG9ydGlvbiB0byBbU1BSSVRFXSBhdCB4IFtYXSB5IFtZXSBhdCBbTlVNXSUiLAogICAgICAgICAgICBoaWRlRnJvbVBhbGV0dGU6IHNwcml0ZSwKICAgICAgICAgICAgYXJndW1lbnRzOiB7CiAgICAgICAgICAgICAgU1BSSVRFOiB7IHR5cGU6IFNjcmF0Y2guQXJndW1lbnRUeXBlLlNUUklORywgZGVmYXVsdFZhbHVlOiAiZGF0YSBVUkkgb3IgPHN2ZyBjb250ZW50PiIgfSwKICAgICAgICAgICAgICBFRkZFQ1Q6IHsgdHlwZTogU2NyYXRjaC5Bcmd1bWVudFR5cGUuU1RSSU5HLCBtZW51OiAiRElTVE9SVElPTiIgfSwKICAgICAgICAgICAgICBOVU06IHsgdHlwZTogU2NyYXRjaC5Bcmd1bWVudFR5cGUuTlVNQkVSLCBkZWZhdWx0VmFsdWU6IDUwIH0sCiAgICAgICAgICAgICAgWDogeyB0eXBlOiBTY3JhdGNoLkFyZ3VtZW50VHlwZS5OVU1CRVIsIGRlZmF1bHRWYWx1ZTogMCB9LAogICAgICAgICAgICAgIFk6IHsgdHlwZTogU2NyYXRjaC5Bcmd1bWVudFR5cGUuTlVNQkVSLCBkZWZhdWx0VmFsdWU6IDAgfQogICAgICAgICAgICB9LAogICAgICAgICAgfSwKICAgICAgICAgIHsKICAgICAgICAgICAgb3Bjb2RlOiAiZGlzdG9ydFNwcml0ZUltYWdlIiwKICAgICAgICAgICAgYmxvY2tUeXBlOiBTY3JhdGNoLkJsb2NrVHlwZS5SRVBPUlRFUiwKICAgICAgICAgICAgdGV4dDogImFwcGx5IFtFRkZFQ1RdIGRpc3RvcnRpb24gdG8gW1NQUklURV0gYXQgeCBbWF0geSBbWV0gYXQgW05VTV0lIiwKICAgICAgICAgICAgaGlkZUZyb21QYWxldHRlOiAhc3ByaXRlLAogICAgICAgICAgICBhcmd1bWVudHM6IHsKICAgICAgICAgICAgICBTUFJJVEU6IHsgdHlwZTogU2NyYXRjaC5Bcmd1bWVudFR5cGUuU1RSSU5HLCBtZW51OiAiVEFSR0VUUzIiIH0sCiAgICAgICAgICAgICAgRUZGRUNUOiB7IHR5cGU6IFNjcmF0Y2guQXJndW1lbnRUeXBlLlNUUklORywgZGVmYXVsdFZhbHVlOiAiZGF0YSBVUkkgb3IgPHN2ZyBjb250ZW50PiIgfSwKICAgICAgICAgICAgICBOVU06IHsgdHlwZTogU2NyYXRjaC5Bcmd1bWVudFR5cGUuTlVNQkVSLCBkZWZhdWx0VmFsdWU6IDUwIH0sCiAgICAgICAgICAgICAgWDogeyB0eXBlOiBTY3JhdGNoLkFyZ3VtZW50VHlwZS5OVU1CRVIsIGRlZmF1bHRWYWx1ZTogMCB9LAogICAgICAgICAgICAgIFk6IHsgdHlwZTogU2NyYXRjaC5Bcmd1bWVudFR5cGUuTlVNQkVSLCBkZWZhdWx0VmFsdWU6IDAgfQogICAgICAgICAgICB9LAogICAgICAgICAgfSwKICAgICAgICAgIHsKICAgICAgICAgICAgb3Bjb2RlOiAiZGlzdG9ydEltYWdlSW1hZ2UiLAogICAgICAgICAgICBibG9ja1R5cGU6IFNjcmF0Y2guQmxvY2tUeXBlLlJFUE9SVEVSLAogICAgICAgICAgICB0ZXh0OiAiYXBwbHkgW0VGRkVDVF0gZGlzdG9ydGlvbiB0byBbU1BSSVRFXSBhdCB4IFtYXSB5IFtZXSBhdCBbTlVNXSUiLAogICAgICAgICAgICBoaWRlRnJvbVBhbGV0dGU6IHNwcml0ZSwKICAgICAgICAgICAgYXJndW1lbnRzOiB7CiAgICAgICAgICAgICAgU1BSSVRFOiB7IHR5cGU6IFNjcmF0Y2guQXJndW1lbnRUeXBlLlNUUklORywgZGVmYXVsdFZhbHVlOiAiZGF0YSBVUkkgb3IgPHN2ZyBjb250ZW50PiIgfSwKICAgICAgICAgICAgICBFRkZFQ1Q6IHsgdHlwZTogU2NyYXRjaC5Bcmd1bWVudFR5cGUuU1RSSU5HLCBkZWZhdWx0VmFsdWU6ICJkYXRhIFVSSSBvciA8c3ZnIGNvbnRlbnQ+IiB9LAogICAgICAgICAgICAgIE5VTTogeyB0eXBlOiBTY3JhdGNoLkFyZ3VtZW50VHlwZS5OVU1CRVIsIGRlZmF1bHRWYWx1ZTogNTAgfSwKICAgICAgICAgICAgICBYOiB7IHR5cGU6IFNjcmF0Y2guQXJndW1lbnRUeXBlLk5VTUJFUiwgZGVmYXVsdFZhbHVlOiAwIH0sCiAgICAgICAgICAgICAgWTogeyB0eXBlOiBTY3JhdGNoLkFyZ3VtZW50VHlwZS5OVU1CRVIsIGRlZmF1bHRWYWx1ZTogMCB9CiAgICAgICAgICAgIH0sCiAgICAgICAgICB9LAogICAgICAgICAgewogICAgICAgICAgICBvcGNvZGU6ICJkaXN0b3J0UHJlc2V0IiwKICAgICAgICAgICAgYmxvY2tUeXBlOiBTY3JhdGNoLkJsb2NrVHlwZS5SRVBPUlRFUiwKICAgICAgICAgICAgdGV4dDogImRpc3RvcnRpb24gW1RZUEVdIHByZXNldCIsCiAgICAgICAgICAgIGFyZ3VtZW50czogewogICAgICAgICAgICAgIFRZUEU6IHsgdHlwZTogU2NyYXRjaC5Bcmd1bWVudFR5cGUuU1RSSU5HLCBtZW51OiAiRElTVE9SVElPTiIgfQogICAgICAgICAgICB9LAogICAgICAgICAgfSwKICAgICAgICAgIHsgYmxvY2tUeXBlOiBTY3JhdGNoLkJsb2NrVHlwZS5MQUJFTCwgdGV4dDogIkZvcm1hdHRpbmciIH0sCiAgICAgICAgICB7CiAgICAgICAgICAgIG9wY29kZTogIm91dGxpbmVTcHJpdGUiLAogICAgICAgICAgICBibG9ja1R5cGU6IFNjcmF0Y2guQmxvY2tUeXBlLlJFUE9SVEVSLAogICAgICAgICAgICB0ZXh0OiAiYWRkIFtPVVRMSU5FXSBvdXRsaW5lIHRvIFtTUFJJVEVdIGF0IFtOVU1dJSBjb2xvcmVkIFtDT0xPUl0iLAogICAgICAgICAgICBoaWRlRnJvbVBhbGV0dGU6ICFzcHJpdGUsCiAgICAgICAgICAgIGFyZ3VtZW50czogewogICAgICAgICAgICAgIE9VVExJTkU6IHsgdHlwZTogU2NyYXRjaC5Bcmd1bWVudFR5cGUuU1RSSU5HLCBtZW51OiAiT1VUTElORVMiIH0sCiAgICAgICAgICAgICAgTlVNOiB7IHR5cGU6IFNjcmF0Y2guQXJndW1lbnRUeXBlLk5VTUJFUiwgZGVmYXVsdFZhbHVlOiA1IH0sCiAgICAgICAgICAgICAgU1BSSVRFOiB7IHR5cGU6IFNjcmF0Y2guQXJndW1lbnRUeXBlLlNUUklORywgbWVudTogIlRBUkdFVFMiIH0sCiAgICAgICAgICAgICAgQ09MT1I6IHsgdHlwZTogU2NyYXRjaC5Bcmd1bWVudFR5cGUuQ09MT1IsIGRlZmF1bHRWYWx1ZTogIiNmZjAwMDAiIH0KICAgICAgICAgICAgfSwKICAgICAgICAgIH0sCiAgICAgICAgICB7CiAgICAgICAgICAgIG9wY29kZTogIm91dGxpbmVJbWFnZSIsCiAgICAgICAgICAgIGJsb2NrVHlwZTogU2NyYXRjaC5CbG9ja1R5cGUuUkVQT1JURVIsCiAgICAgICAgICAgIHRleHQ6ICJhZGQgW09VVExJTkVdIG91dGxpbmUgdG8gW1NQUklURV0gYXQgW05VTV0lIGNvbG9yZWQgW0NPTE9SXSIsCiAgICAgICAgICAgIGhpZGVGcm9tUGFsZXR0ZTogc3ByaXRlLAogICAgICAgICAgICBhcmd1bWVudHM6IHsKICAgICAgICAgICAgICBPVVRMSU5FOiB7IHR5cGU6IFNjcmF0Y2guQXJndW1lbnRUeXBlLlNUUklORywgbWVudTogIk9VVExJTkVTIiB9LAogICAgICAgICAgICAgIE5VTTogeyB0eXBlOiBTY3JhdGNoLkFyZ3VtZW50VHlwZS5OVU1CRVIsIGRlZmF1bHRWYWx1ZTogNSB9LAogICAgICAgICAgICAgIFNQUklURTogeyB0eXBlOiBTY3JhdGNoLkFyZ3VtZW50VHlwZS5TVFJJTkcsIGRlZmF1bHRWYWx1ZTogImRhdGEgVVJJIG9yIDxzdmcgY29udGVudD4iIH0sCiAgICAgICAgICAgICAgQ09MT1I6IHsgdHlwZTogU2NyYXRjaC5Bcmd1bWVudFR5cGUuQ09MT1IsIGRlZmF1bHRWYWx1ZTogIiNmZjAwMDAiIH0KICAgICAgICAgICAgfSwKICAgICAgICAgIH0sCiAgICAgICAgICB7CiAgICAgICAgICAgIG9wY29kZTogInNwcml0ZVNoYWRvdyIsCiAgICAgICAgICAgIGJsb2NrVHlwZTogU2NyYXRjaC5CbG9ja1R5cGUuUkVQT1JURVIsCiAgICAgICAgICAgIHRleHQ6ICJhZGQgc2hhZG93IHRvIFtTUFJJVEVdIGF0IHggW1hdIHkgW1ldIGNvbG9yZWQgW0NPTE9SXSBhdCBbTlVNXSUiLAogICAgICAgICAgICBoaWRlRnJvbVBhbGV0dGU6ICFzcHJpdGUsCiAgICAgICAgICAgIGFyZ3VtZW50czogewogICAgICAgICAgICAgIENPTE9SOiB7IHR5cGU6IFNjcmF0Y2guQXJndW1lbnRUeXBlLkNPTE9SLCBkZWZhdWx0VmFsdWU6ICIjZmYwMDAwIiB9LAogICAgICAgICAgICAgIFNQUklURTogeyB0eXBlOiBTY3JhdGNoLkFyZ3VtZW50VHlwZS5TVFJJTkcsIG1lbnU6ICJUQVJHRVRTIiB9LAogICAgICAgICAgICAgIE5VTTogeyB0eXBlOiBTY3JhdGNoLkFyZ3VtZW50VHlwZS5OVU1CRVIsIGRlZmF1bHRWYWx1ZTogMTUgfSwKICAgICAgICAgICAgICBYOiB7IHR5cGU6IFNjcmF0Y2guQXJndW1lbnRUeXBlLk5VTUJFUiwgZGVmYXVsdFZhbHVlOiAwIH0sCiAgICAgICAgICAgICAgWTogeyB0eXBlOiBTY3JhdGNoLkFyZ3VtZW50VHlwZS5OVU1CRVIsIGRlZmF1bHRWYWx1ZTogMCB9CiAgICAgICAgICAgIH0sCiAgICAgICAgICB9LAogICAgICAgICAgewogICAgICAgICAgICBvcGNvZGU6ICJpbWFnZVNoYWRvdyIsCiAgICAgICAgICAgIGJsb2NrVHlwZTogU2NyYXRjaC5CbG9ja1R5cGUuUkVQT1JURVIsCiAgICAgICAgICAgIHRleHQ6ICJhZGQgc2hhZG93IHRvIFtTUFJJVEVdIGF0IHggW1hdIHkgW1ldIGNvbG9yZWQgW0NPTE9SXSBhdCBbTlVNXSUiLAogICAgICAgICAgICBoaWRlRnJvbVBhbGV0dGU6IHNwcml0ZSwKICAgICAgICAgICAgYXJndW1lbnRzOiB7CiAgICAgICAgICAgICAgQ09MT1I6IHsgdHlwZTogU2NyYXRjaC5Bcmd1bWVudFR5cGUuQ09MT1IsIGRlZmF1bHRWYWx1ZTogIiNmZjAwMDAiIH0sCiAgICAgICAgICAgICAgU1BSSVRFOiB7IHR5cGU6IFNjcmF0Y2guQXJndW1lbnRUeXBlLlNUUklORywgZGVmYXVsdFZhbHVlOiAiZGF0YSBVUkkgb3IgPHN2ZyBjb250ZW50PiIgfSwKICAgICAgICAgICAgICBOVU06IHsgdHlwZTogU2NyYXRjaC5Bcmd1bWVudFR5cGUuTlVNQkVSLCBkZWZhdWx0VmFsdWU6IDE1IH0sCiAgICAgICAgICAgICAgWDogeyB0eXBlOiBTY3JhdGNoLkFyZ3VtZW50VHlwZS5OVU1CRVIsIGRlZmF1bHRWYWx1ZTogMCB9LAogICAgICAgICAgICAgIFk6IHsgdHlwZTogU2NyYXRjaC5Bcmd1bWVudFR5cGUuTlVNQkVSLCBkZWZhdWx0VmFsdWU6IDAgfQogICAgICAgICAgICB9LAogICAgICAgICAgfSwKICAgICAgICAgIHsKICAgICAgICAgICAgb3Bjb2RlOiAiYXBwbHlTcHJpdGVMaWdodCIsCiAgICAgICAgICAgIGJsb2NrVHlwZTogU2NyYXRjaC5CbG9ja1R5cGUuUkVQT1JURVIsCiAgICAgICAgICAgIHRleHQ6ICJhZGQgbGlnaHRpbmcgdG8gW1NQUklURV0gdGludGVkIFtDT0xPUl0gYXQgeCBbWF0geSBbWV0gYXQgW05VTV0lIiwKICAgICAgICAgICAgaGlkZUZyb21QYWxldHRlOiAhc3ByaXRlLAogICAgICAgICAgICBhcmd1bWVudHM6IHsKICAgICAgICAgICAgICBTUFJJVEU6IHsgdHlwZTogU2NyYXRjaC5Bcmd1bWVudFR5cGUuU1RSSU5HLCBtZW51OiAiVEFSR0VUUzIiIH0sCiAgICAgICAgICAgICAgQ09MT1I6IHsgdHlwZTogU2NyYXRjaC5Bcmd1bWVudFR5cGUuQ09MT1IsIGRlZmF1bHRWYWx1ZTogIiNmZjAwMDAiIH0sCiAgICAgICAgICAgICAgTlVNOiB7IHR5cGU6IFNjcmF0Y2guQXJndW1lbnRUeXBlLk5VTUJFUiwgZGVmYXVsdFZhbHVlOiA1MCB9LAogICAgICAgICAgICAgIFg6IHsgdHlwZTogU2NyYXRjaC5Bcmd1bWVudFR5cGUuTlVNQkVSLCBkZWZhdWx0VmFsdWU6IDAgfSwKICAgICAgICAgICAgICBZOiB7IHR5cGU6IFNjcmF0Y2guQXJndW1lbnRUeXBlLk5VTUJFUiwgZGVmYXVsdFZhbHVlOiAwIH0KICAgICAgICAgICAgfSwKICAgICAgICAgIH0sCiAgICAgICAgICB7CiAgICAgICAgICAgIG9wY29kZTogImFwcGx5SW1hZ2VMaWdodCIsCiAgICAgICAgICAgIGJsb2NrVHlwZTogU2NyYXRjaC5CbG9ja1R5cGUuUkVQT1JURVIsCiAgICAgICAgICAgIHRleHQ6ICJhZGQgbGlnaHRpbmcgdG8gW1NQUklURV0gdGludGVkIFtDT0xPUl0gYXQgeCBbWF0geSBbWV0gYXQgW05VTV0lIiwKICAgICAgICAgICAgaGlkZUZyb21QYWxldHRlOiBzcHJpdGUsCiAgICAgICAgICAgIGFyZ3VtZW50czogewogICAgICAgICAgICAgIFNQUklURTogeyB0eXBlOiBTY3JhdGNoLkFyZ3VtZW50VHlwZS5TVFJJTkcsIGRlZmF1bHRWYWx1ZTogImRhdGEgVVJJIG9yIDxzdmcgY29udGVudD4iIH0sCiAgICAgICAgICAgICAgQ09MT1I6IHsgdHlwZTogU2NyYXRjaC5Bcmd1bWVudFR5cGUuQ09MT1IsIGRlZmF1bHRWYWx1ZTogIiNmZjAwMDAiIH0sCiAgICAgICAgICAgICAgTlVNOiB7IHR5cGU6IFNjcmF0Y2guQXJndW1lbnRUeXBlLk5VTUJFUiwgZGVmYXVsdFZhbHVlOiA1MCB9LAogICAgICAgICAgICAgIFg6IHsgdHlwZTogU2NyYXRjaC5Bcmd1bWVudFR5cGUuTlVNQkVSLCBkZWZhdWx0VmFsdWU6IDAgfSwKICAgICAgICAgICAgICBZOiB7IHR5cGU6IFNjcmF0Y2guQXJndW1lbnRUeXBlLk5VTUJFUiwgZGVmYXVsdFZhbHVlOiAwIH0KICAgICAgICAgICAgfSwKICAgICAgICAgIH0sCiAgICAgICAgICB7CiAgICAgICAgICAgIG9wY29kZTogImFkdlNwcml0ZUxpZ2h0IiwKICAgICAgICAgICAgYmxvY2tUeXBlOiBTY3JhdGNoLkJsb2NrVHlwZS5SRVBPUlRFUiwKICAgICAgICAgICAgdGV4dDogImFwcGx5IGxpZ2h0IHRvIFtTUFJJVEVdIHVzaW5nIG1hcCBbTUFQXSB3aXRoIG1vZGUgW0JMRU5EXSIsCiAgICAgICAgICAgIGhpZGVGcm9tUGFsZXR0ZTogIXNwcml0ZSwKICAgICAgICAgICAgYXJndW1lbnRzOiB7CiAgICAgICAgICAgICAgU1BSSVRFOiB7IHR5cGU6IFNjcmF0Y2guQXJndW1lbnRUeXBlLlNUUklORywgbWVudTogIlRBUkdFVFMyIiB9LAogICAgICAgICAgICAgIEJMRU5EOiB7IHR5cGU6IFNjcmF0Y2guQXJndW1lbnRUeXBlLlNUUklORywgbWVudTogIkJMRU5ESU5HMiIgfSwKICAgICAgICAgICAgICBNQVA6IHsgdHlwZTogU2NyYXRjaC5Bcmd1bWVudFR5cGUuU1RSSU5HLCBkZWZhdWx0VmFsdWU6ICJkYXRhIFVSSSBvciA8c3ZnIGNvbnRlbnQ+IiB9CiAgICAgICAgICAgIH0sCiAgICAgICAgICB9LAogICAgICAgICAgewogICAgICAgICAgICBvcGNvZGU6ICJhZHZJbWFnZUxpZ2h0IiwKICAgICAgICAgICAgYmxvY2tUeXBlOiBTY3JhdGNoLkJsb2NrVHlwZS5SRVBPUlRFUiwKICAgICAgICAgICAgdGV4dDogImFwcGx5IGxpZ2h0IHRvIFtTUFJJVEVdIHVzaW5nIG1hcCBbTUFQXSB3aXRoIG1vZGUgW0JMRU5EXSIsCiAgICAgICAgICAgIGhpZGVGcm9tUGFsZXR0ZTogc3ByaXRlLAogICAgICAgICAgICBhcmd1bWVudHM6IHsKICAgICAgICAgICAgICBTUFJJVEU6IHsgdHlwZTogU2NyYXRjaC5Bcmd1bWVudFR5cGUuU1RSSU5HLCBkZWZhdWx0VmFsdWU6ICJkYXRhIFVSSSBvciA8c3ZnIGNvbnRlbnQ+IiB9LAogICAgICAgICAgICAgIEJMRU5EOiB7IHR5cGU6IFNjcmF0Y2guQXJndW1lbnRUeXBlLlNUUklORywgbWVudTogIkJMRU5ESU5HMiIgfSwKICAgICAgICAgICAgICBNQVA6IHsgdHlwZTogU2NyYXRjaC5Bcmd1bWVudFR5cGUuU1RSSU5HLCBkZWZhdWx0VmFsdWU6ICJkYXRhIFVSSSBvciA8c3ZnIGNvbnRlbnQ+IiB9CiAgICAgICAgICAgIH0sCiAgICAgICAgICB9LAogICAgICAgICAgIi0tLSIsCiAgICAgICAgICB7CiAgICAgICAgICAgIG9wY29kZTogIm1hc2tTcHJpdGUiLAogICAgICAgICAgICBibG9ja1R5cGU6IFNjcmF0Y2guQmxvY2tUeXBlLlJFUE9SVEVSLAogICAgICAgICAgICB0ZXh0OiAibWFzayBbVFlQRV0gW1NQUklURTJdIGZyb20gW1NQUklURV0iLAogICAgICAgICAgICBoaWRlRnJvbVBhbGV0dGU6ICFzcHJpdGUsCiAgICAgICAgICAgIGFyZ3VtZW50czogewogICAgICAgICAgICAgIFNQUklURTogeyB0eXBlOiBTY3JhdGNoLkFyZ3VtZW50VHlwZS5TVFJJTkcsIG1lbnU6ICJUQVJHRVRTMiIgfSwKICAgICAgICAgICAgICBTUFJJVEUyOiB7IHR5cGU6IFNjcmF0Y2guQXJndW1lbnRUeXBlLlNUUklORywgbWVudTogIlRBUkdFVFMiIH0sCiAgICAgICAgICAgICAgVFlQRTogeyB0eXBlOiBTY3JhdGNoLkFyZ3VtZW50VHlwZS5TVFJJTkcsIG1lbnU6ICJNQVNLSU5HIiB9CiAgICAgICAgICAgIH0sCiAgICAgICAgICB9LAogICAgICAgICAgewogICAgICAgICAgICBvcGNvZGU6ICJtYXNrSW1hZ2UiLAogICAgICAgICAgICBibG9ja1R5cGU6IFNjcmF0Y2guQmxvY2tUeXBlLlJFUE9SVEVSLAogICAgICAgICAgICB0ZXh0OiAibWFzayBbVFlQRV0gW1NQUklURTJdIGZyb20gW1NQUklURV0iLAogICAgICAgICAgICBoaWRlRnJvbVBhbGV0dGU6IHNwcml0ZSwKICAgICAgICAgICAgYXJndW1lbnRzOiB7CiAgICAgICAgICAgICAgU1BSSVRFOiB7IHR5cGU6IFNjcmF0Y2guQXJndW1lbnRUeXBlLlNUUklORywgZGVmYXVsdFZhbHVlOiAiZGF0YSBVUkkgb3IgPHN2ZyBjb250ZW50PiIgfSwKICAgICAgICAgICAgICBTUFJJVEUyOiB7IHR5cGU6IFNjcmF0Y2guQXJndW1lbnRUeXBlLlNUUklORywgZGVmYXVsdFZhbHVlOiAiZGF0YSBVUkkgb3IgPHN2ZyBjb250ZW50PiIgfSwKICAgICAgICAgICAgICBUWVBFOiB7IHR5cGU6IFNjcmF0Y2guQXJndW1lbnRUeXBlLlNUUklORywgbWVudTogIk1BU0tJTkciIH0KICAgICAgICAgICAgfSwKICAgICAgICAgIH0sCiAgICAgICAgICB7CiAgICAgICAgICAgIG9wY29kZTogInNldE1hc2tYWSIsCiAgICAgICAgICAgIGJsb2NrVHlwZTogU2NyYXRjaC5CbG9ja1R5cGUuQ09NTUFORCwKICAgICAgICAgICAgdGV4dDogInNldCBtYXNrIHggW3hdIHkgW3ldIiwKICAgICAgICAgICAgYXJndW1lbnRzOiB7CiAgICAgICAgICAgICAgeDogeyB0eXBlOiBTY3JhdGNoLkFyZ3VtZW50VHlwZS5OVU1CRVIsIGRlZmF1bHRWYWx1ZTogMCB9LAogICAgICAgICAgICAgIHk6IHsgdHlwZTogU2NyYXRjaC5Bcmd1bWVudFR5cGUuTlVNQkVSLCBkZWZhdWx0VmFsdWU6IDAgfQogICAgICAgICAgICB9LAogICAgICAgICAgfSwKICAgICAgICAgIHsKICAgICAgICAgICAgb3Bjb2RlOiAic2V0TWFza1NaIiwKICAgICAgICAgICAgYmxvY2tUeXBlOiBTY3JhdGNoLkJsb2NrVHlwZS5DT01NQU5ELAogICAgICAgICAgICB0ZXh0OiAic2V0IG1hc2sgc2l6ZSB0byBbU0laRV0lIiwKICAgICAgICAgICAgYXJndW1lbnRzOiB7CiAgICAgICAgICAgICAgU0laRTogeyB0eXBlOiBTY3JhdGNoLkFyZ3VtZW50VHlwZS5OVU1CRVIsIGRlZmF1bHRWYWx1ZTogMTAwIH0KICAgICAgICAgICAgfSwKICAgICAgICAgIH0sCiAgICAgICAgICB7CiAgICAgICAgICAgIG9wY29kZTogIm1hc2tBVFQiLAogICAgICAgICAgICBibG9ja1R5cGU6IFNjcmF0Y2guQmxvY2tUeXBlLlJFUE9SVEVSLAogICAgICAgICAgICB0ZXh0OiAiY3VycmVudCBbQVRUXSBvZiBtYXNrIiwKICAgICAgICAgICAgZGlzYWJsZU1vbml0b3I6IHRydWUsCiAgICAgICAgICAgIGFyZ3VtZW50czogewogICAgICAgICAgICAgIEFUVDogeyB0eXBlOiBTY3JhdGNoLkFyZ3VtZW50VHlwZS5TVFJJTkcsIG1lbnU6ICJtYXNrQVRUcyIgfQogICAgICAgICAgICB9LAogICAgICAgICAgfSwKICAgICAgICAgICItLS0iLAogICAgICAgICAgewogICAgICAgICAgICBvcGNvZGU6ICJ1bkNsaXBTUFIiLAogICAgICAgICAgICBibG9ja1R5cGU6IFNjcmF0Y2guQmxvY2tUeXBlLlJFUE9SVEVSLAogICAgICAgICAgICB0ZXh0OiAicmVzaXplIHZpZXdib3ggb2YgW1NQUklURV0gYnkgW05VTV0lIiwKICAgICAgICAgICAgaGlkZUZyb21QYWxldHRlOiAhc3ByaXRlLAogICAgICAgICAgICBhcmd1bWVudHM6IHsKICAgICAgICAgICAgICBTUFJJVEU6IHsgdHlwZTogU2NyYXRjaC5Bcmd1bWVudFR5cGUuU1RSSU5HLCBtZW51OiAiVEFSR0VUUyIgfSwKICAgICAgICAgICAgICBOVU06IHsgdHlwZTogU2NyYXRjaC5Bcmd1bWVudFR5cGUuTlVNQkVSLCBkZWZhdWx0VmFsdWU6IDUgfQogICAgICAgICAgICB9LAogICAgICAgICAgfSwKICAgICAgICAgIHsKICAgICAgICAgICAgb3Bjb2RlOiAidW5DbGlwSU1HIiwKICAgICAgICAgICAgYmxvY2tUeXBlOiBTY3JhdGNoLkJsb2NrVHlwZS5SRVBPUlRFUiwKICAgICAgICAgICAgdGV4dDogInJlc2l6ZSB2aWV3Ym94IG9mIFtTUFJJVEVdIGJ5IFtOVU1dJSIsCiAgICAgICAgICAgIGhpZGVGcm9tUGFsZXR0ZTogc3ByaXRlLAogICAgICAgICAgICBhcmd1bWVudHM6IHsKICAgICAgICAgICAgICBTUFJJVEU6IHsgdHlwZTogU2NyYXRjaC5Bcmd1bWVudFR5cGUuU1RSSU5HLCBkZWZhdWx0VmFsdWU6ICJkYXRhIFVSSSBvciA8c3ZnIGNvbnRlbnQ+IiB9LAogICAgICAgICAgICAgIE5VTTogeyB0eXBlOiBTY3JhdGNoLkFyZ3VtZW50VHlwZS5OVU1CRVIsIGRlZmF1bHRWYWx1ZTogNSB9CiAgICAgICAgICAgIH0sCiAgICAgICAgICB9LAogICAgICAgICAgIi0tLSIsCiAgICAgICAgICB7CiAgICAgICAgICAgIG9wY29kZTogInNldFhZIiwKICAgICAgICAgICAgYmxvY2tUeXBlOiBTY3JhdGNoLkJsb2NrVHlwZS5SRVBPUlRFUiwKICAgICAgICAgICAgdGV4dDogInNldCBbU1BSSVRFXSB4IFt4XSB5IFt5XSIsCiAgICAgICAgICAgIGhpZGVGcm9tUGFsZXR0ZTogIXNwcml0ZSwKICAgICAgICAgICAgYXJndW1lbnRzOiB7CiAgICAgICAgICAgICAgU1BSSVRFOiB7IHR5cGU6IFNjcmF0Y2guQXJndW1lbnRUeXBlLlNUUklORywgbWVudTogIlRBUkdFVFMiIH0sCiAgICAgICAgICAgICAgeDogeyB0eXBlOiBTY3JhdGNoLkFyZ3VtZW50VHlwZS5OVU1CRVIsIGRlZmF1bHRWYWx1ZTogMCB9LAogICAgICAgICAgICAgIHk6IHsgdHlwZTogU2NyYXRjaC5Bcmd1bWVudFR5cGUuTlVNQkVSLCBkZWZhdWx0VmFsdWU6IDAgfQogICAgICAgICAgICB9LAogICAgICAgICAgfSwKICAgICAgICAgIHsKICAgICAgICAgICAgb3Bjb2RlOiAic2V0WFkyIiwKICAgICAgICAgICAgYmxvY2tUeXBlOiBTY3JhdGNoLkJsb2NrVHlwZS5SRVBPUlRFUiwKICAgICAgICAgICAgdGV4dDogInNldCBbU1BSSVRFXSB4IFt4XSB5IFt5XSIsCiAgICAgICAgICAgIGhpZGVGcm9tUGFsZXR0ZTogc3ByaXRlLAogICAgICAgICAgICBhcmd1bWVudHM6IHsKICAgICAgICAgICAgICBTUFJJVEU6IHsgdHlwZTogU2NyYXRjaC5Bcmd1bWVudFR5cGUuU1RSSU5HLCBkZWZhdWx0VmFsdWU6ICJkYXRhIFVSSSBvciA8c3ZnIGNvbnRlbnQ+IiB9LAogICAgICAgICAgICAgIHg6IHsgdHlwZTogU2NyYXRjaC5Bcmd1bWVudFR5cGUuTlVNQkVSLCBkZWZhdWx0VmFsdWU6IDAgfSwKICAgICAgICAgICAgICB5OiB7IHR5cGU6IFNjcmF0Y2guQXJndW1lbnRUeXBlLk5VTUJFUiwgZGVmYXVsdFZhbHVlOiAwIH0KICAgICAgICAgICAgfSwKICAgICAgICAgIH0sCiAgICAgICAgICB7CiAgICAgICAgICAgIG9wY29kZTogInNldERJUiIsCiAgICAgICAgICAgIGJsb2NrVHlwZTogU2NyYXRjaC5CbG9ja1R5cGUuUkVQT1JURVIsCiAgICAgICAgICAgIHRleHQ6ICJwb2ludCBbU1BSSVRFXSBpbiBkaXJlY3Rpb24gW0RJUl0iLAogICAgICAgICAgICBoaWRlRnJvbVBhbGV0dGU6ICFzcHJpdGUsCiAgICAgICAgICAgIGFyZ3VtZW50czogewogICAgICAgICAgICAgIFNQUklURTogeyB0eXBlOiBTY3JhdGNoLkFyZ3VtZW50VHlwZS5TVFJJTkcsIG1lbnU6ICJUQVJHRVRTIiB9LAogICAgICAgICAgICAgIERJUjogeyB0eXBlOiBTY3JhdGNoLkFyZ3VtZW50VHlwZS5OVU1CRVIsIGRlZmF1bHRWYWx1ZTogOTAgfQogICAgICAgICAgICB9LAogICAgICAgICAgfSwKICAgICAgICAgIHsKICAgICAgICAgICAgb3Bjb2RlOiAic2V0RElSMiIsCiAgICAgICAgICAgIGJsb2NrVHlwZTogU2NyYXRjaC5CbG9ja1R5cGUuUkVQT1JURVIsCiAgICAgICAgICAgIHRleHQ6ICJwb2ludCBbU1BSSVRFXSBpbiBkaXJlY3Rpb24gW0RJUl0iLAogICAgICAgICAgICBoaWRlRnJvbVBhbGV0dGU6IHNwcml0ZSwKICAgICAgICAgICAgYXJndW1lbnRzOiB7CiAgICAgICAgICAgICAgU1BSSVRFOiB7IHR5cGU6IFNjcmF0Y2guQXJndW1lbnRUeXBlLlNUUklORywgZGVmYXVsdFZhbHVlOiAiZGF0YSBVUkkgb3IgPHN2ZyBjb250ZW50PiIgfSwKICAgICAgICAgICAgICBESVI6IHsgdHlwZTogU2NyYXRjaC5Bcmd1bWVudFR5cGUuTlVNQkVSLCBkZWZhdWx0VmFsdWU6IDkwIH0KICAgICAgICAgICAgfSwKICAgICAgICAgIH0sCiAgICAgICAgICB7CiAgICAgICAgICAgIG9wY29kZTogInNldFNDQUxFIiwKICAgICAgICAgICAgYmxvY2tUeXBlOiBTY3JhdGNoLkJsb2NrVHlwZS5SRVBPUlRFUiwKICAgICAgICAgICAgdGV4dDogInN0cmV0Y2ggW1NQUklURV0gdG8geCBbeF0geSBbeV0iLAogICAgICAgICAgICBoaWRlRnJvbVBhbGV0dGU6ICFzcHJpdGUsCiAgICAgICAgICAgIGFyZ3VtZW50czogewogICAgICAgICAgICAgIFNQUklURTogeyB0eXBlOiBTY3JhdGNoLkFyZ3VtZW50VHlwZS5TVFJJTkcsIG1lbnU6ICJUQVJHRVRTIiB9LAogICAgICAgICAgICAgIHg6IHsgdHlwZTogU2NyYXRjaC5Bcmd1bWVudFR5cGUuTlVNQkVSLCBkZWZhdWx0VmFsdWU6IDIwMCB9LAogICAgICAgICAgICAgIHk6IHsgdHlwZTogU2NyYXRjaC5Bcmd1bWVudFR5cGUuTlVNQkVSLCBkZWZhdWx0VmFsdWU6IDEwMCB9CiAgICAgICAgICAgIH0sCiAgICAgICAgICB9LAogICAgICAgICAgewogICAgICAgICAgICBvcGNvZGU6ICJzZXRTQ0FMRTIiLAogICAgICAgICAgICBibG9ja1R5cGU6IFNjcmF0Y2guQmxvY2tUeXBlLlJFUE9SVEVSLAogICAgICAgICAgICB0ZXh0OiAic3RyZXRjaCBbU1BSSVRFXSB0byB4IFt4XSB5IFt5XSIsCiAgICAgICAgICAgIGhpZGVGcm9tUGFsZXR0ZTogc3ByaXRlLAogICAgICAgICAgICBhcmd1bWVudHM6IHsKICAgICAgICAgICAgICBTUFJJVEU6IHsgdHlwZTogU2NyYXRjaC5Bcmd1bWVudFR5cGUuU1RSSU5HLCBkZWZhdWx0VmFsdWU6ICJkYXRhIFVSSSBvciA8c3ZnIGNvbnRlbnQ+IiB9LAogICAgICAgICAgICAgIHg6IHsgdHlwZTogU2NyYXRjaC5Bcmd1bWVudFR5cGUuTlVNQkVSLCBkZWZhdWx0VmFsdWU6IDIwMCB9LAogICAgICAgICAgICAgIHk6IHsgdHlwZTogU2NyYXRjaC5Bcmd1bWVudFR5cGUuTlVNQkVSLCBkZWZhdWx0VmFsdWU6IDEwMCB9CiAgICAgICAgICAgIH0sCiAgICAgICAgICB9LAogICAgICAgICAgewogICAgICAgICAgICBvcGNvZGU6ICJzZXRTS0VXIiwKICAgICAgICAgICAgYmxvY2tUeXBlOiBTY3JhdGNoLkJsb2NrVHlwZS5SRVBPUlRFUiwKICAgICAgICAgICAgdGV4dDogInNrZXcgW1NQUklURV0gdG8geCBbeF0geSBbeV0iLAogICAgICAgICAgICBoaWRlRnJvbVBhbGV0dGU6ICFzcHJpdGUsCiAgICAgICAgICAgIGFyZ3VtZW50czogewogICAgICAgICAgICAgIFNQUklURTogeyB0eXBlOiBTY3JhdGNoLkFyZ3VtZW50VHlwZS5TVFJJTkcsIG1lbnU6ICJUQVJHRVRTIiB9LAogICAgICAgICAgICAgIHg6IHsgdHlwZTogU2NyYXRjaC5Bcmd1bWVudFR5cGUuTlVNQkVSLCBkZWZhdWx0VmFsdWU6IDEwIH0sCiAgICAgICAgICAgICAgeTogeyB0eXBlOiBTY3JhdGNoLkFyZ3VtZW50VHlwZS5OVU1CRVIsIGRlZmF1bHRWYWx1ZTogMCB9CiAgICAgICAgICAgIH0sCiAgICAgICAgICB9LAogICAgICAgICAgewogICAgICAgICAgICBvcGNvZGU6ICJzZXRTS0VXMiIsCiAgICAgICAgICAgIGJsb2NrVHlwZTogU2NyYXRjaC5CbG9ja1R5cGUuUkVQT1JURVIsCiAgICAgICAgICAgIHRleHQ6ICJza2V3IFtTUFJJVEVdIHRvIHggW3hdIHkgW3ldIiwKICAgICAgICAgICAgaGlkZUZyb21QYWxldHRlOiBzcHJpdGUsCiAgICAgICAgICAgIGFyZ3VtZW50czogewogICAgICAgICAgICAgIFNQUklURTogeyB0eXBlOiBTY3JhdGNoLkFyZ3VtZW50VHlwZS5TVFJJTkcsIGRlZmF1bHRWYWx1ZTogImRhdGEgVVJJIG9yIDxzdmcgY29udGVudD4iIH0sCiAgICAgICAgICAgICAgeDogeyB0eXBlOiBTY3JhdGNoLkFyZ3VtZW50VHlwZS5OVU1CRVIsIGRlZmF1bHRWYWx1ZTogMTAgfSwKICAgICAgICAgICAgICB5OiB7IHR5cGU6IFNjcmF0Y2guQXJndW1lbnRUeXBlLk5VTUJFUiwgZGVmYXVsdFZhbHVlOiAwIH0KICAgICAgICAgICAgfSwKICAgICAgICAgIH0sCiAgICAgICAgICB7IGJsb2NrVHlwZTogU2NyYXRjaC5CbG9ja1R5cGUuTEFCRUwsIHRleHQ6ICJDYW52YXMgRmlsdGVycyIgfSwKICAgICAgICAgIHsKICAgICAgICAgICAgZnVuYzogImZpbHRlcldhcm4iLAogICAgICAgICAgICBibG9ja1R5cGU6IFNjcmF0Y2guQmxvY2tUeXBlLkJVVFRPTiwKICAgICAgICAgICAgdGV4dDogIkNhbnZhcyBGaWx0ZXIgRGlzY2xhaW1lciIKICAgICAgICAgIH0sCiAgICAgICAgICB7CiAgICAgICAgICAgIG9wY29kZTogImFkZENhbnZhc0ZpbHRlciIsCiAgICAgICAgICAgIGJsb2NrVHlwZTogU2NyYXRjaC5CbG9ja1R5cGUuQ09NTUFORCwKICAgICAgICAgICAgdGV4dDogImFwcGx5IGZpbHRlciBbRklMVEVSXSB0byBjYW52YXMgd2l0aCBuYW1lIFtOQU1FXSIsCiAgICAgICAgICAgIGFyZ3VtZW50czogewogICAgICAgICAgICAgIEZJTFRFUjogewogICAgICAgICAgICAgICAgdHlwZTogU2NyYXRjaC5Bcmd1bWVudFR5cGUuU1RSSU5HLAogICAgICAgICAgICAgICAgZGVmYXVsdFZhbHVlOiAiaW5zZXJ0IHNwcml0ZS9jdXN0b20gZmlsdGVyIgogICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgTkFNRTogewogICAgICAgICAgICAgICAgdHlwZTogU2NyYXRjaC5Bcmd1bWVudFR5cGUuU1RSSU5HLAogICAgICAgICAgICAgICAgZGVmYXVsdFZhbHVlOiAiZmlsdGVyLTEiCiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9LAogICAgICAgICAgfSwKICAgICAgICAgIHsKICAgICAgICAgICAgb3Bjb2RlOiAicmVtb3ZlQ2FudmFzRmlsdGVyIiwKICAgICAgICAgICAgYmxvY2tUeXBlOiBTY3JhdGNoLkJsb2NrVHlwZS5DT01NQU5ELAogICAgICAgICAgICB0ZXh0OiAicmVtb3ZlIGZpbHRlciBuYW1lZCBbTkFNRV0gZnJvbSBjYW52YXMiLAogICAgICAgICAgICBhcmd1bWVudHM6IHsKICAgICAgICAgICAgICBOQU1FOiB7CiAgICAgICAgICAgICAgICB0eXBlOiBTY3JhdGNoLkFyZ3VtZW50VHlwZS5TVFJJTkcsCiAgICAgICAgICAgICAgICBkZWZhdWx0VmFsdWU6ICJmaWx0ZXItMSIKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0sCiAgICAgICAgICB9LAogICAgICAgICAgewogICAgICAgICAgICBvcGNvZGU6ICJyZW1vdmVBbGxGaWx0ZXJzIiwKICAgICAgICAgICAgYmxvY2tUeXBlOiBTY3JhdGNoLkJsb2NrVHlwZS5DT01NQU5ELAogICAgICAgICAgICB0ZXh0OiAicmVtb3ZlIGFsbCBjYW52YXMgZmlsdGVycyIKICAgICAgICAgIH0KICAgICAgICBdLAogICAgICAgIG1lbnVzOiB7CiAgICAgICAgICBUQVJHRVRTOiB7IGFjY2VwdFJlcG9ydGVyczogdHJ1ZSwgaXRlbXM6IHRoaXMuZ2V0VGFyZ2V0cyhmYWxzZSkgfSwKICAgICAgICAgIFRBUkdFVFMyOiB7IGFjY2VwdFJlcG9ydGVyczogdHJ1ZSwgaXRlbXM6IHRoaXMuZ2V0VGFyZ2V0cyh0cnVlKSB9LAogICAgICAgICAgRUZGRUNUUzogewogICAgICAgICAgICBhY2NlcHRSZXBvcnRlcnM6IHRydWUsCiAgICAgICAgICAgIGl0ZW1zOiBbCiAgICAgICAgICAgICAgImJsdXIiLCAic2F0dXJhdGlvbiIsICJjb250cmFzdCIsICJzZXBpYSIsICJibG9vbSIsCiAgICAgICAgICAgICAgImJsb29tIHYyIiwgImFtcGxpZnkiLCAiZGlzY3JldGUiLCAidGhlcm1hbCIsCiAgICAgICAgICAgICAgInBvc3Rlcml6ZSIsICJpbmZsYXRlIiwgImJldmVsIiwgImxpcXVpZnkiLCAicmlwcGxlIiwKICAgICAgICAgICAgICAiZXJvZGUiLCAidG9ybiIsICJkaXNvbHZlIiwgImRpc3BsYWNlbWVudCIsICJncmFpbiIKICAgICAgICAgICAgXSwKICAgICAgICAgIH0sCiAgICAgICAgICBESVNUT1JUSU9OOiB7CiAgICAgICAgICAgIGFjY2VwdFJlcG9ydGVyczogdHJ1ZSwKICAgICAgICAgICAgaXRlbXM6IFsiYnVsZ2UiLCAid2hpcmwiLCAicmlwcGxlIiwgInNob2Nrd2F2ZSJdCiAgICAgICAgICB9LAogICAgICAgICAgbWFza0FUVHM6IHsKICAgICAgICAgICAgYWNjZXB0UmVwb3J0ZXJzOiBmYWxzZSwKICAgICAgICAgICAgaXRlbXM6IFsKICAgICAgICAgICAgICB7InRleHQiOiJ4IHBvc2l0aW9uIiwgInZhbHVlIjoiMCJ9LAogICAgICAgICAgICAgIHsidGV4dCI6InkgcG9zaXRpb24iLCAidmFsdWUiOiIxIn0sCiAgICAgICAgICAgICAgeyJ0ZXh0Ijoic2l6ZSIsICJ2YWx1ZSI6IjIifQogICAgICAgICAgICBdCiAgICAgICAgICB9LAogICAgICAgICAgT1VUTElORVM6IHsgYWNjZXB0UmVwb3J0ZXJzOiB0cnVlLCBpdGVtczogWyJmaWxsZWQiLCAic29saWQiXSB9LAogICAgICAgICAgQVhJU0VTOiB7IGFjY2VwdFJlcG9ydGVyczogZmFsc2UsIGl0ZW1zOiBbInggYXhpcyIsICJ5IGF4aXMiLCAiYm90aCBheGVzIl0gfSwKICAgICAgICAgIFNQTElUVElORzogeyBhY2NlcHRSZXBvcnRlcnM6IHRydWUsIGl0ZW1zOiBbImNvbG9yIHNwbGl0IiwgImFiYmVyYXRpb24iLCAiY2hyb21hdGljIGFiZXJyYXRpb24iXSB9LAogICAgICAgICAgTUFTS0lORzogewogICAgICAgICAgICBhY2NlcHRSZXBvcnRlcnM6IGZhbHNlLAogICAgICAgICAgICBpdGVtczogW3sidGV4dCI6ImVyYXNlIiwgInZhbHVlIjoib3V0In0sIHsidGV4dCI6Im92ZXJsYXkiLCAidmFsdWUiOiIgIn1dCiAgICAgICAgICB9LAogICAgICAgICAgQkxFTkRJTkc6IHsKICAgICAgICAgICAgYWNjZXB0UmVwb3J0ZXJzOiB0cnVlLAogICAgICAgICAgICBpdGVtczogWwogICAgICAgICAgICAgICJub3JtYWwiLCAibXVsdGlwbHkiLCAic2NyZWVuIiwgIm92ZXJsYXkiLCAiZXhjbHVzaW9uIiwKICAgICAgICAgICAgICAiY29sb3ItZG9kZ2UiLCAiY29sb3ItYnVybiIsICJoYXJkLWxpZ2h0IiwgInNvZnQtbGlnaHQiLAogICAgICAgICAgICAgICJkaWZmZXJlbmNlIiwgImx1bWlub3NpdHkiCiAgICAgICAgICAgIF0KICAgICAgICAgIH0sCiAgICAgICAgICBCTEVORElORzI6IHsKICAgICAgICAgICAgYWNjZXB0UmVwb3J0ZXJzOiB0cnVlLAogICAgICAgICAgICBpdGVtczogWwogICAgICAgICAgICAgICJtdWx0aXBseSIsICJzY3JlZW4iLCAiZGFya2VuIiwgImxpZ2h0ZW4iLAogICAgICAgICAgICAgICJvdmVybGF5IiwgImhhcmQtbGlnaHQiLCAic29mdC1saWdodCIsICJkaWZmZXJlbmNlIiwKICAgICAgICAgICAgICAiZXhjbHVzaW9uIiwgImh1ZSIsICJzYXR1cmF0aW9uIiwgImNvbG9yIiwgImx1bWlub3NpdHkiCiAgICAgICAgICAgIF0KICAgICAgICAgIH0KICAgICAgICB9LAogICAgICB9OwogICAgfQoKICAgIHNvdXJjZVN3aXRjaCgpIHsgc3ByaXRlID0gc3ByaXRlID8gZmFsc2UgOiB0cnVlLCBTY3JhdGNoLnZtLmV4dGVuc2lvbk1hbmFnZXIucmVmcmVzaEJsb2NrcygpIH0KICAgIGZpbHRlcldhcm4oKSB7CiAgICAgIGFsZXJ0KGBVbmZvcnR1bmF0ZWx5LCBkdWUgdG8gdmFyaW91cyBsaW1pdGF0aW9ucywgbm90IEFMTCBlZmZlY3RzIChlc3BlY2lhbGx5IHRoZSBGb3JtYXR0aW5nIEJsb2Nrcykgd2lsbCB3b3JrIG9uIHRoZSBDYW52YXMuLi4KICAgICAgICBcbllvdSBhcmUgd2VsY29tZSB0byBleHBlcmltZW50IGJ5IG1ha2luZyB5b3VyIG93biBzdmcgZmlsdGVycyBhbmQgdXNpbmcgdGhlbSBvbiB0aGUgY2FudmFzIWApOwogICAgfQoKICAgIHNldFNwcml0ZUVmZmVjdChhcmdzLCB1dGlsKSB7IHJldHVybiB0aGlzLnNldE1haW5FZmZlY3QoYXJncywgZmFsc2UsIHV0aWwpIH0KICAgIGFzeW5jIHNldEltYWdlRWZmZWN0KGFyZ3MpIHsgcmV0dXJuIGF3YWl0IHRoaXMuc2V0TWFpbkVmZmVjdChhcmdzLCB0cnVlKSB9CgogICAgYXBwbHlDdXN0b21TcHJpdGUoYXJncywgdXRpbCkgeyByZXR1cm4gdGhpcy5jdXN0b21GaWx0ZXIoYXJncywgZmFsc2UsIHV0aWwpIH0KICAgIGFzeW5jIGFwcGx5Q3VzdG9tSW1hZ2UoYXJncykgeyByZXR1cm4gYXdhaXQgdGhpcy5jdXN0b21GaWx0ZXIoYXJncywgdHJ1ZSkgfQoKICAgIHNldFNwcml0ZU1vdGlvbihhcmdzLCB1dGlsKSB7IHJldHVybiB0aGlzLm1vdGlvbkJsdXIoYXJncywgZmFsc2UsIHV0aWwpIH0KICAgIGFzeW5jIHNldEltYWdlTW90aW9uKGFyZ3MpIHsgcmV0dXJuIGF3YWl0IHRoaXMubW90aW9uQmx1cihhcmdzLCB0cnVlKSB9CgogICAgc2V0U3ByaXRlQmxlbmQoYXJncywgdXRpbCkgeyByZXR1cm4gdGhpcy5ibGVuZFR5cGUoYXJncywgZmFsc2UsIHV0aWwpIH0KICAgIGFzeW5jIHNldEltYWdlQmxlbmQoYXJncykgeyByZXR1cm4gYXdhaXQgdGhpcy5ibGVuZFR5cGUoYXJncywgdHJ1ZSkgfQoKICAgIGh1ZVNwcml0ZShhcmdzLCB1dGlsKSB7IHJldHVybiB0aGlzLnNldEh1ZShhcmdzLCBmYWxzZSwgdXRpbCkgfQogICAgYXN5bmMgaHVlSW1hZ2UoYXJncykgeyByZXR1cm4gYXdhaXQgdGhpcy5zZXRIdWUoYXJncywgdHJ1ZSkgfQoKICAgIHNwcml0ZVNoYWRvdyhhcmdzLCB1dGlsKSB7IHJldHVybiB0aGlzLmFkZFNoYWRvdyhhcmdzLCBmYWxzZSwgdXRpbCkgfQogICAgYXN5bmMgaW1hZ2VTaGFkb3coYXJncykgeyByZXR1cm4gYXdhaXQgdGhpcy5hZGRTaGFkb3coYXJncywgdHJ1ZSkgfQoKICAgIG91dGxpbmVTcHJpdGUoYXJncywgdXRpbCkgeyByZXR1cm4gdGhpcy5hZGRPdXRsaW5lKGFyZ3MsIGZhbHNlLCB1dGlsKSB9CiAgICBhc3luYyBvdXRsaW5lSW1hZ2UoYXJncykgeyByZXR1cm4gYXdhaXQgdGhpcy5hZGRPdXRsaW5lKGFyZ3MsIHRydWUpIH0KCiAgICBzcGxpdFNwcml0ZShhcmdzLCB1dGlsKSB7IHJldHVybiB0aGlzLmNvbG9yU3BsaXQoYXJncywgZmFsc2UsIHV0aWwpIH0KICAgIGFzeW5jIHNwbGl0SW1hZ2UoYXJncykgeyByZXR1cm4gYXdhaXQgdGhpcy5jb2xvclNwbGl0KGFyZ3MsIHRydWUpIH0KCiAgICB3YXZlU3ByaXRlKGFyZ3MsIHV0aWwpIHsgcmV0dXJuIHRoaXMud2F2ZUVmZmVjdChhcmdzLCBmYWxzZSwgdXRpbCkgfQogICAgYXN5bmMgd2F2ZUltYWdlKGFyZ3MpIHsgcmV0dXJuIGF3YWl0IHRoaXMud2F2ZUVmZmVjdChhcmdzLCB0cnVlKSB9CgogICAgZGlzdG9ydFNwcml0ZShhcmdzLCB1dGlsKSB7IHJldHVybiB0aGlzLnNldERpc3RvcnQoYXJncywgZmFsc2UsIGZhbHNlLCB1dGlsKSB9CiAgICBhc3luYyBkaXN0b3J0SW1hZ2UoYXJncykgeyByZXR1cm4gYXdhaXQgdGhpcy5zZXREaXN0b3J0KGFyZ3MsIHRydWUsIGZhbHNlKSB9CiAgICBkaXN0b3J0U3ByaXRlSW1hZ2UoYXJncywgdXRpbCkgeyByZXR1cm4gdGhpcy5zZXREaXN0b3J0KGFyZ3MsIGZhbHNlLCB0cnVlLCB1dGlsKSB9CiAgICBhc3luYyBkaXN0b3J0SW1hZ2VJbWFnZShhcmdzKSB7IHJldHVybiBhd2FpdCB0aGlzLnNldERpc3RvcnQoYXJncywgdHJ1ZSwgdHJ1ZSkgfQoKICAgIGdsaXRjaFNwcml0ZShhcmdzLCB1dGlsKSB7IHJldHVybiB0aGlzLnNldEdsaXRjaChhcmdzLCBmYWxzZSwgdXRpbCkgfQogICAgYXN5bmMgZ2xpdGNoSW1hZ2UoYXJncykgeyByZXR1cm4gYXdhaXQgdGhpcy5zZXRHbGl0Y2goYXJncywgdHJ1ZSkgfQoKICAgIHRpbGVTcHJpdGUoYXJncywgdXRpbCkgeyByZXR1cm4gdGhpcy5hZGRUaWxlKGFyZ3MsIGZhbHNlLCB1dGlsKSB9CiAgICBhc3luYyB0aWxlSW1hZ2UoYXJncykgeyByZXR1cm4gYXdhaXQgdGhpcy5hZGRUaWxlKGFyZ3MsIHRydWUpIH0KCiAgICBhcHBseVNwcml0ZUxpZ2h0KGFyZ3MsIHV0aWwpIHsgcmV0dXJuIHRoaXMubGlnaHRpbmcoYXJncywgZmFsc2UsIHV0aWwpIH0KICAgIGFzeW5jIGFwcGx5SW1hZ2VMaWdodChhcmdzKSB7IHJldHVybiBhd2FpdCB0aGlzLmxpZ2h0aW5nKGFyZ3MsIHRydWUpIH0KICAgIGFkdlNwcml0ZUxpZ2h0KGFyZ3MsIHV0aWwpIHsgcmV0dXJuIHRoaXMuYWR2TGlnaHRpbmcoYXJncywgZmFsc2UsIHV0aWwpIH0KICAgIGFzeW5jIGFkdkltYWdlTGlnaHQoYXJncykgeyByZXR1cm4gYXdhaXQgdGhpcy5hZHZMaWdodGluZyhhcmdzLCB0cnVlKSB9CgogICAgbWFza1Nwcml0ZShhcmdzLCB1dGlsKSB7IHJldHVybiB0aGlzLm1hc2soYXJncywgZmFsc2UsIHV0aWwpIH0KICAgIGFzeW5jIG1hc2tJbWFnZShhcmdzKSB7IHJldHVybiBhd2FpdCB0aGlzLm1hc2soYXJncywgdHJ1ZSkgfQoKICAgIHVuQ2xpcFNQUihhcmdzLCB1dGlsKSB7IHJldHVybiB0aGlzLnVwZGF0ZVZpZXcoYXJncywgZmFsc2UsIHV0aWwpIH0KICAgIGFzeW5jIHVuQ2xpcElNRyhhcmdzKSB7IHJldHVybiBhd2FpdCB0aGlzLnVwZGF0ZVZpZXcoYXJncywgdHJ1ZSkgfQoKICAgIHNldFhZKGFyZ3MsIHV0aWwpIHsgcmV0dXJuIHRoaXMuc2V0QVRUKGFyZ3MsIGZhbHNlLCAwLCB1dGlsKSB9CiAgICBhc3luYyBzZXRYWTIoYXJncykgeyByZXR1cm4gYXdhaXQgdGhpcy5zZXRBVFQoYXJncywgdHJ1ZSwgMCkgfQogICAgc2V0RElSKGFyZ3MsIHV0aWwpIHsgcmV0dXJuIHRoaXMuc2V0QVRUKGFyZ3MsIGZhbHNlLCAxLCB1dGlsKSB9CiAgICBhc3luYyBzZXRESVIyKGFyZ3MpIHsgcmV0dXJuIGF3YWl0IHRoaXMuc2V0QVRUKGFyZ3MsIHRydWUsIDEpIH0KICAgIHNldFNDQUxFKGFyZ3MsIHV0aWwpIHsgcmV0dXJuIHRoaXMuc2V0QVRUKGFyZ3MsIGZhbHNlLCAyLCB1dGlsKSB9CiAgICBhc3luYyBzZXRTQ0FMRTIoYXJncykgeyByZXR1cm4gYXdhaXQgdGhpcy5zZXRBVFQoYXJncywgdHJ1ZSwgMikgfQogICAgc2V0U0tFVyhhcmdzLCB1dGlsKSB7IHJldHVybiB0aGlzLnNldEFUVChhcmdzLCBmYWxzZSwgMywgdXRpbCkgfQogICAgYXN5bmMgc2V0U0tFVzIoYXJncykgeyByZXR1cm4gYXdhaXQgdGhpcy5zZXRBVFQoYXJncywgdHJ1ZSwgMykgfQoKICAgIHNldE1hc2tYWShhcmdzKSB7IG1hc2tPcHRpb25zWzBdID0gU2NyYXRjaC5DYXN0LnRvTnVtYmVyKGFyZ3MueCk7IG1hc2tPcHRpb25zWzFdID0gU2NyYXRjaC5DYXN0LnRvTnVtYmVyKGFyZ3MueSkgKiAtMSB9CiAgICBzZXRNYXNrU1ooYXJncykgeyBtYXNrT3B0aW9uc1syXSA9IFNjcmF0Y2guQ2FzdC50b051bWJlcihhcmdzLlNJWkUpIH0KICAgIG1hc2tBVFQoYXJncykgeyByZXR1cm4gbWFza09wdGlvbnNbYXJncy5BVFRdIH0KCiAgICBhc3luYyBzZXRNYWluRWZmZWN0KGFyZ3MsIGlzSW1hZ2UsIHV0aWwpIHsKICAgICAgbGV0IHN2ZzsKICAgICAgaWYgKGFyZ3MuU1BSSVRFID09PSAiX215c2VsZl8iKSBzdmcgPSBhd2FpdCB0aGlzLmZpbmRBc3NldCh1dGlsKTsKICAgICAgZWxzZSBzdmcgPSBpc0ltYWdlID8gYXdhaXQgdGhpcy5nZXRJbWFnZShhcmdzLlNQUklURSkgOiBhd2FpdCB0aGlzLmdldFNWRyhhcmdzLlNQUklURSk7CiAgICAgIGlmIChzdmcpIHsKICAgICAgICBsZXQgZmlsdGVyRWxlbWVudDsKICAgICAgICBsZXQgYW10SW4gPSBhcmdzLk5VTTsKICAgICAgICBsZXQgc2NhbGVGYWN0b3I7CiAgICAgICAgbGV0IHRhYmxlVmFsdWU7CiAgICAgICAgc3dpdGNoIChhcmdzLkVGRkVDVCkgewogICAgICAgICAgY2FzZSAic2F0dXJhdGlvbiI6CiAgICAgICAgICAgIGZpbHRlckVsZW1lbnQgPSBgPGZpbHRlciBpZD0ic2F0dXJhdGlvbiI+PGZlQ29sb3JNYXRyaXggdHlwZT0ic2F0dXJhdGUiIHZhbHVlcz0iJHthbXRJbiAvIDEwMH0iPjwvZmVDb2xvck1hdHJpeD48L2ZpbHRlcj5gOwogICAgICAgICAgICBicmVhazsKICAgICAgICAgIGNhc2UgInNlcGlhIjoKICAgICAgICAgICAgc2NhbGVGYWN0b3IgPSBhbXRJbiAvIDEwMDsKICAgICAgICAgICAgZmlsdGVyRWxlbWVudCA9IGA8ZmlsdGVyIGlkPSJzZXBpYSI+PGZlQ29sb3JNYXRyaXggdHlwZT0ibWF0cml4IiB2YWx1ZXM9IiR7MC4zOTMgKiBzY2FsZUZhY3Rvcn0gJHswLjc2OSAqIHNjYWxlRmFjdG9yfSAkezAuMTg5ICogc2NhbGVGYWN0b3J9IDAgMCAkezAuMzQ5ICogc2NhbGVGYWN0b3J9ICR7MC42ODYgKiBzY2FsZUZhY3Rvcn0gJHswLjE2OCAqIHNjYWxlRmFjdG9yfSAwIDAgJHswLjI3MiAqIHNjYWxlRmFjdG9yfSAkezAuNTM0ICogc2NhbGVGYWN0b3J9ICR7MC4xMzEgKiBzY2FsZUZhY3Rvcn0gMCAwIDAgMCAwIDEgMCI+PC9mZUNvbG9yTWF0cml4PjwvZmlsdGVyPmA7CiAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgY2FzZSAiYW1wbGlmeSI6CiAgICAgICAgICAgIGFtdEluID0gYW10SW4gKyAxMDA7CiAgICAgICAgICAgIGZpbHRlckVsZW1lbnQgPSBgPGZpbHRlciBpZD0iYW1wbGlmeSI+PGZlQ29tcG9uZW50VHJhbnNmZXI+PGZlRnVuY1IgdHlwZT0ibGluZWFyIiBzbG9wZT0iJHthbXRJbiAvIDEwMH0iPjwvZmVGdW5jUj48ZmVGdW5jRyB0eXBlPSJsaW5lYXIiIHNsb3BlPSIke2FtdEluIC8gMTAwfSI+PC9mZUZ1bmNHPjxmZUZ1bmNCIHR5cGU9ImxpbmVhciIgc2xvcGU9IiR7YW10SW4gLyAxMDB9Ij48L2ZlRnVuY0I+PC9mZUNvbXBvbmVudFRyYW5zZmVyPjwvZmlsdGVyPmA7CiAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgY2FzZSAiaW5mbGF0ZSI6CiAgICAgICAgICAgIGZpbHRlckVsZW1lbnQgPSBgPGZpbHRlciBpZD0iaW5mbGF0ZSI+PGZlTW9ycGhvbG9neSBpbj0iU291cmNlR3JhcGhpYyIgb3BlcmF0b3I9ImRpbGF0ZSIgcmFkaXVzPSIke01hdGguYWJzKGFtdEluIC8gMTApfSI+PC9mZU1vcnBob2xvZ3k+PC9maWx0ZXI+YDsKICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICBjYXNlICJjb250cmFzdCI6CiAgICAgICAgICAgIGFtdEluID0gYW10SW4gKyAxMDA7CiAgICAgICAgICAgIGZpbHRlckVsZW1lbnQgPSBgPGZpbHRlciBpZD0iY29udHJhc3QiPjxmZUNvbXBvbmVudFRyYW5zZmVyPjxmZUZ1bmNSIHR5cGU9ImdhbW1hIiBleHBvbmVudD0iJHthbXRJbiAvIDEwMH0iIGFtcGxpdHVkZT0iJHthbXRJbiAvIDEwMH0iIG9mZnNldD0iMCIgLz48ZmVGdW5jRyB0eXBlPSJnYW1tYSIgZXhwb25lbnQ9IiR7YW10SW4gLyAxMDB9IiBhbXBsaXR1ZGU9IiR7YW10SW4gLyAxMDB9IiBvZmZzZXQ9IjAiIC8+PGZlRnVuY0IgdHlwZT0iZ2FtbWEiIGV4cG9uZW50PSIke2FtdEluIC8gMTAwfSIgYW1wbGl0dWRlPSIke2FtdEluIC8gMTAwfSIgb2Zmc2V0PSIwIiAvPjwvZmVDb21wb25lbnRUcmFuc2Zlcj48L2ZpbHRlcj5gCiAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgY2FzZSAiZGlzY3JldGUiOgogICAgICAgICAgICBmaWx0ZXJFbGVtZW50ID0gYDxmaWx0ZXIgaWQ9ImRpc2NyZXRlIj48ZmVDb21wb25lbnRUcmFuc2Zlcj48ZmVGdW5jUiB0eXBlPSJkaXNjcmV0ZSIgdGFibGVWYWx1ZXM9IjAgJHthbXRJbiAvIDEwMH0gMCAxIi8+PGZlRnVuY0cgdHlwZT0iZGlzY3JldGUiIHRhYmxlVmFsdWVzPSIwICR7YW10SW4gLyAxMDB9IDAgMSIvPjxmZUZ1bmNCIHR5cGU9ImRpc2NyZXRlIiB0YWJsZVZhbHVlcz0iMCAke2FtdEluIC8gMTAwfSAwIDEiLz48ZmVGdW5jQSB0eXBlPSJkaXNjcmV0ZSIgdGFibGVWYWx1ZXM9IjAgJHthbXRJbiAvIDEwMH0gMCAxIi8+PC9mZUNvbXBvbmVudFRyYW5zZmVyPjwvZmlsdGVyPmAKICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICBjYXNlICJ0b3JuIjoKICAgICAgICAgICAgZmlsdGVyRWxlbWVudCA9IGA8ZmlsdGVyIGlkPSJ0b3JuIj48ZmVPZmZzZXQgaW49IlNvdXJjZUdyYXBoaWMiIGR4PSIke2FtdEluIC8gLTR9IiBkeT0iJHthbXRJbiAvIC00fSIgcmVzdWx0PSJvZmZzZXRSZXMiIC8+PGZlVHVyYnVsZW5jZSB0eXBlPSJ0dXJidWxlbmNlIiBiYXNlRnJlcXVlbmN5PSIwLjA1IiBudW1PY3RhdmVzPSIyIiByZXN1bHQ9InR1cmJ1bGVuY2UiIC8+PGZlRGlzcGxhY2VtZW50TWFwIGluMj0idHVyYnVsZW5jZSIgaW49Im9mZnNldFJlcyIgc2NhbGU9IiR7YW10SW59IiB4Q2hhbm5lbFNlbGVjdG9yPSJSIiB5Q2hhbm5lbFNlbGVjdG9yPSJHIiAvPjwvZmlsdGVyPmA7CiAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgY2FzZSAiYmV2ZWwiOgogICAgICAgICAgICBmaWx0ZXJFbGVtZW50ID0gYDxmaWx0ZXIgaWQ9ImJldmVsIj48ZmVHYXVzc2lhbkJsdXIgc3RkRGV2aWF0aW9uPSIke01hdGguYWJzKGFyZ3MuTlVNIC8gMTApfSIgaW49IlNvdXJjZUFscGhhIiByZXN1bHQ9IkJMVVIiLz48ZmVTcGVjdWxhckxpZ2h0aW5nIHN1cmZhY2VTY2FsZT0iMiIgc3BlY3VsYXJDb25zdGFudD0iMiIgc3BlY3VsYXJFeHBvbmVudD0iMjAiIGxpZ2h0aW5nLWNvbG9yPSIjZmZmZmZmIiBpbj0iQkxVUiIgcmVzdWx0PSJTUEVDVUxBUiI+PGZlUG9pbnRMaWdodCB4PSI0MCIgeT0iLTMwIiB6PSI1MCIgLz48L2ZlU3BlY3VsYXJMaWdodGluZz48ZmVDb21wb3NpdGUgb3BlcmF0b3I9ImluIiBpbj0iU1BFQ1VMQVIiIGluMj0iU291cmNlQWxwaGEiIHJlc3VsdD0iQ09NUE9TSVRFIi8+PGZlTWVyZ2U+PGZlTWVyZ2VOb2RlIGluPSJTb3VyY2VHcmFwaGljIiAvPjxmZU1lcmdlTm9kZSBpbj0iQ09NUE9TSVRFIi8+PC9mZU1lcmdlPjwvZmlsdGVyPmA7CiAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgY2FzZSAibGlxdWlmeSI6CiAgICAgICAgICAgIGZpbHRlckVsZW1lbnQgPSBgPGZpbHRlciBpZD0ibGlxdWlmeSIgd2lkdGg9IjE1MCUiIGhlaWdodD0iMTYwJSIgeD0iLTI1JSIgeT0iLTI1JSI+PGZlVHVyYnVsZW5jZSBiYXNlRnJlcXVlbmN5PSIwLjA1IiB0eXBlPSJmcmFjdGFsTm9pc2UiIG51bU9jdGF2ZXM9IjEiIHNlZWQ9IiR7TWF0aC5yb3VuZChNYXRoLmFicyhNYXRoLnNpbihEYXRlLm5vdygpIC8gNSkgKiAxMCkpfSIgcmVzdWx0PSJCT1RUT00tU1BMQVNIXzEwIj48L2ZlVHVyYnVsZW5jZT48ZmVHYXVzc2lhbkJsdXIgc3RkRGV2aWF0aW9uPSIke2FtdElufSIgaW49IlNvdXJjZUdyYXBoaWMiIHJlc3VsdD0iQk9UVE9NLVNQTEFTSF8yMCI+PC9mZUdhdXNzaWFuQmx1cj48ZmVEaXNwbGFjZW1lbnRNYXAgc2NhbGU9IiR7YW10SW4gKiAxMH0iIGluPSJCT1RUT00tU1BMQVNIXzIwIiBpbjI9IkJPVFRPTS1TUExBU0hfMTAiIHJlc3VsdD0iQk9UVE9NLVNQTEFTSF8zMCI+PC9mZURpc3BsYWNlbWVudE1hcD48ZmVDb21wb3NpdGUgb3BlcmF0b3I9ImluIiBpbj0iQk9UVE9NLVNQTEFTSF8zMCIgaW4yPSJTb3VyY2VHcmFwaGljIiByZXN1bHQ9IkJPVFRPTS1TUExBU0hfNDAiPjwvZmVDb21wb3NpdGU+PGZlVHVyYnVsZW5jZSBiYXNlRnJlcXVlbmN5PSIwLjEiIHR5cGU9ImZyYWN0YWxOb2lzZSIgbnVtT2N0YXZlcz0iMSIgc2VlZD0iJHtNYXRoLnJvdW5kKE1hdGguYWJzKE1hdGguc2luKERhdGUubm93KCkgLyA1KSAqIDEwKSl9IiByZXN1bHQ9Ik1JRERMRS1TUExBU0hfMTAiPjwvZmVUdXJidWxlbmNlPjxmZUdhdXNzaWFuQmx1ciBpbj0iU291cmNlR3JhcGhpYyIgc3RkRGV2aWF0aW9uPSIke2FtdEluICogMC4wMX0iIHJlc3VsdD0iTUlERExFLVNQTEFTSF8yMCI+PC9mZUdhdXNzaWFuQmx1cj48ZmVEaXNwbGFjZW1lbnRNYXAgaW49Ik1JRERMRS1TUExBU0hfMjAiIGluMj0iTUlERExFLVNQTEFTSF8xMCIgc2NhbGU9IiR7YW10SW4gKiAyLjV9IiByZXN1bHQ9Ik1JRERMRS1TUExBU0hfMzAiPjwvZmVEaXNwbGFjZW1lbnRNYXA+PGZlQ29tcG9zaXRlIGluPSJNSURETEUtU1BMQVNIXzMwIiBpbjI9IlNvdXJjZUdyYXBoaWMiIG9wZXJhdG9yPSJpbiIgcmVzdWx0PSJNSURETEUtU1BMQVNIXzQwIj48L2ZlQ29tcG9zaXRlPjxmZVR1cmJ1bGVuY2UgYmFzZUZyZXF1ZW5jeT0iMC4wNyIgdHlwZT0iZnJhY3RhbE5vaXNlIiBudW1PY3RhdmVzPSIxIiBzZWVkPSIke01hdGgucm91bmQoTWF0aC5hYnMoTWF0aC5zaW4oRGF0ZS5ub3coKSAvIDUpICogMTApKX0iIHJlc3VsdD0iVE9QLVNQTEFTSF8xMCI+PC9mZVR1cmJ1bGVuY2U+PGZlR2F1c3NpYW5CbHVyIHN0ZERldmlhdGlvbj0iJHthbXRJbiAqIDAuMDM1fSIgaW49IlNvdXJjZUdyYXBoaWMiIHJlc3VsdD0iVE9QLVNQTEFTSF8yMCI+PC9mZUdhdXNzaWFuQmx1cj48ZmVEaXNwbGFjZW1lbnRNYXAgc2NhbGU9IiR7YW10SW4gKiAyMn0iIGluPSJUT1AtU1BMQVNIXzIwIiBpbjI9IlRPUC1TUExBU0hfMTAiIHJlc3VsdD0iVE9QLVNQTEFTSF8zMCI+PC9mZURpc3BsYWNlbWVudE1hcD48ZmVDb21wb3NpdGUgb3BlcmF0b3I9ImluIiBpbj0iVE9QLVNQTEFTSF8zMCIgaW4yPSJTb3VyY2VHcmFwaGljIiByZXN1bHQ9IlRPUC1TUExBU0hfNDAiPjwvZmVDb21wb3NpdGU+PC9maWx0ZXI+YDsKICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICBjYXNlICJyaXBwbGUiOgogICAgICAgICAgICBpZiAoIWRpc3BsYWNlbWVudFNyQ3NbMl0pIGF3YWl0IHRoaXMuZ2V0U291cmNlcygpOwogICAgICAgICAgICBzY2FsZUZhY3RvciA9IChhbXRJbiAqIDEuNSkudG9GaXhlZCgyKTsKICAgICAgICAgICAgdGFibGVWYWx1ZSA9IFsxMDAgKyAyICogKDEwMCAtIGFtdEluKSAvIDJdOwogICAgICAgICAgICB0YWJsZVZhbHVlWzFdID0gKDEwMCAtIHRhYmxlVmFsdWVbMF0pIC8gMjsKICAgICAgICAgICAgZmlsdGVyRWxlbWVudCA9IGA8ZmlsdGVyIGlkPSJyaXBwbGUiIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIj48ZmVJbWFnZSB4bGluazpocmVmPSIke2Rpc3BsYWNlbWVudFNyQ3NbMl19IiB4PSIke3RhYmxlVmFsdWVbMV19JSIgeT0iJHt0YWJsZVZhbHVlWzFdfSUiIHdpZHRoPSIke3RhYmxlVmFsdWVbMF19JSIgaGVpZ2h0PSIke3RhYmxlVmFsdWVbMF19JSIgcmVzdWx0PSJyaXBwbGVJbWFnZSIgLz48ZmVEaXNwbGFjZW1lbnRNYXAgeENoYW5uZWxTZWxlY3Rvcj0iUiIgeUNoYW5uZWxTZWxlY3Rvcj0iRyIgaW49IlNvdXJjZUdyYXBoaWMiIGluMj0icmlwcGxlSW1hZ2UiIHJlc3VsdD0iZGlzcGxhY2VtZW50TWFwIiBjb2xvci1pbnRlcnBvbGF0aW9uLWZpbHRlcnM9InNSR0IiIHNjYWxlPSIke2FtdElufSIgLz48ZmVDb21wb3NpdGUgb3BlcmF0b3I9ImluIiBpbjI9InJpcHBsZUltYWdlIj48L2ZlQ29tcG9zaXRlPjxmZUNvbXBvc2l0ZSBvcGVyYXRvcj0ib3ZlciIgaW4yPSJTb3VyY2VHcmFwaGljIj48L2ZlQ29tcG9zaXRlPjwvZmlsdGVyPmA7CiAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgY2FzZSAidGhlcm1hbCI6CiAgICAgICAgICAgIHRhYmxlVmFsdWUgPSBbYDAgMC4xMjUgJHswLjggKiAoYW10SW4gLyAxMCl9ICR7MSAqIChhbXRJbiAvIDEwKX0gJHsxICogKGFtdEluIC8gMTApfWAsIGAwIDAgMCAkezAuODQzICogKGFtdEluIC8gMTApfSAxYCwgYDAgJHswLjU0OSAqIChhbXRJbiAvIDEwKX0gJHswLjQ2NiAqIChhbXRJbiAvIDEwKX0gMCAxYF07CiAgICAgICAgICAgIGZpbHRlckVsZW1lbnQgPSBgPGZpbHRlciBpZD0idGhlcm1hbCIgY29sb3ItaW50ZXJwb2xhdGlvbi1maWx0ZXJzPSJzUkdCIj48ZmVDb21wb25lbnRUcmFuc2Zlcj48ZmVGdW5jUiB0eXBlPSJ0YWJsZSIgdGFibGVWYWx1ZXM9IiR7dGFibGVWYWx1ZVswXX0iIC8+PGZlRnVuY0cgdHlwZT0idGFibGUiIHRhYmxlVmFsdWVzPSIke3RhYmxlVmFsdWVbMV19IiAvPjxmZUZ1bmNCIHR5cGU9InRhYmxlIiB0YWJsZVZhbHVlcz0iJHt0YWJsZVZhbHVlWzJdfSIgLz48L2ZlQ29tcG9uZW50VHJhbnNmZXI+PC9maWx0ZXI+YDsKICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICBjYXNlICJlcm9kZSI6CiAgICAgICAgICAgIGZpbHRlckVsZW1lbnQgPSBgPGZpbHRlciBpZD0iZXJvZGUiPjxmZU1vcnBob2xvZ3kgaW49IlNvdXJjZUdyYXBoaWMiIG9wZXJhdG9yPSJlcm9kZSIgcmFkaXVzPSIke01hdGguYWJzKGFtdEluIC8gMTApfSI+PC9mZU1vcnBob2xvZ3k+PC9maWx0ZXI+YDsKICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICBjYXNlICJkaXNvbHZlIjoKICAgICAgICAgICAgZmlsdGVyRWxlbWVudCA9IGA8ZmlsdGVyIGlkPSJkaXNvbHZlIj48ZmVUdXJidWxlbmNlIGJhc2VGcmVxdWVuY3k9IjAuMSIgdHlwZT0iZnJhY3RhbE5vaXNlIiBudW1PY3RhdmVzPSI1IiByZXN1bHQ9IlRVUkJVTEVOQ0UiLz48ZmVEaXNwbGFjZW1lbnRNYXAgaW49IlNvdXJjZUdyYXBoaWMiIGluMj0iVFVSQlVMRU5DRSIgc2NhbGU9IiR7YW10SW59IiB4Q2hhbm5lbFNlbGVjdG9yPSJSIiB5Q2hhbm5lbFNlbGVjdG9yPSJHIi8+PGZlVGlsZSByZXN1bHQ9IlRJTEVEIi8+PGZlQ29tcG9zaXRlIG9wZXJhdG9yPSJpbiIgaW49IlRJTEVEIiBpbjI9IlNvdXJjZUdyYXBoaWMiLz48L2ZpbHRlcj5gOwogICAgICAgICAgICBicmVhazsKICAgICAgICAgIGNhc2UgInBvc3Rlcml6ZSI6CiAgICAgICAgICAgIGZpbHRlckVsZW1lbnQgPSBgPGZpbHRlciBpZD0icG9zdGVyaXplIj48ZmVDb21wb25lbnRUcmFuc2Zlcj48ZmVGdW5jUiB0eXBlPSJkaXNjcmV0ZSIgdGFibGVWYWx1ZXM9IjAgJHthbXRJbiAvIDEwMH0gMSIgLz48ZmVGdW5jRyB0eXBlPSJkaXNjcmV0ZSIgdGFibGVWYWx1ZXM9IjAgJHthbXRJbiAvIDEwMH0gMSIgLz48ZmVGdW5jQiB0eXBlPSJkaXNjcmV0ZSIgdGFibGVWYWx1ZXM9IjAgJHthbXRJbiAvIDEwMH0gMSIgLz48L2ZlQ29tcG9uZW50VHJhbnNmZXI+PC9maWx0ZXI+YDsKICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICBjYXNlICJkaXNwbGFjZW1lbnQiOgogICAgICAgICAgICBhbXRJbiA9IGFtdEluID09PSA2NCA/IDY1IDogYW10SW47CiAgICAgICAgICAgIGZpbHRlckVsZW1lbnQgPSBgPGZpbHRlciBpZD0iZGlzcGxhY2VtZW50Ij48ZmVUdXJidWxlbmNlIHR5cGU9ImZyYWN0YWxOb2lzZSIgYmFzZUZyZXF1ZW5jeT0iJHsoMTAwMDAwMCAtIChNYXRoLmFicyhhbXRJbiAtIDEwMCkgKiAxMDAwMCkpIC8gMTAwfSIgbnVtT2N0YXZlcz0iMiIgc2VlZD0iJHtNYXRoLnJvdW5kKE1hdGgucmFuZG9tKCkgKiAxMDApfSIgcmVzdWx0PSJ0dXJidWxlbmNlIiAvPjxmZURpc3BsYWNlbWVudE1hcCBpbj0iU291cmNlR3JhcGhpYyIgaW4yPSJ0dXJidWxlbmNlIiBzY2FsZT0iMjUiIHhDaGFubmVsU2VsZWN0b3I9IlIiIHlDaGFubmVsU2VsZWN0b3I9IkciIC8+PC9maWx0ZXI+YDsKICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICBjYXNlICJncmFpbiI6CiAgICAgICAgICAgIGlmIChhbXRJbiA9PT0gMCkgcmV0dXJuIHN2ZzsKICAgICAgICAgICAgZmlsdGVyRWxlbWVudCA9IGA8ZmlsdGVyIGlkPSJncmFpbiI+PGZlVHVyYnVsZW5jZSB0eXBlPSJmcmFjdGFsTm9pc2UiIGJhc2VGcmVxdWVuY3k9IiR7YW10SW4gLyAxMDB9IiBudW1PY3RhdmVzPSIzIiByZXN1bHQ9InR1cmJ1bGVuY2UiIHNlZWQ9IiR7TWF0aC5yb3VuZCgxMCAqIChNYXRoLnNpbihEYXRlLm5vdygpICogNTApKSl9IiAvPjxmZUNvbG9yTWF0cml4IGluPSJ0dXJidWxlbmNlIiB0eXBlPSJzYXR1cmF0ZSIgdmFsdWVzPSIwIiByZXN1bHQ9ImdyYWluIiAvPjxmZUNvbXBvc2l0ZSBpbj0iZ3JhaW4iIGluMj0iU291cmNlR3JhcGhpYyIgb3BlcmF0b3I9ImluIiAvPjxmZUNvbXBvc2l0ZSBpbj0iMC41IiBpbjI9IlNvdXJjZUdyYXBoaWMiIG9wZXJhdG9yPSJvdmVyIiAvPjwvZmlsdGVyPmA7CiAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgY2FzZSAiYmxvb20iOgogICAgICAgICAgICBmaWx0ZXJFbGVtZW50ID0gYDxmaWx0ZXIgaWQ9ImJsb29tIj48ZmVHYXVzc2lhbkJsdXIgaW49IlNvdXJjZUdyYXBoaWMiIHN0ZERldmlhdGlvbj0iNSIgLz48ZmVDb21wb3NpdGUgaW4yPSJTb3VyY2VHcmFwaGljIiBvcGVyYXRvcj0iYXJpdGhtZXRpYyIgazI9IiR7YW10SW4gLyAxMDB9IiBrMz0iMSIgLz48L2ZpbHRlcj5gOwogICAgICAgICAgICBicmVhazsKICAgICAgICAgIGNhc2UgImJsb29tIHYyIjoKICAgICAgICAgICAgZmlsdGVyRWxlbWVudCA9IGA8ZmlsdGVyIGlkPSJibG9vbS12MiI+PGZlR2F1c3NpYW5CbHVyIGluPSJTb3VyY2VHcmFwaGljIiBzdGREZXZpYXRpb249IjUiIC8+PGZlQ29tcG9zaXRlIGluMj0iU291cmNlR3JhcGhpYyIgb3BlcmF0b3I9ImFyaXRobWV0aWMiIGsyPSIke2FtdEluIC8gMTAwfSIgazM9IjEiIGNvbG9yLWludGVycG9sYXRpb24tZmlsdGVycz0ic1JHQiIgLz48L2ZpbHRlcj5gOwogICAgICAgICAgICBicmVhazsKICAgICAgICAgIGRlZmF1bHQ6CiAgICAgICAgICAgIGZpbHRlckVsZW1lbnQgPSBgPGZpbHRlciBpZD0iYmx1ciI+PGZlR2F1c3NpYW5CbHVyIHN0ZERldmlhdGlvbj0iJHtNYXRoLmFicyhhbXRJbil9IiBpbj0iU291cmNlR3JhcGhpYyIgcmVzdWx0PSJCTFVSIj48L2ZlR2F1c3NpYW5CbHVyPjwvZmlsdGVyPmA7CiAgICAgICAgfQogICAgICAgIHJldHVybiB0aGlzLmZpbHRlckFwcGxpZXIoc3ZnLCBmaWx0ZXJFbGVtZW50LCBhcmdzLkVGRkVDVC5yZXBsYWNlQWxsKCIgIiwgIi0iKSk7CiAgICAgIH0KICAgICAgcmV0dXJuIHN2ZzsKICAgIH0KCiAgICBhc3luYyBtb3Rpb25CbHVyKGFyZ3MsIGlzSW1hZ2UsIHV0aWwpIHsKICAgICAgbGV0IHN2ZzsKICAgICAgaWYgKGFyZ3MuU1BSSVRFID09PSAiX215c2VsZl8iKSBzdmcgPSBhd2FpdCB0aGlzLmZpbmRBc3NldCh1dGlsKTsKICAgICAgZWxzZSBzdmcgPSBpc0ltYWdlID8gYXdhaXQgdGhpcy5nZXRJbWFnZShhcmdzLlNQUklURSkgOiBhd2FpdCB0aGlzLmdldFNWRyhhcmdzLlNQUklURSk7CiAgICAgIGlmIChzdmcpIHsKICAgICAgICBjb25zdCBmaWx0ZXJFbGVtZW50ID0gYDxmaWx0ZXIgaWQ9Im1vdGlvbkJsdXIiPjxmZUdhdXNzaWFuQmx1ciBzdGREZXZpYXRpb249IiR7TWF0aC5hYnMoYXJncy5YKX0sICR7TWF0aC5hYnMoYXJncy5ZKX0iIGluPSJTb3VyY2VHcmFwaGljIiByZXN1bHQ9IkJMVVIiPjwvZmVHYXVzc2lhbkJsdXI+PC9maWx0ZXI+YDsKICAgICAgICByZXR1cm4gdGhpcy5maWx0ZXJBcHBsaWVyKHN2ZywgZmlsdGVyRWxlbWVudCwgIm1vdGlvbkJsdXIiKTsKICAgICAgfQogICAgICByZXR1cm4gc3ZnOwogICAgfQoKICAgIGFzeW5jIGJsZW5kVHlwZShhcmdzLCBpc0ltYWdlLCB1dGlsKSB7CiAgICAgIGxldCBzdmc7CiAgICAgIGlmIChhcmdzLlNQUklURSA9PT0gIl9teXNlbGZfIikgc3ZnID0gYXdhaXQgdGhpcy5maW5kQXNzZXQodXRpbCk7CiAgICAgIGVsc2Ugc3ZnID0gaXNJbWFnZSA/IGF3YWl0IHRoaXMuZ2V0SW1hZ2UoYXJncy5TUFJJVEUpIDogYXdhaXQgdGhpcy5nZXRTVkcoYXJncy5TUFJJVEUpOwogICAgICBpZiAoc3ZnKSB7CiAgICAgICAgY29uc3QgZmlsdGVyRWxlbWVudCA9IGA8ZmlsdGVyIGlkPSJibGVuZC0ke2FyZ3MuQkxFTkR9Ij48ZmVCbGVuZCBpbj0iU291cmNlR3JhcGhpYyIgaW4yPSJTb3VyY2VHcmFwaGljIiBtb2RlPSIke2FyZ3MuQkxFTkR9IiAvPjwvZmlsdGVyPmA7CiAgICAgICAgcmV0dXJuIHRoaXMuZmlsdGVyQXBwbGllcihzdmcsIGZpbHRlckVsZW1lbnQsIGBibGVuZC0ke2FyZ3MuQkxFTkR9YCk7CiAgICAgIH0KICAgICAgcmV0dXJuIHN2ZzsKICAgIH0KCiAgICBhc3luYyBjdXN0b21GaWx0ZXIoYXJncywgaXNJbWFnZSwgdXRpbCkgewogICAgICBsZXQgc3ZnOwogICAgICBpZiAoYXJncy5TUFJJVEUgPT09ICJfbXlzZWxmXyIpIHN2ZyA9IGF3YWl0IHRoaXMuZmluZEFzc2V0KHV0aWwpOwogICAgICBlbHNlIHN2ZyA9IGlzSW1hZ2UgPyBhd2FpdCB0aGlzLmdldEltYWdlKGFyZ3MuU1BSSVRFKSA6IGF3YWl0IHRoaXMuZ2V0U1ZHKGFyZ3MuU1BSSVRFKTsKICAgICAgaWYgKHN2ZykgcmV0dXJuIHRoaXMuZmlsdGVyQXBwbGllcihzdmcsIGFyZ3MuRUZGRUNULCBhcmdzLklEKTsKICAgICAgcmV0dXJuIHN2ZzsKICAgIH0KCiAgICBhc3luYyBzZXRIdWUoYXJncywgaXNJbWFnZSwgdXRpbCkgewogICAgICBsZXQgdGFyZ2V0Q29sb3JIZXggPSBhcmdzLkNPTE9SOwogICAgICBsZXQgc3ZnOwogICAgICBpZiAoYXJncy5TUFJJVEUgPT09ICJfbXlzZWxmXyIpIHN2ZyA9IGF3YWl0IHRoaXMuZmluZEFzc2V0KHV0aWwpOwogICAgICBlbHNlIHN2ZyA9IGlzSW1hZ2UgPyBhd2FpdCB0aGlzLmdldEltYWdlKGFyZ3MuU1BSSVRFKSA6IGF3YWl0IHRoaXMuZ2V0U1ZHKGFyZ3MuU1BSSVRFKTsKICAgICAgaWYgKHN2ZykgewogICAgICAgIHRhcmdldENvbG9ySGV4ID0gdGFyZ2V0Q29sb3JIZXgucmVwbGFjZSgvXiMvLCAiIik7CiAgICAgICAgY29uc3QgciA9IHBhcnNlSW50KHRhcmdldENvbG9ySGV4LnNsaWNlKDAsIDIpLCAxNik7CiAgICAgICAgY29uc3QgZyA9IHBhcnNlSW50KHRhcmdldENvbG9ySGV4LnNsaWNlKDIsIDQpLCAxNik7CiAgICAgICAgY29uc3QgYiA9IHBhcnNlSW50KHRhcmdldENvbG9ySGV4LnNsaWNlKDQsIDYpLCAxNik7CiAgICAgICAgY29uc3QgZmlsdGVyTWF0cml4ID0gWwogICAgICAgICAgciAvIDI1NSwgMCwgMCwgMCwgMCwKICAgICAgICAgIDAsIGcgLyAyNTUsIDAsIDAsIDAsCiAgICAgICAgICAwLCAwLCBiIC8gMjU1LCAwLCAwLAogICAgICAgICAgMCwgMCwgMCwgMSwgMAogICAgICAgIF0uam9pbigiICIpOwogICAgICAgIGNvbnN0IGZpbHRlckVsZW1lbnQgPSBgPGZpbHRlciBpZD0iaHVlIj48ZmVDb2xvck1hdHJpeCBpbj0iU291cmNlR3JhcGhpYyIgdHlwZT0ibWF0cml4IiB2YWx1ZXM9IiR7ZmlsdGVyTWF0cml4fSI+PC9mZUNvbG9yTWF0cml4PjwvZmlsdGVyPmA7CiAgICAgICAgcmV0dXJuIHRoaXMuZmlsdGVyQXBwbGllcihzdmcsIGZpbHRlckVsZW1lbnQsICJodWUiKTsKICAgICAgfQogICAgICByZXR1cm4gc3ZnOwogICAgfQoKICAgIGFzeW5jIGFkZFNoYWRvdyhhcmdzLCBpc0ltYWdlLCB1dGlsKSB7CiAgICAgIGxldCBzdmc7CiAgICAgIGlmIChhcmdzLlNQUklURSA9PT0gIl9teXNlbGZfIikgc3ZnID0gYXdhaXQgdGhpcy5maW5kQXNzZXQodXRpbCk7CiAgICAgIGVsc2Ugc3ZnID0gaXNJbWFnZSA/IGF3YWl0IHRoaXMuZ2V0SW1hZ2UoYXJncy5TUFJJVEUpIDogYXdhaXQgdGhpcy5nZXRTVkcoYXJncy5TUFJJVEUpOwogICAgICBpZiAoc3ZnKSB7CiAgICAgICAgY29uc3QgcmdiQ29sb3IgPSB0aGlzLmhleFRvUmdiKGFyZ3MuQ09MT1IpOwogICAgICAgIGNvbnN0IGZpbHRlckVsZW1lbnQgPSBgPGZpbHRlciBpZD0ic2hhZG93Ij48ZmVEcm9wU2hhZG93IGR4PSIke2FyZ3MuWH0iIGR5PSIke2FyZ3MuWSAqIC0xfSIgc3RkRGV2aWF0aW9uPSIke2FyZ3MuTlVNIC8gMn0iIGZsb29kLWNvbG9yPSJyZ2IoJHtyZ2JDb2xvci5yfSwgJHtyZ2JDb2xvci5nfSwgJHtyZ2JDb2xvci5ifSkiLz48L2ZpbHRlcj5gOwogICAgICAgIHJldHVybiB0aGlzLmZpbHRlckFwcGxpZXIoc3ZnLCBmaWx0ZXJFbGVtZW50LCAic2hhZG93Iik7CiAgICAgIH0KICAgICAgcmV0dXJuIHN2ZzsKICAgIH0KCiAgICBhc3luYyBhZGRPdXRsaW5lKGFyZ3MsIGlzSW1hZ2UsIHV0aWwpIHsKICAgICAgbGV0IHN2ZzsKICAgICAgaWYgKGFyZ3MuU1BSSVRFID09PSAiX215c2VsZl8iKSBzdmcgPSBhd2FpdCB0aGlzLmZpbmRBc3NldCh1dGlsKTsKICAgICAgZWxzZSBzdmcgPSBpc0ltYWdlID8gYXdhaXQgdGhpcy5nZXRJbWFnZShhcmdzLlNQUklURSkgOiBhd2FpdCB0aGlzLmdldFNWRyhhcmdzLlNQUklURSk7CiAgICAgIGlmIChzdmcpIHsKICAgICAgICBsZXQgZmlsdGVyRWxlbWVudDsKICAgICAgICBjb25zdCByZ2JDb2xvciA9IHRoaXMuaGV4VG9SZ2IoYXJncy5DT0xPUik7CiAgICAgICAgbGV0IGVmZmVjdDsKICAgICAgICBpZiAoYXJncy5PVVRMSU5FID09PSAiZmlsbGVkIikgewogICAgICAgICAgZWZmZWN0ID0gImZpbGxlZC1vdXRsaW5lIjsKICAgICAgICAgIGZpbHRlckVsZW1lbnQgPSBgPGZpbHRlciBpZD0iZmlsbGVkLW91dGxpbmUiPjxmZU1vcnBob2xvZ3kgb3BlcmF0b3I9ImRpbGF0ZSIgcmFkaXVzPSIke2FyZ3MuTlVNfSIgaW49IlNvdXJjZUFscGhhIiByZXN1bHQ9InRoaWNrZW5lZCIgLz48ZmVDb21wb3NpdGUgb3BlcmF0b3I9Im92ZXIiIGluPSJTb3VyY2VHcmFwaGljIiBpbjI9InRoaWNrZW5lZCIgLz48ZmVGbG9vZCBmbG9vZC1jb2xvcj0icmdiKCR7cmdiQ29sb3Iucn0sICR7cmdiQ29sb3IuZ30sICR7cmdiQ29sb3IuYn0pIiByZXN1bHQ9ImZsb29kIi8+PGZlQ29tcG9zaXRlIG9wZXJhdG9yPSJpbiIgaW49ImZsb29kIiBpbjI9InRoaWNrZW5lZCIvPjxmZUNvbXBvc2l0ZSBvcGVyYXRvcj0ib3ZlciIgaW49IlNvdXJjZUdyYXBoaWMiIC8+PC9maWx0ZXI+YAogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBlZmZlY3QgPSAib3V0bGluZSI7CiAgICAgICAgICBmaWx0ZXJFbGVtZW50ID0gYDxmaWx0ZXIgaWQ9Im91dGxpbmUiPjxmZU1vcnBob2xvZ3kgb3BlcmF0b3I9ImRpbGF0ZSIgcmFkaXVzPSIke2FyZ3MuTlVNfSIgaW49IlNvdXJjZUFscGhhIiByZXN1bHQ9InRoaWNrZW5lZCIgLz48ZmVDb21wb3NpdGUgb3BlcmF0b3I9Im92ZXIiIGluPSJTb3VyY2VHcmFwaGljIiBpbjI9InRoaWNrZW5lZCIgLz48ZmVGbG9vZCBmbG9vZC1jb2xvcj0icmdiKCR7cmdiQ29sb3Iucn0sICR7cmdiQ29sb3IuZ30sICR7cmdiQ29sb3IuYn0pIiByZXN1bHQ9ImZsb29kIi8+PGZlQ29tcG9zaXRlIG9wZXJhdG9yPSJpbiIgaW49ImZsb29kIiBpbjI9InRoaWNrZW5lZCIvPjwvZmlsdGVyPmA7CiAgICAgICAgfQogICAgICAgIHJldHVybiB0aGlzLmZpbHRlckFwcGxpZXIoc3ZnLCBmaWx0ZXJFbGVtZW50LCBlZmZlY3QpOwogICAgICB9CiAgICAgIHJldHVybiBzdmc7CiAgICB9CgogICAgYXN5bmMgY29sb3JTcGxpdChhcmdzLCBpc0ltYWdlLCB1dGlsKSB7CiAgICAgIGxldCBzdmc7CiAgICAgIGlmIChhcmdzLlNQUklURSA9PT0gIl9teXNlbGZfIikgc3ZnID0gYXdhaXQgdGhpcy5maW5kQXNzZXQodXRpbCk7CiAgICAgIGVsc2Ugc3ZnID0gaXNJbWFnZSA/IGF3YWl0IHRoaXMuZ2V0SW1hZ2UoYXJncy5TUFJJVEUpIDogYXdhaXQgdGhpcy5nZXRTVkcoYXJncy5TUFJJVEUpOwogICAgICBpZiAoc3ZnKSB7CiAgICAgICAgbGV0IGZpbHRlckVsZW1lbnQ7CiAgICAgICAgbGV0IGVmZmVjdDsKICAgICAgICBpZiAoYXJncy5FRkZFQ1QuaW5jbHVkZXMoImNvbG9yIikpIHsKICAgICAgICAgIGVmZmVjdCA9ICJjb2xvci1zcGxpdCI7CiAgICAgICAgICBmaWx0ZXJFbGVtZW50ID0gYDxmaWx0ZXIgaWQ9ImNvbG9yLXNwbGl0Ij48ZmVGbG9vZCBmbG9vZC1jb2xvcj0iJHthcmdzLkNPTE9SMX0iIGZsb29kLW9wYWNpdHk9IjAuNSIgcmVzdWx0PSJSRUQiLz48ZmVGbG9vZCBmbG9vZC1jb2xvcj0iJHthcmdzLkNPTE9SMn0iIGZsb29kLW9wYWNpdHk9IjAuNSIgcmVzdWx0PSJHUkVFTiIvPjxmZUZsb29kIGZsb29kLWNvbG9yPSIke2FyZ3MuQ09MT1IzfSIgZmxvb2Qtb3BhY2l0eT0iMC41IiByZXN1bHQ9IkJMVUUiLz48ZmVDb21wb3NpdGUgb3BlcmF0b3I9ImluIiBpbj0iUkVEIiBpbjI9IlNvdXJjZUFscGhhIiByZXN1bHQ9IlJFRCIvPjxmZUNvbXBvc2l0ZSBvcGVyYXRvcj0iaW4iIGluPSJHUkVFTiIgaW4yPSJTb3VyY2VBbHBoYSIgcmVzdWx0PSJHUkVFTiIvPjxmZUNvbXBvc2l0ZSBvcGVyYXRvcj0iaW4iIGluPSJCTFVFIiBpbjI9IlNvdXJjZUFscGhhIiByZXN1bHQ9IkJMVUUiLz48ZmVPZmZzZXQgaW49IlJFRCIgZHg9IiR7YXJncy5YICogLTF9IiBkeT0iJHthcmdzLll9IiByZXN1bHQ9IlJFRF9PRkYiLz48ZmVPZmZzZXQgaW49IkdSRUVOIiBkeD0iJHthcmdzLlh9IiBkeT0iJHthcmdzLlkgKiAtMX0iIHJlc3VsdD0iR1JFRU5fT0ZGIi8+PGZlT2Zmc2V0IGluPSJCTFVFIiBkeD0iMCIgZHk9IjAiIHJlc3VsdD0iQkxVRV9PRkYiLz48ZmVCbGVuZCBtb2RlPSJzY3JlZW4iIGluPSJSRURfT0ZGIiBpbjI9IkdSRUVOX09GRiIgcmVzdWx0PSJSRyIvPjxmZUJsZW5kIG1vZGU9InNjcmVlbiIgaW49IlJHIiBpbjI9IkJMVUVfT0ZGIiByZXN1bHQ9IkZJTkFMX1JFU1VMVCIvPjwvZmlsdGVyPmA7CiAgICAgICAgfSBlbHNlIGlmIChhcmdzLkVGRkVDVC5pbmNsdWRlcygiY2hyb21hdGljIikpIHsKICAgICAgICAgIGNvbnN0IGNvbG9ycyA9IFt0aGlzLmhleFRvSHMoYXJncy5DT0xPUjEpLCB0aGlzLmhleFRvSHMoYXJncy5DT0xPUjIpXTsKICAgICAgICAgIGVmZmVjdCA9ICJjaHJvbWF0aWMtYWJiZXJhdGlvbiI7CiAgICAgICAgICBmaWx0ZXJFbGVtZW50ID0gYDxmaWx0ZXIgaWQ9ImNocm9tYXRpYy1hYmJlcmF0aW9uIj48ZmVPZmZzZXQgaW49IlNvdXJjZUdyYXBoaWMiIGR4PSIke2FyZ3MuWH0iIGR5PSIke2FyZ3MuWX0iIHJlc3VsdD0ibGF5ZXItb25lIiAvPjxmZUNvbXBvbmVudFRyYW5zZmVyIGluPSJsYXllci1vbmUiIHJlc3VsdD0iY3VzdG9tQ29sb3IxIj48ZmVGdW5jUiB0eXBlPSJ0YWJsZSIgdGFibGVWYWx1ZXM9IiR7Y29sb3JzWzBdLmh9LCAke2NvbG9yc1swXS5zfSwgMSIgLz48ZmVGdW5jRyB0eXBlPSJkaXNjcmV0ZSIgdGFibGVWYWx1ZXM9IjAiIC8+PGZlRnVuY0IgdHlwZT0iZGlzY3JldGUiIHRhYmxlVmFsdWVzPSIwIiAvPjwvZmVDb21wb25lbnRUcmFuc2Zlcj48ZmVPZmZzZXQgaW49IlNvdXJjZUdyYXBoaWMiIGR4PSIke2FyZ3MuWCAqIC0xfSIgZHk9IiR7YXJncy5ZICogLTF9IiByZXN1bHQ9ImxheWVyLXR3byIgLz48ZmVDb21wb25lbnRUcmFuc2ZlciBpbj0ibGF5ZXItdHdvIiByZXN1bHQ9ImN1c3RvbUNvbG9yMiI+PGZlRnVuY1IgdHlwZT0iZGlzY3JldGUiIHRhYmxlVmFsdWVzPSIwIiAvPjxmZUZ1bmNHIHR5cGU9ImlkZW50aXR5IiAvPjxmZUZ1bmNCIHR5cGU9InRhYmxlIiB0YWJsZVZhbHVlcz0iJHtjb2xvcnNbMV0uaH0sICR7Y29sb3JzWzFdLnN9LCAxIiAvPjwvZmVDb21wb25lbnRUcmFuc2Zlcj48ZmVCbGVuZCBpbj0iY3VzdG9tQ29sb3IxIiBpbjI9ImN1c3RvbUNvbG9yMiIgbW9kZT0ic2NyZWVuIiByZXN1bHQ9ImNvbG9yLXNwbGl0IiAvPjwvZmlsdGVyPmA7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIGVmZmVjdCA9ICJhYmJlcmF0aW9uIjsKICAgICAgICAgIGZpbHRlckVsZW1lbnQgPSBgPGZpbHRlciBpZD0iYWJiZXJhdGlvbiI+PGZlRmxvb2QgZmxvb2QtY29sb3I9IiR7YXJncy5DT0xPUjF9IiBmbG9vZC1vcGFjaXR5PSIwLjUiIHJlc3VsdD0iUkVEIi8+PGZlRmxvb2QgZmxvb2QtY29sb3I9IiR7YXJncy5DT0xPUjJ9IiBmbG9vZC1vcGFjaXR5PSIwLjUiIHJlc3VsdD0iR1JFRU4iLz48ZmVDb21wb3NpdGUgb3BlcmF0b3I9ImluIiBpbj0iU291cmNlR3JhcGhpYyIgaW4yPSJTb3VyY2VBbHBoYSIgcmVzdWx0PSJCTFVFIiAvPjxmZUNvbXBvc2l0ZSBvcGVyYXRvcj0iaW4iIGluPSJSRUQiIGluMj0iU291cmNlQWxwaGEiIHJlc3VsdD0iUkVEIi8+PGZlQ29tcG9zaXRlIG9wZXJhdG9yPSJpbiIgaW49IkdSRUVOIiBpbjI9IlNvdXJjZUFscGhhIiByZXN1bHQ9IkdSRUVOIi8+PGZlQ29tcG9zaXRlIG9wZXJhdG9yPSJpbiIgaW49IkJMVUUiIGluMj0iU291cmNlQWxwaGEiIHJlc3VsdD0iQkxVRSIvPjxmZU9mZnNldCBpbj0iUkVEIiBkeD0iJHthcmdzLlggKiAtMX0iIGR5PSIke2FyZ3MuWX0iIHJlc3VsdD0iUkVEX09GRiIvPjxmZU9mZnNldCBpbj0iR1JFRU4iIGR4PSIke2FyZ3MuWH0iIGR5PSIke2FyZ3MuWSAqIC0xfSIgcmVzdWx0PSJHUkVFTl9PRkYiLz48ZmVPZmZzZXQgaW49IkJMVUUiIGR4PSIwIiBkeT0iMCIgcmVzdWx0PSJCTFVFX09GRiIvPjxmZUJsZW5kIG1vZGU9InNjcmVlbiIgaW49IlJFRF9PRkYiIGluMj0iR1JFRU5fT0ZGIiByZXN1bHQ9IlJHIi8+PGZlQmxlbmQgbW9kZT0ic2NyZWVuIiBpbj0iUkciIGluMj0iQkxVRV9PRkYiIHJlc3VsdD0iRklOQUxfUkVTVUxUIi8+PGZlQ29tcG9zaXRlIG9wZXJhdG9yPSJvdmVyIiBpbj0iU291cmNlR3JhcGhpYyIgaW4yPSJGSU5BTF9SRVNVTFQiIC8+PC9maWx0ZXI+YDsKICAgICAgICB9CiAgICAgICAgcmV0dXJuIHRoaXMuZmlsdGVyQXBwbGllcihzdmcsIGZpbHRlckVsZW1lbnQsIGVmZmVjdCk7CiAgICAgIH0KICAgICAgcmV0dXJuIHN2ZzsKICAgIH0KCiAgICBhc3luYyB3YXZlRWZmZWN0KGFyZ3MsIGlzSW1hZ2UsIHV0aWwpIHsKICAgICAgbGV0IHN2ZzsKICAgICAgaWYgKGFyZ3MuU1BSSVRFID09PSAiX215c2VsZl8iKSBzdmcgPSBhd2FpdCB0aGlzLmZpbmRBc3NldCh1dGlsKTsKICAgICAgZWxzZSBzdmcgPSBpc0ltYWdlID8gYXdhaXQgdGhpcy5nZXRJbWFnZShhcmdzLlNQUklURSkgOiBhd2FpdCB0aGlzLmdldFNWRyhhcmdzLlNQUklURSk7CiAgICAgIGlmIChzdmcpIHsKICAgICAgICBjb25zdCBDaGFubmVsU2VsZWN0b3IgPSBbYXJncy5heGlzID09PSAieCBheGlzIiA/ICJBIiA6ICJSIiwgYXJncy5heGlzID09PSAieSBheGlzIiA/ICJBIiA6ICJHIl07CiAgICAgICAgY29uc3QgZmlsdGVyRWxlbWVudCA9IGA8ZmlsdGVyIGlkPSJ3YXZlIj48ZmVUdXJidWxlbmNlIHR5cGU9ImZyYWN0YWxOb2lzZSIgYmFzZUZyZXF1ZW5jeT0iJHthcmdzLlkgLyAxMDB9LCAke2FyZ3MuTlVNIC8gMTAwfSIgbnVtT2N0YXZlcz0iMiIgc2VlZD0iJHthcmdzLlNFRUR9IiByZXN1bHQ9InR1cmJ1bGVuY2UiIC8+PGZlRGlzcGxhY2VtZW50TWFwIGluPSJTb3VyY2VHcmFwaGljIiBpbjI9InR1cmJ1bGVuY2UiIHNjYWxlPSIyNSIgeENoYW5uZWxTZWxlY3Rvcj0iJHtDaGFubmVsU2VsZWN0b3JbMF19IiB5Q2hhbm5lbFNlbGVjdG9yPSIke0NoYW5uZWxTZWxlY3RvclsxXX0iIC8+PC9maWx0ZXI+YDsKICAgICAgICByZXR1cm4gdGhpcy5maWx0ZXJBcHBsaWVyKHN2ZywgZmlsdGVyRWxlbWVudCwgIndhdmUiKTsKICAgICAgfQogICAgICByZXR1cm4gc3ZnOwogICAgfQoKICAgIGFzeW5jIGFkZFRpbGUoYXJncywgaXNJbWFnZSwgdXRpbCkgewogICAgICBsZXQgc3ZnOwogICAgICBpZiAoYXJncy5TUFJJVEUgPT09ICJfbXlzZWxmXyIpIHN2ZyA9IGF3YWl0IHRoaXMuZmluZEFzc2V0KHV0aWwpOwogICAgICBlbHNlIHN2ZyA9IGlzSW1hZ2UgPyBhd2FpdCB0aGlzLmdldEltYWdlKGFyZ3MuU1BSSVRFKSA6IGF3YWl0IHRoaXMuZ2V0U1ZHKGFyZ3MuU1BSSVRFKTsKICAgICAgaWYgKHN2ZykgewogICAgICAgIGxldCBhdHRzID0gWy93aWR0aD0iKFteIl0qKSIvLmV4ZWMoc3ZnKSwgL2hlaWdodD0iKFteIl0qKSIvLmV4ZWMoc3ZnKV07CiAgICAgICAgYXR0cyA9IFsKICAgICAgICAgIFNjcmF0Y2guQ2FzdC50b051bWJlcihhdHRzWzBdID8gcGFyc2VGbG9hdChhdHRzWzBdWzFdKSA6IDEwMCksCiAgICAgICAgICBTY3JhdGNoLkNhc3QudG9OdW1iZXIoYXR0c1sxXSA/IHBhcnNlRmxvYXQoYXR0c1sxXVsxXSkgOiAxMDApCiAgICAgICAgXTsKICAgICAgICBjb25zdCBhbXRzID0gW01hdGguYWJzKDEwMCAtIFNjcmF0Y2guQ2FzdC50b051bWJlcihhcmdzLk5VTSkpLCBTY3JhdGNoLkNhc3QudG9OdW1iZXIoYXJncy54KSwgU2NyYXRjaC5DYXN0LnRvTnVtYmVyKGFyZ3MueSldOwogICAgICAgICBjb25zdCBmaWx0ZXJFbGVtZW50ID0KICAgICAgICAgYDxmaWx0ZXIgaWQ9InRpbGUiPjxmZUltYWdlIHg9IiR7YW10c1sxXX0iIHk9IiR7YW10c1syXX0iIHdpZHRoPSIke2FtdHNbMF0gLyBhdHRzWzBdICogMTAwfSUiIGhlaWdodD0iJHthbXRzWzBdIC8gYXR0c1sxXSAqIDEwMH0lIiB4bGluazpocmVmPSIke2F3YWl0IHRoaXMuc3ZnVG9CaXRtYXAoc3ZnLCBhdHRzWzBdLCBhdHRzWzFdKX0iLz48ZmVUaWxlIC8+PC9maWx0ZXI+YDsKICAgICAgICByZXR1cm4gdGhpcy5maWx0ZXJBcHBsaWVyKHN2ZywgZmlsdGVyRWxlbWVudCwgInRpbGUiKTsKICAgICAgfQogICAgICByZXR1cm4gc3ZnOwogICAgfQoKICAgIGFzeW5jIGxpZ2h0aW5nKGFyZ3MsIGlzSW1hZ2UsIHV0aWwpIHsKICAgICAgbGV0IHN2ZzsKICAgICAgaWYgKGFyZ3MuU1BSSVRFID09PSAiX215c2VsZl8iKSBzdmcgPSBhd2FpdCB0aGlzLmZpbmRBc3NldCh1dGlsKTsKICAgICAgZWxzZSBzdmcgPSBpc0ltYWdlID8gYXdhaXQgdGhpcy5nZXRJbWFnZShhcmdzLlNQUklURSkgOiBhd2FpdCB0aGlzLmdldFNWRyhhcmdzLlNQUklURSk7CiAgICAgIGlmIChzdmcpIHsKICAgICAgICBjb25zdCB3aWR0aE1hdGNoID0gL3dpZHRoPSIoW14iXSopIi8uZXhlYyhzdmcpOwogICAgICAgIGNvbnN0IGhlaWdodE1hdGNoID0gL2hlaWdodD0iKFteIl0qKSIvLmV4ZWMoc3ZnKTsKICAgICAgICBjb25zdCBwb3MgPSBbCiAgICAgICAgICBTY3JhdGNoLkNhc3QudG9OdW1iZXIoYXJncy5YKSArIFNjcmF0Y2guQ2FzdC50b051bWJlcih3aWR0aE1hdGNoID8gcGFyc2VGbG9hdCh3aWR0aE1hdGNoWzFdKSAvIDIgOiBwYXJzZUZsb2F0KFNjcmF0Y2gucmVuZGVyZXIuY2FudmFzLnN0eWxlLndpZHRoKSAvIDIpLAogICAgICAgICAgKFNjcmF0Y2guQ2FzdC50b051bWJlcihhcmdzLlkpICogLTEpICsgU2NyYXRjaC5DYXN0LnRvTnVtYmVyKGhlaWdodE1hdGNoID8gcGFyc2VGbG9hdChoZWlnaHRNYXRjaFsxXSkgLyAyIDogcGFyc2VGbG9hdChTY3JhdGNoLnJlbmRlcmVyLmNhbnZhcy5zdHlsZS5oZWlnaHQpIC8gMikKICAgICAgICBdOwogICAgICAgIGNvbnN0IG9mZiA9IGFyZ3MuU1BSSVRFID09PSAiX2NhbnZhc18iID8gdm0ucmVuZGVyZXIuY2FudmFzLndpZHRoIC8gdm0ucnVudGltZS5zdGFnZVdpZHRoIDogMTsKICAgICAgICBjb25zdCBmaWx0ZXJFbGVtZW50ID0gYDxmaWx0ZXIgaWQ9ImxpZ2h0aW5nIj48ZmVTcGVjdWxhckxpZ2h0aW5nIHJlc3VsdD0ic3BlY091dCIgc3BlY3VsYXJFeHBvbmVudD0iMjAiIGxpZ2h0aW5nLWNvbG9yPSIke2FyZ3MuQ09MT1J9Ij48ZmVQb2ludExpZ2h0IHg9IiR7cG9zWzBdICogMX0iIHk9IiR7cG9zWzFdICogMX0iIHo9IiR7U2NyYXRjaC5DYXN0LnRvTnVtYmVyKGFyZ3MuTlVNKSAqIG9mZn0iIC8+PC9mZVNwZWN1bGFyTGlnaHRpbmc+PGZlQ29tcG9zaXRlIGluPSJTb3VyY2VHcmFwaGljIiBpbjI9InNwZWNPdXQiIG9wZXJhdG9yPSJhcml0aG1ldGljIiBrMT0iMCIgazI9IjEiIGszPSIxIiBrND0iMCIgLz48L2ZpbHRlcj5gOwogICAgICAgIHJldHVybiB0aGlzLmZpbHRlckFwcGxpZXIoc3ZnLCBmaWx0ZXJFbGVtZW50LCAibGlnaHRpbmciKTsKICAgICAgfQogICAgICByZXR1cm4gc3ZnOwogICAgfQoKICAgIGFzeW5jIGFkdkxpZ2h0aW5nKGFyZ3MsIGlzSW1hZ2UsIHV0aWwpIHsKICAgICAgbGV0IHN2ZzsKICAgICAgaWYgKGFyZ3MuU1BSSVRFID09PSAiX215c2VsZl8iKSBzdmcgPSBhd2FpdCB0aGlzLmZpbmRBc3NldCh1dGlsKTsKICAgICAgZWxzZSBzdmcgPSBpc0ltYWdlID8gYXdhaXQgdGhpcy5nZXRJbWFnZShhcmdzLlNQUklURSkgOiBhd2FpdCB0aGlzLmdldFNWRyhhcmdzLlNQUklURSk7CiAgICAgIGNvbnN0IHNvdXJjZSA9IGFyZ3MuTUFQLnN0YXJ0c1dpdGgoImRhdGE6aW1hZ2UvIikgfHwgYXJncy5NQVAuc3RhcnRzV2l0aCgiaHR0cCIpID8gYXJncy5NQVAgOiBgZGF0YTppbWFnZS9zdmcreG1sO2Jhc2U2NCwke2J0b2EoYXJncy5NQVApfWA7CiAgICAgIGlmIChzdmcpIHsKICAgICAgICBjb25zdCB3aWR0aE1hdGNoID0gL3dpZHRoPSIoW14iXSopIi8uZXhlYyhzdmcpOwogICAgICAgIGNvbnN0IGhlaWdodE1hdGNoID0gL2hlaWdodD0iKFteIl0qKSIvLmV4ZWMoc3ZnKTsKICAgICAgICBjb25zdCBzaXplID0gWwogICAgICAgICAgU2NyYXRjaC5DYXN0LnRvTnVtYmVyKHdpZHRoTWF0Y2ggPyBwYXJzZUZsb2F0KHdpZHRoTWF0Y2hbMV0pIDogcGFyc2VGbG9hdChTY3JhdGNoLnJlbmRlcmVyLmNhbnZhcy5zdHlsZS53aWR0aCkpLAogICAgICAgICAgU2NyYXRjaC5DYXN0LnRvTnVtYmVyKGhlaWdodE1hdGNoID8gcGFyc2VGbG9hdChoZWlnaHRNYXRjaFsxXSkgOiBwYXJzZUZsb2F0KFNjcmF0Y2gucmVuZGVyZXIuY2FudmFzLnN0eWxlLmhlaWdodCkpCiAgICAgICAgXTsKICAgICAgICBjb25zdCBmaWx0ZXJFbGVtZW50ID0gYDxmaWx0ZXIgaWQ9ImFkdkxpZ2h0Ij48ZmVJbWFnZSB4bGluazpocmVmPSIke3NvdXJjZX0iIHJlc3VsdD0ibm9ybWFsTWFwIiB3aWR0aD0iJHtzaXplWzBdfSIgaGVpZ2h0PSIke3NpemVbMV19IiB4PSIxIiB5PSIxIiAvPjxmZUNvbXBvbmVudFRyYW5zZmVyIGluPSJub3JtYWxNYXAiPjxmZUZ1bmNSIHR5cGU9ImRpc2NyZXRlIiB0YWJsZVZhbHVlcz0iMCIgLz48ZmVGdW5jRyB0eXBlPSJkaXNjcmV0ZSIgdGFibGVWYWx1ZXM9IjAiIC8+PGZlRnVuY0IgdHlwZT0idGFibGUiIHRhYmxlVmFsdWVzPSIwIDEiIC8+PC9mZUNvbXBvbmVudFRyYW5zZmVyPjxmZUJsZW5kIGluPSJTb3VyY2VHcmFwaGljIiBpbjI9Im5vcm1hbE1hcCIgbW9kZT0iJHthcmdzLkJMRU5EfSIgLz48ZmVDb21wb3NpdGUgaW4yPSJTb3VyY2VBbHBoYSIgb3BlcmF0b3I9ImluIiAvPjwvZmlsdGVyPmA7CiAgICAgICAgcmV0dXJuIHRoaXMuZmlsdGVyQXBwbGllcihzdmcsIGZpbHRlckVsZW1lbnQsICJhZHZMaWdodCIpOwogICAgICB9CiAgICAgIHJldHVybiBzdmc7CiAgICB9CgogICAgYXN5bmMgc2V0RGlzdG9ydChhcmdzLCBpc0ltYWdlLCBvdmVycmlkZSwgdXRpbCkgewogICAgICBsZXQgc3ZnOwogICAgICBpZiAoYXJncy5TUFJJVEUgPT09ICJfbXlzZWxmXyIpIHN2ZyA9IGF3YWl0IHRoaXMuZmluZEFzc2V0KHV0aWwpOwogICAgICBlbHNlIHN2ZyA9IGlzSW1hZ2UgPyBhd2FpdCB0aGlzLmdldEltYWdlKGFyZ3MuU1BSSVRFKSA6IGF3YWl0IHRoaXMuZ2V0U1ZHKGFyZ3MuU1BSSVRFKTsKICAgICAgaWYgKHN2ZykgewogICAgICAgIGxldCBzb3VyY2U7CiAgICAgICAgaWYgKG92ZXJyaWRlKSB7CiAgICAgICAgICBzb3VyY2UgPSBhcmdzLkVGRkVDVC5zdGFydHNXaXRoKCJkYXRhOmltYWdlLyIpID8gYXJncy5FRkZFQ1QgOiBgZGF0YTppbWFnZS9zdmcreG1sO2Jhc2U2NCwke2J0b2EoYXJncy5FRkZFQ1QpfWA7CiAgICAgICAgfSBlbHNlIHsgc291cmNlID0gYXJncy5FRkZFQ1QgPT09ICJidWxnZSIgPyAwIDogYXJncy5FRkZFQ1QgPT09ICJ3aGlybCIgPyAxIDogYXJncy5FRkZFQ1QgPT09ICJyaXBwbGUiID8gMiA6IDMgfQogICAgICAgIGNvbnN0IG11bCA9IGFyZ3MuU1BSSVRFID09PSAiX2NhbnZhc18iID8gdm0ucmVuZGVyZXIuY2FudmFzLndpZHRoIC8gdm0ucnVudGltZS5zdGFnZVdpZHRoICogMiA6IDE7CiAgICAgICAgY29uc3QgYW10cyA9IFtTY3JhdGNoLkNhc3QudG9OdW1iZXIoYXJncy5OVU0pLCBTY3JhdGNoLkNhc3QudG9OdW1iZXIoYXJncy5YKSwgU2NyYXRjaC5DYXN0LnRvTnVtYmVyKGFyZ3MuWSldOwogICAgICAgIGlmICghZGlzcGxhY2VtZW50U3JDc1syXSAmJiAhb3ZlcnJpZGUpIGF3YWl0IHRoaXMuZ2V0U291cmNlcygpOwogICAgICAgIGxldCB0YWJsZVZhbHVlID0gWzEwMCArIDIgKiAoMTAwIC0gYW10c1swXSkgLyAyXTsKICAgICAgICB0YWJsZVZhbHVlWzFdID0gKDEwMCAtIHRhYmxlVmFsdWVbMF0pIC8gMjsKICAgICAgICBjb25zdCBmaWx0ZXJFbGVtZW50ID1gPGZpbHRlciBpZD0iJHtvdmVycmlkZSA/ICJjdXN0b21EaXN0b3J0IiA6IGFyZ3MuRUZGRUNUfSIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiPgogICAgICAgIDxmZUltYWdlIGlkPSJkTWFwUyIgeGxpbms6aHJlZj0iJHtvdmVycmlkZSA/IHNvdXJjZSA6IGRpc3BsYWNlbWVudFNyQ3Nbc291cmNlXX0iIHg9IiR7KHRhYmxlVmFsdWVbMV0gKyBhbXRzWzFdKSAqIG11bH0lIiB5PSIkeyh0YWJsZVZhbHVlWzFdIC0gYW10c1syXSkgKiBtdWx9JSIgd2lkdGg9IiR7dGFibGVWYWx1ZVswXSAqIG11bH0lIiBoZWlnaHQ9IiR7dGFibGVWYWx1ZVswXSAqIG11bH0lIiByZXN1bHQ9ImRpc3RvcnRJbWciIC8+CiAgICAgICAgPGZlRGlzcGxhY2VtZW50TWFwIGlkPSJkTWFwUmVzIiB4Q2hhbm5lbFNlbGVjdG9yPSJSIiB5Q2hhbm5lbFNlbGVjdG9yPSJHIiBpbj0iU291cmNlR3JhcGhpYyIgaW4yPSJkaXN0b3J0SW1nIiByZXN1bHQ9ImRpc3BsYWNlbWVudE1hcCIgY29sb3ItaW50ZXJwb2xhdGlvbi1maWx0ZXJzPSJzUkdCIiBzY2FsZT0iJHthbXRzWzBdfSIgLz48ZmVDb21wb3NpdGUgb3BlcmF0b3I9ImluIiBpbjI9ImRpc3RvcnRJbWciPjwvZmVDb21wb3NpdGU+CiAgICAgICAgJHthbXRzWzBdIDwgMCAmJiBhcmdzLkVGRkVDVCAhPT0gInJpcHBsZSIgPyAiIiA6IGA8ZmVDb21wb3NpdGUgb3BlcmF0b3I9Im92ZXIiIGluMj0iU291cmNlR3JhcGhpYyI+PC9mZUNvbXBvc2l0ZT5gfTwvZmlsdGVyPmA7CiAgICAgICAgcmV0dXJuIHRoaXMuZmlsdGVyQXBwbGllcihzdmcsIGZpbHRlckVsZW1lbnQsIG92ZXJyaWRlID8gImN1c3RvbURpc3RvcnQiIDogYXJncy5FRkZFQ1QpOwogICAgICB9CiAgICAgIHJldHVybiBzdmc7CiAgICB9CgogICAgYXN5bmMgZGlzdG9ydFByZXNldChhcmdzKSB7CiAgICAgIGNvbnN0IHNvdXJjZSA9IHsKICAgICAgICBidWxnZSA6IDAsIHdoaXJsIDogMSwgcmlwcGxlIDogMiwgc2hvY2t3YXZlIDogMwogICAgICB9OwogICAgICBpZiAoIWRpc3BsYWNlbWVudFNyQ3NbMl0pIGF3YWl0IHRoaXMuZ2V0U291cmNlcygpOwogICAgICByZXR1cm4gZGlzcGxhY2VtZW50U3JDc1tzb3VyY2VbYXJncy5UWVBFXV0gfHwgIiI7CiAgICB9CgogICAgYXN5bmMgc2V0R2xpdGNoKGFyZ3MsIGlzSW1hZ2UsIHV0aWwpIHsKICAgICAgbGV0IHN2ZzsKICAgICAgaWYgKGFyZ3MuU1BSSVRFID09PSAiX215c2VsZl8iKSBzdmcgPSBhd2FpdCB0aGlzLmZpbmRBc3NldCh1dGlsKTsKICAgICAgZWxzZSBzdmcgPSBpc0ltYWdlID8gYXdhaXQgdGhpcy5nZXRJbWFnZShhcmdzLlNQUklURSkgOiBhd2FpdCB0aGlzLmdldFNWRyhhcmdzLlNQUklURSk7CiAgICAgIGlmIChzdmcpIHsKICAgICAgICBjb25zdCBvZmYgPSAodm0ucmVuZGVyZXIuY2FudmFzLndpZHRoIC8gdm0ucnVudGltZS5zdGFnZVdpZHRoKSAqICh2bS5yZW5kZXJlci5jYW52YXMud2lkdGggLyB2bS5ydW50aW1lLnN0YWdlV2lkdGgpOwogICAgICAgIGNvbnN0IG11bCA9IGFyZ3MuU1BSSVRFID09PSAiX2NhbnZhc18iID8gW29mZiAqIDEwMDAsIGFyZ3MuTlVNICogKG9mZiAqIDEwKV0gOiBbMjAwLCBhcmdzLk5VTV07CiAgICAgICAgY29uc3QgYXhpcyA9IGFyZ3MuYXhpcyA9PT0gInggYXhpcyIgPyAxIDogYXJncy5heGlzID09PSAieSBheGlzIiA/IDIgOiAzOwogICAgICAgIGNvbnN0IGZpbHRlckVsZW1lbnQgPSBgPGZpbHRlciBpZD0iZ2xpdGNoIj48ZmVPZmZzZXQgaW49IlNvdXJjZUdyYXBoaWMiIGR4PSIke2FyZ3MuWH0iIGR5PSIke2FyZ3MuWX0iIHJlc3VsdD0ib2ZmMWIiLz48ZmVPZmZzZXQgaW49IlNvdXJjZUdyYXBoaWMiIGR4PSItJHthcmdzLlh9IiBkeT0iJHthcmdzLll9IiByZXN1bHQ9Im9mZjJiIi8+CiAgICAgICAgICA8ZmVNZXJnZSAke2F4aXMgPT09IDEgPyBgeD0iLTUwJSIgeT0iJHtNYXRoLnJhbmRvbSgpICogMTAwfSUiYCA6IGF4aXMgPT09IDIgPyBgeD0iJHtNYXRoLnJhbmRvbSgpICogMTAwfSUiIHk9Ii01MCUiYCA6IGB4PSIke01hdGgucmFuZG9tKCkgKiAxMDB9JSIgeT0iJHtNYXRoLnJhbmRvbSgpICogMTAwfSUiYH0KICAgICAgICAgICAgd2lkdGg9IiR7YXhpcyA9PT0gMSB8fCBheGlzID09PSAzID8gYCR7bXVsWzBdfSVgIDogbXVsWzFdICsgIiUifSIgaGVpZ2h0PSIke2F4aXMgPiAxID8gYCR7bXVsWzBdfSVgIDogbXVsWzFdICsgIiUifSIgcmVzdWx0PSJtZXJnZTEiPgogICAgICAgICAgICA8ZmVNZXJnZU5vZGUgaW49IlNvdXJjZUdyYXBoaWMiIC8+PGZlTWVyZ2VOb2RlIGluPSJvZmYxYiIgLz48L2ZlTWVyZ2U+PGZlQ29sb3JNYXRyaXggaW49Im1lcmdlMSIgdHlwZT0ibWF0cml4IiB2YWx1ZXM9IjEgMCAwIDAgMCAgMCAxIDAgMCAwICAwIDAgMSAwIDAgIDAgMCAwICR7TWF0aC5yYW5kb20oKSAqIDAuNSArIDAuNX0gMCIgcmVzdWx0PSJ0aW50ZWQxIi8+CiAgICAgICAgICA8ZmVNZXJnZSAke2F4aXMgPT09IDEgPyBgeD0iLTUwJSIgeT0iJHtNYXRoLnJhbmRvbSgpICogMTAwfSUiYCA6IGF4aXMgPT09IDIgPyBgeD0iJHtNYXRoLnJhbmRvbSgpICogMTAwfSUiIHk9Ii01MCUiYCA6IGB4PSIke01hdGgucmFuZG9tKCkgKiAxMDB9JSIgeT0iJHtNYXRoLnJhbmRvbSgpICogMTAwfSUiYH0gCiAgICAgICAgICAgIHdpZHRoPSIke2F4aXMgPT09IDEgfHwgYXhpcyA9PT0gMyA/IGAke211bFswXX0lYCA6IG11bFsxXSArICIlIn0iIGhlaWdodD0iJHtheGlzID4gMSA/IGAke211bFswXX0lYCA6IG11bFsxXSArICIlIn0iIHJlc3VsdD0ibWVyZ2UyIj4KICAgICAgICAgICAgPGZlTWVyZ2VOb2RlIGluPSJTb3VyY2VHcmFwaGljIiAvPjxmZU1lcmdlTm9kZSBpbj0ib2ZmMmIiIC8+PC9mZU1lcmdlPjxmZUNvbG9yTWF0cml4IGluPSJtZXJnZTIiIHR5cGU9Im1hdHJpeCIgdmFsdWVzPSIxIDAgMCAwIDAgIDAgMSAwIDAgMCAgMCAwIDEgMCAwICAwIDAgMCAke01hdGgucmFuZG9tKCkgKiAwLjUgKyAwLjV9IDAiIHJlc3VsdD0idGludGVkMiIvPgogICAgICAgICAgPGZlTWVyZ2U+PGZlTWVyZ2VOb2RlIGluPSJTb3VyY2VHcmFwaGljIiAvPjxmZU1lcmdlTm9kZSBpbj0idGludGVkMSIgLz48ZmVNZXJnZU5vZGUgaW49InRpbnRlZDIiIC8+PC9mZU1lcmdlPjwvZmlsdGVyPmA7CiAgICAgICAgcmV0dXJuIHRoaXMuZmlsdGVyQXBwbGllcihzdmcsIGZpbHRlckVsZW1lbnQsICJnbGl0Y2giKTsKICAgICAgfQogICAgICByZXR1cm4gc3ZnOwogICAgfQoKICAgIGFzeW5jIG1hc2soYXJncywgaXNJbWFnZSwgdXRpbCkgewogICAgICBsZXQgc3ZnOwogICAgICBpZiAoYXJncy5TUFJJVEUgPT09ICJfbXlzZWxmXyIpIHN2ZyA9IGF3YWl0IHRoaXMuZmluZEFzc2V0KHV0aWwpOwogICAgICBlbHNlIHN2ZyA9IGlzSW1hZ2UgPyBhd2FpdCB0aGlzLmdldEltYWdlKGFyZ3MuU1BSSVRFKSA6IGF3YWl0IHRoaXMuZ2V0U1ZHKGFyZ3MuU1BSSVRFKTsKICAgICAgaWYgKGFyZ3MuU1BSSVRFID09PSBhcmdzLlNQUklURTIpIHJldHVybiBzdmc7IC8vIGRvIG5vdGhpbmcgaWYgeW91cmUgbWFza2luZyB5b3Vyc2VsZgogICAgICBsZXQgc3ZnMjsKICAgICAgaWYgKGFyZ3MuU1BSSVRFID09PSAiX215c2VsZl8iKSBzdmcyID0gYXdhaXQgdGhpcy5maW5kQXNzZXQodXRpbCk7CiAgICAgIGVsc2Ugc3ZnMiA9IGlzSW1hZ2UgPyBhd2FpdCB0aGlzLmdldEltYWdlKGFyZ3MuU1BSSVRFMikgOiBhd2FpdCB0aGlzLmdldFNWRyhhcmdzLlNQUklURTIpOwogICAgICBjb25zdCBtdWx0aXBseSA9IGFyZ3MuU1BSSVRFID09PSAiX2NhbnZhc18iID8gW1NjcmF0Y2gucmVuZGVyZXIuY2FudmFzLndpZHRoICogMiwgU2NyYXRjaC5yZW5kZXJlci5jYW52YXMuaGVpZ2h0ICogMiwKICAgICAgICB2bS5yZW5kZXJlci5jYW52YXMud2lkdGggLyB2bS5ydW50aW1lLnN0YWdlV2lkdGhdIDogWzEwMCwgMTAwLCAxXTsKICAgICAgaWYgKHN2ZyAmJiBzdmcyKSB7CiAgICAgICAgY29uc3QgbmFtZSA9IGFyZ3MuVFlQRSA9PT0gIiAiID8gIm1hc2tPdmVyIiA6ICJtYXNrUmVtb3ZlIjsKICAgICAgICBjb25zdCBmaWx0ZXJFbGVtZW50ID0gYDxmaWx0ZXIgaWQ9IiR7bmFtZX0iPgogICAgICAgIAk8ZmVJbWFnZSB4bGluazpocmVmPSIke2BkYXRhOmltYWdlL3N2Zyt4bWw7YmFzZTY0LCR7YnRvYShzdmcyKX1gfSIgeD0iJHttYXNrT3B0aW9uc1swXSAqIG11bHRpcGx5WzJdfSIgeT0iJHttYXNrT3B0aW9uc1sxXSAqIG11bHRpcGx5WzJdfSIgd2lkdGg9IiR7bWFza09wdGlvbnNbMl0gKiBtdWx0aXBseVsyXX0lIiBoZWlnaHQ9IiR7bWFza09wdGlvbnNbMl0gKiBtdWx0aXBseVsyXX0lIiBwcmVzZXJ2ZUFzcGVjdFJhdGlvPSJ4TWlkWU1pZCBtZWV0IiBjcm9zc09yaWdpbj0iYW5vbnltb3VzIiByZXN1bHQ9ImltYWdlMSIvPgogICAgICAgIAk8ZmVDb21wb3NpdGUgaW49IiR7YXJncy5UWVBFICE9PSAiICIgPyAiU291cmNlR3JhcGhpYyIgOiAiaW1hZ2UxIn0iIGluMj0iJHthcmdzLlRZUEUgIT09ICIgIiA/ICJpbWFnZTEiIDogIlNvdXJjZUdyYXBoaWMifSIgb3BlcmF0b3I9IiR7YXJncy5UWVBFfSIgeD0iMCUiIHk9IjAlIiB3aWR0aD0iJHttdWx0aXBseVswXX0lIiBoZWlnaHQ9IiR7bXVsdGlwbHlbMV19JSIgcmVzdWx0PSJjb21wb3NpdGUxIi8+PC9maWx0ZXI+YDsKICAgICAgICByZXR1cm4gdGhpcy5maWx0ZXJBcHBsaWVyKHN2ZywgZmlsdGVyRWxlbWVudCwgbmFtZSk7CiAgICAgIH0KICAgICAgcmV0dXJuIHN2ZzsKICAgIH0KCiAgICBhc3luYyBzZXRBVFQoYXJncywgaXNJbWFnZSwgdHlwZSwgdXRpbCkgewogICAgICBsZXQgc3ZnOwogICAgICBpZiAoYXJncy5TUFJJVEUgPT09ICJfbXlzZWxmXyIpIHN2ZyA9IGF3YWl0IHRoaXMuZmluZEFzc2V0KHV0aWwpOwogICAgICBlbHNlIHN2ZyA9IGlzSW1hZ2UgPyBhd2FpdCB0aGlzLmdldEltYWdlKGFyZ3MuU1BSSVRFKSA6IGF3YWl0IHRoaXMuZ2V0U1ZHKGFyZ3MuU1BSSVRFKTsKICAgICAgaWYgKHN2ZykgewogICAgICAgIC8vIE5vdGU6IFdlIERvIE5vdCBDaGVjayBpZiBUcmFuc2xhdGUgRXhpc3RzIFNpbmNlIFdlIE92ZXJyaWRlIGl0CiAgICAgICAgbGV0IHRyYW5zZm9ybSA9ICIiOwogICAgICAgIGNvbnN0IGN1cnJlbnRUcmFuc2xhdGUgPSAvdHJhbnNsYXRlXCgoW14sXSspLChbXildKylcKS8uZXhlYyhzdmcpOwogICAgICAgIGNvbnN0IGN1cnJlbnRYID0gY3VycmVudFRyYW5zbGF0ZSA/IHBhcnNlRmxvYXQoY3VycmVudFRyYW5zbGF0ZVsxXSkgOiAwOwogICAgICAgIGNvbnN0IGN1cnJlbnRZID0gY3VycmVudFRyYW5zbGF0ZSA/IHBhcnNlRmxvYXQoY3VycmVudFRyYW5zbGF0ZVsyXSkgOiAwOwoKICAgICAgICBjb25zdCB3aWR0aE1hdGNoID0gL3dpZHRoPSIoW14iXSopIi8uZXhlYyhzdmcpOwogICAgICAgIGNvbnN0IGhlaWdodE1hdGNoID0gL2hlaWdodD0iKFteIl0qKSIvLmV4ZWMoc3ZnKTsKICAgICAgICBjb25zdCB3aWR0aCA9IHdpZHRoTWF0Y2ggPyBwYXJzZUZsb2F0KHdpZHRoTWF0Y2hbMV0pIDogMDsKICAgICAgICBjb25zdCBoZWlnaHQgPSBoZWlnaHRNYXRjaCA/IHBhcnNlRmxvYXQoaGVpZ2h0TWF0Y2hbMV0pIDogMDsKCiAgICAgICAgY29uc3QgeCA9IFNjcmF0Y2guQ2FzdC50b051bWJlcihhcmdzLnggPyBhcmdzLnggOiAwKSAvIDEwMDsKICAgICAgICBjb25zdCB5ID0gU2NyYXRjaC5DYXN0LnRvTnVtYmVyKGFyZ3MueSA/IGFyZ3MueSA6IDApIC8gMTAwOwogICAgICAgIGlmICh0eXBlID09PSAwKSB7CiAgICAgICAgICBjb25zdCBuZXdQb3MgPSBbY3VycmVudFggKyAoeCAqIDEwMCksIGN1cnJlbnRZICsgKHkgKiAtMTAwKV07CiAgICAgICAgICByZXR1cm4gc3ZnLnJlcGxhY2UoL3RyYW5zbGF0ZVwoW14pXSpcKS8sIGB0cmFuc2xhdGUoJHtuZXdQb3NbMF19LCR7bmV3UG9zWzFdfSlgKTsKICAgICAgICB9IGVsc2UgaWYgKHR5cGUgPT09IDEpIHsKICAgICAgICAgIGlmIChzdmcuaW5jbHVkZXMoInN0eWxlPVwidHJhbnNmb3JtLW9yaWdpbjogY2VudGVyOyB0cmFuc2Zvcm06IikpIHsKICAgICAgICAgICAgc3ZnID0gc3ZnLnJlcGxhY2UoLyhzdHlsZT0iW14iXSp0cmFuc2Zvcm06W14iXSopLywgYCQxIHJvdGF0ZSgke1NjcmF0Y2guQ2FzdC50b051bWJlcihhcmdzLkRJUikgLSA5MH1kZWcpYCk7CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBzdmcgPSBzdmcucmVwbGFjZShgd2lkdGg9IiR7d2lkdGh9IiBoZWlnaHQ9IiR7aGVpZ2h0fSJgLCBgd2lkdGg9IiR7d2lkdGh9IiBoZWlnaHQ9IiR7aGVpZ2h0fSIgc3R5bGU9InRyYW5zZm9ybS1vcmlnaW46IGNlbnRlcjsgdHJhbnNmb3JtOiByb3RhdGUoJHtTY3JhdGNoLkNhc3QudG9OdW1iZXIoYXJncy5ESVIpIC0gOTB9ZGVnKSJgKTsKICAgICAgICAgIH0KICAgICAgICB9IGVsc2UgaWYgKHR5cGUgPT09IDIpIHsKICAgICAgICAgIHN2ZyA9IHN2Zy5yZXBsYWNlKGB3aWR0aD0iJHt3aWR0aH0iIGhlaWdodD0iJHtoZWlnaHR9ImAsIGB3aWR0aD0iJHt3aWR0aCAqIE1hdGguYWJzKHgpfSIgaGVpZ2h0PSIke2hlaWdodCAqIE1hdGguYWJzKHkpfSJgKTsKICAgICAgICAgIHN2ZyA9IHN2Zy5yZXBsYWNlKGB2aWV3Qm94PSIwLDAsJHt3aWR0aH0sJHtoZWlnaHR9ImAsIGB2aWV3Qm94PSIwLDAsJHt3aWR0aCAqIE1hdGguYWJzKHgpfSwke2hlaWdodCAqIE1hdGguYWJzKHkpfSJgKTsKICAgICAgICAgIHN2ZyA9IHN2Zy5yZXBsYWNlKGAoJHtjdXJyZW50WH0sYCwgYCgke2N1cnJlbnRYICogKHgpICsgKGFyZ3MueCA8IDAgPyB3aWR0aCAqIE1hdGguYWJzKHgpIDogMCl9LGApOwogICAgICAgICAgc3ZnID0gc3ZnLnJlcGxhY2UoYCwke2N1cnJlbnRZfSlgLCBgLCR7Y3VycmVudFkgKiAoeSkgKyAoYXJncy55IDwgMCA/IGhlaWdodCAqIE1hdGguYWJzKHkpIDogMCl9KWApOwogICAgICAgICAgdHJhbnNmb3JtID0gYHNjYWxlKCR7eH0sICR7eX0pYDsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgaWYgKHN2Zy5pbmNsdWRlcygic3R5bGU9XCJ0cmFuc2Zvcm0tb3JpZ2luOiBjZW50ZXI7IHRyYW5zZm9ybToiKSkgewogICAgICAgICAgICBzdmcgPSBzdmcucmVwbGFjZSgvKHN0eWxlPSJbXiJdKnRyYW5zZm9ybTpbXiJdKikvLCBgJDEgc2tldygke2FyZ3MueH1kZWcsICR7YXJncy55fWRlZylgKTsKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIHN2ZyA9IHN2Zy5yZXBsYWNlKGB3aWR0aD0iJHt3aWR0aH0iIGhlaWdodD0iJHtoZWlnaHR9ImAsIGB3aWR0aD0iJHt3aWR0aH0iIGhlaWdodD0iJHtoZWlnaHR9IiBzdHlsZT0idHJhbnNmb3JtLW9yaWdpbjogY2VudGVyOyB0cmFuc2Zvcm06IHNrZXcoJHthcmdzLnh9ZGVnLCAke2FyZ3MueX1kZWcpImApOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgICBjb25zdCBjdXJyZW50VHJhbnNmb3JtID0gL3RyYW5zZm9ybT0iKFteIl0qKSIvLmV4ZWMoc3ZnKTsKICAgICAgICBjb25zdCBleGlzdGluZ1RyYW5zZm9ybSA9IGN1cnJlbnRUcmFuc2Zvcm0gPyBjdXJyZW50VHJhbnNmb3JtWzFdIDogIiI7CiAgICAgICAgY29uc3QgbmV3VHJhbnNmb3JtID0gZXhpc3RpbmdUcmFuc2Zvcm0gPyBgJHtleGlzdGluZ1RyYW5zZm9ybX0gJHt0cmFuc2Zvcm19YCA6IHRyYW5zZm9ybTsKICAgICAgICByZXR1cm4gc3ZnLnJlcGxhY2UoL3RyYW5zZm9ybT0iKFteIl0qKSIvLCBgdHJhbnNmb3JtPSIke25ld1RyYW5zZm9ybX0iYCk7CiAgICAgIH0KICAgICAgcmV0dXJuIHN2ZzsKICAgIH0KCiAgICBhc3luYyB1cGRhdGVWaWV3KGFyZ3MsIGlzSW1hZ2UsIHV0aWwpIHsKICAgICAgbGV0IHN2ZzsKICAgICAgaWYgKGFyZ3MuU1BSSVRFID09PSAiX215c2VsZl8iKSBzdmcgPSBhd2FpdCB0aGlzLmZpbmRBc3NldCh1dGlsKTsKICAgICAgZWxzZSBzdmcgPSBpc0ltYWdlID8gYXdhaXQgdGhpcy5nZXRJbWFnZShhcmdzLlNQUklURSkgOiBhd2FpdCB0aGlzLmdldFNWRyhhcmdzLlNQUklURSk7CiAgICAgIGlmIChzdmcpIHsKICAgICAgICBsZXQgdmFsdWVzOwogICAgICAgIGNvbnN0IHZpZXdCb3hNYXRjaCA9IHN2Zy5tYXRjaCgvdmlld0JveD0iKFteIl0rKSIvKTsKICAgICAgICBsZXQgdmlld0JveFZhbHVlcyA9IC0xOwogICAgICAgIGlmICh2aWV3Qm94TWF0Y2gpIHZpZXdCb3hWYWx1ZXMgPSB2aWV3Qm94TWF0Y2hbMV0uc3BsaXQoL1xzKixccyovKS5tYXAocGFyc2VGbG9hdCk7CgogICAgICAgIGNvbnN0IHRyYW5zbGF0ZU1hdGNoID0gc3ZnLm1hdGNoKC88ZyB0cmFuc2Zvcm09InRyYW5zbGF0ZVwoKC0/W1xkLl0rKSwoLT9bXGQuXSspXCkvKTsKICAgICAgICBsZXQgdHJhbnNsYXRlVmFsdWVzID0gLTE7CiAgICAgICAgaWYgKHRyYW5zbGF0ZU1hdGNoKSB0cmFuc2xhdGVWYWx1ZXMgPSBbcGFyc2VGbG9hdCh0cmFuc2xhdGVNYXRjaFsxXSksIHBhcnNlRmxvYXQodHJhbnNsYXRlTWF0Y2hbMl0pXTsKICAgICAgICB2YWx1ZXMgPSBgJHt2aWV3Qm94VmFsdWVzfSwke3RyYW5zbGF0ZVZhbHVlc31gOwogICAgICAgIHZhbHVlcyA9IHZhbHVlcy5zcGxpdCgiLCIpOwogICAgICAgIHZhbHVlcyA9IHZhbHVlcy5tYXAoaXRlbSA9PiBTY3JhdGNoLkNhc3QudG9OdW1iZXIoaXRlbSkpOwogICAgICAgIGFyZ3MuTlVNID0gU2NyYXRjaC5DYXN0LnRvTnVtYmVyKGFyZ3MuTlVNKTsKICAgICAgICBpZiAodmFsdWVzLmxlbmd0aCA+IDMpIHsKICAgICAgICAgIHN2ZyA9IHN2Zy5yZXBsYWNlKC92aWV3Qm94PSIoW14iXSspIi8sIGB2aWV3Qm94PSIke3ZhbHVlc1swXX0sJHt2YWx1ZXNbMV19LCR7dmFsdWVzWzJdICsgKGFyZ3MuTlVNICogMil9LCR7dmFsdWVzWzNdICsgKGFyZ3MuTlVNICogMil9ImApOwogICAgICAgICAgc3ZnID0gc3ZnLnJlcGxhY2UoL3dpZHRoPSIoW14iXSspIi8sIGB3aWR0aD0iJHt2YWx1ZXNbMl0gKyAoYXJncy5OVU0gKiAyKX0iYCk7CiAgICAgICAgICBzdmcgPSBzdmcucmVwbGFjZSgvaGVpZ2h0PSIoW14iXSspIi8sIGBoZWlnaHQ9IiR7dmFsdWVzWzNdICsgKGFyZ3MuTlVNICogMil9ImApOwogICAgICAgICAgc3ZnID0gc3ZnLnJlcGxhY2UoLzxnIHRyYW5zZm9ybT0iKFteIl0rKSIvLCBgPGcgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoJHt2YWx1ZXNbNF0gKyBhcmdzLk5VTX0sJHt2YWx1ZXNbNV0gKyBhcmdzLk5VTX0pImApOwogICAgICAgIH0KICAgICAgfQogICAgICByZXR1cm4gc3ZnOwogICAgfQoKICAgIGFkZENhbnZhc0ZpbHRlcihhcmdzKSB7CiAgICAgIGFyZ3MuTkFNRSA9IFNjcmF0Y2guQ2FzdC50b1N0cmluZyhhcmdzLk5BTUUpLnJlcGxhY2VBbGwoIiAiLCAiXyIpOwogICAgICBjb25zdCBmaWx0ZXIgPSBhcmdzLkZJTFRFUjsKICAgICAgY29uc3QgZmlsdGVyUmVnZXggPSAvPGZpbHRlcig/OlxzW14+XSopPz4oKD86LnxcbikqPyk8XC9maWx0ZXI+L2k7CiAgICAgIGNvbnN0IG1hdGNoID0gZmlsdGVyLm1hdGNoKGZpbHRlclJlZ2V4KTsKICAgICAgaWYgKG1hdGNoICYmIG1hdGNoWzFdKSB7CiAgICAgICAgY29uc3QgZmlsdGVySUQgPSBhcmdzLk5BTUU7CiAgICAgICAgY29uc3QgZmlsdGVyRXhpc3RzID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoZmlsdGVySUQpOwogICAgICAgIGlmIChmaWx0ZXJFeGlzdHMpIHsKICAgICAgICAgIGZpbHRlckV4aXN0cy5pbm5lckhUTUwgPSBtYXRjaFsxXTsKICAgICAgICAgIHJldHVybjsKICAgICAgICB9CiAgICAgICAgY29uc3Qgc3ZnRmlsdGVyT3V0ZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50TlMoImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiwgInN2ZyIpOwogICAgICAgIHN2Z0ZpbHRlck91dGVyLmlkID0gYFNQLWNhbnZhcy0ke2ZpbHRlcklEfWA7CiAgICAgICAgY29uc3Qgc3ZnRmlsdGVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudE5TKCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIsICJmaWx0ZXIiKTsKICAgICAgICBzdmdGaWx0ZXIuaWQgPSBmaWx0ZXJJRDsKICAgICAgICBzdmdGaWx0ZXIuaW5uZXJIVE1MID0gbWF0Y2hbMV07CiAgICAgICAgc3ZnRmlsdGVyT3V0ZXIuYXBwZW5kQ2hpbGQoc3ZnRmlsdGVyKTsKICAgICAgICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKHN2Z0ZpbHRlck91dGVyKTsKICAgICAgICBhbGxGaWx0ZXJzLnB1c2goZmlsdGVySUQpOwogICAgICAgIGNvbnN0IGV4aXN0aW5nRmlsdGVyID0gU2NyYXRjaC5yZW5kZXJlci5jYW52YXMucGFyZW50Tm9kZS5wYXJlbnROb2RlLnBhcmVudE5vZGUuc3R5bGUuZmlsdGVyOwogICAgICAgIGNvbnN0IGZpbHRlclN0cmluZyA9IGV4aXN0aW5nRmlsdGVyID8gYCR7ZXhpc3RpbmdGaWx0ZXJ9IHVybCgjJHtmaWx0ZXJJRH0pYCA6IGB1cmwoIyR7ZmlsdGVySUR9KWA7CiAgICAgICAgU2NyYXRjaC5yZW5kZXJlci5jYW52YXMucGFyZW50Tm9kZS5wYXJlbnROb2RlLnBhcmVudE5vZGUuc3R5bGUuZmlsdGVyID0gZmlsdGVyU3RyaW5nOwogICAgICB9IGVsc2UgeyBjb25zb2xlLmVycm9yKCJJbnZhbGlkIEZpbHRlciwgQ2FuY2VsbGVkIEFwcGxpY2F0aW9uIikgfQogICAgfQoKICAgIHJlbW92ZUNhbnZhc0ZpbHRlcihhcmdzKSB7CiAgICAgIGFyZ3MuTkFNRSA9IFNjcmF0Y2guQ2FzdC50b1N0cmluZyhhcmdzLk5BTUUpLnJlcGxhY2VBbGwoIiAiLCAiXyIpOwogICAgICBjb25zdCBjYW52YXMgPSBTY3JhdGNoLnJlbmRlcmVyLmNhbnZhcy5wYXJlbnROb2RlLnBhcmVudE5vZGUucGFyZW50Tm9kZTsKICAgICAgaWYgKGNhbnZhcy5zdHlsZS5maWx0ZXIuaW5jbHVkZXMoYHVybCgiIyR7YXJncy5OQU1FfSIpYCkpIHsKICAgICAgICBjYW52YXMuc3R5bGUuZmlsdGVyID0gY2FudmFzLnN0eWxlLmZpbHRlci5yZXBsYWNlKGB1cmwoIyR7YXJncy5OQU1FfSlgLCAiIikudHJpbSgpOwogICAgICAgIGNvbnN0IGFycmF5ID0gY2FudmFzLnN0eWxlLmZpbHRlci5zcGxpdCgiICIpOwogICAgICAgIGlmIChhcnJheS5sZW5ndGggPT09IDEgJiYgY2FudmFzLnN0eWxlLmZpbHRlci5pbmNsdWRlcyhhcmdzLk5BTUUpKSBjYW52YXMuc3R5bGUuZmlsdGVyID0gIiI7CiAgICAgICAgY29uc3QgZmlsdGVyU2VsID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoYFNQLWNhbnZhcy0ke2FyZ3MuTkFNRX1gKTsKICAgICAgICBpZiAoZmlsdGVyU2VsKSB7CiAgICAgICAgICBkb2N1bWVudC5ib2R5LnJlbW92ZUNoaWxkKGZpbHRlclNlbCk7CiAgICAgICAgICBhbGxGaWx0ZXJzLnNwbGljZShhbGxGaWx0ZXJzLmluZGV4T2YoYXJncy5OQU1FKSwgMSk7CiAgICAgICAgfQogICAgICB9IGVsc2UgeyBjb25zb2xlLmVycm9yKCJGaWx0ZXIgbm90IGZvdW5kLCBDYW5jZWxsZWQgRGVsZXRpb24iKSB9CiAgICB9CgogICAgcmVtb3ZlQWxsRmlsdGVycyhhcmdzKSB7CiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgYWxsRmlsdGVycy5sZW5ndGg7IGkrKykgewogICAgICAgIGNvbnN0IGZpbHRlclNlbCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGBTUC1jYW52YXMtJHthbGxGaWx0ZXJzW2ldfWApOwogICAgICAgIGlmIChmaWx0ZXJTZWwpIGRvY3VtZW50LmJvZHkucmVtb3ZlQ2hpbGQoZmlsdGVyU2VsKTsKICAgICAgfQogICAgICBTY3JhdGNoLnJlbmRlcmVyLmNhbnZhcy5wYXJlbnROb2RlLnBhcmVudE5vZGUucGFyZW50Tm9kZS5zdHlsZS5maWx0ZXIgPSAiIjsKICAgICAgYWxsRmlsdGVycyA9IFtdOwogICAgfQoKICAgIGFzeW5jIGdldFNWRyh0YXJnZXRBcmdzKSB7CiAgICAgIGNvbnN0IHRhcmdldCA9IHRhcmdldEFyZ3MgPT09ICJfc3RhZ2VfIiA/IHJ1bnRpbWUuZ2V0VGFyZ2V0Rm9yU3RhZ2UoKSA6IHJ1bnRpbWUuZ2V0U3ByaXRlVGFyZ2V0QnlOYW1lKHRhcmdldEFyZ3MpOwogICAgICBpZiAoIXRhcmdldCkgcmV0dXJuICI8PiI7CiAgICAgIGlmICghcmVxdWlyZU5vblBhY2thZ2VkUnVudGltZSgpKSByZXR1cm4gIjw+IjsKICAgICAgY29uc3QgY29zdHVtZSA9IHRhcmdldC5nZXRDb3N0dW1lcygpW3RhcmdldC5jdXJyZW50Q29zdHVtZV07CiAgICAgIC8vaWYgYml0bWFwLCBjb252ZXJ0IHRvIHN2ZwogICAgICBpZiAoY29zdHVtZS5kYXRhRm9ybWF0ID09PSAicG5nIikgewogICAgICAgIHJldHVybiBhd2FpdCB0aGlzLmdldEltYWdlKGNvc3R1bWUuYXNzZXQuZW5jb2RlRGF0YVVSSSgpKTsKICAgICAgfSBlbHNlIHsgcmV0dXJuIGNvc3R1bWUuYXNzZXQuZGVjb2RlVGV4dCgpIH0KICAgIH0KCiAgICBhc3luYyBnZXRJbWFnZShpbWFnZSkgewogICAgICBpZiAoaW1hZ2Uuc3RhcnRzV2l0aCgiZGF0YTppbWFnZS8iKSkgewogICAgICAgIHJldHVybiBhd2FpdCBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7CiAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUKICAgICAgICAgIGNvbnN0IGltZyA9IG5ldyBJbWFnZSgpOwogICAgICAgICAgaW1nLm9ubG9hZCA9ICgpID0+IHsKICAgICAgICAgICAgY29uc3Qgd2lkdGggPSBpbWcud2lkdGg7CiAgICAgICAgICAgIGNvbnN0IGhlaWdodCA9IGltZy5oZWlnaHQ7CiAgICAgICAgICAgIGNvbnN0IHN2ZyA9IGA8c3ZnIHZlcnNpb249IjEuMSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayIgCiAgICAgICAgICAgICAgd2lkdGg9IiR7d2lkdGggLyAyfSIgaGVpZ2h0PSIkeyhoZWlnaHQgLyAyKSArIDAuMDAxfSIgdmlld0JveD0iMCwwLCR7d2lkdGggLyAyfSwkeyhoZWlnaHQgLyAyKSArIDAuMDAxfSI+CiAgICAgICAgICAgICAgPGcgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoJHtpbWcub2Zmc2V0TGVmdCAvIC0yfSwke2ltZy5vZmZzZXRUb3AgLyAtMn0pIj48ZyBkYXRhLXBhcGVyLWRhdGE9InsmcXVvdDtpc1BhaW50aW5nTGF5ZXImcXVvdDs6dHJ1ZX0iIGZpbGw9Im5vbmUiIAogICAgICAgICAgICAgIGZpbGwtcnVsZT0ibm9uemVybyIgc3Ryb2tlPSJub25lIiBzdHJva2Utd2lkdGg9IjAuNSIgc3Ryb2tlLWxpbmVjYXA9ImJ1dHQiIHN0cm9rZS1saW5lam9pbj0ibWl0ZXIiIAogICAgICAgICAgICAgIHN0cm9rZS1taXRlcmxpbWl0PSIxMCIgc3Ryb2tlLWRhc2hhcnJheT0iIiBzdHJva2UtZGFzaG9mZnNldD0iMCIgc3R5bGU9Im1peC1ibGVuZC1tb2RlOiBub3JtYWwiPgogICAgICAgICAgICAgIDxpbWFnZSB4PSIwIiB5PSIwIiB0cmFuc2Zvcm09InNjYWxlKDAuNSwwLjUpIiB3aWR0aD0iJHt3aWR0aH0iIGhlaWdodD0iJHtoZWlnaHQgKyAwLjAwMn0iIAogICAgICAgICAgICAgIHhsaW5rOmhyZWY9IiR7aW1nLnNyY30iLz48L2c+PC9nPjwvc3ZnPmA7CiAgICAgICAgICAgIHJlc29sdmUoc3ZnKTsKICAgICAgICAgIH07CiAgICAgICAgICBpbWcub25lcnJvciA9IHJlamVjdDsKICAgICAgICAgIGltZy5zcmMgPSBpbWFnZTsKICAgICAgICB9KTsKICAgICAgfSBlbHNlIHsKICAgICAgICByZXR1cm4gaW1hZ2U7CiAgICAgIH0KICAgIH0KCiAgICBhc3luYyBmaW5kQXNzZXQodXRpbCkgewogICAgICBjb25zdCBjdXJyZW50Q29zdHVtZSA9IHV0aWwudGFyZ2V0LmN1cnJlbnRDb3N0dW1lOwogICAgICBsZXQgbXlBc3NldCA9IHV0aWwudGFyZ2V0LnNwcml0ZS5jb3N0dW1lczsKICAgICAgbXlBc3NldCA9IG15QXNzZXRbY3VycmVudENvc3R1bWVdOwogICAgICAvL2lmIGJpdG1hcCwgY29udmVydCB0byBzdmcKICAgICAgaWYgKG15QXNzZXQuZGF0YUZvcm1hdCA9PT0gInBuZyIpIHJldHVybiBhd2FpdCB0aGlzLmdldEltYWdlKG15QXNzZXQuYXNzZXQuZW5jb2RlRGF0YVVSSSgpKTsKICAgICAgZWxzZSByZXR1cm4gbXlBc3NldC5hc3NldC5kZWNvZGVUZXh0KCk7CiAgICB9CgogICAgYXN5bmMgc3ZnVG9CaXRtYXAoc3ZnLCB3aWR0aCwgaGVpZ2h0KSB7CiAgICAgIHJldHVybiBhd2FpdCBuZXcgUHJvbWlzZSgocmVzb2x2ZSkgPT4gewogICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZQogICAgICAgIGNvbnN0IGltZyA9IG5ldyBJbWFnZSgpOwogICAgICAgIGltZy5vbmxvYWQgPSAoKSA9PiB7CiAgICAgICAgICBjb25zdCBjYW52YXMgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJjYW52YXMiKTsKICAgICAgICAgIGNvbnN0IGN0eCA9IGNhbnZhcy5nZXRDb250ZXh0KCIyZCIpOwogICAgICAgICAgY2FudmFzLndpZHRoID0gd2lkdGg7CiAgICAgICAgICBjYW52YXMuaGVpZ2h0ID0gaGVpZ2h0OwogICAgICAgICAgY3R4LmRyYXdJbWFnZShpbWcsIDAsIDAsIHdpZHRoLCBoZWlnaHQpOwogICAgICAgICAgY29uc3QgZGF0YVVyaSA9IGNhbnZhcy50b0RhdGFVUkwoKTsKICAgICAgICAgIHJlc29sdmUoZGF0YVVyaSk7CiAgICAgICAgfTsKICAgICAgICBpbWcub25lcnJvciA9IChlcnJvcikgPT4geyByZXNvbHZlKCJJbnZhbGlkIEltYWdlIikgfTsKICAgICAgICBpbWcuc3JjID0gYGRhdGE6aW1hZ2Uvc3ZnK3htbDtiYXNlNjQsJHtidG9hKHN2Zyl9YDsKICAgICAgfSk7CiAgICB9CgogICAgZ2V0VGFyZ2V0cyhpbmNsdWRlQ2FudmFzKSB7CiAgICAgIGNvbnN0IHNwcml0ZU5hbWVzID0gW107CiAgICAgIHNwcml0ZU5hbWVzLnB1c2goeyB0ZXh0IDogIm15c2VsZiIsIHZhbHVlOiAiX215c2VsZl8iIH0pOwogICAgICBjb25zdCB0YXJnZXRzID0gU2NyYXRjaC52bS5ydW50aW1lLnRhcmdldHM7CiAgICAgIGZvciAobGV0IGluZGV4ID0gMTsgaW5kZXggPCB0YXJnZXRzLmxlbmd0aDsgaW5kZXgrKykgewogICAgICAgIGNvbnN0IHRhcmdldCA9IHRhcmdldHNbaW5kZXhdOwogICAgICAgIGlmICh0YXJnZXQuaXNPcmlnaW5hbCkgc3ByaXRlTmFtZXMucHVzaCh7IHRleHQgOiB0YXJnZXQuZ2V0TmFtZSgpLCB2YWx1ZSA6IHRhcmdldC5nZXROYW1lKCkgfSk7CiAgICAgIH0KICAgICAgc3ByaXRlTmFtZXMucHVzaCh7IHRleHQgOiAiU3RhZ2UiLCB2YWx1ZTogIl9zdGFnZV8iIH0pOwogICAgICBpZiAoaW5jbHVkZUNhbnZhcykgc3ByaXRlTmFtZXMucHVzaCh7IHRleHQgOiAiQ2FudmFzIiwgdmFsdWU6ICJfY2FudmFzXyIgfSk7CiAgICAgIHJldHVybiBzcHJpdGVOYW1lcy5sZW5ndGggPiAwID8gc3ByaXRlTmFtZXMgOiBbIiJdOwogICAgfQoKICAgIGhleFRvUmdiKGhleCkgewogICAgICBoZXggPSBoZXgucmVwbGFjZSgvXiMvLCAiIik7CiAgICAgIGNvbnN0IGJpZ2ludCA9IHBhcnNlSW50KGhleCwgMTYpOwogICAgICByZXR1cm4geyJyIiA6IChiaWdpbnQgPj4gMTYpICYgMjU1LCAiZyIgOihiaWdpbnQgPj4gOCkgJiAyNTUsICJiIiA6IGJpZ2ludCAmIDI1NX07CiAgICB9CgogICAgaGV4VG9IcyhoZXgpIHsKICAgICAgaGV4ID0gaGV4LnJlcGxhY2UoL14jLywgIiIpOwogICAgICBjb25zdCBiaWdpbnQgPSBwYXJzZUludChoZXgsIDE2KTsKICAgICAgY29uc3QgciA9ICgoYmlnaW50ID4+IDE2KSAmIDI1NSkgLyAyNTU7CiAgICAgIGNvbnN0IGcgPSAoKGJpZ2ludCA+PiA4KSAmIDI1NSkgLyAyNTU7CiAgICAgIGNvbnN0IGIgPSAoYmlnaW50ICYgMjU1KSAvIDI1NTsKCiAgICAgIGNvbnN0IG1heCA9IE1hdGgubWF4KHIsIGcsIGIpOwogICAgICBjb25zdCBtaW4gPSBNYXRoLm1pbihyLCBnLCBiKTsKICAgICAgbGV0IGRlbHRhID0gbWF4IC0gbWluOwogICAgICBsZXQgaCA9IDA7CiAgICAgIGlmIChkZWx0YSAhPT0gMCkgewogICAgICAgIHN3aXRjaCAobWF4KSB7CiAgICAgICAgICBjYXNlIHI6IHsgaCA9ICgoZyAtIGIpIC8gZGVsdGEgKyAoZyA8IGIgPyA2IDogMCkpIC8gNjsgYnJlYWsgfQogICAgICAgICAgY2FzZSBnOiB7IGggPSAoKGIgLSByKSAvIGRlbHRhICsgMikgLyA2OyBicmVhayB9CiAgICAgICAgICBjYXNlIGI6IHsgaCA9ICgociAtIGcpIC8gZGVsdGEgKyA0KSAvIDY7IGJyZWFrIH0KICAgICAgICB9CiAgICAgIH0KICAgICAgY29uc3QgcyA9IG1heCA9PT0gMCA/IDAgOiBkZWx0YSAvIG1heDsKICAgICAgcmV0dXJuIHsgaDogTWF0aC5yb3VuZChoICogMzYwKSAvIDEwMCwgczogTWF0aC5yb3VuZChzICogNTApIC8gMTAwIH07CiAgICB9CgogICAgZmlsdGVyQXBwbGllcihzdmcsIGZpbHRlciwgbmFtZSkgewogICAgICBuYW1lT2Zmc2V0Kys7CiAgICAgIGlmIChuYW1lT2Zmc2V0ID4gMTAwKSBuYW1lT2Zmc2V0ID0gMDsKICAgICAgbGV0IHN2Z1RhZyA9IHN2Zy5pbmRleE9mKCI+Iik7CiAgICAgIGlmIChzdmdUYWcgIT09IC0xKSB7CiAgICAgICAgbGV0IHVybCA9IGBmaWx0ZXI9InVybCgjJHtuYW1lfSkiYDsKICAgICAgICBpZiAoc3ZnLmluY2x1ZGVzKCJmaWx0ZXI9XCJ1cmwoIikpIHsKICAgICAgICAgIGNvbnN0IHJlZ2V4ID0gL2ZpbHRlcj0idXJsXChbXiJdK1wpIi9nOwogICAgICAgICAgY29uc3QgZXhpc3RpbmdGaWx0ZXJzID0gc3ZnLm1hdGNoKHJlZ2V4KTsKICAgICAgICAgIGlmIChleGlzdGluZ0ZpbHRlcnMpIHsKICAgICAgICAgICAgY29uc3QgZmlsdGVyU3RyaW5nID0gZXhpc3RpbmdGaWx0ZXJzLmpvaW4oIiAiKS5zbGljZSgwLCAtMSk7CiAgICAgICAgICAgIHVybCA9IGAke2ZpbHRlclN0cmluZ30gdXJsKCMke25hbWV9KSJgOwogICAgICAgICAgICBzdmcgPSBzdmcucmVwbGFjZShyZWdleCwgIiIpOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgICBzdmdUYWcgPSBzdmcuaW5kZXhPZigiPiIpOwogICAgICAgIGxldCBhcHBsaWVkU1ZHID0gYCR7c3ZnLnN1YnN0cmluZygwLCBzdmdUYWcpfSAke3VybH0+JHtmaWx0ZXIuc2xpY2UoMCwgLTEpfSR7c3ZnLnNsaWNlKHN2Z1RhZyl9YDsKICAgICAgICAvLyByZXBsYWNlIG5lZWRzIHRvIGJlIHJlcGVhdGVkIHR3aWNlIHRvIGF2b2lkIHRoZSBuZXcgbmFtZSBiZWluZyB1c2VkIGluIG90aGVyIG5hbWVzcGFjZXMKICAgICAgICByZXR1cm4gYXBwbGllZFNWRy5yZXBsYWNlKGAjJHtuYW1lfSlgLCBgIyR7bmFtZX0ke25hbWVPZmZzZXR9KWApLnJlcGxhY2UoYCIke25hbWV9ImAsIGAiJHtuYW1lfSR7bmFtZU9mZnNldH0iYCk7CiAgICAgIH0KICAgICAgcmV0dXJuIHN2ZzsKICAgIH0KCiAgICBhc3luYyBnZXRTb3VyY2VzKCkgewogICAgICAvLyB3ZSBzaG91bGRudCBhc2sgZm9yIHBlcm1pc3Npb24gc2luY2UgaXRzIGZvciBhIHRydXN0ZWQsIHN0YXRpYyBmdW5jdGlvbgogICAgICAvLyBJIGNvdWxkIGhhcmRjb2RlIHRoaXMgaW4sIGJ1dCBJZCByYXRoZXIgbm90IGhhdmUgaXQgdGFrZSB1cCBmaWxlIHNwYWNlIDovCiAgICAgIGNvbnN0IGxpbmsgPSAiaHR0cHM6Ly9yYXcuZ2l0aHVidXNlcmNvbnRlbnQuY29tL1NoYXJrUG9vbC1TUC9TaGFya1Bvb2xzLUV4dGVuc2lvbnMvbWFpbi9leHRlbnNpb24tc291cmNlRmVlZC8iOwogICAgICAvKiBlc2xpbnQtZGlzYWJsZSAqLwogICAgICB0cnkgewogICAgICAgIGRpc3BsYWNlbWVudFNyQ3MgPSBbCiAgICAgICAgICBhd2FpdCAoYXdhaXQgZmV0Y2gobGluayArICJTRS1idWxnZS50eHQiKSkudGV4dCgpLAogICAgICAgICAgYXdhaXQgKGF3YWl0IGZldGNoKGxpbmsgKyAiU0Utd2hpcmwudHh0IikpLnRleHQoKSwKICAgICAgICAgIGF3YWl0IChhd2FpdCBmZXRjaChsaW5rICsgIlNFLXJpcHBsZS50eHQiKSkudGV4dCgpLAogICAgICAgICAgYXdhaXQgKGF3YWl0IGZldGNoKGxpbmsgKyAiU0Utc2hvY2sudHh0IikpLnRleHQoKQogICAgICAgIF07CiAgICAgIH0gY2F0Y2ggKGVycm9yKSB7IGNvbnNvbGUuZXJyb3IoIkVycm9yIGZldGNoaW5nIHJlc291cmNlczogIiwgZXJyb3IpIH0KICAgICAgLyogZXNsaW50LWVuYWJsZSAqLwogICAgfQogIH0KCiAgU2NyYXRjaC5leHRlbnNpb25zLnJlZ2lzdGVyKG5ldyBTUHNwcml0ZUVmZmVjdHMoKSk7Cn0pKFNjcmF0Y2gpOwo=","data:text/javascript;base64,Ly8gTmFtZTogUmVuZGVyZXIgQ29udHJvbAovLyBJRDogU1ByZW5kZXJDb250cm9sCi8vIERlc2NyaXB0aW9uOiBDb250cm9sIFZpc3VhbHMgb2YgU3ByaXRlcywgQmFja2Ryb3BzLCBQZW4sIFZpZGVvLCBhbmQgTW9yZSEKLy8gQnk6IFNoYXJrUG9vbAoKLy8gVmVyc2lvbiBWLjEuMS4xCgooZnVuY3Rpb24gKFNjcmF0Y2gpIHsKICAidXNlIHN0cmljdCI7CiAgaWYgKCFTY3JhdGNoLmV4dGVuc2lvbnMudW5zYW5kYm94ZWQpIHRocm93IG5ldyBFcnJvcigiUmVuZGVyIENvbnRyb2wgbXVzdCBydW4gdW5zYW5kYm94ZWQhIik7CgogIGNvbnN0IG1lbnVJY29uVVJJID0KImRhdGE6aW1hZ2Uvc3ZnK3htbDtiYXNlNjQsUEhOMlp5QjJaWEp6YVc5dVBTSXhMakVpSUhodGJHNXpQU0pvZEhSd09pOHZkM2QzTG5jekxtOXlaeTh5TURBd0wzTjJaeUlnZUcxc2JuTTZlR3hwYm1zOUltaDBkSEE2THk5M2QzY3Vkek11YjNKbkx6RTVPVGt2ZUd4cGJtc2lJSGRwWkhSb1BTSTROUzR6TURNeU5pSWdhR1ZwWjJoMFBTSTROUzR6TURNeU5pSWdkbWxsZDBKdmVEMGlNQ3d3TERnMUxqTXdNekkyTERnMUxqTXdNekkySWo0OFp5QjBjbUZ1YzJadmNtMDlJblJ5WVc1emJHRjBaU2d0TVRrM0xqTTBPRE0zTEMweE16Y3VNelE0TXpjcElqNDhaeUJrWVhSaExYQmhjR1Z5TFdSaGRHRTlJbnNtY1hWdmREdHBjMUJoYVc1MGFXNW5UR0Y1WlhJbWNYVnZkRHM2ZEhKMVpYMGlJSE4wY205clpTMXRhWFJsY214cGJXbDBQU0l4TUNJZ2MzUnliMnRsTFdSaGMyaGhjbkpoZVQwaUlpQnpkSEp2YTJVdFpHRnphRzltWm5ObGREMGlNQ0lnYzNSNWJHVTlJbTFwZUMxaWJHVnVaQzF0YjJSbE9pQnViM0p0WVd3aVBqeHdZWFJvSUdROUlrMHhPVGt1TXpRNE16Y3NNVGd3WXpBc0xUSXlMalExTVRJM0lERTRMakl3TURNMUxDMDBNQzQyTlRFMk15QTBNQzQyTlRFMk15d3ROREF1TmpVeE5qTmpNakl1TkRVeE1qY3NNQ0EwTUM0Mk5URTJNeXd4T0M0eU1EQXpOU0EwTUM0Mk5URTJNeXcwTUM0Mk5URTJNMk13TERJeUxqUTFNVEkzSUMweE9DNHlNREF6TlN3ME1DNDJOVEUyTXlBdE5EQXVOalV4TmpNc05EQXVOalV4TmpOakxUSXlMalExTVRJM0xEQWdMVFF3TGpZMU1UWXpMQzB4T0M0eU1EQXpOU0F0TkRBdU5qVXhOak1zTFRRd0xqWTFNVFl6ZWlJZ1ptbHNiRDBpSXpVek9EWmlOU0lnWm1sc2JDMXlkV3hsUFNKdWIyNTZaWEp2SWlCemRISnZhMlU5SWlNeVpqUmpOamNpSUhOMGNtOXJaUzEzYVdSMGFEMGlOQ0lnYzNSeWIydGxMV3hwYm1WallYQTlJbUoxZEhRaUlITjBjbTlyWlMxc2FXNWxhbTlwYmowaWJXbDBaWElpTHo0OGNHRjBhQ0JrUFNKTk1qUXlMakl5TmpVNUxESXdOQzR5TWpBMU9Xd3RNeTQ1TmpReU1Td3hMalkyTUROc01TNDJOak14TEMwekxqazFNakE0WXpFdU1UTTJNU3d0TWk0Mk9UYzFNeUF5TGpjeE1UVXlMQzAxTGpBMU9ETXpJRFF1TmpreE56WXNMVGN1TURNeE1URnNNVGd1TkRJeE9USXNMVEU0TGpNMU16Z3pZekF1TnpnNU1URXNMVEF1TnpnMU16Z2dNaTQwTnpFNExDMHdMak00TWpReklETXVOell3T0Rjc01DNDVNREU1TjJNeExqSTROeklzTVM0eU9ESTFOQ0F4TGpZNU16ZzRMREl1T1RVNU5qTWdNQzQ1TURRM055d3pMamMwTlRBeGJDMHhPQzQwTWpFNU1pd3hPQzR6TlRRM05tTXRNUzQ1T0RBeU5Dd3hMamszTXpjeElDMDBMak0xTURNM0xETXVOVFEwTkRjZ0xUY3VNRFUyTWprc05DNDJOelE1TnlJZ1ptbHNiRDBpSTJabVptWm1aaUlnWm1sc2JDMXlkV3hsUFNKbGRtVnViMlJrSWlCemRISnZhMlU5SWlObVptWm1abVlpSUhOMGNtOXJaUzEzYVdSMGFEMGlNU0lnYzNSeWIydGxMV3hwYm1WallYQTlJbkp2ZFc1a0lpQnpkSEp2YTJVdGJHbHVaV3B2YVc0OUluSnZkVzVrSWk4K1BIQmhkR2dnWkQwaVRUSTBPUzQzT0RZMU55d3hPRFF1TkRjd05ETmpNQ3d3SURJdU5EUXdNRGtzTWk0d056QTNNaUEwTGpBMU56UTVMQzB4TGpRME1qQTBZek11TkRrNU55d3ROeTQyTURFNU5pQTNMalkxTURRMkxDMDFMak00TXpnMklEY3VOalV3TkRZc0xUVXVNemd6T0RZaUlHWnBiR3c5SW01dmJtVWlJR1pwYkd3dGNuVnNaVDBpWlhabGJtOWtaQ0lnYzNSeWIydGxQU0lqWm1abVptWm1JaUJ6ZEhKdmEyVXRkMmxrZEdnOUlqRWlJSE4wY205clpTMXNhVzVsWTJGd1BTSnliM1Z1WkNJZ2MzUnliMnRsTFd4cGJtVnFiMmx1UFNKeWIzVnVaQ0l2UGp4d1lYUm9JR1E5SWsweU5URXVNamN4TlRJc01UZ3pMamt4TWpZMFl6QXNNQzQwTmpZek9DQXRNQzR6TnpZNE15d3dMamcwTkRFMElDMHdMamcwTXpJeExEQXVPRFEwTVRSakxUQXVORFkyTXpnc01DQXRNQzQ0TkRReE5Dd3RNQzR6TnpjM055QXRNQzQ0TkRReE5Dd3RNQzQ0TkRNeU1XTXdMQzB3TGpRMk5qTTRJREF1TXpjNU5qTXNMVEF1T0RReU1qZ2dNQzQ0TkRVd09Dd3RNQzQ0TkRJeU9HTXdMalEyTmpNNExEQWdNQzQ0TkRNeU1Td3dMak0zTmpneklEQXVPRFF6TWpFc01DNDRORE15TVhvaUlHWnBiR3c5SWlObVptWm1abVlpSUdacGJHd3RjblZzWlQwaVpYWmxibTlrWkNJZ2MzUnliMnRsUFNJalptWm1abVptSWlCemRISnZhMlV0ZDJsa2RHZzlJakVpSUhOMGNtOXJaUzFzYVc1bFkyRndQU0p5YjNWdVpDSWdjM1J5YjJ0bExXeHBibVZxYjJsdVBTSnliM1Z1WkNJdlBqeHdZWFJvSUdROUlrMHlOVE11TmpNME1qVXNNVGN3TGpFME5qY3lZeTB5TGpJNE1EYzJMREFnTFRRdU1USTVOamdzTFRFdU9EUTRPVElnTFRRdU1USTVOamdzTFRRdU1USTVOamgyTFRRdU5UY3lNamxqTUN3dE1pNHlPREEzTmlBeExqZzBPRGt5TEMwMExqRXlPVFk0SURRdU1USTVOamdzTFRRdU1USTVOamhvTkM0MU56SXlPV015TGpJNE1EYzJMREFnTkM0eE1qazJPQ3d4TGpnME9Ea3lJRFF1TVRJNU5qZ3NOQzR4TWprMk9IWTBMalUzTWpJNVl6QXNNaTR5T0RBM05pQXRNUzQ0TkRnNU1pdzBMakV5T1RZNElDMDBMakV5T1RZNExEUXVNVEk1TmpoNklpQm1hV3hzUFNJalptWm1abVptSWlCbWFXeHNMWEoxYkdVOUltNXZibnBsY204aUlITjBjbTlyWlQwaWJtOXVaU0lnYzNSeWIydGxMWGRwWkhSb1BTSXdJaUJ6ZEhKdmEyVXRiR2x1WldOaGNEMGlZblYwZENJZ2MzUnliMnRsTFd4cGJtVnFiMmx1UFNKdGFYUmxjaUl2UGp4d1lYUm9JR1E5SWsweU16Y3VNVE0yTkRFc01UY3dMakUwTmpjeVl5MHlMakk0TURjMkxEQWdMVFF1TVRJNU5qZ3NMVEV1T0RRNE9USWdMVFF1TVRJNU5qZ3NMVFF1TVRJNU5qaDJMVFF1TlRjeU1qbGpNQ3d0TWk0eU9EQTNOaUF4TGpnME9Ea3lMQzAwTGpFeU9UWTRJRFF1TVRJNU5qZ3NMVFF1TVRJNU5qaG9OQzQxTnpJeU9XTXlMakk0TURjMkxEQWdOQzR4TWprMk9Dd3hMamcwT0RreUlEUXVNVEk1Tmpnc05DNHhNamsyT0hZMExqVTNNakk1WXpBc01pNHlPREEzTmlBdE1TNDRORGc1TWl3MExqRXlPVFk0SUMwMExqRXlPVFk0TERRdU1USTVOamg2SWlCbWFXeHNQU0lqWm1abVptWm1JaUJtYVd4c0xYSjFiR1U5SW01dmJucGxjbThpSUhOMGNtOXJaVDBpYm05dVpTSWdjM1J5YjJ0bExYZHBaSFJvUFNJd0lpQnpkSEp2YTJVdGJHbHVaV05oY0QwaVluVjBkQ0lnYzNSeWIydGxMV3hwYm1WcWIybHVQU0p0YVhSbGNpSXZQanh3WVhSb0lHUTlJazB5TWpBdU5qTTROVGNzTVRjd0xqRTBOamN5WXkweUxqSTRNRGMyTERBZ0xUUXVNVEk1Tmpnc0xURXVPRFE0T1RJZ0xUUXVNVEk1Tmpnc0xUUXVNVEk1TmpoMkxUUXVOVGN5TWpsak1Dd3RNaTR5T0RBM05pQXhMamcwT0RreUxDMDBMakV5T1RZNElEUXVNVEk1Tmpnc0xUUXVNVEk1Tmpob05DNDFOekl5T1dNeUxqSTRNRGMyTERBZ05DNHhNamsyT0N3eExqZzBPRGt5SURRdU1USTVOamdzTkM0eE1qazJPSFkwTGpVM01qSTVZekFzTWk0eU9EQTNOaUF0TVM0NE5EZzVNaXcwTGpFeU9UWTRJQzAwTGpFeU9UWTRMRFF1TVRJNU5qaDZJaUJtYVd4c1BTSWpabVptWm1abUlpQm1hV3hzTFhKMWJHVTlJbTV2Ym5wbGNtOGlJSE4wY205clpUMGlibTl1WlNJZ2MzUnliMnRsTFhkcFpIUm9QU0l3SWlCemRISnZhMlV0YkdsdVpXTmhjRDBpWW5WMGRDSWdjM1J5YjJ0bExXeHBibVZxYjJsdVBTSnRhWFJsY2lJdlBqeHdZWFJvSUdROUlrMHlNakF1TmpNNE5UY3NNVGcyTGpZME5EVTFZeTB5TGpJNE1EYzJMREFnTFRRdU1USTVOamdzTFRFdU9EUTRPVElnTFRRdU1USTVOamdzTFRRdU1USTVOamgyTFRRdU5UY3lNamxqTUN3dE1pNHlPREEzTmlBeExqZzBPRGt5TEMwMExqRXlPVFk0SURRdU1USTVOamdzTFRRdU1USTVOamhvTkM0MU56SXlPV015TGpJNE1EYzJMREFnTkM0eE1qazJPQ3d4TGpnME9Ea3lJRFF1TVRJNU5qZ3NOQzR4TWprMk9IWTBMalUzTWpJNVl6QXNNaTR5T0RBM05pQXRNUzQ0TkRnNU1pdzBMakV5T1RZNElDMDBMakV5T1RZNExEUXVNVEk1TmpoNklpQm1hV3hzUFNJalptWm1abVptSWlCbWFXeHNMWEoxYkdVOUltNXZibnBsY204aUlITjBjbTlyWlQwaWJtOXVaU0lnYzNSeWIydGxMWGRwWkhSb1BTSXdJaUJ6ZEhKdmEyVXRiR2x1WldOaGNEMGlZblYwZENJZ2MzUnliMnRsTFd4cGJtVnFiMmx1UFNKdGFYUmxjaUl2UGp4d1lYUm9JR1E5SWsweU1qQXVOak00TlRjc01qQXpMakUwTWpNNVl5MHlMakk0TURjMkxEQWdMVFF1TVRJNU5qZ3NMVEV1T0RRNE9USWdMVFF1TVRJNU5qZ3NMVFF1TVRJNU5qaDJMVFF1TlRjeU1qbGpNQ3d0TWk0eU9EQTNOaUF4TGpnME9Ea3lMQzAwTGpFeU9UWTRJRFF1TVRJNU5qZ3NMVFF1TVRJNU5qaG9OQzQxTnpJeU9XTXlMakk0TURjMkxEQWdOQzR4TWprMk9Dd3hMamcwT0RreUlEUXVNVEk1Tmpnc05DNHhNamsyT0hZMExqVTNNakk1WXpBc01pNHlPREEzTmlBdE1TNDRORGc1TWl3MExqRXlPVFk0SUMwMExqRXlPVFk0TERRdU1USTVOamg2SWlCbWFXeHNQU0lqWm1abVptWm1JaUJtYVd4c0xYSjFiR1U5SW01dmJucGxjbThpSUhOMGNtOXJaVDBpYm05dVpTSWdjM1J5YjJ0bExYZHBaSFJvUFNJd0lpQnpkSEp2YTJVdGJHbHVaV05oY0QwaVluVjBkQ0lnYzNSeWIydGxMV3hwYm1WcWIybHVQU0p0YVhSbGNpSXZQanh3WVhSb0lHUTlJazB5TXpjdU1UTTJOREVzTVRnMkxqWTBORFUxWXkweUxqSTRNRGMyTERBZ0xUUXVNVEk1Tmpnc0xURXVPRFE0T1RJZ0xUUXVNVEk1Tmpnc0xUUXVNVEk1TmpoMkxUUXVOVGN5TWpsak1Dd3RNaTR5T0RBM05pQXhMamcwT0RreUxDMDBMakV5T1RZNElEUXVNVEk1Tmpnc0xUUXVNVEk1Tmpob05DNDFOekl5T1dNeUxqSTRNRGMyTERBZ05DNHhNamsyT0N3eExqZzBPRGt5SURRdU1USTVOamdzTkM0eE1qazJPSFkwTGpVM01qSTVZekFzTWk0eU9EQTNOaUF0TVM0NE5EZzVNaXcwTGpFeU9UWTRJQzAwTGpFeU9UWTRMRFF1TVRJNU5qaDZJaUJtYVd4c1BTSWpabVptWm1abUlpQm1hV3hzTFhKMWJHVTlJbTV2Ym5wbGNtOGlJSE4wY205clpUMGlibTl1WlNJZ2MzUnliMnRsTFhkcFpIUm9QU0l3SWlCemRISnZhMlV0YkdsdVpXTmhjRDBpWW5WMGRDSWdjM1J5YjJ0bExXeHBibVZxYjJsdVBTSnRhWFJsY2lJdlBqd3ZaejQ4TDJjK1BDOXpkbWMrIjsKCiAgY29uc3Qgdm0gPSBTY3JhdGNoLnZtOwogIGNvbnN0IHJ1bnRpbWUgPSB2bS5ydW50aW1lOwogIGNvbnN0IHJlbmRlciA9IHZtLnJlbmRlcmVyOwoKICBjb25zdCBTY3JhdGNoRWZmZWN0cyA9IFsKICAgIHsgdGV4dDogImNvbG9yIiwgdmFsdWU6ICJjb2xvciIgfSwgeyB0ZXh0OiAiZmlzaGV5ZSIsIHZhbHVlOiAiZmlzaGV5ZSIsIH0sCiAgICB7IHRleHQ6ICJ3aGlybCIsIHZhbHVlOiAid2hpcmwiIH0sIHsgdGV4dDogInBpeGVsYXRlIiwgdmFsdWU6ICJwaXhlbGF0ZSIgfSwKICAgIHsgdGV4dDogIm1vc2FpYyIsIHZhbHVlOiAibW9zYWljIiB9LCB7IHRleHQ6ICJicmlnaHRuZXNzIiwgdmFsdWU6ICJicmlnaHRuZXNzIiB9LAogICAgeyB0ZXh0OiAiZ2hvc3QiLCB2YWx1ZTogImdob3N0IiB9CiAgXTsKCiAgY2xhc3MgU1ByZW5kZXJDb250cm9sIHsKICAgIGdldEluZm8oKSB7CiAgICAgIHJldHVybiB7CiAgICAgICAgaWQ6ICJTUHJlbmRlckNvbnRyb2wiLAogICAgICAgIG5hbWU6ICJSZW5kZXJlciBDb250cm9sIiwKICAgICAgICBjb2xvcjE6ICIjNTM4NmI1IiwKICAgICAgICBjb2xvcjI6ICIjM2Q2MTg0IiwKICAgICAgICBjb2xvcjM6ICIjMmY0YzY3IiwKICAgICAgICBtZW51SWNvblVSSSwKICAgICAgICBibG9ja3M6IFsKICAgICAgICAgIHsKICAgICAgICAgICAgb3Bjb2RlOiAiZ2V0SUQiLAogICAgICAgICAgICBibG9ja1R5cGU6IFNjcmF0Y2guQmxvY2tUeXBlLlJFUE9SVEVSLAogICAgICAgICAgICB0ZXh0OiAiZ2V0IElEIG9mIFtUQVJHRVRdIiwKICAgICAgICAgICAgYXJndW1lbnRzOiB7CiAgICAgICAgICAgICAgVEFSR0VUOiB7IHR5cGU6IFNjcmF0Y2guQXJndW1lbnRUeXBlLlNUUklORywgbWVudTogIlRBUkdFVFMiIH0KICAgICAgICAgICAgfQogICAgICAgICAgfSwKICAgICAgICAgICItLS0iLAogICAgICAgICAgewogICAgICAgICAgICBvcGNvZGU6ICJleHBvcnRJRCIsCiAgICAgICAgICAgIGJsb2NrVHlwZTogU2NyYXRjaC5CbG9ja1R5cGUuUkVQT1JURVIsCiAgICAgICAgICAgIHRleHQ6ICJleHBvcnQgSUQgW0lEXSBhcyBkYXRhLnVyaSIsCiAgICAgICAgICAgIGFyZ3VtZW50czogewogICAgICAgICAgICAgIElEOiB7IHR5cGU6IFNjcmF0Y2guQXJndW1lbnRUeXBlLk5VTUJFUiwgZGVmYXVsdFZhbHVlOiAxIH0KICAgICAgICAgICAgfQogICAgICAgICAgfSwKICAgICAgICAgICItLS0iLAogICAgICAgICAgewogICAgICAgICAgICBvcGNvZGU6ICJlZmZlY3RJRCIsCiAgICAgICAgICAgIGJsb2NrVHlwZTogU2NyYXRjaC5CbG9ja1R5cGUuQ09NTUFORCwKICAgICAgICAgICAgdGV4dDogInNldCBbRUZGRUNUXSBvZiBJRCBbSURdIHRvIFtOVU1dIiwKICAgICAgICAgICAgYXJndW1lbnRzOiB7CiAgICAgICAgICAgICAgRUZGRUNUOiB7IHR5cGU6IFNjcmF0Y2guQXJndW1lbnRUeXBlLlNUUklORywgbWVudTogIkVGRkVDVFMiIH0sCiAgICAgICAgICAgICAgTlVNOiB7IHR5cGU6IFNjcmF0Y2guQXJndW1lbnRUeXBlLk5VTUJFUiwgZGVmYXVsdFZhbHVlOiA1MCB9LAogICAgICAgICAgICAgIElEOiB7IHR5cGU6IFNjcmF0Y2guQXJndW1lbnRUeXBlLk5VTUJFUiwgZGVmYXVsdFZhbHVlOiAxIH0KICAgICAgICAgICAgfQogICAgICAgICAgfSwKICAgICAgICAgIHsKICAgICAgICAgICAgb3Bjb2RlOiAicmVzZXRJRCIsCiAgICAgICAgICAgIGJsb2NrVHlwZTogU2NyYXRjaC5CbG9ja1R5cGUuQ09NTUFORCwKICAgICAgICAgICAgdGV4dDogInJlc2V0IGVmZmVjdHMgb2YgSUQgW0lEXSIsCiAgICAgICAgICAgIGFyZ3VtZW50czogewogICAgICAgICAgICAgIElEOiB7IHR5cGU6IFNjcmF0Y2guQXJndW1lbnRUeXBlLk5VTUJFUiwgZGVmYXVsdFZhbHVlOiAwIH0KICAgICAgICAgICAgfQogICAgICAgICAgfSwKICAgICAgICAgICItLS0iLAogICAgICAgICAgewogICAgICAgICAgICBvcGNvZGU6ICJzY2FsZUlEIiwKICAgICAgICAgICAgYmxvY2tUeXBlOiBTY3JhdGNoLkJsb2NrVHlwZS5DT01NQU5ELAogICAgICAgICAgICB0ZXh0OiAic2V0IHNjYWxlIG9mIElEIFtJRF0gdG8geCBbeF0geSBbeV0iLAogICAgICAgICAgICBhcmd1bWVudHM6IHsKICAgICAgICAgICAgICBJRDogeyB0eXBlOiBTY3JhdGNoLkFyZ3VtZW50VHlwZS5OVU1CRVIsIGRlZmF1bHRWYWx1ZTogMCB9LAogICAgICAgICAgICAgIHg6IHsgdHlwZTogU2NyYXRjaC5Bcmd1bWVudFR5cGUuTlVNQkVSLCBkZWZhdWx0VmFsdWU6IDEwMCB9LAogICAgICAgICAgICAgIHk6IHsgdHlwZTogU2NyYXRjaC5Bcmd1bWVudFR5cGUuTlVNQkVSLCBkZWZhdWx0VmFsdWU6IDEwMCB9CiAgICAgICAgICAgIH0KICAgICAgICAgIH0sCiAgICAgICAgICB7CiAgICAgICAgICAgIG9wY29kZTogInNjYWxlT2ZJRCIsCiAgICAgICAgICAgIGJsb2NrVHlwZTogU2NyYXRjaC5CbG9ja1R5cGUuUkVQT1JURVIsCiAgICAgICAgICAgIHRleHQ6ICJzY2FsZSBbWFldIG9mIElEIFtJRF0iLAogICAgICAgICAgICBhcmd1bWVudHM6IHsKICAgICAgICAgICAgICBYWTogeyB0eXBlOiBTY3JhdGNoLkFyZ3VtZW50VHlwZS5TVFJJTkcsIG1lbnU6ICJYWSIgfSwKICAgICAgICAgICAgICBJRDogeyB0eXBlOiBTY3JhdGNoLkFyZ3VtZW50VHlwZS5OVU1CRVIsIGRlZmF1bHRWYWx1ZTogMCB9CiAgICAgICAgICAgIH0KICAgICAgICAgIH0sCiAgICAgICAgICAiLS0tIiwKICAgICAgICAgIHsKICAgICAgICAgICAgb3Bjb2RlOiAicG9zaXRpb25JRCIsCiAgICAgICAgICAgIGJsb2NrVHlwZTogU2NyYXRjaC5CbG9ja1R5cGUuQ09NTUFORCwKICAgICAgICAgICAgdGV4dDogInNldCBwb3NpdGlvbiBvZiBJRCBbSURdIHRvIHggW3hdIHkgW3ldIiwKICAgICAgICAgICAgYXJndW1lbnRzOiB7CiAgICAgICAgICAgICAgSUQ6IHsgdHlwZTogU2NyYXRjaC5Bcmd1bWVudFR5cGUuTlVNQkVSLCBkZWZhdWx0VmFsdWU6IDAgfSwKICAgICAgICAgICAgICB4OiB7IHR5cGU6IFNjcmF0Y2guQXJndW1lbnRUeXBlLk5VTUJFUiwgZGVmYXVsdFZhbHVlOiAwIH0sCiAgICAgICAgICAgICAgeTogeyB0eXBlOiBTY3JhdGNoLkFyZ3VtZW50VHlwZS5OVU1CRVIsIGRlZmF1bHRWYWx1ZTogMCB9CiAgICAgICAgICAgIH0KICAgICAgICAgIH0sCiAgICAgICAgICB7CiAgICAgICAgICAgIG9wY29kZTogInBvc09mSUQiLAogICAgICAgICAgICBibG9ja1R5cGU6IFNjcmF0Y2guQmxvY2tUeXBlLlJFUE9SVEVSLAogICAgICAgICAgICB0ZXh0OiAiW1hZXSBwb3NpdGlvbiBvZiBJRCBbSURdIiwKICAgICAgICAgICAgYXJndW1lbnRzOiB7CiAgICAgICAgICAgICAgWFk6IHsgdHlwZTogU2NyYXRjaC5Bcmd1bWVudFR5cGUuU1RSSU5HLCBtZW51OiAiWFkiIH0sCiAgICAgICAgICAgICAgSUQ6IHsgdHlwZTogU2NyYXRjaC5Bcmd1bWVudFR5cGUuTlVNQkVSLCBkZWZhdWx0VmFsdWU6IDAgfQogICAgICAgICAgICB9CiAgICAgICAgICB9LAogICAgICAgICAgIi0tLSIsCiAgICAgICAgICB7CiAgICAgICAgICAgIG9wY29kZTogImRpcmVjdElEIiwKICAgICAgICAgICAgYmxvY2tUeXBlOiBTY3JhdGNoLkJsb2NrVHlwZS5DT01NQU5ELAogICAgICAgICAgICB0ZXh0OiAic2V0IGRpcmVjdGlvbiBvZiBJRCBbSURdIHRvIFtBTkdMRV0iLAogICAgICAgICAgICBhcmd1bWVudHM6IHsKICAgICAgICAgICAgICBJRDogeyB0eXBlOiBTY3JhdGNoLkFyZ3VtZW50VHlwZS5OVU1CRVIsIGRlZmF1bHRWYWx1ZTogMCB9LAogICAgICAgICAgICAgIEFOR0xFOiB7IHR5cGU6IFNjcmF0Y2guQXJndW1lbnRUeXBlLkFOR0xFLCBkZWZhdWx0VmFsdWU6IDkwIH0KICAgICAgICAgICAgfQogICAgICAgICAgfSwKICAgICAgICAgIHsKICAgICAgICAgICAgb3Bjb2RlOiAiZGlyT2ZJRCIsCiAgICAgICAgICAgIGJsb2NrVHlwZTogU2NyYXRjaC5CbG9ja1R5cGUuUkVQT1JURVIsCiAgICAgICAgICAgIHRleHQ6ICJkaXJlY3Rpb24gb2YgSUQgW0lEXSIsCiAgICAgICAgICAgIGFyZ3VtZW50czogewogICAgICAgICAgICAgIElEOiB7IHR5cGU6IFNjcmF0Y2guQXJndW1lbnRUeXBlLk5VTUJFUiwgZGVmYXVsdFZhbHVlOiAwIH0KICAgICAgICAgICAgfQogICAgICAgICAgfSwKICAgICAgICAgIHsKICAgICAgICAgICAgb3Bjb2RlOiAicm90YXRlSUQiLAogICAgICAgICAgICBibG9ja1R5cGU6IFNjcmF0Y2guQmxvY2tUeXBlLkNPTU1BTkQsCiAgICAgICAgICAgIHRleHQ6ICJzZXQgcm90YXRpb24gY2VudGVyIG9mIElEIFtJRF0gdG8geCBbeF0geSBbeV0iLAogICAgICAgICAgICBhcmd1bWVudHM6IHsKICAgICAgICAgICAgICBJRDogeyB0eXBlOiBTY3JhdGNoLkFyZ3VtZW50VHlwZS5OVU1CRVIsIGRlZmF1bHRWYWx1ZTogMCB9LAogICAgICAgICAgICAgIHg6IHsgdHlwZTogU2NyYXRjaC5Bcmd1bWVudFR5cGUuTlVNQkVSLCBkZWZhdWx0VmFsdWU6IDAgfSwKICAgICAgICAgICAgICB5OiB7IHR5cGU6IFNjcmF0Y2guQXJndW1lbnRUeXBlLk5VTUJFUiwgZGVmYXVsdFZhbHVlOiAwIH0KICAgICAgICAgICAgfQogICAgICAgICAgfSwKICAgICAgICAgIHsKICAgICAgICAgICAgb3Bjb2RlOiAicm90YXRlT2ZJRCIsCiAgICAgICAgICAgIGJsb2NrVHlwZTogU2NyYXRjaC5CbG9ja1R5cGUuUkVQT1JURVIsCiAgICAgICAgICAgIHRleHQ6ICJyb3RhdGlvbiBjZW50ZXIgW1hZXSBvZiBJRCBbSURdIiwKICAgICAgICAgICAgYXJndW1lbnRzOiB7CiAgICAgICAgICAgICAgWFk6IHsgdHlwZTogU2NyYXRjaC5Bcmd1bWVudFR5cGUuU1RSSU5HLCBtZW51OiAiWFkiIH0sCiAgICAgICAgICAgICAgSUQ6IHsgdHlwZTogU2NyYXRjaC5Bcmd1bWVudFR5cGUuTlVNQkVSLCBkZWZhdWx0VmFsdWU6IDAgfSwKICAgICAgICAgICAgfQogICAgICAgICAgfSwKICAgICAgICBdLAogICAgICAgIG1lbnVzOiB7CiAgICAgICAgICBYWTogWyJ4IiwgInkiXSwKICAgICAgICAgIFRBUkdFVFM6IHsKICAgICAgICAgICAgYWNjZXB0UmVwb3J0ZXJzOiB0cnVlLAogICAgICAgICAgICBpdGVtczogdGhpcy5fZ2V0VGFyZ2V0cyh0cnVlKQogICAgICAgICAgfSwKICAgICAgICAgIEVGRkVDVFM6IHsKICAgICAgICAgICAgYWNjZXB0UmVwb3J0ZXJzOiB0cnVlLAogICAgICAgICAgICBpdGVtczogU2NyYXRjaEVmZmVjdHMKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH07CiAgICB9CgogICAgX2dldFRhcmdldHMoZW5hYmxlKSB7CiAgICAgIGNvbnN0IHNwcml0ZU5hbWVzID0gW107CiAgICAgIGlmIChlbmFibGUpIHNwcml0ZU5hbWVzLnB1c2goeyB0ZXh0OiAibXlzZWxmIiwgdmFsdWU6ICJfbXlzZWxmXyIgfSk7CiAgICAgIHNwcml0ZU5hbWVzLnB1c2goeyB0ZXh0OiAiU3RhZ2UiLCB2YWx1ZTogIl9zdGFnZV8iIH0pOwogICAgICBzcHJpdGVOYW1lcy5wdXNoKHsgdGV4dDogIlZpZGVvIExheWVyIiwgdmFsdWU6ICJfdmlkZW9fIiB9KTsKICAgICAgc3ByaXRlTmFtZXMucHVzaCh7IHRleHQ6ICJQZW4gTGF5ZXIiLCB2YWx1ZTogIl9wZW5fIiB9KTsKICAgICAgY29uc3QgdGFyZ2V0cyA9IFNjcmF0Y2gudm0ucnVudGltZS50YXJnZXRzOwogICAgICBmb3IgKGxldCBpbmRleCA9IDE7IGluZGV4IDwgdGFyZ2V0cy5sZW5ndGg7IGluZGV4KyspIHsKICAgICAgICBjb25zdCB0YXJnZXQgPSB0YXJnZXRzW2luZGV4XTsKICAgICAgICBpZiAodGFyZ2V0LmlzT3JpZ2luYWwpIHsKICAgICAgICAgIGNvbnN0IHRhcmdldE5hbWUgPSB0YXJnZXQuZ2V0TmFtZSgpOwogICAgICAgICAgc3ByaXRlTmFtZXMucHVzaCh7IHRleHQ6IHRhcmdldE5hbWUsIHZhbHVlOiB0YXJnZXROYW1lIH0pOwogICAgICAgIH0KICAgICAgfQogICAgICByZXR1cm4gc3ByaXRlTmFtZXMubGVuZ3RoID4gMCA/IHNwcml0ZU5hbWVzIDogWyIiXTsKICAgIH0KCiAgICBnZXRJRChhcmdzLCB1dGlsKSB7CiAgICAgIGlmIChhcmdzLlRBUkdFVCA9PT0gIl9teXNlbGZfIikgcmV0dXJuIHV0aWwudGFyZ2V0LmRyYXdhYmxlSUQ7CiAgICAgIGlmIChhcmdzLlRBUkdFVCA9PT0gIl9zdGFnZV8iKSByZXR1cm4gcnVudGltZS5nZXRUYXJnZXRGb3JTdGFnZSgpLmRyYXdhYmxlSUQ7CiAgICAgIGlmIChhcmdzLlRBUkdFVCA9PT0gIl9wZW5fIikgcmV0dXJuIHRoaXMuZmluZFNwZWNpYWwocmVuZGVyLl9hbGxEcmF3YWJsZXMsICJhX2xpbmVDb2xvckluZGV4Iik7CiAgICAgIGNvbnN0IHZpZGVvTCA9IHJ1bnRpbWUuaW9EZXZpY2VzLnZpZGVvLl9kcmF3YWJsZTsKICAgICAgaWYgKGFyZ3MuVEFSR0VUID09PSAiX3ZpZGVvXyIpIHJldHVybiB2aWRlb0wgIT09IC0xID8gdmlkZW9MIDogIiI7CiAgICAgIGNvbnN0IHRhcmdldCA9IHJ1bnRpbWUuZ2V0U3ByaXRlVGFyZ2V0QnlOYW1lKGFyZ3MuVEFSR0VUKTsKICAgICAgcmV0dXJuIHRhcmdldCA/IHRhcmdldC5kcmF3YWJsZUlEIDogIiI7CiAgICB9CiAgICAvLyByZW5kZXJlci5fcGVuU2tpbklEIGRvZXNudCB3b3JrLCB3ZSBuZWVkIHRvIHVzZSB0aGlzOgogICAgZmluZFNwZWNpYWwoYXJyYXksIGtleSkgewogICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGFycmF5Lmxlbmd0aDsgaSsrKSB7CiAgICAgICAgaWYgKGFycmF5W2ldICYmIGFycmF5W2ldLnNraW5ba2V5XSAhPT0gdW5kZWZpbmVkKSByZXR1cm4gaTsKICAgICAgfQogICAgICByZXR1cm4gIiI7CiAgICB9CgogICAgZXhwb3J0SUQoYXJncykgewogICAgICBpZiAodm0ucmVuZGVyZXIuX2RyYXdMaXN0LmluZGV4T2YoYXJncy5JRCkgPT09IC0xKSByZXR1cm4gIiI7CiAgICAgIGNvbnN0IGltYWdlRGF0YSA9IHZtLnJ1bnRpbWUucmVuZGVyZXIuZXh0cmFjdERyYXdhYmxlU2NyZWVuU3BhY2UoYXJncy5JRCkuaW1hZ2VEYXRhOwogICAgICB2YXIgY2FudmFzID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiY2FudmFzIik7CiAgICAgIGNhbnZhcy53aWR0aCA9IGltYWdlRGF0YS53aWR0aDsKICAgICAgY2FudmFzLmhlaWdodCA9IGltYWdlRGF0YS5oZWlnaHQ7CiAgICAgIGNhbnZhcy5nZXRDb250ZXh0KCIyZCIpLnB1dEltYWdlRGF0YShpbWFnZURhdGEsIDAsIDApOwogICAgICByZXR1cm4gY2FudmFzLnRvRGF0YVVSTCgiaW1hZ2UvcG5nIik7CiAgICB9CgogICAgZWZmZWN0SUQoYXJncykgewogICAgICBjb25zdCBudW0gPSBTY3JhdGNoLkNhc3QudG9OdW1iZXIoYXJncy5OVU0pOwogICAgICBjb25zdCBhbGxMYXkgPSB2bS5yZW5kZXJlci5fZHJhd0xpc3Q7CiAgICAgIGlmICghU2NyYXRjaEVmZmVjdHMuc29tZShlZmZlY3QgPT4gZWZmZWN0LnZhbHVlID09PSBhcmdzLkVGRkVDVCkpIHJldHVybjsKICAgICAgaWYgKGFsbExheS5pbmRleE9mKGFyZ3MuSUQpICE9PSAtMSkgcmVuZGVyLl9hbGxEcmF3YWJsZXNbYXJncy5JRF0udXBkYXRlRWZmZWN0KGFyZ3MuRUZGRUNULCBudW0pOwogICAgfQoKICAgIHNjYWxlSUQoYXJncykgewogICAgICBjb25zdCB4ID0gU2NyYXRjaC5DYXN0LnRvTnVtYmVyKGFyZ3MueCk7CiAgICAgIGNvbnN0IHkgPSBTY3JhdGNoLkNhc3QudG9OdW1iZXIoYXJncy55KTsKICAgICAgY29uc3QgYWxsTGF5ID0gdm0ucmVuZGVyZXIuX2RyYXdMaXN0OwogICAgICBpZiAoYWxsTGF5LmluZGV4T2YoYXJncy5JRCkgIT09IC0xKSByZW5kZXIuX2FsbERyYXdhYmxlc1thcmdzLklEXS51cGRhdGVTY2FsZShbeCwgeV0pOwogICAgfQoKICAgIHNjYWxlT2ZJRChhcmdzKSB7CiAgICAgIGNvbnN0IGFsbExheSA9IHZtLnJlbmRlcmVyLl9kcmF3TGlzdDsKICAgICAgaWYgKGFsbExheS5pbmRleE9mKGFyZ3MuSUQpICE9PSAtMSkgewogICAgICAgIHJldHVybiByZW5kZXIuX2FsbERyYXdhYmxlc1thcmdzLklEXS5fc2NhbGVbYXJncy5YWSA9PT0gIngiID8gMCA6IDFdOwogICAgICB9CiAgICAgIHJldHVybiAwOwogICAgfQoKICAgIGRpcmVjdElEKGFyZ3MpIHsKICAgICAgY29uc3QgZGlyID0gU2NyYXRjaC5DYXN0LnRvTnVtYmVyKGFyZ3MuQU5HTEUpOwogICAgICBjb25zdCBhbGxMYXkgPSB2bS5yZW5kZXJlci5fZHJhd0xpc3Q7CiAgICAgIGlmIChhbGxMYXkuaW5kZXhPZihhcmdzLklEKSAhPT0gLTEpIHJlbmRlci5fYWxsRHJhd2FibGVzW2FyZ3MuSURdLnVwZGF0ZURpcmVjdGlvbihkaXIpOwogICAgfQoKICAgIGRpck9mSUQoYXJncykgewogICAgICBjb25zdCBhbGxMYXkgPSB2bS5yZW5kZXJlci5fZHJhd0xpc3Q7CiAgICAgIGlmIChhbGxMYXkuaW5kZXhPZihhcmdzLklEKSAhPT0gLTEpIHsKICAgICAgICByZXR1cm4gcmVuZGVyLl9hbGxEcmF3YWJsZXNbYXJncy5JRF0uX2RpcmVjdGlvbjsKICAgICAgfQogICAgICByZXR1cm4gMDsKICAgIH0KCiAgICByb3RhdGVJRChhcmdzKSB7CiAgICAgIGNvbnN0IHggPSBTY3JhdGNoLkNhc3QudG9OdW1iZXIoYXJncy54KTsKICAgICAgY29uc3QgeSA9IFNjcmF0Y2guQ2FzdC50b051bWJlcihhcmdzLnkpOwogICAgICBjb25zdCBhbGxMYXkgPSB2bS5yZW5kZXJlci5fZHJhd0xpc3Q7CiAgICAgIGlmIChhbGxMYXkuaW5kZXhPZihhcmdzLklEKSAhPT0gLTEpIHsKICAgICAgICByZW5kZXIuX2FsbERyYXdhYmxlc1thcmdzLklEXS5za2luLl9yb3RhdGlvbkNlbnRlciA9IG5ldyBGbG9hdDMyQXJyYXkoW3gsIHksIDBdKTsKICAgICAgICByZW5kZXIuX2FsbERyYXdhYmxlc1thcmdzLklEXS5fcm90YXRpb25DZW50ZXJEaXJ0eSA9IHRydWU7CiAgICAgIH0KICAgIH0KCiAgICByb3RhdGVPZklEKGFyZ3MpIHsKICAgICAgY29uc3QgYWxsTGF5ID0gdm0ucmVuZGVyZXIuX2RyYXdMaXN0OwogICAgICBpZiAoYWxsTGF5LmluZGV4T2YoYXJncy5JRCkgIT09IC0xKSByZXR1cm4gcmVuZGVyLl9hbGxEcmF3YWJsZXNbYXJncy5JRF0uX3NraW5TY2FsZVthcmdzLlhZID09PSAieCIgPyAwIDogMV0gLyAyOwogICAgICByZXR1cm4gMDsKICAgIH0KCiAgICBwb3NpdGlvbklEKGFyZ3MpIHsKICAgICAgYXJncy54ID0gU2NyYXRjaC5DYXN0LnRvTnVtYmVyKGFyZ3MueCk7CiAgICAgIGFyZ3MueSA9IFNjcmF0Y2guQ2FzdC50b051bWJlcihhcmdzLnkpOwogICAgICBjb25zdCBhbGxMYXkgPSB2bS5yZW5kZXJlci5fZHJhd0xpc3Q7CiAgICAgIGlmIChhbGxMYXkuaW5kZXhPZihhcmdzLklEKSAhPT0gLTEpIHJlbmRlci5fYWxsRHJhd2FibGVzW2FyZ3MuSURdLnVwZGF0ZVBvc2l0aW9uKFthcmdzLngsIGFyZ3MueV0pOwogICAgfQoKICAgIHBvc09mSUQoYXJncykgewogICAgICBjb25zdCBhbGxMYXkgPSB2bS5yZW5kZXJlci5fZHJhd0xpc3Q7CiAgICAgIGlmIChhbGxMYXkuaW5kZXhPZihhcmdzLklEKSAhPT0gLTEpIHsKICAgICAgICByZXR1cm4gcmVuZGVyLl9hbGxEcmF3YWJsZXNbYXJncy5JRF0uX3Bvc2l0aW9uW2FyZ3MuWFkgPT09ICJ4IiA/IDAgOiAxXTsKICAgICAgfQogICAgICByZXR1cm4gMDsKICAgIH0KCiAgICByZXNldElEKGFyZ3MpIHsKICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBTY3JhdGNoRWZmZWN0cy5sZW5ndGg7IGkrKykgewogICAgICAgIHRoaXMuZWZmZWN0SUQoeyBJRCA6IGFyZ3MuSUQsIEVGRkVDVCA6IFNjcmF0Y2hFZmZlY3RzW2ldLnZhbHVlLCBOVU0gOiAwIH0pOwogICAgICB9CiAgICB9CiAgfQoKICBTY3JhdGNoLmV4dGVuc2lvbnMucmVnaXN0ZXIobmV3IFNQcmVuZGVyQ29udHJvbCgpKTsKfSkoU2NyYXRjaCk7Cg==","data:text/javascript;,(function(Scratch)%20%7B%20%2F%2F%20Name%3A%20Clipping%20%26%20Blending%0A%2F%2F%20ID%3A%20xeltallivclipblend%0A%2F%2F%20Description%3A%20Clipping%20outside%20of%20a%20specified%20rectangular%20area%20and%20different%20color%20blending%20modes.%0A%2F%2F%20By%3A%20Vadik1%20%3Chttps%3A%2F%2Fscratch.mit.edu%2Fusers%2FVadik1%2F%3E%0A%2F%2F%20License%3A%20MIT%0A%0A(function%20(Scratch)%20%7B%0A%20%20%22use%20strict%22%3B%0A%0A%20%20if%20(!Scratch.extensions.unsandboxed)%20%7B%0A%20%20%20%20throw%20new%20Error(%22Clipping%20%26%20Blending%20extension%20must%20be%20run%20unsandboxed%22)%3B%0A%20%20%7D%0A%0A%20%20%2F%2F%20Simplified%20remake%20of%20an%20icon%20by%20True-Fantom%0A%20%20const%20icon%20%3D%0A%20%20%20%20%22data%3Aimage%2Fsvg%2Bxml%2C%22%20%2B%0A%20%20%20%20encodeURIComponent(%60%0A%20%20%20%20%3Csvg%20version%3D%221.1%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20xmlns%3Axlink%3D%22http%3A%2F%2Fwww.w3.org%2F1999%2Fxlink%22%20viewBox%3D%220%2C0%2C200%2C200%22%3E%0A%20%20%20%20%20%20%3Ccircle%20r%3D%22100%22%20cx%3D%22100%22%20cy%3D%22100%22%20fill%3D%22%239966ff%22%2F%3E%0A%20%20%20%20%20%20%3Cpath%20d%3D%22M122%2C61v-4a12%2C12%200%2C0%2C0%20-12%2C-12h-4m-17%2C0h-16m-17%2C0h-4a12%2C12%200%2C0%2C0%20-12%2C12v4m0%2C17v16m0%2C17v4a12%2C12%200%2C0%2C0%2012%2C12h4%22%20stroke%3D%22%23ffffff%22%20stroke-width%3D%2211%22%20stroke-linecap%3D%22round%22%20fill%3D%22none%22%2F%3E%0A%20%20%20%20%20%20%3Cg%20fill%3D%22%23ffffff%22%20stroke%3D%22%239966ff%22%20stroke-width%3D%227.5%22%3E%0A%20%20%20%20%20%20%20%20%3Ccircle%20r%3D%2232%22%20cx%3D%22118%22%20cy%3D%22102%22%2F%3E%0A%20%20%20%20%20%20%20%20%3Ccircle%20r%3D%2232%22%20cx%3D%2296%22%20cy%3D%22137%22%2F%3E%0A%20%20%20%20%20%20%20%20%3Ccircle%20r%3D%2232%22%20cx%3D%22140%22%20cy%3D%22137%22%2F%3E%0A%20%20%20%20%20%20%3C%2Fg%3E%0A%20%20%20%20%3C%2Fsvg%3E%60)%3B%0A%0A%20%20let%20toCorrectThing%20%3D%20null%3B%0A%20%20let%20active%20%3D%20false%3B%0A%20%20let%20flipY%20%3D%20false%3B%0A%20%20const%20vm%20%3D%20Scratch.vm%3B%0A%20%20const%20runtime%20%3D%20vm.runtime%3B%0A%20%20const%20renderer%20%3D%20vm.renderer%3B%0A%20%20const%20_drawThese%20%3D%20renderer._drawThese%3B%0A%20%20const%20gl%20%3D%20renderer._gl%3B%0A%20%20const%20canvas%20%3D%20renderer.canvas%3B%0A%20%20let%20width%20%3D%200%3B%0A%20%20let%20height%20%3D%200%3B%0A%20%20let%20scratchUnitWidth%20%3D%20480%3B%0A%20%20let%20scratchUnitHeight%20%3D%20360%3B%0A%20%20let%20penDirty%20%3D%20false%3B%0A%0A%20%20renderer._drawThese%20%3D%20function%20(drawables%2C%20drawMode%2C%20projection%2C%20opts)%20%7B%0A%20%20%20%20active%20%3D%20true%3B%0A%20%20%20%20%5BscratchUnitWidth%2C%20scratchUnitHeight%5D%20%3D%20renderer.getNativeSize()%3B%0A%20%20%20%20_drawThese.call(this%2C%20drawables%2C%20drawMode%2C%20projection%2C%20opts)%3B%0A%20%20%20%20gl.disable(gl.SCISSOR_TEST)%3B%0A%20%20%20%20gl.blendFunc(gl.ONE%2C%20gl.ONE_MINUS_SRC_ALPHA)%3B%0A%20%20%20%20active%20%3D%20false%3B%0A%20%20%7D%3B%0A%0A%20%20const%20bfb%20%3D%20gl.bindFramebuffer%3B%0A%20%20gl.bindFramebuffer%20%3D%20function%20(target%2C%20framebuffer)%20%7B%0A%20%20%20%20if%20(target%20%3D%3D%20gl.FRAMEBUFFER)%20%7B%0A%20%20%20%20%20%20if%20(framebuffer%20%3D%3D%20null)%20%7B%0A%20%20%20%20%20%20%20%20toCorrectThing%20%3D%20true%3B%0A%20%20%20%20%20%20%20%20flipY%20%3D%20false%3B%0A%20%20%20%20%20%20%20%20width%20%3D%20canvas.width%3B%0A%20%20%20%20%20%20%20%20height%20%3D%20canvas.height%3B%0A%20%20%20%20%20%20%7D%20else%20if%20(renderer._penSkinId)%20%7B%0A%20%20%20%20%20%20%20%20const%20fbInfo%20%3D%20renderer._allSkins%5Brenderer._penSkinId%5D._framebuffer%3B%0A%20%20%20%20%20%20%20%20if%20(framebuffer%20%3D%3D%20fbInfo.framebuffer)%20%7B%0A%20%20%20%20%20%20%20%20%20%20toCorrectThing%20%3D%20true%3B%0A%20%20%20%20%20%20%20%20%20%20flipY%20%3D%20true%3B%0A%20%20%20%20%20%20%20%20%20%20width%20%3D%20fbInfo.width%3B%0A%20%20%20%20%20%20%20%20%20%20height%20%3D%20fbInfo.height%3B%0A%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20toCorrectThing%20%3D%20false%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20toCorrectThing%20%3D%20false%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%20%20%20%20bfb.call(this%2C%20target%2C%20framebuffer)%3B%0A%20%20%7D%3B%0A%0A%20%20%2F%2F%20Getting%20Drawable%0A%20%20const%20dr%20%3D%20renderer.createDrawable(%22background%22)%3B%0A%20%20const%20DrawableProto%20%3D%20renderer._allDrawables%5Bdr%5D.__proto__%3B%0A%20%20renderer.destroyDrawable(dr%2C%20%22background%22)%3B%0A%0A%20%20function%20setupModes(clipbox%2C%20blendMode%2C%20flipY)%20%7B%0A%20%20%20%20if%20(clipbox)%20%7B%0A%20%20%20%20%20%20gl.enable(gl.SCISSOR_TEST)%3B%0A%20%20%20%20%20%20let%20x%20%3D%20((clipbox.x_min%20%2F%20scratchUnitWidth%20%2B%200.5)%20*%20width)%20%7C%200%3B%0A%20%20%20%20%20%20let%20y%20%3D%20((clipbox.y_min%20%2F%20scratchUnitHeight%20%2B%200.5)%20*%20height)%20%7C%200%3B%0A%20%20%20%20%20%20let%20x2%20%3D%20((clipbox.x_max%20%2F%20scratchUnitWidth%20%2B%200.5)%20*%20width)%20%7C%200%3B%0A%20%20%20%20%20%20let%20y2%20%3D%20((clipbox.y_max%20%2F%20scratchUnitHeight%20%2B%200.5)%20*%20height)%20%7C%200%3B%0A%20%20%20%20%20%20let%20w%20%3D%20x2%20-%20x%3B%0A%20%20%20%20%20%20let%20h%20%3D%20y2%20-%20y%3B%0A%20%20%20%20%20%20if%20(flipY)%20%7B%0A%20%20%20%20%20%20%20%20y%20%3D%20((-clipbox.y_max%20%2F%20scratchUnitHeight%20%2B%200.5)%20*%20height)%20%7C%200%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20gl.scissor(x%2C%20y%2C%20w%2C%20h)%3B%0A%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20gl.disable(gl.SCISSOR_TEST)%3B%0A%20%20%20%20%7D%0A%20%20%20%20switch%20(blendMode)%20%7B%0A%20%20%20%20%20%20case%20%22additive%22%3A%0A%20%20%20%20%20%20%20%20gl.blendEquation(gl.FUNC_ADD)%3B%0A%20%20%20%20%20%20%20%20gl.blendFunc(gl.ONE%2C%20gl.ONE)%3B%0A%20%20%20%20%20%20%20%20break%3B%0A%20%20%20%20%20%20case%20%22subtract%22%3A%0A%20%20%20%20%20%20%20%20gl.blendEquation(gl.FUNC_REVERSE_SUBTRACT)%3B%0A%20%20%20%20%20%20%20%20gl.blendFunc(gl.ONE%2C%20gl.ONE)%3B%0A%20%20%20%20%20%20%20%20break%3B%0A%20%20%20%20%20%20case%20%22multiply%22%3A%0A%20%20%20%20%20%20%20%20gl.blendEquation(gl.FUNC_ADD)%3B%0A%20%20%20%20%20%20%20%20gl.blendFunc(gl.DST_COLOR%2C%20gl.ONE_MINUS_SRC_ALPHA)%3B%0A%20%20%20%20%20%20%20%20break%3B%0A%20%20%20%20%20%20case%20%22invert%22%3A%0A%20%20%20%20%20%20%20%20gl.blendEquation(gl.FUNC_ADD)%3B%0A%20%20%20%20%20%20%20%20gl.blendFunc(gl.ONE_MINUS_DST_COLOR%2C%20gl.ONE_MINUS_SRC_COLOR)%3B%0A%20%20%20%20%20%20%20%20break%3B%0A%20%20%20%20%20%20default%3A%0A%20%20%20%20%20%20%20%20gl.blendEquation(gl.FUNC_ADD)%3B%0A%20%20%20%20%20%20%20%20gl.blendFunc(gl.ONE%2C%20gl.ONE_MINUS_SRC_ALPHA)%3B%0A%20%20%20%20%7D%0A%20%20%7D%0A%0A%20%20%2F%2F%20Modifying%20and%20expanding%20Drawable%0A%20%20const%20gu%20%3D%20DrawableProto.getUniforms%3B%0A%20%20DrawableProto.getUniforms%20%3D%20function%20()%20%7B%0A%20%20%20%20if%20(active%20%26%26%20toCorrectThing)%20%7B%0A%20%20%20%20%20%20setupModes(this.clipbox%2C%20this.blendMode%2C%20flipY)%3B%0A%20%20%20%20%7D%0A%20%20%20%20return%20gu.call(this)%3B%0A%20%20%7D%3B%0A%20%20DrawableProto.updateClipBox%20%3D%20function%20(clipbox)%20%7B%0A%20%20%20%20this.clipbox%20%3D%20clipbox%3B%0A%20%20%7D%3B%0A%20%20DrawableProto.updateBlendMode%20%3D%20function%20(blendMode)%20%7B%0A%20%20%20%20this.blendMode%20%3D%20blendMode%3B%0A%20%20%7D%3B%0A%0A%20%20%2F%2F%20Expanding%20renderer%0A%20%20renderer.updateDrawableClipBox%20%3D%20function%20(drawableID%2C%20clipbox)%20%7B%0A%20%20%20%20const%20drawable%20%3D%20this._allDrawables%5BdrawableID%5D%3B%0A%20%20%20%20if%20(!drawable)%20return%3B%0A%20%20%20%20drawable.updateClipBox(clipbox)%3B%0A%20%20%7D%3B%0A%20%20renderer.updateDrawableBlendMode%20%3D%20function%20(drawableID%2C%20blendMode)%20%7B%0A%20%20%20%20const%20drawable%20%3D%20this._allDrawables%5BdrawableID%5D%3B%0A%20%20%20%20if%20(!drawable)%20return%3B%0A%20%20%20%20drawable.updateBlendMode(blendMode)%3B%0A%20%20%7D%3B%0A%0A%20%20%2F%2F%20Reset%20on%20stop%20%26%20clones%20inherit%20effects%0A%20%20const%20regTargetStuff%20%3D%20function%20(args)%20%7B%0A%20%20%20%20if%20(args.editingTarget)%20%7B%0A%20%20%20%20%20%20vm.removeListener(%22targetsUpdate%22%2C%20regTargetStuff)%3B%0A%20%20%20%20%20%20const%20proto%20%3D%20vm.runtime.targets%5B0%5D.__proto__%3B%0A%20%20%20%20%20%20const%20osa%20%3D%20proto.onStopAll%3B%0A%20%20%20%20%20%20proto.onStopAll%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20%20%20this.clipbox%20%3D%20null%3B%0A%20%20%20%20%20%20%20%20this.blendMode%20%3D%20%22default%22%3B%0A%20%20%20%20%20%20%20%20this.renderer.updateDrawableClipBox.call(%0A%20%20%20%20%20%20%20%20%20%20renderer%2C%0A%20%20%20%20%20%20%20%20%20%20this.drawableID%2C%0A%20%20%20%20%20%20%20%20%20%20null%0A%20%20%20%20%20%20%20%20)%3B%0A%20%20%20%20%20%20%20%20this.renderer.updateDrawableBlendMode.call(%0A%20%20%20%20%20%20%20%20%20%20renderer%2C%0A%20%20%20%20%20%20%20%20%20%20this.drawableID%2C%0A%20%20%20%20%20%20%20%20%20%20null%0A%20%20%20%20%20%20%20%20)%3B%0A%20%20%20%20%20%20%20%20osa.call(this)%3B%0A%20%20%20%20%20%20%7D%3B%0A%20%20%20%20%20%20const%20mc%20%3D%20proto.makeClone%3B%0A%20%20%20%20%20%20proto.makeClone%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20%20%20const%20newTarget%20%3D%20mc.call(this)%3B%0A%20%20%20%20%20%20%20%20if%20(this.clipbox%20%7C%7C%20this.blendMode)%20%7B%0A%20%20%20%20%20%20%20%20%20%20newTarget.clipbox%20%3D%20this.clipbox%0A%20%20%20%20%20%20%20%20%20%20%20%20%3F%20Object.assign(%7B%7D%2C%20this.clipbox)%0A%20%20%20%20%20%20%20%20%20%20%20%20%3A%20null%3B%0A%20%20%20%20%20%20%20%20%20%20newTarget.blendMode%20%3D%20this.blendMode%3B%0A%20%20%20%20%20%20%20%20%20%20renderer.updateDrawableClipBox.call(%0A%20%20%20%20%20%20%20%20%20%20%20%20renderer%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20newTarget.drawableID%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20this.clipbox%0A%20%20%20%20%20%20%20%20%20%20)%3B%0A%20%20%20%20%20%20%20%20%20%20renderer.updateDrawableBlendMode.call(%0A%20%20%20%20%20%20%20%20%20%20%20%20renderer%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20newTarget.drawableID%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20this.blendMode%0A%20%20%20%20%20%20%20%20%20%20)%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20return%20newTarget%3B%0A%20%20%20%20%20%20%7D%3B%0A%20%20%20%20%7D%0A%20%20%7D%3B%0A%20%20vm.on(%22targetsUpdate%22%2C%20regTargetStuff)%3B%0A%0A%20%20%2F%2F%20Pen%20lines%20support%0A%20%20let%20emptyObject%20%3D%20%7B%7D%3B%0A%20%20let%20lastTarget%20%3D%20emptyObject%3B%0A%20%20let%20lastClipbox%20%3D%20%7B%7D%3B%0A%20%20let%20lastBlendMode%20%3D%20%22default%22%3B%0A%20%20function%20patchPen(skin)%20%7B%0A%20%20%20%20const%20ext_pen%20%3D%20runtime.ext_pen%3B%0A%20%20%20%20skin._lineOnBufferDrawRegionId.exit%20%3D%20()%20%3D%3E%20%7B%0A%20%20%20%20%20%20skin._exitDrawLineOnBuffer()%3B%0A%20%20%20%20%20%20gl.blendFunc(gl.ONE%2C%20gl.ONE_MINUS_SRC_ALPHA)%3B%0A%20%20%20%20%20%20gl.disable(gl.SCISSOR_TEST)%3B%0A%20%20%20%20%20%20lastTarget%20%3D%20emptyObject%3B%0A%20%20%20%20%20%20lastClipbox%20%3D%20null%3B%0A%20%20%20%20%20%20lastBlendMode%20%3D%20%22default%22%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20const%20willDrawPenWithTarget%20%3D%20function%20(target)%20%7B%0A%20%20%20%20%20%20if%20(!penDirty%20%26%26%20target%20%3D%3D%20lastTarget)%20return%3B%0A%20%20%20%20%20%20penDirty%20%3D%20false%3B%0A%0A%20%20%20%20%20%20const%20clipbox%20%3D%20target.clipbox%3B%0A%20%20%20%20%20%20if%20(%0A%20%20%20%20%20%20%20%20!lastClipbox%20%5E%20!clipbox%20%7C%7C%0A%20%20%20%20%20%20%20%20lastBlendMode%20!%3D%20target.blendMode%20%7C%7C%0A%20%20%20%20%20%20%20%20(clipbox%20%26%26%0A%20%20%20%20%20%20%20%20%20%20(clipbox.x_min%20!%3D%20lastClipbox.x_min%20%7C%7C%0A%20%20%20%20%20%20%20%20%20%20%20%20clipbox.y_min%20!%3D%20lastClipbox.y_min%20%7C%7C%0A%20%20%20%20%20%20%20%20%20%20%20%20clipbox.x_max%20!%3D%20lastClipbox.x_max%20%7C%7C%0A%20%20%20%20%20%20%20%20%20%20%20%20clipbox.y_max%20!%3D%20lastClipbox.y_max))%0A%20%20%20%20%20%20)%20%7B%0A%20%20%20%20%20%20%20%20if%20(skin.a_lineColorIndex)%20%7B%0A%20%20%20%20%20%20%20%20%20%20skin._flushLines()%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20lastTarget%20%3D%20target%3B%0A%20%20%20%20%20%20%20%20if%20(clipbox)%20%7B%0A%20%20%20%20%20%20%20%20%20%20lastClipbox%20%3D%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20x_min%3A%20clipbox.x_min%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20y_min%3A%20clipbox.y_min%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20x_max%3A%20clipbox.x_max%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20y_max%3A%20clipbox.y_max%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%3B%0A%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20lastClipbox%20%3D%20null%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20lastBlendMode%20%3D%20target.blendMode%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%3B%0A%20%20%20%20%2F%2F%20onTargetMoved%20function%20of%20pen%20draws%20a%20line.%0A%20%20%20%20%2F%2F%20When%20drawing%20a%20line%20it%20is%20important%20to%20know%20the%20target.%0A%20%20%20%20%2F%2F%20This%20saves%20target.%0A%20%20%20%20const%20onTargetMoved%20%3D%20ext_pen._onTargetMoved%3B%0A%20%20%20%20ext_pen._onTargetMoved%20%3D%20function%20(target%2C%20oldX%2C%20oldY%2C%20isForce)%20%7B%0A%20%20%20%20%20%20willDrawPenWithTarget(target)%3B%0A%20%20%20%20%20%20onTargetMoved.call(this%2C%20target%2C%20oldX%2C%20oldY%2C%20isForce)%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20%2F%2F%20Existing%20tragets%20may%20still%20have%20old%20onTargetMoved%0A%20%20%20%20for%20(let%20target%20in%20runtime.tragets)%20%7B%0A%20%20%20%20%20%20if%20(target.onTargetMoved%20%3D%3D%20onTargetMoved)%20%7B%0A%20%20%20%20%20%20%20%20target.onTargetMoved%20%3D%20ext_pen._onTargetMoved%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%20%20%20%20%2F%2F%20When%20drawing%20a%20dot%20it%20is%20important%20to%20know%20the%20target.%0A%20%20%20%20%2F%2F%20This%20saves%20target.%0A%20%20%20%20const%20penDown%20%3D%20ext_pen._penDown%3B%0A%20%20%20%20ext_pen._penDown%20%3D%20function%20(target)%20%7B%0A%20%20%20%20%20%20willDrawPenWithTarget(target)%3B%0A%20%20%20%20%20%20penDown.call(this%2C%20target)%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20%2F%2F%20Set%20up%20correct%20clipping%2Fblending%20before%20drawing%0A%20%20%20%20const%20flushLines%20%3D%20skin.__proto__._flushLines%3B%0A%20%20%20%20skin.__proto__._flushLines%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20setupModes(lastClipbox%2C%20lastBlendMode%2C%20true)%3B%0A%20%20%20%20%20%20flushLines.call(this)%3B%0A%20%20%20%20%7D%3B%0A%20%20%7D%0A%20%20if%20(renderer._allSkins%5Brenderer._penSkinId%5D)%20%7B%0A%20%20%20%20%2F%2F%20If%20pen%20skin%20already%20exists%2C%20things%20can%20be%20patched%0A%20%20%20%20patchPen(renderer._allSkins%5Brenderer._penSkinId%5D)%3B%0A%20%20%7D%20else%20%7B%0A%20%20%20%20%2F%2F%20If%20pen%20skin%20does%20not%20exist%2C%20wait%20until%20it%20will%2C%0A%20%20%20%20%2F%2F%20trigger%20code%20once%2C%20and%20return%20everything%20as%20it%20was%0A%20%20%20%20const%20createPenSkin%20%3D%20renderer.createPenSkin%3B%0A%20%20%20%20renderer.createPenSkin%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20let%20skinId%20%3D%20createPenSkin.call(this)%3B%0A%20%20%20%20%20%20patchPen(renderer._allSkins%5BskinId%5D)%3B%0A%20%20%20%20%20%20renderer.createPenSkin%20%3D%20createPenSkin%3B%0A%20%20%20%20%20%20return%20skinId%3B%0A%20%20%20%20%7D%3B%0A%20%20%7D%0A%0A%20%20class%20Extension%20%7B%0A%20%20%20%20getInfo()%20%7B%0A%20%20%20%20%20%20return%20%7B%0A%20%20%20%20%20%20%20%20id%3A%20%22xeltallivclipblend%22%2C%0A%20%20%20%20%20%20%20%20name%3A%20%22Clipping%20%26%20Blending%22%2C%0A%20%20%20%20%20%20%20%20color1%3A%20%22%239966FF%22%2C%0A%20%20%20%20%20%20%20%20color2%3A%20%22%23855CD6%22%2C%0A%20%20%20%20%20%20%20%20color3%3A%20%22%23774DCB%22%2C%0A%20%20%20%20%20%20%20%20menuIconURI%3A%20icon%2C%0A%20%20%20%20%20%20%20%20blocks%3A%20%5B%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22setClipbox%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.COMMAND%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20%22set%20clipping%20box%20x1%3A%5BX1%5D%20y1%3A%5BY1%5D%20x2%3A%5BX2%5D%20y2%3A%5BY2%5D%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20X1%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.NUMBER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%20%220%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20Y1%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.NUMBER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%20%220%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20X2%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.NUMBER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%20%22100%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20Y2%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.NUMBER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%20%22100%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20filter%3A%20%5BScratch.TargetType.SPRITE%5D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20extensions%3A%20%5B%22colours_looks%22%5D%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22clearClipbox%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.COMMAND%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20%22clear%20clipping%20box%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20filter%3A%20%5BScratch.TargetType.SPRITE%5D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20extensions%3A%20%5B%22colours_looks%22%5D%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22getClipbox%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.REPORTER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20%22clipping%20box%20%5BPROP%5D%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20PROP%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.STRING%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%20%22width%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20menu%3A%20%22props%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20filter%3A%20%5BScratch.TargetType.SPRITE%5D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20extensions%3A%20%5B%22colours_looks%22%5D%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%22---%22%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22setBlend%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.COMMAND%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20%22use%20%5BBLENDMODE%5D%20blending%20%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20BLENDMODE%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.STRING%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%20%22default%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20menu%3A%20%22blends%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20filter%3A%20%5BScratch.TargetType.SPRITE%5D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20extensions%3A%20%5B%22colours_looks%22%5D%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22getBlend%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.REPORTER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20%22blending%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20filter%3A%20%5BScratch.TargetType.SPRITE%5D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20disableMonitor%3A%20true%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20extensions%3A%20%5B%22colours_looks%22%5D%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%22---%22%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22setAdditiveBlend%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.COMMAND%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20%22turn%20additive%20blending%20%5BSTATE%5D%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20STATE%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.STRING%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%20%22on%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20menu%3A%20%22states%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20filter%3A%20%5BScratch.TargetType.SPRITE%5D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20hideFromPalette%3A%20true%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20extensions%3A%20%5B%22colours_looks%22%5D%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22getAdditiveBlend%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.BOOLEAN%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20%22is%20additive%20blending%20on%3F%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20filter%3A%20%5BScratch.TargetType.SPRITE%5D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20hideFromPalette%3A%20true%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20disableMonitor%3A%20true%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20extensions%3A%20%5B%22colours_looks%22%5D%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%5D%2C%0A%20%20%20%20%20%20%20%20menus%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20states%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20acceptReporters%3A%20true%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20items%3A%20%5B%22on%22%2C%20%22off%22%5D%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20blends%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20acceptReporters%3A%20true%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20items%3A%20%5B%22default%22%2C%20%22additive%22%2C%20%22subtract%22%2C%20%22multiply%22%2C%20%22invert%22%5D%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20props%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20acceptReporters%3A%20true%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20items%3A%20%5B%22width%22%2C%20%22height%22%2C%20%22min%20x%22%2C%20%22min%20y%22%2C%20%22max%20x%22%2C%20%22max%20y%22%5D%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%7D%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20setClipbox(%7B%20X1%2C%20Y1%2C%20X2%2C%20Y2%20%7D%2C%20%7B%20target%20%7D)%20%7B%0A%20%20%20%20%20%20if%20(target.isStage)%20return%3B%0A%20%20%20%20%20%20const%20newClipbox%20%3D%20%7B%0A%20%20%20%20%20%20%20%20x_min%3A%20Math.min(X1%2C%20X2)%2C%0A%20%20%20%20%20%20%20%20y_min%3A%20Math.min(Y1%2C%20Y2)%2C%0A%20%20%20%20%20%20%20%20x_max%3A%20Math.max(X1%2C%20X2)%2C%0A%20%20%20%20%20%20%20%20y_max%3A%20Math.max(Y1%2C%20Y2)%2C%0A%20%20%20%20%20%20%7D%3B%0A%20%20%20%20%20%20penDirty%20%3D%20true%3B%0A%20%20%20%20%20%20target.clipbox%20%3D%20newClipbox%3B%0A%20%20%20%20%20%20renderer.updateDrawableClipBox.call(%0A%20%20%20%20%20%20%20%20renderer%2C%0A%20%20%20%20%20%20%20%20target.drawableID%2C%0A%20%20%20%20%20%20%20%20newClipbox%0A%20%20%20%20%20%20)%3B%0A%20%20%20%20%20%20if%20(target.visible)%20%7B%0A%20%20%20%20%20%20%20%20renderer.dirty%20%3D%20true%3B%0A%20%20%20%20%20%20%20%20target.emitVisualChange()%3B%0A%20%20%20%20%20%20%20%20target.runtime.requestRedraw()%3B%0A%20%20%20%20%20%20%20%20target.runtime.requestTargetsUpdate(target)%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%0A%20%20%20%20clearClipbox(args%2C%20%7B%20target%20%7D)%20%7B%0A%20%20%20%20%20%20if%20(target.isStage)%20return%3B%0A%20%20%20%20%20%20target.clipbox%20%3D%20null%3B%0A%20%20%20%20%20%20penDirty%20%3D%20true%3B%0A%20%20%20%20%20%20renderer.updateDrawableClipBox.call(renderer%2C%20target.drawableID%2C%20null)%3B%0A%20%20%20%20%20%20if%20(target.visible)%20%7B%0A%20%20%20%20%20%20%20%20renderer.dirty%20%3D%20true%3B%0A%20%20%20%20%20%20%20%20target.emitVisualChange()%3B%0A%20%20%20%20%20%20%20%20target.runtime.requestRedraw()%3B%0A%20%20%20%20%20%20%20%20target.runtime.requestTargetsUpdate(target)%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%0A%20%20%20%20getClipbox(%7B%20PROP%20%7D%2C%20%7B%20target%20%7D)%20%7B%0A%20%20%20%20%20%20const%20clipbox%20%3D%20target.clipbox%3B%0A%20%20%20%20%20%20if%20(!clipbox)%20return%20%22%22%3B%0A%20%20%20%20%20%20switch%20(PROP)%20%7B%0A%20%20%20%20%20%20%20%20case%20%22width%22%3A%0A%20%20%20%20%20%20%20%20%20%20return%20clipbox.x_max%20-%20clipbox.x_min%3B%0A%20%20%20%20%20%20%20%20case%20%22height%22%3A%0A%20%20%20%20%20%20%20%20%20%20return%20clipbox.y_max%20-%20clipbox.y_min%3B%0A%20%20%20%20%20%20%20%20case%20%22min%20x%22%3A%0A%20%20%20%20%20%20%20%20%20%20return%20clipbox.x_min%3B%0A%20%20%20%20%20%20%20%20case%20%22min%20y%22%3A%0A%20%20%20%20%20%20%20%20%20%20return%20clipbox.y_min%3B%0A%20%20%20%20%20%20%20%20case%20%22max%20x%22%3A%0A%20%20%20%20%20%20%20%20%20%20return%20clipbox.x_max%3B%0A%20%20%20%20%20%20%20%20case%20%22max%20y%22%3A%0A%20%20%20%20%20%20%20%20%20%20return%20clipbox.y_max%3B%0A%20%20%20%20%20%20%20%20default%3A%0A%20%20%20%20%20%20%20%20%20%20return%20%22%22%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%0A%20%20%20%20setBlend(%7B%20BLENDMODE%20%7D%2C%20%7B%20target%20%7D)%20%7B%0A%20%20%20%20%20%20let%20newValue%20%3D%20null%3B%0A%20%20%20%20%20%20switch%20(BLENDMODE)%20%7B%0A%20%20%20%20%20%20%20%20case%20%22default%22%3A%0A%20%20%20%20%20%20%20%20case%20%22additive%22%3A%0A%20%20%20%20%20%20%20%20case%20%22subtract%22%3A%0A%20%20%20%20%20%20%20%20case%20%22multiply%22%3A%0A%20%20%20%20%20%20%20%20case%20%22invert%22%3A%0A%20%20%20%20%20%20%20%20%20%20newValue%20%3D%20BLENDMODE%3B%0A%20%20%20%20%20%20%20%20%20%20break%3B%0A%20%20%20%20%20%20%20%20default%3A%0A%20%20%20%20%20%20%20%20%20%20return%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20if%20(target.isStage)%20return%3B%0A%20%20%20%20%20%20penDirty%20%3D%20true%3B%0A%20%20%20%20%20%20target.blendMode%20%3D%20newValue%3B%0A%20%20%20%20%20%20renderer.updateDrawableBlendMode.call(%0A%20%20%20%20%20%20%20%20renderer%2C%0A%20%20%20%20%20%20%20%20target.drawableID%2C%0A%20%20%20%20%20%20%20%20newValue%0A%20%20%20%20%20%20)%3B%0A%20%20%20%20%20%20if%20(target.visible)%20%7B%0A%20%20%20%20%20%20%20%20renderer.dirty%20%3D%20true%3B%0A%20%20%20%20%20%20%20%20target.emitVisualChange()%3B%0A%20%20%20%20%20%20%20%20target.runtime.requestRedraw()%3B%0A%20%20%20%20%20%20%20%20target.runtime.requestTargetsUpdate(target)%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%0A%20%20%20%20getBlend(args%2C%20%7B%20target%20%7D)%20%7B%0A%20%20%20%20%20%20return%20target.blendMode%20%3F%3F%20%22default%22%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20setAdditiveBlend(%7B%20STATE%20%7D%2C%20util)%20%7B%0A%20%20%20%20%20%20if%20(STATE%20%3D%3D%3D%20%22on%22)%20this.setBlend(%7B%20BLENDMODE%3A%20%22additive%22%20%7D%2C%20util)%3B%0A%20%20%20%20%20%20if%20(STATE%20%3D%3D%3D%20%22off%22)%20this.setBlend(%7B%20BLENDMODE%3A%20%22default%22%20%7D%2C%20util)%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20getAdditiveBlend(args%2C%20%7B%20target%20%7D)%20%7B%0A%20%20%20%20%20%20return%20target.blendMode%20%3D%3D%3D%20%22additive%22%3B%0A%20%20%20%20%7D%0A%20%20%7D%0A%0A%20%20Scratch.extensions.register(new%20Extension())%3B%0A%7D)(Scratch)%3B%0A%20%7D)(Scratch)%3B","data:text/javascript;,(function(Scratch)%20%7B%20%2F%2F%20Name%3A%20Clones%20Plus%0A%2F%2F%20ID%3A%20lmsclonesplus%0A%2F%2F%20Description%3A%20Expansion%20of%20Scratch's%20clone%20features.%0A%2F%2F%20By%3A%20LilyMakesThings%20%3Chttps%3A%2F%2Fscratch.mit.edu%2Fusers%2FLilyMakesThings%2F%3E%0A%2F%2F%20License%3A%20MIT%20AND%20LGPL-3.0%0A%0A%2F*%20generated%20l10n%20code%20*%2FScratch.translate.setup(%7B%22nl%22%3A%7B%22_Clones%2B%22%3A%22Klonen%2B%22%2C%22_%5BINPUTA%5D%20of%20clone%20with%20%5BINPUTB%5D%20set%20to%20%5BINPUTC%5D%22%3A%22%5BINPUTA%5D%20van%20kloon%20met%20%5BINPUTB%5D%20%3D%20%5BINPUTC%5D%22%2C%22_%5BINPUT%5D%20of%20main%20sprite%22%3A%22%5BINPUT%5D%20van%20originele%20sprite%22%2C%22_clone%20count%22%3A%22aantal%20klonen%22%2C%22_clone%20count%20of%20%5BINPUT%5D%22%3A%22aantal%20klonen%20van%20%5BINPUT%5D%22%2C%22_clone%20with%20%5BINPUTA%5D%20set%20to%20%5BINPUTB%5D%20exists%3F%22%3A%22kloon%20met%20%5BINPUTA%5D%20%3D%20%5BINPUTB%5D%20bestaat%3F%22%2C%22_costume%20%23%22%3A%22uiterlijknummer%22%2C%22_costume%20name%22%3A%22uiterlijknaam%22%2C%22_create%20clone%20with%20%5BINPUTA%5D%20set%20to%20%5BINPUTB%5D%22%3A%22maak%20een%20kloon%20met%20%5BINPUTA%5D%20%3D%20%5BINPUTB%5D%22%2C%22_delete%20clones%20in%20%5BINPUT%5D%22%3A%22verwijder%20klonen%20van%20%5BINPUT%5D%22%2C%22_delete%20clones%20with%20%5BINPUTA%5D%20set%20to%20%5BINPUTB%5D%22%3A%22verwijder%20klonen%20met%20%5BINPUTA%5D%20%3D%20%5BINPUTB%5D%22%2C%22_direction%22%3A%22richting%22%2C%22_is%20clone%3F%22%3A%22is%20kloon%3F%22%2C%22_myself%22%3A%22mijzelf%22%2C%22_set%20variable%20%5BINPUTA%5D%20to%20%5BINPUTB%5D%20for%20clones%20with%20%5BINPUTC%5D%20set%20to%20%5BINPUTD%5D%22%3A%22maak%20variabele%20%5BINPUTA%5D%20%5BINPUTB%5D%20voor%20klonen%20met%20%5BINPUTC%5D%20%3D%20%5BINPUTD%5D%22%2C%22_set%20variable%20%5BINPUTA%5D%20to%20%5BINPUTB%5D%20for%20main%20sprite%22%3A%22maak%20variabele%20%5BINPUTA%5D%20%5BINPUTB%5D%20voor%20originele%20sprite%22%2C%22_size%22%3A%22grootte%22%2C%22_stop%20scripts%20in%20clones%20with%20%5BINPUTA%5D%20set%20to%20%5BINPUTB%5D%22%3A%22stop%20scripts%20in%20klonen%20met%20%5BINPUTA%5D%20%3D%20%5BINPUTB%5D%22%2C%22_stop%20scripts%20in%20main%20sprite%22%3A%22stop%20scripts%20in%20originele%20sprite%22%2C%22_touching%20clone%20with%20%5BINPUTA%5D%20set%20to%20%5BINPUTB%5D%3F%22%3A%22raak%20ik%20kloon%20met%20%5BINPUTA%5D%20%3D%20%5BINPUTB%5D%3F%22%2C%22_touching%20main%20sprite%3F%22%3A%22raak%20ik%20originele%20sprite%3F%22%2C%22_variable%20%5BINPUTA%5D%20of%20clone%20with%20%5BINPUTB%5D%20set%20to%20%5BINPUTC%5D%22%3A%22variabele%20%5BINPUTA%5D%20van%20kloon%20met%20%5BINPUTB%5D%20%3D%20%5BINPUTC%5D%22%2C%22_variable%20%5BINPUT%5D%20of%20main%20sprite%22%3A%22variabele%20%5BINPUT%5D%20van%20originele%20sprite%22%2C%22_when%20I%20start%20as%20a%20clone%20with%20%5BINPUTA%5D%20set%20to%20%5BINPUTB%5D%22%3A%22wanneer%20ik%20als%20kloon%20start%20met%20%5BINPUTA%5D%20%3D%20%5BINPUTB%5D%22%2C%22_x%20position%22%3A%22x-positie%22%2C%22_y%20position%22%3A%22y-positie%22%7D%2C%22ru%22%3A%7B%22_Clones%2B%22%3A%22%D0%9A%D0%BB%D0%BE%D0%BD%D1%8B%2B%22%2C%22_%5BINPUTA%5D%20of%20clone%20with%20%5BINPUTB%5D%20set%20to%20%5BINPUTC%5D%22%3A%22%5BINPUTA%5D%20%D0%BA%D0%BB%D0%BE%D0%BD%D0%B0%20%D1%81%20%D0%BF%D0%B5%D1%80%D0%B5%D0%BC%D0%B5%D0%BD%D0%BD%D0%BE%D0%B9%20%5BINPUTB%5D%20%D1%83%D1%81%D1%82%D0%B0%D0%BD%D0%BE%D0%B2%D0%BB%D0%B5%D0%BD%D0%BD%D0%BE%D0%B9%20%D0%B2%20%5BINPUTC%5D%22%2C%22_%5BINPUT%5D%20of%20main%20sprite%22%3A%22%5BINPUT%5D%20%D0%BE%D1%81%D0%BD%D0%BE%D0%B2%D0%BD%D0%BE%D0%B3%D0%BE%20%D1%81%D0%BF%D1%80%D0%B0%D0%B9%D1%82%D0%B0%22%2C%22_clone%20count%22%3A%22%D0%BA%D0%BE%D0%BB%D0%B8%D1%87%D0%B5%D1%81%D1%82%D0%B2%D0%BE%20%D0%BA%D0%BB%D0%BE%D0%BD%D0%BE%D0%B2%22%2C%22_clone%20count%20of%20%5BINPUT%5D%22%3A%22%D0%BA%D0%BE%D0%BB%D0%B8%D1%87%D0%B5%D1%81%D1%82%D0%B2%D0%BE%20%D0%BA%D0%BB%D0%BE%D0%BD%D0%BE%D0%B2%20%5BINPUT%5D%22%2C%22_clone%20with%20%5BINPUTA%5D%20set%20to%20%5BINPUTB%5D%20exists%3F%22%3A%22%D0%BA%D0%BB%D0%BE%D0%BD%20%D1%81%20%D0%BF%D0%B5%D1%80%D0%B5%D0%BC%D0%B5%D0%BD%D0%BD%D0%BE%D0%B9%20%5BINPUTA%5D%20%D1%83%D1%81%D1%82%D0%B0%D0%BD%D0%BE%D0%B2%D0%BB%D0%B5%D0%BD%D0%BD%D0%BE%D0%B9%20%D0%B2%20%5BINPUTB%5D%20%D1%81%D1%83%D1%89%D0%B5%D1%81%D1%82%D0%B2%D1%83%D0%B5%D1%82%3F%22%2C%22_costume%20%23%22%3A%22%D0%BA%D0%BE%D1%81%D1%82%D1%8E%D0%BC%20%23%22%2C%22_costume%20name%22%3A%22%D0%B8%D0%BC%D1%8F%20%D0%BA%D0%BE%D1%81%D1%82%D1%8E%D0%BC%D0%B0%22%2C%22_create%20clone%20with%20%5BINPUTA%5D%20set%20to%20%5BINPUTB%5D%22%3A%22%D1%81%D0%BE%D0%B7%D0%B4%D0%B0%D1%82%D1%8C%20%D0%BA%D0%BB%D0%BE%D0%BD%20%D1%81%20%5BINPUTA%5D%20%D1%83%D1%81%D1%82%D0%B0%D0%BD%D0%BE%D0%B2%D0%BB%D0%B5%D0%BD%D0%BD%D0%BE%D0%B9%20%D0%B2%20%5BINPUTB%5D%22%2C%22_delete%20clones%20in%20%5BINPUT%5D%22%3A%22%D1%83%D0%B4%D0%B0%D0%BB%D0%B8%D1%82%D1%8C%20%D0%BA%D0%BB%D0%BE%D0%BD%D1%8B%20%5BINPUT%5D%22%2C%22_delete%20clones%20with%20%5BINPUTA%5D%20set%20to%20%5BINPUTB%5D%22%3A%22%D1%83%D0%B4%D0%B0%D0%BB%D0%B8%D1%82%D1%8C%20%D0%BA%D0%BB%D0%BE%D0%BD%D1%8B%20%D1%81%20%D0%BF%D0%B5%D1%80%D0%B5%D0%BC%D0%B5%D0%BD%D0%BD%D0%BE%D0%B9%20%5BINPUTA%5D%20%D1%83%D1%81%D1%82%D0%B0%D0%BD%D0%BE%D0%B2%D0%BB%D0%B5%D0%BD%D0%BD%D0%BE%D0%B9%20%D0%B2%20%5BINPUTB%5D%22%2C%22_direction%22%3A%22%D0%BD%D0%B0%D0%BF%D1%80%D0%B0%D0%B2%D0%BB%D0%B5%D0%BD%D0%B8%D0%B5%22%2C%22_is%20clone%3F%22%3A%22%D0%BA%D0%BB%D0%BE%D0%BD%3F%22%2C%22_myself%22%3A%22%D1%81%D0%B0%D0%BC%D0%BE%D0%B3%D0%BE%20%D1%81%D0%B5%D0%B1%D1%8F%22%2C%22_set%20variable%20%5BINPUTA%5D%20to%20%5BINPUTB%5D%20for%20clones%20with%20%5BINPUTC%5D%20set%20to%20%5BINPUTD%5D%22%3A%22%D1%83%D1%81%D1%82%D0%B0%D0%BD%D0%BE%D0%B2%D0%B8%D1%82%D1%8C%20%D0%BF%D0%B5%D1%80%D0%B5%D0%BC%D0%B5%D0%BD%D0%BD%D1%83%D1%8E%20%5BINPUTA%5D%20%D0%B2%20%5BINPUTB%5D%20%D0%B4%D0%BB%D1%8F%20%D0%BA%D0%BB%D0%BE%D0%BD%D0%BE%D0%B2%20%D0%BF%D0%B5%D1%80%D0%B5%D0%BC%D0%B5%D0%BD%D0%BD%D0%BE%D0%B9%20%5BINPUTC%5D%20%D1%83%D1%81%D1%82%D0%B0%D0%BD%D0%BE%D0%B2%D0%BB%D0%B5%D0%BD%D0%BD%D0%BE%D0%B9%20%D0%B2%20%5BINPUTD%5D%22%2C%22_set%20variable%20%5BINPUTA%5D%20to%20%5BINPUTB%5D%20for%20main%20sprite%22%3A%22%D1%83%D1%81%D1%82%D0%B0%D0%BD%D0%BE%D0%B2%D0%B8%D1%82%D1%8C%20%D0%BF%D0%B5%D1%80%D0%B5%D0%BC%D0%B5%D0%BD%D0%BD%D1%83%D1%8E%20%5BINPUTA%5D%20%D1%81%20%5BINPUTB%5D%20%D0%B4%D0%BB%D1%8F%20%D0%BE%D1%81%D0%BD%D0%BE%D0%B2%D0%BD%D0%BE%D0%B3%D0%BE%20%D1%81%D0%BF%D1%80%D0%B0%D0%B9%D1%82%D0%B0%22%2C%22_size%22%3A%22%D1%80%D0%B0%D0%B7%D0%BC%D0%B5%D1%80%22%2C%22_stop%20scripts%20in%20%5BINPUT%5D%22%3A%22%D0%BE%D1%81%D1%82%D0%B0%D0%BD%D0%BE%D0%B2%D0%B8%D1%82%D1%8C%20%D1%81%D0%BA%D1%80%D0%B8%D0%BF%D1%82%D1%8B%20%5BINPUT%5D%22%2C%22_stop%20scripts%20in%20clones%20with%20%5BINPUTA%5D%20set%20to%20%5BINPUTB%5D%22%3A%22%D0%BE%D1%81%D1%82%D0%B0%D0%BD%D0%BE%D0%B2%D0%B8%D1%82%D1%8C%20%D1%81%D0%BA%D1%80%D0%B8%D0%BF%D1%82%D1%8B%20%D0%B2%20%D0%BA%D0%BB%D0%BE%D0%BD%D0%B0%D1%85%20%D1%81%20%D0%BF%D0%B5%D1%80%D0%B5%D0%BC%D0%B5%D0%BD%D0%BD%D0%BE%D0%B9%20%5BINPUTA%5D%20%D1%83%D1%81%D1%82%D0%B0%D0%BD%D0%BE%D0%B2%D0%BB%D0%B5%D0%BD%D0%BD%D0%BE%D0%B9%20%D0%B2%20%5BINPUTB%5D%22%2C%22_stop%20scripts%20in%20main%20sprite%22%3A%22%D0%BE%D1%81%D1%82%D0%B0%D0%BD%D0%BE%D0%B2%D0%B8%D1%82%D1%8C%20%D1%81%D0%BA%D1%80%D0%B8%D0%BF%D1%82%D1%8B%20%D0%B2%20%D0%BE%D1%81%D0%BD%D0%BE%D0%B2%D0%BD%D0%BE%D0%BC%20%D1%81%D0%BF%D1%80%D0%B0%D0%B9%D1%82%D0%B5%22%2C%22_touching%20clone%20with%20%5BINPUTA%5D%20set%20to%20%5BINPUTB%5D%3F%22%3A%22%D0%BA%D0%B0%D1%81%D0%B0%D0%B5%D1%82%D1%81%D1%8F%20%D0%BA%D0%BB%D0%BE%D0%BD%D0%B0%20%D1%81%20%5BINPUTA%5D%20%D1%83%D1%81%D1%82%D0%B0%D0%BD%D0%BE%D0%B2%D0%BB%D0%B5%D0%BD%D0%BD%D0%BE%D0%B9%20%D0%B2%20%5BINPUTB%5D%3F%22%2C%22_touching%20main%20sprite%3F%22%3A%22%D0%BA%D0%B0%D1%81%D0%B0%D0%B5%D1%82%D1%81%D1%8F%20%D0%BE%D1%81%D0%BD%D0%BE%D0%B2%D0%BD%D0%BE%D0%B3%D0%BE%20%D1%81%D0%BF%D1%80%D0%B0%D0%B9%D1%82%D0%B0%3F%22%2C%22_variable%20%5BINPUTA%5D%20of%20clone%20with%20%5BINPUTB%5D%20set%20to%20%5BINPUTC%5D%22%3A%22%D0%BF%D0%B5%D1%80%D0%B5%D0%BC%D0%B5%D0%BD%D0%BD%D0%B0%D1%8F%20%5BINPUTA%5D%20%D0%BA%D0%BB%D0%BE%D0%BD%D0%B0%20%D1%81%20%D0%BF%D0%B5%D1%80%D0%B5%D0%BC%D0%B5%D0%BD%D0%BD%D0%BE%D0%B9%20%5BINPUTB%5D%20%D1%83%D1%81%D1%82%D0%B0%D0%BD%D0%BE%D0%B2%D0%BB%D0%B5%D0%BD%D0%BD%D0%BE%D0%B9%20%D0%B2%20%5BINPUTC%5D%22%2C%22_variable%20%5BINPUT%5D%20of%20main%20sprite%22%3A%22%D0%BF%D0%B5%D1%80%D0%B5%D0%BC%D0%B5%D0%BD%D0%BD%D0%B0%D1%8F%20%5BINPUT%5D%20%D0%BE%D1%81%D0%BD%D0%BE%D0%B2%D0%BD%D0%BE%D0%B3%D0%BE%20%D1%81%D0%BF%D1%80%D0%B0%D0%B9%D1%82%D0%B0%22%2C%22_volume%22%3A%22%D0%BE%D0%B1%D1%8A%D1%91%D0%BC%22%2C%22_when%20I%20start%20as%20a%20clone%20with%20%5BINPUTA%5D%20set%20to%20%5BINPUTB%5D%22%3A%22%D0%BA%D0%BE%D0%B3%D0%B4%D0%B0%20%D1%8F%20%D0%BD%D0%B0%D1%87%D0%B8%D0%BD%D0%B0%D1%8E%20%D0%BA%D0%B0%D0%BA%20%D0%BA%D0%BB%D0%BE%D0%BD%20%D1%81%20%5BINPUTA%5D%20%D1%83%D1%81%D1%82%D0%B0%D0%BD%D0%BE%D0%B2%D0%BB%D0%B5%D0%BD%D0%BD%D0%BE%D0%B9%20%D0%B2%20%5BINPUTB%5D%22%2C%22_x%20position%22%3A%22%D0%BF%D0%BE%D0%B7%D0%B8%D1%86%D0%B8%D1%8F%20x%22%2C%22_y%20position%22%3A%22%D0%BF%D0%BE%D0%B7%D0%B8%D1%86%D0%B8%D1%8F%20y%22%7D%2C%22zh-cn%22%3A%7B%22_Clones%2B%22%3A%22%E5%85%8B%E9%9A%86%20%2B%22%2C%22_%5BINPUTA%5D%20of%20clone%20with%20%5BINPUTB%5D%20set%20to%20%5BINPUTC%5D%22%3A%22%E8%8E%B7%E5%8F%96%5BINPUTB%5D%E4%B8%BA%5BINPUTC%5D%E7%9A%84%E5%85%8B%E9%9A%86%E4%BD%93%E7%9A%84%5BINPUTA%5D%22%2C%22_%5BINPUT%5D%20of%20main%20sprite%22%3A%22%E8%A7%92%E8%89%B2%E6%9C%AC%E4%BD%93%E7%9A%84%5BINPUT%5D%22%2C%22_clone%20count%22%3A%22%E5%85%8B%E9%9A%86%E4%BD%93%E6%95%B0%E9%87%8F%22%2C%22_clone%20count%20of%20%5BINPUT%5D%22%3A%22%5BINPUT%5D%E7%9A%84%E5%85%8B%E9%9A%86%E4%BD%93%E6%95%B0%E9%87%8F%22%2C%22_clone%20with%20%5BINPUTA%5D%20set%20to%20%5BINPUTB%5D%20exists%3F%22%3A%22%E5%AD%98%E5%9C%A8%5BINPUTA%5D%E4%B8%BA%5BINPUTB%5D%E7%9A%84%E5%85%8B%E9%9A%86%E4%BD%93%EF%BC%9F%22%2C%22_costume%20%23%22%3A%22%E9%80%A0%E5%9E%8B%E7%BC%96%E5%8F%B7%22%2C%22_costume%20name%22%3A%22%E9%80%A0%E5%9E%8B%E5%90%8D%E7%A7%B0%22%2C%22_create%20clone%20with%20%5BINPUTA%5D%20set%20to%20%5BINPUTB%5D%22%3A%22%E5%88%9B%E5%BB%BA%E5%85%8B%E9%9A%86%E4%BD%93%E5%B9%B6%E5%B0%86%E5%AE%83%E7%9A%84%20%5BINPUTA%5D%20%E8%AE%BE%E4%B8%BA%20%5BINPUTB%5D%22%2C%22_delete%20clones%20in%20%5BINPUT%5D%22%3A%22%E5%88%A0%E9%99%A4%5BINPUT%5D%E7%9A%84%E6%89%80%E6%9C%89%E5%85%8B%E9%9A%86%E4%BD%93%22%2C%22_delete%20clones%20with%20%5BINPUTA%5D%20set%20to%20%5BINPUTB%5D%22%3A%22%E5%88%A0%E9%99%A4%5BINPUTA%5D%E4%B8%BA%5BINPUTB%5D%E7%9A%84%E5%85%8B%E9%9A%86%E4%BD%93%22%2C%22_direction%22%3A%22%E6%96%B9%E5%90%91%22%2C%22_is%20clone%3F%22%3A%22%E6%98%AF%E5%85%8B%E9%9A%86%E4%BD%93%EF%BC%9F%22%2C%22_myself%22%3A%22%E8%87%AA%E5%B7%B1%22%2C%22_set%20variable%20%5BINPUTA%5D%20to%20%5BINPUTB%5D%20for%20clones%20with%20%5BINPUTC%5D%20set%20to%20%5BINPUTD%5D%22%3A%22%E5%B0%86%E6%BB%A1%E8%B6%B3%5BINPUTC%5D%E4%B8%BA%5BINPUTD%5D%E7%9A%84%E5%85%8B%E9%9A%86%E4%BD%93%E7%9A%84%E5%8F%98%E9%87%8F%5BINPUTA%5D%E8%AE%BE%E4%B8%BA%5BINPUTB%5D%22%2C%22_set%20variable%20%5BINPUTA%5D%20to%20%5BINPUTB%5D%20for%20main%20sprite%22%3A%22%E8%AE%BE%E7%BD%AE%E8%A7%92%E8%89%B2%E6%9C%AC%E4%BD%93%E7%9A%84%E5%8F%98%E9%87%8F%5BINPUTA%5D%E4%B8%BA%5BINPUTB%5D%22%2C%22_size%22%3A%22%E5%A4%A7%E5%B0%8F%22%2C%22_stop%20scripts%20in%20%5BINPUT%5D%22%3A%22%E5%81%9C%E6%AD%A2%5BINPUT%5D%E4%B8%AD%E7%9A%84%E8%84%9A%E6%9C%AC%22%2C%22_stop%20scripts%20in%20clones%20with%20%5BINPUTA%5D%20set%20to%20%5BINPUTB%5D%22%3A%22%E5%81%9C%E6%AD%A2%5BINPUTA%5D%E4%B8%BA%5BINPUTB%5D%E7%9A%84%E5%85%8B%E9%9A%86%E4%BD%93%E7%9A%84%E8%84%9A%E6%9C%AC%22%2C%22_stop%20scripts%20in%20main%20sprite%22%3A%22%E5%81%9C%E6%AD%A2%E8%A7%92%E8%89%B2%E6%9C%AC%E4%BD%93%E4%B8%AD%E7%9A%84%E8%84%9A%E6%9C%AC%22%2C%22_touching%20clone%20with%20%5BINPUTA%5D%20set%20to%20%5BINPUTB%5D%3F%22%3A%22%E7%A2%B0%E5%88%B0%20%5BINPUTA%5D%E4%B8%BA%20%5BINPUTB%5D%E7%9A%84%E5%85%8B%E9%9A%86%E4%BD%93%EF%BC%9F%22%2C%22_touching%20main%20sprite%3F%22%3A%22%E7%A2%B0%E5%88%B0%E8%A7%92%E8%89%B2%E6%9C%AC%E4%BD%93%EF%BC%9F%22%2C%22_variable%20%5BINPUTA%5D%20of%20clone%20with%20%5BINPUTB%5D%20set%20to%20%5BINPUTC%5D%22%3A%22%E8%8E%B7%E5%8F%96%5BINPUTB%5D%E4%B8%BA%5BINPUTC%5D%E7%9A%84%E5%85%8B%E9%9A%86%E4%BD%93%E7%9A%84%E5%8F%98%E9%87%8F%5BINPUTA%5D%22%2C%22_variable%20%5BINPUT%5D%20of%20main%20sprite%22%3A%22%E8%A7%92%E8%89%B2%E6%9C%AC%E4%BD%93%E7%9A%84%E5%8F%98%E9%87%8F%5BINPUT%5D%22%2C%22_volume%22%3A%22%E9%9F%B3%E9%87%8F%22%2C%22_when%20I%20start%20as%20a%20clone%20with%20%5BINPUTA%5D%20set%20to%20%5BINPUTB%5D%22%3A%22%E5%BD%93%E6%88%91%E4%BD%9C%E4%B8%BA%E5%85%8B%E9%9A%86%E4%BD%93%E5%90%AF%E5%8A%A8%EF%BC%8C%E4%B8%94%E6%BB%A1%E8%B6%B3%5BINPUTA%5D%E4%B8%BA%5BINPUTB%5D%22%2C%22_x%20position%22%3A%22x%E5%9D%90%E6%A0%87%22%2C%22_y%20position%22%3A%22y%E5%9D%90%E6%A0%87%22%7D%7D)%3B%2F*%20end%20generated%20l10n%20code%20*%2F(function%20(Scratch)%20%7B%0A%20%20%22use%20strict%22%3B%0A%0A%20%20const%20menuIconURI%20%3D%0A%20%20%20%20%22data%3Aimage%2Fpng%3Bbase64%2CiVBORw0KGgoAAAANSUhEUgAAAZ4AAAGeCAYAAACkfGcPAAAAAXNSR0IArs4c6QAAIABJREFUeF7tndl1HEeWQEFZ0ZovmTDGTHsiM9oTjTFjRbe84JwEWWChUJUZEW%2BJt9z%2B6B%2FGet9yEVWg%2BO2N%2F0GgGYHvf%2F3%2BPdKVv%2F3zP98inYezQMCaAAlvTZj1XQlEk4rW5ZGTFknWiUAA8USIAmeYIlBVLlMQ7gYjpVVyzNtFAPHsIs%2B%2BlwQQzCWi0wEIScaP2XYEEI8dW1aeJIBoJoFNDkdEk8AYbkYA8ZihZeEzAkgmRn4goxhx6HYKxNMt4pvui2g2gZ%2FcFhFNAmP4EgHEs4SNSSMEkM0IpbhjkFDc2GQ%2FGeLJHsFA50c0gYJhcBREZAC16ZKIp2ngta6NbLRI5loHCeWKV7TTIp5oEUlwHmSTIEiOR0RCjrCLbIV4igTS%2BhrIxppwjfWRUI04Wt8C8VgTTrw%2BskkcvABHR0IBghD0CIgnaGB2Hgvh7KRfb28EVC%2Bm0hshHinBIvORTZFABr8GEgoeIKfjIR4n0BG3QTYRo9LnTEioT6wfb4p4GsYe4TQMeuArI6DAwTE6GuIxAhtxWYQTMSqc6UYAAfXJBcTTINYIp0GQC10RARUK5ourIJ6iMUY2RQPb7FpIqGbAEU%2BxuCKcYgHlOu8EEFCtREA8ReKJcIoEkmucEkBANRIE8SSPI8JJHkCOv0QAAS1hCzMJ8YQJxdxBEM4cL0bXJICAcsYV8SSMG9JJGDSObEYA%2BZihNVsY8Zih1V8Y4egzZcU6BBBQnlgingSxQjgJgsQRwxBAQGFC8fIgiCdwjBBO4OBwtPAEEFDcECGeoLFBOkEDw7FSEUA%2BMcOFeILFBeEECwjHKUEAAcUKI%2BIJEg%2BEEyQQHKM0AQQUI7yIJ0AckE6AIHCENgSQz%2F5QI56NMUA4G%2BGzdXsCCGhfCiCeTeyRzibwbAuBOwLIZ086IB5n7gjHGTjbQWCAAAIagKQ4BPEowjxbCuE4gWYbCAgIICABvImpiGcC1upQpLNKjnkQ8CeAfOyZIx5jxkjHGDDLQ8CAAPIxgHr%2F3Zrt8n1XRzh9Y8%2FN6xBAQDax5MVjwBXpGEBlSQhsIoB89MEjHkWmCEcRJktBIBgBBKQXEMSjxBLpKIFkGQgEJoB8dIKDeBQ4Ih0FiCwBgSQEkI88UIhHyBDpCAEyHQIJCSAfWdAQzyI%2FhLMIjmkQKEQAAa0FE%2FEscEM6C9CYAoGiBJDPfGARzyQzpDMJjOEQaEAA%2BcwFGfFM8EI6E7AYCoFmBJDPeMARzwArhDMAiSEQgMA7AQR0nQiI54IR0rlOIkZAAAKfCSCf84xAPCd8kA7tBAIQWCWAfF6TQzwv2CCd1XJjHgQgcCOAfJ7nAuJ5wgXp0DggAAEtAsjnK0nE88AE6WiVG%2BtAAAK8fHjxXFYB0rlExAAIQGCRAC%2BfX%2BB48fxkgXQWq4lpEIDAMAHk8wNVe%2FEgnOGaYSAEIKBEoLuAWosH6ShVEctAAALTBDrLp614kM50nTABAhBQJtBVPi3Fg3SUq4flIACBZQId5dNOPEhnuT6YCAEIGBHoJp9W4kE6RlXDshCAgJhAJ%2Fm0EQ%2FSEdcFC0AAAsYEusinhXiQjnG1sDwEIKBGoIN8yosH6ajVAwtBAAJOBKrLB%2FE4JRLbQAACEBglgHhGSQUcx2snYFA4EgQgMESgsnzKvniQzlBuMwgCEAhMoKp8SooH6QSuJI4GAQhMEagon3LiQTpTOc1gCEAgAYFq8iklHqSToII4IgQgsESgknzKiAfpLOUykyAAgUQEqsinhHiQTqLK4agQgICIQAX5pBcP0hHlMJMhAIGEBLLLB%2FEkTDqODAEI9CaAeDbGn9fORvhsDQEIbCWQWT5pXzxIZ2vOszkEIBCAQFb5pBQP0gmQ8RwBAhAIQSCjfNKJB%2BmEyHUOAQEIBCKQTT6IJ1DycBQIQAACKwQQzwq1wTm8dgZBMQwCEGhHIJN80rx4kE67OuLCEIDAJIEs8kkhHqQzmX0MhwAE2hLIIJ%2Fw4kE6beuHi0MAAosEossH8SwGlmkQgAAEohJAPILI8NoRwGMqBCDQmkBk%2BYR98SCd1jXD5SEAAQUCUeWDeBSCyxIQgAAEIhJAPBNR4bUzAYuhEIAABE4IRJRPuBcP0qGGIAABCOgSiCafUOJBOrrJxmoQgAAEbgQiyQfxkJcQgAAEGhBAPE%2BCzGunQeZzRQhAYCuBKPIJ8%2BJBPFvzkc0hAIEGBBDPXZCRToOM54oQgEAIAhHks%2F3Fg3RC5CKHgAAEGhHYLR%2FE0yjZuCoEIACBg0Br8fDaoQggAAEI7CGwUz7bXjxIZ0%2BysSsEIACBG4Fd8kE85CAEIACBpgRaiYfXTtMs59oQgEA4Ajvks%2BXFg3jC5R4HggAEmhJoIR6k0zS7uTYEIBCWgLd8XF88SCds3nEwCECgOQFP%2BSCeHcn2P%2F%2F%2Btev%2F%2FteOE9Te857v2U1hXzsPuN0UgZLiafPaGW16MylBg%2FxKy4Lz%2FS4wn8lQxhYh4CUftxdPafFYN8HHpO7aFL0537h35V2kmXKNcQKlxFNSOruaYDcJReHMa2i8ezEyNQEP%2Bbi8eEqIJ2IDjCKhRzbSF0IG1gd76T1TtycOX5VACfG4S%2Beqaa00i6s1o2Xgyh1n7zDKZOYso2vOntV6%2FMwdrc%2FC%2BjIC%2FOLPOz9r%2BZi%2BeFylM9O0RhvFzJqydLeZPXrP2d1nuVydY3a92fN6jb%2B6p9c52GeewFUONoytpXxqiOcqaZ6l4Vkiraw3n%2Bo%2BM7QLZpXNs3OsruVDbn0XbebrJ2HmCIHRPGwW15TicXvtjCbNiHwka40k%2BM4xGkUj5XN%2FBulaO1mO7K3Be2QfxsgIzOZhs7haycfsxZNCPEfKHok0m3yyVN8zW6NgOnDSjo4Gd%2B0zsd4PAiv53CyeqcSTRjqdClBaMCtF2onv2V2l7OFoQ2A1p5vF00I%2BJi8exGNTJ6JVpcWyWqSiQxeaLOVfCEWIq0jyuVksU4jHTTqrT%2BUQWe98CI1CkRSq83XDbqcRh7CXS3YwST43jKO2fNRfPIgnYAFqFIqkUAMi2XokjXhsvUCBzSX53DB%2BocXjKh1ePHPVLy0WSaHOnbTHaGk8elCyu6Ukn5vGTlM%2Bqi8exDNWJ%2F%2F3r398DPzvP%2F8emyQdJS0WSaFKzz45%2F57v2VQ39q8OIY3JJBeG3xGQ5HPTuCGeW%2F5Ikse4Ckebn1tj1CiWgLw1ON%2FHwF1GGnExzuWSy0tyuWnMQorH%2FbUTUD7aTfCx4EVNUaNYJMWq2L2sOd%2BOKuI9c1%2BN2Mzsx9i1v8Nz49Y4XlryUfuorat4vJqg%2BKdyrWLZJJ8dnN0EpBUbhDJOQJLHjeMVSjzbpLPx1bOzES41RM1ikRTteGv4GBmB9XEY0xeQZnwWGLebIsnh5rHSkI%2FKi2e7eI6qkSTSRNVFaYJLLyDNgnHgHZG1qYA04zOR0y2HSvK3eZxCiCeEdBxePlGb4JSAtAtGUrwn3S4DazMBaceopVUGLi3JXWIk%2Fvd6xC%2BeUOIxevlkaYSXzVC7YCTF%2B6I3ZGJ9yXug%2Fz0doh2n1XNUnifJXeKzVzzhpGMgnmyN8LIZahaNpHifNLWMrC95rzRvzRit7N9hjiR3ic97hkg%2BchO9eMKJR5JMhRrh7SpPvwzXKhpF1lmF85gyqr98oBWnDhJZuaMkf4kN4vnIOUkiPSRulUb48qdxjcJR4l2JterrRyNGKw25yxxJ%2FhKbfeKp%2Btqp1gi%2FNEONopEU7V1jq8ga%2BSQxlySHNWooCaarY65%2B3Lb8UVso8UiSqPBr5%2F5qHx8DSYsG1le1qPv3faTxujxt0wGSPCYmH0mDeBTqp%2BpP4B%2Ff%2Bfzxm5ySpGAbvHZOv19boU%2BTW6F2PUeSx8Rkj3gqvnaqS%2Bf9IyCpeCTF2kg6yOe6728fIcllxPMpfCuvnqWP2qqJp4N0ooinC2tV%2BdDo9D2FeNSYuogH6ajFy3WhCK%2BdbtJBPq4pPrcZ4pnjdTF6Vj7TLx7Eoxovt8UQjxvqLxup%2FP0eXj26AUQ8qjz7iEeSOD%2BRd%2FoJfLd4OrF%2BVtFi%2BSAe1UYp%2Bo8KE4svsTAVD68d3dz3Wm23dI57Ih6Ff%2BKchqdXMpIfXInD0zjMyGfqo7ZK4unUCHeLpxPrs87Iq0fPG%2BKVEI8Y4eMC9cUjSZqGP30jHvUaW1oQ8Sxhs5kk6SG8ePxePLx2bPLfY1WReCQF2lDyV%2FFEPleEnP5ckteI52WQRl89wx%2B1VRFPt499RNI50ktSoIhH%2FzfcqjY9YZ456WrPNolijnhepAjimawdQUPoxnqUrOjVk6gJjfKQ%2FnAzvE%2F2gQliryqeKq%2Bdjr9dJXrxCKTTkfVoXxOJ59gkQQMaYiHMr6E9qg1KEPsR%2BQx91IZ48mYv4okXO8TzMyaIZy05g8sH8TyEteNHP7vE05H1TBcRySd44xnigHSGMD0dFDz%2BKuIJ9doRftndsRkinvX6tpyJeP5tibf%2B2snlc%2FlRG%2BLJncOIJ2b8EA%2FiEWUm4hHhm5sseJ53fO0ccBHPXIp5jUY8iEeUa4hHhG9uMuKZ44V4pnl5TUA8iEeUa5XFw8dsotQIMZkXT4gwfDkE4kE8y5kZXDq3e539ksHpdzyIZzk1wkzcIZ6uH2vOBl0kn2OzJA3oKRfBpxeznMuNTxJ3xNP0P92yQzpHkSOesVYnFs%2FZNhmaE%2FIZS5THURli%2B%2Fb2tiSecK%2BdA74gUTs2Q8SzVteWs0xl8%2BrgkRuVoKYt4xR27cixfALtlXxeftSGeMKm3vDBEM8wKrOBW0ST7SWEfK7zL5lwrr7nQTzXIU87AvHsC1044TxDEbGZIaHPkYoYo4my4sXzr39M4KoxFPH4xzGFcJJ%2BZ6AaTYngkstAlePFYlPiCfkxG9%2FxTOcL4plGtjwhpXA6CwjxLOf67MRn8nn6URvimUUbb%2FxHI5T8dCYozi6%2FzFFCOB0FJMjt1L%2FGvqFVIZ4N0L23%2FNIIEY9ZCEpK556WJHfMqCstjHiUQF4vg3iuGaUd8bIJSpqHoDgrv3jKC6eDfAS5zYtnrk0injleaUafNkLEoxrHVtKpLCDEo1oXZ4sNiSfs9zu3mwkSpuJP4ZeNEPGoFdgla7Wdgi4kyaVoVxL0EV4888F8lM%2BXXy5APPNQd8wYboKSZiEozkqSH2a9IxG895Tkk%2FdZz%2FYT5DbimQ8k4plnFm7GVCOUNApJcRb5b7ZNsQ6XKUYHkuSU0ZGml5XkdoX7TwOTTUA8Mn7bZ083QkmRSIqzgHimWW%2FPDscDSPLK8Zgvt5Lkdva7b%2BB%2FKp7wH7MdwCQJk7wZLjVCaZEIeGf%2BuG2JtWJBX7Hbfb73q0pzS5HX9FKCvE5972lQehPu5fPpOx7EowdZe6XlRiNtDpICTSr6ZdaLQb%2BSzMyy3mdP24QleS2tqZmAFhqbWzzCV49mkXvlhLiZSApFUqAJxSNmPZgUHnnodZeU8pHktaSeBvOj4rDW4jkC6lH0Womj0jykhSIo0nasLwK%2Fi4dKHp3dTZpjWgUzuo4gp1OKdpSL4TjEk%2BS%2FVK3WLKRNQVKkSUSvxvpF4e4SzuNxTO8pzTPDpvdlaUlOZ7qnJ9OLvfKLR%2FhxW5ZXj1qTkBaKpEibiyeKcO57glpePTYaaZ55NklJTme6pyfTFfGk%2BMWC%2B4tJEidBM1RvDpJiEbKOLnp11gny64iJxb3TfAwlyWlJLQUSwY6j3F49H7%2FV1k08kZthyIYgKdTAjdiCdcRXzlmTUWeQoTFL8jnD%2FXZYZWDP%2FOIp%2BnGbehP42fRF%2FyicAuuIotdmnU04ph%2B%2FRW%2FOiGdAE%2FpDEM9PptGahWYzfLybSD6SQr3L30i8LVnrl6z9ipo83k8bWT6SfI58L%2Fs0Ee2AeAI2Q83Cf9bgReIp9uqxZi2qzo2TNbkgno2BDLp1DfHQDJ%2Bm16tXhVg8hXhrNdhILzitXqPFJvSrhxePVrpMrVNHPEWaoVaxXzVCsXwkBRvklenFeqoigw3WYhT21SPJYz5qW87WT%2BJJ9xttj9eWJFGAZqhV5FfSOa4qFo%2BS6I9lRs67nOEnEzV47zq7BY9Xa2pwCvvqkfQMxCNKw0M%2B779OnV48yZuhVoGPNMNI4tkhH0%2FWouoMMlmFV8RGjXi2ZRjieYF%2BpIFrRU2lsCdfD13ls4O1Vp7sWkeLWbiP3BDPrpR6qyUexVeP50%2FiGoU9K8po4vHivYP1tupW3FiDG%2BJRDEjypRDPRQBnG%2FpKPkiLevWMHeWzi%2FVKXkSbI2UX8rue1VdPxI8OoyXMyXnqiUf51XNjt9rcr3JBo5hXz6YiHgPeq%2FeJzPrqbBn%2BXCNXS7x6kI44XWuKx6AZWn0UJC1maZNWkc%2FqT43Or83drMXVGmABKcNw4lnpFYhHnIl1xbOSUAM4pY3%2BcQtpIUvPoyIeI9bast%2FNeiC9wg%2BRMgz5cdtM%2FiIdlRxFPIsYpQ3%2F2FZaxBpneD%2FHH78tUniYZvTy0RBQFNY6oPeuImUZ8tVzJR%2BEo5p07%2BIp8Xd4XmExbIbShigt4HDiuSpehdRdvXMU1goIti8hZRlWPNvJ9jpAbfE4NMNVAUkKeLUBv0pttVePE%2B9Z5pFYV2gvEp6Ip0IGyO9QXzyOzfAWjisxiAp38i%2BLjqZIRvmM8I7IejQmUcdJmSKfqJH1O1cP8WyQz30Iv%2Fy7OH%2F%2BLYrwldhWFs8snpX7js6xYD26d9RxiCdqZPKcq494NstHKyUsG6GqfArwtmStlQ%2B71hHJhy%2Frd4UtzL69xEMzvEw85PMLEeJ5nS4i8RzLIp%2FLWqw8oJ94ksvHuhmqiycxb2vWmRsL4skcvf1n7ymepM3QqxEinx%2BF6cV7fxtYO4FIPrx41qAXmdVXPLcAGv9dH8088WyE3eXjyVozRzzXQjyetGvthXgSvX68m6GJfJLw9madsa0gnoxRi3FmxJPo5bOjGXaVzw7WMVrC%2BCkQzzgrRn4mgHgeMyLwR2%2B7mqGZfAK%2FfnaxztSgEE%2BmaMU6K%2BJ5FY%2BAAtrVDE3FE%2FTFuYt1rPZwfhqReK4uyi8fXBFK%2FeeI5yp8gQS0sxm6yCfQC2gn66uU3P3npsJ5djkktDvk6vsjnlGkmwUUoRG6ySeAgCLwHk1Nj3Husjm7FCLyCLnpHohnFu9GAUVohq7y2fgxXATWs6mpPT6UbF5dDglph91lPcQjwewsoUjNcIuAHF9CkVhLUnRlbgrh3F8M%2BayEeescxKOJ31hE0ZrhNvk4vISisdZM01drpRPO40UQkEeaqOyBeFQwXiyiJKSIzXC7fM7QC7hHZG2VqumFg4CsUsNsXcRjhvbFwgWbYVj5FGStma7lhIOANNPDdC3EY4r3yeKFm2E4ARVmLU3b8tLhOyBpipjORzymeHuJ57htKPkgnqfZ3Uo6NwJ8%2F%2BPd6U73Qzze4WjQDMPIR8D6SItq3%2FO0FA4vH%2B8ON7Qf4hnCpDhI0AyzNcLtAhKwriae9tLh5aPYxORLIR45w7kVmjXDzPLJJvpXiYh0HsjwsdtczzIYjXgMoF4uKZBP1ma4TUANWd%2FnH9I5qUYEdNmqrAYgHiuyZ%2Bs2bobuAhKwzv5xWxTpPP6wFOVc7yWKfHZ0wDfEswN702b4qeF4FryAd9oX5p9%2Fu2a2FqctUvLMRdeoxN0M8eyIjaARZv0p%2FGVD8Sh6AW%2BthuqZZl7N25qN1z14%2BXhm54%2B9EI8%2F8x87NmqGww3ESkIC1tlEP8x6Me%2BtZfPqWNb34iO3xYRYnIZ4FsGJpzVphssNQ1NCsBan6y7hPB58OZ9GCGjm3Mh%2Bjccgnl3Bb9AM1ZqERkMozluN9ZN6iCKd%2B6OZ3Vcj13b1lET7Ip5dwRI2wgwfAak2B2lDEPKO2HytG3H0Ox%2F3V82xG1Bpru3qKYn2RTw7g1W4Gao3BGkzELKOLHpt1hmEYy1dvvOxbYyIx5bv%2BepFm6FVIxT%2FHSAh74gN2Yr1zrJY2VubA%2BJZicL4HMQzzspmZLFmqN0A7pv9bvFEe%2FVYsrZJdttVtXkgH7t4fTuW%2Fv7X79%2FttmDlUwJC8VRuhl%2F%2Bxvsfv8mTqRBvzUYb8TW3Gmw1LtKPd1cvUHzet3%2F%2B5xviiRDkIs1QreBP%2FkmCCK%2BeCLL3YB2hNFbPoMYH%2BayG4OU8xKOOdHFBBfFUaoZnP32LxXOAUuC9%2B4Wg1Vh332OxYi6nafF53wj5XPKeGYB4ZmhZj1Vohjvlo1XoV40wing6sLZOeev1tXIS8ehGCvHo8pSthniG%2F8XP7vLRaKhXgpclc5zZGqx49ejGE%2FHo8pSvllQ%2BWsU92gwjicf75aPBepSzPKFjrKDBjFePXiwRjx5LnZWUxHM7jFeD0Sjs2bN2lc8O1jrJvXcVDW7IRyeGiEeHo%2B4qyeSjUdCz0jmARxOPx8tnF2vdBN%2BzmgY7xKMTO8Sjw1F%2FlUTykRb0inRuwCPKx1JAUtaWZ9MvAv0Vxfz47TaVoHyI51iNv0SqwlRnEWXxWDUccSGf%2FH2dEZAq4jk2asJbIvmReEQfo5GvvHpkUT6kc6zw%2Fn%2BIRwbTZLZBM9QWkLSQNRphZPlo8o7A2iTPnReVckQ8soAhHhk%2Fn9lG8tFqiNIiDiUeo5fPLVGkd43A2ifpbXeRckQ8svggHhk%2Fv9lB5SMtYGkjvg9A9FePhnwkvDVZ%2ByW%2B3U4Slu%2Bn4rue5eAgnmV0zhMNxXN%2Fk9nmJC3e2f3OqKuJx%2FjVs8o7Emvn7DfZTsoT8ayHBfGss%2FOf6SSfmZ%2FMJcWrKZ3bmTPKZ5S3hLXWx6r%2BSW%2B7o4gpL57l4CCeZXSbJjrL5%2Bqnc0nhWojnOG9m%2BTzLqhuniKw3VYHathKmfNy2HoYv4jmW4leq14G6zNwoH837WYmnonyk3C1ZS8%2B2cz7i8ad%2Fk86x88evUyMe%2F0As7VhAPpbNUPXVcwQoOW9L1kv5G2iSSD583DYdScQzjSzghKQN0aMRIp8f%2BerBOmBlDB8J8QyjUhmIeFQwBlgkoXy8mqG6fBK%2BfrxYB6iEpSMgniVsy5MQzzK6gBOTycezGXaXjyfrgJVxeSTEc4lIdQDiUcUZYLFE8vFshibiSfTy8WQdoAqmj4B4ppGJJrwUz7Eqv9kmYrt3cgIBeTdDM%2FkkEJA3673Jv7Y78lnjNjvrXjrH3E%2B%2F1YZ4ZnEGHB9YPrsaYVf57OIdsCpeHgnx%2BEQL8fhw3r9LQAHtbISm8gn6%2BtnJe38BjJ0A8Yxxko5CPFKC2eYHEtDuRmgun2AC2s07Q6kgHp8oXYqHj9t8AuG%2BSwABRWiELvIJIKAIrN1zfGFDxLMAbXLKo3SefseDeCapZhy%2BSUJRmqGbfG65sYF3FNbRywPx2EcI8dgzzrWDc0OM1Azd5eMsoUisIxcF4rGPDuKxZ5x3BwcJRWuG2%2BTjJKFovCMWB%2BKxjwrisWdcbwdFIUVshNvlc5YxQvYReUcrEMRjH5Fh8fA9j30w0u4gaIZRG2FV%2BUTlHSn3EY9tNJ5J5%2BUvFyAe22CkX72gfI6YhBRQUdYRagDp2EcB8dgz7rND4WYYTj6FWe8uGMRjHwHEY8%2B4zw4NmmEYATVgvatwEI89%2BWnx8HGbfVDS7tCkGYaQTxPWr2rhSg6S77Gu1j6tT%2F4F0sv29Uo6p9%2FxIJ5Lrn0HNGuGWwUkYH0kqKQx70zwGSms3nFmjy8sEM9leiCeS0QMmCLQsBluk09H1n%2F%2BPZWOt8EzAhJJ59gQ8VzGaFk8vHou2fYc0LkZ7mg4At4zzThKMkukMHpfyR7vnHbkQZQADZzjTDqXH7UhngHCXYc0aoZPm5Rn4xGwzvZxm1gIgx8vivbxjH3S%2FoJ4kgYu%2FLEFzXD0p9IIDIYalHUjErDOJJ4h1oNJcZZj4n2s4z14x8jDEE%2Fk6GQ%2BG83wefSsmpKAdxbRi4XwEJFX9xbvYxXjzP3g4exi8fBxW6Fs0LyKoBG2%2BSlcs0E14C0WwpP8fiYf0T6aMdWsx0BrXUln6DsexBMootGOQjMcj4i0YcF6nPXJy0cknWNdaRyXb5FnIuLJE6ucJ6UZzsVN2rSK8xZL4SQax8tHZX1pDOcyJuVoNfHw6kkZf%2FtDCxthho%2FcVJrVLRLSpiXkHf27HlXWVtkvjaHVuYKsOyKd4Y%2FaEE%2BQqEY8Bs1wPCrSpiVkHV304cUjjd94pqQdiXjShi7ZwWmGcwGTNi94z%2FHWHC2NneZZgq6lLh5ePUEjvftYCo2w1U%2Fi0ualwDvyR25hXz3SuO2uU4f9R6Uz9VEb4nGIXNYtaIbjkdNoYPAe5601UiNuWmcJug7iCRqY0seiGY6HV9rEFFi3emWOR%2Bb5SGm8pPsnmW8mHl49STJgxzFphuPUNRoZvMd5S0dqxEt6huDzZ6Qz%2FVEb4gke%2Fd3HoxmORUCjkSmx5uVzETKNWI1lRepRiCd1%2BJIfnmY4HkCNhgbvcd6rIzXitLp3onnm4uHVkygbdhyVZjhGXaOhKbLm5fMkbBoxGsuG1KNmpbP0URviSZ0j9oenGY4z1mhs8B7nPTtSIz6zeyYc7yYe5JMwOzyPTDMco63R2JRZ8%2FL5GTqN2IxlQepRK9JZfvEgntS54nP4Rg1R9JceNRpcI9ZH8op4z2S%2FRmxm9ks4FvEkDFrpIxs0w8g%2FjS83Q63mBm%2BbctKKj83ptq%2FqLh5ePdtjHv8ARs0wooCWxXNcRqu5NeAt4rxaMVrxWd0%2F6LxV6Yg%2BakM8QbMh2rEMm2EEAak0Qs3GVpi3CuvV%2BtCM0eoZgs1DPMECwnEeCBg3wx0CUm%2BCmo2tEG91zpLi1IyR5BxB5m4TD6%2BeIBmQ4RgOzfCGweq%2FvmzeBLUamyNrC%2Bmbc5bUi1aMJGcIMFciHfFHbYgnQAZkOoJzQ9Roiq5NULOpbWD9mIojPwC48tWqFc04aZ3JeZ3t4kE%2BzhHPvl2AhhgaoWZTg7VdqDXjZHdKk5Wl0lF58SAek9jWXpSGeB5f7aYGb5t60o6TzSnVVw0jHuSjHtv6C9IMX8fYoqHhb01JAAAKFElEQVTB26amLGJlc1KVVTWko%2FbiQTwqMe23CM0Q%2BVTI%2BkbyCSce5FOhgjbcAfkgnw1pp75lA%2FloSUf1xYN41FO514II6Hm8LRoarG1qyyJWNiddWhXxLGFjUngCXRri0aBm7mrV0GbOED55nhzwnpvXXa1iFYB%2FWPHw6gmQHRWO4NUkvFk9NqWZe1o2tJlzeDNb3e8ZL697WsZqlYdwnqZ01D9qQzzC6DL9FwGvJuHB%2FKwRjd7To5mNnsWD2eoeV5y87nh1jtX7bZoXXjzIZ1NmVN3Wq1FY8BttPqN3HF1PcpfRs0j2sJg7w8brjjNnsmCitKa2dExePIhHKdos85mAV7PQ4j7bdEbvN7vu6n1Gz7O6vta8VR5e91s9nxYfhXXSiAf5KESbJZ4T8GoYK%2FylTWb0btJ9Zu82eq7ZdVfHa93f615a513lJZhnIR2zFw%2FiEUSaqeMEvBrH2Ym0m8ronbT3HaU%2Ber7R9UbHWd3X6z5W5x%2FltzgunXiQz2KkmbZOoEoTmbnHzoY2c86VqHrdzfoet7t73WeF9ZM5VtIxffEgHqXos8w6AY2GsqtZzJx91xmvIjNyhyhnHznr1X1H%2FjzKfQfOmlY8yGcgugyBwCsCM80wUUMLG%2FAZ3pJLJIiVpXTMXzy32Hz%2F6%2FfvkjgxFwJtCcw0wwQNLXwcZ3hLLhM4VtbSQTySxGEuBLwIzDbDwE3NC5lon1neq5sFjVMZ8fCR22pmMg8CPwnMNsOgTS1NPGd5r14sWJw8pOP24kE8q1nJPAjcEZhthsGaWrpYzvJevWCgOJUTD%2FJZzUrmQUAgn2NqoMaWLpaN5OMlHdcXD%2BJJV3IcOCqB1WaIgNYiusp7drfN8SkrHuQzm4mMh8ALApJmuLnBpYyphPfMhTfFxlM67i%2BeG39%2BvXomExkLAQP58BHcfFoVlY%2B3dBDPfOoxAwKxCGg0w00%2FZccCOXgaDd5XWznHo414%2BMjtKvP4cwhMEtBoiM4Nb%2FKGcYZrsL66jVMsdkhn24sH8VxlHX8OgQUCmg3RqfEt3DLGFE3Wz27kxL%2BdeJBPjPrhFMUIWDREpyaYLhIWrG8QHJjvks7WF8%2BNL79okK7cOHB0AlYN0aEZRkf75XxJWe%2BUDuJJl%2BUcGAKDBCwaIuJ5Dj8h6%2Fbi4SO3wUbCMAjMEtBuiIjndQQSsd4tnRAvHj5ym%2B0mjIfABAHNhoh4zsEnYB1BOohnon4ZCoG0BLQaIuK5ToHgrBHPkxDyiwbXec0ICCwRkDZEpDOOPSjrKNIJ9eLhu57xvGYkBJYIrDZEpDOPOyBrxHMSRl498znODAgME1hpiIhnGO%2BngbOsDTlHkk64F88taMhnLc%2BZBYEhAqMN0bARDp2zyqAR3oaso0knrHj42K1KxXGP0ATOGqJhIwzNxPpw98wdGEeUDuKxTjLWhwAEILCRAOJZgM9HbgvQmAIBCEDg7e0tqnRCv3j4vofagQAEILBGILJ0EM9aTJkFAQhAIDQBxKMQHj5yU4DIEhCAQAsC0aWT4sXDR24taoVLQgACCgQySCeVeI7D8vJRyEyWgAAEShLIIp104kE%2BJeuFS0EAAkICmaSDeITBZjoEIACBCAQQj0MU%2BMjNATJbQAACKQhkk07KF88tE5BPiprgkBCAgCGBjNJJLR6%2B7zHMZpaGAATCE8gqnfTiQT7ha4MDQgACBgQySwfxGCQES0IAAhCwJoB4rAkPrM%2F3PQOQGAIBCJQgkF06JV48t0xCPiVqiktAAAInBCpIp5R4%2BL6HeoUABCoTqCKdcuJBPpXLjrtBoC%2BBStIpKR7k07c4uTkEKhKoJp2y4kE%2BFcuPO0GgH4GK0iktHuTTr0i5MQQqEagqnfLiQT6VypC7QKAPgcrSQTx98pibQgACiQggnkTBenVU%2Fo5PgSByBQg0IVBdOi1ePLdcRT5NqpZrQiAxgQ7SaSUevu9JXI0cHQINCHSRTjvxIJ8G1csVIZCQQCfptBQP8klYlRwZAoUJdJNOW%2FEgn8JVzNUgkIhAR%2Bm0Fg%2FySVSdHBUCBQl0lU578SCfgtXMlSCQgEBn6SCeuwTl160TVCtHhEByAt2Fcwvft%2BRxVD0%2B8lHFyWIQgMAdAaTzCwbieSgN5EOvgAAEtAkgnc9EEc%2BTDEM%2B2mXHehDoSwDpfI094nlRD8inb6Pg5hDQIoB0npNEPCcZhny0yo91INCPANJ5HXPEc1EPyKdfw%2BDGEJASQDrnBBHPQIYhnwFIDIEABN4JIJ3rREA814w%2BRiCgCVgMhUAzAghnPOCIZ5zV%2B0jkMwmM4RBoQADpzAUZ8czxQj4LvJgCgcoEkM58dBHPPDPks8iMaRCoRgDprEUU8axx43sfITemQyAzAYQjix7ikfHj9aPAjyUgkIkA0pFHC%2FHIGSIfJYYsA4HoBJCOToQQjw5H5KPIkaUgEJEA0tGLCuLRY8n3PgYsWRICuwkgHP0IIB59prx%2BjJiyLAS8CSAdG%2BKIx4Yrrx9jriwPAUsCCMeS7tsb4rHly%2BvHgS9bQECTANLRpPl8LcRjzxj5ODFmGwhICSAdKcGx%2BYhnjJPaKP5bb2ooWQgCagQQjhrKoYUQzxAm%2FUEISJ8pK0JglgDCmSWmMx7x6HBcWgX5LGFjEgRUCCAdFYxLiyCeJWy6kxCQLk9Wg8AZAYSzPz8Qz%2F4YvJ8A%2BQQJBMcoTQDpxAgv4okRh49TIKBgAeE4JQggnFhhRDyx4oGAgsaDY%2BUkgHBixg3xxIwLH78FjgtHy0EA6cSNE%2BKJGxtePwliwxHjEUA48WLyeCLEEz9GCChRjDjqPgIIZx%2F72Z0RzyyxAOP5BYQAQeAIYQggnDChGD4I4hlGFWsg8okVD06zhwDS2cNduivikRLcPB8BbQ4A228hgHC2YFfbFPGoody7EALay5%2FdfQggHB%2FO1rsgHmvCzusjIGfgbOdCAOG4YHbbBPG4ofbdCAH58mY3GwIIx4br7lURz%2B4IOOyPhBwgs4UaAWSjhjLsQognbGj0D4aA9Jmyoh4BhKPHMvpKiCd6hAzOh4AMoLLkMgGEs4wu7UTEkzZ08oMjIDlDVlgngHDW2WWfiXiyR1Dp%2FEhICSTLnBJANiTIQQDxkAdfCCAhkkKTALLRpFljLcRTI44mt0BAJljbLIpw2oR6%2BqKIZxpZzwlIqGfcZ2%2BNbGaJ9RyPeHrGXXRrJCTCV24ysikXUvMLIR5zxLU3QEK14%2FvqdsimZ9y1bo14tEiyzhsSqp0EyKZ2fD1vh3g8aTfbCxHlDjiiyR2%2FyKdHPJGjU%2BhsSChHMJFNjjhlPyXiyR7BpOdHRDECh2hixKHbKRBPt4gHvi8ysg0OkrHly%2BrjBBDPOCtGOhNARDLgiEbGj9l2BBCPHVtWNiKAkD6DRTBGicayZgQQjxlaFt5BoKqUkMuObGJPKwKIx4os64YlEE1OSCVsqnAwIwL%2FD9mA6Lk1zUVXAAAAAElFTkSuQmCC%22%3B%0A%0A%20%20%2F**%0A%20%20%20*%20%40param%20%7BVM.Target%7Cnull%7D%20target%0A%20%20%20*%20%40param%20%7Bstring%7Cunknown%7D%20thing%0A%20%20%20*%20%40returns%20%7Bstring%7Cnumber%7Cboolean%7D%0A%20%20%20*%2F%0A%20%20const%20getThingOfTarget%20%3D%20(target%2C%20thing)%20%3D%3E%20%7B%0A%20%20%20%20if%20(!target)%20%7B%0A%20%20%20%20%20%20return%20%22%22%3B%0A%20%20%20%20%7D%0A%20%20%20%20if%20(thing%20%3D%3D%3D%20%22x%20position%22)%20%7B%0A%20%20%20%20%20%20return%20target.x%3B%0A%20%20%20%20%7D%0A%20%20%20%20if%20(thing%20%3D%3D%3D%20%22y%20position%22)%20%7B%0A%20%20%20%20%20%20return%20target.y%3B%0A%20%20%20%20%7D%0A%20%20%20%20if%20(thing%20%3D%3D%3D%20%22direction%22)%20%7B%0A%20%20%20%20%20%20return%20target.direction%3B%0A%20%20%20%20%7D%0A%20%20%20%20if%20(thing%20%3D%3D%3D%20%22costume%20num%22)%20%7B%0A%20%20%20%20%20%20return%20target.currentCostume%20%2B%201%3B%0A%20%20%20%20%7D%0A%20%20%20%20if%20(thing%20%3D%3D%3D%20%22costume%20name%22)%20%7B%0A%20%20%20%20%20%20return%20target.getCostumes()%5Btarget.currentCostume%5D.name%3B%0A%20%20%20%20%7D%0A%20%20%20%20if%20(thing%20%3D%3D%3D%20%22size%22)%20%7B%0A%20%20%20%20%20%20return%20target.size%3B%0A%20%20%20%20%7D%0A%20%20%20%20if%20(thing%20%3D%3D%3D%20%22volume%22)%20%7B%0A%20%20%20%20%20%20return%20target.volume%3B%0A%20%20%20%20%7D%0A%20%20%20%20%2F%2F%20this%20should%20never%20happen%0A%20%20%20%20return%20%22%22%3B%0A%20%20%7D%3B%0A%0A%20%20class%20ClonesPlus%20%7B%0A%20%20%20%20getInfo()%20%7B%0A%20%20%20%20%20%20return%20%7B%0A%20%20%20%20%20%20%20%20id%3A%20%22lmsclonesplus%22%2C%0A%20%20%20%20%20%20%20%20name%3A%20Scratch.translate(%22Clones%2B%22)%2C%0A%20%20%20%20%20%20%20%20color1%3A%20%22%23FFAB19%22%2C%0A%20%20%20%20%20%20%20%20color2%3A%20%22%23EC9C13%22%2C%0A%20%20%20%20%20%20%20%20color3%3A%20%22%23CF8B17%22%2C%0A%20%20%20%20%20%20%20%20menuIconURI%3A%20menuIconURI%2C%0A%20%20%20%20%20%20%20%20blocks%3A%20%5B%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22whenCloneStartsWithVar%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.HAT%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20Scratch.translate(%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%22when%20I%20start%20as%20a%20clone%20with%20%5BINPUTA%5D%20set%20to%20%5BINPUTB%5D%22%0A%20%20%20%20%20%20%20%20%20%20%20%20)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20filter%3A%20%5BScratch.TargetType.SPRITE%5D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20INPUTA%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.STRING%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20menu%3A%20%22variablesMenu%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20INPUTB%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.STRING%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%20%221%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20extensions%3A%20%5B%22colours_control%22%5D%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22createCloneWithVar%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.COMMAND%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20Scratch.translate(%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%22create%20clone%20with%20%5BINPUTA%5D%20set%20to%20%5BINPUTB%5D%22%0A%20%20%20%20%20%20%20%20%20%20%20%20)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20filter%3A%20%5BScratch.TargetType.SPRITE%5D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20INPUTA%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.STRING%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20menu%3A%20%22variablesMenu%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20INPUTB%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.STRING%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%20%221%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20extensions%3A%20%5B%22colours_control%22%5D%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%0A%20%20%20%20%20%20%20%20%20%20%22---%22%2C%0A%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22touchingCloneWithVar%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.BOOLEAN%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20Scratch.translate(%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%22touching%20clone%20with%20%5BINPUTA%5D%20set%20to%20%5BINPUTB%5D%3F%22%0A%20%20%20%20%20%20%20%20%20%20%20%20)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20filter%3A%20%5BScratch.TargetType.SPRITE%5D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20INPUTA%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.STRING%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20menu%3A%20%22variablesMenu%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20INPUTB%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.STRING%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%20%221%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20extensions%3A%20%5B%22colours_control%22%5D%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22touchingMainSprite%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.BOOLEAN%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20Scratch.translate(%22touching%20main%20sprite%3F%22)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20filter%3A%20%5BScratch.TargetType.SPRITE%5D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20disableMonitor%3A%20true%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20extensions%3A%20%5B%22colours_control%22%5D%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%0A%20%20%20%20%20%20%20%20%20%20%22---%22%2C%0A%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22setVariableOfClone%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.COMMAND%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20Scratch.translate(%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%22set%20variable%20%5BINPUTA%5D%20to%20%5BINPUTB%5D%20for%20clones%20with%20%5BINPUTC%5D%20set%20to%20%5BINPUTD%5D%22%0A%20%20%20%20%20%20%20%20%20%20%20%20)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20filter%3A%20%5BScratch.TargetType.SPRITE%5D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20INPUTA%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.STRING%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20menu%3A%20%22variablesMenu%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20INPUTB%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.STRING%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%20%220%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20INPUTC%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.STRING%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20menu%3A%20%22variablesMenu%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20INPUTD%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.STRING%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%20%221%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20extensions%3A%20%5B%22colours_control%22%5D%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22getVariableOfClone%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.REPORTER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20Scratch.translate(%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%22variable%20%5BINPUTA%5D%20of%20clone%20with%20%5BINPUTB%5D%20set%20to%20%5BINPUTC%5D%22%0A%20%20%20%20%20%20%20%20%20%20%20%20)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20filter%3A%20%5BScratch.TargetType.SPRITE%5D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20disableMonitor%3A%20true%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20INPUTA%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.STRING%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20menu%3A%20%22variablesMenu%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20INPUTB%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.STRING%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20menu%3A%20%22variablesMenu%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20INPUTC%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.STRING%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%20%221%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20extensions%3A%20%5B%22colours_control%22%5D%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22setVariableOfMainSprite%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.COMMAND%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20Scratch.translate(%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%22set%20variable%20%5BINPUTA%5D%20to%20%5BINPUTB%5D%20for%20main%20sprite%22%0A%20%20%20%20%20%20%20%20%20%20%20%20)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20filter%3A%20%5BScratch.TargetType.SPRITE%5D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20INPUTA%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.STRING%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20menu%3A%20%22variablesMenu%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20INPUTB%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.STRING%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%20%221%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20extensions%3A%20%5B%22colours_control%22%5D%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22getVariableOfMainSprite%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.REPORTER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20Scratch.translate(%22variable%20%5BINPUT%5D%20of%20main%20sprite%22)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20filter%3A%20%5BScratch.TargetType.SPRITE%5D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20disableMonitor%3A%20true%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20INPUT%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.STRING%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20menu%3A%20%22variablesMenu%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20extensions%3A%20%5B%22colours_control%22%5D%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%0A%20%20%20%20%20%20%20%20%20%20%22---%22%2C%0A%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22cloneExists%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.BOOLEAN%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20Scratch.translate(%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%22clone%20with%20%5BINPUTA%5D%20set%20to%20%5BINPUTB%5D%20exists%3F%22%0A%20%20%20%20%20%20%20%20%20%20%20%20)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20filter%3A%20%5BScratch.TargetType.SPRITE%5D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20INPUTA%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.STRING%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20menu%3A%20%22variablesMenu%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20INPUTB%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.STRING%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%20%221%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20extensions%3A%20%5B%22colours_control%22%5D%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22getThingOfClone%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.REPORTER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20Scratch.translate(%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%22%5BINPUTA%5D%20of%20clone%20with%20%5BINPUTB%5D%20set%20to%20%5BINPUTC%5D%22%0A%20%20%20%20%20%20%20%20%20%20%20%20)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20filter%3A%20%5BScratch.TargetType.SPRITE%5D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20disableMonitor%3A%20true%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20INPUTA%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.STRING%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20menu%3A%20%22thingOfMenu%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20INPUTB%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.STRING%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20menu%3A%20%22variablesMenu%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20INPUTC%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.STRING%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%20%221%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20extensions%3A%20%5B%22colours_control%22%5D%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22getThingOfMainSprite%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.REPORTER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20Scratch.translate(%22%5BINPUT%5D%20of%20main%20sprite%22)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20filter%3A%20%5BScratch.TargetType.SPRITE%5D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20disableMonitor%3A%20true%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20INPUT%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.STRING%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20menu%3A%20%22thingOfMenu%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20extensions%3A%20%5B%22colours_control%22%5D%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%0A%20%20%20%20%20%20%20%20%20%20%22---%22%2C%0A%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22stopScriptsInSprite%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.COMMAND%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20Scratch.translate(%22stop%20scripts%20in%20%5BINPUT%5D%22)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20INPUT%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.STRING%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20menu%3A%20%22spriteMenu%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20extensions%3A%20%5B%22colours_control%22%5D%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22stopScriptsInClone%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.COMMAND%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20Scratch.translate(%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%22stop%20scripts%20in%20clones%20with%20%5BINPUTA%5D%20set%20to%20%5BINPUTB%5D%22%0A%20%20%20%20%20%20%20%20%20%20%20%20)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20filter%3A%20%5BScratch.TargetType.SPRITE%5D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20INPUTA%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.STRING%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20menu%3A%20%22variablesMenu%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20INPUTB%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.STRING%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%20%221%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20extensions%3A%20%5B%22colours_control%22%5D%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22stopScriptsInMainSprite%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.COMMAND%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20Scratch.translate(%22stop%20scripts%20in%20main%20sprite%22)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20filter%3A%20%5BScratch.TargetType.SPRITE%5D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20extensions%3A%20%5B%22colours_control%22%5D%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%0A%20%20%20%20%20%20%20%20%20%20%22---%22%2C%0A%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22deleteClonesInSprite%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.COMMAND%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20Scratch.translate(%22delete%20clones%20in%20%5BINPUT%5D%22)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20INPUT%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.STRING%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20menu%3A%20%22spriteMenu%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20extensions%3A%20%5B%22colours_control%22%5D%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22deleteCloneWithVar%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.COMMAND%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20Scratch.translate(%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%22delete%20clones%20with%20%5BINPUTA%5D%20set%20to%20%5BINPUTB%5D%22%0A%20%20%20%20%20%20%20%20%20%20%20%20)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20filter%3A%20%5BScratch.TargetType.SPRITE%5D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20INPUTA%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.STRING%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20menu%3A%20%22variablesMenu%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20INPUTB%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.STRING%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%20%221%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20extensions%3A%20%5B%22colours_control%22%5D%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%0A%20%20%20%20%20%20%20%20%20%20%22---%22%2C%0A%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22isClone%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.BOOLEAN%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20Scratch.translate(%22is%20clone%3F%22)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20filter%3A%20%5BScratch.TargetType.SPRITE%5D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20disableMonitor%3A%20true%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20extensions%3A%20%5B%22colours_control%22%5D%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%0A%20%20%20%20%20%20%20%20%20%20%22---%22%2C%0A%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22cloneCount%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.REPORTER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20Scratch.translate(%22clone%20count%22)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20extensions%3A%20%5B%22colours_control%22%5D%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22spriteCloneCount%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.REPORTER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20Scratch.translate(%22clone%20count%20of%20%5BINPUT%5D%22)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20disableMonitor%3A%20true%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20INPUT%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.STRING%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20menu%3A%20%22spriteMenu%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20extensions%3A%20%5B%22colours_control%22%5D%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%5D%2C%0A%20%20%20%20%20%20%20%20menus%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20spriteMenu%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20acceptReporters%3A%20true%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20items%3A%20%22getSprites%22%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%2F%2F%20menus%20use%20acceptReporters%3A%20false%20for%20Scratch%20parity%0A%20%20%20%20%20%20%20%20%20%20variablesMenu%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20acceptReporters%3A%20false%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20items%3A%20%22getVariables%22%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20thingOfMenu%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20acceptReporters%3A%20false%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20items%3A%20%5B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20Scratch.translate(%22x%20position%22)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20value%3A%20%22x%20position%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20Scratch.translate(%22y%20position%22)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20value%3A%20%22y%20position%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20Scratch.translate(%22direction%22)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20value%3A%20%22direction%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20Scratch.translate(%22costume%20%23%22)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20value%3A%20%22costume%20num%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20Scratch.translate(%22costume%20name%22)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20value%3A%20%22costume%20name%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20Scratch.translate(%22size%22)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20value%3A%20%22size%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20Scratch.translate(%22volume%22)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20value%3A%20%22volume%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%5D%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%7D%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20whenCloneStartsWithVar(args%2C%20util)%20%7B%0A%20%20%20%20%20%20%2F%2F%20TODO%3A%20this%20is%20really%20not%20ideal.%20this%20should%20be%20an%20event-based%20hat%20ideally%2C%20but%20we%20don't%20have%20a%20good%0A%20%20%20%20%20%20%2F%2F%20way%20to%20do%20that%20right%20now...%0A%20%20%20%20%20%20if%20(util.target.isOriginal)%20%7B%0A%20%20%20%20%20%20%20%20return%20false%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20const%20variable%20%3D%20util.target.lookupVariableById(args.INPUTA)%3B%0A%20%20%20%20%20%20const%20expectedValue%20%3D%20args.INPUTB%3B%0A%20%20%20%20%20%20if%20(variable)%20%7B%0A%20%20%20%20%20%20%20%20return%20Scratch.Cast.compare(variable.value%2C%20expectedValue)%20%3D%3D%3D%200%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20return%20false%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20createCloneWithVar(args%2C%20util)%20%7B%0A%20%20%20%20%20%20%2F%2F%20%40ts-expect-error%20-%20not%20typed%20yet%0A%20%20%20%20%20%20Scratch.vm.runtime.ext_scratch3_control._createClone(%0A%20%20%20%20%20%20%20%20util.target.sprite.name%2C%0A%20%20%20%20%20%20%20%20util.target%0A%20%20%20%20%20%20)%3B%0A%20%20%20%20%20%20const%20clones%20%3D%20util.target.sprite.clones%3B%0A%20%20%20%20%20%20const%20cloneNum%20%3D%20clones.length%20-%201%3B%0A%20%20%20%20%20%20const%20cloneVariable%20%3D%20clones%5BcloneNum%5D.lookupVariableById(args.INPUTA)%3B%0A%20%20%20%20%20%20if%20(cloneVariable)%20%7B%0A%20%20%20%20%20%20%20%20cloneVariable.value%20%3D%20args.INPUTB%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%0A%20%20%20%20touchingCloneWithVar(args%2C%20util)%20%7B%0A%20%20%20%20%20%20const%20drawableCandidates%20%3D%20util.target.sprite.clones%0A%20%20%20%20%20%20%20%20.filter((clone)%20%3D%3E%20%7B%0A%20%20%20%20%20%20%20%20%20%20const%20variable%20%3D%20clone.lookupVariableById(args.INPUTA)%3B%0A%20%20%20%20%20%20%20%20%20%20return%20(%0A%20%20%20%20%20%20%20%20%20%20%20%20variable%20%26%26%20Scratch.Cast.compare(variable.value%2C%20args.INPUTB)%20%3D%3D%3D%200%0A%20%20%20%20%20%20%20%20%20%20)%3B%0A%20%20%20%20%20%20%20%20%7D)%0A%20%20%20%20%20%20%20%20.map((clone)%20%3D%3E%20clone.drawableID)%3B%0A%20%20%20%20%20%20if%20(drawableCandidates.length%20%3D%3D%3D%200)%20%7B%0A%20%20%20%20%20%20%20%20return%20false%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20return%20Scratch.vm.renderer.isTouchingDrawables(%0A%20%20%20%20%20%20%20%20util.target.drawableID%2C%0A%20%20%20%20%20%20%20%20drawableCandidates%0A%20%20%20%20%20%20)%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20touchingMainSprite(args%2C%20util)%20%7B%0A%20%20%20%20%20%20if%20(util.target.isOriginal)%20%7B%0A%20%20%20%20%20%20%20%20return%20false%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20const%20main%20%3D%20util.target.sprite.clones%5B0%5D%3B%0A%20%20%20%20%20%20const%20drawableCandidates%20%3D%20%5Bmain.drawableID%5D%3B%0A%20%20%20%20%20%20return%20Scratch.vm.renderer.isTouchingDrawables(%0A%20%20%20%20%20%20%20%20util.target.drawableID%2C%0A%20%20%20%20%20%20%20%20drawableCandidates%0A%20%20%20%20%20%20)%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20setVariableOfClone(args%2C%20util)%20%7B%0A%20%20%20%20%20%20const%20newVariableValue%20%3D%20args.INPUTB%3B%0A%20%20%20%20%20%20const%20expectedVarValue%20%3D%20args.INPUTD%3B%0A%20%20%20%20%20%20const%20clones%20%3D%20util.target.sprite.clones%3B%0A%20%20%20%20%20%20for%20(let%20index%20%3D%201%3B%20index%20%3C%20clones.length%3B%20index%2B%2B)%20%7B%0A%20%20%20%20%20%20%20%20const%20checkVar%20%3D%20clones%5Bindex%5D.lookupVariableById(args.INPUTC)%3B%0A%20%20%20%20%20%20%20%20if%20(%0A%20%20%20%20%20%20%20%20%20%20checkVar%20%26%26%0A%20%20%20%20%20%20%20%20%20%20Scratch.Cast.compare(checkVar.value%2C%20expectedVarValue)%20%3D%3D%3D%200%0A%20%20%20%20%20%20%20%20)%20%7B%0A%20%20%20%20%20%20%20%20%20%20const%20editVar%20%3D%20clones%5Bindex%5D.lookupVariableById(args.INPUTA)%3B%0A%20%20%20%20%20%20%20%20%20%20if%20(editVar)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20editVar.value%20%3D%20newVariableValue%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%0A%20%20%20%20getVariableOfClone(args%2C%20util)%20%7B%0A%20%20%20%20%20%20const%20clone%20%3D%20this.getCloneFromVariable(%0A%20%20%20%20%20%20%20%20args.INPUTB%2C%0A%20%20%20%20%20%20%20%20args.INPUTC%2C%0A%20%20%20%20%20%20%20%20util.target.sprite.clones%0A%20%20%20%20%20%20)%3B%0A%20%20%20%20%20%20if%20(!clone)%20%7B%0A%20%20%20%20%20%20%20%20return%20%22%22%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%2F%2F%20guaranteed%20to%20exist%20by%20getCloneFromVariable%0A%20%20%20%20%20%20const%20cloneVar%20%3D%20clone.lookupVariableById(args.INPUTA)%3B%0A%20%20%20%20%20%20return%20cloneVar.value%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20setVariableOfMainSprite(args%2C%20util)%20%7B%0A%20%20%20%20%20%20const%20main%20%3D%20util.target.sprite.clones%5B0%5D%3B%0A%20%20%20%20%20%20const%20variableObj%20%3D%20main.lookupVariableById(args.INPUTA)%3B%0A%20%20%20%20%20%20if%20(variableObj)%20%7B%0A%20%20%20%20%20%20%20%20variableObj.value%20%3D%20args.INPUTB%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%0A%20%20%20%20getVariableOfMainSprite(args%2C%20util)%20%7B%0A%20%20%20%20%20%20const%20main%20%3D%20util.target.sprite.clones%5B0%5D%3B%0A%20%20%20%20%20%20const%20variableObj%20%3D%20main.lookupVariableById(args.INPUT)%3B%0A%20%20%20%20%20%20if%20(variableObj)%20%7B%0A%20%20%20%20%20%20%20%20return%20variableObj.value%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20return%20%22%22%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20cloneExists(args%2C%20util)%20%7B%0A%20%20%20%20%20%20const%20clone%20%3D%20this.getCloneFromVariable(%0A%20%20%20%20%20%20%20%20args.INPUTA%2C%0A%20%20%20%20%20%20%20%20args.INPUTB%2C%0A%20%20%20%20%20%20%20%20util.target.sprite.clones%0A%20%20%20%20%20%20)%3B%0A%20%20%20%20%20%20return%20!!clone%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20getThingOfClone(args%2C%20util)%20%7B%0A%20%20%20%20%20%20const%20clone%20%3D%20this.getCloneFromVariable(%0A%20%20%20%20%20%20%20%20args.INPUTB%2C%0A%20%20%20%20%20%20%20%20args.INPUTC%2C%0A%20%20%20%20%20%20%20%20util.target.sprite.clones%0A%20%20%20%20%20%20)%3B%0A%20%20%20%20%20%20return%20getThingOfTarget(clone%2C%20args.INPUTA)%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20getThingOfMainSprite(args%2C%20util)%20%7B%0A%20%20%20%20%20%20const%20main%20%3D%20util.target.sprite.clones%5B0%5D%3B%0A%20%20%20%20%20%20return%20getThingOfTarget(main%2C%20args.INPUT)%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20stopScriptsInSprite(args)%20%7B%0A%20%20%20%20%20%20const%20targetObj%20%3D%20Scratch.vm.runtime.getSpriteTargetByName(args.INPUT)%3B%0A%20%20%20%20%20%20if%20(targetObj)%20%7B%0A%20%20%20%20%20%20%20%20Scratch.vm.runtime.stopForTarget(targetObj)%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%0A%20%20%20%20stopScriptsInMainSprite(args%2C%20util)%20%7B%0A%20%20%20%20%20%20Scratch.vm.runtime.stopForTarget(util.target.sprite.clones%5B0%5D)%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20stopScriptsInClone(args%2C%20util)%20%7B%0A%20%20%20%20%20%20const%20clones%20%3D%20util.target.sprite.clones%3B%0A%20%20%20%20%20%20let%20expectedValue%20%3D%20args.INPUTB%3B%0A%20%20%20%20%20%20for%20(let%20index%20%3D%201%3B%20index%20%3C%20clones.length%3B%20index%2B%2B)%20%7B%0A%20%20%20%20%20%20%20%20const%20cloneVariable%20%3D%20clones%5Bindex%5D.lookupVariableById(args.INPUTA)%3B%0A%20%20%20%20%20%20%20%20if%20(%0A%20%20%20%20%20%20%20%20%20%20cloneVariable%20%26%26%0A%20%20%20%20%20%20%20%20%20%20Scratch.Cast.compare(cloneVariable.value%2C%20expectedValue)%20%3D%3D%3D%200%0A%20%20%20%20%20%20%20%20)%20%7B%0A%20%20%20%20%20%20%20%20%20%20Scratch.vm.runtime.stopForTarget(clones%5Bindex%5D)%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%0A%20%20%20%20deleteClonesInSprite(args%2C%20util)%20%7B%0A%20%20%20%20%20%20const%20target%20%3D%20Scratch.vm.runtime.getSpriteTargetByName(args.INPUT)%3B%0A%20%20%20%20%20%20if%20(!target)%20%7B%0A%20%20%20%20%20%20%20%20return%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20const%20clones%20%3D%20target.sprite.clones%3B%0A%20%20%20%20%20%20for%20(let%20index%20%3D%20clones.length%20-%201%3B%20index%20%3E%200%3B%20index--)%20%7B%0A%20%20%20%20%20%20%20%20Scratch.vm.runtime.disposeTarget(clones%5Bindex%5D)%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%0A%20%20%20%20deleteCloneWithVar(args%2C%20util)%20%7B%0A%20%20%20%20%20%20const%20clones%20%3D%20util.target.sprite.clones%3B%0A%20%20%20%20%20%20const%20expectedValue%20%3D%20args.INPUTB%3B%0A%20%20%20%20%20%20for%20(let%20index%20%3D%20clones.length%20-%201%3B%20index%20%3E%200%3B%20index--)%20%7B%0A%20%20%20%20%20%20%20%20const%20cloneVar%20%3D%20clones%5Bindex%5D.lookupVariableById(args.INPUTA)%3B%0A%20%20%20%20%20%20%20%20if%20(%0A%20%20%20%20%20%20%20%20%20%20cloneVar%20%26%26%0A%20%20%20%20%20%20%20%20%20%20Scratch.Cast.compare(cloneVar.value%2C%20expectedValue)%20%3D%3D%3D%200%0A%20%20%20%20%20%20%20%20)%20%7B%0A%20%20%20%20%20%20%20%20%20%20Scratch.vm.runtime.disposeTarget(clones%5Bindex%5D)%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%0A%20%20%20%20isClone(args%2C%20util)%20%7B%0A%20%20%20%20%20%20return%20!util.target.isOriginal%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20cloneCount(args%2C%20util)%20%7B%0A%20%20%20%20%20%20return%20Scratch.vm.runtime._cloneCounter%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20spriteCloneCount(args%2C%20util)%20%7B%0A%20%20%20%20%20%20const%20target%20%3D%20Scratch.vm.runtime.getSpriteTargetByName(args.INPUT)%3B%0A%20%20%20%20%20%20if%20(target)%20%7B%0A%20%20%20%20%20%20%20%20return%20target.sprite.clones.length%20-%201%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20return%200%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F**%0A%20%20%20%20%20*%20%40param%20%7Bstring%7D%20variableId%0A%20%20%20%20%20*%20%40param%20%7Bunknown%7D%20expectedValue%0A%20%20%20%20%20*%20%40param%20%7BVM.Target%5B%5D%7D%20clones%0A%20%20%20%20%20*%20%40returns%20%7BVM.Target%7Cnull%7D%0A%20%20%20%20%20*%2F%0A%20%20%20%20getCloneFromVariable(variableId%2C%20expectedValue%2C%20clones)%20%7B%0A%20%20%20%20%20%20for%20(let%20index%20%3D%201%3B%20index%20%3C%20clones.length%3B%20index%2B%2B)%20%7B%0A%20%20%20%20%20%20%20%20const%20cloneVar%20%3D%20clones%5Bindex%5D.lookupVariableById(variableId)%3B%0A%20%20%20%20%20%20%20%20if%20(%0A%20%20%20%20%20%20%20%20%20%20cloneVar%20%26%26%0A%20%20%20%20%20%20%20%20%20%20Scratch.Cast.compare(cloneVar.value%2C%20expectedValue)%20%3D%3D%3D%200%0A%20%20%20%20%20%20%20%20)%20%7B%0A%20%20%20%20%20%20%20%20%20%20return%20clones%5Bindex%5D%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20return%20null%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20getSprites()%20%7B%0A%20%20%20%20%20%20let%20spriteNames%20%3D%20%5B%5D%3B%0A%20%20%20%20%20%20const%20targets%20%3D%20Scratch.vm.runtime.targets%3B%0A%20%20%20%20%20%20const%20myself%20%3D%20Scratch.vm.runtime.getEditingTarget().sprite.name%3B%0A%20%20%20%20%20%20for%20(let%20index%20%3D%201%3B%20index%20%3C%20targets.length%3B%20index%2B%2B)%20%7B%0A%20%20%20%20%20%20%20%20const%20curTarget%20%3D%20targets%5Bindex%5D.sprite%3B%0A%20%20%20%20%20%20%20%20let%20display%20%3D%20curTarget.name%3B%0A%20%20%20%20%20%20%20%20if%20(myself%20%3D%3D%3D%20curTarget.name)%20%7B%0A%20%20%20%20%20%20%20%20%20%20display%20%3D%20Scratch.translate(%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20default%3A%20%22myself%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20description%3A%20%22Item%20in%20a%20dropdown%20that%20refers%20to%20the%20current%20sprite%22%2C%0A%20%20%20%20%20%20%20%20%20%20%7D)%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20if%20(targets%5Bindex%5D.isOriginal)%20%7B%0A%20%20%20%20%20%20%20%20%20%20const%20jsonOBJ%20%3D%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20display%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20value%3A%20curTarget.name%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%3B%0A%20%20%20%20%20%20%20%20%20%20spriteNames.push(jsonOBJ)%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20if%20(spriteNames.length%20%3E%200)%20%7B%0A%20%20%20%20%20%20%20%20return%20spriteNames%3B%0A%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20return%20%5B%7B%20text%3A%20%22%22%2C%20value%3A%200%20%7D%5D%3B%20%2F%2Fthis%20should%20never%20happen%20but%20it's%20a%20failsafe%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%0A%20%20%20%20getSpriteObj(name)%20%7B%0A%20%20%20%20%20%20%2F%2FThis%20is%20unused%20but%20I'm%20leaving%20it%20in%20for%20potential%20future%20blocks%0A%20%20%20%20%20%20const%20spriteObj%20%3D%20Scratch.vm.runtime.getSpriteTargetByName(name)%3B%0A%20%20%20%20%20%20return%20JSON.stringify(spriteObj)%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20getVariables()%20%7B%0A%20%20%20%20%20%20%2F%2F%20%40ts-expect-error%20-%20Blockly%20not%20typed%20yet%0A%20%20%20%20%20%20const%20variables%20%3D%0A%20%20%20%20%20%20%20%20typeof%20Blockly%20%3D%3D%3D%20%22undefined%22%0A%20%20%20%20%20%20%20%20%20%20%3F%20%5B%5D%0A%20%20%20%20%20%20%20%20%20%20%3A%20Blockly.getMainWorkspace()%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20.getVariableMap()%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20.getVariablesOfType(%22%22)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20.filter((model)%20%3D%3E%20model.isLocal)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20.map((model)%20%3D%3E%20(%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20model.name%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20value%3A%20model.getId()%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D))%3B%0A%20%20%20%20%20%20if%20(variables.length%20%3E%200)%20%7B%0A%20%20%20%20%20%20%20%20return%20variables%3B%0A%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20return%20%5B%7B%20text%3A%20%22%22%2C%20value%3A%20%22%22%20%7D%5D%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%20%20%7D%0A%20%20Scratch.extensions.register(new%20ClonesPlus())%3B%0A%7D)(Scratch)%3B%0A%20%7D)(Scratch)%3B","data:text/javascript;,(function(Scratch)%20%7B%20%2F%2F%20Name%3A%20Box2D%20Physics%0A%2F%2F%20ID%3A%20griffpatch%0A%2F%2F%20Description%3A%20Two%20dimensional%20physics.%0A%2F%2F%20Original%3A%20griffpatch%20%3Chttps%3A%2F%2Fscratch.mit.edu%2Fusers%2Fgriffpatch%2F%3E%0A%2F%2F%20License%3A%20BSD-3-Clause%20AND%20MIT%20AND%20Zlib%0A%0A%2F*!%0A%20*%20This%20is%20based%20on%20https%3A%2F%2Fgithub.com%2Fgriffpatch%2Fscratch-vm%2Ftree%2Fbox2d%2Fsrc%2Fextensions%2Fscratch3_griffpatch%0A%20*%20by%20griffpatch%2C%20which%20has%20this%20license%20attached%3A%0A%20*%0A%20*%20Copyright%20(c)%202016%2C%20Massachusetts%20Institute%20of%20Technology%0A%20*%20All%20rights%20reserved.%0A%20*%0A%20*%20Redistribution%20and%20use%20in%20source%20and%20binary%20forms%2C%20with%20or%20without%20modification%2C%20are%20permitted%20provided%20that%20the%20following%20conditions%20are%20met%3A%0A%20*%0A%20*%201.%20Redistributions%20of%20source%20code%20must%20retain%20the%20above%20copyright%20notice%2C%20this%20list%20of%20conditions%20and%20the%20following%20disclaimer.%0A%20*%0A%20*%202.%20Redistributions%20in%20binary%20form%20must%20reproduce%20the%20above%20copyright%20notice%2C%20this%20list%20of%20conditions%20and%20the%20following%20disclaimer%20in%20the%20documentation%20and%2For%20other%20materials%20provided%20with%20the%20distribution.%0A%20*%0A%20*%203.%20Neither%20the%20name%20of%20the%20copyright%20holder%20nor%20the%20names%20of%20its%20contributors%20may%20be%20used%20to%20endorse%20or%20promote%20products%20derived%20from%20this%20software%20without%20specific%20prior%20written%20permission.%0A%20*%0A%20*%20THIS%20SOFTWARE%20IS%20PROVIDED%20BY%20THE%20COPYRIGHT%20HOLDERS%20AND%20CONTRIBUTORS%20%22AS%20IS%22%20AND%20ANY%20EXPRESS%20OR%20IMPLIED%20WARRANTIES%2C%20INCLUDING%2C%20BUT%20NOT%20LIMITED%20TO%2C%20THE%20IMPLIED%20WARRANTIES%20OF%20MERCHANTABILITY%20AND%20FITNESS%20FOR%20A%20PARTICULAR%20PURPOSE%20ARE%20DISCLAIMED.%20IN%20NO%20EVENT%20SHALL%20THE%20COPYRIGHT%20HOLDER%20OR%20CONTRIBUTORS%20BE%20LIABLE%20FOR%20ANY%20DIRECT%2C%20INDIRECT%2C%20INCIDENTAL%2C%20SPECIAL%2C%20EXEMPLARY%2C%20OR%20CONSEQUENTIAL%20DAMAGES%20(INCLUDING%2C%20BUT%20NOT%20LIMITED%20TO%2C%20PROCUREMENT%20OF%20SUBSTITUTE%20GOODS%20OR%20SERVICES%3B%20LOSS%20OF%20USE%2C%20DATA%2C%20OR%20PROFITS%3B%20OR%20BUSINESS%20INTERRUPTION)%20HOWEVER%20CAUSED%20AND%20ON%20ANY%20THEORY%20OF%20LIABILITY%2C%20WHETHER%20IN%20CONTRACT%2C%20STRICT%20LIABILITY%2C%20OR%20TORT%20(INCLUDING%20NEGLIGENCE%20OR%20OTHERWISE)%20ARISING%20IN%20ANY%20WAY%20OUT%20OF%20THE%20USE%20OF%20THIS%20SOFTWARE%2C%20EVEN%20IF%20ADVISED%20OF%20THE%20POSSIBILITY%20OF%20SUCH%20DAMAGE.%0A%20*%2F%0A%0A%2F*%20eslint-disable%20*%2F%0A%0A%2F*%20generated%20l10n%20code%20*%2FScratch.translate.setup(%7B%22it%22%3A%7B%22griffpatch.applyAngForce%22%3A%22ruota%20con%20forza%20%5Bforce%5D%22%2C%22griffpatch.applyForce%22%3A%22spingi%20con%20forza%20%5Bforce%5D%20in%20direzione%20%5Bdir%5D%22%2C%22griffpatch.categoryName%22%3A%22Fisica%22%2C%22griffpatch.changeScroll%22%3A%22cambia%20scorrimento%20di%20x%3A%20%5Box%5D%20y%3A%20%5Boy%5D%22%2C%22griffpatch.changeVelocity%22%3A%22cambia%20velocit%C3%A0%20di%20vx%3A%20%5Bsx%5D%20vy%3A%20%5Bsy%5D%22%2C%22griffpatch.disablePhysics%22%3A%22disattiva%20gestione%20della%20fisica%20per%20questo%20sprite%22%2C%22griffpatch.doTick%22%3A%22esegui%20un%20passo%20della%20simulazione%22%2C%22griffpatch.getAngVelocity%22%3A%22velocit%C3%A0%20angolare%22%2C%22griffpatch.getDensity%22%3A%22densit%C3%A0%22%2C%22griffpatch.getFriction%22%3A%22attrito%22%2C%22griffpatch.getGravityX%22%3A%22gravit%C3%A0%20x%22%2C%22griffpatch.getGravityY%22%3A%22gravit%C3%A0%20y%22%2C%22griffpatch.getRestitution%22%3A%22elasticit%C3%A0%22%2C%22griffpatch.getScrollX%22%3A%22scorrimento%20x%22%2C%22griffpatch.getScrollY%22%3A%22scorrimento%20y%22%2C%22griffpatch.getStatic%22%3A%22fisso%22%2C%22griffpatch.getTickRate%22%3A%22passi%20simulazione%22%2C%22griffpatch.getTouching%22%3A%22sprite%20a%20contatto%20con%20%5Bwhere%5D%22%2C%22griffpatch.getVelocityX%22%3A%22velocit%C3%A0%20x%22%2C%22griffpatch.getVelocityY%22%3A%22velocit%C3%A0%20y%22%2C%22griffpatch.setAngVelocity%22%3A%22porta%20velocit%C3%A0%20angolare%20a%20%5Bforce%5D%22%2C%22griffpatch.setDensity%22%3A%22imposta%20densit%C3%A0%20a%20%5Bdensity%5D%22%2C%22griffpatch.setDensityValue%22%3A%22imposta%20densit%C3%A0%20a%20%5Bdensity%5D%22%2C%22griffpatch.setFriction%22%3A%22imposta%20attrito%20a%20%5Bfriction%5D%22%2C%22griffpatch.setFrictionValue%22%3A%22imposta%20attrito%20a%20%5Bfriction%5D%22%2C%22griffpatch.setGravity%22%3A%22imposta%20gravit%C3%A0%20a%20x%3A%20%5Bgx%5D%20y%3A%20%5Bgy%5D%22%2C%22griffpatch.setPhysics%22%3A%22abilita%20modalit%C3%A0%20%5Bmode%5D%20per%20le%20forme%20%5Bshape%5D%22%2C%22griffpatch.setPosition%22%3A%22vai%20a%20x%3A%20%5Bx%5D%20y%3A%20%5By%5D%20di%20%5Bspace%5D%22%2C%22griffpatch.setProperties%22%3A%22imposta%20densit%C3%A0%20%5Bdensity%5D%20attrito%20%5Bfriction%5D%20elasticit%C3%A0%20%5Brestitution%5D%22%2C%22griffpatch.setRestitution%22%3A%22imposta%20elasticit%C3%A0%20a%20%5Brestitution%5D%22%2C%22griffpatch.setRestitutionValue%22%3A%22imposta%20elasticit%C3%A0%20a%20%5Brestitution%5D%22%2C%22griffpatch.setScroll%22%3A%22imposta%20scorrimento%20a%20x%3A%20%5Box%5D%20y%3A%20%5Boy%5D%22%2C%22griffpatch.setStage%22%3A%22imposta%20i%20bordi%20dello%20stage%20a%20%5BstageType%5D%22%2C%22griffpatch.setStatic%22%3A%22usa%20modalit%C3%A0%20%5Bstatic%5D%22%2C%22griffpatch.setTickRate%22%3A%22imposta%20passi%20simulazione%20a%20%5Brate%5D%2Fs%22%2C%22griffpatch.setVelocity%22%3A%22porta%20velocit%C3%A0%20a%20vx%3A%20%5Bsx%5D%20vy%3A%20%5Bsy%5D%22%7D%2C%22nb%22%3A%7B%22griffpatch.applyAngForce%22%3A%22spinn%20med%20kraft%20%5Bforce%5D%22%2C%22griffpatch.applyForce%22%3A%22skyv%20med%20kraft%20%5Bforce%5D%20i%20retning%20%5Bdir%5D%22%2C%22griffpatch.categoryName%22%3A%22Fysikk%22%2C%22griffpatch.changeScroll%22%3A%22endre%20rulling%20med%20x%3A%20%5Box%5D%20y%3A%20%5Boy%5D%22%2C%22griffpatch.changeVelocity%22%3A%22endre%20hastighet%20med%20sx%3A%20%5Bsx%5D%20sy%3A%20%5Bsy%5D%22%2C%22griffpatch.disablePhysics%22%3A%22deaktiver%20fysikk%20for%20denne%20figuren%22%2C%22griffpatch.doTick%22%3A%22trinn%20simulering%22%2C%22griffpatch.getAngVelocity%22%3A%22vinkelhastighet%22%2C%22griffpatch.getDensity%22%3A%22tetthet%22%2C%22griffpatch.getFriction%22%3A%22friksjon%22%2C%22griffpatch.getGravityX%22%3A%22tyngdekraft%20x%22%2C%22griffpatch.getGravityY%22%3A%22tyngdekraft%20y%22%2C%22griffpatch.getRestitution%22%3A%22sprette%22%2C%22griffpatch.getScrollX%22%3A%22x%20rulle%22%2C%22griffpatch.getScrollY%22%3A%22y%20rulle%22%2C%22griffpatch.getStatic%22%3A%22fikset%3F%22%2C%22griffpatch.getTickRate%22%3A%22simuleringshastighet%22%2C%22griffpatch.getVelocityX%22%3A%22x%20hastighet%22%2C%22griffpatch.getVelocityY%22%3A%22y%20hastighet%22%2C%22griffpatch.setAngVelocity%22%3A%22sett%20angul%C3%A6r%20hastighet%20til%20%5Bforce%5D%22%2C%22griffpatch.setDensity%22%3A%22sett%20tettheten%20til%20%5Bdensity%5D%22%2C%22griffpatch.setDensityValue%22%3A%22sett%20tettheten%20til%20%5Bdensity%5D%22%2C%22griffpatch.setFriction%22%3A%22sett%20friksjon%20til%20%5Bfriction%5D%22%2C%22griffpatch.setFrictionValue%22%3A%22sett%20friksjon%20til%20%5Bfriction%5D%22%2C%22griffpatch.setGravity%22%3A%22sett%20tyngdekraften%20til%20x%3A%20%5Bgx%5D%20y%3A%20%5Bgy%5D%22%2C%22griffpatch.setPhysics%22%3A%22aktiver%20for%20%5Bshape%5D%20modus%20%5Bmode%5D%22%2C%22griffpatch.setPosition%22%3A%22g%C3%A5%20til%20x%3A%20%5Bx%5D%20y%3A%20%5By%5D%20%5Bspace%5D%22%2C%22griffpatch.setProperties%22%3A%22sett%20tetthet%20%5Bdensity%5D%20ruhet%20%5Bfriction%5D%20sprett%20%5Brestitution%5D%22%2C%22griffpatch.setRestitution%22%3A%22sett%20sprett%20til%20%5Brestitution%5D%22%2C%22griffpatch.setRestitutionValue%22%3A%22sett%20sprett%20til%20%5Brestitution%5D%22%2C%22griffpatch.setScroll%22%3A%22sett%20rulle%20til%20x%3A%20%5Box%5D%20y%3A%20%5Boy%5D%22%2C%22griffpatch.setStage%22%3A%22sett%20scenegrensene%20til%20%5BstageType%5D%22%2C%22griffpatch.setStatic%22%3A%22set%20fikset%20til%20%5Bstatic%5D%22%2C%22griffpatch.setTickRate%22%3A%22sett%20simuleringstakten%20til%20%5Brate%5D%2Fs%22%2C%22griffpatch.setVelocity%22%3A%22sett%20hastighet%20til%20sx%3A%20%5Bsx%5D%20sy%3A%20%5Bsy%5D%22%7D%2C%22nl%22%3A%7B%22griffpatch.applyAngForce%22%3A%22draai%20met%20kracht%20%5Bforce%5D%22%2C%22griffpatch.applyForce%22%3A%22duw%20met%20kracht%20%5Bforce%5D%20in%20richting%20%5Bdir%5D%22%2C%22griffpatch.categoryName%22%3A%22Fysica-simulatie%22%2C%22griffpatch.changeScroll%22%3A%22verander%20scroll%20met%20x%3A%20%5Box%5D%20y%3A%20%5Boy%5D%22%2C%22griffpatch.changeVelocity%22%3A%22verander%20snelheid%20met%20sx%3A%20%5Bsx%5D%20sy%3A%20%5Bsy%5D%22%2C%22griffpatch.disablePhysics%22%3A%22zet%20simulatie%20uit%20voor%20deze%20sprite%22%2C%22griffpatch.doTick%22%3A%22voer%20simulatie%20%C3%A9%C3%A9n%20keer%20uit%22%2C%22griffpatch.getAngVelocity%22%3A%22hoeksnelheid%22%2C%22griffpatch.getDensity%22%3A%22dichtheid%22%2C%22griffpatch.getFriction%22%3A%22wrijving%22%2C%22griffpatch.getGravityX%22%3A%22zwaartekracht%20x%22%2C%22griffpatch.getGravityY%22%3A%22zwaartekracht%20y%22%2C%22griffpatch.getRestitution%22%3A%22stuiterkracht%22%2C%22griffpatch.getScrollX%22%3A%22x-scroll%22%2C%22griffpatch.getScrollY%22%3A%22y-scroll%22%2C%22griffpatch.getStatic%22%3A%22vastgezet%3F%22%2C%22griffpatch.getTickRate%22%3A%22simulatiefrequentie%22%2C%22griffpatch.getTouching%22%3A%22alle%20sprites%20die%20%5Bwhere%5D%20aanraken%22%2C%22griffpatch.getVelocityX%22%3A%22snelheid%20x%22%2C%22griffpatch.getVelocityY%22%3A%22snelheid%20y%22%2C%22griffpatch.setAngVelocity%22%3A%22maak%20hoeksnelheid%20%5Bforce%5D%22%2C%22griffpatch.setDensity%22%3A%22maak%20dichtheid%20%5Bdensity%5D%22%2C%22griffpatch.setDensityValue%22%3A%22maak%20dichtheid%20%5Bdensity%5D%22%2C%22griffpatch.setFriction%22%3A%22maak%20wrijving%20%5Bfriction%5D%22%2C%22griffpatch.setFrictionValue%22%3A%22maak%20wrijving%20%5Bfriction%5D%22%2C%22griffpatch.setGravity%22%3A%22stel%20zwaartekracht%20in%20op%20x%3A%20%5Bgx%5D%20y%3A%20%5Bgy%5D%22%2C%22griffpatch.setPhysics%22%3A%22schakel%20voor%20%5Bshape%5D%20de%20stand%20%5Bmode%5D%20in%22%2C%22griffpatch.setPosition%22%3A%22ga%20naar%20x%3A%20%5Bx%5D%20y%3A%20%5By%5D%20%5Bspace%5D%22%2C%22griffpatch.setProperties%22%3A%22maak%20dichtheid%20%5Bdensity%5D%2C%20wrijving%20%5Bfriction%5D%20en%20stuiterkracht%20%5Brestitution%5D%22%2C%22griffpatch.setRestitution%22%3A%22maak%20stuiterkracht%20%5Brestitution%5D%22%2C%22griffpatch.setRestitutionValue%22%3A%22maak%20stuiterkracht%20%5Brestitution%5D%22%2C%22griffpatch.setScroll%22%3A%22stel%20scroll%20in%20op%20x%3A%20%5Box%5D%20y%3A%20%5Boy%5D%22%2C%22griffpatch.setStage%22%3A%22maak%20grenstype%20%5BstageType%5D%22%2C%22griffpatch.setStatic%22%3A%22maak%20vastzettype%20%5Bstatic%5D%22%2C%22griffpatch.setTickRate%22%3A%22maak%20simulatiefrequentie%20%5Brate%5D%20%2F%20sec%22%2C%22griffpatch.setVelocity%22%3A%22stel%20snelheid%20in%20op%20sx%3A%20%5Bsx%5D%20sy%3A%20%5Bsy%5D%22%7D%2C%22ru%22%3A%7B%22griffpatch.applyAngForce%22%3A%22%D0%BA%D1%80%D1%83%D1%82%D0%B8%D1%82%D1%8C%20%D1%81%20%D1%81%D0%B8%D0%BB%D0%BE%D0%B9%20%5Bforce%5D%22%2C%22griffpatch.applyForce%22%3A%22%D0%BF%D1%80%D0%B8%D0%BB%D0%BE%D0%B6%D0%B8%D1%82%D1%8C%20%D1%81%D0%B8%D0%BB%D1%83%20%5Bforce%5D%20%D0%B2%20%D0%BD%D0%B0%D0%BF%D1%80%D0%B0%D0%B2%D0%BB%D0%B5%D0%BD%D0%B8%D0%B8%20%5Bdir%5D%22%2C%22griffpatch.categoryName%22%3A%22%D0%A4%D0%B8%D0%B7%D0%B8%D0%BA%D0%B0%22%2C%22griffpatch.changeScroll%22%3A%22%D0%B8%D0%B7%D0%BC%D0%B5%D0%BD%D0%B8%D1%82%D1%8C%20%D1%81%D0%BA%D1%80%D0%BE%D0%BB%D0%BB%20%D0%BD%D0%B0%20x%3A%5Box%5D%20y%3A%5Boy%5D%22%2C%22griffpatch.changeVelocity%22%3A%22%D0%B8%D0%B7%D0%BC%D0%B5%D0%BD%D0%B8%D1%82%D1%8C%20%D1%81%D0%BA%D0%BE%D1%80%D0%BE%D1%81%D1%82%D1%8C%20%D0%BD%D0%B0%20sx%3A%5Bsx%5Dsy%3A%5Bsy%5D%20%22%2C%22griffpatch.disablePhysics%22%3A%22%D0%B2%D1%8B%D0%BA%D0%BB%D1%8E%D1%87%D0%B8%D1%82%D1%8C%20%D1%84%D0%B8%D0%B7%D0%B8%D0%BA%D1%83%20%D0%B4%D0%BB%D1%8F%20%D1%8D%D1%82%D0%BE%D0%B3%D0%BE%20%D1%81%D0%BF%D1%80%D0%B0%D0%B9%D1%82%D0%B0%22%2C%22griffpatch.doTick%22%3A%22%D1%88%D0%B0%D0%B3%D0%BD%D1%83%D1%82%D1%8C%20%D1%81%D0%B8%D0%BC%D1%83%D0%BB%D1%8F%D1%86%D0%B8%D1%8E%22%2C%22griffpatch.getAngVelocity%22%3A%22%D1%83%D0%B3%D0%BB%D0%BE%D0%B2%D0%B0%D1%8F%20%D1%81%D0%BA%D0%BE%D1%80%D0%BE%D1%81%D1%82%D1%8C%22%2C%22griffpatch.getDensity%22%3A%22%D0%BF%D0%BB%D0%BE%D1%82%D0%BD%D0%BE%D1%81%D1%82%D1%8C%22%2C%22griffpatch.getFriction%22%3A%22%D1%82%D1%80%D0%B5%D0%BD%D0%B8%D0%B5%22%2C%22griffpatch.getGravityX%22%3A%22%D0%B3%D1%80%D0%B0%D0%B2%D0%B8%D1%82%D0%B0%D1%86%D0%B8%D1%8F%20x%22%2C%22griffpatch.getGravityY%22%3A%22%D0%B3%D1%80%D0%B0%D0%B2%D0%B8%D1%82%D0%B0%D1%86%D0%B8%D1%8F%20y%22%2C%22griffpatch.getRestitution%22%3A%22%D1%83%D0%BF%D1%80%D1%83%D0%B3%D0%BE%D1%81%D1%82%D1%8C%22%2C%22griffpatch.getScrollX%22%3A%22%D1%81%D0%BA%D1%80%D0%BE%D0%BB%D0%BB%20x%22%2C%22griffpatch.getScrollY%22%3A%22%D1%81%D0%BA%D1%80%D0%BE%D0%BB%D0%BB%20y%22%2C%22griffpatch.getStatic%22%3A%22%D0%B7%D0%B0%D1%84%D0%B8%D0%BA%D1%81%D0%B8%D1%80%D0%BE%D0%B2%D0%B0%D0%BD%3F%22%2C%22griffpatch.getTickRate%22%3A%22%D1%81%D0%BA%D0%BE%D1%80%D0%BE%D1%81%D1%82%D1%8C%20%D1%81%D0%B8%D0%BC%D1%83%D0%BB%D1%8F%D1%86%D0%B8%D0%B8%22%2C%22griffpatch.getTouching%22%3A%22%D1%81%D0%BF%D0%B8%D1%81%D0%BE%D0%BA%20%D1%81%D0%BF%D1%80%D0%B0%D0%B9%D1%82%D0%BE%D0%B2%20%D0%BA%D0%B0%D1%81%D0%B0%D1%8E%D1%89%D0%B8%D1%85%D1%81%D1%8F%20%5Bwhere%5D%22%2C%22griffpatch.getVelocityX%22%3A%22%D1%81%D0%BA%D0%BE%D1%80%D0%BE%D1%81%D1%82%D1%8C%20x%22%2C%22griffpatch.getVelocityY%22%3A%22%D1%81%D0%BA%D0%BE%D1%80%D0%BE%D1%81%D1%82%D1%8C%20y%22%2C%22griffpatch.setAngVelocity%22%3A%22%D1%83%D1%81%D1%82%D0%B0%D0%BD%D0%BE%D0%B2%D0%B8%D1%82%D1%8C%20%D1%83%D0%B3%D0%BB%D0%BE%D0%B2%D1%83%D1%8E%20%D1%81%D0%BA%D0%BE%D1%80%D0%BE%D1%81%D1%82%D1%8C%20%D0%B2%20%5Bforce%5D%22%2C%22griffpatch.setDensity%22%3A%22%D1%83%D1%81%D1%82%D0%B0%D0%BD%D0%BE%D0%B2%D0%B8%D1%82%D1%8C%20%D0%BF%D0%BB%D0%BE%D1%82%D0%BD%D0%BE%D1%81%D1%82%D1%8C%20%D0%B2%20%5Bdensity%5D%22%2C%22griffpatch.setDensityValue%22%3A%22%D1%83%D1%81%D1%82%D0%B0%D0%BD%D0%BE%D0%B2%D0%B8%D1%82%D1%8C%20%D0%BF%D0%BB%D0%BE%D1%82%D0%BD%D0%BE%D1%81%D1%82%D1%8C%20%D0%B2%20%5Bdensity%5D%22%2C%22griffpatch.setFriction%22%3A%22%D1%83%D1%81%D1%82%D0%B0%D0%BD%D0%BE%D0%B2%D0%B8%D1%82%D1%8C%20%D1%82%D1%80%D0%B5%D0%BD%D0%B8%D0%B5%20%D0%B2%20%5Bfriction%5D%22%2C%22griffpatch.setFrictionValue%22%3A%22%D1%83%D1%81%D1%82%D0%B0%D0%BD%D0%BE%D0%B2%D0%B8%D1%82%D1%8C%20%D1%82%D1%80%D0%B5%D0%BD%D0%B8%D0%B5%20%D0%B2%20%5Bfriction%5D%22%2C%22griffpatch.setGravity%22%3A%22%D1%83%D1%81%D1%82%D0%B0%D0%BD%D0%BE%D0%B2%D0%B8%D1%82%D1%8C%20%D0%B3%D1%80%D0%B0%D0%B2%D0%B8%D1%82%D0%B0%D1%86%D0%B8%D1%8E%20%D0%B2%20x%3A%5Bgx%5D%20y%3A%5Bgy%5D%22%2C%22griffpatch.setPhysics%22%3A%22%D0%B2%D0%BA%D0%BB%D1%8E%D1%87%D0%B8%D1%82%D1%8C%20%D0%B4%D0%BB%D1%8F%20%5Bshape%5D%20%D1%80%D0%B5%D0%B6%D0%B8%D0%BC%20%5Bmode%5D%22%2C%22griffpatch.setPosition%22%3A%22%D0%BF%D0%B5%D1%80%D0%B5%D0%B9%D1%82%D0%B8%20%D0%B2%20x%3A%5Bx%5D%20y%3A%5By%5D%20%5Bspace%5D%22%2C%22griffpatch.setProperties%22%3A%22%D1%83%D1%81%D1%82%D0%B0%D0%BD%D0%BE%D0%B2%D0%B8%D1%82%D1%8C%20%D0%BF%D0%BB%D0%BE%D1%82%D0%BD%D0%BE%D1%81%D1%82%D1%8C%20%5Bdensity%5D%20%D1%82%D1%80%D0%B5%D0%BD%D0%B8%D0%B5%20%5Bfriction%5D%20%D1%83%D0%BF%D1%80%D1%83%D0%B3%D0%BE%D1%81%D1%82%D1%8C%20%5Brestitution%5D%22%2C%22griffpatch.setRestitution%22%3A%22%D1%83%D1%81%D1%82%D0%B0%D0%BD%D0%BE%D0%B2%D0%B8%D1%82%D1%8C%20%D1%83%D0%BF%D1%80%D1%83%D0%B3%D0%BE%D1%81%D1%82%D1%8C%20%D0%B2%20%5Brestitution%5D%22%2C%22griffpatch.setRestitutionValue%22%3A%22%D1%83%D1%81%D1%82%D0%B0%D0%BD%D0%BE%D0%B2%D0%B8%D1%82%D1%8C%20%D1%83%D0%BF%D1%80%D1%83%D0%B3%D0%BE%D1%81%D1%82%D1%8C%20%D0%B2%20%5Brestitution%5D%22%2C%22griffpatch.setScroll%22%3A%22%D1%83%D1%81%D1%82%D0%B0%D0%BD%D0%BE%D0%B2%D0%B8%D1%82%D1%8C%20%D1%81%D0%BA%D1%80%D0%BE%D0%BB%D0%BB%20%D0%B2%20x%3A%5Box%5D%20y%3A%5Boy%5D%22%2C%22griffpatch.setStage%22%3A%22%D0%B7%D0%B0%D0%B4%D0%B0%D1%82%D1%8C%20%D0%B3%D1%80%D0%B0%D0%BD%D0%B8%D1%86%D1%8B%20%D1%81%D1%86%D0%B5%D0%BD%D1%8B%20%D0%BA%D0%B0%D0%BA%20%5BstageType%5D%22%2C%22griffpatch.setStatic%22%3A%22%D1%83%D1%81%D1%82%D0%B0%D0%BD%D0%BE%D0%B2%D0%B8%D1%82%D1%8C%20%D1%82%D0%B8%D0%BF%20%D1%84%D0%B8%D0%BA%D1%81%D0%B0%D1%86%D0%B8%D0%B8%20%D0%BA%D0%B0%D0%BA%20%5Bstatic%5D%22%2C%22griffpatch.setTickRate%22%3A%22%D1%83%D1%81%D1%82%D0%B0%D0%BD%D0%BE%D0%B2%D0%B8%D1%82%D1%8C%20%D1%81%D0%BA%D0%BE%D1%80%D0%BE%D1%81%D1%82%D1%8C%20%D1%81%D0%B8%D0%BC%D1%83%D0%BB%D1%8F%D1%86%D0%B8%D0%B8%20%D0%B2%20%5Brate%5D%2F%D1%81%D0%B5%D0%BA%22%2C%22griffpatch.setVelocity%22%3A%22%D1%83%D1%81%D1%82%D0%B0%D0%BD%D0%BE%D0%B2%D0%B8%D1%82%D1%8C%20%D1%81%D0%BA%D0%BE%D1%80%D0%BE%D1%81%D1%82%D1%8C%20%D0%B2%20sx%3A%5Bsx%5Dsy%3A%5Bsy%5D%22%7D%2C%22zh-cn%22%3A%7B%22griffpatch.applyAngForce%22%3A%22%E6%97%8B%E8%BD%AC%5Bforce%5D%E5%BA%A6%22%2C%22griffpatch.applyForce%22%3A%22%E5%9C%A8%E6%96%B9%E5%90%91%5Bdir%5D%E5%A2%9E%E5%8A%A0%E4%B8%80%E4%B8%AA%E5%A4%A7%E5%B0%8F%E4%B8%BA%5Bforce%5D%E7%9A%84%E5%8A%9B%22%2C%22griffpatch.categoryName%22%3A%22%E7%89%A9%E7%90%86%E5%BC%95%E6%93%8E%22%2C%22griffpatch.changeScroll%22%3A%22%E8%BE%B9%E7%95%8Cx%E5%A2%9E%E5%8A%A0%5Box%5D%20y%E5%A2%9E%E5%8A%A0%5Boy%5D%22%2C%22griffpatch.changeVelocity%22%3A%22%E8%A7%92%E8%89%B2%E9%87%8D%E5%8A%9B%E6%96%B9%E5%90%91%E5%A2%9E%E5%8A%A0%20sx%5Bsx%5D%20sy%5Bsy%5D%22%2C%22griffpatch.disablePhysics%22%3A%22%E5%8F%96%E6%B6%88%E8%BF%99%E4%B8%AA%E8%A7%92%E8%89%B2%E7%9A%84%E7%89%A9%E7%90%86%E6%95%88%E6%9E%9C%22%2C%22griffpatch.doTick%22%3A%22%E9%80%90%E6%AD%A5%E6%A8%A1%E6%8B%9F%22%2C%22griffpatch.getAngVelocity%22%3A%22%E8%A7%92%E9%80%9F%E5%BA%A6%22%2C%22griffpatch.getDensity%22%3A%22%E5%AF%86%E5%BA%A6%22%2C%22griffpatch.getFriction%22%3A%22%E6%91%A9%E6%93%A6%E5%8A%9B%22%2C%22griffpatch.getGravityX%22%3A%22%E9%87%8D%E5%8A%9B%E6%96%B9%E5%90%91x%E5%9D%90%E6%A0%87%22%2C%22griffpatch.getGravityY%22%3A%22%E9%87%8D%E5%8A%9B%E6%96%B9%E5%90%91y%E5%9D%90%E6%A0%87%22%2C%22griffpatch.getRestitution%22%3A%22%E5%BC%B9%E6%80%A7%22%2C%22griffpatch.getScrollX%22%3A%22x%E8%BE%B9%E7%95%8C%22%2C%22griffpatch.getScrollY%22%3A%22y%E8%BE%B9%E7%95%8C%22%2C%22griffpatch.getStatic%22%3A%22%E4%B8%8D%E8%83%BD%E7%A7%BB%E5%8A%A8%EF%BC%9F%22%2C%22griffpatch.getTickRate%22%3A%22%E6%AF%8F%E7%A7%92%E6%A8%A1%E6%8B%9F%E6%AC%A1%E6%95%B0%22%2C%22griffpatch.getTouching%22%3A%22%E8%A7%92%E8%89%B2%5Bwhere%5D%E6%89%80%E6%8E%A5%E8%A7%A6%E7%9A%84%E5%85%B6%E4%BB%96%E8%A7%92%E8%89%B2%22%2C%22griffpatch.getVelocityX%22%3A%22%E8%A7%92%E8%89%B2%E9%87%8D%E5%8A%9Bx%E6%96%B9%E5%90%91%22%2C%22griffpatch.getVelocityY%22%3A%22%E8%A7%92%E8%89%B2%E9%87%8D%E5%8A%9By%E6%96%B9%E5%90%91%22%2C%22griffpatch.setAngVelocity%22%3A%22%E8%AE%BE%E7%BD%AE%E8%A7%92%E8%89%B2%E8%A7%92%E9%80%9F%E5%BA%A6%E4%B8%BA%5Bforce%5D%22%2C%22griffpatch.setDensity%22%3A%22%E8%AE%BE%E7%BD%AE%E5%AF%86%E5%BA%A6%E4%B8%BA%5Bdensity%5D%22%2C%22griffpatch.setDensityValue%22%3A%22%E8%AE%BE%E7%BD%AE%E5%AF%86%E5%BA%A6%E4%B8%BA%5Bdensity%5D%20%22%2C%22griffpatch.setFriction%22%3A%22%E8%AE%BE%E7%BD%AE%E6%91%A9%E6%93%A6%E5%8A%9B%E4%B8%BA%5Bfriction%5D%22%2C%22griffpatch.setFrictionValue%22%3A%22%E8%AE%BE%E7%BD%AE%E6%91%A9%E6%93%A6%E5%8A%9B%E4%B8%BA%5Bfriction%5D%20%22%2C%22griffpatch.setGravity%22%3A%22%E8%AE%BE%E7%BD%AE%E9%87%8D%E5%8A%9B%E6%96%B9%E5%90%91%E4%B8%BAx%5Bgx%5D%20y%5Bgy%5D%22%2C%22griffpatch.setPhysics%22%3A%22%E8%AE%BE%E7%BD%AE%5Bshape%5D%E7%9A%84%E7%89%A9%E7%90%86%E6%A8%A1%E5%BC%8F%E4%B8%BA%5Bmode%5D%22%2C%22griffpatch.setPosition%22%3A%22%E5%9C%A8%5Bspace%5D%E5%89%8D%E5%BE%80x%5Bx%5D%20y%5By%5D%22%2C%22griffpatch.setProperties%22%3A%22%E8%AE%BE%E7%BD%AE%E5%AF%86%E5%BA%A6%E4%B8%BA%5Bdensity%5D%20%E6%91%A9%E6%93%A6%E5%8A%9B%E4%B8%BA%5Bfriction%5D%20%E5%BC%B9%E6%80%A7%E4%B8%BA%5Brestitution%5D%22%2C%22griffpatch.setRestitution%22%3A%22%E8%AE%BE%E7%BD%AE%E5%BC%B9%E6%80%A7%E4%B8%BA%5Brestitution%5D%22%2C%22griffpatch.setRestitutionValue%22%3A%22%E8%AE%BE%E7%BD%AE%E5%BC%B9%E6%80%A7%E4%B8%BA%5Brestitution%5D%20%22%2C%22griffpatch.setScroll%22%3A%22%E8%AE%BE%E7%BD%AE%E8%BE%B9%E7%95%8C%E4%B8%BA%20x%5Box%5D%20y%5Boy%5D%22%2C%22griffpatch.setStage%22%3A%22%E8%AE%BE%E7%BD%AE%E8%88%9E%E5%8F%B0%E7%B1%BB%E5%9E%8B%E4%B8%BA%5BstageType%5D%22%2C%22griffpatch.setStatic%22%3A%22%E8%AE%BE%E7%BD%AE%E7%A7%BB%E5%8A%A8%E6%A8%A1%E5%BC%8F%E4%B8%BA%5Bstatic%5D%22%2C%22griffpatch.setTickRate%22%3A%22%E8%AE%BE%E7%BD%AE%E6%AF%8F%E7%A7%92%E6%A8%A1%E6%8B%9F%E6%AC%A1%E6%95%B0%E4%B8%BA%5Brate%5D%22%2C%22griffpatch.setVelocity%22%3A%22%E8%AE%BE%E7%BD%AE%E8%A7%92%E8%89%B2%E9%87%8D%E5%8A%9B%E6%96%B9%E5%90%91%E4%B8%BA%20sx%5Bsx%5D%20sy%20%5Bsy%5D%22%7D%7D)%3B%2F*%20end%20generated%20l10n%20code%20*%2F(function%20(Scratch)%20%7B%0A%20%20%22use%20strict%22%3B%0A%0A%20%20if%20(!Scratch.extensions.unsandboxed)%20%7B%0A%20%20%20%20throw%20new%20Error(%22Box2D%20must%20be%20run%20unsandboxed%22)%3B%0A%20%20%7D%0A%0A%20%20%2F%2F%20First%20we%20need%20to%20load%20the%20Box2D%20physics%20library%20that%20this%20extension%20uses.%0A%20%20%2F%2F%20It's%20not%20currently%20advised%20to%20load%20more%20scripts%20in%20custom%20extensions%2C%20so%20we%20copied%20and%20pasted%0A%20%20%2F%2F%20the%20source%20code%20below.%20Yes%2C%20this%20is%20really%20ugly.%0A%0A%20%20%2F*!%0A%20%20%20*%20Copyright%20(c)%202006-2007%20Erin%20Catto%20http%3A%2F%2Fwww.gphysics.com%0A%20%20%20*%0A%20%20%20*%20This%20software%20is%20provided%20'as-is'%2C%20without%20any%20express%20or%20implied%0A%20%20%20*%20warranty.%20%20In%20no%20event%20will%20the%20authors%20be%20held%20liable%20for%20any%20damages%0A%20%20%20*%20arising%20from%20the%20use%20of%20this%20software.%0A%20%20%20*%20Permission%20is%20granted%20to%20anyone%20to%20use%20this%20software%20for%20any%20purpose%2C%0A%20%20%20*%20including%20commercial%20applications%2C%20and%20to%20alter%20it%20and%20redistribute%20it%0A%20%20%20*%20freely%2C%20subject%20to%20the%20following%20restrictions%3A%0A%20%20%20*%201.%20The%20origin%20of%20this%20software%20must%20not%20be%20misrepresented%3B%20you%20must%20not%0A%20%20%20*%20claim%20that%20you%20wrote%20the%20original%20software.%20If%20you%20use%20this%20software%0A%20%20%20*%20in%20a%20product%2C%20an%20acknowledgment%20in%20the%20product%20documentation%20would%20be%0A%20%20%20*%20appreciated%20but%20is%20not%20required.%0A%20%20%20*%202.%20Altered%20source%20versions%20must%20be%20plainly%20marked%20as%20such%2C%20and%20must%20not%20be%0A%20%20%20*%20misrepresented%20as%20being%20the%20original%20software.%0A%20%20%20*%203.%20This%20notice%20may%20not%20be%20removed%20or%20altered%20from%20any%20source%20distribution.%0A%20%20%20*%2F%0A%0A%20%20var%20Box2D%20%3D%20%7B%7D%3B%0A%20%20(function%20(a2j%2C%20undefined)%20%7B%0A%20%20%20%20function%20emptyFn()%20%7B%7D%0A%20%20%20%20a2j.inherit%20%3D%20function%20(cls%2C%20base)%20%7B%0A%20%20%20%20%20%20var%20tmpCtr%20%3D%20cls%3B%0A%20%20%20%20%20%20emptyFn.prototype%20%3D%20base.prototype%3B%0A%20%20%20%20%20%20cls.prototype%20%3D%20new%20emptyFn()%3B%0A%20%20%20%20%20%20cls.prototype.constructor%20%3D%20tmpCtr%3B%0A%20%20%20%20%7D%3B%0A%0A%20%20%20%20a2j.generateCallback%20%3D%20function%20generateCallback(context%2C%20cb)%20%7B%0A%20%20%20%20%20%20return%20function%20()%20%7B%0A%20%20%20%20%20%20%20%20cb.apply(context%2C%20arguments)%3B%0A%20%20%20%20%20%20%7D%3B%0A%20%20%20%20%7D%3B%0A%0A%20%20%20%20a2j.NVector%20%3D%20function%20NVector(length)%20%7B%0A%20%20%20%20%20%20if%20(length%20%3D%3D%3D%20undefined)%20length%20%3D%200%3B%0A%20%20%20%20%20%20var%20tmp%20%3D%20new%20Array(length%20%7C%7C%200)%3B%0A%20%20%20%20%20%20for%20(var%20i%20%3D%200%3B%20i%20%3C%20length%3B%20%2B%2Bi)%20tmp%5Bi%5D%20%3D%200%3B%0A%20%20%20%20%20%20return%20tmp%3B%0A%20%20%20%20%7D%3B%0A%0A%20%20%20%20a2j.is%20%3D%20function%20is(o1%2C%20o2)%20%7B%0A%20%20%20%20%20%20if%20(o1%20%3D%3D%3D%20null)%20return%20false%3B%0A%20%20%20%20%20%20if%20(o2%20instanceof%20Function%20%26%26%20o1%20instanceof%20o2)%20return%20true%3B%0A%20%20%20%20%20%20if%20(%0A%20%20%20%20%20%20%20%20o1.constructor.__implements%20!%3D%20undefined%20%26%26%0A%20%20%20%20%20%20%20%20o1.constructor.__implements%5Bo2%5D%0A%20%20%20%20%20%20)%0A%20%20%20%20%20%20%20%20return%20true%3B%0A%20%20%20%20%20%20return%20false%3B%0A%20%20%20%20%7D%3B%0A%0A%20%20%20%20a2j.parseUInt%20%3D%20function%20(v)%20%7B%0A%20%20%20%20%20%20return%20Math.abs(parseInt(v))%3B%0A%20%20%20%20%7D%3B%0A%20%20%7D)(Box2D)%3B%0A%0A%20%20%2F%2F%23TODO%20remove%20assignments%20from%20global%20namespace%0A%20%20var%20Vector%20%3D%20Array%3B%0A%20%20var%20Vector_a2j_Number%20%3D%20Box2D.NVector%3B%0A%20%20%2F%2Fpackage%20structure%0A%20%20if%20(typeof%20Box2D%20%3D%3D%3D%20%22undefined%22)%20Box2D%20%3D%20%7B%7D%3B%0A%20%20if%20(typeof%20Box2D.Collision%20%3D%3D%3D%20%22undefined%22)%20Box2D.Collision%20%3D%20%7B%7D%3B%0A%20%20if%20(typeof%20Box2D.Collision.Shapes%20%3D%3D%3D%20%22undefined%22)%0A%20%20%20%20Box2D.Collision.Shapes%20%3D%20%7B%7D%3B%0A%20%20if%20(typeof%20Box2D.Common%20%3D%3D%3D%20%22undefined%22)%20Box2D.Common%20%3D%20%7B%7D%3B%0A%20%20if%20(typeof%20Box2D.Common.Math%20%3D%3D%3D%20%22undefined%22)%20Box2D.Common.Math%20%3D%20%7B%7D%3B%0A%20%20if%20(typeof%20Box2D.Dynamics%20%3D%3D%3D%20%22undefined%22)%20Box2D.Dynamics%20%3D%20%7B%7D%3B%0A%20%20if%20(typeof%20Box2D.Dynamics.Contacts%20%3D%3D%3D%20%22undefined%22)%0A%20%20%20%20Box2D.Dynamics.Contacts%20%3D%20%7B%7D%3B%0A%20%20if%20(typeof%20Box2D.Dynamics.Controllers%20%3D%3D%3D%20%22undefined%22)%0A%20%20%20%20Box2D.Dynamics.Controllers%20%3D%20%7B%7D%3B%0A%20%20if%20(typeof%20Box2D.Dynamics.Joints%20%3D%3D%3D%20%22undefined%22)%20Box2D.Dynamics.Joints%20%3D%20%7B%7D%3B%0A%20%20%2F%2Fpre-definitions%0A%20%20(function%20()%20%7B%0A%20%20%20%20Box2D.Collision.IBroadPhase%20%3D%20%22Box2D.Collision.IBroadPhase%22%3B%0A%0A%20%20%20%20function%20b2AABB()%20%7B%0A%20%20%20%20%20%20b2AABB.b2AABB.apply(this%2C%20arguments)%3B%0A%20%20%20%20%7D%0A%20%20%20%20Box2D.Collision.b2AABB%20%3D%20b2AABB%3B%0A%0A%20%20%20%20function%20b2Bound()%20%7B%0A%20%20%20%20%20%20b2Bound.b2Bound.apply(this%2C%20arguments)%3B%0A%20%20%20%20%7D%0A%20%20%20%20Box2D.Collision.b2Bound%20%3D%20b2Bound%3B%0A%0A%20%20%20%20function%20b2BoundValues()%20%7B%0A%20%20%20%20%20%20b2BoundValues.b2BoundValues.apply(this%2C%20arguments)%3B%0A%20%20%20%20%20%20if%20(this.constructor%20%3D%3D%3D%20b2BoundValues)%0A%20%20%20%20%20%20%20%20this.b2BoundValues.apply(this%2C%20arguments)%3B%0A%20%20%20%20%7D%0A%20%20%20%20Box2D.Collision.b2BoundValues%20%3D%20b2BoundValues%3B%0A%0A%20%20%20%20function%20b2Collision()%20%7B%0A%20%20%20%20%20%20b2Collision.b2Collision.apply(this%2C%20arguments)%3B%0A%20%20%20%20%7D%0A%20%20%20%20Box2D.Collision.b2Collision%20%3D%20b2Collision%3B%0A%0A%20%20%20%20function%20b2ContactID()%20%7B%0A%20%20%20%20%20%20b2ContactID.b2ContactID.apply(this%2C%20arguments)%3B%0A%20%20%20%20%20%20if%20(this.constructor%20%3D%3D%3D%20b2ContactID)%0A%20%20%20%20%20%20%20%20this.b2ContactID.apply(this%2C%20arguments)%3B%0A%20%20%20%20%7D%0A%20%20%20%20Box2D.Collision.b2ContactID%20%3D%20b2ContactID%3B%0A%0A%20%20%20%20function%20b2ContactPoint()%20%7B%0A%20%20%20%20%20%20b2ContactPoint.b2ContactPoint.apply(this%2C%20arguments)%3B%0A%20%20%20%20%7D%0A%20%20%20%20Box2D.Collision.b2ContactPoint%20%3D%20b2ContactPoint%3B%0A%0A%20%20%20%20function%20b2Distance()%20%7B%0A%20%20%20%20%20%20b2Distance.b2Distance.apply(this%2C%20arguments)%3B%0A%20%20%20%20%7D%0A%20%20%20%20Box2D.Collision.b2Distance%20%3D%20b2Distance%3B%0A%0A%20%20%20%20function%20b2DistanceInput()%20%7B%0A%20%20%20%20%20%20b2DistanceInput.b2DistanceInput.apply(this%2C%20arguments)%3B%0A%20%20%20%20%7D%0A%20%20%20%20Box2D.Collision.b2DistanceInput%20%3D%20b2DistanceInput%3B%0A%0A%20%20%20%20function%20b2DistanceOutput()%20%7B%0A%20%20%20%20%20%20b2DistanceOutput.b2DistanceOutput.apply(this%2C%20arguments)%3B%0A%20%20%20%20%7D%0A%20%20%20%20Box2D.Collision.b2DistanceOutput%20%3D%20b2DistanceOutput%3B%0A%0A%20%20%20%20function%20b2DistanceProxy()%20%7B%0A%20%20%20%20%20%20b2DistanceProxy.b2DistanceProxy.apply(this%2C%20arguments)%3B%0A%20%20%20%20%7D%0A%20%20%20%20Box2D.Collision.b2DistanceProxy%20%3D%20b2DistanceProxy%3B%0A%0A%20%20%20%20function%20b2DynamicTree()%20%7B%0A%20%20%20%20%20%20b2DynamicTree.b2DynamicTree.apply(this%2C%20arguments)%3B%0A%20%20%20%20%20%20if%20(this.constructor%20%3D%3D%3D%20b2DynamicTree)%0A%20%20%20%20%20%20%20%20this.b2DynamicTree.apply(this%2C%20arguments)%3B%0A%20%20%20%20%7D%0A%20%20%20%20Box2D.Collision.b2DynamicTree%20%3D%20b2DynamicTree%3B%0A%0A%20%20%20%20function%20b2DynamicTreeBroadPhase()%20%7B%0A%20%20%20%20%20%20b2DynamicTreeBroadPhase.b2DynamicTreeBroadPhase.apply(this%2C%20arguments)%3B%0A%20%20%20%20%7D%0A%20%20%20%20Box2D.Collision.b2DynamicTreeBroadPhase%20%3D%20b2DynamicTreeBroadPhase%3B%0A%0A%20%20%20%20function%20b2DynamicTreeNode()%20%7B%0A%20%20%20%20%20%20b2DynamicTreeNode.b2DynamicTreeNode.apply(this%2C%20arguments)%3B%0A%20%20%20%20%7D%0A%20%20%20%20Box2D.Collision.b2DynamicTreeNode%20%3D%20b2DynamicTreeNode%3B%0A%0A%20%20%20%20function%20b2DynamicTreePair()%20%7B%0A%20%20%20%20%20%20b2DynamicTreePair.b2DynamicTreePair.apply(this%2C%20arguments)%3B%0A%20%20%20%20%7D%0A%20%20%20%20Box2D.Collision.b2DynamicTreePair%20%3D%20b2DynamicTreePair%3B%0A%0A%20%20%20%20function%20b2Manifold()%20%7B%0A%20%20%20%20%20%20b2Manifold.b2Manifold.apply(this%2C%20arguments)%3B%0A%20%20%20%20%20%20if%20(this.constructor%20%3D%3D%3D%20b2Manifold)%0A%20%20%20%20%20%20%20%20this.b2Manifold.apply(this%2C%20arguments)%3B%0A%20%20%20%20%7D%0A%20%20%20%20Box2D.Collision.b2Manifold%20%3D%20b2Manifold%3B%0A%0A%20%20%20%20function%20b2ManifoldPoint()%20%7B%0A%20%20%20%20%20%20b2ManifoldPoint.b2ManifoldPoint.apply(this%2C%20arguments)%3B%0A%20%20%20%20%20%20if%20(this.constructor%20%3D%3D%3D%20b2ManifoldPoint)%0A%20%20%20%20%20%20%20%20this.b2ManifoldPoint.apply(this%2C%20arguments)%3B%0A%20%20%20%20%7D%0A%20%20%20%20Box2D.Collision.b2ManifoldPoint%20%3D%20b2ManifoldPoint%3B%0A%0A%20%20%20%20function%20b2Point()%20%7B%0A%20%20%20%20%20%20b2Point.b2Point.apply(this%2C%20arguments)%3B%0A%20%20%20%20%7D%0A%20%20%20%20Box2D.Collision.b2Point%20%3D%20b2Point%3B%0A%0A%20%20%20%20function%20b2RayCastInput()%20%7B%0A%20%20%20%20%20%20b2RayCastInput.b2RayCastInput.apply(this%2C%20arguments)%3B%0A%20%20%20%20%20%20if%20(this.constructor%20%3D%3D%3D%20b2RayCastInput)%0A%20%20%20%20%20%20%20%20this.b2RayCastInput.apply(this%2C%20arguments)%3B%0A%20%20%20%20%7D%0A%20%20%20%20Box2D.Collision.b2RayCastInput%20%3D%20b2RayCastInput%3B%0A%0A%20%20%20%20function%20b2RayCastOutput()%20%7B%0A%20%20%20%20%20%20b2RayCastOutput.b2RayCastOutput.apply(this%2C%20arguments)%3B%0A%20%20%20%20%7D%0A%20%20%20%20Box2D.Collision.b2RayCastOutput%20%3D%20b2RayCastOutput%3B%0A%0A%20%20%20%20function%20b2Segment()%20%7B%0A%20%20%20%20%20%20b2Segment.b2Segment.apply(this%2C%20arguments)%3B%0A%20%20%20%20%7D%0A%20%20%20%20Box2D.Collision.b2Segment%20%3D%20b2Segment%3B%0A%0A%20%20%20%20function%20b2SeparationFunction()%20%7B%0A%20%20%20%20%20%20b2SeparationFunction.b2SeparationFunction.apply(this%2C%20arguments)%3B%0A%20%20%20%20%7D%0A%20%20%20%20Box2D.Collision.b2SeparationFunction%20%3D%20b2SeparationFunction%3B%0A%0A%20%20%20%20function%20b2Simplex()%20%7B%0A%20%20%20%20%20%20b2Simplex.b2Simplex.apply(this%2C%20arguments)%3B%0A%20%20%20%20%20%20if%20(this.constructor%20%3D%3D%3D%20b2Simplex)%20this.b2Simplex.apply(this%2C%20arguments)%3B%0A%20%20%20%20%7D%0A%20%20%20%20Box2D.Collision.b2Simplex%20%3D%20b2Simplex%3B%0A%0A%20%20%20%20function%20b2SimplexCache()%20%7B%0A%20%20%20%20%20%20b2SimplexCache.b2SimplexCache.apply(this%2C%20arguments)%3B%0A%20%20%20%20%7D%0A%20%20%20%20Box2D.Collision.b2SimplexCache%20%3D%20b2SimplexCache%3B%0A%0A%20%20%20%20function%20b2SimplexVertex()%20%7B%0A%20%20%20%20%20%20b2SimplexVertex.b2SimplexVertex.apply(this%2C%20arguments)%3B%0A%20%20%20%20%7D%0A%20%20%20%20Box2D.Collision.b2SimplexVertex%20%3D%20b2SimplexVertex%3B%0A%0A%20%20%20%20function%20b2TimeOfImpact()%20%7B%0A%20%20%20%20%20%20b2TimeOfImpact.b2TimeOfImpact.apply(this%2C%20arguments)%3B%0A%20%20%20%20%7D%0A%20%20%20%20Box2D.Collision.b2TimeOfImpact%20%3D%20b2TimeOfImpact%3B%0A%0A%20%20%20%20function%20b2TOIInput()%20%7B%0A%20%20%20%20%20%20b2TOIInput.b2TOIInput.apply(this%2C%20arguments)%3B%0A%20%20%20%20%7D%0A%20%20%20%20Box2D.Collision.b2TOIInput%20%3D%20b2TOIInput%3B%0A%0A%20%20%20%20function%20b2WorldManifold()%20%7B%0A%20%20%20%20%20%20b2WorldManifold.b2WorldManifold.apply(this%2C%20arguments)%3B%0A%20%20%20%20%20%20if%20(this.constructor%20%3D%3D%3D%20b2WorldManifold)%0A%20%20%20%20%20%20%20%20this.b2WorldManifold.apply(this%2C%20arguments)%3B%0A%20%20%20%20%7D%0A%20%20%20%20Box2D.Collision.b2WorldManifold%20%3D%20b2WorldManifold%3B%0A%0A%20%20%20%20function%20ClipVertex()%20%7B%0A%20%20%20%20%20%20ClipVertex.ClipVertex.apply(this%2C%20arguments)%3B%0A%20%20%20%20%7D%0A%20%20%20%20Box2D.Collision.ClipVertex%20%3D%20ClipVertex%3B%0A%0A%20%20%20%20function%20Features()%20%7B%0A%20%20%20%20%20%20Features.Features.apply(this%2C%20arguments)%3B%0A%20%20%20%20%7D%0A%20%20%20%20Box2D.Collision.Features%20%3D%20Features%3B%0A%0A%20%20%20%20function%20b2CircleShape()%20%7B%0A%20%20%20%20%20%20b2CircleShape.b2CircleShape.apply(this%2C%20arguments)%3B%0A%20%20%20%20%20%20if%20(this.constructor%20%3D%3D%3D%20b2CircleShape)%0A%20%20%20%20%20%20%20%20this.b2CircleShape.apply(this%2C%20arguments)%3B%0A%20%20%20%20%7D%0A%20%20%20%20Box2D.Collision.Shapes.b2CircleShape%20%3D%20b2CircleShape%3B%0A%0A%20%20%20%20function%20b2EdgeChainDef()%20%7B%0A%20%20%20%20%20%20b2EdgeChainDef.b2EdgeChainDef.apply(this%2C%20arguments)%3B%0A%20%20%20%20%20%20if%20(this.constructor%20%3D%3D%3D%20b2EdgeChainDef)%0A%20%20%20%20%20%20%20%20this.b2EdgeChainDef.apply(this%2C%20arguments)%3B%0A%20%20%20%20%7D%0A%20%20%20%20Box2D.Collision.Shapes.b2EdgeChainDef%20%3D%20b2EdgeChainDef%3B%0A%0A%20%20%20%20function%20b2EdgeShape()%20%7B%0A%20%20%20%20%20%20b2EdgeShape.b2EdgeShape.apply(this%2C%20arguments)%3B%0A%20%20%20%20%20%20if%20(this.constructor%20%3D%3D%3D%20b2EdgeShape)%0A%20%20%20%20%20%20%20%20this.b2EdgeShape.apply(this%2C%20arguments)%3B%0A%20%20%20%20%7D%0A%20%20%20%20Box2D.Collision.Shapes.b2EdgeShape%20%3D%20b2EdgeShape%3B%0A%0A%20%20%20%20function%20b2MassData()%20%7B%0A%20%20%20%20%20%20b2MassData.b2MassData.apply(this%2C%20arguments)%3B%0A%20%20%20%20%7D%0A%20%20%20%20Box2D.Collision.Shapes.b2MassData%20%3D%20b2MassData%3B%0A%0A%20%20%20%20function%20b2PolygonShape()%20%7B%0A%20%20%20%20%20%20b2PolygonShape.b2PolygonShape.apply(this%2C%20arguments)%3B%0A%20%20%20%20%20%20if%20(this.constructor%20%3D%3D%3D%20b2PolygonShape)%0A%20%20%20%20%20%20%20%20this.b2PolygonShape.apply(this%2C%20arguments)%3B%0A%20%20%20%20%7D%0A%20%20%20%20Box2D.Collision.Shapes.b2PolygonShape%20%3D%20b2PolygonShape%3B%0A%0A%20%20%20%20function%20b2Shape()%20%7B%0A%20%20%20%20%20%20b2Shape.b2Shape.apply(this%2C%20arguments)%3B%0A%20%20%20%20%20%20if%20(this.constructor%20%3D%3D%3D%20b2Shape)%20this.b2Shape.apply(this%2C%20arguments)%3B%0A%20%20%20%20%7D%0A%20%20%20%20Box2D.Collision.Shapes.b2Shape%20%3D%20b2Shape%3B%0A%20%20%20%20Box2D.Common.b2internal%20%3D%20%22Box2D.Common.b2internal%22%3B%0A%0A%20%20%20%20function%20b2Color()%20%7B%0A%20%20%20%20%20%20b2Color.b2Color.apply(this%2C%20arguments)%3B%0A%20%20%20%20%20%20if%20(this.constructor%20%3D%3D%3D%20b2Color)%20this.b2Color.apply(this%2C%20arguments)%3B%0A%20%20%20%20%7D%0A%20%20%20%20Box2D.Common.b2Color%20%3D%20b2Color%3B%0A%0A%20%20%20%20function%20b2Settings()%20%7B%0A%20%20%20%20%20%20b2Settings.b2Settings.apply(this%2C%20arguments)%3B%0A%20%20%20%20%7D%0A%20%20%20%20Box2D.Common.b2Settings%20%3D%20b2Settings%3B%0A%0A%20%20%20%20function%20b2Mat22()%20%7B%0A%20%20%20%20%20%20b2Mat22.b2Mat22.apply(this%2C%20arguments)%3B%0A%20%20%20%20%20%20if%20(this.constructor%20%3D%3D%3D%20b2Mat22)%20this.b2Mat22.apply(this%2C%20arguments)%3B%0A%20%20%20%20%7D%0A%20%20%20%20Box2D.Common.Math.b2Mat22%20%3D%20b2Mat22%3B%0A%0A%20%20%20%20function%20b2Mat33()%20%7B%0A%20%20%20%20%20%20b2Mat33.b2Mat33.apply(this%2C%20arguments)%3B%0A%20%20%20%20%20%20if%20(this.constructor%20%3D%3D%3D%20b2Mat33)%20this.b2Mat33.apply(this%2C%20arguments)%3B%0A%20%20%20%20%7D%0A%20%20%20%20Box2D.Common.Math.b2Mat33%20%3D%20b2Mat33%3B%0A%0A%20%20%20%20function%20b2Math()%20%7B%0A%20%20%20%20%20%20b2Math.b2Math.apply(this%2C%20arguments)%3B%0A%20%20%20%20%7D%0A%20%20%20%20Box2D.Common.Math.b2Math%20%3D%20b2Math%3B%0A%0A%20%20%20%20function%20b2Sweep()%20%7B%0A%20%20%20%20%20%20b2Sweep.b2Sweep.apply(this%2C%20arguments)%3B%0A%20%20%20%20%7D%0A%20%20%20%20Box2D.Common.Math.b2Sweep%20%3D%20b2Sweep%3B%0A%0A%20%20%20%20function%20b2Transform()%20%7B%0A%20%20%20%20%20%20b2Transform.b2Transform.apply(this%2C%20arguments)%3B%0A%20%20%20%20%20%20if%20(this.constructor%20%3D%3D%3D%20b2Transform)%0A%20%20%20%20%20%20%20%20this.b2Transform.apply(this%2C%20arguments)%3B%0A%20%20%20%20%7D%0A%20%20%20%20Box2D.Common.Math.b2Transform%20%3D%20b2Transform%3B%0A%0A%20%20%20%20function%20b2Vec2()%20%7B%0A%20%20%20%20%20%20b2Vec2.b2Vec2.apply(this%2C%20arguments)%3B%0A%20%20%20%20%20%20if%20(this.constructor%20%3D%3D%3D%20b2Vec2)%20this.b2Vec2.apply(this%2C%20arguments)%3B%0A%20%20%20%20%7D%0A%20%20%20%20Box2D.Common.Math.b2Vec2%20%3D%20b2Vec2%3B%0A%0A%20%20%20%20function%20b2Vec3()%20%7B%0A%20%20%20%20%20%20b2Vec3.b2Vec3.apply(this%2C%20arguments)%3B%0A%20%20%20%20%20%20if%20(this.constructor%20%3D%3D%3D%20b2Vec3)%20this.b2Vec3.apply(this%2C%20arguments)%3B%0A%20%20%20%20%7D%0A%20%20%20%20Box2D.Common.Math.b2Vec3%20%3D%20b2Vec3%3B%0A%0A%20%20%20%20function%20b2Body()%20%7B%0A%20%20%20%20%20%20b2Body.b2Body.apply(this%2C%20arguments)%3B%0A%20%20%20%20%20%20if%20(this.constructor%20%3D%3D%3D%20b2Body)%20this.b2Body.apply(this%2C%20arguments)%3B%0A%20%20%20%20%7D%0A%20%20%20%20Box2D.Dynamics.b2Body%20%3D%20b2Body%3B%0A%0A%20%20%20%20function%20b2BodyDef()%20%7B%0A%20%20%20%20%20%20b2BodyDef.b2BodyDef.apply(this%2C%20arguments)%3B%0A%20%20%20%20%20%20if%20(this.constructor%20%3D%3D%3D%20b2BodyDef)%20this.b2BodyDef.apply(this%2C%20arguments)%3B%0A%20%20%20%20%7D%0A%20%20%20%20Box2D.Dynamics.b2BodyDef%20%3D%20b2BodyDef%3B%0A%0A%20%20%20%20function%20b2ContactFilter()%20%7B%0A%20%20%20%20%20%20b2ContactFilter.b2ContactFilter.apply(this%2C%20arguments)%3B%0A%20%20%20%20%7D%0A%20%20%20%20Box2D.Dynamics.b2ContactFilter%20%3D%20b2ContactFilter%3B%0A%0A%20%20%20%20function%20b2ContactImpulse()%20%7B%0A%20%20%20%20%20%20b2ContactImpulse.b2ContactImpulse.apply(this%2C%20arguments)%3B%0A%20%20%20%20%7D%0A%20%20%20%20Box2D.Dynamics.b2ContactImpulse%20%3D%20b2ContactImpulse%3B%0A%0A%20%20%20%20function%20b2ContactListener()%20%7B%0A%20%20%20%20%20%20b2ContactListener.b2ContactListener.apply(this%2C%20arguments)%3B%0A%20%20%20%20%7D%0A%20%20%20%20Box2D.Dynamics.b2ContactListener%20%3D%20b2ContactListener%3B%0A%0A%20%20%20%20function%20b2ContactManager()%20%7B%0A%20%20%20%20%20%20b2ContactManager.b2ContactManager.apply(this%2C%20arguments)%3B%0A%20%20%20%20%20%20if%20(this.constructor%20%3D%3D%3D%20b2ContactManager)%0A%20%20%20%20%20%20%20%20this.b2ContactManager.apply(this%2C%20arguments)%3B%0A%20%20%20%20%7D%0A%20%20%20%20Box2D.Dynamics.b2ContactManager%20%3D%20b2ContactManager%3B%0A%0A%20%20%20%20function%20b2DebugDraw()%20%7B%0A%20%20%20%20%20%20b2DebugDraw.b2DebugDraw.apply(this%2C%20arguments)%3B%0A%20%20%20%20%20%20if%20(this.constructor%20%3D%3D%3D%20b2DebugDraw)%0A%20%20%20%20%20%20%20%20this.b2DebugDraw.apply(this%2C%20arguments)%3B%0A%20%20%20%20%7D%0A%20%20%20%20Box2D.Dynamics.b2DebugDraw%20%3D%20b2DebugDraw%3B%0A%0A%20%20%20%20function%20b2DestructionListener()%20%7B%0A%20%20%20%20%20%20b2DestructionListener.b2DestructionListener.apply(this%2C%20arguments)%3B%0A%20%20%20%20%7D%0A%20%20%20%20Box2D.Dynamics.b2DestructionListener%20%3D%20b2DestructionListener%3B%0A%0A%20%20%20%20function%20b2FilterData()%20%7B%0A%20%20%20%20%20%20b2FilterData.b2FilterData.apply(this%2C%20arguments)%3B%0A%20%20%20%20%7D%0A%20%20%20%20Box2D.Dynamics.b2FilterData%20%3D%20b2FilterData%3B%0A%0A%20%20%20%20function%20b2Fixture()%20%7B%0A%20%20%20%20%20%20b2Fixture.b2Fixture.apply(this%2C%20arguments)%3B%0A%20%20%20%20%20%20if%20(this.constructor%20%3D%3D%3D%20b2Fixture)%20this.b2Fixture.apply(this%2C%20arguments)%3B%0A%20%20%20%20%7D%0A%20%20%20%20Box2D.Dynamics.b2Fixture%20%3D%20b2Fixture%3B%0A%0A%20%20%20%20function%20b2FixtureDef()%20%7B%0A%20%20%20%20%20%20b2FixtureDef.b2FixtureDef.apply(this%2C%20arguments)%3B%0A%20%20%20%20%20%20if%20(this.constructor%20%3D%3D%3D%20b2FixtureDef)%0A%20%20%20%20%20%20%20%20this.b2FixtureDef.apply(this%2C%20arguments)%3B%0A%20%20%20%20%7D%0A%20%20%20%20Box2D.Dynamics.b2FixtureDef%20%3D%20b2FixtureDef%3B%0A%0A%20%20%20%20function%20b2Island()%20%7B%0A%20%20%20%20%20%20b2Island.b2Island.apply(this%2C%20arguments)%3B%0A%20%20%20%20%20%20if%20(this.constructor%20%3D%3D%3D%20b2Island)%20this.b2Island.apply(this%2C%20arguments)%3B%0A%20%20%20%20%7D%0A%20%20%20%20Box2D.Dynamics.b2Island%20%3D%20b2Island%3B%0A%0A%20%20%20%20function%20b2TimeStep()%20%7B%0A%20%20%20%20%20%20b2TimeStep.b2TimeStep.apply(this%2C%20arguments)%3B%0A%20%20%20%20%7D%0A%20%20%20%20Box2D.Dynamics.b2TimeStep%20%3D%20b2TimeStep%3B%0A%0A%20%20%20%20function%20b2World()%20%7B%0A%20%20%20%20%20%20b2World.b2World.apply(this%2C%20arguments)%3B%0A%20%20%20%20%20%20if%20(this.constructor%20%3D%3D%3D%20b2World)%20this.b2World.apply(this%2C%20arguments)%3B%0A%20%20%20%20%7D%0A%20%20%20%20Box2D.Dynamics.b2World%20%3D%20b2World%3B%0A%0A%20%20%20%20function%20b2CircleContact()%20%7B%0A%20%20%20%20%20%20b2CircleContact.b2CircleContact.apply(this%2C%20arguments)%3B%0A%20%20%20%20%7D%0A%20%20%20%20Box2D.Dynamics.Contacts.b2CircleContact%20%3D%20b2CircleContact%3B%0A%0A%20%20%20%20function%20b2Contact()%20%7B%0A%20%20%20%20%20%20b2Contact.b2Contact.apply(this%2C%20arguments)%3B%0A%20%20%20%20%20%20if%20(this.constructor%20%3D%3D%3D%20b2Contact)%20this.b2Contact.apply(this%2C%20arguments)%3B%0A%20%20%20%20%7D%0A%20%20%20%20Box2D.Dynamics.Contacts.b2Contact%20%3D%20b2Contact%3B%0A%0A%20%20%20%20function%20b2ContactConstraint()%20%7B%0A%20%20%20%20%20%20b2ContactConstraint.b2ContactConstraint.apply(this%2C%20arguments)%3B%0A%20%20%20%20%20%20if%20(this.constructor%20%3D%3D%3D%20b2ContactConstraint)%0A%20%20%20%20%20%20%20%20this.b2ContactConstraint.apply(this%2C%20arguments)%3B%0A%20%20%20%20%7D%0A%20%20%20%20Box2D.Dynamics.Contacts.b2ContactConstraint%20%3D%20b2ContactConstraint%3B%0A%0A%20%20%20%20function%20b2ContactConstraintPoint()%20%7B%0A%20%20%20%20%20%20b2ContactConstraintPoint.b2ContactConstraintPoint.apply(this%2C%20arguments)%3B%0A%20%20%20%20%7D%0A%20%20%20%20Box2D.Dynamics.Contacts.b2ContactConstraintPoint%20%3D%20b2ContactConstraintPoint%3B%0A%0A%20%20%20%20function%20b2ContactEdge()%20%7B%0A%20%20%20%20%20%20b2ContactEdge.b2ContactEdge.apply(this%2C%20arguments)%3B%0A%20%20%20%20%7D%0A%20%20%20%20Box2D.Dynamics.Contacts.b2ContactEdge%20%3D%20b2ContactEdge%3B%0A%0A%20%20%20%20function%20b2ContactFactory()%20%7B%0A%20%20%20%20%20%20b2ContactFactory.b2ContactFactory.apply(this%2C%20arguments)%3B%0A%20%20%20%20%20%20if%20(this.constructor%20%3D%3D%3D%20b2ContactFactory)%0A%20%20%20%20%20%20%20%20this.b2ContactFactory.apply(this%2C%20arguments)%3B%0A%20%20%20%20%7D%0A%20%20%20%20Box2D.Dynamics.Contacts.b2ContactFactory%20%3D%20b2ContactFactory%3B%0A%0A%20%20%20%20function%20b2ContactRegister()%20%7B%0A%20%20%20%20%20%20b2ContactRegister.b2ContactRegister.apply(this%2C%20arguments)%3B%0A%20%20%20%20%7D%0A%20%20%20%20Box2D.Dynamics.Contacts.b2ContactRegister%20%3D%20b2ContactRegister%3B%0A%0A%20%20%20%20function%20b2ContactResult()%20%7B%0A%20%20%20%20%20%20b2ContactResult.b2ContactResult.apply(this%2C%20arguments)%3B%0A%20%20%20%20%7D%0A%20%20%20%20Box2D.Dynamics.Contacts.b2ContactResult%20%3D%20b2ContactResult%3B%0A%0A%20%20%20%20function%20b2ContactSolver()%20%7B%0A%20%20%20%20%20%20b2ContactSolver.b2ContactSolver.apply(this%2C%20arguments)%3B%0A%20%20%20%20%20%20if%20(this.constructor%20%3D%3D%3D%20b2ContactSolver)%0A%20%20%20%20%20%20%20%20this.b2ContactSolver.apply(this%2C%20arguments)%3B%0A%20%20%20%20%7D%0A%20%20%20%20Box2D.Dynamics.Contacts.b2ContactSolver%20%3D%20b2ContactSolver%3B%0A%0A%20%20%20%20function%20b2EdgeAndCircleContact()%20%7B%0A%20%20%20%20%20%20b2EdgeAndCircleContact.b2EdgeAndCircleContact.apply(this%2C%20arguments)%3B%0A%20%20%20%20%7D%0A%20%20%20%20Box2D.Dynamics.Contacts.b2EdgeAndCircleContact%20%3D%20b2EdgeAndCircleContact%3B%0A%0A%20%20%20%20function%20b2NullContact()%20%7B%0A%20%20%20%20%20%20b2NullContact.b2NullContact.apply(this%2C%20arguments)%3B%0A%20%20%20%20%20%20if%20(this.constructor%20%3D%3D%3D%20b2NullContact)%0A%20%20%20%20%20%20%20%20this.b2NullContact.apply(this%2C%20arguments)%3B%0A%20%20%20%20%7D%0A%20%20%20%20Box2D.Dynamics.Contacts.b2NullContact%20%3D%20b2NullContact%3B%0A%0A%20%20%20%20function%20b2PolyAndCircleContact()%20%7B%0A%20%20%20%20%20%20b2PolyAndCircleContact.b2PolyAndCircleContact.apply(this%2C%20arguments)%3B%0A%20%20%20%20%7D%0A%20%20%20%20Box2D.Dynamics.Contacts.b2PolyAndCircleContact%20%3D%20b2PolyAndCircleContact%3B%0A%0A%20%20%20%20function%20b2PolyAndEdgeContact()%20%7B%0A%20%20%20%20%20%20b2PolyAndEdgeContact.b2PolyAndEdgeContact.apply(this%2C%20arguments)%3B%0A%20%20%20%20%7D%0A%20%20%20%20Box2D.Dynamics.Contacts.b2PolyAndEdgeContact%20%3D%20b2PolyAndEdgeContact%3B%0A%0A%20%20%20%20function%20b2PolygonContact()%20%7B%0A%20%20%20%20%20%20b2PolygonContact.b2PolygonContact.apply(this%2C%20arguments)%3B%0A%20%20%20%20%7D%0A%20%20%20%20Box2D.Dynamics.Contacts.b2PolygonContact%20%3D%20b2PolygonContact%3B%0A%0A%20%20%20%20function%20b2PositionSolverManifold()%20%7B%0A%20%20%20%20%20%20b2PositionSolverManifold.b2PositionSolverManifold.apply(this%2C%20arguments)%3B%0A%20%20%20%20%20%20if%20(this.constructor%20%3D%3D%3D%20b2PositionSolverManifold)%0A%20%20%20%20%20%20%20%20this.b2PositionSolverManifold.apply(this%2C%20arguments)%3B%0A%20%20%20%20%7D%0A%20%20%20%20Box2D.Dynamics.Contacts.b2PositionSolverManifold%20%3D%20b2PositionSolverManifold%3B%0A%0A%20%20%20%20function%20b2BuoyancyController()%20%7B%0A%20%20%20%20%20%20b2BuoyancyController.b2BuoyancyController.apply(this%2C%20arguments)%3B%0A%20%20%20%20%7D%0A%20%20%20%20Box2D.Dynamics.Controllers.b2BuoyancyController%20%3D%20b2BuoyancyController%3B%0A%0A%20%20%20%20function%20b2ConstantAccelController()%20%7B%0A%20%20%20%20%20%20b2ConstantAccelController.b2ConstantAccelController.apply(%0A%20%20%20%20%20%20%20%20this%2C%0A%20%20%20%20%20%20%20%20arguments%0A%20%20%20%20%20%20)%3B%0A%20%20%20%20%7D%0A%20%20%20%20Box2D.Dynamics.Controllers.b2ConstantAccelController%20%3D%0A%20%20%20%20%20%20b2ConstantAccelController%3B%0A%0A%20%20%20%20function%20b2ConstantForceController()%20%7B%0A%20%20%20%20%20%20b2ConstantForceController.b2ConstantForceController.apply(%0A%20%20%20%20%20%20%20%20this%2C%0A%20%20%20%20%20%20%20%20arguments%0A%20%20%20%20%20%20)%3B%0A%20%20%20%20%7D%0A%20%20%20%20Box2D.Dynamics.Controllers.b2ConstantForceController%20%3D%0A%20%20%20%20%20%20b2ConstantForceController%3B%0A%0A%20%20%20%20function%20b2Controller()%20%7B%0A%20%20%20%20%20%20b2Controller.b2Controller.apply(this%2C%20arguments)%3B%0A%20%20%20%20%7D%0A%20%20%20%20Box2D.Dynamics.Controllers.b2Controller%20%3D%20b2Controller%3B%0A%0A%20%20%20%20function%20b2ControllerEdge()%20%7B%0A%20%20%20%20%20%20b2ControllerEdge.b2ControllerEdge.apply(this%2C%20arguments)%3B%0A%20%20%20%20%7D%0A%20%20%20%20Box2D.Dynamics.Controllers.b2ControllerEdge%20%3D%20b2ControllerEdge%3B%0A%0A%20%20%20%20function%20b2GravityController()%20%7B%0A%20%20%20%20%20%20b2GravityController.b2GravityController.apply(this%2C%20arguments)%3B%0A%20%20%20%20%7D%0A%20%20%20%20Box2D.Dynamics.Controllers.b2GravityController%20%3D%20b2GravityController%3B%0A%0A%20%20%20%20function%20b2TensorDampingController()%20%7B%0A%20%20%20%20%20%20b2TensorDampingController.b2TensorDampingController.apply(%0A%20%20%20%20%20%20%20%20this%2C%0A%20%20%20%20%20%20%20%20arguments%0A%20%20%20%20%20%20)%3B%0A%20%20%20%20%7D%0A%20%20%20%20Box2D.Dynamics.Controllers.b2TensorDampingController%20%3D%0A%20%20%20%20%20%20b2TensorDampingController%3B%0A%0A%20%20%20%20function%20b2DistanceJoint()%20%7B%0A%20%20%20%20%20%20b2DistanceJoint.b2DistanceJoint.apply(this%2C%20arguments)%3B%0A%20%20%20%20%20%20if%20(this.constructor%20%3D%3D%3D%20b2DistanceJoint)%0A%20%20%20%20%20%20%20%20this.b2DistanceJoint.apply(this%2C%20arguments)%3B%0A%20%20%20%20%7D%0A%20%20%20%20Box2D.Dynamics.Joints.b2DistanceJoint%20%3D%20b2DistanceJoint%3B%0A%0A%20%20%20%20function%20b2DistanceJointDef()%20%7B%0A%20%20%20%20%20%20b2DistanceJointDef.b2DistanceJointDef.apply(this%2C%20arguments)%3B%0A%20%20%20%20%20%20if%20(this.constructor%20%3D%3D%3D%20b2DistanceJointDef)%0A%20%20%20%20%20%20%20%20this.b2DistanceJointDef.apply(this%2C%20arguments)%3B%0A%20%20%20%20%7D%0A%20%20%20%20Box2D.Dynamics.Joints.b2DistanceJointDef%20%3D%20b2DistanceJointDef%3B%0A%0A%20%20%20%20function%20b2FrictionJoint()%20%7B%0A%20%20%20%20%20%20b2FrictionJoint.b2FrictionJoint.apply(this%2C%20arguments)%3B%0A%20%20%20%20%20%20if%20(this.constructor%20%3D%3D%3D%20b2FrictionJoint)%0A%20%20%20%20%20%20%20%20this.b2FrictionJoint.apply(this%2C%20arguments)%3B%0A%20%20%20%20%7D%0A%20%20%20%20Box2D.Dynamics.Joints.b2FrictionJoint%20%3D%20b2FrictionJoint%3B%0A%0A%20%20%20%20function%20b2FrictionJointDef()%20%7B%0A%20%20%20%20%20%20b2FrictionJointDef.b2FrictionJointDef.apply(this%2C%20arguments)%3B%0A%20%20%20%20%20%20if%20(this.constructor%20%3D%3D%3D%20b2FrictionJointDef)%0A%20%20%20%20%20%20%20%20this.b2FrictionJointDef.apply(this%2C%20arguments)%3B%0A%20%20%20%20%7D%0A%20%20%20%20Box2D.Dynamics.Joints.b2FrictionJointDef%20%3D%20b2FrictionJointDef%3B%0A%0A%20%20%20%20function%20b2GearJoint()%20%7B%0A%20%20%20%20%20%20b2GearJoint.b2GearJoint.apply(this%2C%20arguments)%3B%0A%20%20%20%20%20%20if%20(this.constructor%20%3D%3D%3D%20b2GearJoint)%0A%20%20%20%20%20%20%20%20this.b2GearJoint.apply(this%2C%20arguments)%3B%0A%20%20%20%20%7D%0A%20%20%20%20Box2D.Dynamics.Joints.b2GearJoint%20%3D%20b2GearJoint%3B%0A%0A%20%20%20%20function%20b2GearJointDef()%20%7B%0A%20%20%20%20%20%20b2GearJointDef.b2GearJointDef.apply(this%2C%20arguments)%3B%0A%20%20%20%20%20%20if%20(this.constructor%20%3D%3D%3D%20b2GearJointDef)%0A%20%20%20%20%20%20%20%20this.b2GearJointDef.apply(this%2C%20arguments)%3B%0A%20%20%20%20%7D%0A%20%20%20%20Box2D.Dynamics.Joints.b2GearJointDef%20%3D%20b2GearJointDef%3B%0A%0A%20%20%20%20function%20b2Jacobian()%20%7B%0A%20%20%20%20%20%20b2Jacobian.b2Jacobian.apply(this%2C%20arguments)%3B%0A%20%20%20%20%7D%0A%20%20%20%20Box2D.Dynamics.Joints.b2Jacobian%20%3D%20b2Jacobian%3B%0A%0A%20%20%20%20function%20b2Joint()%20%7B%0A%20%20%20%20%20%20b2Joint.b2Joint.apply(this%2C%20arguments)%3B%0A%20%20%20%20%20%20if%20(this.constructor%20%3D%3D%3D%20b2Joint)%20this.b2Joint.apply(this%2C%20arguments)%3B%0A%20%20%20%20%7D%0A%20%20%20%20Box2D.Dynamics.Joints.b2Joint%20%3D%20b2Joint%3B%0A%0A%20%20%20%20function%20b2JointDef()%20%7B%0A%20%20%20%20%20%20b2JointDef.b2JointDef.apply(this%2C%20arguments)%3B%0A%20%20%20%20%20%20if%20(this.constructor%20%3D%3D%3D%20b2JointDef)%0A%20%20%20%20%20%20%20%20this.b2JointDef.apply(this%2C%20arguments)%3B%0A%20%20%20%20%7D%0A%20%20%20%20Box2D.Dynamics.Joints.b2JointDef%20%3D%20b2JointDef%3B%0A%0A%20%20%20%20function%20b2JointEdge()%20%7B%0A%20%20%20%20%20%20b2JointEdge.b2JointEdge.apply(this%2C%20arguments)%3B%0A%20%20%20%20%7D%0A%20%20%20%20Box2D.Dynamics.Joints.b2JointEdge%20%3D%20b2JointEdge%3B%0A%0A%20%20%20%20function%20b2LineJoint()%20%7B%0A%20%20%20%20%20%20b2LineJoint.b2LineJoint.apply(this%2C%20arguments)%3B%0A%20%20%20%20%20%20if%20(this.constructor%20%3D%3D%3D%20b2LineJoint)%0A%20%20%20%20%20%20%20%20this.b2LineJoint.apply(this%2C%20arguments)%3B%0A%20%20%20%20%7D%0A%20%20%20%20Box2D.Dynamics.Joints.b2LineJoint%20%3D%20b2LineJoint%3B%0A%0A%20%20%20%20function%20b2LineJointDef()%20%7B%0A%20%20%20%20%20%20b2LineJointDef.b2LineJointDef.apply(this%2C%20arguments)%3B%0A%20%20%20%20%20%20if%20(this.constructor%20%3D%3D%3D%20b2LineJointDef)%0A%20%20%20%20%20%20%20%20this.b2LineJointDef.apply(this%2C%20arguments)%3B%0A%20%20%20%20%7D%0A%20%20%20%20Box2D.Dynamics.Joints.b2LineJointDef%20%3D%20b2LineJointDef%3B%0A%0A%20%20%20%20function%20b2MouseJoint()%20%7B%0A%20%20%20%20%20%20b2MouseJoint.b2MouseJoint.apply(this%2C%20arguments)%3B%0A%20%20%20%20%20%20if%20(this.constructor%20%3D%3D%3D%20b2MouseJoint)%0A%20%20%20%20%20%20%20%20this.b2MouseJoint.apply(this%2C%20arguments)%3B%0A%20%20%20%20%7D%0A%20%20%20%20Box2D.Dynamics.Joints.b2MouseJoint%20%3D%20b2MouseJoint%3B%0A%0A%20%20%20%20function%20b2MouseJointDef()%20%7B%0A%20%20%20%20%20%20b2MouseJointDef.b2MouseJointDef.apply(this%2C%20arguments)%3B%0A%20%20%20%20%20%20if%20(this.constructor%20%3D%3D%3D%20b2MouseJointDef)%0A%20%20%20%20%20%20%20%20this.b2MouseJointDef.apply(this%2C%20arguments)%3B%0A%20%20%20%20%7D%0A%20%20%20%20Box2D.Dynamics.Joints.b2MouseJointDef%20%3D%20b2MouseJointDef%3B%0A%0A%20%20%20%20function%20b2PrismaticJoint()%20%7B%0A%20%20%20%20%20%20b2PrismaticJoint.b2PrismaticJoint.apply(this%2C%20arguments)%3B%0A%20%20%20%20%20%20if%20(this.constructor%20%3D%3D%3D%20b2PrismaticJoint)%0A%20%20%20%20%20%20%20%20this.b2PrismaticJoint.apply(this%2C%20arguments)%3B%0A%20%20%20%20%7D%0A%20%20%20%20Box2D.Dynamics.Joints.b2PrismaticJoint%20%3D%20b2PrismaticJoint%3B%0A%0A%20%20%20%20function%20b2PrismaticJointDef()%20%7B%0A%20%20%20%20%20%20b2PrismaticJointDef.b2PrismaticJointDef.apply(this%2C%20arguments)%3B%0A%20%20%20%20%20%20if%20(this.constructor%20%3D%3D%3D%20b2PrismaticJointDef)%0A%20%20%20%20%20%20%20%20this.b2PrismaticJointDef.apply(this%2C%20arguments)%3B%0A%20%20%20%20%7D%0A%20%20%20%20Box2D.Dynamics.Joints.b2PrismaticJointDef%20%3D%20b2PrismaticJointDef%3B%0A%0A%20%20%20%20function%20b2PulleyJoint()%20%7B%0A%20%20%20%20%20%20b2PulleyJoint.b2PulleyJoint.apply(this%2C%20arguments)%3B%0A%20%20%20%20%20%20if%20(this.constructor%20%3D%3D%3D%20b2PulleyJoint)%0A%20%20%20%20%20%20%20%20this.b2PulleyJoint.apply(this%2C%20arguments)%3B%0A%20%20%20%20%7D%0A%20%20%20%20Box2D.Dynamics.Joints.b2PulleyJoint%20%3D%20b2PulleyJoint%3B%0A%0A%20%20%20%20function%20b2PulleyJointDef()%20%7B%0A%20%20%20%20%20%20b2PulleyJointDef.b2PulleyJointDef.apply(this%2C%20arguments)%3B%0A%20%20%20%20%20%20if%20(this.constructor%20%3D%3D%3D%20b2PulleyJointDef)%0A%20%20%20%20%20%20%20%20this.b2PulleyJointDef.apply(this%2C%20arguments)%3B%0A%20%20%20%20%7D%0A%20%20%20%20Box2D.Dynamics.Joints.b2PulleyJointDef%20%3D%20b2PulleyJointDef%3B%0A%0A%20%20%20%20function%20b2RevoluteJoint()%20%7B%0A%20%20%20%20%20%20b2RevoluteJoint.b2RevoluteJoint.apply(this%2C%20arguments)%3B%0A%20%20%20%20%20%20if%20(this.constructor%20%3D%3D%3D%20b2RevoluteJoint)%0A%20%20%20%20%20%20%20%20this.b2RevoluteJoint.apply(this%2C%20arguments)%3B%0A%20%20%20%20%7D%0A%20%20%20%20Box2D.Dynamics.Joints.b2RevoluteJoint%20%3D%20b2RevoluteJoint%3B%0A%0A%20%20%20%20function%20b2RevoluteJointDef()%20%7B%0A%20%20%20%20%20%20b2RevoluteJointDef.b2RevoluteJointDef.apply(this%2C%20arguments)%3B%0A%20%20%20%20%20%20if%20(this.constructor%20%3D%3D%3D%20b2RevoluteJointDef)%0A%20%20%20%20%20%20%20%20this.b2RevoluteJointDef.apply(this%2C%20arguments)%3B%0A%20%20%20%20%7D%0A%20%20%20%20Box2D.Dynamics.Joints.b2RevoluteJointDef%20%3D%20b2RevoluteJointDef%3B%0A%0A%20%20%20%20function%20b2WeldJoint()%20%7B%0A%20%20%20%20%20%20b2WeldJoint.b2WeldJoint.apply(this%2C%20arguments)%3B%0A%20%20%20%20%20%20if%20(this.constructor%20%3D%3D%3D%20b2WeldJoint)%0A%20%20%20%20%20%20%20%20this.b2WeldJoint.apply(this%2C%20arguments)%3B%0A%20%20%20%20%7D%0A%20%20%20%20Box2D.Dynamics.Joints.b2WeldJoint%20%3D%20b2WeldJoint%3B%0A%0A%20%20%20%20function%20b2WeldJointDef()%20%7B%0A%20%20%20%20%20%20b2WeldJointDef.b2WeldJointDef.apply(this%2C%20arguments)%3B%0A%20%20%20%20%20%20if%20(this.constructor%20%3D%3D%3D%20b2WeldJointDef)%0A%20%20%20%20%20%20%20%20this.b2WeldJointDef.apply(this%2C%20arguments)%3B%0A%20%20%20%20%7D%0A%20%20%20%20Box2D.Dynamics.Joints.b2WeldJointDef%20%3D%20b2WeldJointDef%3B%0A%20%20%7D)()%3B%20%2F%2Fdefinitions%0A%20%20Box2D.postDefs%20%3D%20%5B%5D%3B%0A%20%20(function%20()%20%7B%0A%20%20%20%20var%20b2CircleShape%20%3D%20Box2D.Collision.Shapes.b2CircleShape%2C%0A%20%20%20%20%20%20b2EdgeChainDef%20%3D%20Box2D.Collision.Shapes.b2EdgeChainDef%2C%0A%20%20%20%20%20%20b2EdgeShape%20%3D%20Box2D.Collision.Shapes.b2EdgeShape%2C%0A%20%20%20%20%20%20b2MassData%20%3D%20Box2D.Collision.Shapes.b2MassData%2C%0A%20%20%20%20%20%20b2PolygonShape%20%3D%20Box2D.Collision.Shapes.b2PolygonShape%2C%0A%20%20%20%20%20%20b2Shape%20%3D%20Box2D.Collision.Shapes.b2Shape%2C%0A%20%20%20%20%20%20b2Color%20%3D%20Box2D.Common.b2Color%2C%0A%20%20%20%20%20%20b2internal%20%3D%20Box2D.Common.b2internal%2C%0A%20%20%20%20%20%20b2Settings%20%3D%20Box2D.Common.b2Settings%2C%0A%20%20%20%20%20%20b2Mat22%20%3D%20Box2D.Common.Math.b2Mat22%2C%0A%20%20%20%20%20%20b2Mat33%20%3D%20Box2D.Common.Math.b2Mat33%2C%0A%20%20%20%20%20%20b2Math%20%3D%20Box2D.Common.Math.b2Math%2C%0A%20%20%20%20%20%20b2Sweep%20%3D%20Box2D.Common.Math.b2Sweep%2C%0A%20%20%20%20%20%20b2Transform%20%3D%20Box2D.Common.Math.b2Transform%2C%0A%20%20%20%20%20%20b2Vec2%20%3D%20Box2D.Common.Math.b2Vec2%2C%0A%20%20%20%20%20%20b2Vec3%20%3D%20Box2D.Common.Math.b2Vec3%2C%0A%20%20%20%20%20%20b2AABB%20%3D%20Box2D.Collision.b2AABB%2C%0A%20%20%20%20%20%20b2Bound%20%3D%20Box2D.Collision.b2Bound%2C%0A%20%20%20%20%20%20b2BoundValues%20%3D%20Box2D.Collision.b2BoundValues%2C%0A%20%20%20%20%20%20b2Collision%20%3D%20Box2D.Collision.b2Collision%2C%0A%20%20%20%20%20%20b2ContactID%20%3D%20Box2D.Collision.b2ContactID%2C%0A%20%20%20%20%20%20b2ContactPoint%20%3D%20Box2D.Collision.b2ContactPoint%2C%0A%20%20%20%20%20%20b2Distance%20%3D%20Box2D.Collision.b2Distance%2C%0A%20%20%20%20%20%20b2DistanceInput%20%3D%20Box2D.Collision.b2DistanceInput%2C%0A%20%20%20%20%20%20b2DistanceOutput%20%3D%20Box2D.Collision.b2DistanceOutput%2C%0A%20%20%20%20%20%20b2DistanceProxy%20%3D%20Box2D.Collision.b2DistanceProxy%2C%0A%20%20%20%20%20%20b2DynamicTree%20%3D%20Box2D.Collision.b2DynamicTree%2C%0A%20%20%20%20%20%20b2DynamicTreeBroadPhase%20%3D%20Box2D.Collision.b2DynamicTreeBroadPhase%2C%0A%20%20%20%20%20%20b2DynamicTreeNode%20%3D%20Box2D.Collision.b2DynamicTreeNode%2C%0A%20%20%20%20%20%20b2DynamicTreePair%20%3D%20Box2D.Collision.b2DynamicTreePair%2C%0A%20%20%20%20%20%20b2Manifold%20%3D%20Box2D.Collision.b2Manifold%2C%0A%20%20%20%20%20%20b2ManifoldPoint%20%3D%20Box2D.Collision.b2ManifoldPoint%2C%0A%20%20%20%20%20%20b2Point%20%3D%20Box2D.Collision.b2Point%2C%0A%20%20%20%20%20%20b2RayCastInput%20%3D%20Box2D.Collision.b2RayCastInput%2C%0A%20%20%20%20%20%20b2RayCastOutput%20%3D%20Box2D.Collision.b2RayCastOutput%2C%0A%20%20%20%20%20%20b2Segment%20%3D%20Box2D.Collision.b2Segment%2C%0A%20%20%20%20%20%20b2SeparationFunction%20%3D%20Box2D.Collision.b2SeparationFunction%2C%0A%20%20%20%20%20%20b2Simplex%20%3D%20Box2D.Collision.b2Simplex%2C%0A%20%20%20%20%20%20b2SimplexCache%20%3D%20Box2D.Collision.b2SimplexCache%2C%0A%20%20%20%20%20%20b2SimplexVertex%20%3D%20Box2D.Collision.b2SimplexVertex%2C%0A%20%20%20%20%20%20b2TimeOfImpact%20%3D%20Box2D.Collision.b2TimeOfImpact%2C%0A%20%20%20%20%20%20b2TOIInput%20%3D%20Box2D.Collision.b2TOIInput%2C%0A%20%20%20%20%20%20b2WorldManifold%20%3D%20Box2D.Collision.b2WorldManifold%2C%0A%20%20%20%20%20%20ClipVertex%20%3D%20Box2D.Collision.ClipVertex%2C%0A%20%20%20%20%20%20Features%20%3D%20Box2D.Collision.Features%2C%0A%20%20%20%20%20%20IBroadPhase%20%3D%20Box2D.Collision.IBroadPhase%3B%0A%0A%20%20%20%20b2AABB.b2AABB%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20this.lowerBound%20%3D%20new%20b2Vec2()%3B%0A%20%20%20%20%20%20this.upperBound%20%3D%20new%20b2Vec2()%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2AABB.prototype.IsValid%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20var%20dX%20%3D%20this.upperBound.x%20-%20this.lowerBound.x%3B%0A%20%20%20%20%20%20var%20dY%20%3D%20this.upperBound.y%20-%20this.lowerBound.y%3B%0A%20%20%20%20%20%20var%20valid%20%3D%20dX%20%3E%3D%200.0%20%26%26%20dY%20%3E%3D%200.0%3B%0A%20%20%20%20%20%20valid%20%3D%20valid%20%26%26%20this.lowerBound.IsValid()%20%26%26%20this.upperBound.IsValid()%3B%0A%20%20%20%20%20%20return%20valid%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2AABB.prototype.GetCenter%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20return%20new%20b2Vec2(%0A%20%20%20%20%20%20%20%20(this.lowerBound.x%20%2B%20this.upperBound.x)%20%2F%202%2C%0A%20%20%20%20%20%20%20%20(this.lowerBound.y%20%2B%20this.upperBound.y)%20%2F%202%0A%20%20%20%20%20%20)%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2AABB.prototype.GetExtents%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20return%20new%20b2Vec2(%0A%20%20%20%20%20%20%20%20(this.upperBound.x%20-%20this.lowerBound.x)%20%2F%202%2C%0A%20%20%20%20%20%20%20%20(this.upperBound.y%20-%20this.lowerBound.y)%20%2F%202%0A%20%20%20%20%20%20)%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2AABB.prototype.Contains%20%3D%20function%20(aabb)%20%7B%0A%20%20%20%20%20%20var%20result%20%3D%20true%3B%0A%20%20%20%20%20%20result%20%3D%20result%20%26%26%20this.lowerBound.x%20%3C%3D%20aabb.lowerBound.x%3B%0A%20%20%20%20%20%20result%20%3D%20result%20%26%26%20this.lowerBound.y%20%3C%3D%20aabb.lowerBound.y%3B%0A%20%20%20%20%20%20result%20%3D%20result%20%26%26%20aabb.upperBound.x%20%3C%3D%20this.upperBound.x%3B%0A%20%20%20%20%20%20result%20%3D%20result%20%26%26%20aabb.upperBound.y%20%3C%3D%20this.upperBound.y%3B%0A%20%20%20%20%20%20return%20result%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2AABB.prototype.RayCast%20%3D%20function%20(output%2C%20input)%20%7B%0A%20%20%20%20%20%20var%20tmin%20%3D%20-Number.MAX_VALUE%3B%0A%20%20%20%20%20%20var%20tmax%20%3D%20Number.MAX_VALUE%3B%0A%20%20%20%20%20%20var%20pX%20%3D%20input.p1.x%3B%0A%20%20%20%20%20%20var%20pY%20%3D%20input.p1.y%3B%0A%20%20%20%20%20%20var%20dX%20%3D%20input.p2.x%20-%20input.p1.x%3B%0A%20%20%20%20%20%20var%20dY%20%3D%20input.p2.y%20-%20input.p1.y%3B%0A%20%20%20%20%20%20var%20absDX%20%3D%20Math.abs(dX)%3B%0A%20%20%20%20%20%20var%20absDY%20%3D%20Math.abs(dY)%3B%0A%20%20%20%20%20%20var%20normal%20%3D%20output.normal%3B%0A%20%20%20%20%20%20var%20inv_d%20%3D%200%3B%0A%20%20%20%20%20%20var%20t1%20%3D%200%3B%0A%20%20%20%20%20%20var%20t2%20%3D%200%3B%0A%20%20%20%20%20%20var%20t3%20%3D%200%3B%0A%20%20%20%20%20%20var%20s%20%3D%200%3B%0A%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20if%20(absDX%20%3C%20Number.MIN_VALUE)%20%7B%0A%20%20%20%20%20%20%20%20%20%20if%20(pX%20%3C%20this.lowerBound.x%20%7C%7C%20this.upperBound.x%20%3C%20pX)%20return%20false%3B%0A%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20inv_d%20%3D%201.0%20%2F%20dX%3B%0A%20%20%20%20%20%20%20%20%20%20t1%20%3D%20(this.lowerBound.x%20-%20pX)%20*%20inv_d%3B%0A%20%20%20%20%20%20%20%20%20%20t2%20%3D%20(this.upperBound.x%20-%20pX)%20*%20inv_d%3B%0A%20%20%20%20%20%20%20%20%20%20s%20%3D%20-1.0%3B%0A%20%20%20%20%20%20%20%20%20%20if%20(t1%20%3E%20t2)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20t3%20%3D%20t1%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20t1%20%3D%20t2%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20t2%20%3D%20t3%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20s%20%3D%201.0%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20if%20(t1%20%3E%20tmin)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20normal.x%20%3D%20s%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20normal.y%20%3D%200%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20tmin%20%3D%20t1%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20tmax%20%3D%20Math.min(tmax%2C%20t2)%3B%0A%20%20%20%20%20%20%20%20%20%20if%20(tmin%20%3E%20tmax)%20return%20false%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20if%20(absDY%20%3C%20Number.MIN_VALUE)%20%7B%0A%20%20%20%20%20%20%20%20%20%20if%20(pY%20%3C%20this.lowerBound.y%20%7C%7C%20this.upperBound.y%20%3C%20pY)%20return%20false%3B%0A%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20inv_d%20%3D%201.0%20%2F%20dY%3B%0A%20%20%20%20%20%20%20%20%20%20t1%20%3D%20(this.lowerBound.y%20-%20pY)%20*%20inv_d%3B%0A%20%20%20%20%20%20%20%20%20%20t2%20%3D%20(this.upperBound.y%20-%20pY)%20*%20inv_d%3B%0A%20%20%20%20%20%20%20%20%20%20s%20%3D%20-1.0%3B%0A%20%20%20%20%20%20%20%20%20%20if%20(t1%20%3E%20t2)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20t3%20%3D%20t1%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20t1%20%3D%20t2%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20t2%20%3D%20t3%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20s%20%3D%201.0%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20if%20(t1%20%3E%20tmin)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20normal.y%20%3D%20s%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20normal.x%20%3D%200%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20tmin%20%3D%20t1%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20tmax%20%3D%20Math.min(tmax%2C%20t2)%3B%0A%20%20%20%20%20%20%20%20%20%20if%20(tmin%20%3E%20tmax)%20return%20false%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20output.fraction%20%3D%20tmin%3B%0A%20%20%20%20%20%20return%20true%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2AABB.prototype.TestOverlap%20%3D%20function%20(other)%20%7B%0A%20%20%20%20%20%20var%20d1X%20%3D%20other.lowerBound.x%20-%20this.upperBound.x%3B%0A%20%20%20%20%20%20var%20d1Y%20%3D%20other.lowerBound.y%20-%20this.upperBound.y%3B%0A%20%20%20%20%20%20var%20d2X%20%3D%20this.lowerBound.x%20-%20other.upperBound.x%3B%0A%20%20%20%20%20%20var%20d2Y%20%3D%20this.lowerBound.y%20-%20other.upperBound.y%3B%0A%20%20%20%20%20%20if%20(d1X%20%3E%200.0%20%7C%7C%20d1Y%20%3E%200.0)%20return%20false%3B%0A%20%20%20%20%20%20if%20(d2X%20%3E%200.0%20%7C%7C%20d2Y%20%3E%200.0)%20return%20false%3B%0A%20%20%20%20%20%20return%20true%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2AABB.Combine%20%3D%20function%20(aabb1%2C%20aabb2)%20%7B%0A%20%20%20%20%20%20var%20aabb%20%3D%20new%20b2AABB()%3B%0A%20%20%20%20%20%20aabb.Combine(aabb1%2C%20aabb2)%3B%0A%20%20%20%20%20%20return%20aabb%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2AABB.prototype.Combine%20%3D%20function%20(aabb1%2C%20aabb2)%20%7B%0A%20%20%20%20%20%20this.lowerBound.x%20%3D%20Math.min(aabb1.lowerBound.x%2C%20aabb2.lowerBound.x)%3B%0A%20%20%20%20%20%20this.lowerBound.y%20%3D%20Math.min(aabb1.lowerBound.y%2C%20aabb2.lowerBound.y)%3B%0A%20%20%20%20%20%20this.upperBound.x%20%3D%20Math.max(aabb1.upperBound.x%2C%20aabb2.upperBound.x)%3B%0A%20%20%20%20%20%20this.upperBound.y%20%3D%20Math.max(aabb1.upperBound.y%2C%20aabb2.upperBound.y)%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2Bound.b2Bound%20%3D%20function%20()%20%7B%7D%3B%0A%20%20%20%20b2Bound.prototype.IsLower%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20return%20(this.value%20%26%201)%20%3D%3D%200%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2Bound.prototype.IsUpper%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20return%20(this.value%20%26%201)%20%3D%3D%201%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2Bound.prototype.Swap%20%3D%20function%20(b)%20%7B%0A%20%20%20%20%20%20var%20tempValue%20%3D%20this.value%3B%0A%20%20%20%20%20%20var%20tempProxy%20%3D%20this.proxy%3B%0A%20%20%20%20%20%20var%20tempStabbingCount%20%3D%20this.stabbingCount%3B%0A%20%20%20%20%20%20this.value%20%3D%20b.value%3B%0A%20%20%20%20%20%20this.proxy%20%3D%20b.proxy%3B%0A%20%20%20%20%20%20this.stabbingCount%20%3D%20b.stabbingCount%3B%0A%20%20%20%20%20%20b.value%20%3D%20tempValue%3B%0A%20%20%20%20%20%20b.proxy%20%3D%20tempProxy%3B%0A%20%20%20%20%20%20b.stabbingCount%20%3D%20tempStabbingCount%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2BoundValues.b2BoundValues%20%3D%20function%20()%20%7B%7D%3B%0A%20%20%20%20b2BoundValues.prototype.b2BoundValues%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20this.lowerValues%20%3D%20new%20Vector_a2j_Number()%3B%0A%20%20%20%20%20%20this.lowerValues%5B0%5D%20%3D%200.0%3B%0A%20%20%20%20%20%20this.lowerValues%5B1%5D%20%3D%200.0%3B%0A%20%20%20%20%20%20this.upperValues%20%3D%20new%20Vector_a2j_Number()%3B%0A%20%20%20%20%20%20this.upperValues%5B0%5D%20%3D%200.0%3B%0A%20%20%20%20%20%20this.upperValues%5B1%5D%20%3D%200.0%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2Collision.b2Collision%20%3D%20function%20()%20%7B%7D%3B%0A%20%20%20%20b2Collision.ClipSegmentToLine%20%3D%20function%20(vOut%2C%20vIn%2C%20normal%2C%20offset)%20%7B%0A%20%20%20%20%20%20if%20(offset%20%3D%3D%3D%20undefined)%20offset%20%3D%200%3B%0A%20%20%20%20%20%20var%20cv%3B%0A%20%20%20%20%20%20var%20numOut%20%3D%200%3B%0A%20%20%20%20%20%20cv%20%3D%20vIn%5B0%5D%3B%0A%20%20%20%20%20%20var%20vIn0%20%3D%20cv.v%3B%0A%20%20%20%20%20%20cv%20%3D%20vIn%5B1%5D%3B%0A%20%20%20%20%20%20var%20vIn1%20%3D%20cv.v%3B%0A%20%20%20%20%20%20var%20distance0%20%3D%20normal.x%20*%20vIn0.x%20%2B%20normal.y%20*%20vIn0.y%20-%20offset%3B%0A%20%20%20%20%20%20var%20distance1%20%3D%20normal.x%20*%20vIn1.x%20%2B%20normal.y%20*%20vIn1.y%20-%20offset%3B%0A%20%20%20%20%20%20if%20(distance0%20%3C%3D%200.0)%20vOut%5BnumOut%2B%2B%5D.Set(vIn%5B0%5D)%3B%0A%20%20%20%20%20%20if%20(distance1%20%3C%3D%200.0)%20vOut%5BnumOut%2B%2B%5D.Set(vIn%5B1%5D)%3B%0A%20%20%20%20%20%20if%20(distance0%20*%20distance1%20%3C%200.0)%20%7B%0A%20%20%20%20%20%20%20%20var%20interp%20%3D%20distance0%20%2F%20(distance0%20-%20distance1)%3B%0A%20%20%20%20%20%20%20%20cv%20%3D%20vOut%5BnumOut%5D%3B%0A%20%20%20%20%20%20%20%20var%20tVec%20%3D%20cv.v%3B%0A%20%20%20%20%20%20%20%20tVec.x%20%3D%20vIn0.x%20%2B%20interp%20*%20(vIn1.x%20-%20vIn0.x)%3B%0A%20%20%20%20%20%20%20%20tVec.y%20%3D%20vIn0.y%20%2B%20interp%20*%20(vIn1.y%20-%20vIn0.y)%3B%0A%20%20%20%20%20%20%20%20cv%20%3D%20vOut%5BnumOut%5D%3B%0A%20%20%20%20%20%20%20%20var%20cv2%3B%0A%20%20%20%20%20%20%20%20if%20(distance0%20%3E%200.0)%20%7B%0A%20%20%20%20%20%20%20%20%20%20cv2%20%3D%20vIn%5B0%5D%3B%0A%20%20%20%20%20%20%20%20%20%20cv.id%20%3D%20cv2.id%3B%0A%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20cv2%20%3D%20vIn%5B1%5D%3B%0A%20%20%20%20%20%20%20%20%20%20cv.id%20%3D%20cv2.id%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%2B%2BnumOut%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20return%20numOut%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2Collision.EdgeSeparation%20%3D%20function%20(poly1%2C%20xf1%2C%20edge1%2C%20poly2%2C%20xf2)%20%7B%0A%20%20%20%20%20%20if%20(edge1%20%3D%3D%3D%20undefined)%20edge1%20%3D%200%3B%0A%20%20%20%20%20%20var%20count1%20%3D%20parseInt(poly1.m_vertexCount)%3B%0A%20%20%20%20%20%20var%20vertices1%20%3D%20poly1.m_vertices%3B%0A%20%20%20%20%20%20var%20normals1%20%3D%20poly1.m_normals%3B%0A%20%20%20%20%20%20var%20count2%20%3D%20parseInt(poly2.m_vertexCount)%3B%0A%20%20%20%20%20%20var%20vertices2%20%3D%20poly2.m_vertices%3B%0A%20%20%20%20%20%20var%20tMat%3B%0A%20%20%20%20%20%20var%20tVec%3B%0A%20%20%20%20%20%20tMat%20%3D%20xf1.R%3B%0A%20%20%20%20%20%20tVec%20%3D%20normals1%5Bedge1%5D%3B%0A%20%20%20%20%20%20var%20normal1WorldX%20%3D%20tMat.col1.x%20*%20tVec.x%20%2B%20tMat.col2.x%20*%20tVec.y%3B%0A%20%20%20%20%20%20var%20normal1WorldY%20%3D%20tMat.col1.y%20*%20tVec.x%20%2B%20tMat.col2.y%20*%20tVec.y%3B%0A%20%20%20%20%20%20tMat%20%3D%20xf2.R%3B%0A%20%20%20%20%20%20var%20normal1X%20%3D%20tMat.col1.x%20*%20normal1WorldX%20%2B%20tMat.col1.y%20*%20normal1WorldY%3B%0A%20%20%20%20%20%20var%20normal1Y%20%3D%20tMat.col2.x%20*%20normal1WorldX%20%2B%20tMat.col2.y%20*%20normal1WorldY%3B%0A%20%20%20%20%20%20var%20index%20%3D%200%3B%0A%20%20%20%20%20%20var%20minDot%20%3D%20Number.MAX_VALUE%3B%0A%20%20%20%20%20%20for%20(var%20i%20%3D%200%3B%20i%20%3C%20count2%3B%20%2B%2Bi)%20%7B%0A%20%20%20%20%20%20%20%20tVec%20%3D%20vertices2%5Bi%5D%3B%0A%20%20%20%20%20%20%20%20var%20dot%20%3D%20tVec.x%20*%20normal1X%20%2B%20tVec.y%20*%20normal1Y%3B%0A%20%20%20%20%20%20%20%20if%20(dot%20%3C%20minDot)%20%7B%0A%20%20%20%20%20%20%20%20%20%20minDot%20%3D%20dot%3B%0A%20%20%20%20%20%20%20%20%20%20index%20%3D%20i%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20tVec%20%3D%20vertices1%5Bedge1%5D%3B%0A%20%20%20%20%20%20tMat%20%3D%20xf1.R%3B%0A%20%20%20%20%20%20var%20v1X%20%3D%20xf1.position.x%20%2B%20(tMat.col1.x%20*%20tVec.x%20%2B%20tMat.col2.x%20*%20tVec.y)%3B%0A%20%20%20%20%20%20var%20v1Y%20%3D%20xf1.position.y%20%2B%20(tMat.col1.y%20*%20tVec.x%20%2B%20tMat.col2.y%20*%20tVec.y)%3B%0A%20%20%20%20%20%20tVec%20%3D%20vertices2%5Bindex%5D%3B%0A%20%20%20%20%20%20tMat%20%3D%20xf2.R%3B%0A%20%20%20%20%20%20var%20v2X%20%3D%20xf2.position.x%20%2B%20(tMat.col1.x%20*%20tVec.x%20%2B%20tMat.col2.x%20*%20tVec.y)%3B%0A%20%20%20%20%20%20var%20v2Y%20%3D%20xf2.position.y%20%2B%20(tMat.col1.y%20*%20tVec.x%20%2B%20tMat.col2.y%20*%20tVec.y)%3B%0A%20%20%20%20%20%20v2X%20-%3D%20v1X%3B%0A%20%20%20%20%20%20v2Y%20-%3D%20v1Y%3B%0A%20%20%20%20%20%20var%20separation%20%3D%20v2X%20*%20normal1WorldX%20%2B%20v2Y%20*%20normal1WorldY%3B%0A%20%20%20%20%20%20return%20separation%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2Collision.FindMaxSeparation%20%3D%20function%20(%0A%20%20%20%20%20%20edgeIndex%2C%0A%20%20%20%20%20%20poly1%2C%0A%20%20%20%20%20%20xf1%2C%0A%20%20%20%20%20%20poly2%2C%0A%20%20%20%20%20%20xf2%0A%20%20%20%20)%20%7B%0A%20%20%20%20%20%20var%20count1%20%3D%20parseInt(poly1.m_vertexCount)%3B%0A%20%20%20%20%20%20var%20normals1%20%3D%20poly1.m_normals%3B%0A%20%20%20%20%20%20var%20tVec%3B%0A%20%20%20%20%20%20var%20tMat%3B%0A%20%20%20%20%20%20tMat%20%3D%20xf2.R%3B%0A%20%20%20%20%20%20tVec%20%3D%20poly2.m_centroid%3B%0A%20%20%20%20%20%20var%20dX%20%3D%20xf2.position.x%20%2B%20(tMat.col1.x%20*%20tVec.x%20%2B%20tMat.col2.x%20*%20tVec.y)%3B%0A%20%20%20%20%20%20var%20dY%20%3D%20xf2.position.y%20%2B%20(tMat.col1.y%20*%20tVec.x%20%2B%20tMat.col2.y%20*%20tVec.y)%3B%0A%20%20%20%20%20%20tMat%20%3D%20xf1.R%3B%0A%20%20%20%20%20%20tVec%20%3D%20poly1.m_centroid%3B%0A%20%20%20%20%20%20dX%20-%3D%20xf1.position.x%20%2B%20(tMat.col1.x%20*%20tVec.x%20%2B%20tMat.col2.x%20*%20tVec.y)%3B%0A%20%20%20%20%20%20dY%20-%3D%20xf1.position.y%20%2B%20(tMat.col1.y%20*%20tVec.x%20%2B%20tMat.col2.y%20*%20tVec.y)%3B%0A%20%20%20%20%20%20var%20dLocal1X%20%3D%20dX%20*%20xf1.R.col1.x%20%2B%20dY%20*%20xf1.R.col1.y%3B%0A%20%20%20%20%20%20var%20dLocal1Y%20%3D%20dX%20*%20xf1.R.col2.x%20%2B%20dY%20*%20xf1.R.col2.y%3B%0A%20%20%20%20%20%20var%20edge%20%3D%200%3B%0A%20%20%20%20%20%20var%20maxDot%20%3D%20-Number.MAX_VALUE%3B%0A%20%20%20%20%20%20for%20(var%20i%20%3D%200%3B%20i%20%3C%20count1%3B%20%2B%2Bi)%20%7B%0A%20%20%20%20%20%20%20%20tVec%20%3D%20normals1%5Bi%5D%3B%0A%20%20%20%20%20%20%20%20var%20dot%20%3D%20tVec.x%20*%20dLocal1X%20%2B%20tVec.y%20*%20dLocal1Y%3B%0A%20%20%20%20%20%20%20%20if%20(dot%20%3E%20maxDot)%20%7B%0A%20%20%20%20%20%20%20%20%20%20maxDot%20%3D%20dot%3B%0A%20%20%20%20%20%20%20%20%20%20edge%20%3D%20i%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20var%20s%20%3D%20b2Collision.EdgeSeparation(poly1%2C%20xf1%2C%20edge%2C%20poly2%2C%20xf2)%3B%0A%20%20%20%20%20%20var%20prevEdge%20%3D%20parseInt(edge%20-%201%20%3E%3D%200%20%3F%20edge%20-%201%20%3A%20count1%20-%201)%3B%0A%20%20%20%20%20%20var%20sPrev%20%3D%20b2Collision.EdgeSeparation(poly1%2C%20xf1%2C%20prevEdge%2C%20poly2%2C%20xf2)%3B%0A%20%20%20%20%20%20var%20nextEdge%20%3D%20parseInt(edge%20%2B%201%20%3C%20count1%20%3F%20edge%20%2B%201%20%3A%200)%3B%0A%20%20%20%20%20%20var%20sNext%20%3D%20b2Collision.EdgeSeparation(poly1%2C%20xf1%2C%20nextEdge%2C%20poly2%2C%20xf2)%3B%0A%20%20%20%20%20%20var%20bestEdge%20%3D%200%3B%0A%20%20%20%20%20%20var%20bestSeparation%20%3D%200%3B%0A%20%20%20%20%20%20var%20increment%20%3D%200%3B%0A%20%20%20%20%20%20if%20(sPrev%20%3E%20s%20%26%26%20sPrev%20%3E%20sNext)%20%7B%0A%20%20%20%20%20%20%20%20increment%20%3D%20-1%3B%0A%20%20%20%20%20%20%20%20bestEdge%20%3D%20prevEdge%3B%0A%20%20%20%20%20%20%20%20bestSeparation%20%3D%20sPrev%3B%0A%20%20%20%20%20%20%7D%20else%20if%20(sNext%20%3E%20s)%20%7B%0A%20%20%20%20%20%20%20%20increment%20%3D%201%3B%0A%20%20%20%20%20%20%20%20bestEdge%20%3D%20nextEdge%3B%0A%20%20%20%20%20%20%20%20bestSeparation%20%3D%20sNext%3B%0A%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20edgeIndex%5B0%5D%20%3D%20edge%3B%0A%20%20%20%20%20%20%20%20return%20s%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20while%20(true)%20%7B%0A%20%20%20%20%20%20%20%20if%20(increment%20%3D%3D%20-1)%0A%20%20%20%20%20%20%20%20%20%20edge%20%3D%20bestEdge%20-%201%20%3E%3D%200%20%3F%20bestEdge%20-%201%20%3A%20count1%20-%201%3B%0A%20%20%20%20%20%20%20%20else%20edge%20%3D%20bestEdge%20%2B%201%20%3C%20count1%20%3F%20bestEdge%20%2B%201%20%3A%200%3B%0A%20%20%20%20%20%20%20%20s%20%3D%20b2Collision.EdgeSeparation(poly1%2C%20xf1%2C%20edge%2C%20poly2%2C%20xf2)%3B%0A%20%20%20%20%20%20%20%20if%20(s%20%3E%20bestSeparation)%20%7B%0A%20%20%20%20%20%20%20%20%20%20bestEdge%20%3D%20edge%3B%0A%20%20%20%20%20%20%20%20%20%20bestSeparation%20%3D%20s%3B%0A%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20break%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20edgeIndex%5B0%5D%20%3D%20bestEdge%3B%0A%20%20%20%20%20%20return%20bestSeparation%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2Collision.FindIncidentEdge%20%3D%20function%20(c%2C%20poly1%2C%20xf1%2C%20edge1%2C%20poly2%2C%20xf2)%20%7B%0A%20%20%20%20%20%20if%20(edge1%20%3D%3D%3D%20undefined)%20edge1%20%3D%200%3B%0A%20%20%20%20%20%20var%20count1%20%3D%20parseInt(poly1.m_vertexCount)%3B%0A%20%20%20%20%20%20var%20normals1%20%3D%20poly1.m_normals%3B%0A%20%20%20%20%20%20var%20count2%20%3D%20parseInt(poly2.m_vertexCount)%3B%0A%20%20%20%20%20%20var%20vertices2%20%3D%20poly2.m_vertices%3B%0A%20%20%20%20%20%20var%20normals2%20%3D%20poly2.m_normals%3B%0A%20%20%20%20%20%20var%20tMat%3B%0A%20%20%20%20%20%20var%20tVec%3B%0A%20%20%20%20%20%20tMat%20%3D%20xf1.R%3B%0A%20%20%20%20%20%20tVec%20%3D%20normals1%5Bedge1%5D%3B%0A%20%20%20%20%20%20var%20normal1X%20%3D%20tMat.col1.x%20*%20tVec.x%20%2B%20tMat.col2.x%20*%20tVec.y%3B%0A%20%20%20%20%20%20var%20normal1Y%20%3D%20tMat.col1.y%20*%20tVec.x%20%2B%20tMat.col2.y%20*%20tVec.y%3B%0A%20%20%20%20%20%20tMat%20%3D%20xf2.R%3B%0A%20%20%20%20%20%20var%20tX%20%3D%20tMat.col1.x%20*%20normal1X%20%2B%20tMat.col1.y%20*%20normal1Y%3B%0A%20%20%20%20%20%20normal1Y%20%3D%20tMat.col2.x%20*%20normal1X%20%2B%20tMat.col2.y%20*%20normal1Y%3B%0A%20%20%20%20%20%20normal1X%20%3D%20tX%3B%0A%20%20%20%20%20%20var%20index%20%3D%200%3B%0A%20%20%20%20%20%20var%20minDot%20%3D%20Number.MAX_VALUE%3B%0A%20%20%20%20%20%20for%20(var%20i%20%3D%200%3B%20i%20%3C%20count2%3B%20%2B%2Bi)%20%7B%0A%20%20%20%20%20%20%20%20tVec%20%3D%20normals2%5Bi%5D%3B%0A%20%20%20%20%20%20%20%20var%20dot%20%3D%20normal1X%20*%20tVec.x%20%2B%20normal1Y%20*%20tVec.y%3B%0A%20%20%20%20%20%20%20%20if%20(dot%20%3C%20minDot)%20%7B%0A%20%20%20%20%20%20%20%20%20%20minDot%20%3D%20dot%3B%0A%20%20%20%20%20%20%20%20%20%20index%20%3D%20i%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20var%20tClip%3B%0A%20%20%20%20%20%20var%20i1%20%3D%20parseInt(index)%3B%0A%20%20%20%20%20%20var%20i2%20%3D%20parseInt(i1%20%2B%201%20%3C%20count2%20%3F%20i1%20%2B%201%20%3A%200)%3B%0A%20%20%20%20%20%20tClip%20%3D%20c%5B0%5D%3B%0A%20%20%20%20%20%20tVec%20%3D%20vertices2%5Bi1%5D%3B%0A%20%20%20%20%20%20tMat%20%3D%20xf2.R%3B%0A%20%20%20%20%20%20tClip.v.x%20%3D%0A%20%20%20%20%20%20%20%20xf2.position.x%20%2B%20(tMat.col1.x%20*%20tVec.x%20%2B%20tMat.col2.x%20*%20tVec.y)%3B%0A%20%20%20%20%20%20tClip.v.y%20%3D%0A%20%20%20%20%20%20%20%20xf2.position.y%20%2B%20(tMat.col1.y%20*%20tVec.x%20%2B%20tMat.col2.y%20*%20tVec.y)%3B%0A%20%20%20%20%20%20tClip.id.features.referenceEdge%20%3D%20edge1%3B%0A%20%20%20%20%20%20tClip.id.features.incidentEdge%20%3D%20i1%3B%0A%20%20%20%20%20%20tClip.id.features.incidentVertex%20%3D%200%3B%0A%20%20%20%20%20%20tClip%20%3D%20c%5B1%5D%3B%0A%20%20%20%20%20%20tVec%20%3D%20vertices2%5Bi2%5D%3B%0A%20%20%20%20%20%20tMat%20%3D%20xf2.R%3B%0A%20%20%20%20%20%20tClip.v.x%20%3D%0A%20%20%20%20%20%20%20%20xf2.position.x%20%2B%20(tMat.col1.x%20*%20tVec.x%20%2B%20tMat.col2.x%20*%20tVec.y)%3B%0A%20%20%20%20%20%20tClip.v.y%20%3D%0A%20%20%20%20%20%20%20%20xf2.position.y%20%2B%20(tMat.col1.y%20*%20tVec.x%20%2B%20tMat.col2.y%20*%20tVec.y)%3B%0A%20%20%20%20%20%20tClip.id.features.referenceEdge%20%3D%20edge1%3B%0A%20%20%20%20%20%20tClip.id.features.incidentEdge%20%3D%20i2%3B%0A%20%20%20%20%20%20tClip.id.features.incidentVertex%20%3D%201%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2Collision.MakeClipPointVector%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20var%20r%20%3D%20new%20Vector(2)%3B%0A%20%20%20%20%20%20r%5B0%5D%20%3D%20new%20ClipVertex()%3B%0A%20%20%20%20%20%20r%5B1%5D%20%3D%20new%20ClipVertex()%3B%0A%20%20%20%20%20%20return%20r%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2Collision.CollidePolygons%20%3D%20function%20(manifold%2C%20polyA%2C%20xfA%2C%20polyB%2C%20xfB)%20%7B%0A%20%20%20%20%20%20var%20cv%3B%0A%20%20%20%20%20%20manifold.m_pointCount%20%3D%200%3B%0A%20%20%20%20%20%20var%20totalRadius%20%3D%20polyA.m_radius%20%2B%20polyB.m_radius%3B%0A%20%20%20%20%20%20var%20edgeA%20%3D%200%3B%0A%20%20%20%20%20%20b2Collision.s_edgeAO%5B0%5D%20%3D%20edgeA%3B%0A%20%20%20%20%20%20var%20separationA%20%3D%20b2Collision.FindMaxSeparation(%0A%20%20%20%20%20%20%20%20b2Collision.s_edgeAO%2C%0A%20%20%20%20%20%20%20%20polyA%2C%0A%20%20%20%20%20%20%20%20xfA%2C%0A%20%20%20%20%20%20%20%20polyB%2C%0A%20%20%20%20%20%20%20%20xfB%0A%20%20%20%20%20%20)%3B%0A%20%20%20%20%20%20edgeA%20%3D%20b2Collision.s_edgeAO%5B0%5D%3B%0A%20%20%20%20%20%20if%20(separationA%20%3E%20totalRadius)%20return%3B%0A%20%20%20%20%20%20var%20edgeB%20%3D%200%3B%0A%20%20%20%20%20%20b2Collision.s_edgeBO%5B0%5D%20%3D%20edgeB%3B%0A%20%20%20%20%20%20var%20separationB%20%3D%20b2Collision.FindMaxSeparation(%0A%20%20%20%20%20%20%20%20b2Collision.s_edgeBO%2C%0A%20%20%20%20%20%20%20%20polyB%2C%0A%20%20%20%20%20%20%20%20xfB%2C%0A%20%20%20%20%20%20%20%20polyA%2C%0A%20%20%20%20%20%20%20%20xfA%0A%20%20%20%20%20%20)%3B%0A%20%20%20%20%20%20edgeB%20%3D%20b2Collision.s_edgeBO%5B0%5D%3B%0A%20%20%20%20%20%20if%20(separationB%20%3E%20totalRadius)%20return%3B%0A%20%20%20%20%20%20var%20poly1%3B%0A%20%20%20%20%20%20var%20poly2%3B%0A%20%20%20%20%20%20var%20xf1%3B%0A%20%20%20%20%20%20var%20xf2%3B%0A%20%20%20%20%20%20var%20edge1%20%3D%200%3B%0A%20%20%20%20%20%20var%20flip%20%3D%200%3B%0A%20%20%20%20%20%20var%20k_relativeTol%20%3D%200.98%3B%0A%20%20%20%20%20%20var%20k_absoluteTol%20%3D%200.001%3B%0A%20%20%20%20%20%20var%20tMat%3B%0A%20%20%20%20%20%20if%20(separationB%20%3E%20k_relativeTol%20*%20separationA%20%2B%20k_absoluteTol)%20%7B%0A%20%20%20%20%20%20%20%20poly1%20%3D%20polyB%3B%0A%20%20%20%20%20%20%20%20poly2%20%3D%20polyA%3B%0A%20%20%20%20%20%20%20%20xf1%20%3D%20xfB%3B%0A%20%20%20%20%20%20%20%20xf2%20%3D%20xfA%3B%0A%20%20%20%20%20%20%20%20edge1%20%3D%20edgeB%3B%0A%20%20%20%20%20%20%20%20manifold.m_type%20%3D%20b2Manifold.e_faceB%3B%0A%20%20%20%20%20%20%20%20flip%20%3D%201%3B%0A%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20poly1%20%3D%20polyA%3B%0A%20%20%20%20%20%20%20%20poly2%20%3D%20polyB%3B%0A%20%20%20%20%20%20%20%20xf1%20%3D%20xfA%3B%0A%20%20%20%20%20%20%20%20xf2%20%3D%20xfB%3B%0A%20%20%20%20%20%20%20%20edge1%20%3D%20edgeA%3B%0A%20%20%20%20%20%20%20%20manifold.m_type%20%3D%20b2Manifold.e_faceA%3B%0A%20%20%20%20%20%20%20%20flip%20%3D%200%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20var%20incidentEdge%20%3D%20b2Collision.s_incidentEdge%3B%0A%20%20%20%20%20%20b2Collision.FindIncidentEdge(incidentEdge%2C%20poly1%2C%20xf1%2C%20edge1%2C%20poly2%2C%20xf2)%3B%0A%20%20%20%20%20%20var%20count1%20%3D%20parseInt(poly1.m_vertexCount)%3B%0A%20%20%20%20%20%20var%20vertices1%20%3D%20poly1.m_vertices%3B%0A%20%20%20%20%20%20var%20local_v11%20%3D%20vertices1%5Bedge1%5D%3B%0A%20%20%20%20%20%20var%20local_v12%3B%0A%20%20%20%20%20%20if%20(edge1%20%2B%201%20%3C%20count1)%20%7B%0A%20%20%20%20%20%20%20%20local_v12%20%3D%20vertices1%5BparseInt(edge1%20%2B%201)%5D%3B%0A%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20local_v12%20%3D%20vertices1%5B0%5D%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20var%20localTangent%20%3D%20b2Collision.s_localTangent%3B%0A%20%20%20%20%20%20localTangent.Set(local_v12.x%20-%20local_v11.x%2C%20local_v12.y%20-%20local_v11.y)%3B%0A%20%20%20%20%20%20localTangent.Normalize()%3B%0A%20%20%20%20%20%20var%20localNormal%20%3D%20b2Collision.s_localNormal%3B%0A%20%20%20%20%20%20localNormal.x%20%3D%20localTangent.y%3B%0A%20%20%20%20%20%20localNormal.y%20%3D%20-localTangent.x%3B%0A%20%20%20%20%20%20var%20planePoint%20%3D%20b2Collision.s_planePoint%3B%0A%20%20%20%20%20%20planePoint.Set(%0A%20%20%20%20%20%20%20%200.5%20*%20(local_v11.x%20%2B%20local_v12.x)%2C%0A%20%20%20%20%20%20%20%200.5%20*%20(local_v11.y%20%2B%20local_v12.y)%0A%20%20%20%20%20%20)%3B%0A%20%20%20%20%20%20var%20tangent%20%3D%20b2Collision.s_tangent%3B%0A%20%20%20%20%20%20tMat%20%3D%20xf1.R%3B%0A%20%20%20%20%20%20tangent.x%20%3D%20tMat.col1.x%20*%20localTangent.x%20%2B%20tMat.col2.x%20*%20localTangent.y%3B%0A%20%20%20%20%20%20tangent.y%20%3D%20tMat.col1.y%20*%20localTangent.x%20%2B%20tMat.col2.y%20*%20localTangent.y%3B%0A%20%20%20%20%20%20var%20tangent2%20%3D%20b2Collision.s_tangent2%3B%0A%20%20%20%20%20%20tangent2.x%20%3D%20-tangent.x%3B%0A%20%20%20%20%20%20tangent2.y%20%3D%20-tangent.y%3B%0A%20%20%20%20%20%20var%20normal%20%3D%20b2Collision.s_normal%3B%0A%20%20%20%20%20%20normal.x%20%3D%20tangent.y%3B%0A%20%20%20%20%20%20normal.y%20%3D%20-tangent.x%3B%0A%20%20%20%20%20%20var%20v11%20%3D%20b2Collision.s_v11%3B%0A%20%20%20%20%20%20var%20v12%20%3D%20b2Collision.s_v12%3B%0A%20%20%20%20%20%20v11.x%20%3D%0A%20%20%20%20%20%20%20%20xf1.position.x%20%2B%0A%20%20%20%20%20%20%20%20(tMat.col1.x%20*%20local_v11.x%20%2B%20tMat.col2.x%20*%20local_v11.y)%3B%0A%20%20%20%20%20%20v11.y%20%3D%0A%20%20%20%20%20%20%20%20xf1.position.y%20%2B%0A%20%20%20%20%20%20%20%20(tMat.col1.y%20*%20local_v11.x%20%2B%20tMat.col2.y%20*%20local_v11.y)%3B%0A%20%20%20%20%20%20v12.x%20%3D%0A%20%20%20%20%20%20%20%20xf1.position.x%20%2B%0A%20%20%20%20%20%20%20%20(tMat.col1.x%20*%20local_v12.x%20%2B%20tMat.col2.x%20*%20local_v12.y)%3B%0A%20%20%20%20%20%20v12.y%20%3D%0A%20%20%20%20%20%20%20%20xf1.position.y%20%2B%0A%20%20%20%20%20%20%20%20(tMat.col1.y%20*%20local_v12.x%20%2B%20tMat.col2.y%20*%20local_v12.y)%3B%0A%20%20%20%20%20%20var%20frontOffset%20%3D%20normal.x%20*%20v11.x%20%2B%20normal.y%20*%20v11.y%3B%0A%20%20%20%20%20%20var%20sideOffset1%20%3D%20-tangent.x%20*%20v11.x%20-%20tangent.y%20*%20v11.y%20%2B%20totalRadius%3B%0A%20%20%20%20%20%20var%20sideOffset2%20%3D%20tangent.x%20*%20v12.x%20%2B%20tangent.y%20*%20v12.y%20%2B%20totalRadius%3B%0A%20%20%20%20%20%20var%20clipPoints1%20%3D%20b2Collision.s_clipPoints1%3B%0A%20%20%20%20%20%20var%20clipPoints2%20%3D%20b2Collision.s_clipPoints2%3B%0A%20%20%20%20%20%20var%20np%20%3D%200%3B%0A%20%20%20%20%20%20np%20%3D%20b2Collision.ClipSegmentToLine(%0A%20%20%20%20%20%20%20%20clipPoints1%2C%0A%20%20%20%20%20%20%20%20incidentEdge%2C%0A%20%20%20%20%20%20%20%20tangent2%2C%0A%20%20%20%20%20%20%20%20sideOffset1%0A%20%20%20%20%20%20)%3B%0A%20%20%20%20%20%20if%20(np%20%3C%202)%20return%3B%0A%20%20%20%20%20%20np%20%3D%20b2Collision.ClipSegmentToLine(%0A%20%20%20%20%20%20%20%20clipPoints2%2C%0A%20%20%20%20%20%20%20%20clipPoints1%2C%0A%20%20%20%20%20%20%20%20tangent%2C%0A%20%20%20%20%20%20%20%20sideOffset2%0A%20%20%20%20%20%20)%3B%0A%20%20%20%20%20%20if%20(np%20%3C%202)%20return%3B%0A%20%20%20%20%20%20manifold.m_localPlaneNormal.SetV(localNormal)%3B%0A%20%20%20%20%20%20manifold.m_localPoint.SetV(planePoint)%3B%0A%20%20%20%20%20%20var%20pointCount%20%3D%200%3B%0A%20%20%20%20%20%20for%20(var%20i%20%3D%200%3B%20i%20%3C%20b2Settings.b2_maxManifoldPoints%3B%20%2B%2Bi)%20%7B%0A%20%20%20%20%20%20%20%20cv%20%3D%20clipPoints2%5Bi%5D%3B%0A%20%20%20%20%20%20%20%20var%20separation%20%3D%20normal.x%20*%20cv.v.x%20%2B%20normal.y%20*%20cv.v.y%20-%20frontOffset%3B%0A%20%20%20%20%20%20%20%20if%20(separation%20%3C%3D%20totalRadius)%20%7B%0A%20%20%20%20%20%20%20%20%20%20var%20cp%20%3D%20manifold.m_points%5BpointCount%5D%3B%0A%20%20%20%20%20%20%20%20%20%20tMat%20%3D%20xf2.R%3B%0A%20%20%20%20%20%20%20%20%20%20var%20tX%20%3D%20cv.v.x%20-%20xf2.position.x%3B%0A%20%20%20%20%20%20%20%20%20%20var%20tY%20%3D%20cv.v.y%20-%20xf2.position.y%3B%0A%20%20%20%20%20%20%20%20%20%20cp.m_localPoint.x%20%3D%20tX%20*%20tMat.col1.x%20%2B%20tY%20*%20tMat.col1.y%3B%0A%20%20%20%20%20%20%20%20%20%20cp.m_localPoint.y%20%3D%20tX%20*%20tMat.col2.x%20%2B%20tY%20*%20tMat.col2.y%3B%0A%20%20%20%20%20%20%20%20%20%20cp.m_id.Set(cv.id)%3B%0A%20%20%20%20%20%20%20%20%20%20cp.m_id.features.flip%20%3D%20flip%3B%0A%20%20%20%20%20%20%20%20%20%20%2B%2BpointCount%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20manifold.m_pointCount%20%3D%20pointCount%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2Collision.CollideCircles%20%3D%20function%20(%0A%20%20%20%20%20%20manifold%2C%0A%20%20%20%20%20%20circle1%2C%0A%20%20%20%20%20%20xf1%2C%0A%20%20%20%20%20%20circle2%2C%0A%20%20%20%20%20%20xf2%0A%20%20%20%20)%20%7B%0A%20%20%20%20%20%20manifold.m_pointCount%20%3D%200%3B%0A%20%20%20%20%20%20var%20tMat%3B%0A%20%20%20%20%20%20var%20tVec%3B%0A%20%20%20%20%20%20tMat%20%3D%20xf1.R%3B%0A%20%20%20%20%20%20tVec%20%3D%20circle1.m_p%3B%0A%20%20%20%20%20%20var%20p1X%20%3D%20xf1.position.x%20%2B%20(tMat.col1.x%20*%20tVec.x%20%2B%20tMat.col2.x%20*%20tVec.y)%3B%0A%20%20%20%20%20%20var%20p1Y%20%3D%20xf1.position.y%20%2B%20(tMat.col1.y%20*%20tVec.x%20%2B%20tMat.col2.y%20*%20tVec.y)%3B%0A%20%20%20%20%20%20tMat%20%3D%20xf2.R%3B%0A%20%20%20%20%20%20tVec%20%3D%20circle2.m_p%3B%0A%20%20%20%20%20%20var%20p2X%20%3D%20xf2.position.x%20%2B%20(tMat.col1.x%20*%20tVec.x%20%2B%20tMat.col2.x%20*%20tVec.y)%3B%0A%20%20%20%20%20%20var%20p2Y%20%3D%20xf2.position.y%20%2B%20(tMat.col1.y%20*%20tVec.x%20%2B%20tMat.col2.y%20*%20tVec.y)%3B%0A%20%20%20%20%20%20var%20dX%20%3D%20p2X%20-%20p1X%3B%0A%20%20%20%20%20%20var%20dY%20%3D%20p2Y%20-%20p1Y%3B%0A%20%20%20%20%20%20var%20distSqr%20%3D%20dX%20*%20dX%20%2B%20dY%20*%20dY%3B%0A%20%20%20%20%20%20var%20radius%20%3D%20circle1.m_radius%20%2B%20circle2.m_radius%3B%0A%20%20%20%20%20%20if%20(distSqr%20%3E%20radius%20*%20radius)%20%7B%0A%20%20%20%20%20%20%20%20return%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20manifold.m_type%20%3D%20b2Manifold.e_circles%3B%0A%20%20%20%20%20%20manifold.m_localPoint.SetV(circle1.m_p)%3B%0A%20%20%20%20%20%20manifold.m_localPlaneNormal.SetZero()%3B%0A%20%20%20%20%20%20manifold.m_pointCount%20%3D%201%3B%0A%20%20%20%20%20%20manifold.m_points%5B0%5D.m_localPoint.SetV(circle2.m_p)%3B%0A%20%20%20%20%20%20manifold.m_points%5B0%5D.m_id.key%20%3D%200%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2Collision.CollidePolygonAndCircle%20%3D%20function%20(%0A%20%20%20%20%20%20manifold%2C%0A%20%20%20%20%20%20polygon%2C%0A%20%20%20%20%20%20xf1%2C%0A%20%20%20%20%20%20circle%2C%0A%20%20%20%20%20%20xf2%0A%20%20%20%20)%20%7B%0A%20%20%20%20%20%20manifold.m_pointCount%20%3D%200%3B%0A%20%20%20%20%20%20var%20tPoint%3B%0A%20%20%20%20%20%20var%20dX%20%3D%200%3B%0A%20%20%20%20%20%20var%20dY%20%3D%200%3B%0A%20%20%20%20%20%20var%20positionX%20%3D%200%3B%0A%20%20%20%20%20%20var%20positionY%20%3D%200%3B%0A%20%20%20%20%20%20var%20tVec%3B%0A%20%20%20%20%20%20var%20tMat%3B%0A%20%20%20%20%20%20tMat%20%3D%20xf2.R%3B%0A%20%20%20%20%20%20tVec%20%3D%20circle.m_p%3B%0A%20%20%20%20%20%20var%20cX%20%3D%20xf2.position.x%20%2B%20(tMat.col1.x%20*%20tVec.x%20%2B%20tMat.col2.x%20*%20tVec.y)%3B%0A%20%20%20%20%20%20var%20cY%20%3D%20xf2.position.y%20%2B%20(tMat.col1.y%20*%20tVec.x%20%2B%20tMat.col2.y%20*%20tVec.y)%3B%0A%20%20%20%20%20%20dX%20%3D%20cX%20-%20xf1.position.x%3B%0A%20%20%20%20%20%20dY%20%3D%20cY%20-%20xf1.position.y%3B%0A%20%20%20%20%20%20tMat%20%3D%20xf1.R%3B%0A%20%20%20%20%20%20var%20cLocalX%20%3D%20dX%20*%20tMat.col1.x%20%2B%20dY%20*%20tMat.col1.y%3B%0A%20%20%20%20%20%20var%20cLocalY%20%3D%20dX%20*%20tMat.col2.x%20%2B%20dY%20*%20tMat.col2.y%3B%0A%20%20%20%20%20%20var%20dist%20%3D%200%3B%0A%20%20%20%20%20%20var%20normalIndex%20%3D%200%3B%0A%20%20%20%20%20%20var%20separation%20%3D%20-Number.MAX_VALUE%3B%0A%20%20%20%20%20%20var%20radius%20%3D%20polygon.m_radius%20%2B%20circle.m_radius%3B%0A%20%20%20%20%20%20var%20vertexCount%20%3D%20parseInt(polygon.m_vertexCount)%3B%0A%20%20%20%20%20%20var%20vertices%20%3D%20polygon.m_vertices%3B%0A%20%20%20%20%20%20var%20normals%20%3D%20polygon.m_normals%3B%0A%20%20%20%20%20%20for%20(var%20i%20%3D%200%3B%20i%20%3C%20vertexCount%3B%20%2B%2Bi)%20%7B%0A%20%20%20%20%20%20%20%20tVec%20%3D%20vertices%5Bi%5D%3B%0A%20%20%20%20%20%20%20%20dX%20%3D%20cLocalX%20-%20tVec.x%3B%0A%20%20%20%20%20%20%20%20dY%20%3D%20cLocalY%20-%20tVec.y%3B%0A%20%20%20%20%20%20%20%20tVec%20%3D%20normals%5Bi%5D%3B%0A%20%20%20%20%20%20%20%20var%20s%20%3D%20tVec.x%20*%20dX%20%2B%20tVec.y%20*%20dY%3B%0A%20%20%20%20%20%20%20%20if%20(s%20%3E%20radius)%20%7B%0A%20%20%20%20%20%20%20%20%20%20return%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20if%20(s%20%3E%20separation)%20%7B%0A%20%20%20%20%20%20%20%20%20%20separation%20%3D%20s%3B%0A%20%20%20%20%20%20%20%20%20%20normalIndex%20%3D%20i%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20var%20vertIndex1%20%3D%20parseInt(normalIndex)%3B%0A%20%20%20%20%20%20var%20vertIndex2%20%3D%20parseInt(%0A%20%20%20%20%20%20%20%20vertIndex1%20%2B%201%20%3C%20vertexCount%20%3F%20vertIndex1%20%2B%201%20%3A%200%0A%20%20%20%20%20%20)%3B%0A%20%20%20%20%20%20var%20v1%20%3D%20vertices%5BvertIndex1%5D%3B%0A%20%20%20%20%20%20var%20v2%20%3D%20vertices%5BvertIndex2%5D%3B%0A%20%20%20%20%20%20if%20(separation%20%3C%20Number.MIN_VALUE)%20%7B%0A%20%20%20%20%20%20%20%20manifold.m_pointCount%20%3D%201%3B%0A%20%20%20%20%20%20%20%20manifold.m_type%20%3D%20b2Manifold.e_faceA%3B%0A%20%20%20%20%20%20%20%20manifold.m_localPlaneNormal.SetV(normals%5BnormalIndex%5D)%3B%0A%20%20%20%20%20%20%20%20manifold.m_localPoint.x%20%3D%200.5%20*%20(v1.x%20%2B%20v2.x)%3B%0A%20%20%20%20%20%20%20%20manifold.m_localPoint.y%20%3D%200.5%20*%20(v1.y%20%2B%20v2.y)%3B%0A%20%20%20%20%20%20%20%20manifold.m_points%5B0%5D.m_localPoint.SetV(circle.m_p)%3B%0A%20%20%20%20%20%20%20%20manifold.m_points%5B0%5D.m_id.key%20%3D%200%3B%0A%20%20%20%20%20%20%20%20return%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20var%20u1%20%3D%0A%20%20%20%20%20%20%20%20(cLocalX%20-%20v1.x)%20*%20(v2.x%20-%20v1.x)%20%2B%20(cLocalY%20-%20v1.y)%20*%20(v2.y%20-%20v1.y)%3B%0A%20%20%20%20%20%20var%20u2%20%3D%0A%20%20%20%20%20%20%20%20(cLocalX%20-%20v2.x)%20*%20(v1.x%20-%20v2.x)%20%2B%20(cLocalY%20-%20v2.y)%20*%20(v1.y%20-%20v2.y)%3B%0A%20%20%20%20%20%20if%20(u1%20%3C%3D%200.0)%20%7B%0A%20%20%20%20%20%20%20%20if%20(%0A%20%20%20%20%20%20%20%20%20%20(cLocalX%20-%20v1.x)%20*%20(cLocalX%20-%20v1.x)%20%2B%0A%20%20%20%20%20%20%20%20%20%20%20%20(cLocalY%20-%20v1.y)%20*%20(cLocalY%20-%20v1.y)%20%3E%0A%20%20%20%20%20%20%20%20%20%20radius%20*%20radius%0A%20%20%20%20%20%20%20%20)%0A%20%20%20%20%20%20%20%20%20%20return%3B%0A%20%20%20%20%20%20%20%20manifold.m_pointCount%20%3D%201%3B%0A%20%20%20%20%20%20%20%20manifold.m_type%20%3D%20b2Manifold.e_faceA%3B%0A%20%20%20%20%20%20%20%20manifold.m_localPlaneNormal.x%20%3D%20cLocalX%20-%20v1.x%3B%0A%20%20%20%20%20%20%20%20manifold.m_localPlaneNormal.y%20%3D%20cLocalY%20-%20v1.y%3B%0A%20%20%20%20%20%20%20%20manifold.m_localPlaneNormal.Normalize()%3B%0A%20%20%20%20%20%20%20%20manifold.m_localPoint.SetV(v1)%3B%0A%20%20%20%20%20%20%20%20manifold.m_points%5B0%5D.m_localPoint.SetV(circle.m_p)%3B%0A%20%20%20%20%20%20%20%20manifold.m_points%5B0%5D.m_id.key%20%3D%200%3B%0A%20%20%20%20%20%20%7D%20else%20if%20(u2%20%3C%3D%200)%20%7B%0A%20%20%20%20%20%20%20%20if%20(%0A%20%20%20%20%20%20%20%20%20%20(cLocalX%20-%20v2.x)%20*%20(cLocalX%20-%20v2.x)%20%2B%0A%20%20%20%20%20%20%20%20%20%20%20%20(cLocalY%20-%20v2.y)%20*%20(cLocalY%20-%20v2.y)%20%3E%0A%20%20%20%20%20%20%20%20%20%20radius%20*%20radius%0A%20%20%20%20%20%20%20%20)%0A%20%20%20%20%20%20%20%20%20%20return%3B%0A%20%20%20%20%20%20%20%20manifold.m_pointCount%20%3D%201%3B%0A%20%20%20%20%20%20%20%20manifold.m_type%20%3D%20b2Manifold.e_faceA%3B%0A%20%20%20%20%20%20%20%20manifold.m_localPlaneNormal.x%20%3D%20cLocalX%20-%20v2.x%3B%0A%20%20%20%20%20%20%20%20manifold.m_localPlaneNormal.y%20%3D%20cLocalY%20-%20v2.y%3B%0A%20%20%20%20%20%20%20%20manifold.m_localPlaneNormal.Normalize()%3B%0A%20%20%20%20%20%20%20%20manifold.m_localPoint.SetV(v2)%3B%0A%20%20%20%20%20%20%20%20manifold.m_points%5B0%5D.m_localPoint.SetV(circle.m_p)%3B%0A%20%20%20%20%20%20%20%20manifold.m_points%5B0%5D.m_id.key%20%3D%200%3B%0A%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20var%20faceCenterX%20%3D%200.5%20*%20(v1.x%20%2B%20v2.x)%3B%0A%20%20%20%20%20%20%20%20var%20faceCenterY%20%3D%200.5%20*%20(v1.y%20%2B%20v2.y)%3B%0A%20%20%20%20%20%20%20%20separation%20%3D%0A%20%20%20%20%20%20%20%20%20%20(cLocalX%20-%20faceCenterX)%20*%20normals%5BvertIndex1%5D.x%20%2B%0A%20%20%20%20%20%20%20%20%20%20(cLocalY%20-%20faceCenterY)%20*%20normals%5BvertIndex1%5D.y%3B%0A%20%20%20%20%20%20%20%20if%20(separation%20%3E%20radius)%20return%3B%0A%20%20%20%20%20%20%20%20manifold.m_pointCount%20%3D%201%3B%0A%20%20%20%20%20%20%20%20manifold.m_type%20%3D%20b2Manifold.e_faceA%3B%0A%20%20%20%20%20%20%20%20manifold.m_localPlaneNormal.x%20%3D%20normals%5BvertIndex1%5D.x%3B%0A%20%20%20%20%20%20%20%20manifold.m_localPlaneNormal.y%20%3D%20normals%5BvertIndex1%5D.y%3B%0A%20%20%20%20%20%20%20%20manifold.m_localPlaneNormal.Normalize()%3B%0A%20%20%20%20%20%20%20%20manifold.m_localPoint.Set(faceCenterX%2C%20faceCenterY)%3B%0A%20%20%20%20%20%20%20%20manifold.m_points%5B0%5D.m_localPoint.SetV(circle.m_p)%3B%0A%20%20%20%20%20%20%20%20manifold.m_points%5B0%5D.m_id.key%20%3D%200%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2Collision.TestOverlap%20%3D%20function%20(a%2C%20b)%20%7B%0A%20%20%20%20%20%20var%20t1%20%3D%20b.lowerBound%3B%0A%20%20%20%20%20%20var%20t2%20%3D%20a.upperBound%3B%0A%20%20%20%20%20%20var%20d1X%20%3D%20t1.x%20-%20t2.x%3B%0A%20%20%20%20%20%20var%20d1Y%20%3D%20t1.y%20-%20t2.y%3B%0A%20%20%20%20%20%20t1%20%3D%20a.lowerBound%3B%0A%20%20%20%20%20%20t2%20%3D%20b.upperBound%3B%0A%20%20%20%20%20%20var%20d2X%20%3D%20t1.x%20-%20t2.x%3B%0A%20%20%20%20%20%20var%20d2Y%20%3D%20t1.y%20-%20t2.y%3B%0A%20%20%20%20%20%20if%20(d1X%20%3E%200.0%20%7C%7C%20d1Y%20%3E%200.0)%20return%20false%3B%0A%20%20%20%20%20%20if%20(d2X%20%3E%200.0%20%7C%7C%20d2Y%20%3E%200.0)%20return%20false%3B%0A%20%20%20%20%20%20return%20true%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20Box2D.postDefs.push(function%20()%20%7B%0A%20%20%20%20%20%20Box2D.Collision.b2Collision.s_incidentEdge%20%3D%0A%20%20%20%20%20%20%20%20b2Collision.MakeClipPointVector()%3B%0A%20%20%20%20%20%20Box2D.Collision.b2Collision.s_clipPoints1%20%3D%0A%20%20%20%20%20%20%20%20b2Collision.MakeClipPointVector()%3B%0A%20%20%20%20%20%20Box2D.Collision.b2Collision.s_clipPoints2%20%3D%0A%20%20%20%20%20%20%20%20b2Collision.MakeClipPointVector()%3B%0A%20%20%20%20%20%20Box2D.Collision.b2Collision.s_edgeAO%20%3D%20new%20Vector_a2j_Number(1)%3B%0A%20%20%20%20%20%20Box2D.Collision.b2Collision.s_edgeBO%20%3D%20new%20Vector_a2j_Number(1)%3B%0A%20%20%20%20%20%20Box2D.Collision.b2Collision.s_localTangent%20%3D%20new%20b2Vec2()%3B%0A%20%20%20%20%20%20Box2D.Collision.b2Collision.s_localNormal%20%3D%20new%20b2Vec2()%3B%0A%20%20%20%20%20%20Box2D.Collision.b2Collision.s_planePoint%20%3D%20new%20b2Vec2()%3B%0A%20%20%20%20%20%20Box2D.Collision.b2Collision.s_normal%20%3D%20new%20b2Vec2()%3B%0A%20%20%20%20%20%20Box2D.Collision.b2Collision.s_tangent%20%3D%20new%20b2Vec2()%3B%0A%20%20%20%20%20%20Box2D.Collision.b2Collision.s_tangent2%20%3D%20new%20b2Vec2()%3B%0A%20%20%20%20%20%20Box2D.Collision.b2Collision.s_v11%20%3D%20new%20b2Vec2()%3B%0A%20%20%20%20%20%20Box2D.Collision.b2Collision.s_v12%20%3D%20new%20b2Vec2()%3B%0A%20%20%20%20%20%20Box2D.Collision.b2Collision.b2CollidePolyTempVec%20%3D%20new%20b2Vec2()%3B%0A%20%20%20%20%20%20Box2D.Collision.b2Collision.b2_nullFeature%20%3D%200x000000ff%3B%0A%20%20%20%20%7D)%3B%0A%20%20%20%20b2ContactID.b2ContactID%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20this.features%20%3D%20new%20Features()%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2ContactID.prototype.b2ContactID%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20this.features._m_id%20%3D%20this%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2ContactID.prototype.Set%20%3D%20function%20(id)%20%7B%0A%20%20%20%20%20%20this.key%20%3D%20id._key%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2ContactID.prototype.Copy%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20var%20id%20%3D%20new%20b2ContactID()%3B%0A%20%20%20%20%20%20id.key%20%3D%20this.key%3B%0A%20%20%20%20%20%20return%20id%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20Object.defineProperty(b2ContactID.prototype%2C%20%22key%22%2C%20%7B%0A%20%20%20%20%20%20enumerable%3A%20false%2C%0A%20%20%20%20%20%20configurable%3A%20true%2C%0A%20%20%20%20%20%20get%3A%20function%20()%20%7B%0A%20%20%20%20%20%20%20%20return%20this._key%3B%0A%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%7D)%3B%0A%20%20%20%20Object.defineProperty(b2ContactID.prototype%2C%20%22key%22%2C%20%7B%0A%20%20%20%20%20%20enumerable%3A%20false%2C%0A%20%20%20%20%20%20configurable%3A%20true%2C%0A%20%20%20%20%20%20set%3A%20function%20(value)%20%7B%0A%20%20%20%20%20%20%20%20if%20(value%20%3D%3D%3D%20undefined)%20value%20%3D%200%3B%0A%20%20%20%20%20%20%20%20this._key%20%3D%20value%3B%0A%20%20%20%20%20%20%20%20this.features._referenceEdge%20%3D%20this._key%20%26%200x000000ff%3B%0A%20%20%20%20%20%20%20%20this.features._incidentEdge%20%3D%0A%20%20%20%20%20%20%20%20%20%20((this._key%20%26%200x0000ff00)%20%3E%3E%208)%20%26%200x000000ff%3B%0A%20%20%20%20%20%20%20%20this.features._incidentVertex%20%3D%0A%20%20%20%20%20%20%20%20%20%20((this._key%20%26%200x00ff0000)%20%3E%3E%2016)%20%26%200x000000ff%3B%0A%20%20%20%20%20%20%20%20this.features._flip%20%3D%20((this._key%20%26%200xff000000)%20%3E%3E%2024)%20%26%200x000000ff%3B%0A%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%7D)%3B%0A%20%20%20%20b2ContactPoint.b2ContactPoint%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20this.position%20%3D%20new%20b2Vec2()%3B%0A%20%20%20%20%20%20this.velocity%20%3D%20new%20b2Vec2()%3B%0A%20%20%20%20%20%20this.normal%20%3D%20new%20b2Vec2()%3B%0A%20%20%20%20%20%20this.id%20%3D%20new%20b2ContactID()%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2Distance.b2Distance%20%3D%20function%20()%20%7B%7D%3B%0A%20%20%20%20b2Distance.Distance%20%3D%20function%20(output%2C%20cache%2C%20input)%20%7B%0A%20%20%20%20%20%20%2B%2Bb2Distance.b2_gjkCalls%3B%0A%20%20%20%20%20%20var%20proxyA%20%3D%20input.proxyA%3B%0A%20%20%20%20%20%20var%20proxyB%20%3D%20input.proxyB%3B%0A%20%20%20%20%20%20var%20transformA%20%3D%20input.transformA%3B%0A%20%20%20%20%20%20var%20transformB%20%3D%20input.transformB%3B%0A%20%20%20%20%20%20var%20simplex%20%3D%20b2Distance.s_simplex%3B%0A%20%20%20%20%20%20simplex.ReadCache(cache%2C%20proxyA%2C%20transformA%2C%20proxyB%2C%20transformB)%3B%0A%20%20%20%20%20%20var%20vertices%20%3D%20simplex.m_vertices%3B%0A%20%20%20%20%20%20var%20k_maxIters%20%3D%2020%3B%0A%20%20%20%20%20%20var%20saveA%20%3D%20b2Distance.s_saveA%3B%0A%20%20%20%20%20%20var%20saveB%20%3D%20b2Distance.s_saveB%3B%0A%20%20%20%20%20%20var%20saveCount%20%3D%200%3B%0A%20%20%20%20%20%20var%20closestPoint%20%3D%20simplex.GetClosestPoint()%3B%0A%20%20%20%20%20%20var%20distanceSqr1%20%3D%20closestPoint.LengthSquared()%3B%0A%20%20%20%20%20%20var%20distanceSqr2%20%3D%20distanceSqr1%3B%0A%20%20%20%20%20%20var%20i%20%3D%200%3B%0A%20%20%20%20%20%20var%20p%3B%0A%20%20%20%20%20%20var%20iter%20%3D%200%3B%0A%20%20%20%20%20%20while%20(iter%20%3C%20k_maxIters)%20%7B%0A%20%20%20%20%20%20%20%20saveCount%20%3D%20simplex.m_count%3B%0A%20%20%20%20%20%20%20%20for%20(i%20%3D%200%3B%20i%20%3C%20saveCount%3B%20i%2B%2B)%20%7B%0A%20%20%20%20%20%20%20%20%20%20saveA%5Bi%5D%20%3D%20vertices%5Bi%5D.indexA%3B%0A%20%20%20%20%20%20%20%20%20%20saveB%5Bi%5D%20%3D%20vertices%5Bi%5D.indexB%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20switch%20(simplex.m_count)%20%7B%0A%20%20%20%20%20%20%20%20%20%20case%201%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20break%3B%0A%20%20%20%20%20%20%20%20%20%20case%202%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20simplex.Solve2()%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20break%3B%0A%20%20%20%20%20%20%20%20%20%20case%203%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20simplex.Solve3()%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20break%3B%0A%20%20%20%20%20%20%20%20%20%20default%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20b2Settings.b2Assert(false)%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20if%20(simplex.m_count%20%3D%3D%203)%20%7B%0A%20%20%20%20%20%20%20%20%20%20break%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20p%20%3D%20simplex.GetClosestPoint()%3B%0A%20%20%20%20%20%20%20%20distanceSqr2%20%3D%20p.LengthSquared()%3B%0A%20%20%20%20%20%20%20%20if%20(distanceSqr2%20%3E%20distanceSqr1)%20%7B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20distanceSqr1%20%3D%20distanceSqr2%3B%0A%20%20%20%20%20%20%20%20var%20d%20%3D%20simplex.GetSearchDirection()%3B%0A%20%20%20%20%20%20%20%20if%20(d.LengthSquared()%20%3C%20Number.MIN_VALUE%20*%20Number.MIN_VALUE)%20%7B%0A%20%20%20%20%20%20%20%20%20%20break%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20var%20vertex%20%3D%20vertices%5Bsimplex.m_count%5D%3B%0A%20%20%20%20%20%20%20%20vertex.indexA%20%3D%20proxyA.GetSupport(%0A%20%20%20%20%20%20%20%20%20%20b2Math.MulTMV(transformA.R%2C%20d.GetNegative())%0A%20%20%20%20%20%20%20%20)%3B%0A%20%20%20%20%20%20%20%20vertex.wA%20%3D%20b2Math.MulX(transformA%2C%20proxyA.GetVertex(vertex.indexA))%3B%0A%20%20%20%20%20%20%20%20vertex.indexB%20%3D%20proxyB.GetSupport(b2Math.MulTMV(transformB.R%2C%20d))%3B%0A%20%20%20%20%20%20%20%20vertex.wB%20%3D%20b2Math.MulX(transformB%2C%20proxyB.GetVertex(vertex.indexB))%3B%0A%20%20%20%20%20%20%20%20vertex.w%20%3D%20b2Math.SubtractVV(vertex.wB%2C%20vertex.wA)%3B%0A%20%20%20%20%20%20%20%20%2B%2Biter%3B%0A%20%20%20%20%20%20%20%20%2B%2Bb2Distance.b2_gjkIters%3B%0A%20%20%20%20%20%20%20%20var%20duplicate%20%3D%20false%3B%0A%20%20%20%20%20%20%20%20for%20(i%20%3D%200%3B%20i%20%3C%20saveCount%3B%20i%2B%2B)%20%7B%0A%20%20%20%20%20%20%20%20%20%20if%20(vertex.indexA%20%3D%3D%20saveA%5Bi%5D%20%26%26%20vertex.indexB%20%3D%3D%20saveB%5Bi%5D)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20duplicate%20%3D%20true%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20break%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20if%20(duplicate)%20%7B%0A%20%20%20%20%20%20%20%20%20%20break%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%2B%2Bsimplex.m_count%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20b2Distance.b2_gjkMaxIters%20%3D%20b2Math.Max(b2Distance.b2_gjkMaxIters%2C%20iter)%3B%0A%20%20%20%20%20%20simplex.GetWitnessPoints(output.pointA%2C%20output.pointB)%3B%0A%20%20%20%20%20%20output.distance%20%3D%20b2Math%0A%20%20%20%20%20%20%20%20.SubtractVV(output.pointA%2C%20output.pointB)%0A%20%20%20%20%20%20%20%20.Length()%3B%0A%20%20%20%20%20%20output.iterations%20%3D%20iter%3B%0A%20%20%20%20%20%20simplex.WriteCache(cache)%3B%0A%20%20%20%20%20%20if%20(input.useRadii)%20%7B%0A%20%20%20%20%20%20%20%20var%20rA%20%3D%20proxyA.m_radius%3B%0A%20%20%20%20%20%20%20%20var%20rB%20%3D%20proxyB.m_radius%3B%0A%20%20%20%20%20%20%20%20if%20(output.distance%20%3E%20rA%20%2B%20rB%20%26%26%20output.distance%20%3E%20Number.MIN_VALUE)%20%7B%0A%20%20%20%20%20%20%20%20%20%20output.distance%20-%3D%20rA%20%2B%20rB%3B%0A%20%20%20%20%20%20%20%20%20%20var%20normal%20%3D%20b2Math.SubtractVV(output.pointB%2C%20output.pointA)%3B%0A%20%20%20%20%20%20%20%20%20%20normal.Normalize()%3B%0A%20%20%20%20%20%20%20%20%20%20output.pointA.x%20%2B%3D%20rA%20*%20normal.x%3B%0A%20%20%20%20%20%20%20%20%20%20output.pointA.y%20%2B%3D%20rA%20*%20normal.y%3B%0A%20%20%20%20%20%20%20%20%20%20output.pointB.x%20-%3D%20rB%20*%20normal.x%3B%0A%20%20%20%20%20%20%20%20%20%20output.pointB.y%20-%3D%20rB%20*%20normal.y%3B%0A%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20p%20%3D%20new%20b2Vec2()%3B%0A%20%20%20%20%20%20%20%20%20%20p.x%20%3D%200.5%20*%20(output.pointA.x%20%2B%20output.pointB.x)%3B%0A%20%20%20%20%20%20%20%20%20%20p.y%20%3D%200.5%20*%20(output.pointA.y%20%2B%20output.pointB.y)%3B%0A%20%20%20%20%20%20%20%20%20%20output.pointA.x%20%3D%20output.pointB.x%20%3D%20p.x%3B%0A%20%20%20%20%20%20%20%20%20%20output.pointA.y%20%3D%20output.pointB.y%20%3D%20p.y%3B%0A%20%20%20%20%20%20%20%20%20%20output.distance%20%3D%200.0%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%3B%0A%20%20%20%20Box2D.postDefs.push(function%20()%20%7B%0A%20%20%20%20%20%20Box2D.Collision.b2Distance.s_simplex%20%3D%20new%20b2Simplex()%3B%0A%20%20%20%20%20%20Box2D.Collision.b2Distance.s_saveA%20%3D%20new%20Vector_a2j_Number(3)%3B%0A%20%20%20%20%20%20Box2D.Collision.b2Distance.s_saveB%20%3D%20new%20Vector_a2j_Number(3)%3B%0A%20%20%20%20%7D)%3B%0A%20%20%20%20b2DistanceInput.b2DistanceInput%20%3D%20function%20()%20%7B%7D%3B%0A%20%20%20%20b2DistanceOutput.b2DistanceOutput%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20this.pointA%20%3D%20new%20b2Vec2()%3B%0A%20%20%20%20%20%20this.pointB%20%3D%20new%20b2Vec2()%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2DistanceProxy.b2DistanceProxy%20%3D%20function%20()%20%7B%7D%3B%0A%20%20%20%20b2DistanceProxy.prototype.Set%20%3D%20function%20(shape)%20%7B%0A%20%20%20%20%20%20switch%20(shape.GetType())%20%7B%0A%20%20%20%20%20%20%20%20case%20b2Shape.e_circleShape%3A%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20var%20circle%20%3D%20shape%20instanceof%20b2CircleShape%20%3F%20shape%20%3A%20null%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20this.m_vertices%20%3D%20new%20Vector(1%2C%20true)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20this.m_vertices%5B0%5D%20%3D%20circle.m_p%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20this.m_count%20%3D%201%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20this.m_radius%20%3D%20circle.m_radius%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20break%3B%0A%20%20%20%20%20%20%20%20case%20b2Shape.e_polygonShape%3A%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20var%20polygon%20%3D%20shape%20instanceof%20b2PolygonShape%20%3F%20shape%20%3A%20null%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20this.m_vertices%20%3D%20polygon.m_vertices%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20this.m_count%20%3D%20polygon.m_vertexCount%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20this.m_radius%20%3D%20polygon.m_radius%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20break%3B%0A%20%20%20%20%20%20%20%20default%3A%0A%20%20%20%20%20%20%20%20%20%20b2Settings.b2Assert(false)%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2DistanceProxy.prototype.GetSupport%20%3D%20function%20(d)%20%7B%0A%20%20%20%20%20%20var%20bestIndex%20%3D%200%3B%0A%20%20%20%20%20%20var%20bestValue%20%3D%20this.m_vertices%5B0%5D.x%20*%20d.x%20%2B%20this.m_vertices%5B0%5D.y%20*%20d.y%3B%0A%20%20%20%20%20%20for%20(var%20i%20%3D%201%3B%20i%20%3C%20this.m_count%3B%20%2B%2Bi)%20%7B%0A%20%20%20%20%20%20%20%20var%20value%20%3D%20this.m_vertices%5Bi%5D.x%20*%20d.x%20%2B%20this.m_vertices%5Bi%5D.y%20*%20d.y%3B%0A%20%20%20%20%20%20%20%20if%20(value%20%3E%20bestValue)%20%7B%0A%20%20%20%20%20%20%20%20%20%20bestIndex%20%3D%20i%3B%0A%20%20%20%20%20%20%20%20%20%20bestValue%20%3D%20value%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20return%20bestIndex%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2DistanceProxy.prototype.GetSupportVertex%20%3D%20function%20(d)%20%7B%0A%20%20%20%20%20%20var%20bestIndex%20%3D%200%3B%0A%20%20%20%20%20%20var%20bestValue%20%3D%20this.m_vertices%5B0%5D.x%20*%20d.x%20%2B%20this.m_vertices%5B0%5D.y%20*%20d.y%3B%0A%20%20%20%20%20%20for%20(var%20i%20%3D%201%3B%20i%20%3C%20this.m_count%3B%20%2B%2Bi)%20%7B%0A%20%20%20%20%20%20%20%20var%20value%20%3D%20this.m_vertices%5Bi%5D.x%20*%20d.x%20%2B%20this.m_vertices%5Bi%5D.y%20*%20d.y%3B%0A%20%20%20%20%20%20%20%20if%20(value%20%3E%20bestValue)%20%7B%0A%20%20%20%20%20%20%20%20%20%20bestIndex%20%3D%20i%3B%0A%20%20%20%20%20%20%20%20%20%20bestValue%20%3D%20value%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20return%20this.m_vertices%5BbestIndex%5D%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2DistanceProxy.prototype.GetVertexCount%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20return%20this.m_count%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2DistanceProxy.prototype.GetVertex%20%3D%20function%20(index)%20%7B%0A%20%20%20%20%20%20if%20(index%20%3D%3D%3D%20undefined)%20index%20%3D%200%3B%0A%20%20%20%20%20%20b2Settings.b2Assert(0%20%3C%3D%20index%20%26%26%20index%20%3C%20this.m_count)%3B%0A%20%20%20%20%20%20return%20this.m_vertices%5Bindex%5D%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2DynamicTree.b2DynamicTree%20%3D%20function%20()%20%7B%7D%3B%0A%20%20%20%20b2DynamicTree.prototype.b2DynamicTree%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20this.m_root%20%3D%20null%3B%0A%20%20%20%20%20%20this.m_freeList%20%3D%20null%3B%0A%20%20%20%20%20%20this.m_path%20%3D%200%3B%0A%20%20%20%20%20%20this.m_insertionCount%20%3D%200%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2DynamicTree.prototype.CreateProxy%20%3D%20function%20(aabb%2C%20userData)%20%7B%0A%20%20%20%20%20%20var%20node%20%3D%20this.AllocateNode()%3B%0A%20%20%20%20%20%20var%20extendX%20%3D%20b2Settings.b2_aabbExtension%3B%0A%20%20%20%20%20%20var%20extendY%20%3D%20b2Settings.b2_aabbExtension%3B%0A%20%20%20%20%20%20node.aabb.lowerBound.x%20%3D%20aabb.lowerBound.x%20-%20extendX%3B%0A%20%20%20%20%20%20node.aabb.lowerBound.y%20%3D%20aabb.lowerBound.y%20-%20extendY%3B%0A%20%20%20%20%20%20node.aabb.upperBound.x%20%3D%20aabb.upperBound.x%20%2B%20extendX%3B%0A%20%20%20%20%20%20node.aabb.upperBound.y%20%3D%20aabb.upperBound.y%20%2B%20extendY%3B%0A%20%20%20%20%20%20node.userData%20%3D%20userData%3B%0A%20%20%20%20%20%20this.InsertLeaf(node)%3B%0A%20%20%20%20%20%20return%20node%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2DynamicTree.prototype.DestroyProxy%20%3D%20function%20(proxy)%20%7B%0A%20%20%20%20%20%20this.RemoveLeaf(proxy)%3B%0A%20%20%20%20%20%20this.FreeNode(proxy)%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2DynamicTree.prototype.MoveProxy%20%3D%20function%20(proxy%2C%20aabb%2C%20displacement)%20%7B%0A%20%20%20%20%20%20b2Settings.b2Assert(proxy.IsLeaf())%3B%0A%20%20%20%20%20%20if%20(proxy.aabb.Contains(aabb))%20%7B%0A%20%20%20%20%20%20%20%20return%20false%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20this.RemoveLeaf(proxy)%3B%0A%20%20%20%20%20%20var%20extendX%20%3D%0A%20%20%20%20%20%20%20%20b2Settings.b2_aabbExtension%20%2B%0A%20%20%20%20%20%20%20%20b2Settings.b2_aabbMultiplier%20*%0A%20%20%20%20%20%20%20%20%20%20(displacement.x%20%3E%200%20%3F%20displacement.x%20%3A%20-displacement.x)%3B%0A%20%20%20%20%20%20var%20extendY%20%3D%0A%20%20%20%20%20%20%20%20b2Settings.b2_aabbExtension%20%2B%0A%20%20%20%20%20%20%20%20b2Settings.b2_aabbMultiplier%20*%0A%20%20%20%20%20%20%20%20%20%20(displacement.y%20%3E%200%20%3F%20displacement.y%20%3A%20-displacement.y)%3B%0A%20%20%20%20%20%20proxy.aabb.lowerBound.x%20%3D%20aabb.lowerBound.x%20-%20extendX%3B%0A%20%20%20%20%20%20proxy.aabb.lowerBound.y%20%3D%20aabb.lowerBound.y%20-%20extendY%3B%0A%20%20%20%20%20%20proxy.aabb.upperBound.x%20%3D%20aabb.upperBound.x%20%2B%20extendX%3B%0A%20%20%20%20%20%20proxy.aabb.upperBound.y%20%3D%20aabb.upperBound.y%20%2B%20extendY%3B%0A%20%20%20%20%20%20this.InsertLeaf(proxy)%3B%0A%20%20%20%20%20%20return%20true%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2DynamicTree.prototype.Rebalance%20%3D%20function%20(iterations)%20%7B%0A%20%20%20%20%20%20if%20(iterations%20%3D%3D%3D%20undefined)%20iterations%20%3D%200%3B%0A%20%20%20%20%20%20if%20(this.m_root%20%3D%3D%20null)%20return%3B%0A%20%20%20%20%20%20for%20(var%20i%20%3D%200%3B%20i%20%3C%20iterations%3B%20i%2B%2B)%20%7B%0A%20%20%20%20%20%20%20%20var%20node%20%3D%20this.m_root%3B%0A%20%20%20%20%20%20%20%20var%20bit%20%3D%200%3B%0A%20%20%20%20%20%20%20%20while%20(node.IsLeaf()%20%3D%3D%20false)%20%7B%0A%20%20%20%20%20%20%20%20%20%20node%20%3D%20(this.m_path%20%3E%3E%20bit)%20%26%201%20%3F%20node.child2%20%3A%20node.child1%3B%0A%20%20%20%20%20%20%20%20%20%20bit%20%3D%20(bit%20%2B%201)%20%26%2031%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%2B%2Bthis.m_path%3B%0A%20%20%20%20%20%20%20%20this.RemoveLeaf(node)%3B%0A%20%20%20%20%20%20%20%20this.InsertLeaf(node)%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2DynamicTree.prototype.GetFatAABB%20%3D%20function%20(proxy)%20%7B%0A%20%20%20%20%20%20return%20proxy.aabb%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2DynamicTree.prototype.GetUserData%20%3D%20function%20(proxy)%20%7B%0A%20%20%20%20%20%20return%20proxy.userData%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2DynamicTree.prototype.Query%20%3D%20function%20(callback%2C%20aabb)%20%7B%0A%20%20%20%20%20%20if%20(this.m_root%20%3D%3D%20null)%20return%3B%0A%20%20%20%20%20%20var%20stack%20%3D%20new%20Vector()%3B%0A%20%20%20%20%20%20var%20count%20%3D%200%3B%0A%20%20%20%20%20%20stack%5Bcount%2B%2B%5D%20%3D%20this.m_root%3B%0A%20%20%20%20%20%20while%20(count%20%3E%200)%20%7B%0A%20%20%20%20%20%20%20%20var%20node%20%3D%20stack%5B--count%5D%3B%0A%20%20%20%20%20%20%20%20if%20(node.aabb.TestOverlap(aabb))%20%7B%0A%20%20%20%20%20%20%20%20%20%20if%20(node.IsLeaf())%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20var%20proceed%20%3D%20callback(node)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(!proceed)%20return%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20stack%5Bcount%2B%2B%5D%20%3D%20node.child1%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20stack%5Bcount%2B%2B%5D%20%3D%20node.child2%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2DynamicTree.prototype.RayCast%20%3D%20function%20(callback%2C%20input)%20%7B%0A%20%20%20%20%20%20if%20(this.m_root%20%3D%3D%20null)%20return%3B%0A%20%20%20%20%20%20var%20p1%20%3D%20input.p1%3B%0A%20%20%20%20%20%20var%20p2%20%3D%20input.p2%3B%0A%20%20%20%20%20%20var%20r%20%3D%20b2Math.SubtractVV(p1%2C%20p2)%3B%0A%20%20%20%20%20%20r.Normalize()%3B%0A%20%20%20%20%20%20var%20v%20%3D%20b2Math.CrossFV(1.0%2C%20r)%3B%0A%20%20%20%20%20%20var%20abs_v%20%3D%20b2Math.AbsV(v)%3B%0A%20%20%20%20%20%20var%20maxFraction%20%3D%20input.maxFraction%3B%0A%20%20%20%20%20%20var%20segmentAABB%20%3D%20new%20b2AABB()%3B%0A%20%20%20%20%20%20var%20tX%20%3D%200%3B%0A%20%20%20%20%20%20var%20tY%20%3D%200%3B%0A%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20tX%20%3D%20p1.x%20%2B%20maxFraction%20*%20(p2.x%20-%20p1.x)%3B%0A%20%20%20%20%20%20%20%20tY%20%3D%20p1.y%20%2B%20maxFraction%20*%20(p2.y%20-%20p1.y)%3B%0A%20%20%20%20%20%20%20%20segmentAABB.lowerBound.x%20%3D%20Math.min(p1.x%2C%20tX)%3B%0A%20%20%20%20%20%20%20%20segmentAABB.lowerBound.y%20%3D%20Math.min(p1.y%2C%20tY)%3B%0A%20%20%20%20%20%20%20%20segmentAABB.upperBound.x%20%3D%20Math.max(p1.x%2C%20tX)%3B%0A%20%20%20%20%20%20%20%20segmentAABB.upperBound.y%20%3D%20Math.max(p1.y%2C%20tY)%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20var%20stack%20%3D%20new%20Vector()%3B%0A%20%20%20%20%20%20var%20count%20%3D%200%3B%0A%20%20%20%20%20%20stack%5Bcount%2B%2B%5D%20%3D%20this.m_root%3B%0A%20%20%20%20%20%20while%20(count%20%3E%200)%20%7B%0A%20%20%20%20%20%20%20%20var%20node%20%3D%20stack%5B--count%5D%3B%0A%20%20%20%20%20%20%20%20if%20(node.aabb.TestOverlap(segmentAABB)%20%3D%3D%20false)%20%7B%0A%20%20%20%20%20%20%20%20%20%20continue%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20var%20c%20%3D%20node.aabb.GetCenter()%3B%0A%20%20%20%20%20%20%20%20var%20h%20%3D%20node.aabb.GetExtents()%3B%0A%20%20%20%20%20%20%20%20var%20separation%20%3D%0A%20%20%20%20%20%20%20%20%20%20Math.abs(v.x%20*%20(p1.x%20-%20c.x)%20%2B%20v.y%20*%20(p1.y%20-%20c.y))%20-%0A%20%20%20%20%20%20%20%20%20%20abs_v.x%20*%20h.x%20-%0A%20%20%20%20%20%20%20%20%20%20abs_v.y%20*%20h.y%3B%0A%20%20%20%20%20%20%20%20if%20(separation%20%3E%200.0)%20continue%3B%0A%20%20%20%20%20%20%20%20if%20(node.IsLeaf())%20%7B%0A%20%20%20%20%20%20%20%20%20%20var%20subInput%20%3D%20new%20b2RayCastInput()%3B%0A%20%20%20%20%20%20%20%20%20%20subInput.p1%20%3D%20input.p1%3B%0A%20%20%20%20%20%20%20%20%20%20subInput.p2%20%3D%20input.p2%3B%0A%20%20%20%20%20%20%20%20%20%20subInput.maxFraction%20%3D%20input.maxFraction%3B%0A%20%20%20%20%20%20%20%20%20%20maxFraction%20%3D%20callback(subInput%2C%20node)%3B%0A%20%20%20%20%20%20%20%20%20%20if%20(maxFraction%20%3D%3D%200.0)%20return%3B%0A%20%20%20%20%20%20%20%20%20%20if%20(maxFraction%20%3E%200.0)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20tX%20%3D%20p1.x%20%2B%20maxFraction%20*%20(p2.x%20-%20p1.x)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20tY%20%3D%20p1.y%20%2B%20maxFraction%20*%20(p2.y%20-%20p1.y)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20segmentAABB.lowerBound.x%20%3D%20Math.min(p1.x%2C%20tX)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20segmentAABB.lowerBound.y%20%3D%20Math.min(p1.y%2C%20tY)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20segmentAABB.upperBound.x%20%3D%20Math.max(p1.x%2C%20tX)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20segmentAABB.upperBound.y%20%3D%20Math.max(p1.y%2C%20tY)%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20stack%5Bcount%2B%2B%5D%20%3D%20node.child1%3B%0A%20%20%20%20%20%20%20%20%20%20stack%5Bcount%2B%2B%5D%20%3D%20node.child2%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2DynamicTree.prototype.AllocateNode%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20if%20(this.m_freeList)%20%7B%0A%20%20%20%20%20%20%20%20var%20node%20%3D%20this.m_freeList%3B%0A%20%20%20%20%20%20%20%20this.m_freeList%20%3D%20node.parent%3B%0A%20%20%20%20%20%20%20%20node.parent%20%3D%20null%3B%0A%20%20%20%20%20%20%20%20node.child1%20%3D%20null%3B%0A%20%20%20%20%20%20%20%20node.child2%20%3D%20null%3B%0A%20%20%20%20%20%20%20%20return%20node%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20return%20new%20b2DynamicTreeNode()%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2DynamicTree.prototype.FreeNode%20%3D%20function%20(node)%20%7B%0A%20%20%20%20%20%20node.parent%20%3D%20this.m_freeList%3B%0A%20%20%20%20%20%20this.m_freeList%20%3D%20node%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2DynamicTree.prototype.InsertLeaf%20%3D%20function%20(leaf)%20%7B%0A%20%20%20%20%20%20%2B%2Bthis.m_insertionCount%3B%0A%20%20%20%20%20%20if%20(this.m_root%20%3D%3D%20null)%20%7B%0A%20%20%20%20%20%20%20%20this.m_root%20%3D%20leaf%3B%0A%20%20%20%20%20%20%20%20this.m_root.parent%20%3D%20null%3B%0A%20%20%20%20%20%20%20%20return%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20var%20center%20%3D%20leaf.aabb.GetCenter()%3B%0A%20%20%20%20%20%20var%20sibling%20%3D%20this.m_root%3B%0A%20%20%20%20%20%20if%20(sibling.IsLeaf()%20%3D%3D%20false)%20%7B%0A%20%20%20%20%20%20%20%20do%20%7B%0A%20%20%20%20%20%20%20%20%20%20var%20child1%20%3D%20sibling.child1%3B%0A%20%20%20%20%20%20%20%20%20%20var%20child2%20%3D%20sibling.child2%3B%0A%20%20%20%20%20%20%20%20%20%20var%20norm1%20%3D%0A%20%20%20%20%20%20%20%20%20%20%20%20Math.abs(%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20(child1.aabb.lowerBound.x%20%2B%20child1.aabb.upperBound.x)%20%2F%202%20-%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20center.x%0A%20%20%20%20%20%20%20%20%20%20%20%20)%20%2B%0A%20%20%20%20%20%20%20%20%20%20%20%20Math.abs(%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20(child1.aabb.lowerBound.y%20%2B%20child1.aabb.upperBound.y)%20%2F%202%20-%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20center.y%0A%20%20%20%20%20%20%20%20%20%20%20%20)%3B%0A%20%20%20%20%20%20%20%20%20%20var%20norm2%20%3D%0A%20%20%20%20%20%20%20%20%20%20%20%20Math.abs(%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20(child2.aabb.lowerBound.x%20%2B%20child2.aabb.upperBound.x)%20%2F%202%20-%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20center.x%0A%20%20%20%20%20%20%20%20%20%20%20%20)%20%2B%0A%20%20%20%20%20%20%20%20%20%20%20%20Math.abs(%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20(child2.aabb.lowerBound.y%20%2B%20child2.aabb.upperBound.y)%20%2F%202%20-%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20center.y%0A%20%20%20%20%20%20%20%20%20%20%20%20)%3B%0A%20%20%20%20%20%20%20%20%20%20if%20(norm1%20%3C%20norm2)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20sibling%20%3D%20child1%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20sibling%20%3D%20child2%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%20while%20(sibling.IsLeaf()%20%3D%3D%20false)%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20var%20node1%20%3D%20sibling.parent%3B%0A%20%20%20%20%20%20var%20node2%20%3D%20this.AllocateNode()%3B%0A%20%20%20%20%20%20node2.parent%20%3D%20node1%3B%0A%20%20%20%20%20%20node2.userData%20%3D%20null%3B%0A%20%20%20%20%20%20node2.aabb.Combine(leaf.aabb%2C%20sibling.aabb)%3B%0A%20%20%20%20%20%20if%20(node1)%20%7B%0A%20%20%20%20%20%20%20%20if%20(sibling.parent.child1%20%3D%3D%20sibling)%20%7B%0A%20%20%20%20%20%20%20%20%20%20node1.child1%20%3D%20node2%3B%0A%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20node1.child2%20%3D%20node2%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20node2.child1%20%3D%20sibling%3B%0A%20%20%20%20%20%20%20%20node2.child2%20%3D%20leaf%3B%0A%20%20%20%20%20%20%20%20sibling.parent%20%3D%20node2%3B%0A%20%20%20%20%20%20%20%20leaf.parent%20%3D%20node2%3B%0A%20%20%20%20%20%20%20%20do%20%7B%0A%20%20%20%20%20%20%20%20%20%20if%20(node1.aabb.Contains(node2.aabb))%20break%3B%0A%20%20%20%20%20%20%20%20%20%20node1.aabb.Combine(node1.child1.aabb%2C%20node1.child2.aabb)%3B%0A%20%20%20%20%20%20%20%20%20%20node2%20%3D%20node1%3B%0A%20%20%20%20%20%20%20%20%20%20node1%20%3D%20node1.parent%3B%0A%20%20%20%20%20%20%20%20%7D%20while%20(node1)%3B%0A%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20node2.child1%20%3D%20sibling%3B%0A%20%20%20%20%20%20%20%20node2.child2%20%3D%20leaf%3B%0A%20%20%20%20%20%20%20%20sibling.parent%20%3D%20node2%3B%0A%20%20%20%20%20%20%20%20leaf.parent%20%3D%20node2%3B%0A%20%20%20%20%20%20%20%20this.m_root%20%3D%20node2%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2DynamicTree.prototype.RemoveLeaf%20%3D%20function%20(leaf)%20%7B%0A%20%20%20%20%20%20if%20(leaf%20%3D%3D%20this.m_root)%20%7B%0A%20%20%20%20%20%20%20%20this.m_root%20%3D%20null%3B%0A%20%20%20%20%20%20%20%20return%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20var%20node2%20%3D%20leaf.parent%3B%0A%20%20%20%20%20%20var%20node1%20%3D%20node2.parent%3B%0A%20%20%20%20%20%20var%20sibling%3B%0A%20%20%20%20%20%20if%20(node2.child1%20%3D%3D%20leaf)%20%7B%0A%20%20%20%20%20%20%20%20sibling%20%3D%20node2.child2%3B%0A%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20sibling%20%3D%20node2.child1%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20if%20(node1)%20%7B%0A%20%20%20%20%20%20%20%20if%20(node1.child1%20%3D%3D%20node2)%20%7B%0A%20%20%20%20%20%20%20%20%20%20node1.child1%20%3D%20sibling%3B%0A%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20node1.child2%20%3D%20sibling%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20sibling.parent%20%3D%20node1%3B%0A%20%20%20%20%20%20%20%20this.FreeNode(node2)%3B%0A%20%20%20%20%20%20%20%20while%20(node1)%20%7B%0A%20%20%20%20%20%20%20%20%20%20var%20oldAABB%20%3D%20node1.aabb%3B%0A%20%20%20%20%20%20%20%20%20%20node1.aabb%20%3D%20b2AABB.Combine(node1.child1.aabb%2C%20node1.child2.aabb)%3B%0A%20%20%20%20%20%20%20%20%20%20if%20(oldAABB.Contains(node1.aabb))%20break%3B%0A%20%20%20%20%20%20%20%20%20%20node1%20%3D%20node1.parent%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20this.m_root%20%3D%20sibling%3B%0A%20%20%20%20%20%20%20%20sibling.parent%20%3D%20null%3B%0A%20%20%20%20%20%20%20%20this.FreeNode(node2)%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2DynamicTreeBroadPhase.b2DynamicTreeBroadPhase%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20this.m_tree%20%3D%20new%20b2DynamicTree()%3B%0A%20%20%20%20%20%20this.m_moveBuffer%20%3D%20new%20Vector()%3B%0A%20%20%20%20%20%20this.m_pairBuffer%20%3D%20new%20Vector()%3B%0A%20%20%20%20%20%20this.m_pairCount%20%3D%200%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2DynamicTreeBroadPhase.prototype.CreateProxy%20%3D%20function%20(aabb%2C%20userData)%20%7B%0A%20%20%20%20%20%20var%20proxy%20%3D%20this.m_tree.CreateProxy(aabb%2C%20userData)%3B%0A%20%20%20%20%20%20%2B%2Bthis.m_proxyCount%3B%0A%20%20%20%20%20%20this.BufferMove(proxy)%3B%0A%20%20%20%20%20%20return%20proxy%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2DynamicTreeBroadPhase.prototype.DestroyProxy%20%3D%20function%20(proxy)%20%7B%0A%20%20%20%20%20%20this.UnBufferMove(proxy)%3B%0A%20%20%20%20%20%20--this.m_proxyCount%3B%0A%20%20%20%20%20%20this.m_tree.DestroyProxy(proxy)%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2DynamicTreeBroadPhase.prototype.MoveProxy%20%3D%20function%20(%0A%20%20%20%20%20%20proxy%2C%0A%20%20%20%20%20%20aabb%2C%0A%20%20%20%20%20%20displacement%0A%20%20%20%20)%20%7B%0A%20%20%20%20%20%20var%20buffer%20%3D%20this.m_tree.MoveProxy(proxy%2C%20aabb%2C%20displacement)%3B%0A%20%20%20%20%20%20if%20(buffer)%20%7B%0A%20%20%20%20%20%20%20%20this.BufferMove(proxy)%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2DynamicTreeBroadPhase.prototype.TestOverlap%20%3D%20function%20(proxyA%2C%20proxyB)%20%7B%0A%20%20%20%20%20%20var%20aabbA%20%3D%20this.m_tree.GetFatAABB(proxyA)%3B%0A%20%20%20%20%20%20var%20aabbB%20%3D%20this.m_tree.GetFatAABB(proxyB)%3B%0A%20%20%20%20%20%20return%20aabbA.TestOverlap(aabbB)%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2DynamicTreeBroadPhase.prototype.GetUserData%20%3D%20function%20(proxy)%20%7B%0A%20%20%20%20%20%20return%20this.m_tree.GetUserData(proxy)%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2DynamicTreeBroadPhase.prototype.GetFatAABB%20%3D%20function%20(proxy)%20%7B%0A%20%20%20%20%20%20return%20this.m_tree.GetFatAABB(proxy)%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2DynamicTreeBroadPhase.prototype.GetProxyCount%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20return%20this.m_proxyCount%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2DynamicTreeBroadPhase.prototype.UpdatePairs%20%3D%20function%20(callback)%20%7B%0A%20%20%20%20%20%20var%20__this%20%3D%20this%3B%0A%20%20%20%20%20%20__this.m_pairCount%20%3D%200%3B%0A%20%20%20%20%20%20var%20i%20%3D%200%2C%0A%20%20%20%20%20%20%20%20queryProxy%3B%0A%20%20%20%20%20%20function%20QueryCallback(proxy)%20%7B%0A%20%20%20%20%20%20%20%20if%20(proxy%20%3D%3D%20queryProxy)%20return%20true%3B%0A%20%20%20%20%20%20%20%20if%20(__this.m_pairCount%20%3D%3D%20__this.m_pairBuffer.length)%20%7B%0A%20%20%20%20%20%20%20%20%20%20__this.m_pairBuffer%5B__this.m_pairCount%5D%20%3D%20new%20b2DynamicTreePair()%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20var%20pair%20%3D%20__this.m_pairBuffer%5B__this.m_pairCount%5D%3B%0A%20%20%20%20%20%20%20%20pair.proxyA%20%3D%20proxy%20%3C%20queryProxy%20%3F%20proxy%20%3A%20queryProxy%3B%0A%20%20%20%20%20%20%20%20pair.proxyB%20%3D%20proxy%20%3E%3D%20queryProxy%20%3F%20proxy%20%3A%20queryProxy%3B%0A%20%20%20%20%20%20%20%20%2B%2B__this.m_pairCount%3B%0A%20%20%20%20%20%20%20%20return%20true%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20for%20(i%20%3D%200%3B%20i%20%3C%20__this.m_moveBuffer.length%3B%20%2B%2Bi)%20%7B%0A%20%20%20%20%20%20%20%20queryProxy%20%3D%20__this.m_moveBuffer%5Bi%5D%3B%0A%20%20%20%20%20%20%20%20var%20fatAABB%20%3D%20__this.m_tree.GetFatAABB(queryProxy)%3B%0A%20%20%20%20%20%20%20%20__this.m_tree.Query(QueryCallback%2C%20fatAABB)%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20__this.m_moveBuffer.length%20%3D%200%3B%0A%20%20%20%20%20%20for%20(var%20i%20%3D%200%3B%20i%20%3C%20__this.m_pairCount%3B%20)%20%7B%0A%20%20%20%20%20%20%20%20var%20primaryPair%20%3D%20__this.m_pairBuffer%5Bi%5D%3B%0A%20%20%20%20%20%20%20%20var%20userDataA%20%3D%20__this.m_tree.GetUserData(primaryPair.proxyA)%3B%0A%20%20%20%20%20%20%20%20var%20userDataB%20%3D%20__this.m_tree.GetUserData(primaryPair.proxyB)%3B%0A%20%20%20%20%20%20%20%20callback(userDataA%2C%20userDataB)%3B%0A%20%20%20%20%20%20%20%20%2B%2Bi%3B%0A%20%20%20%20%20%20%20%20while%20(i%20%3C%20__this.m_pairCount)%20%7B%0A%20%20%20%20%20%20%20%20%20%20var%20pair%20%3D%20__this.m_pairBuffer%5Bi%5D%3B%0A%20%20%20%20%20%20%20%20%20%20if%20(%0A%20%20%20%20%20%20%20%20%20%20%20%20pair.proxyA%20!%3D%20primaryPair.proxyA%20%7C%7C%0A%20%20%20%20%20%20%20%20%20%20%20%20pair.proxyB%20!%3D%20primaryPair.proxyB%0A%20%20%20%20%20%20%20%20%20%20)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20break%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%2B%2Bi%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2DynamicTreeBroadPhase.prototype.Query%20%3D%20function%20(callback%2C%20aabb)%20%7B%0A%20%20%20%20%20%20this.m_tree.Query(callback%2C%20aabb)%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2DynamicTreeBroadPhase.prototype.RayCast%20%3D%20function%20(callback%2C%20input)%20%7B%0A%20%20%20%20%20%20this.m_tree.RayCast(callback%2C%20input)%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2DynamicTreeBroadPhase.prototype.Validate%20%3D%20function%20()%20%7B%7D%3B%0A%20%20%20%20b2DynamicTreeBroadPhase.prototype.Rebalance%20%3D%20function%20(iterations)%20%7B%0A%20%20%20%20%20%20if%20(iterations%20%3D%3D%3D%20undefined)%20iterations%20%3D%200%3B%0A%20%20%20%20%20%20this.m_tree.Rebalance(iterations)%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2DynamicTreeBroadPhase.prototype.BufferMove%20%3D%20function%20(proxy)%20%7B%0A%20%20%20%20%20%20this.m_moveBuffer%5Bthis.m_moveBuffer.length%5D%20%3D%20proxy%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2DynamicTreeBroadPhase.prototype.UnBufferMove%20%3D%20function%20(proxy)%20%7B%0A%20%20%20%20%20%20var%20i%20%3D%20parseInt(this.m_moveBuffer.indexOf(proxy))%3B%0A%20%20%20%20%20%20this.m_moveBuffer.splice(i%2C%201)%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2DynamicTreeBroadPhase.prototype.ComparePairs%20%3D%20function%20(pair1%2C%20pair2)%20%7B%0A%20%20%20%20%20%20return%200%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2DynamicTreeBroadPhase.__implements%20%3D%20%7B%7D%3B%0A%20%20%20%20b2DynamicTreeBroadPhase.__implements%5BIBroadPhase%5D%20%3D%20true%3B%0A%20%20%20%20b2DynamicTreeNode.b2DynamicTreeNode%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20this.aabb%20%3D%20new%20b2AABB()%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2DynamicTreeNode.prototype.IsLeaf%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20return%20this.child1%20%3D%3D%20null%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2DynamicTreePair.b2DynamicTreePair%20%3D%20function%20()%20%7B%7D%3B%0A%20%20%20%20b2Manifold.b2Manifold%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20this.m_pointCount%20%3D%200%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2Manifold.prototype.b2Manifold%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20this.m_points%20%3D%20new%20Vector(b2Settings.b2_maxManifoldPoints)%3B%0A%20%20%20%20%20%20for%20(var%20i%20%3D%200%3B%20i%20%3C%20b2Settings.b2_maxManifoldPoints%3B%20i%2B%2B)%20%7B%0A%20%20%20%20%20%20%20%20this.m_points%5Bi%5D%20%3D%20new%20b2ManifoldPoint()%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20this.m_localPlaneNormal%20%3D%20new%20b2Vec2()%3B%0A%20%20%20%20%20%20this.m_localPoint%20%3D%20new%20b2Vec2()%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2Manifold.prototype.Reset%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20for%20(var%20i%20%3D%200%3B%20i%20%3C%20b2Settings.b2_maxManifoldPoints%3B%20i%2B%2B)%20%7B%0A%20%20%20%20%20%20%20%20(this.m_points%5Bi%5D%20instanceof%20b2ManifoldPoint%0A%20%20%20%20%20%20%20%20%20%20%3F%20this.m_points%5Bi%5D%0A%20%20%20%20%20%20%20%20%20%20%3A%20null%0A%20%20%20%20%20%20%20%20).Reset()%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20this.m_localPlaneNormal.SetZero()%3B%0A%20%20%20%20%20%20this.m_localPoint.SetZero()%3B%0A%20%20%20%20%20%20this.m_type%20%3D%200%3B%0A%20%20%20%20%20%20this.m_pointCount%20%3D%200%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2Manifold.prototype.Set%20%3D%20function%20(m)%20%7B%0A%20%20%20%20%20%20this.m_pointCount%20%3D%20m.m_pointCount%3B%0A%20%20%20%20%20%20for%20(var%20i%20%3D%200%3B%20i%20%3C%20b2Settings.b2_maxManifoldPoints%3B%20i%2B%2B)%20%7B%0A%20%20%20%20%20%20%20%20(this.m_points%5Bi%5D%20instanceof%20b2ManifoldPoint%0A%20%20%20%20%20%20%20%20%20%20%3F%20this.m_points%5Bi%5D%0A%20%20%20%20%20%20%20%20%20%20%3A%20null%0A%20%20%20%20%20%20%20%20).Set(m.m_points%5Bi%5D)%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20this.m_localPlaneNormal.SetV(m.m_localPlaneNormal)%3B%0A%20%20%20%20%20%20this.m_localPoint.SetV(m.m_localPoint)%3B%0A%20%20%20%20%20%20this.m_type%20%3D%20m.m_type%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2Manifold.prototype.Copy%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20var%20copy%20%3D%20new%20b2Manifold()%3B%0A%20%20%20%20%20%20copy.Set(this)%3B%0A%20%20%20%20%20%20return%20copy%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20Box2D.postDefs.push(function%20()%20%7B%0A%20%20%20%20%20%20Box2D.Collision.b2Manifold.e_circles%20%3D%200x0001%3B%0A%20%20%20%20%20%20Box2D.Collision.b2Manifold.e_faceA%20%3D%200x0002%3B%0A%20%20%20%20%20%20Box2D.Collision.b2Manifold.e_faceB%20%3D%200x0004%3B%0A%20%20%20%20%7D)%3B%0A%20%20%20%20b2ManifoldPoint.b2ManifoldPoint%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20this.m_localPoint%20%3D%20new%20b2Vec2()%3B%0A%20%20%20%20%20%20this.m_id%20%3D%20new%20b2ContactID()%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2ManifoldPoint.prototype.b2ManifoldPoint%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20this.Reset()%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2ManifoldPoint.prototype.Reset%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20this.m_localPoint.SetZero()%3B%0A%20%20%20%20%20%20this.m_normalImpulse%20%3D%200.0%3B%0A%20%20%20%20%20%20this.m_tangentImpulse%20%3D%200.0%3B%0A%20%20%20%20%20%20this.m_id.key%20%3D%200%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2ManifoldPoint.prototype.Set%20%3D%20function%20(m)%20%7B%0A%20%20%20%20%20%20this.m_localPoint.SetV(m.m_localPoint)%3B%0A%20%20%20%20%20%20this.m_normalImpulse%20%3D%20m.m_normalImpulse%3B%0A%20%20%20%20%20%20this.m_tangentImpulse%20%3D%20m.m_tangentImpulse%3B%0A%20%20%20%20%20%20this.m_id.Set(m.m_id)%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2Point.b2Point%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20this.p%20%3D%20new%20b2Vec2()%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2Point.prototype.Support%20%3D%20function%20(xf%2C%20vX%2C%20vY)%20%7B%0A%20%20%20%20%20%20if%20(vX%20%3D%3D%3D%20undefined)%20vX%20%3D%200%3B%0A%20%20%20%20%20%20if%20(vY%20%3D%3D%3D%20undefined)%20vY%20%3D%200%3B%0A%20%20%20%20%20%20return%20this.p%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2Point.prototype.GetFirstVertex%20%3D%20function%20(xf)%20%7B%0A%20%20%20%20%20%20return%20this.p%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2RayCastInput.b2RayCastInput%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20this.p1%20%3D%20new%20b2Vec2()%3B%0A%20%20%20%20%20%20this.p2%20%3D%20new%20b2Vec2()%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2RayCastInput.prototype.b2RayCastInput%20%3D%20function%20(p1%2C%20p2%2C%20maxFraction)%20%7B%0A%20%20%20%20%20%20if%20(p1%20%3D%3D%3D%20undefined)%20p1%20%3D%20null%3B%0A%20%20%20%20%20%20if%20(p2%20%3D%3D%3D%20undefined)%20p2%20%3D%20null%3B%0A%20%20%20%20%20%20if%20(maxFraction%20%3D%3D%3D%20undefined)%20maxFraction%20%3D%201%3B%0A%20%20%20%20%20%20if%20(p1)%20this.p1.SetV(p1)%3B%0A%20%20%20%20%20%20if%20(p2)%20this.p2.SetV(p2)%3B%0A%20%20%20%20%20%20this.maxFraction%20%3D%20maxFraction%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2RayCastOutput.b2RayCastOutput%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20this.normal%20%3D%20new%20b2Vec2()%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2Segment.b2Segment%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20this.p1%20%3D%20new%20b2Vec2()%3B%0A%20%20%20%20%20%20this.p2%20%3D%20new%20b2Vec2()%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2Segment.prototype.TestSegment%20%3D%20function%20(%0A%20%20%20%20%20%20lambda%2C%0A%20%20%20%20%20%20normal%2C%0A%20%20%20%20%20%20segment%2C%0A%20%20%20%20%20%20maxLambda%0A%20%20%20%20)%20%7B%0A%20%20%20%20%20%20if%20(maxLambda%20%3D%3D%3D%20undefined)%20maxLambda%20%3D%200%3B%0A%20%20%20%20%20%20var%20s%20%3D%20segment.p1%3B%0A%20%20%20%20%20%20var%20rX%20%3D%20segment.p2.x%20-%20s.x%3B%0A%20%20%20%20%20%20var%20rY%20%3D%20segment.p2.y%20-%20s.y%3B%0A%20%20%20%20%20%20var%20dX%20%3D%20this.p2.x%20-%20this.p1.x%3B%0A%20%20%20%20%20%20var%20dY%20%3D%20this.p2.y%20-%20this.p1.y%3B%0A%20%20%20%20%20%20var%20nX%20%3D%20dY%3B%0A%20%20%20%20%20%20var%20nY%20%3D%20-dX%3B%0A%20%20%20%20%20%20var%20k_slop%20%3D%20100.0%20*%20Number.MIN_VALUE%3B%0A%20%20%20%20%20%20var%20denom%20%3D%20-(rX%20*%20nX%20%2B%20rY%20*%20nY)%3B%0A%20%20%20%20%20%20if%20(denom%20%3E%20k_slop)%20%7B%0A%20%20%20%20%20%20%20%20var%20bX%20%3D%20s.x%20-%20this.p1.x%3B%0A%20%20%20%20%20%20%20%20var%20bY%20%3D%20s.y%20-%20this.p1.y%3B%0A%20%20%20%20%20%20%20%20var%20a%20%3D%20bX%20*%20nX%20%2B%20bY%20*%20nY%3B%0A%20%20%20%20%20%20%20%20if%20(0.0%20%3C%3D%20a%20%26%26%20a%20%3C%3D%20maxLambda%20*%20denom)%20%7B%0A%20%20%20%20%20%20%20%20%20%20var%20mu2%20%3D%20-rX%20*%20bY%20%2B%20rY%20*%20bX%3B%0A%20%20%20%20%20%20%20%20%20%20if%20(-k_slop%20*%20denom%20%3C%3D%20mu2%20%26%26%20mu2%20%3C%3D%20denom%20*%20(1.0%20%2B%20k_slop))%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20a%20%2F%3D%20denom%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20var%20nLen%20%3D%20Math.sqrt(nX%20*%20nX%20%2B%20nY%20*%20nY)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20nX%20%2F%3D%20nLen%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20nY%20%2F%3D%20nLen%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20lambda%5B0%5D%20%3D%20a%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20normal.Set(nX%2C%20nY)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20true%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20return%20false%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2Segment.prototype.Extend%20%3D%20function%20(aabb)%20%7B%0A%20%20%20%20%20%20this.ExtendForward(aabb)%3B%0A%20%20%20%20%20%20this.ExtendBackward(aabb)%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2Segment.prototype.ExtendForward%20%3D%20function%20(aabb)%20%7B%0A%20%20%20%20%20%20var%20dX%20%3D%20this.p2.x%20-%20this.p1.x%3B%0A%20%20%20%20%20%20var%20dY%20%3D%20this.p2.y%20-%20this.p1.y%3B%0A%20%20%20%20%20%20var%20lambda%20%3D%20Math.min(%0A%20%20%20%20%20%20%20%20dX%20%3E%200%0A%20%20%20%20%20%20%20%20%20%20%3F%20(aabb.upperBound.x%20-%20this.p1.x)%20%2F%20dX%0A%20%20%20%20%20%20%20%20%20%20%3A%20dX%20%3C%200%0A%20%20%20%20%20%20%20%20%20%20%20%20%3F%20(aabb.lowerBound.x%20-%20this.p1.x)%20%2F%20dX%0A%20%20%20%20%20%20%20%20%20%20%20%20%3A%20Number.POSITIVE_INFINITY%2C%0A%20%20%20%20%20%20%20%20dY%20%3E%200%0A%20%20%20%20%20%20%20%20%20%20%3F%20(aabb.upperBound.y%20-%20this.p1.y)%20%2F%20dY%0A%20%20%20%20%20%20%20%20%20%20%3A%20dY%20%3C%200%0A%20%20%20%20%20%20%20%20%20%20%20%20%3F%20(aabb.lowerBound.y%20-%20this.p1.y)%20%2F%20dY%0A%20%20%20%20%20%20%20%20%20%20%20%20%3A%20Number.POSITIVE_INFINITY%0A%20%20%20%20%20%20)%3B%0A%20%20%20%20%20%20this.p2.x%20%3D%20this.p1.x%20%2B%20dX%20*%20lambda%3B%0A%20%20%20%20%20%20this.p2.y%20%3D%20this.p1.y%20%2B%20dY%20*%20lambda%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2Segment.prototype.ExtendBackward%20%3D%20function%20(aabb)%20%7B%0A%20%20%20%20%20%20var%20dX%20%3D%20-this.p2.x%20%2B%20this.p1.x%3B%0A%20%20%20%20%20%20var%20dY%20%3D%20-this.p2.y%20%2B%20this.p1.y%3B%0A%20%20%20%20%20%20var%20lambda%20%3D%20Math.min(%0A%20%20%20%20%20%20%20%20dX%20%3E%200%0A%20%20%20%20%20%20%20%20%20%20%3F%20(aabb.upperBound.x%20-%20this.p2.x)%20%2F%20dX%0A%20%20%20%20%20%20%20%20%20%20%3A%20dX%20%3C%200%0A%20%20%20%20%20%20%20%20%20%20%20%20%3F%20(aabb.lowerBound.x%20-%20this.p2.x)%20%2F%20dX%0A%20%20%20%20%20%20%20%20%20%20%20%20%3A%20Number.POSITIVE_INFINITY%2C%0A%20%20%20%20%20%20%20%20dY%20%3E%200%0A%20%20%20%20%20%20%20%20%20%20%3F%20(aabb.upperBound.y%20-%20this.p2.y)%20%2F%20dY%0A%20%20%20%20%20%20%20%20%20%20%3A%20dY%20%3C%200%0A%20%20%20%20%20%20%20%20%20%20%20%20%3F%20(aabb.lowerBound.y%20-%20this.p2.y)%20%2F%20dY%0A%20%20%20%20%20%20%20%20%20%20%20%20%3A%20Number.POSITIVE_INFINITY%0A%20%20%20%20%20%20)%3B%0A%20%20%20%20%20%20this.p1.x%20%3D%20this.p2.x%20%2B%20dX%20*%20lambda%3B%0A%20%20%20%20%20%20this.p1.y%20%3D%20this.p2.y%20%2B%20dY%20*%20lambda%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2SeparationFunction.b2SeparationFunction%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20this.m_localPoint%20%3D%20new%20b2Vec2()%3B%0A%20%20%20%20%20%20this.m_axis%20%3D%20new%20b2Vec2()%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2SeparationFunction.prototype.Initialize%20%3D%20function%20(%0A%20%20%20%20%20%20cache%2C%0A%20%20%20%20%20%20proxyA%2C%0A%20%20%20%20%20%20transformA%2C%0A%20%20%20%20%20%20proxyB%2C%0A%20%20%20%20%20%20transformB%0A%20%20%20%20)%20%7B%0A%20%20%20%20%20%20this.m_proxyA%20%3D%20proxyA%3B%0A%20%20%20%20%20%20this.m_proxyB%20%3D%20proxyB%3B%0A%20%20%20%20%20%20var%20count%20%3D%20parseInt(cache.count)%3B%0A%20%20%20%20%20%20b2Settings.b2Assert(0%20%3C%20count%20%26%26%20count%20%3C%203)%3B%0A%20%20%20%20%20%20var%20localPointA%3B%0A%20%20%20%20%20%20var%20localPointA1%3B%0A%20%20%20%20%20%20var%20localPointA2%3B%0A%20%20%20%20%20%20var%20localPointB%3B%0A%20%20%20%20%20%20var%20localPointB1%3B%0A%20%20%20%20%20%20var%20localPointB2%3B%0A%20%20%20%20%20%20var%20pointAX%20%3D%200%3B%0A%20%20%20%20%20%20var%20pointAY%20%3D%200%3B%0A%20%20%20%20%20%20var%20pointBX%20%3D%200%3B%0A%20%20%20%20%20%20var%20pointBY%20%3D%200%3B%0A%20%20%20%20%20%20var%20normalX%20%3D%200%3B%0A%20%20%20%20%20%20var%20normalY%20%3D%200%3B%0A%20%20%20%20%20%20var%20tMat%3B%0A%20%20%20%20%20%20var%20tVec%3B%0A%20%20%20%20%20%20var%20s%20%3D%200%3B%0A%20%20%20%20%20%20var%20sgn%20%3D%200%3B%0A%20%20%20%20%20%20if%20(count%20%3D%3D%201)%20%7B%0A%20%20%20%20%20%20%20%20this.m_type%20%3D%20b2SeparationFunction.e_points%3B%0A%20%20%20%20%20%20%20%20localPointA%20%3D%20this.m_proxyA.GetVertex(cache.indexA%5B0%5D)%3B%0A%20%20%20%20%20%20%20%20localPointB%20%3D%20this.m_proxyB.GetVertex(cache.indexB%5B0%5D)%3B%0A%20%20%20%20%20%20%20%20tVec%20%3D%20localPointA%3B%0A%20%20%20%20%20%20%20%20tMat%20%3D%20transformA.R%3B%0A%20%20%20%20%20%20%20%20pointAX%20%3D%0A%20%20%20%20%20%20%20%20%20%20transformA.position.x%20%2B%20(tMat.col1.x%20*%20tVec.x%20%2B%20tMat.col2.x%20*%20tVec.y)%3B%0A%20%20%20%20%20%20%20%20pointAY%20%3D%0A%20%20%20%20%20%20%20%20%20%20transformA.position.y%20%2B%20(tMat.col1.y%20*%20tVec.x%20%2B%20tMat.col2.y%20*%20tVec.y)%3B%0A%20%20%20%20%20%20%20%20tVec%20%3D%20localPointB%3B%0A%20%20%20%20%20%20%20%20tMat%20%3D%20transformB.R%3B%0A%20%20%20%20%20%20%20%20pointBX%20%3D%0A%20%20%20%20%20%20%20%20%20%20transformB.position.x%20%2B%20(tMat.col1.x%20*%20tVec.x%20%2B%20tMat.col2.x%20*%20tVec.y)%3B%0A%20%20%20%20%20%20%20%20pointBY%20%3D%0A%20%20%20%20%20%20%20%20%20%20transformB.position.y%20%2B%20(tMat.col1.y%20*%20tVec.x%20%2B%20tMat.col2.y%20*%20tVec.y)%3B%0A%20%20%20%20%20%20%20%20this.m_axis.x%20%3D%20pointBX%20-%20pointAX%3B%0A%20%20%20%20%20%20%20%20this.m_axis.y%20%3D%20pointBY%20-%20pointAY%3B%0A%20%20%20%20%20%20%20%20this.m_axis.Normalize()%3B%0A%20%20%20%20%20%20%7D%20else%20if%20(cache.indexB%5B0%5D%20%3D%3D%20cache.indexB%5B1%5D)%20%7B%0A%20%20%20%20%20%20%20%20this.m_type%20%3D%20b2SeparationFunction.e_faceA%3B%0A%20%20%20%20%20%20%20%20localPointA1%20%3D%20this.m_proxyA.GetVertex(cache.indexA%5B0%5D)%3B%0A%20%20%20%20%20%20%20%20localPointA2%20%3D%20this.m_proxyA.GetVertex(cache.indexA%5B1%5D)%3B%0A%20%20%20%20%20%20%20%20localPointB%20%3D%20this.m_proxyB.GetVertex(cache.indexB%5B0%5D)%3B%0A%20%20%20%20%20%20%20%20this.m_localPoint.x%20%3D%200.5%20*%20(localPointA1.x%20%2B%20localPointA2.x)%3B%0A%20%20%20%20%20%20%20%20this.m_localPoint.y%20%3D%200.5%20*%20(localPointA1.y%20%2B%20localPointA2.y)%3B%0A%20%20%20%20%20%20%20%20this.m_axis%20%3D%20b2Math.CrossVF(%0A%20%20%20%20%20%20%20%20%20%20b2Math.SubtractVV(localPointA2%2C%20localPointA1)%2C%0A%20%20%20%20%20%20%20%20%20%201.0%0A%20%20%20%20%20%20%20%20)%3B%0A%20%20%20%20%20%20%20%20this.m_axis.Normalize()%3B%0A%20%20%20%20%20%20%20%20tVec%20%3D%20this.m_axis%3B%0A%20%20%20%20%20%20%20%20tMat%20%3D%20transformA.R%3B%0A%20%20%20%20%20%20%20%20normalX%20%3D%20tMat.col1.x%20*%20tVec.x%20%2B%20tMat.col2.x%20*%20tVec.y%3B%0A%20%20%20%20%20%20%20%20normalY%20%3D%20tMat.col1.y%20*%20tVec.x%20%2B%20tMat.col2.y%20*%20tVec.y%3B%0A%20%20%20%20%20%20%20%20tVec%20%3D%20this.m_localPoint%3B%0A%20%20%20%20%20%20%20%20tMat%20%3D%20transformA.R%3B%0A%20%20%20%20%20%20%20%20pointAX%20%3D%0A%20%20%20%20%20%20%20%20%20%20transformA.position.x%20%2B%20(tMat.col1.x%20*%20tVec.x%20%2B%20tMat.col2.x%20*%20tVec.y)%3B%0A%20%20%20%20%20%20%20%20pointAY%20%3D%0A%20%20%20%20%20%20%20%20%20%20transformA.position.y%20%2B%20(tMat.col1.y%20*%20tVec.x%20%2B%20tMat.col2.y%20*%20tVec.y)%3B%0A%20%20%20%20%20%20%20%20tVec%20%3D%20localPointB%3B%0A%20%20%20%20%20%20%20%20tMat%20%3D%20transformB.R%3B%0A%20%20%20%20%20%20%20%20pointBX%20%3D%0A%20%20%20%20%20%20%20%20%20%20transformB.position.x%20%2B%20(tMat.col1.x%20*%20tVec.x%20%2B%20tMat.col2.x%20*%20tVec.y)%3B%0A%20%20%20%20%20%20%20%20pointBY%20%3D%0A%20%20%20%20%20%20%20%20%20%20transformB.position.y%20%2B%20(tMat.col1.y%20*%20tVec.x%20%2B%20tMat.col2.y%20*%20tVec.y)%3B%0A%20%20%20%20%20%20%20%20s%20%3D%20(pointBX%20-%20pointAX)%20*%20normalX%20%2B%20(pointBY%20-%20pointAY)%20*%20normalY%3B%0A%20%20%20%20%20%20%20%20if%20(s%20%3C%200.0)%20%7B%0A%20%20%20%20%20%20%20%20%20%20this.m_axis.NegativeSelf()%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%20else%20if%20(cache.indexA%5B0%5D%20%3D%3D%20cache.indexA%5B0%5D)%20%7B%0A%20%20%20%20%20%20%20%20this.m_type%20%3D%20b2SeparationFunction.e_faceB%3B%0A%20%20%20%20%20%20%20%20localPointB1%20%3D%20this.m_proxyB.GetVertex(cache.indexB%5B0%5D)%3B%0A%20%20%20%20%20%20%20%20localPointB2%20%3D%20this.m_proxyB.GetVertex(cache.indexB%5B1%5D)%3B%0A%20%20%20%20%20%20%20%20localPointA%20%3D%20this.m_proxyA.GetVertex(cache.indexA%5B0%5D)%3B%0A%20%20%20%20%20%20%20%20this.m_localPoint.x%20%3D%200.5%20*%20(localPointB1.x%20%2B%20localPointB2.x)%3B%0A%20%20%20%20%20%20%20%20this.m_localPoint.y%20%3D%200.5%20*%20(localPointB1.y%20%2B%20localPointB2.y)%3B%0A%20%20%20%20%20%20%20%20this.m_axis%20%3D%20b2Math.CrossVF(%0A%20%20%20%20%20%20%20%20%20%20b2Math.SubtractVV(localPointB2%2C%20localPointB1)%2C%0A%20%20%20%20%20%20%20%20%20%201.0%0A%20%20%20%20%20%20%20%20)%3B%0A%20%20%20%20%20%20%20%20this.m_axis.Normalize()%3B%0A%20%20%20%20%20%20%20%20tVec%20%3D%20this.m_axis%3B%0A%20%20%20%20%20%20%20%20tMat%20%3D%20transformB.R%3B%0A%20%20%20%20%20%20%20%20normalX%20%3D%20tMat.col1.x%20*%20tVec.x%20%2B%20tMat.col2.x%20*%20tVec.y%3B%0A%20%20%20%20%20%20%20%20normalY%20%3D%20tMat.col1.y%20*%20tVec.x%20%2B%20tMat.col2.y%20*%20tVec.y%3B%0A%20%20%20%20%20%20%20%20tVec%20%3D%20this.m_localPoint%3B%0A%20%20%20%20%20%20%20%20tMat%20%3D%20transformB.R%3B%0A%20%20%20%20%20%20%20%20pointBX%20%3D%0A%20%20%20%20%20%20%20%20%20%20transformB.position.x%20%2B%20(tMat.col1.x%20*%20tVec.x%20%2B%20tMat.col2.x%20*%20tVec.y)%3B%0A%20%20%20%20%20%20%20%20pointBY%20%3D%0A%20%20%20%20%20%20%20%20%20%20transformB.position.y%20%2B%20(tMat.col1.y%20*%20tVec.x%20%2B%20tMat.col2.y%20*%20tVec.y)%3B%0A%20%20%20%20%20%20%20%20tVec%20%3D%20localPointA%3B%0A%20%20%20%20%20%20%20%20tMat%20%3D%20transformA.R%3B%0A%20%20%20%20%20%20%20%20pointAX%20%3D%0A%20%20%20%20%20%20%20%20%20%20transformA.position.x%20%2B%20(tMat.col1.x%20*%20tVec.x%20%2B%20tMat.col2.x%20*%20tVec.y)%3B%0A%20%20%20%20%20%20%20%20pointAY%20%3D%0A%20%20%20%20%20%20%20%20%20%20transformA.position.y%20%2B%20(tMat.col1.y%20*%20tVec.x%20%2B%20tMat.col2.y%20*%20tVec.y)%3B%0A%20%20%20%20%20%20%20%20s%20%3D%20(pointAX%20-%20pointBX)%20*%20normalX%20%2B%20(pointAY%20-%20pointBY)%20*%20normalY%3B%0A%20%20%20%20%20%20%20%20if%20(s%20%3C%200.0)%20%7B%0A%20%20%20%20%20%20%20%20%20%20this.m_axis.NegativeSelf()%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20localPointA1%20%3D%20this.m_proxyA.GetVertex(cache.indexA%5B0%5D)%3B%0A%20%20%20%20%20%20%20%20localPointA2%20%3D%20this.m_proxyA.GetVertex(cache.indexA%5B1%5D)%3B%0A%20%20%20%20%20%20%20%20localPointB1%20%3D%20this.m_proxyB.GetVertex(cache.indexB%5B0%5D)%3B%0A%20%20%20%20%20%20%20%20localPointB2%20%3D%20this.m_proxyB.GetVertex(cache.indexB%5B1%5D)%3B%0A%20%20%20%20%20%20%20%20var%20pA%20%3D%20b2Math.MulX(transformA%2C%20localPointA)%3B%0A%20%20%20%20%20%20%20%20var%20dA%20%3D%20b2Math.MulMV(%0A%20%20%20%20%20%20%20%20%20%20transformA.R%2C%0A%20%20%20%20%20%20%20%20%20%20b2Math.SubtractVV(localPointA2%2C%20localPointA1)%0A%20%20%20%20%20%20%20%20)%3B%0A%20%20%20%20%20%20%20%20var%20pB%20%3D%20b2Math.MulX(transformB%2C%20localPointB)%3B%0A%20%20%20%20%20%20%20%20var%20dB%20%3D%20b2Math.MulMV(%0A%20%20%20%20%20%20%20%20%20%20transformB.R%2C%0A%20%20%20%20%20%20%20%20%20%20b2Math.SubtractVV(localPointB2%2C%20localPointB1)%0A%20%20%20%20%20%20%20%20)%3B%0A%20%20%20%20%20%20%20%20var%20a%20%3D%20dA.x%20*%20dA.x%20%2B%20dA.y%20*%20dA.y%3B%0A%20%20%20%20%20%20%20%20var%20e%20%3D%20dB.x%20*%20dB.x%20%2B%20dB.y%20*%20dB.y%3B%0A%20%20%20%20%20%20%20%20var%20r%20%3D%20b2Math.SubtractVV(dB%2C%20dA)%3B%0A%20%20%20%20%20%20%20%20var%20c%20%3D%20dA.x%20*%20r.x%20%2B%20dA.y%20*%20r.y%3B%0A%20%20%20%20%20%20%20%20var%20f%20%3D%20dB.x%20*%20r.x%20%2B%20dB.y%20*%20r.y%3B%0A%20%20%20%20%20%20%20%20var%20b%20%3D%20dA.x%20*%20dB.x%20%2B%20dA.y%20*%20dB.y%3B%0A%20%20%20%20%20%20%20%20var%20denom%20%3D%20a%20*%20e%20-%20b%20*%20b%3B%0A%20%20%20%20%20%20%20%20s%20%3D%200.0%3B%0A%20%20%20%20%20%20%20%20if%20(denom%20!%3D%200.0)%20%7B%0A%20%20%20%20%20%20%20%20%20%20s%20%3D%20b2Math.Clamp((b%20*%20f%20-%20c%20*%20e)%20%2F%20denom%2C%200.0%2C%201.0)%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20var%20t%20%3D%20(b%20*%20s%20%2B%20f)%20%2F%20e%3B%0A%20%20%20%20%20%20%20%20if%20(t%20%3C%200.0)%20%7B%0A%20%20%20%20%20%20%20%20%20%20t%20%3D%200.0%3B%0A%20%20%20%20%20%20%20%20%20%20s%20%3D%20b2Math.Clamp((b%20-%20c)%20%2F%20a%2C%200.0%2C%201.0)%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20localPointA%20%3D%20new%20b2Vec2()%3B%0A%20%20%20%20%20%20%20%20localPointA.x%20%3D%20localPointA1.x%20%2B%20s%20*%20(localPointA2.x%20-%20localPointA1.x)%3B%0A%20%20%20%20%20%20%20%20localPointA.y%20%3D%20localPointA1.y%20%2B%20s%20*%20(localPointA2.y%20-%20localPointA1.y)%3B%0A%20%20%20%20%20%20%20%20localPointB%20%3D%20new%20b2Vec2()%3B%0A%20%20%20%20%20%20%20%20localPointB.x%20%3D%20localPointB1.x%20%2B%20s%20*%20(localPointB2.x%20-%20localPointB1.x)%3B%0A%20%20%20%20%20%20%20%20localPointB.y%20%3D%20localPointB1.y%20%2B%20s%20*%20(localPointB2.y%20-%20localPointB1.y)%3B%0A%20%20%20%20%20%20%20%20if%20(s%20%3D%3D%200.0%20%7C%7C%20s%20%3D%3D%201.0)%20%7B%0A%20%20%20%20%20%20%20%20%20%20this.m_type%20%3D%20b2SeparationFunction.e_faceB%3B%0A%20%20%20%20%20%20%20%20%20%20this.m_axis%20%3D%20b2Math.CrossVF(%0A%20%20%20%20%20%20%20%20%20%20%20%20b2Math.SubtractVV(localPointB2%2C%20localPointB1)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%201.0%0A%20%20%20%20%20%20%20%20%20%20)%3B%0A%20%20%20%20%20%20%20%20%20%20this.m_axis.Normalize()%3B%0A%20%20%20%20%20%20%20%20%20%20this.m_localPoint%20%3D%20localPointB%3B%0A%20%20%20%20%20%20%20%20%20%20tVec%20%3D%20this.m_axis%3B%0A%20%20%20%20%20%20%20%20%20%20tMat%20%3D%20transformB.R%3B%0A%20%20%20%20%20%20%20%20%20%20normalX%20%3D%20tMat.col1.x%20*%20tVec.x%20%2B%20tMat.col2.x%20*%20tVec.y%3B%0A%20%20%20%20%20%20%20%20%20%20normalY%20%3D%20tMat.col1.y%20*%20tVec.x%20%2B%20tMat.col2.y%20*%20tVec.y%3B%0A%20%20%20%20%20%20%20%20%20%20tVec%20%3D%20this.m_localPoint%3B%0A%20%20%20%20%20%20%20%20%20%20tMat%20%3D%20transformB.R%3B%0A%20%20%20%20%20%20%20%20%20%20pointBX%20%3D%0A%20%20%20%20%20%20%20%20%20%20%20%20transformB.position.x%20%2B%0A%20%20%20%20%20%20%20%20%20%20%20%20(tMat.col1.x%20*%20tVec.x%20%2B%20tMat.col2.x%20*%20tVec.y)%3B%0A%20%20%20%20%20%20%20%20%20%20pointBY%20%3D%0A%20%20%20%20%20%20%20%20%20%20%20%20transformB.position.y%20%2B%0A%20%20%20%20%20%20%20%20%20%20%20%20(tMat.col1.y%20*%20tVec.x%20%2B%20tMat.col2.y%20*%20tVec.y)%3B%0A%20%20%20%20%20%20%20%20%20%20tVec%20%3D%20localPointA%3B%0A%20%20%20%20%20%20%20%20%20%20tMat%20%3D%20transformA.R%3B%0A%20%20%20%20%20%20%20%20%20%20pointAX%20%3D%0A%20%20%20%20%20%20%20%20%20%20%20%20transformA.position.x%20%2B%0A%20%20%20%20%20%20%20%20%20%20%20%20(tMat.col1.x%20*%20tVec.x%20%2B%20tMat.col2.x%20*%20tVec.y)%3B%0A%20%20%20%20%20%20%20%20%20%20pointAY%20%3D%0A%20%20%20%20%20%20%20%20%20%20%20%20transformA.position.y%20%2B%0A%20%20%20%20%20%20%20%20%20%20%20%20(tMat.col1.y%20*%20tVec.x%20%2B%20tMat.col2.y%20*%20tVec.y)%3B%0A%20%20%20%20%20%20%20%20%20%20sgn%20%3D%20(pointAX%20-%20pointBX)%20*%20normalX%20%2B%20(pointAY%20-%20pointBY)%20*%20normalY%3B%0A%20%20%20%20%20%20%20%20%20%20if%20(s%20%3C%200.0)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20this.m_axis.NegativeSelf()%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20this.m_type%20%3D%20b2SeparationFunction.e_faceA%3B%0A%20%20%20%20%20%20%20%20%20%20this.m_axis%20%3D%20b2Math.CrossVF(%0A%20%20%20%20%20%20%20%20%20%20%20%20b2Math.SubtractVV(localPointA2%2C%20localPointA1)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%201.0%0A%20%20%20%20%20%20%20%20%20%20)%3B%0A%20%20%20%20%20%20%20%20%20%20this.m_localPoint%20%3D%20localPointA%3B%0A%20%20%20%20%20%20%20%20%20%20tVec%20%3D%20this.m_axis%3B%0A%20%20%20%20%20%20%20%20%20%20tMat%20%3D%20transformA.R%3B%0A%20%20%20%20%20%20%20%20%20%20normalX%20%3D%20tMat.col1.x%20*%20tVec.x%20%2B%20tMat.col2.x%20*%20tVec.y%3B%0A%20%20%20%20%20%20%20%20%20%20normalY%20%3D%20tMat.col1.y%20*%20tVec.x%20%2B%20tMat.col2.y%20*%20tVec.y%3B%0A%20%20%20%20%20%20%20%20%20%20tVec%20%3D%20this.m_localPoint%3B%0A%20%20%20%20%20%20%20%20%20%20tMat%20%3D%20transformA.R%3B%0A%20%20%20%20%20%20%20%20%20%20pointAX%20%3D%0A%20%20%20%20%20%20%20%20%20%20%20%20transformA.position.x%20%2B%0A%20%20%20%20%20%20%20%20%20%20%20%20(tMat.col1.x%20*%20tVec.x%20%2B%20tMat.col2.x%20*%20tVec.y)%3B%0A%20%20%20%20%20%20%20%20%20%20pointAY%20%3D%0A%20%20%20%20%20%20%20%20%20%20%20%20transformA.position.y%20%2B%0A%20%20%20%20%20%20%20%20%20%20%20%20(tMat.col1.y%20*%20tVec.x%20%2B%20tMat.col2.y%20*%20tVec.y)%3B%0A%20%20%20%20%20%20%20%20%20%20tVec%20%3D%20localPointB%3B%0A%20%20%20%20%20%20%20%20%20%20tMat%20%3D%20transformB.R%3B%0A%20%20%20%20%20%20%20%20%20%20pointBX%20%3D%0A%20%20%20%20%20%20%20%20%20%20%20%20transformB.position.x%20%2B%0A%20%20%20%20%20%20%20%20%20%20%20%20(tMat.col1.x%20*%20tVec.x%20%2B%20tMat.col2.x%20*%20tVec.y)%3B%0A%20%20%20%20%20%20%20%20%20%20pointBY%20%3D%0A%20%20%20%20%20%20%20%20%20%20%20%20transformB.position.y%20%2B%0A%20%20%20%20%20%20%20%20%20%20%20%20(tMat.col1.y%20*%20tVec.x%20%2B%20tMat.col2.y%20*%20tVec.y)%3B%0A%20%20%20%20%20%20%20%20%20%20sgn%20%3D%20(pointBX%20-%20pointAX)%20*%20normalX%20%2B%20(pointBY%20-%20pointAY)%20*%20normalY%3B%0A%20%20%20%20%20%20%20%20%20%20if%20(s%20%3C%200.0)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20this.m_axis.NegativeSelf()%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2SeparationFunction.prototype.Evaluate%20%3D%20function%20(%0A%20%20%20%20%20%20transformA%2C%0A%20%20%20%20%20%20transformB%0A%20%20%20%20)%20%7B%0A%20%20%20%20%20%20var%20axisA%3B%0A%20%20%20%20%20%20var%20axisB%3B%0A%20%20%20%20%20%20var%20localPointA%3B%0A%20%20%20%20%20%20var%20localPointB%3B%0A%20%20%20%20%20%20var%20pointA%3B%0A%20%20%20%20%20%20var%20pointB%3B%0A%20%20%20%20%20%20var%20seperation%20%3D%200%3B%0A%20%20%20%20%20%20var%20normal%3B%0A%20%20%20%20%20%20switch%20(this.m_type)%20%7B%0A%20%20%20%20%20%20%20%20case%20b2SeparationFunction.e_points%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20axisA%20%3D%20b2Math.MulTMV(transformA.R%2C%20this.m_axis)%3B%0A%20%20%20%20%20%20%20%20%20%20axisB%20%3D%20b2Math.MulTMV(transformB.R%2C%20this.m_axis.GetNegative())%3B%0A%20%20%20%20%20%20%20%20%20%20localPointA%20%3D%20this.m_proxyA.GetSupportVertex(axisA)%3B%0A%20%20%20%20%20%20%20%20%20%20localPointB%20%3D%20this.m_proxyB.GetSupportVertex(axisB)%3B%0A%20%20%20%20%20%20%20%20%20%20pointA%20%3D%20b2Math.MulX(transformA%2C%20localPointA)%3B%0A%20%20%20%20%20%20%20%20%20%20pointB%20%3D%20b2Math.MulX(transformB%2C%20localPointB)%3B%0A%20%20%20%20%20%20%20%20%20%20seperation%20%3D%0A%20%20%20%20%20%20%20%20%20%20%20%20(pointB.x%20-%20pointA.x)%20*%20this.m_axis.x%20%2B%0A%20%20%20%20%20%20%20%20%20%20%20%20(pointB.y%20-%20pointA.y)%20*%20this.m_axis.y%3B%0A%20%20%20%20%20%20%20%20%20%20return%20seperation%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20case%20b2SeparationFunction.e_faceA%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20normal%20%3D%20b2Math.MulMV(transformA.R%2C%20this.m_axis)%3B%0A%20%20%20%20%20%20%20%20%20%20pointA%20%3D%20b2Math.MulX(transformA%2C%20this.m_localPoint)%3B%0A%20%20%20%20%20%20%20%20%20%20axisB%20%3D%20b2Math.MulTMV(transformB.R%2C%20normal.GetNegative())%3B%0A%20%20%20%20%20%20%20%20%20%20localPointB%20%3D%20this.m_proxyB.GetSupportVertex(axisB)%3B%0A%20%20%20%20%20%20%20%20%20%20pointB%20%3D%20b2Math.MulX(transformB%2C%20localPointB)%3B%0A%20%20%20%20%20%20%20%20%20%20seperation%20%3D%0A%20%20%20%20%20%20%20%20%20%20%20%20(pointB.x%20-%20pointA.x)%20*%20normal.x%20%2B%20(pointB.y%20-%20pointA.y)%20*%20normal.y%3B%0A%20%20%20%20%20%20%20%20%20%20return%20seperation%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20case%20b2SeparationFunction.e_faceB%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20normal%20%3D%20b2Math.MulMV(transformB.R%2C%20this.m_axis)%3B%0A%20%20%20%20%20%20%20%20%20%20pointB%20%3D%20b2Math.MulX(transformB%2C%20this.m_localPoint)%3B%0A%20%20%20%20%20%20%20%20%20%20axisA%20%3D%20b2Math.MulTMV(transformA.R%2C%20normal.GetNegative())%3B%0A%20%20%20%20%20%20%20%20%20%20localPointA%20%3D%20this.m_proxyA.GetSupportVertex(axisA)%3B%0A%20%20%20%20%20%20%20%20%20%20pointA%20%3D%20b2Math.MulX(transformA%2C%20localPointA)%3B%0A%20%20%20%20%20%20%20%20%20%20seperation%20%3D%0A%20%20%20%20%20%20%20%20%20%20%20%20(pointA.x%20-%20pointB.x)%20*%20normal.x%20%2B%20(pointA.y%20-%20pointB.y)%20*%20normal.y%3B%0A%20%20%20%20%20%20%20%20%20%20return%20seperation%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20default%3A%0A%20%20%20%20%20%20%20%20%20%20b2Settings.b2Assert(false)%3B%0A%20%20%20%20%20%20%20%20%20%20return%200.0%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%3B%0A%20%20%20%20Box2D.postDefs.push(function%20()%20%7B%0A%20%20%20%20%20%20Box2D.Collision.b2SeparationFunction.e_points%20%3D%200x01%3B%0A%20%20%20%20%20%20Box2D.Collision.b2SeparationFunction.e_faceA%20%3D%200x02%3B%0A%20%20%20%20%20%20Box2D.Collision.b2SeparationFunction.e_faceB%20%3D%200x04%3B%0A%20%20%20%20%7D)%3B%0A%20%20%20%20b2Simplex.b2Simplex%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20this.m_v1%20%3D%20new%20b2SimplexVertex()%3B%0A%20%20%20%20%20%20this.m_v2%20%3D%20new%20b2SimplexVertex()%3B%0A%20%20%20%20%20%20this.m_v3%20%3D%20new%20b2SimplexVertex()%3B%0A%20%20%20%20%20%20this.m_vertices%20%3D%20new%20Vector(3)%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2Simplex.prototype.b2Simplex%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20this.m_vertices%5B0%5D%20%3D%20this.m_v1%3B%0A%20%20%20%20%20%20this.m_vertices%5B1%5D%20%3D%20this.m_v2%3B%0A%20%20%20%20%20%20this.m_vertices%5B2%5D%20%3D%20this.m_v3%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2Simplex.prototype.ReadCache%20%3D%20function%20(%0A%20%20%20%20%20%20cache%2C%0A%20%20%20%20%20%20proxyA%2C%0A%20%20%20%20%20%20transformA%2C%0A%20%20%20%20%20%20proxyB%2C%0A%20%20%20%20%20%20transformB%0A%20%20%20%20)%20%7B%0A%20%20%20%20%20%20b2Settings.b2Assert(0%20%3C%3D%20cache.count%20%26%26%20cache.count%20%3C%3D%203)%3B%0A%20%20%20%20%20%20var%20wALocal%3B%0A%20%20%20%20%20%20var%20wBLocal%3B%0A%20%20%20%20%20%20this.m_count%20%3D%20cache.count%3B%0A%20%20%20%20%20%20var%20vertices%20%3D%20this.m_vertices%3B%0A%20%20%20%20%20%20for%20(var%20i%20%3D%200%3B%20i%20%3C%20this.m_count%3B%20i%2B%2B)%20%7B%0A%20%20%20%20%20%20%20%20var%20v%20%3D%20vertices%5Bi%5D%3B%0A%20%20%20%20%20%20%20%20v.indexA%20%3D%20cache.indexA%5Bi%5D%3B%0A%20%20%20%20%20%20%20%20v.indexB%20%3D%20cache.indexB%5Bi%5D%3B%0A%20%20%20%20%20%20%20%20wALocal%20%3D%20proxyA.GetVertex(v.indexA)%3B%0A%20%20%20%20%20%20%20%20wBLocal%20%3D%20proxyB.GetVertex(v.indexB)%3B%0A%20%20%20%20%20%20%20%20v.wA%20%3D%20b2Math.MulX(transformA%2C%20wALocal)%3B%0A%20%20%20%20%20%20%20%20v.wB%20%3D%20b2Math.MulX(transformB%2C%20wBLocal)%3B%0A%20%20%20%20%20%20%20%20v.w%20%3D%20b2Math.SubtractVV(v.wB%2C%20v.wA)%3B%0A%20%20%20%20%20%20%20%20v.a%20%3D%200%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20if%20(this.m_count%20%3E%201)%20%7B%0A%20%20%20%20%20%20%20%20var%20metric1%20%3D%20cache.metric%3B%0A%20%20%20%20%20%20%20%20var%20metric2%20%3D%20this.GetMetric()%3B%0A%20%20%20%20%20%20%20%20if%20(%0A%20%20%20%20%20%20%20%20%20%20metric2%20%3C%200.5%20*%20metric1%20%7C%7C%0A%20%20%20%20%20%20%20%20%20%202.0%20*%20metric1%20%3C%20metric2%20%7C%7C%0A%20%20%20%20%20%20%20%20%20%20metric2%20%3C%20Number.MIN_VALUE%0A%20%20%20%20%20%20%20%20)%20%7B%0A%20%20%20%20%20%20%20%20%20%20this.m_count%20%3D%200%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20if%20(this.m_count%20%3D%3D%200)%20%7B%0A%20%20%20%20%20%20%20%20v%20%3D%20vertices%5B0%5D%3B%0A%20%20%20%20%20%20%20%20v.indexA%20%3D%200%3B%0A%20%20%20%20%20%20%20%20v.indexB%20%3D%200%3B%0A%20%20%20%20%20%20%20%20wALocal%20%3D%20proxyA.GetVertex(0)%3B%0A%20%20%20%20%20%20%20%20wBLocal%20%3D%20proxyB.GetVertex(0)%3B%0A%20%20%20%20%20%20%20%20v.wA%20%3D%20b2Math.MulX(transformA%2C%20wALocal)%3B%0A%20%20%20%20%20%20%20%20v.wB%20%3D%20b2Math.MulX(transformB%2C%20wBLocal)%3B%0A%20%20%20%20%20%20%20%20v.w%20%3D%20b2Math.SubtractVV(v.wB%2C%20v.wA)%3B%0A%20%20%20%20%20%20%20%20this.m_count%20%3D%201%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2Simplex.prototype.WriteCache%20%3D%20function%20(cache)%20%7B%0A%20%20%20%20%20%20cache.metric%20%3D%20this.GetMetric()%3B%0A%20%20%20%20%20%20cache.count%20%3D%20Box2D.parseUInt(this.m_count)%3B%0A%20%20%20%20%20%20var%20vertices%20%3D%20this.m_vertices%3B%0A%20%20%20%20%20%20for%20(var%20i%20%3D%200%3B%20i%20%3C%20this.m_count%3B%20i%2B%2B)%20%7B%0A%20%20%20%20%20%20%20%20cache.indexA%5Bi%5D%20%3D%20Box2D.parseUInt(vertices%5Bi%5D.indexA)%3B%0A%20%20%20%20%20%20%20%20cache.indexB%5Bi%5D%20%3D%20Box2D.parseUInt(vertices%5Bi%5D.indexB)%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2Simplex.prototype.GetSearchDirection%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20switch%20(this.m_count)%20%7B%0A%20%20%20%20%20%20%20%20case%201%3A%0A%20%20%20%20%20%20%20%20%20%20return%20this.m_v1.w.GetNegative()%3B%0A%20%20%20%20%20%20%20%20case%202%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20var%20e12%20%3D%20b2Math.SubtractVV(this.m_v2.w%2C%20this.m_v1.w)%3B%0A%20%20%20%20%20%20%20%20%20%20var%20sgn%20%3D%20b2Math.CrossVV(e12%2C%20this.m_v1.w.GetNegative())%3B%0A%20%20%20%20%20%20%20%20%20%20if%20(sgn%20%3E%200.0)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20b2Math.CrossFV(1.0%2C%20e12)%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20b2Math.CrossVF(e12%2C%201.0)%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20default%3A%0A%20%20%20%20%20%20%20%20%20%20b2Settings.b2Assert(false)%3B%0A%20%20%20%20%20%20%20%20%20%20return%20new%20b2Vec2()%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2Simplex.prototype.GetClosestPoint%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20switch%20(this.m_count)%20%7B%0A%20%20%20%20%20%20%20%20case%200%3A%0A%20%20%20%20%20%20%20%20%20%20b2Settings.b2Assert(false)%3B%0A%20%20%20%20%20%20%20%20%20%20return%20new%20b2Vec2()%3B%0A%20%20%20%20%20%20%20%20case%201%3A%0A%20%20%20%20%20%20%20%20%20%20return%20this.m_v1.w%3B%0A%20%20%20%20%20%20%20%20case%202%3A%0A%20%20%20%20%20%20%20%20%20%20return%20new%20b2Vec2(%0A%20%20%20%20%20%20%20%20%20%20%20%20this.m_v1.a%20*%20this.m_v1.w.x%20%2B%20this.m_v2.a%20*%20this.m_v2.w.x%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20this.m_v1.a%20*%20this.m_v1.w.y%20%2B%20this.m_v2.a%20*%20this.m_v2.w.y%0A%20%20%20%20%20%20%20%20%20%20)%3B%0A%20%20%20%20%20%20%20%20default%3A%0A%20%20%20%20%20%20%20%20%20%20b2Settings.b2Assert(false)%3B%0A%20%20%20%20%20%20%20%20%20%20return%20new%20b2Vec2()%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2Simplex.prototype.GetWitnessPoints%20%3D%20function%20(pA%2C%20pB)%20%7B%0A%20%20%20%20%20%20switch%20(this.m_count)%20%7B%0A%20%20%20%20%20%20%20%20case%200%3A%0A%20%20%20%20%20%20%20%20%20%20b2Settings.b2Assert(false)%3B%0A%20%20%20%20%20%20%20%20%20%20break%3B%0A%20%20%20%20%20%20%20%20case%201%3A%0A%20%20%20%20%20%20%20%20%20%20pA.SetV(this.m_v1.wA)%3B%0A%20%20%20%20%20%20%20%20%20%20pB.SetV(this.m_v1.wB)%3B%0A%20%20%20%20%20%20%20%20%20%20break%3B%0A%20%20%20%20%20%20%20%20case%202%3A%0A%20%20%20%20%20%20%20%20%20%20pA.x%20%3D%20this.m_v1.a%20*%20this.m_v1.wA.x%20%2B%20this.m_v2.a%20*%20this.m_v2.wA.x%3B%0A%20%20%20%20%20%20%20%20%20%20pA.y%20%3D%20this.m_v1.a%20*%20this.m_v1.wA.y%20%2B%20this.m_v2.a%20*%20this.m_v2.wA.y%3B%0A%20%20%20%20%20%20%20%20%20%20pB.x%20%3D%20this.m_v1.a%20*%20this.m_v1.wB.x%20%2B%20this.m_v2.a%20*%20this.m_v2.wB.x%3B%0A%20%20%20%20%20%20%20%20%20%20pB.y%20%3D%20this.m_v1.a%20*%20this.m_v1.wB.y%20%2B%20this.m_v2.a%20*%20this.m_v2.wB.y%3B%0A%20%20%20%20%20%20%20%20%20%20break%3B%0A%20%20%20%20%20%20%20%20case%203%3A%0A%20%20%20%20%20%20%20%20%20%20pB.x%20%3D%20pA.x%20%3D%0A%20%20%20%20%20%20%20%20%20%20%20%20this.m_v1.a%20*%20this.m_v1.wA.x%20%2B%0A%20%20%20%20%20%20%20%20%20%20%20%20this.m_v2.a%20*%20this.m_v2.wA.x%20%2B%0A%20%20%20%20%20%20%20%20%20%20%20%20this.m_v3.a%20*%20this.m_v3.wA.x%3B%0A%20%20%20%20%20%20%20%20%20%20pB.y%20%3D%20pA.y%20%3D%0A%20%20%20%20%20%20%20%20%20%20%20%20this.m_v1.a%20*%20this.m_v1.wA.y%20%2B%0A%20%20%20%20%20%20%20%20%20%20%20%20this.m_v2.a%20*%20this.m_v2.wA.y%20%2B%0A%20%20%20%20%20%20%20%20%20%20%20%20this.m_v3.a%20*%20this.m_v3.wA.y%3B%0A%20%20%20%20%20%20%20%20%20%20break%3B%0A%20%20%20%20%20%20%20%20default%3A%0A%20%20%20%20%20%20%20%20%20%20b2Settings.b2Assert(false)%3B%0A%20%20%20%20%20%20%20%20%20%20break%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2Simplex.prototype.GetMetric%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20switch%20(this.m_count)%20%7B%0A%20%20%20%20%20%20%20%20case%200%3A%0A%20%20%20%20%20%20%20%20%20%20b2Settings.b2Assert(false)%3B%0A%20%20%20%20%20%20%20%20%20%20return%200.0%3B%0A%20%20%20%20%20%20%20%20case%201%3A%0A%20%20%20%20%20%20%20%20%20%20return%200.0%3B%0A%20%20%20%20%20%20%20%20case%202%3A%0A%20%20%20%20%20%20%20%20%20%20return%20b2Math.SubtractVV(this.m_v1.w%2C%20this.m_v2.w).Length()%3B%0A%20%20%20%20%20%20%20%20case%203%3A%0A%20%20%20%20%20%20%20%20%20%20return%20b2Math.CrossVV(%0A%20%20%20%20%20%20%20%20%20%20%20%20b2Math.SubtractVV(this.m_v2.w%2C%20this.m_v1.w)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20b2Math.SubtractVV(this.m_v3.w%2C%20this.m_v1.w)%0A%20%20%20%20%20%20%20%20%20%20)%3B%0A%20%20%20%20%20%20%20%20default%3A%0A%20%20%20%20%20%20%20%20%20%20b2Settings.b2Assert(false)%3B%0A%20%20%20%20%20%20%20%20%20%20return%200.0%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2Simplex.prototype.Solve2%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20var%20w1%20%3D%20this.m_v1.w%3B%0A%20%20%20%20%20%20var%20w2%20%3D%20this.m_v2.w%3B%0A%20%20%20%20%20%20var%20e12%20%3D%20b2Math.SubtractVV(w2%2C%20w1)%3B%0A%20%20%20%20%20%20var%20d12_2%20%3D%20-(w1.x%20*%20e12.x%20%2B%20w1.y%20*%20e12.y)%3B%0A%20%20%20%20%20%20if%20(d12_2%20%3C%3D%200.0)%20%7B%0A%20%20%20%20%20%20%20%20this.m_v1.a%20%3D%201.0%3B%0A%20%20%20%20%20%20%20%20this.m_count%20%3D%201%3B%0A%20%20%20%20%20%20%20%20return%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20var%20d12_1%20%3D%20w2.x%20*%20e12.x%20%2B%20w2.y%20*%20e12.y%3B%0A%20%20%20%20%20%20if%20(d12_1%20%3C%3D%200.0)%20%7B%0A%20%20%20%20%20%20%20%20this.m_v2.a%20%3D%201.0%3B%0A%20%20%20%20%20%20%20%20this.m_count%20%3D%201%3B%0A%20%20%20%20%20%20%20%20this.m_v1.Set(this.m_v2)%3B%0A%20%20%20%20%20%20%20%20return%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20var%20inv_d12%20%3D%201.0%20%2F%20(d12_1%20%2B%20d12_2)%3B%0A%20%20%20%20%20%20this.m_v1.a%20%3D%20d12_1%20*%20inv_d12%3B%0A%20%20%20%20%20%20this.m_v2.a%20%3D%20d12_2%20*%20inv_d12%3B%0A%20%20%20%20%20%20this.m_count%20%3D%202%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2Simplex.prototype.Solve3%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20var%20w1%20%3D%20this.m_v1.w%3B%0A%20%20%20%20%20%20var%20w2%20%3D%20this.m_v2.w%3B%0A%20%20%20%20%20%20var%20w3%20%3D%20this.m_v3.w%3B%0A%20%20%20%20%20%20var%20e12%20%3D%20b2Math.SubtractVV(w2%2C%20w1)%3B%0A%20%20%20%20%20%20var%20w1e12%20%3D%20b2Math.Dot(w1%2C%20e12)%3B%0A%20%20%20%20%20%20var%20w2e12%20%3D%20b2Math.Dot(w2%2C%20e12)%3B%0A%20%20%20%20%20%20var%20d12_1%20%3D%20w2e12%3B%0A%20%20%20%20%20%20var%20d12_2%20%3D%20-w1e12%3B%0A%20%20%20%20%20%20var%20e13%20%3D%20b2Math.SubtractVV(w3%2C%20w1)%3B%0A%20%20%20%20%20%20var%20w1e13%20%3D%20b2Math.Dot(w1%2C%20e13)%3B%0A%20%20%20%20%20%20var%20w3e13%20%3D%20b2Math.Dot(w3%2C%20e13)%3B%0A%20%20%20%20%20%20var%20d13_1%20%3D%20w3e13%3B%0A%20%20%20%20%20%20var%20d13_2%20%3D%20-w1e13%3B%0A%20%20%20%20%20%20var%20e23%20%3D%20b2Math.SubtractVV(w3%2C%20w2)%3B%0A%20%20%20%20%20%20var%20w2e23%20%3D%20b2Math.Dot(w2%2C%20e23)%3B%0A%20%20%20%20%20%20var%20w3e23%20%3D%20b2Math.Dot(w3%2C%20e23)%3B%0A%20%20%20%20%20%20var%20d23_1%20%3D%20w3e23%3B%0A%20%20%20%20%20%20var%20d23_2%20%3D%20-w2e23%3B%0A%20%20%20%20%20%20var%20n123%20%3D%20b2Math.CrossVV(e12%2C%20e13)%3B%0A%20%20%20%20%20%20var%20d123_1%20%3D%20n123%20*%20b2Math.CrossVV(w2%2C%20w3)%3B%0A%20%20%20%20%20%20var%20d123_2%20%3D%20n123%20*%20b2Math.CrossVV(w3%2C%20w1)%3B%0A%20%20%20%20%20%20var%20d123_3%20%3D%20n123%20*%20b2Math.CrossVV(w1%2C%20w2)%3B%0A%20%20%20%20%20%20if%20(d12_2%20%3C%3D%200.0%20%26%26%20d13_2%20%3C%3D%200.0)%20%7B%0A%20%20%20%20%20%20%20%20this.m_v1.a%20%3D%201.0%3B%0A%20%20%20%20%20%20%20%20this.m_count%20%3D%201%3B%0A%20%20%20%20%20%20%20%20return%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20if%20(d12_1%20%3E%200.0%20%26%26%20d12_2%20%3E%200.0%20%26%26%20d123_3%20%3C%3D%200.0)%20%7B%0A%20%20%20%20%20%20%20%20var%20inv_d12%20%3D%201.0%20%2F%20(d12_1%20%2B%20d12_2)%3B%0A%20%20%20%20%20%20%20%20this.m_v1.a%20%3D%20d12_1%20*%20inv_d12%3B%0A%20%20%20%20%20%20%20%20this.m_v2.a%20%3D%20d12_2%20*%20inv_d12%3B%0A%20%20%20%20%20%20%20%20this.m_count%20%3D%202%3B%0A%20%20%20%20%20%20%20%20return%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20if%20(d13_1%20%3E%200.0%20%26%26%20d13_2%20%3E%200.0%20%26%26%20d123_2%20%3C%3D%200.0)%20%7B%0A%20%20%20%20%20%20%20%20var%20inv_d13%20%3D%201.0%20%2F%20(d13_1%20%2B%20d13_2)%3B%0A%20%20%20%20%20%20%20%20this.m_v1.a%20%3D%20d13_1%20*%20inv_d13%3B%0A%20%20%20%20%20%20%20%20this.m_v3.a%20%3D%20d13_2%20*%20inv_d13%3B%0A%20%20%20%20%20%20%20%20this.m_count%20%3D%202%3B%0A%20%20%20%20%20%20%20%20this.m_v2.Set(this.m_v3)%3B%0A%20%20%20%20%20%20%20%20return%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20if%20(d12_1%20%3C%3D%200.0%20%26%26%20d23_2%20%3C%3D%200.0)%20%7B%0A%20%20%20%20%20%20%20%20this.m_v2.a%20%3D%201.0%3B%0A%20%20%20%20%20%20%20%20this.m_count%20%3D%201%3B%0A%20%20%20%20%20%20%20%20this.m_v1.Set(this.m_v2)%3B%0A%20%20%20%20%20%20%20%20return%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20if%20(d13_1%20%3C%3D%200.0%20%26%26%20d23_1%20%3C%3D%200.0)%20%7B%0A%20%20%20%20%20%20%20%20this.m_v3.a%20%3D%201.0%3B%0A%20%20%20%20%20%20%20%20this.m_count%20%3D%201%3B%0A%20%20%20%20%20%20%20%20this.m_v1.Set(this.m_v3)%3B%0A%20%20%20%20%20%20%20%20return%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20if%20(d23_1%20%3E%200.0%20%26%26%20d23_2%20%3E%200.0%20%26%26%20d123_1%20%3C%3D%200.0)%20%7B%0A%20%20%20%20%20%20%20%20var%20inv_d23%20%3D%201.0%20%2F%20(d23_1%20%2B%20d23_2)%3B%0A%20%20%20%20%20%20%20%20this.m_v2.a%20%3D%20d23_1%20*%20inv_d23%3B%0A%20%20%20%20%20%20%20%20this.m_v3.a%20%3D%20d23_2%20*%20inv_d23%3B%0A%20%20%20%20%20%20%20%20this.m_count%20%3D%202%3B%0A%20%20%20%20%20%20%20%20this.m_v1.Set(this.m_v3)%3B%0A%20%20%20%20%20%20%20%20return%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20var%20inv_d123%20%3D%201.0%20%2F%20(d123_1%20%2B%20d123_2%20%2B%20d123_3)%3B%0A%20%20%20%20%20%20this.m_v1.a%20%3D%20d123_1%20*%20inv_d123%3B%0A%20%20%20%20%20%20this.m_v2.a%20%3D%20d123_2%20*%20inv_d123%3B%0A%20%20%20%20%20%20this.m_v3.a%20%3D%20d123_3%20*%20inv_d123%3B%0A%20%20%20%20%20%20this.m_count%20%3D%203%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2SimplexCache.b2SimplexCache%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20this.indexA%20%3D%20new%20Vector_a2j_Number(3)%3B%0A%20%20%20%20%20%20this.indexB%20%3D%20new%20Vector_a2j_Number(3)%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2SimplexVertex.b2SimplexVertex%20%3D%20function%20()%20%7B%7D%3B%0A%20%20%20%20b2SimplexVertex.prototype.Set%20%3D%20function%20(other)%20%7B%0A%20%20%20%20%20%20this.wA.SetV(other.wA)%3B%0A%20%20%20%20%20%20this.wB.SetV(other.wB)%3B%0A%20%20%20%20%20%20this.w.SetV(other.w)%3B%0A%20%20%20%20%20%20this.a%20%3D%20other.a%3B%0A%20%20%20%20%20%20this.indexA%20%3D%20other.indexA%3B%0A%20%20%20%20%20%20this.indexB%20%3D%20other.indexB%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2TimeOfImpact.b2TimeOfImpact%20%3D%20function%20()%20%7B%7D%3B%0A%20%20%20%20b2TimeOfImpact.TimeOfImpact%20%3D%20function%20(input)%20%7B%0A%20%20%20%20%20%20%2B%2Bb2TimeOfImpact.b2_toiCalls%3B%0A%20%20%20%20%20%20var%20proxyA%20%3D%20input.proxyA%3B%0A%20%20%20%20%20%20var%20proxyB%20%3D%20input.proxyB%3B%0A%20%20%20%20%20%20var%20sweepA%20%3D%20input.sweepA%3B%0A%20%20%20%20%20%20var%20sweepB%20%3D%20input.sweepB%3B%0A%20%20%20%20%20%20b2Settings.b2Assert(sweepA.t0%20%3D%3D%20sweepB.t0)%3B%0A%20%20%20%20%20%20b2Settings.b2Assert(1.0%20-%20sweepA.t0%20%3E%20Number.MIN_VALUE)%3B%0A%20%20%20%20%20%20var%20radius%20%3D%20proxyA.m_radius%20%2B%20proxyB.m_radius%3B%0A%20%20%20%20%20%20var%20tolerance%20%3D%20input.tolerance%3B%0A%20%20%20%20%20%20var%20alpha%20%3D%200.0%3B%0A%20%20%20%20%20%20var%20k_maxIterations%20%3D%201000%3B%0A%20%20%20%20%20%20var%20iter%20%3D%200%3B%0A%20%20%20%20%20%20var%20target%20%3D%200.0%3B%0A%20%20%20%20%20%20b2TimeOfImpact.s_cache.count%20%3D%200%3B%0A%20%20%20%20%20%20b2TimeOfImpact.s_distanceInput.useRadii%20%3D%20false%3B%0A%20%20%20%20%20%20for%20(%3B%3B)%20%7B%0A%20%20%20%20%20%20%20%20sweepA.GetTransform(b2TimeOfImpact.s_xfA%2C%20alpha)%3B%0A%20%20%20%20%20%20%20%20sweepB.GetTransform(b2TimeOfImpact.s_xfB%2C%20alpha)%3B%0A%20%20%20%20%20%20%20%20b2TimeOfImpact.s_distanceInput.proxyA%20%3D%20proxyA%3B%0A%20%20%20%20%20%20%20%20b2TimeOfImpact.s_distanceInput.proxyB%20%3D%20proxyB%3B%0A%20%20%20%20%20%20%20%20b2TimeOfImpact.s_distanceInput.transformA%20%3D%20b2TimeOfImpact.s_xfA%3B%0A%20%20%20%20%20%20%20%20b2TimeOfImpact.s_distanceInput.transformB%20%3D%20b2TimeOfImpact.s_xfB%3B%0A%20%20%20%20%20%20%20%20b2Distance.Distance(%0A%20%20%20%20%20%20%20%20%20%20b2TimeOfImpact.s_distanceOutput%2C%0A%20%20%20%20%20%20%20%20%20%20b2TimeOfImpact.s_cache%2C%0A%20%20%20%20%20%20%20%20%20%20b2TimeOfImpact.s_distanceInput%0A%20%20%20%20%20%20%20%20)%3B%0A%20%20%20%20%20%20%20%20if%20(b2TimeOfImpact.s_distanceOutput.distance%20%3C%3D%200.0)%20%7B%0A%20%20%20%20%20%20%20%20%20%20alpha%20%3D%201.0%3B%0A%20%20%20%20%20%20%20%20%20%20break%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20b2TimeOfImpact.s_fcn.Initialize(%0A%20%20%20%20%20%20%20%20%20%20b2TimeOfImpact.s_cache%2C%0A%20%20%20%20%20%20%20%20%20%20proxyA%2C%0A%20%20%20%20%20%20%20%20%20%20b2TimeOfImpact.s_xfA%2C%0A%20%20%20%20%20%20%20%20%20%20proxyB%2C%0A%20%20%20%20%20%20%20%20%20%20b2TimeOfImpact.s_xfB%0A%20%20%20%20%20%20%20%20)%3B%0A%20%20%20%20%20%20%20%20var%20separation%20%3D%20b2TimeOfImpact.s_fcn.Evaluate(%0A%20%20%20%20%20%20%20%20%20%20b2TimeOfImpact.s_xfA%2C%0A%20%20%20%20%20%20%20%20%20%20b2TimeOfImpact.s_xfB%0A%20%20%20%20%20%20%20%20)%3B%0A%20%20%20%20%20%20%20%20if%20(separation%20%3C%3D%200.0)%20%7B%0A%20%20%20%20%20%20%20%20%20%20alpha%20%3D%201.0%3B%0A%20%20%20%20%20%20%20%20%20%20break%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20if%20(iter%20%3D%3D%200)%20%7B%0A%20%20%20%20%20%20%20%20%20%20if%20(separation%20%3E%20radius)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20target%20%3D%20b2Math.Max(radius%20-%20tolerance%2C%200.75%20*%20radius)%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20target%20%3D%20b2Math.Max(separation%20-%20tolerance%2C%200.02%20*%20radius)%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20if%20(separation%20-%20target%20%3C%200.5%20*%20tolerance)%20%7B%0A%20%20%20%20%20%20%20%20%20%20if%20(iter%20%3D%3D%200)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20alpha%20%3D%201.0%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20break%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20break%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20var%20newAlpha%20%3D%20alpha%3B%0A%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20var%20x1%20%3D%20alpha%3B%0A%20%20%20%20%20%20%20%20%20%20var%20x2%20%3D%201.0%3B%0A%20%20%20%20%20%20%20%20%20%20var%20f1%20%3D%20separation%3B%0A%20%20%20%20%20%20%20%20%20%20sweepA.GetTransform(b2TimeOfImpact.s_xfA%2C%20x2)%3B%0A%20%20%20%20%20%20%20%20%20%20sweepB.GetTransform(b2TimeOfImpact.s_xfB%2C%20x2)%3B%0A%20%20%20%20%20%20%20%20%20%20var%20f2%20%3D%20b2TimeOfImpact.s_fcn.Evaluate(%0A%20%20%20%20%20%20%20%20%20%20%20%20b2TimeOfImpact.s_xfA%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20b2TimeOfImpact.s_xfB%0A%20%20%20%20%20%20%20%20%20%20)%3B%0A%20%20%20%20%20%20%20%20%20%20if%20(f2%20%3E%3D%20target)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20alpha%20%3D%201.0%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20break%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20var%20rootIterCount%20%3D%200%3B%0A%20%20%20%20%20%20%20%20%20%20for%20(%3B%3B)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20var%20x%20%3D%200%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(rootIterCount%20%26%201)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20x%20%3D%20x1%20%2B%20((target%20-%20f1)%20*%20(x2%20-%20x1))%20%2F%20(f2%20-%20f1)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20x%20%3D%200.5%20*%20(x1%20%2B%20x2)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20sweepA.GetTransform(b2TimeOfImpact.s_xfA%2C%20x)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20sweepB.GetTransform(b2TimeOfImpact.s_xfB%2C%20x)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20var%20f%20%3D%20b2TimeOfImpact.s_fcn.Evaluate(%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20b2TimeOfImpact.s_xfA%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20b2TimeOfImpact.s_xfB%0A%20%20%20%20%20%20%20%20%20%20%20%20)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(b2Math.Abs(f%20-%20target)%20%3C%200.025%20*%20tolerance)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20newAlpha%20%3D%20x%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20break%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(f%20%3E%20target)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20x1%20%3D%20x%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20f1%20%3D%20f%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20x2%20%3D%20x%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20f2%20%3D%20f%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%2B%2BrootIterCount%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%2B%2Bb2TimeOfImpact.b2_toiRootIters%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(rootIterCount%20%3D%3D%2050)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20break%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20b2TimeOfImpact.b2_toiMaxRootIters%20%3D%20b2Math.Max(%0A%20%20%20%20%20%20%20%20%20%20%20%20b2TimeOfImpact.b2_toiMaxRootIters%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20rootIterCount%0A%20%20%20%20%20%20%20%20%20%20)%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20if%20(newAlpha%20%3C%20(1.0%20%2B%20100.0%20*%20Number.MIN_VALUE)%20*%20alpha)%20%7B%0A%20%20%20%20%20%20%20%20%20%20break%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20alpha%20%3D%20newAlpha%3B%0A%20%20%20%20%20%20%20%20iter%2B%2B%3B%0A%20%20%20%20%20%20%20%20%2B%2Bb2TimeOfImpact.b2_toiIters%3B%0A%20%20%20%20%20%20%20%20if%20(iter%20%3D%3D%20k_maxIterations)%20%7B%0A%20%20%20%20%20%20%20%20%20%20break%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20b2TimeOfImpact.b2_toiMaxIters%20%3D%20b2Math.Max(%0A%20%20%20%20%20%20%20%20b2TimeOfImpact.b2_toiMaxIters%2C%0A%20%20%20%20%20%20%20%20iter%0A%20%20%20%20%20%20)%3B%0A%20%20%20%20%20%20return%20alpha%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20Box2D.postDefs.push(function%20()%20%7B%0A%20%20%20%20%20%20Box2D.Collision.b2TimeOfImpact.b2_toiCalls%20%3D%200%3B%0A%20%20%20%20%20%20Box2D.Collision.b2TimeOfImpact.b2_toiIters%20%3D%200%3B%0A%20%20%20%20%20%20Box2D.Collision.b2TimeOfImpact.b2_toiMaxIters%20%3D%200%3B%0A%20%20%20%20%20%20Box2D.Collision.b2TimeOfImpact.b2_toiRootIters%20%3D%200%3B%0A%20%20%20%20%20%20Box2D.Collision.b2TimeOfImpact.b2_toiMaxRootIters%20%3D%200%3B%0A%20%20%20%20%20%20Box2D.Collision.b2TimeOfImpact.s_cache%20%3D%20new%20b2SimplexCache()%3B%0A%20%20%20%20%20%20Box2D.Collision.b2TimeOfImpact.s_distanceInput%20%3D%20new%20b2DistanceInput()%3B%0A%20%20%20%20%20%20Box2D.Collision.b2TimeOfImpact.s_xfA%20%3D%20new%20b2Transform()%3B%0A%20%20%20%20%20%20Box2D.Collision.b2TimeOfImpact.s_xfB%20%3D%20new%20b2Transform()%3B%0A%20%20%20%20%20%20Box2D.Collision.b2TimeOfImpact.s_fcn%20%3D%20new%20b2SeparationFunction()%3B%0A%20%20%20%20%20%20Box2D.Collision.b2TimeOfImpact.s_distanceOutput%20%3D%20new%20b2DistanceOutput()%3B%0A%20%20%20%20%7D)%3B%0A%20%20%20%20b2TOIInput.b2TOIInput%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20this.proxyA%20%3D%20new%20b2DistanceProxy()%3B%0A%20%20%20%20%20%20this.proxyB%20%3D%20new%20b2DistanceProxy()%3B%0A%20%20%20%20%20%20this.sweepA%20%3D%20new%20b2Sweep()%3B%0A%20%20%20%20%20%20this.sweepB%20%3D%20new%20b2Sweep()%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2WorldManifold.b2WorldManifold%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20this.m_normal%20%3D%20new%20b2Vec2()%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2WorldManifold.prototype.b2WorldManifold%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20this.m_points%20%3D%20new%20Vector(b2Settings.b2_maxManifoldPoints)%3B%0A%20%20%20%20%20%20for%20(var%20i%20%3D%200%3B%20i%20%3C%20b2Settings.b2_maxManifoldPoints%3B%20i%2B%2B)%20%7B%0A%20%20%20%20%20%20%20%20this.m_points%5Bi%5D%20%3D%20new%20b2Vec2()%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2WorldManifold.prototype.Initialize%20%3D%20function%20(%0A%20%20%20%20%20%20manifold%2C%0A%20%20%20%20%20%20xfA%2C%0A%20%20%20%20%20%20radiusA%2C%0A%20%20%20%20%20%20xfB%2C%0A%20%20%20%20%20%20radiusB%0A%20%20%20%20)%20%7B%0A%20%20%20%20%20%20if%20(radiusA%20%3D%3D%3D%20undefined)%20radiusA%20%3D%200%3B%0A%20%20%20%20%20%20if%20(radiusB%20%3D%3D%3D%20undefined)%20radiusB%20%3D%200%3B%0A%20%20%20%20%20%20if%20(manifold.m_pointCount%20%3D%3D%200)%20%7B%0A%20%20%20%20%20%20%20%20return%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20var%20i%20%3D%200%3B%0A%20%20%20%20%20%20var%20tVec%3B%0A%20%20%20%20%20%20var%20tMat%3B%0A%20%20%20%20%20%20var%20normalX%20%3D%200%3B%0A%20%20%20%20%20%20var%20normalY%20%3D%200%3B%0A%20%20%20%20%20%20var%20planePointX%20%3D%200%3B%0A%20%20%20%20%20%20var%20planePointY%20%3D%200%3B%0A%20%20%20%20%20%20var%20clipPointX%20%3D%200%3B%0A%20%20%20%20%20%20var%20clipPointY%20%3D%200%3B%0A%20%20%20%20%20%20switch%20(manifold.m_type)%20%7B%0A%20%20%20%20%20%20%20%20case%20b2Manifold.e_circles%3A%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20tMat%20%3D%20xfA.R%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20tVec%20%3D%20manifold.m_localPoint%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20var%20pointAX%20%3D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20xfA.position.x%20%2B%20tMat.col1.x%20*%20tVec.x%20%2B%20tMat.col2.x%20*%20tVec.y%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20var%20pointAY%20%3D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20xfA.position.y%20%2B%20tMat.col1.y%20*%20tVec.x%20%2B%20tMat.col2.y%20*%20tVec.y%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20tMat%20%3D%20xfB.R%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20tVec%20%3D%20manifold.m_points%5B0%5D.m_localPoint%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20var%20pointBX%20%3D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20xfB.position.x%20%2B%20tMat.col1.x%20*%20tVec.x%20%2B%20tMat.col2.x%20*%20tVec.y%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20var%20pointBY%20%3D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20xfB.position.y%20%2B%20tMat.col1.y%20*%20tVec.x%20%2B%20tMat.col2.y%20*%20tVec.y%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20var%20dX%20%3D%20pointBX%20-%20pointAX%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20var%20dY%20%3D%20pointBY%20-%20pointAY%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20var%20d2%20%3D%20dX%20*%20dX%20%2B%20dY%20*%20dY%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(d2%20%3E%20Number.MIN_VALUE%20*%20Number.MIN_VALUE)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20var%20d%20%3D%20Math.sqrt(d2)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20this.m_normal.x%20%3D%20dX%20%2F%20d%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20this.m_normal.y%20%3D%20dY%20%2F%20d%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20this.m_normal.x%20%3D%201%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20this.m_normal.y%20%3D%200%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20var%20cAX%20%3D%20pointAX%20%2B%20radiusA%20*%20this.m_normal.x%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20var%20cAY%20%3D%20pointAY%20%2B%20radiusA%20*%20this.m_normal.y%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20var%20cBX%20%3D%20pointBX%20-%20radiusB%20*%20this.m_normal.x%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20var%20cBY%20%3D%20pointBY%20-%20radiusB%20*%20this.m_normal.y%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20this.m_points%5B0%5D.x%20%3D%200.5%20*%20(cAX%20%2B%20cBX)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20this.m_points%5B0%5D.y%20%3D%200.5%20*%20(cAY%20%2B%20cBY)%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20break%3B%0A%20%20%20%20%20%20%20%20case%20b2Manifold.e_faceA%3A%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20tMat%20%3D%20xfA.R%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20tVec%20%3D%20manifold.m_localPlaneNormal%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20normalX%20%3D%20tMat.col1.x%20*%20tVec.x%20%2B%20tMat.col2.x%20*%20tVec.y%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20normalY%20%3D%20tMat.col1.y%20*%20tVec.x%20%2B%20tMat.col2.y%20*%20tVec.y%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20tMat%20%3D%20xfA.R%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20tVec%20%3D%20manifold.m_localPoint%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20planePointX%20%3D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20xfA.position.x%20%2B%20tMat.col1.x%20*%20tVec.x%20%2B%20tMat.col2.x%20*%20tVec.y%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20planePointY%20%3D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20xfA.position.y%20%2B%20tMat.col1.y%20*%20tVec.x%20%2B%20tMat.col2.y%20*%20tVec.y%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20this.m_normal.x%20%3D%20normalX%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20this.m_normal.y%20%3D%20normalY%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20for%20(i%20%3D%200%3B%20i%20%3C%20manifold.m_pointCount%3B%20i%2B%2B)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20tMat%20%3D%20xfB.R%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20tVec%20%3D%20manifold.m_points%5Bi%5D.m_localPoint%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20clipPointX%20%3D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20xfB.position.x%20%2B%20tMat.col1.x%20*%20tVec.x%20%2B%20tMat.col2.x%20*%20tVec.y%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20clipPointY%20%3D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20xfB.position.y%20%2B%20tMat.col1.y%20*%20tVec.x%20%2B%20tMat.col2.y%20*%20tVec.y%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20this.m_points%5Bi%5D.x%20%3D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20clipPointX%20%2B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%200.5%20*%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20(radiusA%20-%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20(clipPointX%20-%20planePointX)%20*%20normalX%20-%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20(clipPointY%20-%20planePointY)%20*%20normalY%20-%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20radiusB)%20*%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20normalX%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20this.m_points%5Bi%5D.y%20%3D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20clipPointY%20%2B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%200.5%20*%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20(radiusA%20-%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20(clipPointX%20-%20planePointX)%20*%20normalX%20-%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20(clipPointY%20-%20planePointY)%20*%20normalY%20-%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20radiusB)%20*%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20normalY%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20break%3B%0A%20%20%20%20%20%20%20%20case%20b2Manifold.e_faceB%3A%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20tMat%20%3D%20xfB.R%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20tVec%20%3D%20manifold.m_localPlaneNormal%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20normalX%20%3D%20tMat.col1.x%20*%20tVec.x%20%2B%20tMat.col2.x%20*%20tVec.y%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20normalY%20%3D%20tMat.col1.y%20*%20tVec.x%20%2B%20tMat.col2.y%20*%20tVec.y%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20tMat%20%3D%20xfB.R%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20tVec%20%3D%20manifold.m_localPoint%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20planePointX%20%3D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20xfB.position.x%20%2B%20tMat.col1.x%20*%20tVec.x%20%2B%20tMat.col2.x%20*%20tVec.y%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20planePointY%20%3D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20xfB.position.y%20%2B%20tMat.col1.y%20*%20tVec.x%20%2B%20tMat.col2.y%20*%20tVec.y%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20this.m_normal.x%20%3D%20-normalX%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20this.m_normal.y%20%3D%20-normalY%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20for%20(i%20%3D%200%3B%20i%20%3C%20manifold.m_pointCount%3B%20i%2B%2B)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20tMat%20%3D%20xfA.R%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20tVec%20%3D%20manifold.m_points%5Bi%5D.m_localPoint%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20clipPointX%20%3D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20xfA.position.x%20%2B%20tMat.col1.x%20*%20tVec.x%20%2B%20tMat.col2.x%20*%20tVec.y%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20clipPointY%20%3D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20xfA.position.y%20%2B%20tMat.col1.y%20*%20tVec.x%20%2B%20tMat.col2.y%20*%20tVec.y%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20this.m_points%5Bi%5D.x%20%3D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20clipPointX%20%2B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%200.5%20*%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20(radiusB%20-%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20(clipPointX%20-%20planePointX)%20*%20normalX%20-%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20(clipPointY%20-%20planePointY)%20*%20normalY%20-%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20radiusA)%20*%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20normalX%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20this.m_points%5Bi%5D.y%20%3D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20clipPointY%20%2B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%200.5%20*%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20(radiusB%20-%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20(clipPointX%20-%20planePointX)%20*%20normalX%20-%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20(clipPointY%20-%20planePointY)%20*%20normalY%20-%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20radiusA)%20*%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20normalY%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20break%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%3B%0A%20%20%20%20ClipVertex.ClipVertex%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20this.v%20%3D%20new%20b2Vec2()%3B%0A%20%20%20%20%20%20this.id%20%3D%20new%20b2ContactID()%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20ClipVertex.prototype.Set%20%3D%20function%20(other)%20%7B%0A%20%20%20%20%20%20this.v.SetV(other.v)%3B%0A%20%20%20%20%20%20this.id.Set(other.id)%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20Features.Features%20%3D%20function%20()%20%7B%7D%3B%0A%20%20%20%20Object.defineProperty(Features.prototype%2C%20%22referenceEdge%22%2C%20%7B%0A%20%20%20%20%20%20enumerable%3A%20false%2C%0A%20%20%20%20%20%20configurable%3A%20true%2C%0A%20%20%20%20%20%20get%3A%20function%20()%20%7B%0A%20%20%20%20%20%20%20%20return%20this._referenceEdge%3B%0A%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%7D)%3B%0A%20%20%20%20Object.defineProperty(Features.prototype%2C%20%22referenceEdge%22%2C%20%7B%0A%20%20%20%20%20%20enumerable%3A%20false%2C%0A%20%20%20%20%20%20configurable%3A%20true%2C%0A%20%20%20%20%20%20set%3A%20function%20(value)%20%7B%0A%20%20%20%20%20%20%20%20if%20(value%20%3D%3D%3D%20undefined)%20value%20%3D%200%3B%0A%20%20%20%20%20%20%20%20this._referenceEdge%20%3D%20value%3B%0A%20%20%20%20%20%20%20%20this._m_id._key%20%3D%0A%20%20%20%20%20%20%20%20%20%20(this._m_id._key%20%26%200xffffff00)%20%7C%20(this._referenceEdge%20%26%200x000000ff)%3B%0A%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%7D)%3B%0A%20%20%20%20Object.defineProperty(Features.prototype%2C%20%22incidentEdge%22%2C%20%7B%0A%20%20%20%20%20%20enumerable%3A%20false%2C%0A%20%20%20%20%20%20configurable%3A%20true%2C%0A%20%20%20%20%20%20get%3A%20function%20()%20%7B%0A%20%20%20%20%20%20%20%20return%20this._incidentEdge%3B%0A%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%7D)%3B%0A%20%20%20%20Object.defineProperty(Features.prototype%2C%20%22incidentEdge%22%2C%20%7B%0A%20%20%20%20%20%20enumerable%3A%20false%2C%0A%20%20%20%20%20%20configurable%3A%20true%2C%0A%20%20%20%20%20%20set%3A%20function%20(value)%20%7B%0A%20%20%20%20%20%20%20%20if%20(value%20%3D%3D%3D%20undefined)%20value%20%3D%200%3B%0A%20%20%20%20%20%20%20%20this._incidentEdge%20%3D%20value%3B%0A%20%20%20%20%20%20%20%20this._m_id._key%20%3D%0A%20%20%20%20%20%20%20%20%20%20(this._m_id._key%20%26%200xffff00ff)%20%7C%0A%20%20%20%20%20%20%20%20%20%20((this._incidentEdge%20%3C%3C%208)%20%26%200x0000ff00)%3B%0A%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%7D)%3B%0A%20%20%20%20Object.defineProperty(Features.prototype%2C%20%22incidentVertex%22%2C%20%7B%0A%20%20%20%20%20%20enumerable%3A%20false%2C%0A%20%20%20%20%20%20configurable%3A%20true%2C%0A%20%20%20%20%20%20get%3A%20function%20()%20%7B%0A%20%20%20%20%20%20%20%20return%20this._incidentVertex%3B%0A%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%7D)%3B%0A%20%20%20%20Object.defineProperty(Features.prototype%2C%20%22incidentVertex%22%2C%20%7B%0A%20%20%20%20%20%20enumerable%3A%20false%2C%0A%20%20%20%20%20%20configurable%3A%20true%2C%0A%20%20%20%20%20%20set%3A%20function%20(value)%20%7B%0A%20%20%20%20%20%20%20%20if%20(value%20%3D%3D%3D%20undefined)%20value%20%3D%200%3B%0A%20%20%20%20%20%20%20%20this._incidentVertex%20%3D%20value%3B%0A%20%20%20%20%20%20%20%20this._m_id._key%20%3D%0A%20%20%20%20%20%20%20%20%20%20(this._m_id._key%20%26%200xff00ffff)%20%7C%0A%20%20%20%20%20%20%20%20%20%20((this._incidentVertex%20%3C%3C%2016)%20%26%200x00ff0000)%3B%0A%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%7D)%3B%0A%20%20%20%20Object.defineProperty(Features.prototype%2C%20%22flip%22%2C%20%7B%0A%20%20%20%20%20%20enumerable%3A%20false%2C%0A%20%20%20%20%20%20configurable%3A%20true%2C%0A%20%20%20%20%20%20get%3A%20function%20()%20%7B%0A%20%20%20%20%20%20%20%20return%20this._flip%3B%0A%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%7D)%3B%0A%20%20%20%20Object.defineProperty(Features.prototype%2C%20%22flip%22%2C%20%7B%0A%20%20%20%20%20%20enumerable%3A%20false%2C%0A%20%20%20%20%20%20configurable%3A%20true%2C%0A%20%20%20%20%20%20set%3A%20function%20(value)%20%7B%0A%20%20%20%20%20%20%20%20if%20(value%20%3D%3D%3D%20undefined)%20value%20%3D%200%3B%0A%20%20%20%20%20%20%20%20this._flip%20%3D%20value%3B%0A%20%20%20%20%20%20%20%20this._m_id._key%20%3D%0A%20%20%20%20%20%20%20%20%20%20(this._m_id._key%20%26%200x00ffffff)%20%7C%20((this._flip%20%3C%3C%2024)%20%26%200xff000000)%3B%0A%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%7D)%3B%0A%20%20%7D)()%3B%0A%20%20(function%20()%20%7B%0A%20%20%20%20var%20b2Color%20%3D%20Box2D.Common.b2Color%2C%0A%20%20%20%20%20%20b2internal%20%3D%20Box2D.Common.b2internal%2C%0A%20%20%20%20%20%20b2Settings%20%3D%20Box2D.Common.b2Settings%2C%0A%20%20%20%20%20%20b2CircleShape%20%3D%20Box2D.Collision.Shapes.b2CircleShape%2C%0A%20%20%20%20%20%20b2EdgeChainDef%20%3D%20Box2D.Collision.Shapes.b2EdgeChainDef%2C%0A%20%20%20%20%20%20b2EdgeShape%20%3D%20Box2D.Collision.Shapes.b2EdgeShape%2C%0A%20%20%20%20%20%20b2MassData%20%3D%20Box2D.Collision.Shapes.b2MassData%2C%0A%20%20%20%20%20%20b2PolygonShape%20%3D%20Box2D.Collision.Shapes.b2PolygonShape%2C%0A%20%20%20%20%20%20b2Shape%20%3D%20Box2D.Collision.Shapes.b2Shape%2C%0A%20%20%20%20%20%20b2Mat22%20%3D%20Box2D.Common.Math.b2Mat22%2C%0A%20%20%20%20%20%20b2Mat33%20%3D%20Box2D.Common.Math.b2Mat33%2C%0A%20%20%20%20%20%20b2Math%20%3D%20Box2D.Common.Math.b2Math%2C%0A%20%20%20%20%20%20b2Sweep%20%3D%20Box2D.Common.Math.b2Sweep%2C%0A%20%20%20%20%20%20b2Transform%20%3D%20Box2D.Common.Math.b2Transform%2C%0A%20%20%20%20%20%20b2Vec2%20%3D%20Box2D.Common.Math.b2Vec2%2C%0A%20%20%20%20%20%20b2Vec3%20%3D%20Box2D.Common.Math.b2Vec3%2C%0A%20%20%20%20%20%20b2Body%20%3D%20Box2D.Dynamics.b2Body%2C%0A%20%20%20%20%20%20b2BodyDef%20%3D%20Box2D.Dynamics.b2BodyDef%2C%0A%20%20%20%20%20%20b2ContactFilter%20%3D%20Box2D.Dynamics.b2ContactFilter%2C%0A%20%20%20%20%20%20b2ContactImpulse%20%3D%20Box2D.Dynamics.b2ContactImpulse%2C%0A%20%20%20%20%20%20b2ContactListener%20%3D%20Box2D.Dynamics.b2ContactListener%2C%0A%20%20%20%20%20%20b2ContactManager%20%3D%20Box2D.Dynamics.b2ContactManager%2C%0A%20%20%20%20%20%20b2DebugDraw%20%3D%20Box2D.Dynamics.b2DebugDraw%2C%0A%20%20%20%20%20%20b2DestructionListener%20%3D%20Box2D.Dynamics.b2DestructionListener%2C%0A%20%20%20%20%20%20b2FilterData%20%3D%20Box2D.Dynamics.b2FilterData%2C%0A%20%20%20%20%20%20b2Fixture%20%3D%20Box2D.Dynamics.b2Fixture%2C%0A%20%20%20%20%20%20b2FixtureDef%20%3D%20Box2D.Dynamics.b2FixtureDef%2C%0A%20%20%20%20%20%20b2Island%20%3D%20Box2D.Dynamics.b2Island%2C%0A%20%20%20%20%20%20b2TimeStep%20%3D%20Box2D.Dynamics.b2TimeStep%2C%0A%20%20%20%20%20%20b2World%20%3D%20Box2D.Dynamics.b2World%2C%0A%20%20%20%20%20%20b2AABB%20%3D%20Box2D.Collision.b2AABB%2C%0A%20%20%20%20%20%20b2Bound%20%3D%20Box2D.Collision.b2Bound%2C%0A%20%20%20%20%20%20b2BoundValues%20%3D%20Box2D.Collision.b2BoundValues%2C%0A%20%20%20%20%20%20b2Collision%20%3D%20Box2D.Collision.b2Collision%2C%0A%20%20%20%20%20%20b2ContactID%20%3D%20Box2D.Collision.b2ContactID%2C%0A%20%20%20%20%20%20b2ContactPoint%20%3D%20Box2D.Collision.b2ContactPoint%2C%0A%20%20%20%20%20%20b2Distance%20%3D%20Box2D.Collision.b2Distance%2C%0A%20%20%20%20%20%20b2DistanceInput%20%3D%20Box2D.Collision.b2DistanceInput%2C%0A%20%20%20%20%20%20b2DistanceOutput%20%3D%20Box2D.Collision.b2DistanceOutput%2C%0A%20%20%20%20%20%20b2DistanceProxy%20%3D%20Box2D.Collision.b2DistanceProxy%2C%0A%20%20%20%20%20%20b2DynamicTree%20%3D%20Box2D.Collision.b2DynamicTree%2C%0A%20%20%20%20%20%20b2DynamicTreeBroadPhase%20%3D%20Box2D.Collision.b2DynamicTreeBroadPhase%2C%0A%20%20%20%20%20%20b2DynamicTreeNode%20%3D%20Box2D.Collision.b2DynamicTreeNode%2C%0A%20%20%20%20%20%20b2DynamicTreePair%20%3D%20Box2D.Collision.b2DynamicTreePair%2C%0A%20%20%20%20%20%20b2Manifold%20%3D%20Box2D.Collision.b2Manifold%2C%0A%20%20%20%20%20%20b2ManifoldPoint%20%3D%20Box2D.Collision.b2ManifoldPoint%2C%0A%20%20%20%20%20%20b2Point%20%3D%20Box2D.Collision.b2Point%2C%0A%20%20%20%20%20%20b2RayCastInput%20%3D%20Box2D.Collision.b2RayCastInput%2C%0A%20%20%20%20%20%20b2RayCastOutput%20%3D%20Box2D.Collision.b2RayCastOutput%2C%0A%20%20%20%20%20%20b2Segment%20%3D%20Box2D.Collision.b2Segment%2C%0A%20%20%20%20%20%20b2SeparationFunction%20%3D%20Box2D.Collision.b2SeparationFunction%2C%0A%20%20%20%20%20%20b2Simplex%20%3D%20Box2D.Collision.b2Simplex%2C%0A%20%20%20%20%20%20b2SimplexCache%20%3D%20Box2D.Collision.b2SimplexCache%2C%0A%20%20%20%20%20%20b2SimplexVertex%20%3D%20Box2D.Collision.b2SimplexVertex%2C%0A%20%20%20%20%20%20b2TimeOfImpact%20%3D%20Box2D.Collision.b2TimeOfImpact%2C%0A%20%20%20%20%20%20b2TOIInput%20%3D%20Box2D.Collision.b2TOIInput%2C%0A%20%20%20%20%20%20b2WorldManifold%20%3D%20Box2D.Collision.b2WorldManifold%2C%0A%20%20%20%20%20%20ClipVertex%20%3D%20Box2D.Collision.ClipVertex%2C%0A%20%20%20%20%20%20Features%20%3D%20Box2D.Collision.Features%2C%0A%20%20%20%20%20%20IBroadPhase%20%3D%20Box2D.Collision.IBroadPhase%3B%0A%0A%20%20%20%20Box2D.inherit(b2CircleShape%2C%20Box2D.Collision.Shapes.b2Shape)%3B%0A%20%20%20%20b2CircleShape.prototype.__super%20%3D%20Box2D.Collision.Shapes.b2Shape.prototype%3B%0A%20%20%20%20b2CircleShape.b2CircleShape%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20Box2D.Collision.Shapes.b2Shape.b2Shape.apply(this%2C%20arguments)%3B%0A%20%20%20%20%20%20this.m_p%20%3D%20new%20b2Vec2()%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2CircleShape.prototype.Copy%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20var%20s%20%3D%20new%20b2CircleShape()%3B%0A%20%20%20%20%20%20s.Set(this)%3B%0A%20%20%20%20%20%20return%20s%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2CircleShape.prototype.Set%20%3D%20function%20(other)%20%7B%0A%20%20%20%20%20%20this.__super.Set.call(this%2C%20other)%3B%0A%20%20%20%20%20%20if%20(Box2D.is(other%2C%20b2CircleShape))%20%7B%0A%20%20%20%20%20%20%20%20var%20other2%20%3D%20other%20instanceof%20b2CircleShape%20%3F%20other%20%3A%20null%3B%0A%20%20%20%20%20%20%20%20this.m_p.SetV(other2.m_p)%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2CircleShape.prototype.TestPoint%20%3D%20function%20(transform%2C%20p)%20%7B%0A%20%20%20%20%20%20var%20tMat%20%3D%20transform.R%3B%0A%20%20%20%20%20%20var%20dX%20%3D%0A%20%20%20%20%20%20%20%20transform.position.x%20%2B%0A%20%20%20%20%20%20%20%20(tMat.col1.x%20*%20this.m_p.x%20%2B%20tMat.col2.x%20*%20this.m_p.y)%3B%0A%20%20%20%20%20%20var%20dY%20%3D%0A%20%20%20%20%20%20%20%20transform.position.y%20%2B%0A%20%20%20%20%20%20%20%20(tMat.col1.y%20*%20this.m_p.x%20%2B%20tMat.col2.y%20*%20this.m_p.y)%3B%0A%20%20%20%20%20%20dX%20%3D%20p.x%20-%20dX%3B%0A%20%20%20%20%20%20dY%20%3D%20p.y%20-%20dY%3B%0A%20%20%20%20%20%20return%20dX%20*%20dX%20%2B%20dY%20*%20dY%20%3C%3D%20this.m_radius%20*%20this.m_radius%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2CircleShape.prototype.RayCast%20%3D%20function%20(output%2C%20input%2C%20transform)%20%7B%0A%20%20%20%20%20%20var%20tMat%20%3D%20transform.R%3B%0A%20%20%20%20%20%20var%20positionX%20%3D%0A%20%20%20%20%20%20%20%20transform.position.x%20%2B%0A%20%20%20%20%20%20%20%20(tMat.col1.x%20*%20this.m_p.x%20%2B%20tMat.col2.x%20*%20this.m_p.y)%3B%0A%20%20%20%20%20%20var%20positionY%20%3D%0A%20%20%20%20%20%20%20%20transform.position.y%20%2B%0A%20%20%20%20%20%20%20%20(tMat.col1.y%20*%20this.m_p.x%20%2B%20tMat.col2.y%20*%20this.m_p.y)%3B%0A%20%20%20%20%20%20var%20sX%20%3D%20input.p1.x%20-%20positionX%3B%0A%20%20%20%20%20%20var%20sY%20%3D%20input.p1.y%20-%20positionY%3B%0A%20%20%20%20%20%20var%20b%20%3D%20sX%20*%20sX%20%2B%20sY%20*%20sY%20-%20this.m_radius%20*%20this.m_radius%3B%0A%20%20%20%20%20%20var%20rX%20%3D%20input.p2.x%20-%20input.p1.x%3B%0A%20%20%20%20%20%20var%20rY%20%3D%20input.p2.y%20-%20input.p1.y%3B%0A%20%20%20%20%20%20var%20c%20%3D%20sX%20*%20rX%20%2B%20sY%20*%20rY%3B%0A%20%20%20%20%20%20var%20rr%20%3D%20rX%20*%20rX%20%2B%20rY%20*%20rY%3B%0A%20%20%20%20%20%20var%20sigma%20%3D%20c%20*%20c%20-%20rr%20*%20b%3B%0A%20%20%20%20%20%20if%20(sigma%20%3C%200.0%20%7C%7C%20rr%20%3C%20Number.MIN_VALUE)%20%7B%0A%20%20%20%20%20%20%20%20return%20false%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20var%20a%20%3D%20-(c%20%2B%20Math.sqrt(sigma))%3B%0A%20%20%20%20%20%20if%20(0.0%20%3C%3D%20a%20%26%26%20a%20%3C%3D%20input.maxFraction%20*%20rr)%20%7B%0A%20%20%20%20%20%20%20%20a%20%2F%3D%20rr%3B%0A%20%20%20%20%20%20%20%20output.fraction%20%3D%20a%3B%0A%20%20%20%20%20%20%20%20output.normal.x%20%3D%20sX%20%2B%20a%20*%20rX%3B%0A%20%20%20%20%20%20%20%20output.normal.y%20%3D%20sY%20%2B%20a%20*%20rY%3B%0A%20%20%20%20%20%20%20%20output.normal.Normalize()%3B%0A%20%20%20%20%20%20%20%20return%20true%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20return%20false%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2CircleShape.prototype.ComputeAABB%20%3D%20function%20(aabb%2C%20transform)%20%7B%0A%20%20%20%20%20%20var%20tMat%20%3D%20transform.R%3B%0A%20%20%20%20%20%20var%20pX%20%3D%0A%20%20%20%20%20%20%20%20transform.position.x%20%2B%0A%20%20%20%20%20%20%20%20(tMat.col1.x%20*%20this.m_p.x%20%2B%20tMat.col2.x%20*%20this.m_p.y)%3B%0A%20%20%20%20%20%20var%20pY%20%3D%0A%20%20%20%20%20%20%20%20transform.position.y%20%2B%0A%20%20%20%20%20%20%20%20(tMat.col1.y%20*%20this.m_p.x%20%2B%20tMat.col2.y%20*%20this.m_p.y)%3B%0A%20%20%20%20%20%20aabb.lowerBound.Set(pX%20-%20this.m_radius%2C%20pY%20-%20this.m_radius)%3B%0A%20%20%20%20%20%20aabb.upperBound.Set(pX%20%2B%20this.m_radius%2C%20pY%20%2B%20this.m_radius)%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2CircleShape.prototype.ComputeMass%20%3D%20function%20(massData%2C%20density)%20%7B%0A%20%20%20%20%20%20if%20(density%20%3D%3D%3D%20undefined)%20density%20%3D%200%3B%0A%20%20%20%20%20%20massData.mass%20%3D%0A%20%20%20%20%20%20%20%20density%20*%20b2Settings.b2_pi%20*%20this.m_radius%20*%20this.m_radius%3B%0A%20%20%20%20%20%20massData.center.SetV(this.m_p)%3B%0A%20%20%20%20%20%20massData.I%20%3D%0A%20%20%20%20%20%20%20%20massData.mass%20*%0A%20%20%20%20%20%20%20%20(0.5%20*%20this.m_radius%20*%20this.m_radius%20%2B%0A%20%20%20%20%20%20%20%20%20%20(this.m_p.x%20*%20this.m_p.x%20%2B%20this.m_p.y%20*%20this.m_p.y))%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2CircleShape.prototype.ComputeSubmergedArea%20%3D%20function%20(%0A%20%20%20%20%20%20normal%2C%0A%20%20%20%20%20%20offset%2C%0A%20%20%20%20%20%20xf%2C%0A%20%20%20%20%20%20c%0A%20%20%20%20)%20%7B%0A%20%20%20%20%20%20if%20(offset%20%3D%3D%3D%20undefined)%20offset%20%3D%200%3B%0A%20%20%20%20%20%20var%20p%20%3D%20b2Math.MulX(xf%2C%20this.m_p)%3B%0A%20%20%20%20%20%20var%20l%20%3D%20-(b2Math.Dot(normal%2C%20p)%20-%20offset)%3B%0A%20%20%20%20%20%20if%20(l%20%3C%20-this.m_radius%20%2B%20Number.MIN_VALUE)%20%7B%0A%20%20%20%20%20%20%20%20return%200%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20if%20(l%20%3E%20this.m_radius)%20%7B%0A%20%20%20%20%20%20%20%20c.SetV(p)%3B%0A%20%20%20%20%20%20%20%20return%20Math.PI%20*%20this.m_radius%20*%20this.m_radius%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20var%20r2%20%3D%20this.m_radius%20*%20this.m_radius%3B%0A%20%20%20%20%20%20var%20l2%20%3D%20l%20*%20l%3B%0A%20%20%20%20%20%20var%20area%20%3D%0A%20%20%20%20%20%20%20%20r2%20*%20(Math.asin(l%20%2F%20this.m_radius)%20%2B%20Math.PI%20%2F%202)%20%2B%0A%20%20%20%20%20%20%20%20l%20*%20Math.sqrt(r2%20-%20l2)%3B%0A%20%20%20%20%20%20var%20com%20%3D%20((-2%20%2F%203)%20*%20Math.pow(r2%20-%20l2%2C%201.5))%20%2F%20area%3B%0A%20%20%20%20%20%20c.x%20%3D%20p.x%20%2B%20normal.x%20*%20com%3B%0A%20%20%20%20%20%20c.y%20%3D%20p.y%20%2B%20normal.y%20*%20com%3B%0A%20%20%20%20%20%20return%20area%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2CircleShape.prototype.GetLocalPosition%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20return%20this.m_p%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2CircleShape.prototype.SetLocalPosition%20%3D%20function%20(position)%20%7B%0A%20%20%20%20%20%20this.m_p.SetV(position)%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2CircleShape.prototype.GetRadius%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20return%20this.m_radius%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2CircleShape.prototype.SetRadius%20%3D%20function%20(radius)%20%7B%0A%20%20%20%20%20%20if%20(radius%20%3D%3D%3D%20undefined)%20radius%20%3D%200%3B%0A%20%20%20%20%20%20this.m_radius%20%3D%20radius%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2CircleShape.prototype.b2CircleShape%20%3D%20function%20(radius)%20%7B%0A%20%20%20%20%20%20if%20(radius%20%3D%3D%3D%20undefined)%20radius%20%3D%200%3B%0A%20%20%20%20%20%20this.__super.b2Shape.call(this)%3B%0A%20%20%20%20%20%20this.m_type%20%3D%20b2Shape.e_circleShape%3B%0A%20%20%20%20%20%20this.m_radius%20%3D%20radius%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2EdgeChainDef.b2EdgeChainDef%20%3D%20function%20()%20%7B%7D%3B%0A%20%20%20%20b2EdgeChainDef.prototype.b2EdgeChainDef%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20this.vertexCount%20%3D%200%3B%0A%20%20%20%20%20%20this.isALoop%20%3D%20true%3B%0A%20%20%20%20%20%20this.vertices%20%3D%20%5B%5D%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20Box2D.inherit(b2EdgeShape%2C%20Box2D.Collision.Shapes.b2Shape)%3B%0A%20%20%20%20b2EdgeShape.prototype.__super%20%3D%20Box2D.Collision.Shapes.b2Shape.prototype%3B%0A%20%20%20%20b2EdgeShape.b2EdgeShape%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20Box2D.Collision.Shapes.b2Shape.b2Shape.apply(this%2C%20arguments)%3B%0A%20%20%20%20%20%20this.s_supportVec%20%3D%20new%20b2Vec2()%3B%0A%20%20%20%20%20%20this.m_v1%20%3D%20new%20b2Vec2()%3B%0A%20%20%20%20%20%20this.m_v2%20%3D%20new%20b2Vec2()%3B%0A%20%20%20%20%20%20this.m_coreV1%20%3D%20new%20b2Vec2()%3B%0A%20%20%20%20%20%20this.m_coreV2%20%3D%20new%20b2Vec2()%3B%0A%20%20%20%20%20%20this.m_normal%20%3D%20new%20b2Vec2()%3B%0A%20%20%20%20%20%20this.m_direction%20%3D%20new%20b2Vec2()%3B%0A%20%20%20%20%20%20this.m_cornerDir1%20%3D%20new%20b2Vec2()%3B%0A%20%20%20%20%20%20this.m_cornerDir2%20%3D%20new%20b2Vec2()%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2EdgeShape.prototype.TestPoint%20%3D%20function%20(transform%2C%20p)%20%7B%0A%20%20%20%20%20%20return%20false%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2EdgeShape.prototype.RayCast%20%3D%20function%20(output%2C%20input%2C%20transform)%20%7B%0A%20%20%20%20%20%20var%20tMat%3B%0A%20%20%20%20%20%20var%20rX%20%3D%20input.p2.x%20-%20input.p1.x%3B%0A%20%20%20%20%20%20var%20rY%20%3D%20input.p2.y%20-%20input.p1.y%3B%0A%20%20%20%20%20%20tMat%20%3D%20transform.R%3B%0A%20%20%20%20%20%20var%20v1X%20%3D%0A%20%20%20%20%20%20%20%20transform.position.x%20%2B%0A%20%20%20%20%20%20%20%20(tMat.col1.x%20*%20this.m_v1.x%20%2B%20tMat.col2.x%20*%20this.m_v1.y)%3B%0A%20%20%20%20%20%20var%20v1Y%20%3D%0A%20%20%20%20%20%20%20%20transform.position.y%20%2B%0A%20%20%20%20%20%20%20%20(tMat.col1.y%20*%20this.m_v1.x%20%2B%20tMat.col2.y%20*%20this.m_v1.y)%3B%0A%20%20%20%20%20%20var%20nX%20%3D%0A%20%20%20%20%20%20%20%20transform.position.y%20%2B%0A%20%20%20%20%20%20%20%20(tMat.col1.y%20*%20this.m_v2.x%20%2B%20tMat.col2.y%20*%20this.m_v2.y)%20-%0A%20%20%20%20%20%20%20%20v1Y%3B%0A%20%20%20%20%20%20var%20nY%20%3D%20-(%0A%20%20%20%20%20%20%20%20transform.position.x%20%2B%0A%20%20%20%20%20%20%20%20(tMat.col1.x%20*%20this.m_v2.x%20%2B%20tMat.col2.x%20*%20this.m_v2.y)%20-%0A%20%20%20%20%20%20%20%20v1X%0A%20%20%20%20%20%20)%3B%0A%20%20%20%20%20%20var%20k_slop%20%3D%20100.0%20*%20Number.MIN_VALUE%3B%0A%20%20%20%20%20%20var%20denom%20%3D%20-(rX%20*%20nX%20%2B%20rY%20*%20nY)%3B%0A%20%20%20%20%20%20if%20(denom%20%3E%20k_slop)%20%7B%0A%20%20%20%20%20%20%20%20var%20bX%20%3D%20input.p1.x%20-%20v1X%3B%0A%20%20%20%20%20%20%20%20var%20bY%20%3D%20input.p1.y%20-%20v1Y%3B%0A%20%20%20%20%20%20%20%20var%20a%20%3D%20bX%20*%20nX%20%2B%20bY%20*%20nY%3B%0A%20%20%20%20%20%20%20%20if%20(0.0%20%3C%3D%20a%20%26%26%20a%20%3C%3D%20input.maxFraction%20*%20denom)%20%7B%0A%20%20%20%20%20%20%20%20%20%20var%20mu2%20%3D%20-rX%20*%20bY%20%2B%20rY%20*%20bX%3B%0A%20%20%20%20%20%20%20%20%20%20if%20(-k_slop%20*%20denom%20%3C%3D%20mu2%20%26%26%20mu2%20%3C%3D%20denom%20*%20(1.0%20%2B%20k_slop))%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20a%20%2F%3D%20denom%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20output.fraction%20%3D%20a%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20var%20nLen%20%3D%20Math.sqrt(nX%20*%20nX%20%2B%20nY%20*%20nY)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20output.normal.x%20%3D%20nX%20%2F%20nLen%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20output.normal.y%20%3D%20nY%20%2F%20nLen%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20true%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20return%20false%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2EdgeShape.prototype.ComputeAABB%20%3D%20function%20(aabb%2C%20transform)%20%7B%0A%20%20%20%20%20%20var%20tMat%20%3D%20transform.R%3B%0A%20%20%20%20%20%20var%20v1X%20%3D%0A%20%20%20%20%20%20%20%20transform.position.x%20%2B%0A%20%20%20%20%20%20%20%20(tMat.col1.x%20*%20this.m_v1.x%20%2B%20tMat.col2.x%20*%20this.m_v1.y)%3B%0A%20%20%20%20%20%20var%20v1Y%20%3D%0A%20%20%20%20%20%20%20%20transform.position.y%20%2B%0A%20%20%20%20%20%20%20%20(tMat.col1.y%20*%20this.m_v1.x%20%2B%20tMat.col2.y%20*%20this.m_v1.y)%3B%0A%20%20%20%20%20%20var%20v2X%20%3D%0A%20%20%20%20%20%20%20%20transform.position.x%20%2B%0A%20%20%20%20%20%20%20%20(tMat.col1.x%20*%20this.m_v2.x%20%2B%20tMat.col2.x%20*%20this.m_v2.y)%3B%0A%20%20%20%20%20%20var%20v2Y%20%3D%0A%20%20%20%20%20%20%20%20transform.position.y%20%2B%0A%20%20%20%20%20%20%20%20(tMat.col1.y%20*%20this.m_v2.x%20%2B%20tMat.col2.y%20*%20this.m_v2.y)%3B%0A%20%20%20%20%20%20if%20(v1X%20%3C%20v2X)%20%7B%0A%20%20%20%20%20%20%20%20aabb.lowerBound.x%20%3D%20v1X%3B%0A%20%20%20%20%20%20%20%20aabb.upperBound.x%20%3D%20v2X%3B%0A%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20aabb.lowerBound.x%20%3D%20v2X%3B%0A%20%20%20%20%20%20%20%20aabb.upperBound.x%20%3D%20v1X%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20if%20(v1Y%20%3C%20v2Y)%20%7B%0A%20%20%20%20%20%20%20%20aabb.lowerBound.y%20%3D%20v1Y%3B%0A%20%20%20%20%20%20%20%20aabb.upperBound.y%20%3D%20v2Y%3B%0A%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20aabb.lowerBound.y%20%3D%20v2Y%3B%0A%20%20%20%20%20%20%20%20aabb.upperBound.y%20%3D%20v1Y%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2EdgeShape.prototype.ComputeMass%20%3D%20function%20(massData%2C%20density)%20%7B%0A%20%20%20%20%20%20if%20(density%20%3D%3D%3D%20undefined)%20density%20%3D%200%3B%0A%20%20%20%20%20%20massData.mass%20%3D%200%3B%0A%20%20%20%20%20%20massData.center.SetV(this.m_v1)%3B%0A%20%20%20%20%20%20massData.I%20%3D%200%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2EdgeShape.prototype.ComputeSubmergedArea%20%3D%20function%20(%0A%20%20%20%20%20%20normal%2C%0A%20%20%20%20%20%20offset%2C%0A%20%20%20%20%20%20xf%2C%0A%20%20%20%20%20%20c%0A%20%20%20%20)%20%7B%0A%20%20%20%20%20%20if%20(offset%20%3D%3D%3D%20undefined)%20offset%20%3D%200%3B%0A%20%20%20%20%20%20var%20v0%20%3D%20new%20b2Vec2(normal.x%20*%20offset%2C%20normal.y%20*%20offset)%3B%0A%20%20%20%20%20%20var%20v1%20%3D%20b2Math.MulX(xf%2C%20this.m_v1)%3B%0A%20%20%20%20%20%20var%20v2%20%3D%20b2Math.MulX(xf%2C%20this.m_v2)%3B%0A%20%20%20%20%20%20var%20d1%20%3D%20b2Math.Dot(normal%2C%20v1)%20-%20offset%3B%0A%20%20%20%20%20%20var%20d2%20%3D%20b2Math.Dot(normal%2C%20v2)%20-%20offset%3B%0A%20%20%20%20%20%20if%20(d1%20%3E%200)%20%7B%0A%20%20%20%20%20%20%20%20if%20(d2%20%3E%200)%20%7B%0A%20%20%20%20%20%20%20%20%20%20return%200%3B%0A%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20v1.x%20%3D%20(-d2%20%2F%20(d1%20-%20d2))%20*%20v1.x%20%2B%20(d1%20%2F%20(d1%20-%20d2))%20*%20v2.x%3B%0A%20%20%20%20%20%20%20%20%20%20v1.y%20%3D%20(-d2%20%2F%20(d1%20-%20d2))%20*%20v1.y%20%2B%20(d1%20%2F%20(d1%20-%20d2))%20*%20v2.y%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20if%20(d2%20%3E%200)%20%7B%0A%20%20%20%20%20%20%20%20%20%20v2.x%20%3D%20(-d2%20%2F%20(d1%20-%20d2))%20*%20v1.x%20%2B%20(d1%20%2F%20(d1%20-%20d2))%20*%20v2.x%3B%0A%20%20%20%20%20%20%20%20%20%20v2.y%20%3D%20(-d2%20%2F%20(d1%20-%20d2))%20*%20v1.y%20%2B%20(d1%20%2F%20(d1%20-%20d2))%20*%20v2.y%3B%0A%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20c.x%20%3D%20(v0.x%20%2B%20v1.x%20%2B%20v2.x)%20%2F%203%3B%0A%20%20%20%20%20%20c.y%20%3D%20(v0.y%20%2B%20v1.y%20%2B%20v2.y)%20%2F%203%3B%0A%20%20%20%20%20%20return%20(%0A%20%20%20%20%20%20%20%200.5%20*%20((v1.x%20-%20v0.x)%20*%20(v2.y%20-%20v0.y)%20-%20(v1.y%20-%20v0.y)%20*%20(v2.x%20-%20v0.x))%0A%20%20%20%20%20%20)%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2EdgeShape.prototype.GetLength%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20return%20this.m_length%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2EdgeShape.prototype.GetVertex1%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20return%20this.m_v1%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2EdgeShape.prototype.GetVertex2%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20return%20this.m_v2%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2EdgeShape.prototype.GetCoreVertex1%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20return%20this.m_coreV1%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2EdgeShape.prototype.GetCoreVertex2%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20return%20this.m_coreV2%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2EdgeShape.prototype.GetNormalVector%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20return%20this.m_normal%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2EdgeShape.prototype.GetDirectionVector%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20return%20this.m_direction%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2EdgeShape.prototype.GetCorner1Vector%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20return%20this.m_cornerDir1%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2EdgeShape.prototype.GetCorner2Vector%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20return%20this.m_cornerDir2%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2EdgeShape.prototype.Corner1IsConvex%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20return%20this.m_cornerConvex1%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2EdgeShape.prototype.Corner2IsConvex%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20return%20this.m_cornerConvex2%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2EdgeShape.prototype.GetFirstVertex%20%3D%20function%20(xf)%20%7B%0A%20%20%20%20%20%20var%20tMat%20%3D%20xf.R%3B%0A%20%20%20%20%20%20return%20new%20b2Vec2(%0A%20%20%20%20%20%20%20%20xf.position.x%20%2B%0A%20%20%20%20%20%20%20%20%20%20(tMat.col1.x%20*%20this.m_coreV1.x%20%2B%20tMat.col2.x%20*%20this.m_coreV1.y)%2C%0A%20%20%20%20%20%20%20%20xf.position.y%20%2B%0A%20%20%20%20%20%20%20%20%20%20(tMat.col1.y%20*%20this.m_coreV1.x%20%2B%20tMat.col2.y%20*%20this.m_coreV1.y)%0A%20%20%20%20%20%20)%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2EdgeShape.prototype.GetNextEdge%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20return%20this.m_nextEdge%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2EdgeShape.prototype.GetPrevEdge%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20return%20this.m_prevEdge%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2EdgeShape.prototype.Support%20%3D%20function%20(xf%2C%20dX%2C%20dY)%20%7B%0A%20%20%20%20%20%20if%20(dX%20%3D%3D%3D%20undefined)%20dX%20%3D%200%3B%0A%20%20%20%20%20%20if%20(dY%20%3D%3D%3D%20undefined)%20dY%20%3D%200%3B%0A%20%20%20%20%20%20var%20tMat%20%3D%20xf.R%3B%0A%20%20%20%20%20%20var%20v1X%20%3D%0A%20%20%20%20%20%20%20%20xf.position.x%20%2B%0A%20%20%20%20%20%20%20%20(tMat.col1.x%20*%20this.m_coreV1.x%20%2B%20tMat.col2.x%20*%20this.m_coreV1.y)%3B%0A%20%20%20%20%20%20var%20v1Y%20%3D%0A%20%20%20%20%20%20%20%20xf.position.y%20%2B%0A%20%20%20%20%20%20%20%20(tMat.col1.y%20*%20this.m_coreV1.x%20%2B%20tMat.col2.y%20*%20this.m_coreV1.y)%3B%0A%20%20%20%20%20%20var%20v2X%20%3D%0A%20%20%20%20%20%20%20%20xf.position.x%20%2B%0A%20%20%20%20%20%20%20%20(tMat.col1.x%20*%20this.m_coreV2.x%20%2B%20tMat.col2.x%20*%20this.m_coreV2.y)%3B%0A%20%20%20%20%20%20var%20v2Y%20%3D%0A%20%20%20%20%20%20%20%20xf.position.y%20%2B%0A%20%20%20%20%20%20%20%20(tMat.col1.y%20*%20this.m_coreV2.x%20%2B%20tMat.col2.y%20*%20this.m_coreV2.y)%3B%0A%20%20%20%20%20%20if%20(v1X%20*%20dX%20%2B%20v1Y%20*%20dY%20%3E%20v2X%20*%20dX%20%2B%20v2Y%20*%20dY)%20%7B%0A%20%20%20%20%20%20%20%20this.s_supportVec.x%20%3D%20v1X%3B%0A%20%20%20%20%20%20%20%20this.s_supportVec.y%20%3D%20v1Y%3B%0A%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20this.s_supportVec.x%20%3D%20v2X%3B%0A%20%20%20%20%20%20%20%20this.s_supportVec.y%20%3D%20v2Y%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20return%20this.s_supportVec%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2EdgeShape.prototype.b2EdgeShape%20%3D%20function%20(v1%2C%20v2)%20%7B%0A%20%20%20%20%20%20this.__super.b2Shape.call(this)%3B%0A%20%20%20%20%20%20this.m_type%20%3D%20b2Shape.e_edgeShape%3B%0A%20%20%20%20%20%20this.m_prevEdge%20%3D%20null%3B%0A%20%20%20%20%20%20this.m_nextEdge%20%3D%20null%3B%0A%20%20%20%20%20%20this.m_v1%20%3D%20v1%3B%0A%20%20%20%20%20%20this.m_v2%20%3D%20v2%3B%0A%20%20%20%20%20%20this.m_direction.Set(%0A%20%20%20%20%20%20%20%20this.m_v2.x%20-%20this.m_v1.x%2C%0A%20%20%20%20%20%20%20%20this.m_v2.y%20-%20this.m_v1.y%0A%20%20%20%20%20%20)%3B%0A%20%20%20%20%20%20this.m_length%20%3D%20this.m_direction.Normalize()%3B%0A%20%20%20%20%20%20this.m_normal.Set(this.m_direction.y%2C%20-this.m_direction.x)%3B%0A%20%20%20%20%20%20this.m_coreV1.Set(%0A%20%20%20%20%20%20%20%20-b2Settings.b2_toiSlop%20*%20(this.m_normal.x%20-%20this.m_direction.x)%20%2B%0A%20%20%20%20%20%20%20%20%20%20this.m_v1.x%2C%0A%20%20%20%20%20%20%20%20-b2Settings.b2_toiSlop%20*%20(this.m_normal.y%20-%20this.m_direction.y)%20%2B%0A%20%20%20%20%20%20%20%20%20%20this.m_v1.y%0A%20%20%20%20%20%20)%3B%0A%20%20%20%20%20%20this.m_coreV2.Set(%0A%20%20%20%20%20%20%20%20-b2Settings.b2_toiSlop%20*%20(this.m_normal.x%20%2B%20this.m_direction.x)%20%2B%0A%20%20%20%20%20%20%20%20%20%20this.m_v2.x%2C%0A%20%20%20%20%20%20%20%20-b2Settings.b2_toiSlop%20*%20(this.m_normal.y%20%2B%20this.m_direction.y)%20%2B%0A%20%20%20%20%20%20%20%20%20%20this.m_v2.y%0A%20%20%20%20%20%20)%3B%0A%20%20%20%20%20%20this.m_cornerDir1%20%3D%20this.m_normal%3B%0A%20%20%20%20%20%20this.m_cornerDir2.Set(-this.m_normal.x%2C%20-this.m_normal.y)%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2EdgeShape.prototype.SetPrevEdge%20%3D%20function%20(%0A%20%20%20%20%20%20edge%2C%0A%20%20%20%20%20%20core%2C%0A%20%20%20%20%20%20cornerDir%2C%0A%20%20%20%20%20%20convex%0A%20%20%20%20)%20%7B%0A%20%20%20%20%20%20this.m_prevEdge%20%3D%20edge%3B%0A%20%20%20%20%20%20this.m_coreV1%20%3D%20core%3B%0A%20%20%20%20%20%20this.m_cornerDir1%20%3D%20cornerDir%3B%0A%20%20%20%20%20%20this.m_cornerConvex1%20%3D%20convex%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2EdgeShape.prototype.SetNextEdge%20%3D%20function%20(%0A%20%20%20%20%20%20edge%2C%0A%20%20%20%20%20%20core%2C%0A%20%20%20%20%20%20cornerDir%2C%0A%20%20%20%20%20%20convex%0A%20%20%20%20)%20%7B%0A%20%20%20%20%20%20this.m_nextEdge%20%3D%20edge%3B%0A%20%20%20%20%20%20this.m_coreV2%20%3D%20core%3B%0A%20%20%20%20%20%20this.m_cornerDir2%20%3D%20cornerDir%3B%0A%20%20%20%20%20%20this.m_cornerConvex2%20%3D%20convex%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2MassData.b2MassData%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20this.mass%20%3D%200.0%3B%0A%20%20%20%20%20%20this.center%20%3D%20new%20b2Vec2(0%2C%200)%3B%0A%20%20%20%20%20%20this.I%20%3D%200.0%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20Box2D.inherit(b2PolygonShape%2C%20Box2D.Collision.Shapes.b2Shape)%3B%0A%20%20%20%20b2PolygonShape.prototype.__super%20%3D%20Box2D.Collision.Shapes.b2Shape.prototype%3B%0A%20%20%20%20b2PolygonShape.b2PolygonShape%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20Box2D.Collision.Shapes.b2Shape.b2Shape.apply(this%2C%20arguments)%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2PolygonShape.prototype.Copy%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20var%20s%20%3D%20new%20b2PolygonShape()%3B%0A%20%20%20%20%20%20s.Set(this)%3B%0A%20%20%20%20%20%20return%20s%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2PolygonShape.prototype.Set%20%3D%20function%20(other)%20%7B%0A%20%20%20%20%20%20this.__super.Set.call(this%2C%20other)%3B%0A%20%20%20%20%20%20if%20(Box2D.is(other%2C%20b2PolygonShape))%20%7B%0A%20%20%20%20%20%20%20%20var%20other2%20%3D%20other%20instanceof%20b2PolygonShape%20%3F%20other%20%3A%20null%3B%0A%20%20%20%20%20%20%20%20this.m_centroid.SetV(other2.m_centroid)%3B%0A%20%20%20%20%20%20%20%20this.m_vertexCount%20%3D%20other2.m_vertexCount%3B%0A%20%20%20%20%20%20%20%20this.Reserve(this.m_vertexCount)%3B%0A%20%20%20%20%20%20%20%20for%20(var%20i%20%3D%200%3B%20i%20%3C%20this.m_vertexCount%3B%20i%2B%2B)%20%7B%0A%20%20%20%20%20%20%20%20%20%20this.m_vertices%5Bi%5D.SetV(other2.m_vertices%5Bi%5D)%3B%0A%20%20%20%20%20%20%20%20%20%20this.m_normals%5Bi%5D.SetV(other2.m_normals%5Bi%5D)%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2PolygonShape.prototype.SetAsArray%20%3D%20function%20(vertices%2C%20vertexCount)%20%7B%0A%20%20%20%20%20%20if%20(vertexCount%20%3D%3D%3D%20undefined)%20vertexCount%20%3D%200%3B%0A%20%20%20%20%20%20var%20v%20%3D%20new%20Vector()%3B%0A%20%20%20%20%20%20var%20i%20%3D%200%2C%0A%20%20%20%20%20%20%20%20tVec%3B%0A%20%20%20%20%20%20for%20(i%20%3D%200%3B%20i%20%3C%20vertices.length%3B%20%2B%2Bi)%20%7B%0A%20%20%20%20%20%20%20%20tVec%20%3D%20vertices%5Bi%5D%3B%0A%20%20%20%20%20%20%20%20v.push(tVec)%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20this.SetAsVector(v%2C%20vertexCount)%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2PolygonShape.AsArray%20%3D%20function%20(vertices%2C%20vertexCount)%20%7B%0A%20%20%20%20%20%20if%20(vertexCount%20%3D%3D%3D%20undefined)%20vertexCount%20%3D%200%3B%0A%20%20%20%20%20%20var%20polygonShape%20%3D%20new%20b2PolygonShape()%3B%0A%20%20%20%20%20%20polygonShape.SetAsArray(vertices%2C%20vertexCount)%3B%0A%20%20%20%20%20%20return%20polygonShape%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2PolygonShape.prototype.SetAsVector%20%3D%20function%20(vertices%2C%20vertexCount)%20%7B%0A%20%20%20%20%20%20if%20(vertexCount%20%3D%3D%3D%20undefined)%20vertexCount%20%3D%200%3B%0A%20%20%20%20%20%20if%20(vertexCount%20%3D%3D%200)%20vertexCount%20%3D%20vertices.length%3B%0A%20%20%20%20%20%20b2Settings.b2Assert(2%20%3C%3D%20vertexCount)%3B%0A%20%20%20%20%20%20this.m_vertexCount%20%3D%20vertexCount%3B%0A%20%20%20%20%20%20this.Reserve(vertexCount)%3B%0A%20%20%20%20%20%20var%20i%20%3D%200%3B%0A%20%20%20%20%20%20for%20(i%20%3D%200%3B%20i%20%3C%20this.m_vertexCount%3B%20i%2B%2B)%20%7B%0A%20%20%20%20%20%20%20%20this.m_vertices%5Bi%5D.SetV(vertices%5Bi%5D)%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20for%20(i%20%3D%200%3B%20i%20%3C%20this.m_vertexCount%3B%20%2B%2Bi)%20%7B%0A%20%20%20%20%20%20%20%20var%20i1%20%3D%20parseInt(i)%3B%0A%20%20%20%20%20%20%20%20var%20i2%20%3D%20parseInt(i%20%2B%201%20%3C%20this.m_vertexCount%20%3F%20i%20%2B%201%20%3A%200)%3B%0A%20%20%20%20%20%20%20%20var%20edge%20%3D%20b2Math.SubtractVV(this.m_vertices%5Bi2%5D%2C%20this.m_vertices%5Bi1%5D)%3B%0A%20%20%20%20%20%20%20%20b2Settings.b2Assert(edge.LengthSquared()%20%3E%20Number.MIN_VALUE)%3B%0A%20%20%20%20%20%20%20%20this.m_normals%5Bi%5D.SetV(b2Math.CrossVF(edge%2C%201.0))%3B%0A%20%20%20%20%20%20%20%20this.m_normals%5Bi%5D.Normalize()%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20this.m_centroid%20%3D%20b2PolygonShape.ComputeCentroid(%0A%20%20%20%20%20%20%20%20this.m_vertices%2C%0A%20%20%20%20%20%20%20%20this.m_vertexCount%0A%20%20%20%20%20%20)%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2PolygonShape.AsVector%20%3D%20function%20(vertices%2C%20vertexCount)%20%7B%0A%20%20%20%20%20%20if%20(vertexCount%20%3D%3D%3D%20undefined)%20vertexCount%20%3D%200%3B%0A%20%20%20%20%20%20var%20polygonShape%20%3D%20new%20b2PolygonShape()%3B%0A%20%20%20%20%20%20polygonShape.SetAsVector(vertices%2C%20vertexCount)%3B%0A%20%20%20%20%20%20return%20polygonShape%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2PolygonShape.prototype.SetAsBox%20%3D%20function%20(hx%2C%20hy)%20%7B%0A%20%20%20%20%20%20if%20(hx%20%3D%3D%3D%20undefined)%20hx%20%3D%200%3B%0A%20%20%20%20%20%20if%20(hy%20%3D%3D%3D%20undefined)%20hy%20%3D%200%3B%0A%20%20%20%20%20%20this.m_vertexCount%20%3D%204%3B%0A%20%20%20%20%20%20this.Reserve(4)%3B%0A%20%20%20%20%20%20this.m_vertices%5B0%5D.Set(-hx%2C%20-hy)%3B%0A%20%20%20%20%20%20this.m_vertices%5B1%5D.Set(hx%2C%20-hy)%3B%0A%20%20%20%20%20%20this.m_vertices%5B2%5D.Set(hx%2C%20hy)%3B%0A%20%20%20%20%20%20this.m_vertices%5B3%5D.Set(-hx%2C%20hy)%3B%0A%20%20%20%20%20%20this.m_normals%5B0%5D.Set(0.0%2C%20-1.0)%3B%0A%20%20%20%20%20%20this.m_normals%5B1%5D.Set(1.0%2C%200.0)%3B%0A%20%20%20%20%20%20this.m_normals%5B2%5D.Set(0.0%2C%201.0)%3B%0A%20%20%20%20%20%20this.m_normals%5B3%5D.Set(-1.0%2C%200.0)%3B%0A%20%20%20%20%20%20this.m_centroid.SetZero()%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2PolygonShape.AsBox%20%3D%20function%20(hx%2C%20hy)%20%7B%0A%20%20%20%20%20%20if%20(hx%20%3D%3D%3D%20undefined)%20hx%20%3D%200%3B%0A%20%20%20%20%20%20if%20(hy%20%3D%3D%3D%20undefined)%20hy%20%3D%200%3B%0A%20%20%20%20%20%20var%20polygonShape%20%3D%20new%20b2PolygonShape()%3B%0A%20%20%20%20%20%20polygonShape.SetAsBox(hx%2C%20hy)%3B%0A%20%20%20%20%20%20return%20polygonShape%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2PolygonShape.prototype.SetAsOrientedBox%20%3D%20function%20(%0A%20%20%20%20%20%20hx%2C%0A%20%20%20%20%20%20hy%2C%0A%20%20%20%20%20%20center%2C%0A%20%20%20%20%20%20angle%0A%20%20%20%20)%20%7B%0A%20%20%20%20%20%20if%20(hx%20%3D%3D%3D%20undefined)%20hx%20%3D%200%3B%0A%20%20%20%20%20%20if%20(hy%20%3D%3D%3D%20undefined)%20hy%20%3D%200%3B%0A%20%20%20%20%20%20if%20(center%20%3D%3D%3D%20undefined)%20center%20%3D%20null%3B%0A%20%20%20%20%20%20if%20(angle%20%3D%3D%3D%20undefined)%20angle%20%3D%200.0%3B%0A%20%20%20%20%20%20this.m_vertexCount%20%3D%204%3B%0A%20%20%20%20%20%20this.Reserve(4)%3B%0A%20%20%20%20%20%20this.m_vertices%5B0%5D.Set(-hx%2C%20-hy)%3B%0A%20%20%20%20%20%20this.m_vertices%5B1%5D.Set(hx%2C%20-hy)%3B%0A%20%20%20%20%20%20this.m_vertices%5B2%5D.Set(hx%2C%20hy)%3B%0A%20%20%20%20%20%20this.m_vertices%5B3%5D.Set(-hx%2C%20hy)%3B%0A%20%20%20%20%20%20this.m_normals%5B0%5D.Set(0.0%2C%20-1.0)%3B%0A%20%20%20%20%20%20this.m_normals%5B1%5D.Set(1.0%2C%200.0)%3B%0A%20%20%20%20%20%20this.m_normals%5B2%5D.Set(0.0%2C%201.0)%3B%0A%20%20%20%20%20%20this.m_normals%5B3%5D.Set(-1.0%2C%200.0)%3B%0A%20%20%20%20%20%20this.m_centroid%20%3D%20center%3B%0A%20%20%20%20%20%20var%20xf%20%3D%20new%20b2Transform()%3B%0A%20%20%20%20%20%20xf.position%20%3D%20center%3B%0A%20%20%20%20%20%20xf.R.Set(angle)%3B%0A%20%20%20%20%20%20for%20(var%20i%20%3D%200%3B%20i%20%3C%20this.m_vertexCount%3B%20%2B%2Bi)%20%7B%0A%20%20%20%20%20%20%20%20this.m_vertices%5Bi%5D%20%3D%20b2Math.MulX(xf%2C%20this.m_vertices%5Bi%5D)%3B%0A%20%20%20%20%20%20%20%20this.m_normals%5Bi%5D%20%3D%20b2Math.MulMV(xf.R%2C%20this.m_normals%5Bi%5D)%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2PolygonShape.AsOrientedBox%20%3D%20function%20(hx%2C%20hy%2C%20center%2C%20angle)%20%7B%0A%20%20%20%20%20%20if%20(hx%20%3D%3D%3D%20undefined)%20hx%20%3D%200%3B%0A%20%20%20%20%20%20if%20(hy%20%3D%3D%3D%20undefined)%20hy%20%3D%200%3B%0A%20%20%20%20%20%20if%20(center%20%3D%3D%3D%20undefined)%20center%20%3D%20null%3B%0A%20%20%20%20%20%20if%20(angle%20%3D%3D%3D%20undefined)%20angle%20%3D%200.0%3B%0A%20%20%20%20%20%20var%20polygonShape%20%3D%20new%20b2PolygonShape()%3B%0A%20%20%20%20%20%20polygonShape.SetAsOrientedBox(hx%2C%20hy%2C%20center%2C%20angle)%3B%0A%20%20%20%20%20%20return%20polygonShape%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2PolygonShape.prototype.SetAsEdge%20%3D%20function%20(v1%2C%20v2)%20%7B%0A%20%20%20%20%20%20this.m_vertexCount%20%3D%202%3B%0A%20%20%20%20%20%20this.Reserve(2)%3B%0A%20%20%20%20%20%20this.m_vertices%5B0%5D.SetV(v1)%3B%0A%20%20%20%20%20%20this.m_vertices%5B1%5D.SetV(v2)%3B%0A%20%20%20%20%20%20this.m_centroid.x%20%3D%200.5%20*%20(v1.x%20%2B%20v2.x)%3B%0A%20%20%20%20%20%20this.m_centroid.y%20%3D%200.5%20*%20(v1.y%20%2B%20v2.y)%3B%0A%20%20%20%20%20%20this.m_normals%5B0%5D%20%3D%20b2Math.CrossVF(b2Math.SubtractVV(v2%2C%20v1)%2C%201.0)%3B%0A%20%20%20%20%20%20this.m_normals%5B0%5D.Normalize()%3B%0A%20%20%20%20%20%20this.m_normals%5B1%5D.x%20%3D%20-this.m_normals%5B0%5D.x%3B%0A%20%20%20%20%20%20this.m_normals%5B1%5D.y%20%3D%20-this.m_normals%5B0%5D.y%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2PolygonShape.AsEdge%20%3D%20function%20(v1%2C%20v2)%20%7B%0A%20%20%20%20%20%20var%20polygonShape%20%3D%20new%20b2PolygonShape()%3B%0A%20%20%20%20%20%20polygonShape.SetAsEdge(v1%2C%20v2)%3B%0A%20%20%20%20%20%20return%20polygonShape%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2PolygonShape.prototype.TestPoint%20%3D%20function%20(xf%2C%20p)%20%7B%0A%20%20%20%20%20%20var%20tVec%3B%0A%20%20%20%20%20%20var%20tMat%20%3D%20xf.R%3B%0A%20%20%20%20%20%20var%20tX%20%3D%20p.x%20-%20xf.position.x%3B%0A%20%20%20%20%20%20var%20tY%20%3D%20p.y%20-%20xf.position.y%3B%0A%20%20%20%20%20%20var%20pLocalX%20%3D%20tX%20*%20tMat.col1.x%20%2B%20tY%20*%20tMat.col1.y%3B%0A%20%20%20%20%20%20var%20pLocalY%20%3D%20tX%20*%20tMat.col2.x%20%2B%20tY%20*%20tMat.col2.y%3B%0A%20%20%20%20%20%20for%20(var%20i%20%3D%200%3B%20i%20%3C%20this.m_vertexCount%3B%20%2B%2Bi)%20%7B%0A%20%20%20%20%20%20%20%20tVec%20%3D%20this.m_vertices%5Bi%5D%3B%0A%20%20%20%20%20%20%20%20tX%20%3D%20pLocalX%20-%20tVec.x%3B%0A%20%20%20%20%20%20%20%20tY%20%3D%20pLocalY%20-%20tVec.y%3B%0A%20%20%20%20%20%20%20%20tVec%20%3D%20this.m_normals%5Bi%5D%3B%0A%20%20%20%20%20%20%20%20var%20dot%20%3D%20tVec.x%20*%20tX%20%2B%20tVec.y%20*%20tY%3B%0A%20%20%20%20%20%20%20%20if%20(dot%20%3E%200.0)%20%7B%0A%20%20%20%20%20%20%20%20%20%20return%20false%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20return%20true%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2PolygonShape.prototype.RayCast%20%3D%20function%20(output%2C%20input%2C%20transform)%20%7B%0A%20%20%20%20%20%20var%20lower%20%3D%200.0%3B%0A%20%20%20%20%20%20var%20upper%20%3D%20input.maxFraction%3B%0A%20%20%20%20%20%20var%20tX%20%3D%200%3B%0A%20%20%20%20%20%20var%20tY%20%3D%200%3B%0A%20%20%20%20%20%20var%20tMat%3B%0A%20%20%20%20%20%20var%20tVec%3B%0A%20%20%20%20%20%20tX%20%3D%20input.p1.x%20-%20transform.position.x%3B%0A%20%20%20%20%20%20tY%20%3D%20input.p1.y%20-%20transform.position.y%3B%0A%20%20%20%20%20%20tMat%20%3D%20transform.R%3B%0A%20%20%20%20%20%20var%20p1X%20%3D%20tX%20*%20tMat.col1.x%20%2B%20tY%20*%20tMat.col1.y%3B%0A%20%20%20%20%20%20var%20p1Y%20%3D%20tX%20*%20tMat.col2.x%20%2B%20tY%20*%20tMat.col2.y%3B%0A%20%20%20%20%20%20tX%20%3D%20input.p2.x%20-%20transform.position.x%3B%0A%20%20%20%20%20%20tY%20%3D%20input.p2.y%20-%20transform.position.y%3B%0A%20%20%20%20%20%20tMat%20%3D%20transform.R%3B%0A%20%20%20%20%20%20var%20p2X%20%3D%20tX%20*%20tMat.col1.x%20%2B%20tY%20*%20tMat.col1.y%3B%0A%20%20%20%20%20%20var%20p2Y%20%3D%20tX%20*%20tMat.col2.x%20%2B%20tY%20*%20tMat.col2.y%3B%0A%20%20%20%20%20%20var%20dX%20%3D%20p2X%20-%20p1X%3B%0A%20%20%20%20%20%20var%20dY%20%3D%20p2Y%20-%20p1Y%3B%0A%20%20%20%20%20%20var%20index%20%3D%20parseInt(-1)%3B%0A%20%20%20%20%20%20for%20(var%20i%20%3D%200%3B%20i%20%3C%20this.m_vertexCount%3B%20%2B%2Bi)%20%7B%0A%20%20%20%20%20%20%20%20tVec%20%3D%20this.m_vertices%5Bi%5D%3B%0A%20%20%20%20%20%20%20%20tX%20%3D%20tVec.x%20-%20p1X%3B%0A%20%20%20%20%20%20%20%20tY%20%3D%20tVec.y%20-%20p1Y%3B%0A%20%20%20%20%20%20%20%20tVec%20%3D%20this.m_normals%5Bi%5D%3B%0A%20%20%20%20%20%20%20%20var%20numerator%20%3D%20tVec.x%20*%20tX%20%2B%20tVec.y%20*%20tY%3B%0A%20%20%20%20%20%20%20%20var%20denominator%20%3D%20tVec.x%20*%20dX%20%2B%20tVec.y%20*%20dY%3B%0A%20%20%20%20%20%20%20%20if%20(denominator%20%3D%3D%200.0)%20%7B%0A%20%20%20%20%20%20%20%20%20%20if%20(numerator%20%3C%200.0)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20false%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20if%20(denominator%20%3C%200.0%20%26%26%20numerator%20%3C%20lower%20*%20denominator)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20lower%20%3D%20numerator%20%2F%20denominator%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20index%20%3D%20i%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%20else%20if%20(denominator%20%3E%200.0%20%26%26%20numerator%20%3C%20upper%20*%20denominator)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20upper%20%3D%20numerator%20%2F%20denominator%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20if%20(upper%20%3C%20lower%20-%20Number.MIN_VALUE)%20%7B%0A%20%20%20%20%20%20%20%20%20%20return%20false%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20if%20(index%20%3E%3D%200)%20%7B%0A%20%20%20%20%20%20%20%20output.fraction%20%3D%20lower%3B%0A%20%20%20%20%20%20%20%20tMat%20%3D%20transform.R%3B%0A%20%20%20%20%20%20%20%20tVec%20%3D%20this.m_normals%5Bindex%5D%3B%0A%20%20%20%20%20%20%20%20output.normal.x%20%3D%20tMat.col1.x%20*%20tVec.x%20%2B%20tMat.col2.x%20*%20tVec.y%3B%0A%20%20%20%20%20%20%20%20output.normal.y%20%3D%20tMat.col1.y%20*%20tVec.x%20%2B%20tMat.col2.y%20*%20tVec.y%3B%0A%20%20%20%20%20%20%20%20return%20true%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20return%20false%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2PolygonShape.prototype.ComputeAABB%20%3D%20function%20(aabb%2C%20xf)%20%7B%0A%20%20%20%20%20%20var%20tMat%20%3D%20xf.R%3B%0A%20%20%20%20%20%20var%20tVec%20%3D%20this.m_vertices%5B0%5D%3B%0A%20%20%20%20%20%20var%20lowerX%20%3D%0A%20%20%20%20%20%20%20%20xf.position.x%20%2B%20(tMat.col1.x%20*%20tVec.x%20%2B%20tMat.col2.x%20*%20tVec.y)%3B%0A%20%20%20%20%20%20var%20lowerY%20%3D%0A%20%20%20%20%20%20%20%20xf.position.y%20%2B%20(tMat.col1.y%20*%20tVec.x%20%2B%20tMat.col2.y%20*%20tVec.y)%3B%0A%20%20%20%20%20%20var%20upperX%20%3D%20lowerX%3B%0A%20%20%20%20%20%20var%20upperY%20%3D%20lowerY%3B%0A%20%20%20%20%20%20for%20(var%20i%20%3D%201%3B%20i%20%3C%20this.m_vertexCount%3B%20%2B%2Bi)%20%7B%0A%20%20%20%20%20%20%20%20tVec%20%3D%20this.m_vertices%5Bi%5D%3B%0A%20%20%20%20%20%20%20%20var%20vX%20%3D%20xf.position.x%20%2B%20(tMat.col1.x%20*%20tVec.x%20%2B%20tMat.col2.x%20*%20tVec.y)%3B%0A%20%20%20%20%20%20%20%20var%20vY%20%3D%20xf.position.y%20%2B%20(tMat.col1.y%20*%20tVec.x%20%2B%20tMat.col2.y%20*%20tVec.y)%3B%0A%20%20%20%20%20%20%20%20lowerX%20%3D%20lowerX%20%3C%20vX%20%3F%20lowerX%20%3A%20vX%3B%0A%20%20%20%20%20%20%20%20lowerY%20%3D%20lowerY%20%3C%20vY%20%3F%20lowerY%20%3A%20vY%3B%0A%20%20%20%20%20%20%20%20upperX%20%3D%20upperX%20%3E%20vX%20%3F%20upperX%20%3A%20vX%3B%0A%20%20%20%20%20%20%20%20upperY%20%3D%20upperY%20%3E%20vY%20%3F%20upperY%20%3A%20vY%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20aabb.lowerBound.x%20%3D%20lowerX%20-%20this.m_radius%3B%0A%20%20%20%20%20%20aabb.lowerBound.y%20%3D%20lowerY%20-%20this.m_radius%3B%0A%20%20%20%20%20%20aabb.upperBound.x%20%3D%20upperX%20%2B%20this.m_radius%3B%0A%20%20%20%20%20%20aabb.upperBound.y%20%3D%20upperY%20%2B%20this.m_radius%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2PolygonShape.prototype.ComputeMass%20%3D%20function%20(massData%2C%20density)%20%7B%0A%20%20%20%20%20%20if%20(density%20%3D%3D%3D%20undefined)%20density%20%3D%200%3B%0A%20%20%20%20%20%20if%20(this.m_vertexCount%20%3D%3D%202)%20%7B%0A%20%20%20%20%20%20%20%20massData.center.x%20%3D%200.5%20*%20(this.m_vertices%5B0%5D.x%20%2B%20this.m_vertices%5B1%5D.x)%3B%0A%20%20%20%20%20%20%20%20massData.center.y%20%3D%200.5%20*%20(this.m_vertices%5B0%5D.y%20%2B%20this.m_vertices%5B1%5D.y)%3B%0A%20%20%20%20%20%20%20%20massData.mass%20%3D%200.0%3B%0A%20%20%20%20%20%20%20%20massData.I%20%3D%200.0%3B%0A%20%20%20%20%20%20%20%20return%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20var%20centerX%20%3D%200.0%3B%0A%20%20%20%20%20%20var%20centerY%20%3D%200.0%3B%0A%20%20%20%20%20%20var%20area%20%3D%200.0%3B%0A%20%20%20%20%20%20var%20I%20%3D%200.0%3B%0A%20%20%20%20%20%20var%20p1X%20%3D%200.0%3B%0A%20%20%20%20%20%20var%20p1Y%20%3D%200.0%3B%0A%20%20%20%20%20%20var%20k_inv3%20%3D%201.0%20%2F%203.0%3B%0A%20%20%20%20%20%20for%20(var%20i%20%3D%200%3B%20i%20%3C%20this.m_vertexCount%3B%20%2B%2Bi)%20%7B%0A%20%20%20%20%20%20%20%20var%20p2%20%3D%20this.m_vertices%5Bi%5D%3B%0A%20%20%20%20%20%20%20%20var%20p3%20%3D%0A%20%20%20%20%20%20%20%20%20%20i%20%2B%201%20%3C%20this.m_vertexCount%0A%20%20%20%20%20%20%20%20%20%20%20%20%3F%20this.m_vertices%5BparseInt(i%20%2B%201)%5D%0A%20%20%20%20%20%20%20%20%20%20%20%20%3A%20this.m_vertices%5B0%5D%3B%0A%20%20%20%20%20%20%20%20var%20e1X%20%3D%20p2.x%20-%20p1X%3B%0A%20%20%20%20%20%20%20%20var%20e1Y%20%3D%20p2.y%20-%20p1Y%3B%0A%20%20%20%20%20%20%20%20var%20e2X%20%3D%20p3.x%20-%20p1X%3B%0A%20%20%20%20%20%20%20%20var%20e2Y%20%3D%20p3.y%20-%20p1Y%3B%0A%20%20%20%20%20%20%20%20var%20D%20%3D%20e1X%20*%20e2Y%20-%20e1Y%20*%20e2X%3B%0A%20%20%20%20%20%20%20%20var%20triangleArea%20%3D%200.5%20*%20D%3B%0A%20%20%20%20%20%20%20%20area%20%2B%3D%20triangleArea%3B%0A%20%20%20%20%20%20%20%20centerX%20%2B%3D%20triangleArea%20*%20k_inv3%20*%20(p1X%20%2B%20p2.x%20%2B%20p3.x)%3B%0A%20%20%20%20%20%20%20%20centerY%20%2B%3D%20triangleArea%20*%20k_inv3%20*%20(p1Y%20%2B%20p2.y%20%2B%20p3.y)%3B%0A%20%20%20%20%20%20%20%20var%20px%20%3D%20p1X%3B%0A%20%20%20%20%20%20%20%20var%20py%20%3D%20p1Y%3B%0A%20%20%20%20%20%20%20%20var%20ex1%20%3D%20e1X%3B%0A%20%20%20%20%20%20%20%20var%20ey1%20%3D%20e1Y%3B%0A%20%20%20%20%20%20%20%20var%20ex2%20%3D%20e2X%3B%0A%20%20%20%20%20%20%20%20var%20ey2%20%3D%20e2Y%3B%0A%20%20%20%20%20%20%20%20var%20intx2%20%3D%0A%20%20%20%20%20%20%20%20%20%20k_inv3%20*%0A%20%20%20%20%20%20%20%20%20%20%20%20(0.25%20*%20(ex1%20*%20ex1%20%2B%20ex2%20*%20ex1%20%2B%20ex2%20*%20ex2)%20%2B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20(px%20*%20ex1%20%2B%20px%20*%20ex2))%20%2B%0A%20%20%20%20%20%20%20%20%20%200.5%20*%20px%20*%20px%3B%0A%20%20%20%20%20%20%20%20var%20inty2%20%3D%0A%20%20%20%20%20%20%20%20%20%20k_inv3%20*%0A%20%20%20%20%20%20%20%20%20%20%20%20(0.25%20*%20(ey1%20*%20ey1%20%2B%20ey2%20*%20ey1%20%2B%20ey2%20*%20ey2)%20%2B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20(py%20*%20ey1%20%2B%20py%20*%20ey2))%20%2B%0A%20%20%20%20%20%20%20%20%20%200.5%20*%20py%20*%20py%3B%0A%20%20%20%20%20%20%20%20I%20%2B%3D%20D%20*%20(intx2%20%2B%20inty2)%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20massData.mass%20%3D%20density%20*%20area%3B%0A%20%20%20%20%20%20centerX%20*%3D%201.0%20%2F%20area%3B%0A%20%20%20%20%20%20centerY%20*%3D%201.0%20%2F%20area%3B%0A%20%20%20%20%20%20massData.center.Set(centerX%2C%20centerY)%3B%0A%20%20%20%20%20%20massData.I%20%3D%20density%20*%20I%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2PolygonShape.prototype.ComputeSubmergedArea%20%3D%20function%20(%0A%20%20%20%20%20%20normal%2C%0A%20%20%20%20%20%20offset%2C%0A%20%20%20%20%20%20xf%2C%0A%20%20%20%20%20%20c%0A%20%20%20%20)%20%7B%0A%20%20%20%20%20%20if%20(offset%20%3D%3D%3D%20undefined)%20offset%20%3D%200%3B%0A%20%20%20%20%20%20var%20normalL%20%3D%20b2Math.MulTMV(xf.R%2C%20normal)%3B%0A%20%20%20%20%20%20var%20offsetL%20%3D%20offset%20-%20b2Math.Dot(normal%2C%20xf.position)%3B%0A%20%20%20%20%20%20var%20depths%20%3D%20new%20Vector_a2j_Number()%3B%0A%20%20%20%20%20%20var%20diveCount%20%3D%200%3B%0A%20%20%20%20%20%20var%20intoIndex%20%3D%20parseInt(-1)%3B%0A%20%20%20%20%20%20var%20outoIndex%20%3D%20parseInt(-1)%3B%0A%20%20%20%20%20%20var%20lastSubmerged%20%3D%20false%3B%0A%20%20%20%20%20%20var%20i%20%3D%200%3B%0A%20%20%20%20%20%20for%20(i%20%3D%200%3B%20i%20%3C%20this.m_vertexCount%3B%20%2B%2Bi)%20%7B%0A%20%20%20%20%20%20%20%20depths%5Bi%5D%20%3D%20b2Math.Dot(normalL%2C%20this.m_vertices%5Bi%5D)%20-%20offsetL%3B%0A%20%20%20%20%20%20%20%20var%20isSubmerged%20%3D%20depths%5Bi%5D%20%3C%20-Number.MIN_VALUE%3B%0A%20%20%20%20%20%20%20%20if%20(i%20%3E%200)%20%7B%0A%20%20%20%20%20%20%20%20%20%20if%20(isSubmerged)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(!lastSubmerged)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20intoIndex%20%3D%20i%20-%201%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20diveCount%2B%2B%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(lastSubmerged)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20outoIndex%20%3D%20i%20-%201%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20diveCount%2B%2B%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20lastSubmerged%20%3D%20isSubmerged%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20switch%20(diveCount)%20%7B%0A%20%20%20%20%20%20%20%20case%200%3A%0A%20%20%20%20%20%20%20%20%20%20if%20(lastSubmerged)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20var%20md%20%3D%20new%20b2MassData()%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20this.ComputeMass(md%2C%201)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20c.SetV(b2Math.MulX(xf%2C%20md.center))%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20md.mass%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%200%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20break%3B%0A%20%20%20%20%20%20%20%20case%201%3A%0A%20%20%20%20%20%20%20%20%20%20if%20(intoIndex%20%3D%3D%20-1)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20intoIndex%20%3D%20this.m_vertexCount%20-%201%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20outoIndex%20%3D%20this.m_vertexCount%20-%201%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20break%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20var%20intoIndex2%20%3D%20parseInt((intoIndex%20%2B%201)%20%25%20this.m_vertexCount)%3B%0A%20%20%20%20%20%20var%20outoIndex2%20%3D%20parseInt((outoIndex%20%2B%201)%20%25%20this.m_vertexCount)%3B%0A%20%20%20%20%20%20var%20intoLamdda%20%3D%0A%20%20%20%20%20%20%20%20(0%20-%20depths%5BintoIndex%5D)%20%2F%20(depths%5BintoIndex2%5D%20-%20depths%5BintoIndex%5D)%3B%0A%20%20%20%20%20%20var%20outoLamdda%20%3D%0A%20%20%20%20%20%20%20%20(0%20-%20depths%5BoutoIndex%5D)%20%2F%20(depths%5BoutoIndex2%5D%20-%20depths%5BoutoIndex%5D)%3B%0A%20%20%20%20%20%20var%20intoVec%20%3D%20new%20b2Vec2(%0A%20%20%20%20%20%20%20%20this.m_vertices%5BintoIndex%5D.x%20*%20(1%20-%20intoLamdda)%20%2B%0A%20%20%20%20%20%20%20%20%20%20this.m_vertices%5BintoIndex2%5D.x%20*%20intoLamdda%2C%0A%20%20%20%20%20%20%20%20this.m_vertices%5BintoIndex%5D.y%20*%20(1%20-%20intoLamdda)%20%2B%0A%20%20%20%20%20%20%20%20%20%20this.m_vertices%5BintoIndex2%5D.y%20*%20intoLamdda%0A%20%20%20%20%20%20)%3B%0A%20%20%20%20%20%20var%20outoVec%20%3D%20new%20b2Vec2(%0A%20%20%20%20%20%20%20%20this.m_vertices%5BoutoIndex%5D.x%20*%20(1%20-%20outoLamdda)%20%2B%0A%20%20%20%20%20%20%20%20%20%20this.m_vertices%5BoutoIndex2%5D.x%20*%20outoLamdda%2C%0A%20%20%20%20%20%20%20%20this.m_vertices%5BoutoIndex%5D.y%20*%20(1%20-%20outoLamdda)%20%2B%0A%20%20%20%20%20%20%20%20%20%20this.m_vertices%5BoutoIndex2%5D.y%20*%20outoLamdda%0A%20%20%20%20%20%20)%3B%0A%20%20%20%20%20%20var%20area%20%3D%200%3B%0A%20%20%20%20%20%20var%20center%20%3D%20new%20b2Vec2()%3B%0A%20%20%20%20%20%20var%20p2%20%3D%20this.m_vertices%5BintoIndex2%5D%3B%0A%20%20%20%20%20%20var%20p3%3B%0A%20%20%20%20%20%20i%20%3D%20intoIndex2%3B%0A%20%20%20%20%20%20while%20(i%20!%3D%20outoIndex2)%20%7B%0A%20%20%20%20%20%20%20%20i%20%3D%20(i%20%2B%201)%20%25%20this.m_vertexCount%3B%0A%20%20%20%20%20%20%20%20if%20(i%20%3D%3D%20outoIndex2)%20p3%20%3D%20outoVec%3B%0A%20%20%20%20%20%20%20%20else%20p3%20%3D%20this.m_vertices%5Bi%5D%3B%0A%20%20%20%20%20%20%20%20var%20triangleArea%20%3D%0A%20%20%20%20%20%20%20%20%20%200.5%20*%0A%20%20%20%20%20%20%20%20%20%20((p2.x%20-%20intoVec.x)%20*%20(p3.y%20-%20intoVec.y)%20-%0A%20%20%20%20%20%20%20%20%20%20%20%20(p2.y%20-%20intoVec.y)%20*%20(p3.x%20-%20intoVec.x))%3B%0A%20%20%20%20%20%20%20%20area%20%2B%3D%20triangleArea%3B%0A%20%20%20%20%20%20%20%20center.x%20%2B%3D%20(triangleArea%20*%20(intoVec.x%20%2B%20p2.x%20%2B%20p3.x))%20%2F%203%3B%0A%20%20%20%20%20%20%20%20center.y%20%2B%3D%20(triangleArea%20*%20(intoVec.y%20%2B%20p2.y%20%2B%20p3.y))%20%2F%203%3B%0A%20%20%20%20%20%20%20%20p2%20%3D%20p3%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20center.Multiply(1%20%2F%20area)%3B%0A%20%20%20%20%20%20c.SetV(b2Math.MulX(xf%2C%20center))%3B%0A%20%20%20%20%20%20return%20area%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2PolygonShape.prototype.GetVertexCount%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20return%20this.m_vertexCount%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2PolygonShape.prototype.GetVertices%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20return%20this.m_vertices%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2PolygonShape.prototype.GetNormals%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20return%20this.m_normals%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2PolygonShape.prototype.GetSupport%20%3D%20function%20(d)%20%7B%0A%20%20%20%20%20%20var%20bestIndex%20%3D%200%3B%0A%20%20%20%20%20%20var%20bestValue%20%3D%20this.m_vertices%5B0%5D.x%20*%20d.x%20%2B%20this.m_vertices%5B0%5D.y%20*%20d.y%3B%0A%20%20%20%20%20%20for%20(var%20i%20%3D%201%3B%20i%20%3C%20this.m_vertexCount%3B%20%2B%2Bi)%20%7B%0A%20%20%20%20%20%20%20%20var%20value%20%3D%20this.m_vertices%5Bi%5D.x%20*%20d.x%20%2B%20this.m_vertices%5Bi%5D.y%20*%20d.y%3B%0A%20%20%20%20%20%20%20%20if%20(value%20%3E%20bestValue)%20%7B%0A%20%20%20%20%20%20%20%20%20%20bestIndex%20%3D%20i%3B%0A%20%20%20%20%20%20%20%20%20%20bestValue%20%3D%20value%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20return%20bestIndex%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2PolygonShape.prototype.GetSupportVertex%20%3D%20function%20(d)%20%7B%0A%20%20%20%20%20%20var%20bestIndex%20%3D%200%3B%0A%20%20%20%20%20%20var%20bestValue%20%3D%20this.m_vertices%5B0%5D.x%20*%20d.x%20%2B%20this.m_vertices%5B0%5D.y%20*%20d.y%3B%0A%20%20%20%20%20%20for%20(var%20i%20%3D%201%3B%20i%20%3C%20this.m_vertexCount%3B%20%2B%2Bi)%20%7B%0A%20%20%20%20%20%20%20%20var%20value%20%3D%20this.m_vertices%5Bi%5D.x%20*%20d.x%20%2B%20this.m_vertices%5Bi%5D.y%20*%20d.y%3B%0A%20%20%20%20%20%20%20%20if%20(value%20%3E%20bestValue)%20%7B%0A%20%20%20%20%20%20%20%20%20%20bestIndex%20%3D%20i%3B%0A%20%20%20%20%20%20%20%20%20%20bestValue%20%3D%20value%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20return%20this.m_vertices%5BbestIndex%5D%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2PolygonShape.prototype.Validate%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20return%20false%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2PolygonShape.prototype.b2PolygonShape%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20this.__super.b2Shape.call(this)%3B%0A%20%20%20%20%20%20this.m_type%20%3D%20b2Shape.e_polygonShape%3B%0A%20%20%20%20%20%20this.m_centroid%20%3D%20new%20b2Vec2()%3B%0A%20%20%20%20%20%20this.m_vertices%20%3D%20new%20Vector()%3B%0A%20%20%20%20%20%20this.m_normals%20%3D%20new%20Vector()%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2PolygonShape.prototype.Reserve%20%3D%20function%20(count)%20%7B%0A%20%20%20%20%20%20if%20(count%20%3D%3D%3D%20undefined)%20count%20%3D%200%3B%0A%20%20%20%20%20%20for%20(var%20i%20%3D%20parseInt(this.m_vertices.length)%3B%20i%20%3C%20count%3B%20i%2B%2B)%20%7B%0A%20%20%20%20%20%20%20%20this.m_vertices%5Bi%5D%20%3D%20new%20b2Vec2()%3B%0A%20%20%20%20%20%20%20%20this.m_normals%5Bi%5D%20%3D%20new%20b2Vec2()%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2PolygonShape.ComputeCentroid%20%3D%20function%20(vs%2C%20count)%20%7B%0A%20%20%20%20%20%20if%20(count%20%3D%3D%3D%20undefined)%20count%20%3D%200%3B%0A%20%20%20%20%20%20var%20c%20%3D%20new%20b2Vec2()%3B%0A%20%20%20%20%20%20var%20area%20%3D%200.0%3B%0A%20%20%20%20%20%20var%20p1X%20%3D%200.0%3B%0A%20%20%20%20%20%20var%20p1Y%20%3D%200.0%3B%0A%20%20%20%20%20%20var%20inv3%20%3D%201.0%20%2F%203.0%3B%0A%20%20%20%20%20%20for%20(var%20i%20%3D%200%3B%20i%20%3C%20count%3B%20%2B%2Bi)%20%7B%0A%20%20%20%20%20%20%20%20var%20p2%20%3D%20vs%5Bi%5D%3B%0A%20%20%20%20%20%20%20%20var%20p3%20%3D%20i%20%2B%201%20%3C%20count%20%3F%20vs%5BparseInt(i%20%2B%201)%5D%20%3A%20vs%5B0%5D%3B%0A%20%20%20%20%20%20%20%20var%20e1X%20%3D%20p2.x%20-%20p1X%3B%0A%20%20%20%20%20%20%20%20var%20e1Y%20%3D%20p2.y%20-%20p1Y%3B%0A%20%20%20%20%20%20%20%20var%20e2X%20%3D%20p3.x%20-%20p1X%3B%0A%20%20%20%20%20%20%20%20var%20e2Y%20%3D%20p3.y%20-%20p1Y%3B%0A%20%20%20%20%20%20%20%20var%20D%20%3D%20e1X%20*%20e2Y%20-%20e1Y%20*%20e2X%3B%0A%20%20%20%20%20%20%20%20var%20triangleArea%20%3D%200.5%20*%20D%3B%0A%20%20%20%20%20%20%20%20area%20%2B%3D%20triangleArea%3B%0A%20%20%20%20%20%20%20%20c.x%20%2B%3D%20triangleArea%20*%20inv3%20*%20(p1X%20%2B%20p2.x%20%2B%20p3.x)%3B%0A%20%20%20%20%20%20%20%20c.y%20%2B%3D%20triangleArea%20*%20inv3%20*%20(p1Y%20%2B%20p2.y%20%2B%20p3.y)%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20c.x%20*%3D%201.0%20%2F%20area%3B%0A%20%20%20%20%20%20c.y%20*%3D%201.0%20%2F%20area%3B%0A%20%20%20%20%20%20return%20c%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2PolygonShape.ComputeOBB%20%3D%20function%20(obb%2C%20vs%2C%20count)%20%7B%0A%20%20%20%20%20%20if%20(count%20%3D%3D%3D%20undefined)%20count%20%3D%200%3B%0A%20%20%20%20%20%20var%20i%20%3D%200%3B%0A%20%20%20%20%20%20var%20p%20%3D%20new%20Vector(count%20%2B%201)%3B%0A%20%20%20%20%20%20for%20(i%20%3D%200%3B%20i%20%3C%20count%3B%20%2B%2Bi)%20%7B%0A%20%20%20%20%20%20%20%20p%5Bi%5D%20%3D%20vs%5Bi%5D%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20p%5Bcount%5D%20%3D%20p%5B0%5D%3B%0A%20%20%20%20%20%20var%20minArea%20%3D%20Number.MAX_VALUE%3B%0A%20%20%20%20%20%20for%20(i%20%3D%201%3B%20i%20%3C%3D%20count%3B%20%2B%2Bi)%20%7B%0A%20%20%20%20%20%20%20%20var%20root%20%3D%20p%5BparseInt(i%20-%201)%5D%3B%0A%20%20%20%20%20%20%20%20var%20uxX%20%3D%20p%5Bi%5D.x%20-%20root.x%3B%0A%20%20%20%20%20%20%20%20var%20uxY%20%3D%20p%5Bi%5D.y%20-%20root.y%3B%0A%20%20%20%20%20%20%20%20var%20length%20%3D%20Math.sqrt(uxX%20*%20uxX%20%2B%20uxY%20*%20uxY)%3B%0A%20%20%20%20%20%20%20%20uxX%20%2F%3D%20length%3B%0A%20%20%20%20%20%20%20%20uxY%20%2F%3D%20length%3B%0A%20%20%20%20%20%20%20%20var%20uyX%20%3D%20-uxY%3B%0A%20%20%20%20%20%20%20%20var%20uyY%20%3D%20uxX%3B%0A%20%20%20%20%20%20%20%20var%20lowerX%20%3D%20Number.MAX_VALUE%3B%0A%20%20%20%20%20%20%20%20var%20lowerY%20%3D%20Number.MAX_VALUE%3B%0A%20%20%20%20%20%20%20%20var%20upperX%20%3D%20-Number.MAX_VALUE%3B%0A%20%20%20%20%20%20%20%20var%20upperY%20%3D%20-Number.MAX_VALUE%3B%0A%20%20%20%20%20%20%20%20for%20(var%20j%20%3D%200%3B%20j%20%3C%20count%3B%20%2B%2Bj)%20%7B%0A%20%20%20%20%20%20%20%20%20%20var%20dX%20%3D%20p%5Bj%5D.x%20-%20root.x%3B%0A%20%20%20%20%20%20%20%20%20%20var%20dY%20%3D%20p%5Bj%5D.y%20-%20root.y%3B%0A%20%20%20%20%20%20%20%20%20%20var%20rX%20%3D%20uxX%20*%20dX%20%2B%20uxY%20*%20dY%3B%0A%20%20%20%20%20%20%20%20%20%20var%20rY%20%3D%20uyX%20*%20dX%20%2B%20uyY%20*%20dY%3B%0A%20%20%20%20%20%20%20%20%20%20if%20(rX%20%3C%20lowerX)%20lowerX%20%3D%20rX%3B%0A%20%20%20%20%20%20%20%20%20%20if%20(rY%20%3C%20lowerY)%20lowerY%20%3D%20rY%3B%0A%20%20%20%20%20%20%20%20%20%20if%20(rX%20%3E%20upperX)%20upperX%20%3D%20rX%3B%0A%20%20%20%20%20%20%20%20%20%20if%20(rY%20%3E%20upperY)%20upperY%20%3D%20rY%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20var%20area%20%3D%20(upperX%20-%20lowerX)%20*%20(upperY%20-%20lowerY)%3B%0A%20%20%20%20%20%20%20%20if%20(area%20%3C%200.95%20*%20minArea)%20%7B%0A%20%20%20%20%20%20%20%20%20%20minArea%20%3D%20area%3B%0A%20%20%20%20%20%20%20%20%20%20obb.R.col1.x%20%3D%20uxX%3B%0A%20%20%20%20%20%20%20%20%20%20obb.R.col1.y%20%3D%20uxY%3B%0A%20%20%20%20%20%20%20%20%20%20obb.R.col2.x%20%3D%20uyX%3B%0A%20%20%20%20%20%20%20%20%20%20obb.R.col2.y%20%3D%20uyY%3B%0A%20%20%20%20%20%20%20%20%20%20var%20centerX%20%3D%200.5%20*%20(lowerX%20%2B%20upperX)%3B%0A%20%20%20%20%20%20%20%20%20%20var%20centerY%20%3D%200.5%20*%20(lowerY%20%2B%20upperY)%3B%0A%20%20%20%20%20%20%20%20%20%20var%20tMat%20%3D%20obb.R%3B%0A%20%20%20%20%20%20%20%20%20%20obb.center.x%20%3D%0A%20%20%20%20%20%20%20%20%20%20%20%20root.x%20%2B%20(tMat.col1.x%20*%20centerX%20%2B%20tMat.col2.x%20*%20centerY)%3B%0A%20%20%20%20%20%20%20%20%20%20obb.center.y%20%3D%0A%20%20%20%20%20%20%20%20%20%20%20%20root.y%20%2B%20(tMat.col1.y%20*%20centerX%20%2B%20tMat.col2.y%20*%20centerY)%3B%0A%20%20%20%20%20%20%20%20%20%20obb.extents.x%20%3D%200.5%20*%20(upperX%20-%20lowerX)%3B%0A%20%20%20%20%20%20%20%20%20%20obb.extents.y%20%3D%200.5%20*%20(upperY%20-%20lowerY)%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%3B%0A%20%20%20%20Box2D.postDefs.push(function%20()%20%7B%0A%20%20%20%20%20%20Box2D.Collision.Shapes.b2PolygonShape.s_mat%20%3D%20new%20b2Mat22()%3B%0A%20%20%20%20%7D)%3B%0A%20%20%20%20b2Shape.b2Shape%20%3D%20function%20()%20%7B%7D%3B%0A%20%20%20%20b2Shape.prototype.Copy%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20return%20null%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2Shape.prototype.Set%20%3D%20function%20(other)%20%7B%0A%20%20%20%20%20%20this.m_radius%20%3D%20other.m_radius%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2Shape.prototype.GetType%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20return%20this.m_type%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2Shape.prototype.TestPoint%20%3D%20function%20(xf%2C%20p)%20%7B%0A%20%20%20%20%20%20return%20false%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2Shape.prototype.RayCast%20%3D%20function%20(output%2C%20input%2C%20transform)%20%7B%0A%20%20%20%20%20%20return%20false%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2Shape.prototype.ComputeAABB%20%3D%20function%20(aabb%2C%20xf)%20%7B%7D%3B%0A%20%20%20%20b2Shape.prototype.ComputeMass%20%3D%20function%20(massData%2C%20density)%20%7B%0A%20%20%20%20%20%20if%20(density%20%3D%3D%3D%20undefined)%20density%20%3D%200%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2Shape.prototype.ComputeSubmergedArea%20%3D%20function%20(normal%2C%20offset%2C%20xf%2C%20c)%20%7B%0A%20%20%20%20%20%20if%20(offset%20%3D%3D%3D%20undefined)%20offset%20%3D%200%3B%0A%20%20%20%20%20%20return%200%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2Shape.TestOverlap%20%3D%20function%20(shape1%2C%20transform1%2C%20shape2%2C%20transform2)%20%7B%0A%20%20%20%20%20%20var%20input%20%3D%20new%20b2DistanceInput()%3B%0A%20%20%20%20%20%20input.proxyA%20%3D%20new%20b2DistanceProxy()%3B%0A%20%20%20%20%20%20input.proxyA.Set(shape1)%3B%0A%20%20%20%20%20%20input.proxyB%20%3D%20new%20b2DistanceProxy()%3B%0A%20%20%20%20%20%20input.proxyB.Set(shape2)%3B%0A%20%20%20%20%20%20input.transformA%20%3D%20transform1%3B%0A%20%20%20%20%20%20input.transformB%20%3D%20transform2%3B%0A%20%20%20%20%20%20input.useRadii%20%3D%20true%3B%0A%20%20%20%20%20%20var%20simplexCache%20%3D%20new%20b2SimplexCache()%3B%0A%20%20%20%20%20%20simplexCache.count%20%3D%200%3B%0A%20%20%20%20%20%20var%20output%20%3D%20new%20b2DistanceOutput()%3B%0A%20%20%20%20%20%20b2Distance.Distance(output%2C%20simplexCache%2C%20input)%3B%0A%20%20%20%20%20%20return%20output.distance%20%3C%2010.0%20*%20Number.MIN_VALUE%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2Shape.prototype.b2Shape%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20this.m_type%20%3D%20b2Shape.e_unknownShape%3B%0A%20%20%20%20%20%20this.m_radius%20%3D%20b2Settings.b2_linearSlop%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20Box2D.postDefs.push(function%20()%20%7B%0A%20%20%20%20%20%20Box2D.Collision.Shapes.b2Shape.e_unknownShape%20%3D%20parseInt(-1)%3B%0A%20%20%20%20%20%20Box2D.Collision.Shapes.b2Shape.e_circleShape%20%3D%200%3B%0A%20%20%20%20%20%20Box2D.Collision.Shapes.b2Shape.e_polygonShape%20%3D%201%3B%0A%20%20%20%20%20%20Box2D.Collision.Shapes.b2Shape.e_edgeShape%20%3D%202%3B%0A%20%20%20%20%20%20Box2D.Collision.Shapes.b2Shape.e_shapeTypeCount%20%3D%203%3B%0A%20%20%20%20%20%20Box2D.Collision.Shapes.b2Shape.e_hitCollide%20%3D%201%3B%0A%20%20%20%20%20%20Box2D.Collision.Shapes.b2Shape.e_missCollide%20%3D%200%3B%0A%20%20%20%20%20%20Box2D.Collision.Shapes.b2Shape.e_startsInsideCollide%20%3D%20parseInt(-1)%3B%0A%20%20%20%20%7D)%3B%0A%20%20%7D)()%3B%0A%20%20(function%20()%20%7B%0A%20%20%20%20var%20b2Color%20%3D%20Box2D.Common.b2Color%2C%0A%20%20%20%20%20%20b2internal%20%3D%20Box2D.Common.b2internal%2C%0A%20%20%20%20%20%20b2Settings%20%3D%20Box2D.Common.b2Settings%2C%0A%20%20%20%20%20%20b2Mat22%20%3D%20Box2D.Common.Math.b2Mat22%2C%0A%20%20%20%20%20%20b2Mat33%20%3D%20Box2D.Common.Math.b2Mat33%2C%0A%20%20%20%20%20%20b2Math%20%3D%20Box2D.Common.Math.b2Math%2C%0A%20%20%20%20%20%20b2Sweep%20%3D%20Box2D.Common.Math.b2Sweep%2C%0A%20%20%20%20%20%20b2Transform%20%3D%20Box2D.Common.Math.b2Transform%2C%0A%20%20%20%20%20%20b2Vec2%20%3D%20Box2D.Common.Math.b2Vec2%2C%0A%20%20%20%20%20%20b2Vec3%20%3D%20Box2D.Common.Math.b2Vec3%3B%0A%0A%20%20%20%20b2Color.b2Color%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20this._r%20%3D%200%3B%0A%20%20%20%20%20%20this._g%20%3D%200%3B%0A%20%20%20%20%20%20this._b%20%3D%200%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2Color.prototype.b2Color%20%3D%20function%20(rr%2C%20gg%2C%20bb)%20%7B%0A%20%20%20%20%20%20if%20(rr%20%3D%3D%3D%20undefined)%20rr%20%3D%200%3B%0A%20%20%20%20%20%20if%20(gg%20%3D%3D%3D%20undefined)%20gg%20%3D%200%3B%0A%20%20%20%20%20%20if%20(bb%20%3D%3D%3D%20undefined)%20bb%20%3D%200%3B%0A%20%20%20%20%20%20this._r%20%3D%20Box2D.parseUInt(255%20*%20b2Math.Clamp(rr%2C%200.0%2C%201.0))%3B%0A%20%20%20%20%20%20this._g%20%3D%20Box2D.parseUInt(255%20*%20b2Math.Clamp(gg%2C%200.0%2C%201.0))%3B%0A%20%20%20%20%20%20this._b%20%3D%20Box2D.parseUInt(255%20*%20b2Math.Clamp(bb%2C%200.0%2C%201.0))%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2Color.prototype.Set%20%3D%20function%20(rr%2C%20gg%2C%20bb)%20%7B%0A%20%20%20%20%20%20if%20(rr%20%3D%3D%3D%20undefined)%20rr%20%3D%200%3B%0A%20%20%20%20%20%20if%20(gg%20%3D%3D%3D%20undefined)%20gg%20%3D%200%3B%0A%20%20%20%20%20%20if%20(bb%20%3D%3D%3D%20undefined)%20bb%20%3D%200%3B%0A%20%20%20%20%20%20this._r%20%3D%20Box2D.parseUInt(255%20*%20b2Math.Clamp(rr%2C%200.0%2C%201.0))%3B%0A%20%20%20%20%20%20this._g%20%3D%20Box2D.parseUInt(255%20*%20b2Math.Clamp(gg%2C%200.0%2C%201.0))%3B%0A%20%20%20%20%20%20this._b%20%3D%20Box2D.parseUInt(255%20*%20b2Math.Clamp(bb%2C%200.0%2C%201.0))%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20Object.defineProperty(b2Color.prototype%2C%20%22r%22%2C%20%7B%0A%20%20%20%20%20%20enumerable%3A%20false%2C%0A%20%20%20%20%20%20configurable%3A%20true%2C%0A%20%20%20%20%20%20set%3A%20function%20(rr)%20%7B%0A%20%20%20%20%20%20%20%20if%20(rr%20%3D%3D%3D%20undefined)%20rr%20%3D%200%3B%0A%20%20%20%20%20%20%20%20this._r%20%3D%20Box2D.parseUInt(255%20*%20b2Math.Clamp(rr%2C%200.0%2C%201.0))%3B%0A%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%7D)%3B%0A%20%20%20%20Object.defineProperty(b2Color.prototype%2C%20%22g%22%2C%20%7B%0A%20%20%20%20%20%20enumerable%3A%20false%2C%0A%20%20%20%20%20%20configurable%3A%20true%2C%0A%20%20%20%20%20%20set%3A%20function%20(gg)%20%7B%0A%20%20%20%20%20%20%20%20if%20(gg%20%3D%3D%3D%20undefined)%20gg%20%3D%200%3B%0A%20%20%20%20%20%20%20%20this._g%20%3D%20Box2D.parseUInt(255%20*%20b2Math.Clamp(gg%2C%200.0%2C%201.0))%3B%0A%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%7D)%3B%0A%20%20%20%20Object.defineProperty(b2Color.prototype%2C%20%22b%22%2C%20%7B%0A%20%20%20%20%20%20enumerable%3A%20false%2C%0A%20%20%20%20%20%20configurable%3A%20true%2C%0A%20%20%20%20%20%20set%3A%20function%20(bb)%20%7B%0A%20%20%20%20%20%20%20%20if%20(bb%20%3D%3D%3D%20undefined)%20bb%20%3D%200%3B%0A%20%20%20%20%20%20%20%20this._b%20%3D%20Box2D.parseUInt(255%20*%20b2Math.Clamp(bb%2C%200.0%2C%201.0))%3B%0A%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%7D)%3B%0A%20%20%20%20Object.defineProperty(b2Color.prototype%2C%20%22color%22%2C%20%7B%0A%20%20%20%20%20%20enumerable%3A%20false%2C%0A%20%20%20%20%20%20configurable%3A%20true%2C%0A%20%20%20%20%20%20get%3A%20function%20()%20%7B%0A%20%20%20%20%20%20%20%20return%20(this._r%20%3C%3C%2016)%20%7C%20(this._g%20%3C%3C%208)%20%7C%20this._b%3B%0A%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%7D)%3B%0A%20%20%20%20b2Settings.b2Settings%20%3D%20function%20()%20%7B%7D%3B%0A%20%20%20%20b2Settings.b2MixFriction%20%3D%20function%20(friction1%2C%20friction2)%20%7B%0A%20%20%20%20%20%20if%20(friction1%20%3D%3D%3D%20undefined)%20friction1%20%3D%200%3B%0A%20%20%20%20%20%20if%20(friction2%20%3D%3D%3D%20undefined)%20friction2%20%3D%200%3B%0A%20%20%20%20%20%20return%20Math.sqrt(friction1%20*%20friction2)%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2Settings.b2MixRestitution%20%3D%20function%20(restitution1%2C%20restitution2)%20%7B%0A%20%20%20%20%20%20if%20(restitution1%20%3D%3D%3D%20undefined)%20restitution1%20%3D%200%3B%0A%20%20%20%20%20%20if%20(restitution2%20%3D%3D%3D%20undefined)%20restitution2%20%3D%200%3B%0A%20%20%20%20%20%20return%20restitution1%20%3E%20restitution2%20%3F%20restitution1%20%3A%20restitution2%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2Settings.b2Assert%20%3D%20function%20(a)%20%7B%0A%20%20%20%20%20%20if%20(!a)%20%7B%0A%20%20%20%20%20%20%20%20throw%20%22Assertion%20Failed%22%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%3B%0A%20%20%20%20Box2D.postDefs.push(function%20()%20%7B%0A%20%20%20%20%20%20Box2D.Common.b2Settings.VERSION%20%3D%20%222.1alpha%22%3B%0A%20%20%20%20%20%20Box2D.Common.b2Settings.USHRT_MAX%20%3D%200x0000ffff%3B%0A%20%20%20%20%20%20Box2D.Common.b2Settings.b2_pi%20%3D%20Math.PI%3B%0A%20%20%20%20%20%20Box2D.Common.b2Settings.b2_maxManifoldPoints%20%3D%202%3B%0A%20%20%20%20%20%20Box2D.Common.b2Settings.b2_aabbExtension%20%3D%200.1%3B%0A%20%20%20%20%20%20Box2D.Common.b2Settings.b2_aabbMultiplier%20%3D%202.0%3B%0A%20%20%20%20%20%20Box2D.Common.b2Settings.b2_polygonRadius%20%3D%202.0%20*%20b2Settings.b2_linearSlop%3B%0A%20%20%20%20%20%20Box2D.Common.b2Settings.b2_linearSlop%20%3D%200.005%3B%0A%20%20%20%20%20%20Box2D.Common.b2Settings.b2_angularSlop%20%3D%20(2.0%20%2F%20180.0)%20*%20b2Settings.b2_pi%3B%0A%20%20%20%20%20%20Box2D.Common.b2Settings.b2_toiSlop%20%3D%208.0%20*%20b2Settings.b2_linearSlop%3B%0A%20%20%20%20%20%20Box2D.Common.b2Settings.b2_maxTOIContactsPerIsland%20%3D%2032%3B%0A%20%20%20%20%20%20Box2D.Common.b2Settings.b2_maxTOIJointsPerIsland%20%3D%2032%3B%0A%20%20%20%20%20%20Box2D.Common.b2Settings.b2_velocityThreshold%20%3D%201.0%3B%0A%20%20%20%20%20%20Box2D.Common.b2Settings.b2_maxLinearCorrection%20%3D%200.2%3B%0A%20%20%20%20%20%20Box2D.Common.b2Settings.b2_maxAngularCorrection%20%3D%0A%20%20%20%20%20%20%20%20(8.0%20%2F%20180.0)%20*%20b2Settings.b2_pi%3B%0A%20%20%20%20%20%20Box2D.Common.b2Settings.b2_maxTranslation%20%3D%202.0%3B%0A%20%20%20%20%20%20Box2D.Common.b2Settings.b2_maxTranslationSquared%20%3D%0A%20%20%20%20%20%20%20%20b2Settings.b2_maxTranslation%20*%20b2Settings.b2_maxTranslation%3B%0A%20%20%20%20%20%20Box2D.Common.b2Settings.b2_maxRotation%20%3D%200.5%20*%20b2Settings.b2_pi%3B%0A%20%20%20%20%20%20Box2D.Common.b2Settings.b2_maxRotationSquared%20%3D%0A%20%20%20%20%20%20%20%20b2Settings.b2_maxRotation%20*%20b2Settings.b2_maxRotation%3B%0A%20%20%20%20%20%20Box2D.Common.b2Settings.b2_contactBaumgarte%20%3D%200.2%3B%0A%20%20%20%20%20%20Box2D.Common.b2Settings.b2_timeToSleep%20%3D%200.5%3B%0A%20%20%20%20%20%20Box2D.Common.b2Settings.b2_linearSleepTolerance%20%3D%200.01%3B%0A%20%20%20%20%20%20Box2D.Common.b2Settings.b2_angularSleepTolerance%20%3D%0A%20%20%20%20%20%20%20%20(2.0%20%2F%20180.0)%20*%20b2Settings.b2_pi%3B%0A%20%20%20%20%7D)%3B%0A%20%20%7D)()%3B%0A%20%20(function%20()%20%7B%0A%20%20%20%20var%20b2AABB%20%3D%20Box2D.Collision.b2AABB%2C%0A%20%20%20%20%20%20b2Color%20%3D%20Box2D.Common.b2Color%2C%0A%20%20%20%20%20%20b2internal%20%3D%20Box2D.Common.b2internal%2C%0A%20%20%20%20%20%20b2Settings%20%3D%20Box2D.Common.b2Settings%2C%0A%20%20%20%20%20%20b2Mat22%20%3D%20Box2D.Common.Math.b2Mat22%2C%0A%20%20%20%20%20%20b2Mat33%20%3D%20Box2D.Common.Math.b2Mat33%2C%0A%20%20%20%20%20%20b2Math%20%3D%20Box2D.Common.Math.b2Math%2C%0A%20%20%20%20%20%20b2Sweep%20%3D%20Box2D.Common.Math.b2Sweep%2C%0A%20%20%20%20%20%20b2Transform%20%3D%20Box2D.Common.Math.b2Transform%2C%0A%20%20%20%20%20%20b2Vec2%20%3D%20Box2D.Common.Math.b2Vec2%2C%0A%20%20%20%20%20%20b2Vec3%20%3D%20Box2D.Common.Math.b2Vec3%3B%0A%0A%20%20%20%20b2Mat22.b2Mat22%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20this.col1%20%3D%20new%20b2Vec2()%3B%0A%20%20%20%20%20%20this.col2%20%3D%20new%20b2Vec2()%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2Mat22.prototype.b2Mat22%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20this.SetIdentity()%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2Mat22.FromAngle%20%3D%20function%20(angle)%20%7B%0A%20%20%20%20%20%20if%20(angle%20%3D%3D%3D%20undefined)%20angle%20%3D%200%3B%0A%20%20%20%20%20%20var%20mat%20%3D%20new%20b2Mat22()%3B%0A%20%20%20%20%20%20mat.Set(angle)%3B%0A%20%20%20%20%20%20return%20mat%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2Mat22.FromVV%20%3D%20function%20(c1%2C%20c2)%20%7B%0A%20%20%20%20%20%20var%20mat%20%3D%20new%20b2Mat22()%3B%0A%20%20%20%20%20%20mat.SetVV(c1%2C%20c2)%3B%0A%20%20%20%20%20%20return%20mat%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2Mat22.prototype.Set%20%3D%20function%20(angle)%20%7B%0A%20%20%20%20%20%20if%20(angle%20%3D%3D%3D%20undefined)%20angle%20%3D%200%3B%0A%20%20%20%20%20%20var%20c%20%3D%20Math.cos(angle)%3B%0A%20%20%20%20%20%20var%20s%20%3D%20Math.sin(angle)%3B%0A%20%20%20%20%20%20this.col1.x%20%3D%20c%3B%0A%20%20%20%20%20%20this.col2.x%20%3D%20-s%3B%0A%20%20%20%20%20%20this.col1.y%20%3D%20s%3B%0A%20%20%20%20%20%20this.col2.y%20%3D%20c%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2Mat22.prototype.SetVV%20%3D%20function%20(c1%2C%20c2)%20%7B%0A%20%20%20%20%20%20this.col1.SetV(c1)%3B%0A%20%20%20%20%20%20this.col2.SetV(c2)%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2Mat22.prototype.Copy%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20var%20mat%20%3D%20new%20b2Mat22()%3B%0A%20%20%20%20%20%20mat.SetM(this)%3B%0A%20%20%20%20%20%20return%20mat%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2Mat22.prototype.SetM%20%3D%20function%20(m)%20%7B%0A%20%20%20%20%20%20this.col1.SetV(m.col1)%3B%0A%20%20%20%20%20%20this.col2.SetV(m.col2)%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2Mat22.prototype.AddM%20%3D%20function%20(m)%20%7B%0A%20%20%20%20%20%20this.col1.x%20%2B%3D%20m.col1.x%3B%0A%20%20%20%20%20%20this.col1.y%20%2B%3D%20m.col1.y%3B%0A%20%20%20%20%20%20this.col2.x%20%2B%3D%20m.col2.x%3B%0A%20%20%20%20%20%20this.col2.y%20%2B%3D%20m.col2.y%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2Mat22.prototype.SetIdentity%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20this.col1.x%20%3D%201.0%3B%0A%20%20%20%20%20%20this.col2.x%20%3D%200.0%3B%0A%20%20%20%20%20%20this.col1.y%20%3D%200.0%3B%0A%20%20%20%20%20%20this.col2.y%20%3D%201.0%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2Mat22.prototype.SetZero%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20this.col1.x%20%3D%200.0%3B%0A%20%20%20%20%20%20this.col2.x%20%3D%200.0%3B%0A%20%20%20%20%20%20this.col1.y%20%3D%200.0%3B%0A%20%20%20%20%20%20this.col2.y%20%3D%200.0%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2Mat22.prototype.GetAngle%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20return%20Math.atan2(this.col1.y%2C%20this.col1.x)%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2Mat22.prototype.GetInverse%20%3D%20function%20(out)%20%7B%0A%20%20%20%20%20%20var%20a%20%3D%20this.col1.x%3B%0A%20%20%20%20%20%20var%20b%20%3D%20this.col2.x%3B%0A%20%20%20%20%20%20var%20c%20%3D%20this.col1.y%3B%0A%20%20%20%20%20%20var%20d%20%3D%20this.col2.y%3B%0A%20%20%20%20%20%20var%20det%20%3D%20a%20*%20d%20-%20b%20*%20c%3B%0A%20%20%20%20%20%20if%20(det%20!%3D%200.0)%20%7B%0A%20%20%20%20%20%20%20%20det%20%3D%201.0%20%2F%20det%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20out.col1.x%20%3D%20det%20*%20d%3B%0A%20%20%20%20%20%20out.col2.x%20%3D%20-det%20*%20b%3B%0A%20%20%20%20%20%20out.col1.y%20%3D%20-det%20*%20c%3B%0A%20%20%20%20%20%20out.col2.y%20%3D%20det%20*%20a%3B%0A%20%20%20%20%20%20return%20out%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2Mat22.prototype.Solve%20%3D%20function%20(out%2C%20bX%2C%20bY)%20%7B%0A%20%20%20%20%20%20if%20(bX%20%3D%3D%3D%20undefined)%20bX%20%3D%200%3B%0A%20%20%20%20%20%20if%20(bY%20%3D%3D%3D%20undefined)%20bY%20%3D%200%3B%0A%20%20%20%20%20%20var%20a11%20%3D%20this.col1.x%3B%0A%20%20%20%20%20%20var%20a12%20%3D%20this.col2.x%3B%0A%20%20%20%20%20%20var%20a21%20%3D%20this.col1.y%3B%0A%20%20%20%20%20%20var%20a22%20%3D%20this.col2.y%3B%0A%20%20%20%20%20%20var%20det%20%3D%20a11%20*%20a22%20-%20a12%20*%20a21%3B%0A%20%20%20%20%20%20if%20(det%20!%3D%200.0)%20%7B%0A%20%20%20%20%20%20%20%20det%20%3D%201.0%20%2F%20det%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20out.x%20%3D%20det%20*%20(a22%20*%20bX%20-%20a12%20*%20bY)%3B%0A%20%20%20%20%20%20out.y%20%3D%20det%20*%20(a11%20*%20bY%20-%20a21%20*%20bX)%3B%0A%20%20%20%20%20%20return%20out%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2Mat22.prototype.Abs%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20this.col1.Abs()%3B%0A%20%20%20%20%20%20this.col2.Abs()%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2Mat33.b2Mat33%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20this.col1%20%3D%20new%20b2Vec3()%3B%0A%20%20%20%20%20%20this.col2%20%3D%20new%20b2Vec3()%3B%0A%20%20%20%20%20%20this.col3%20%3D%20new%20b2Vec3()%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2Mat33.prototype.b2Mat33%20%3D%20function%20(c1%2C%20c2%2C%20c3)%20%7B%0A%20%20%20%20%20%20if%20(c1%20%3D%3D%3D%20undefined)%20c1%20%3D%20null%3B%0A%20%20%20%20%20%20if%20(c2%20%3D%3D%3D%20undefined)%20c2%20%3D%20null%3B%0A%20%20%20%20%20%20if%20(c3%20%3D%3D%3D%20undefined)%20c3%20%3D%20null%3B%0A%20%20%20%20%20%20if%20(!c1%20%26%26%20!c2%20%26%26%20!c3)%20%7B%0A%20%20%20%20%20%20%20%20this.col1.SetZero()%3B%0A%20%20%20%20%20%20%20%20this.col2.SetZero()%3B%0A%20%20%20%20%20%20%20%20this.col3.SetZero()%3B%0A%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20this.col1.SetV(c1)%3B%0A%20%20%20%20%20%20%20%20this.col2.SetV(c2)%3B%0A%20%20%20%20%20%20%20%20this.col3.SetV(c3)%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2Mat33.prototype.SetVVV%20%3D%20function%20(c1%2C%20c2%2C%20c3)%20%7B%0A%20%20%20%20%20%20this.col1.SetV(c1)%3B%0A%20%20%20%20%20%20this.col2.SetV(c2)%3B%0A%20%20%20%20%20%20this.col3.SetV(c3)%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2Mat33.prototype.Copy%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20return%20new%20b2Mat33(this.col1%2C%20this.col2%2C%20this.col3)%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2Mat33.prototype.SetM%20%3D%20function%20(m)%20%7B%0A%20%20%20%20%20%20this.col1.SetV(m.col1)%3B%0A%20%20%20%20%20%20this.col2.SetV(m.col2)%3B%0A%20%20%20%20%20%20this.col3.SetV(m.col3)%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2Mat33.prototype.AddM%20%3D%20function%20(m)%20%7B%0A%20%20%20%20%20%20this.col1.x%20%2B%3D%20m.col1.x%3B%0A%20%20%20%20%20%20this.col1.y%20%2B%3D%20m.col1.y%3B%0A%20%20%20%20%20%20this.col1.z%20%2B%3D%20m.col1.z%3B%0A%20%20%20%20%20%20this.col2.x%20%2B%3D%20m.col2.x%3B%0A%20%20%20%20%20%20this.col2.y%20%2B%3D%20m.col2.y%3B%0A%20%20%20%20%20%20this.col2.z%20%2B%3D%20m.col2.z%3B%0A%20%20%20%20%20%20this.col3.x%20%2B%3D%20m.col3.x%3B%0A%20%20%20%20%20%20this.col3.y%20%2B%3D%20m.col3.y%3B%0A%20%20%20%20%20%20this.col3.z%20%2B%3D%20m.col3.z%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2Mat33.prototype.SetIdentity%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20this.col1.x%20%3D%201.0%3B%0A%20%20%20%20%20%20this.col2.x%20%3D%200.0%3B%0A%20%20%20%20%20%20this.col3.x%20%3D%200.0%3B%0A%20%20%20%20%20%20this.col1.y%20%3D%200.0%3B%0A%20%20%20%20%20%20this.col2.y%20%3D%201.0%3B%0A%20%20%20%20%20%20this.col3.y%20%3D%200.0%3B%0A%20%20%20%20%20%20this.col1.z%20%3D%200.0%3B%0A%20%20%20%20%20%20this.col2.z%20%3D%200.0%3B%0A%20%20%20%20%20%20this.col3.z%20%3D%201.0%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2Mat33.prototype.SetZero%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20this.col1.x%20%3D%200.0%3B%0A%20%20%20%20%20%20this.col2.x%20%3D%200.0%3B%0A%20%20%20%20%20%20this.col3.x%20%3D%200.0%3B%0A%20%20%20%20%20%20this.col1.y%20%3D%200.0%3B%0A%20%20%20%20%20%20this.col2.y%20%3D%200.0%3B%0A%20%20%20%20%20%20this.col3.y%20%3D%200.0%3B%0A%20%20%20%20%20%20this.col1.z%20%3D%200.0%3B%0A%20%20%20%20%20%20this.col2.z%20%3D%200.0%3B%0A%20%20%20%20%20%20this.col3.z%20%3D%200.0%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2Mat33.prototype.Solve22%20%3D%20function%20(out%2C%20bX%2C%20bY)%20%7B%0A%20%20%20%20%20%20if%20(bX%20%3D%3D%3D%20undefined)%20bX%20%3D%200%3B%0A%20%20%20%20%20%20if%20(bY%20%3D%3D%3D%20undefined)%20bY%20%3D%200%3B%0A%20%20%20%20%20%20var%20a11%20%3D%20this.col1.x%3B%0A%20%20%20%20%20%20var%20a12%20%3D%20this.col2.x%3B%0A%20%20%20%20%20%20var%20a21%20%3D%20this.col1.y%3B%0A%20%20%20%20%20%20var%20a22%20%3D%20this.col2.y%3B%0A%20%20%20%20%20%20var%20det%20%3D%20a11%20*%20a22%20-%20a12%20*%20a21%3B%0A%20%20%20%20%20%20if%20(det%20!%3D%200.0)%20%7B%0A%20%20%20%20%20%20%20%20det%20%3D%201.0%20%2F%20det%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20out.x%20%3D%20det%20*%20(a22%20*%20bX%20-%20a12%20*%20bY)%3B%0A%20%20%20%20%20%20out.y%20%3D%20det%20*%20(a11%20*%20bY%20-%20a21%20*%20bX)%3B%0A%20%20%20%20%20%20return%20out%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2Mat33.prototype.Solve33%20%3D%20function%20(out%2C%20bX%2C%20bY%2C%20bZ)%20%7B%0A%20%20%20%20%20%20if%20(bX%20%3D%3D%3D%20undefined)%20bX%20%3D%200%3B%0A%20%20%20%20%20%20if%20(bY%20%3D%3D%3D%20undefined)%20bY%20%3D%200%3B%0A%20%20%20%20%20%20if%20(bZ%20%3D%3D%3D%20undefined)%20bZ%20%3D%200%3B%0A%20%20%20%20%20%20var%20a11%20%3D%20this.col1.x%3B%0A%20%20%20%20%20%20var%20a21%20%3D%20this.col1.y%3B%0A%20%20%20%20%20%20var%20a31%20%3D%20this.col1.z%3B%0A%20%20%20%20%20%20var%20a12%20%3D%20this.col2.x%3B%0A%20%20%20%20%20%20var%20a22%20%3D%20this.col2.y%3B%0A%20%20%20%20%20%20var%20a32%20%3D%20this.col2.z%3B%0A%20%20%20%20%20%20var%20a13%20%3D%20this.col3.x%3B%0A%20%20%20%20%20%20var%20a23%20%3D%20this.col3.y%3B%0A%20%20%20%20%20%20var%20a33%20%3D%20this.col3.z%3B%0A%20%20%20%20%20%20var%20det%20%3D%0A%20%20%20%20%20%20%20%20a11%20*%20(a22%20*%20a33%20-%20a32%20*%20a23)%20%2B%0A%20%20%20%20%20%20%20%20a21%20*%20(a32%20*%20a13%20-%20a12%20*%20a33)%20%2B%0A%20%20%20%20%20%20%20%20a31%20*%20(a12%20*%20a23%20-%20a22%20*%20a13)%3B%0A%20%20%20%20%20%20if%20(det%20!%3D%200.0)%20%7B%0A%20%20%20%20%20%20%20%20det%20%3D%201.0%20%2F%20det%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20out.x%20%3D%0A%20%20%20%20%20%20%20%20det%20*%0A%20%20%20%20%20%20%20%20(bX%20*%20(a22%20*%20a33%20-%20a32%20*%20a23)%20%2B%0A%20%20%20%20%20%20%20%20%20%20bY%20*%20(a32%20*%20a13%20-%20a12%20*%20a33)%20%2B%0A%20%20%20%20%20%20%20%20%20%20bZ%20*%20(a12%20*%20a23%20-%20a22%20*%20a13))%3B%0A%20%20%20%20%20%20out.y%20%3D%0A%20%20%20%20%20%20%20%20det%20*%0A%20%20%20%20%20%20%20%20(a11%20*%20(bY%20*%20a33%20-%20bZ%20*%20a23)%20%2B%0A%20%20%20%20%20%20%20%20%20%20a21%20*%20(bZ%20*%20a13%20-%20bX%20*%20a33)%20%2B%0A%20%20%20%20%20%20%20%20%20%20a31%20*%20(bX%20*%20a23%20-%20bY%20*%20a13))%3B%0A%20%20%20%20%20%20out.z%20%3D%0A%20%20%20%20%20%20%20%20det%20*%0A%20%20%20%20%20%20%20%20(a11%20*%20(a22%20*%20bZ%20-%20a32%20*%20bY)%20%2B%0A%20%20%20%20%20%20%20%20%20%20a21%20*%20(a32%20*%20bX%20-%20a12%20*%20bZ)%20%2B%0A%20%20%20%20%20%20%20%20%20%20a31%20*%20(a12%20*%20bY%20-%20a22%20*%20bX))%3B%0A%20%20%20%20%20%20return%20out%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2Math.b2Math%20%3D%20function%20()%20%7B%7D%3B%0A%20%20%20%20b2Math.IsValid%20%3D%20function%20(x)%20%7B%0A%20%20%20%20%20%20if%20(x%20%3D%3D%3D%20undefined)%20x%20%3D%200%3B%0A%20%20%20%20%20%20return%20isFinite(x)%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2Math.Dot%20%3D%20function%20(a%2C%20b)%20%7B%0A%20%20%20%20%20%20return%20a.x%20*%20b.x%20%2B%20a.y%20*%20b.y%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2Math.CrossVV%20%3D%20function%20(a%2C%20b)%20%7B%0A%20%20%20%20%20%20return%20a.x%20*%20b.y%20-%20a.y%20*%20b.x%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2Math.CrossVF%20%3D%20function%20(a%2C%20s)%20%7B%0A%20%20%20%20%20%20if%20(s%20%3D%3D%3D%20undefined)%20s%20%3D%200%3B%0A%20%20%20%20%20%20var%20v%20%3D%20new%20b2Vec2(s%20*%20a.y%2C%20-s%20*%20a.x)%3B%0A%20%20%20%20%20%20return%20v%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2Math.CrossFV%20%3D%20function%20(s%2C%20a)%20%7B%0A%20%20%20%20%20%20if%20(s%20%3D%3D%3D%20undefined)%20s%20%3D%200%3B%0A%20%20%20%20%20%20var%20v%20%3D%20new%20b2Vec2(-s%20*%20a.y%2C%20s%20*%20a.x)%3B%0A%20%20%20%20%20%20return%20v%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2Math.MulMV%20%3D%20function%20(A%2C%20v)%20%7B%0A%20%20%20%20%20%20var%20u%20%3D%20new%20b2Vec2(%0A%20%20%20%20%20%20%20%20A.col1.x%20*%20v.x%20%2B%20A.col2.x%20*%20v.y%2C%0A%20%20%20%20%20%20%20%20A.col1.y%20*%20v.x%20%2B%20A.col2.y%20*%20v.y%0A%20%20%20%20%20%20)%3B%0A%20%20%20%20%20%20return%20u%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2Math.MulTMV%20%3D%20function%20(A%2C%20v)%20%7B%0A%20%20%20%20%20%20var%20u%20%3D%20new%20b2Vec2(b2Math.Dot(v%2C%20A.col1)%2C%20b2Math.Dot(v%2C%20A.col2))%3B%0A%20%20%20%20%20%20return%20u%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2Math.MulX%20%3D%20function%20(T%2C%20v)%20%7B%0A%20%20%20%20%20%20var%20a%20%3D%20b2Math.MulMV(T.R%2C%20v)%3B%0A%20%20%20%20%20%20a.x%20%2B%3D%20T.position.x%3B%0A%20%20%20%20%20%20a.y%20%2B%3D%20T.position.y%3B%0A%20%20%20%20%20%20return%20a%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2Math.MulXT%20%3D%20function%20(T%2C%20v)%20%7B%0A%20%20%20%20%20%20var%20a%20%3D%20b2Math.SubtractVV(v%2C%20T.position)%3B%0A%20%20%20%20%20%20var%20tX%20%3D%20a.x%20*%20T.R.col1.x%20%2B%20a.y%20*%20T.R.col1.y%3B%0A%20%20%20%20%20%20a.y%20%3D%20a.x%20*%20T.R.col2.x%20%2B%20a.y%20*%20T.R.col2.y%3B%0A%20%20%20%20%20%20a.x%20%3D%20tX%3B%0A%20%20%20%20%20%20return%20a%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2Math.AddVV%20%3D%20function%20(a%2C%20b)%20%7B%0A%20%20%20%20%20%20var%20v%20%3D%20new%20b2Vec2(a.x%20%2B%20b.x%2C%20a.y%20%2B%20b.y)%3B%0A%20%20%20%20%20%20return%20v%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2Math.SubtractVV%20%3D%20function%20(a%2C%20b)%20%7B%0A%20%20%20%20%20%20var%20v%20%3D%20new%20b2Vec2(a.x%20-%20b.x%2C%20a.y%20-%20b.y)%3B%0A%20%20%20%20%20%20return%20v%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2Math.Distance%20%3D%20function%20(a%2C%20b)%20%7B%0A%20%20%20%20%20%20var%20cX%20%3D%20a.x%20-%20b.x%3B%0A%20%20%20%20%20%20var%20cY%20%3D%20a.y%20-%20b.y%3B%0A%20%20%20%20%20%20return%20Math.sqrt(cX%20*%20cX%20%2B%20cY%20*%20cY)%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2Math.DistanceSquared%20%3D%20function%20(a%2C%20b)%20%7B%0A%20%20%20%20%20%20var%20cX%20%3D%20a.x%20-%20b.x%3B%0A%20%20%20%20%20%20var%20cY%20%3D%20a.y%20-%20b.y%3B%0A%20%20%20%20%20%20return%20cX%20*%20cX%20%2B%20cY%20*%20cY%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2Math.MulFV%20%3D%20function%20(s%2C%20a)%20%7B%0A%20%20%20%20%20%20if%20(s%20%3D%3D%3D%20undefined)%20s%20%3D%200%3B%0A%20%20%20%20%20%20var%20v%20%3D%20new%20b2Vec2(s%20*%20a.x%2C%20s%20*%20a.y)%3B%0A%20%20%20%20%20%20return%20v%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2Math.AddMM%20%3D%20function%20(A%2C%20B)%20%7B%0A%20%20%20%20%20%20var%20C%20%3D%20b2Mat22.FromVV(%0A%20%20%20%20%20%20%20%20b2Math.AddVV(A.col1%2C%20B.col1)%2C%0A%20%20%20%20%20%20%20%20b2Math.AddVV(A.col2%2C%20B.col2)%0A%20%20%20%20%20%20)%3B%0A%20%20%20%20%20%20return%20C%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2Math.MulMM%20%3D%20function%20(A%2C%20B)%20%7B%0A%20%20%20%20%20%20var%20C%20%3D%20b2Mat22.FromVV(b2Math.MulMV(A%2C%20B.col1)%2C%20b2Math.MulMV(A%2C%20B.col2))%3B%0A%20%20%20%20%20%20return%20C%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2Math.MulTMM%20%3D%20function%20(A%2C%20B)%20%7B%0A%20%20%20%20%20%20var%20c1%20%3D%20new%20b2Vec2(%0A%20%20%20%20%20%20%20%20b2Math.Dot(A.col1%2C%20B.col1)%2C%0A%20%20%20%20%20%20%20%20b2Math.Dot(A.col2%2C%20B.col1)%0A%20%20%20%20%20%20)%3B%0A%20%20%20%20%20%20var%20c2%20%3D%20new%20b2Vec2(%0A%20%20%20%20%20%20%20%20b2Math.Dot(A.col1%2C%20B.col2)%2C%0A%20%20%20%20%20%20%20%20b2Math.Dot(A.col2%2C%20B.col2)%0A%20%20%20%20%20%20)%3B%0A%20%20%20%20%20%20var%20C%20%3D%20b2Mat22.FromVV(c1%2C%20c2)%3B%0A%20%20%20%20%20%20return%20C%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2Math.Abs%20%3D%20function%20(a)%20%7B%0A%20%20%20%20%20%20if%20(a%20%3D%3D%3D%20undefined)%20a%20%3D%200%3B%0A%20%20%20%20%20%20return%20a%20%3E%200.0%20%3F%20a%20%3A%20-a%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2Math.AbsV%20%3D%20function%20(a)%20%7B%0A%20%20%20%20%20%20var%20b%20%3D%20new%20b2Vec2(b2Math.Abs(a.x)%2C%20b2Math.Abs(a.y))%3B%0A%20%20%20%20%20%20return%20b%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2Math.AbsM%20%3D%20function%20(A)%20%7B%0A%20%20%20%20%20%20var%20B%20%3D%20b2Mat22.FromVV(b2Math.AbsV(A.col1)%2C%20b2Math.AbsV(A.col2))%3B%0A%20%20%20%20%20%20return%20B%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2Math.Min%20%3D%20function%20(a%2C%20b)%20%7B%0A%20%20%20%20%20%20if%20(a%20%3D%3D%3D%20undefined)%20a%20%3D%200%3B%0A%20%20%20%20%20%20if%20(b%20%3D%3D%3D%20undefined)%20b%20%3D%200%3B%0A%20%20%20%20%20%20return%20a%20%3C%20b%20%3F%20a%20%3A%20b%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2Math.MinV%20%3D%20function%20(a%2C%20b)%20%7B%0A%20%20%20%20%20%20var%20c%20%3D%20new%20b2Vec2(b2Math.Min(a.x%2C%20b.x)%2C%20b2Math.Min(a.y%2C%20b.y))%3B%0A%20%20%20%20%20%20return%20c%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2Math.Max%20%3D%20function%20(a%2C%20b)%20%7B%0A%20%20%20%20%20%20if%20(a%20%3D%3D%3D%20undefined)%20a%20%3D%200%3B%0A%20%20%20%20%20%20if%20(b%20%3D%3D%3D%20undefined)%20b%20%3D%200%3B%0A%20%20%20%20%20%20return%20a%20%3E%20b%20%3F%20a%20%3A%20b%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2Math.MaxV%20%3D%20function%20(a%2C%20b)%20%7B%0A%20%20%20%20%20%20var%20c%20%3D%20new%20b2Vec2(b2Math.Max(a.x%2C%20b.x)%2C%20b2Math.Max(a.y%2C%20b.y))%3B%0A%20%20%20%20%20%20return%20c%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2Math.Clamp%20%3D%20function%20(a%2C%20low%2C%20high)%20%7B%0A%20%20%20%20%20%20if%20(a%20%3D%3D%3D%20undefined)%20a%20%3D%200%3B%0A%20%20%20%20%20%20if%20(low%20%3D%3D%3D%20undefined)%20low%20%3D%200%3B%0A%20%20%20%20%20%20if%20(high%20%3D%3D%3D%20undefined)%20high%20%3D%200%3B%0A%20%20%20%20%20%20return%20a%20%3C%20low%20%3F%20low%20%3A%20a%20%3E%20high%20%3F%20high%20%3A%20a%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2Math.ClampV%20%3D%20function%20(a%2C%20low%2C%20high)%20%7B%0A%20%20%20%20%20%20return%20b2Math.MaxV(low%2C%20b2Math.MinV(a%2C%20high))%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2Math.Swap%20%3D%20function%20(a%2C%20b)%20%7B%0A%20%20%20%20%20%20var%20tmp%20%3D%20a%5B0%5D%3B%0A%20%20%20%20%20%20a%5B0%5D%20%3D%20b%5B0%5D%3B%0A%20%20%20%20%20%20b%5B0%5D%20%3D%20tmp%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2Math.Random%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20return%20Math.random()%20*%202%20-%201%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2Math.RandomRange%20%3D%20function%20(lo%2C%20hi)%20%7B%0A%20%20%20%20%20%20if%20(lo%20%3D%3D%3D%20undefined)%20lo%20%3D%200%3B%0A%20%20%20%20%20%20if%20(hi%20%3D%3D%3D%20undefined)%20hi%20%3D%200%3B%0A%20%20%20%20%20%20var%20r%20%3D%20Math.random()%3B%0A%20%20%20%20%20%20r%20%3D%20(hi%20-%20lo)%20*%20r%20%2B%20lo%3B%0A%20%20%20%20%20%20return%20r%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2Math.NextPowerOfTwo%20%3D%20function%20(x)%20%7B%0A%20%20%20%20%20%20if%20(x%20%3D%3D%3D%20undefined)%20x%20%3D%200%3B%0A%20%20%20%20%20%20x%20%7C%3D%20(x%20%3E%3E%201)%20%26%200x7fffffff%3B%0A%20%20%20%20%20%20x%20%7C%3D%20(x%20%3E%3E%202)%20%26%200x3fffffff%3B%0A%20%20%20%20%20%20x%20%7C%3D%20(x%20%3E%3E%204)%20%26%200x0fffffff%3B%0A%20%20%20%20%20%20x%20%7C%3D%20(x%20%3E%3E%208)%20%26%200x00ffffff%3B%0A%20%20%20%20%20%20x%20%7C%3D%20(x%20%3E%3E%2016)%20%26%200x0000ffff%3B%0A%20%20%20%20%20%20return%20x%20%2B%201%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2Math.IsPowerOfTwo%20%3D%20function%20(x)%20%7B%0A%20%20%20%20%20%20if%20(x%20%3D%3D%3D%20undefined)%20x%20%3D%200%3B%0A%20%20%20%20%20%20var%20result%20%3D%20x%20%3E%200%20%26%26%20(x%20%26%20(x%20-%201))%20%3D%3D%200%3B%0A%20%20%20%20%20%20return%20result%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20Box2D.postDefs.push(function%20()%20%7B%0A%20%20%20%20%20%20Box2D.Common.Math.b2Math.b2Vec2_zero%20%3D%20new%20b2Vec2(0.0%2C%200.0)%3B%0A%20%20%20%20%20%20Box2D.Common.Math.b2Math.b2Mat22_identity%20%3D%20b2Mat22.FromVV(%0A%20%20%20%20%20%20%20%20new%20b2Vec2(1.0%2C%200.0)%2C%0A%20%20%20%20%20%20%20%20new%20b2Vec2(0.0%2C%201.0)%0A%20%20%20%20%20%20)%3B%0A%20%20%20%20%20%20Box2D.Common.Math.b2Math.b2Transform_identity%20%3D%20new%20b2Transform(%0A%20%20%20%20%20%20%20%20b2Math.b2Vec2_zero%2C%0A%20%20%20%20%20%20%20%20b2Math.b2Mat22_identity%0A%20%20%20%20%20%20)%3B%0A%20%20%20%20%7D)%3B%0A%20%20%20%20b2Sweep.b2Sweep%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20this.localCenter%20%3D%20new%20b2Vec2()%3B%0A%20%20%20%20%20%20this.c0%20%3D%20new%20b2Vec2()%3B%0A%20%20%20%20%20%20this.c%20%3D%20new%20b2Vec2()%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2Sweep.prototype.Set%20%3D%20function%20(other)%20%7B%0A%20%20%20%20%20%20this.localCenter.SetV(other.localCenter)%3B%0A%20%20%20%20%20%20this.c0.SetV(other.c0)%3B%0A%20%20%20%20%20%20this.c.SetV(other.c)%3B%0A%20%20%20%20%20%20this.a0%20%3D%20other.a0%3B%0A%20%20%20%20%20%20this.a%20%3D%20other.a%3B%0A%20%20%20%20%20%20this.t0%20%3D%20other.t0%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2Sweep.prototype.Copy%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20var%20copy%20%3D%20new%20b2Sweep()%3B%0A%20%20%20%20%20%20copy.localCenter.SetV(this.localCenter)%3B%0A%20%20%20%20%20%20copy.c0.SetV(this.c0)%3B%0A%20%20%20%20%20%20copy.c.SetV(this.c)%3B%0A%20%20%20%20%20%20copy.a0%20%3D%20this.a0%3B%0A%20%20%20%20%20%20copy.a%20%3D%20this.a%3B%0A%20%20%20%20%20%20copy.t0%20%3D%20this.t0%3B%0A%20%20%20%20%20%20return%20copy%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2Sweep.prototype.GetTransform%20%3D%20function%20(xf%2C%20alpha)%20%7B%0A%20%20%20%20%20%20if%20(alpha%20%3D%3D%3D%20undefined)%20alpha%20%3D%200%3B%0A%20%20%20%20%20%20xf.position.x%20%3D%20(1.0%20-%20alpha)%20*%20this.c0.x%20%2B%20alpha%20*%20this.c.x%3B%0A%20%20%20%20%20%20xf.position.y%20%3D%20(1.0%20-%20alpha)%20*%20this.c0.y%20%2B%20alpha%20*%20this.c.y%3B%0A%20%20%20%20%20%20var%20angle%20%3D%20(1.0%20-%20alpha)%20*%20this.a0%20%2B%20alpha%20*%20this.a%3B%0A%20%20%20%20%20%20xf.R.Set(angle)%3B%0A%20%20%20%20%20%20var%20tMat%20%3D%20xf.R%3B%0A%20%20%20%20%20%20xf.position.x%20-%3D%0A%20%20%20%20%20%20%20%20tMat.col1.x%20*%20this.localCenter.x%20%2B%20tMat.col2.x%20*%20this.localCenter.y%3B%0A%20%20%20%20%20%20xf.position.y%20-%3D%0A%20%20%20%20%20%20%20%20tMat.col1.y%20*%20this.localCenter.x%20%2B%20tMat.col2.y%20*%20this.localCenter.y%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2Sweep.prototype.Advance%20%3D%20function%20(t)%20%7B%0A%20%20%20%20%20%20if%20(t%20%3D%3D%3D%20undefined)%20t%20%3D%200%3B%0A%20%20%20%20%20%20if%20(this.t0%20%3C%20t%20%26%26%201.0%20-%20this.t0%20%3E%20Number.MIN_VALUE)%20%7B%0A%20%20%20%20%20%20%20%20var%20alpha%20%3D%20(t%20-%20this.t0)%20%2F%20(1.0%20-%20this.t0)%3B%0A%20%20%20%20%20%20%20%20this.c0.x%20%3D%20(1.0%20-%20alpha)%20*%20this.c0.x%20%2B%20alpha%20*%20this.c.x%3B%0A%20%20%20%20%20%20%20%20this.c0.y%20%3D%20(1.0%20-%20alpha)%20*%20this.c0.y%20%2B%20alpha%20*%20this.c.y%3B%0A%20%20%20%20%20%20%20%20this.a0%20%3D%20(1.0%20-%20alpha)%20*%20this.a0%20%2B%20alpha%20*%20this.a%3B%0A%20%20%20%20%20%20%20%20this.t0%20%3D%20t%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2Transform.b2Transform%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20this.position%20%3D%20new%20b2Vec2()%3B%0A%20%20%20%20%20%20this.R%20%3D%20new%20b2Mat22()%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2Transform.prototype.b2Transform%20%3D%20function%20(pos%2C%20r)%20%7B%0A%20%20%20%20%20%20if%20(pos%20%3D%3D%3D%20undefined)%20pos%20%3D%20null%3B%0A%20%20%20%20%20%20if%20(r%20%3D%3D%3D%20undefined)%20r%20%3D%20null%3B%0A%20%20%20%20%20%20if%20(pos)%20%7B%0A%20%20%20%20%20%20%20%20this.position.SetV(pos)%3B%0A%20%20%20%20%20%20%20%20this.R.SetM(r)%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2Transform.prototype.Initialize%20%3D%20function%20(pos%2C%20r)%20%7B%0A%20%20%20%20%20%20this.position.SetV(pos)%3B%0A%20%20%20%20%20%20this.R.SetM(r)%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2Transform.prototype.SetIdentity%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20this.position.SetZero()%3B%0A%20%20%20%20%20%20this.R.SetIdentity()%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2Transform.prototype.Set%20%3D%20function%20(x)%20%7B%0A%20%20%20%20%20%20this.position.SetV(x.position)%3B%0A%20%20%20%20%20%20this.R.SetM(x.R)%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2Transform.prototype.GetAngle%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20return%20Math.atan2(this.R.col1.y%2C%20this.R.col1.x)%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2Vec2.b2Vec2%20%3D%20function%20()%20%7B%7D%3B%0A%20%20%20%20b2Vec2.prototype.b2Vec2%20%3D%20function%20(x_%2C%20y_)%20%7B%0A%20%20%20%20%20%20if%20(x_%20%3D%3D%3D%20undefined)%20x_%20%3D%200%3B%0A%20%20%20%20%20%20if%20(y_%20%3D%3D%3D%20undefined)%20y_%20%3D%200%3B%0A%20%20%20%20%20%20this.x%20%3D%20x_%3B%0A%20%20%20%20%20%20this.y%20%3D%20y_%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2Vec2.prototype.SetZero%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20this.x%20%3D%200.0%3B%0A%20%20%20%20%20%20this.y%20%3D%200.0%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2Vec2.prototype.Set%20%3D%20function%20(x_%2C%20y_)%20%7B%0A%20%20%20%20%20%20if%20(x_%20%3D%3D%3D%20undefined)%20x_%20%3D%200%3B%0A%20%20%20%20%20%20if%20(y_%20%3D%3D%3D%20undefined)%20y_%20%3D%200%3B%0A%20%20%20%20%20%20this.x%20%3D%20x_%3B%0A%20%20%20%20%20%20this.y%20%3D%20y_%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2Vec2.prototype.SetV%20%3D%20function%20(v)%20%7B%0A%20%20%20%20%20%20this.x%20%3D%20v.x%3B%0A%20%20%20%20%20%20this.y%20%3D%20v.y%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2Vec2.prototype.GetNegative%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20return%20new%20b2Vec2(-this.x%2C%20-this.y)%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2Vec2.prototype.NegativeSelf%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20this.x%20%3D%20-this.x%3B%0A%20%20%20%20%20%20this.y%20%3D%20-this.y%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2Vec2.Make%20%3D%20function%20(x_%2C%20y_)%20%7B%0A%20%20%20%20%20%20if%20(x_%20%3D%3D%3D%20undefined)%20x_%20%3D%200%3B%0A%20%20%20%20%20%20if%20(y_%20%3D%3D%3D%20undefined)%20y_%20%3D%200%3B%0A%20%20%20%20%20%20return%20new%20b2Vec2(x_%2C%20y_)%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2Vec2.prototype.Copy%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20return%20new%20b2Vec2(this.x%2C%20this.y)%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2Vec2.prototype.Add%20%3D%20function%20(v)%20%7B%0A%20%20%20%20%20%20this.x%20%2B%3D%20v.x%3B%0A%20%20%20%20%20%20this.y%20%2B%3D%20v.y%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2Vec2.prototype.Subtract%20%3D%20function%20(v)%20%7B%0A%20%20%20%20%20%20this.x%20-%3D%20v.x%3B%0A%20%20%20%20%20%20this.y%20-%3D%20v.y%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2Vec2.prototype.Multiply%20%3D%20function%20(a)%20%7B%0A%20%20%20%20%20%20if%20(a%20%3D%3D%3D%20undefined)%20a%20%3D%200%3B%0A%20%20%20%20%20%20this.x%20*%3D%20a%3B%0A%20%20%20%20%20%20this.y%20*%3D%20a%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2Vec2.prototype.MulM%20%3D%20function%20(A)%20%7B%0A%20%20%20%20%20%20var%20tX%20%3D%20this.x%3B%0A%20%20%20%20%20%20this.x%20%3D%20A.col1.x%20*%20tX%20%2B%20A.col2.x%20*%20this.y%3B%0A%20%20%20%20%20%20this.y%20%3D%20A.col1.y%20*%20tX%20%2B%20A.col2.y%20*%20this.y%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2Vec2.prototype.MulTM%20%3D%20function%20(A)%20%7B%0A%20%20%20%20%20%20var%20tX%20%3D%20b2Math.Dot(this%2C%20A.col1)%3B%0A%20%20%20%20%20%20this.y%20%3D%20b2Math.Dot(this%2C%20A.col2)%3B%0A%20%20%20%20%20%20this.x%20%3D%20tX%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2Vec2.prototype.CrossVF%20%3D%20function%20(s)%20%7B%0A%20%20%20%20%20%20if%20(s%20%3D%3D%3D%20undefined)%20s%20%3D%200%3B%0A%20%20%20%20%20%20var%20tX%20%3D%20this.x%3B%0A%20%20%20%20%20%20this.x%20%3D%20s%20*%20this.y%3B%0A%20%20%20%20%20%20this.y%20%3D%20-s%20*%20tX%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2Vec2.prototype.CrossFV%20%3D%20function%20(s)%20%7B%0A%20%20%20%20%20%20if%20(s%20%3D%3D%3D%20undefined)%20s%20%3D%200%3B%0A%20%20%20%20%20%20var%20tX%20%3D%20this.x%3B%0A%20%20%20%20%20%20this.x%20%3D%20-s%20*%20this.y%3B%0A%20%20%20%20%20%20this.y%20%3D%20s%20*%20tX%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2Vec2.prototype.MinV%20%3D%20function%20(b)%20%7B%0A%20%20%20%20%20%20this.x%20%3D%20this.x%20%3C%20b.x%20%3F%20this.x%20%3A%20b.x%3B%0A%20%20%20%20%20%20this.y%20%3D%20this.y%20%3C%20b.y%20%3F%20this.y%20%3A%20b.y%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2Vec2.prototype.MaxV%20%3D%20function%20(b)%20%7B%0A%20%20%20%20%20%20this.x%20%3D%20this.x%20%3E%20b.x%20%3F%20this.x%20%3A%20b.x%3B%0A%20%20%20%20%20%20this.y%20%3D%20this.y%20%3E%20b.y%20%3F%20this.y%20%3A%20b.y%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2Vec2.prototype.Abs%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20if%20(this.x%20%3C%200)%20this.x%20%3D%20-this.x%3B%0A%20%20%20%20%20%20if%20(this.y%20%3C%200)%20this.y%20%3D%20-this.y%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2Vec2.prototype.Length%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20return%20Math.sqrt(this.x%20*%20this.x%20%2B%20this.y%20*%20this.y)%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2Vec2.prototype.LengthSquared%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20return%20this.x%20*%20this.x%20%2B%20this.y%20*%20this.y%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2Vec2.prototype.Normalize%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20var%20length%20%3D%20Math.sqrt(this.x%20*%20this.x%20%2B%20this.y%20*%20this.y)%3B%0A%20%20%20%20%20%20if%20(length%20%3C%20Number.MIN_VALUE)%20%7B%0A%20%20%20%20%20%20%20%20return%200.0%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20var%20invLength%20%3D%201.0%20%2F%20length%3B%0A%20%20%20%20%20%20this.x%20*%3D%20invLength%3B%0A%20%20%20%20%20%20this.y%20*%3D%20invLength%3B%0A%20%20%20%20%20%20return%20length%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2Vec2.prototype.IsValid%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20return%20b2Math.IsValid(this.x)%20%26%26%20b2Math.IsValid(this.y)%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2Vec3.b2Vec3%20%3D%20function%20()%20%7B%7D%3B%0A%20%20%20%20b2Vec3.prototype.b2Vec3%20%3D%20function%20(x%2C%20y%2C%20z)%20%7B%0A%20%20%20%20%20%20if%20(x%20%3D%3D%3D%20undefined)%20x%20%3D%200%3B%0A%20%20%20%20%20%20if%20(y%20%3D%3D%3D%20undefined)%20y%20%3D%200%3B%0A%20%20%20%20%20%20if%20(z%20%3D%3D%3D%20undefined)%20z%20%3D%200%3B%0A%20%20%20%20%20%20this.x%20%3D%20x%3B%0A%20%20%20%20%20%20this.y%20%3D%20y%3B%0A%20%20%20%20%20%20this.z%20%3D%20z%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2Vec3.prototype.SetZero%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20this.x%20%3D%20this.y%20%3D%20this.z%20%3D%200.0%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2Vec3.prototype.Set%20%3D%20function%20(x%2C%20y%2C%20z)%20%7B%0A%20%20%20%20%20%20if%20(x%20%3D%3D%3D%20undefined)%20x%20%3D%200%3B%0A%20%20%20%20%20%20if%20(y%20%3D%3D%3D%20undefined)%20y%20%3D%200%3B%0A%20%20%20%20%20%20if%20(z%20%3D%3D%3D%20undefined)%20z%20%3D%200%3B%0A%20%20%20%20%20%20this.x%20%3D%20x%3B%0A%20%20%20%20%20%20this.y%20%3D%20y%3B%0A%20%20%20%20%20%20this.z%20%3D%20z%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2Vec3.prototype.SetV%20%3D%20function%20(v)%20%7B%0A%20%20%20%20%20%20this.x%20%3D%20v.x%3B%0A%20%20%20%20%20%20this.y%20%3D%20v.y%3B%0A%20%20%20%20%20%20this.z%20%3D%20v.z%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2Vec3.prototype.GetNegative%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20return%20new%20b2Vec3(-this.x%2C%20-this.y%2C%20-this.z)%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2Vec3.prototype.NegativeSelf%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20this.x%20%3D%20-this.x%3B%0A%20%20%20%20%20%20this.y%20%3D%20-this.y%3B%0A%20%20%20%20%20%20this.z%20%3D%20-this.z%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2Vec3.prototype.Copy%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20return%20new%20b2Vec3(this.x%2C%20this.y%2C%20this.z)%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2Vec3.prototype.Add%20%3D%20function%20(v)%20%7B%0A%20%20%20%20%20%20this.x%20%2B%3D%20v.x%3B%0A%20%20%20%20%20%20this.y%20%2B%3D%20v.y%3B%0A%20%20%20%20%20%20this.z%20%2B%3D%20v.z%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2Vec3.prototype.Subtract%20%3D%20function%20(v)%20%7B%0A%20%20%20%20%20%20this.x%20-%3D%20v.x%3B%0A%20%20%20%20%20%20this.y%20-%3D%20v.y%3B%0A%20%20%20%20%20%20this.z%20-%3D%20v.z%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2Vec3.prototype.Multiply%20%3D%20function%20(a)%20%7B%0A%20%20%20%20%20%20if%20(a%20%3D%3D%3D%20undefined)%20a%20%3D%200%3B%0A%20%20%20%20%20%20this.x%20*%3D%20a%3B%0A%20%20%20%20%20%20this.y%20*%3D%20a%3B%0A%20%20%20%20%20%20this.z%20*%3D%20a%3B%0A%20%20%20%20%7D%3B%0A%20%20%7D)()%3B%0A%20%20(function%20()%20%7B%0A%20%20%20%20var%20b2ControllerEdge%20%3D%20Box2D.Dynamics.Controllers.b2ControllerEdge%2C%0A%20%20%20%20%20%20b2Mat22%20%3D%20Box2D.Common.Math.b2Mat22%2C%0A%20%20%20%20%20%20b2Mat33%20%3D%20Box2D.Common.Math.b2Mat33%2C%0A%20%20%20%20%20%20b2Math%20%3D%20Box2D.Common.Math.b2Math%2C%0A%20%20%20%20%20%20b2Sweep%20%3D%20Box2D.Common.Math.b2Sweep%2C%0A%20%20%20%20%20%20b2Transform%20%3D%20Box2D.Common.Math.b2Transform%2C%0A%20%20%20%20%20%20b2Vec2%20%3D%20Box2D.Common.Math.b2Vec2%2C%0A%20%20%20%20%20%20b2Vec3%20%3D%20Box2D.Common.Math.b2Vec3%2C%0A%20%20%20%20%20%20b2Color%20%3D%20Box2D.Common.b2Color%2C%0A%20%20%20%20%20%20b2internal%20%3D%20Box2D.Common.b2internal%2C%0A%20%20%20%20%20%20b2Settings%20%3D%20Box2D.Common.b2Settings%2C%0A%20%20%20%20%20%20b2AABB%20%3D%20Box2D.Collision.b2AABB%2C%0A%20%20%20%20%20%20b2Bound%20%3D%20Box2D.Collision.b2Bound%2C%0A%20%20%20%20%20%20b2BoundValues%20%3D%20Box2D.Collision.b2BoundValues%2C%0A%20%20%20%20%20%20b2Collision%20%3D%20Box2D.Collision.b2Collision%2C%0A%20%20%20%20%20%20b2ContactID%20%3D%20Box2D.Collision.b2ContactID%2C%0A%20%20%20%20%20%20b2ContactPoint%20%3D%20Box2D.Collision.b2ContactPoint%2C%0A%20%20%20%20%20%20b2Distance%20%3D%20Box2D.Collision.b2Distance%2C%0A%20%20%20%20%20%20b2DistanceInput%20%3D%20Box2D.Collision.b2DistanceInput%2C%0A%20%20%20%20%20%20b2DistanceOutput%20%3D%20Box2D.Collision.b2DistanceOutput%2C%0A%20%20%20%20%20%20b2DistanceProxy%20%3D%20Box2D.Collision.b2DistanceProxy%2C%0A%20%20%20%20%20%20b2DynamicTree%20%3D%20Box2D.Collision.b2DynamicTree%2C%0A%20%20%20%20%20%20b2DynamicTreeBroadPhase%20%3D%20Box2D.Collision.b2DynamicTreeBroadPhase%2C%0A%20%20%20%20%20%20b2DynamicTreeNode%20%3D%20Box2D.Collision.b2DynamicTreeNode%2C%0A%20%20%20%20%20%20b2DynamicTreePair%20%3D%20Box2D.Collision.b2DynamicTreePair%2C%0A%20%20%20%20%20%20b2Manifold%20%3D%20Box2D.Collision.b2Manifold%2C%0A%20%20%20%20%20%20b2ManifoldPoint%20%3D%20Box2D.Collision.b2ManifoldPoint%2C%0A%20%20%20%20%20%20b2Point%20%3D%20Box2D.Collision.b2Point%2C%0A%20%20%20%20%20%20b2RayCastInput%20%3D%20Box2D.Collision.b2RayCastInput%2C%0A%20%20%20%20%20%20b2RayCastOutput%20%3D%20Box2D.Collision.b2RayCastOutput%2C%0A%20%20%20%20%20%20b2Segment%20%3D%20Box2D.Collision.b2Segment%2C%0A%20%20%20%20%20%20b2SeparationFunction%20%3D%20Box2D.Collision.b2SeparationFunction%2C%0A%20%20%20%20%20%20b2Simplex%20%3D%20Box2D.Collision.b2Simplex%2C%0A%20%20%20%20%20%20b2SimplexCache%20%3D%20Box2D.Collision.b2SimplexCache%2C%0A%20%20%20%20%20%20b2SimplexVertex%20%3D%20Box2D.Collision.b2SimplexVertex%2C%0A%20%20%20%20%20%20b2TimeOfImpact%20%3D%20Box2D.Collision.b2TimeOfImpact%2C%0A%20%20%20%20%20%20b2TOIInput%20%3D%20Box2D.Collision.b2TOIInput%2C%0A%20%20%20%20%20%20b2WorldManifold%20%3D%20Box2D.Collision.b2WorldManifold%2C%0A%20%20%20%20%20%20ClipVertex%20%3D%20Box2D.Collision.ClipVertex%2C%0A%20%20%20%20%20%20Features%20%3D%20Box2D.Collision.Features%2C%0A%20%20%20%20%20%20IBroadPhase%20%3D%20Box2D.Collision.IBroadPhase%2C%0A%20%20%20%20%20%20b2CircleShape%20%3D%20Box2D.Collision.Shapes.b2CircleShape%2C%0A%20%20%20%20%20%20b2EdgeChainDef%20%3D%20Box2D.Collision.Shapes.b2EdgeChainDef%2C%0A%20%20%20%20%20%20b2EdgeShape%20%3D%20Box2D.Collision.Shapes.b2EdgeShape%2C%0A%20%20%20%20%20%20b2MassData%20%3D%20Box2D.Collision.Shapes.b2MassData%2C%0A%20%20%20%20%20%20b2PolygonShape%20%3D%20Box2D.Collision.Shapes.b2PolygonShape%2C%0A%20%20%20%20%20%20b2Shape%20%3D%20Box2D.Collision.Shapes.b2Shape%2C%0A%20%20%20%20%20%20b2Body%20%3D%20Box2D.Dynamics.b2Body%2C%0A%20%20%20%20%20%20b2BodyDef%20%3D%20Box2D.Dynamics.b2BodyDef%2C%0A%20%20%20%20%20%20b2ContactFilter%20%3D%20Box2D.Dynamics.b2ContactFilter%2C%0A%20%20%20%20%20%20b2ContactImpulse%20%3D%20Box2D.Dynamics.b2ContactImpulse%2C%0A%20%20%20%20%20%20b2ContactListener%20%3D%20Box2D.Dynamics.b2ContactListener%2C%0A%20%20%20%20%20%20b2ContactManager%20%3D%20Box2D.Dynamics.b2ContactManager%2C%0A%20%20%20%20%20%20b2DebugDraw%20%3D%20Box2D.Dynamics.b2DebugDraw%2C%0A%20%20%20%20%20%20b2DestructionListener%20%3D%20Box2D.Dynamics.b2DestructionListener%2C%0A%20%20%20%20%20%20b2FilterData%20%3D%20Box2D.Dynamics.b2FilterData%2C%0A%20%20%20%20%20%20b2Fixture%20%3D%20Box2D.Dynamics.b2Fixture%2C%0A%20%20%20%20%20%20b2FixtureDef%20%3D%20Box2D.Dynamics.b2FixtureDef%2C%0A%20%20%20%20%20%20b2Island%20%3D%20Box2D.Dynamics.b2Island%2C%0A%20%20%20%20%20%20b2TimeStep%20%3D%20Box2D.Dynamics.b2TimeStep%2C%0A%20%20%20%20%20%20b2World%20%3D%20Box2D.Dynamics.b2World%2C%0A%20%20%20%20%20%20b2CircleContact%20%3D%20Box2D.Dynamics.Contacts.b2CircleContact%2C%0A%20%20%20%20%20%20b2Contact%20%3D%20Box2D.Dynamics.Contacts.b2Contact%2C%0A%20%20%20%20%20%20b2ContactConstraint%20%3D%20Box2D.Dynamics.Contacts.b2ContactConstraint%2C%0A%20%20%20%20%20%20b2ContactConstraintPoint%20%3D%0A%20%20%20%20%20%20%20%20Box2D.Dynamics.Contacts.b2ContactConstraintPoint%2C%0A%20%20%20%20%20%20b2ContactEdge%20%3D%20Box2D.Dynamics.Contacts.b2ContactEdge%2C%0A%20%20%20%20%20%20b2ContactFactory%20%3D%20Box2D.Dynamics.Contacts.b2ContactFactory%2C%0A%20%20%20%20%20%20b2ContactRegister%20%3D%20Box2D.Dynamics.Contacts.b2ContactRegister%2C%0A%20%20%20%20%20%20b2ContactResult%20%3D%20Box2D.Dynamics.Contacts.b2ContactResult%2C%0A%20%20%20%20%20%20b2ContactSolver%20%3D%20Box2D.Dynamics.Contacts.b2ContactSolver%2C%0A%20%20%20%20%20%20b2EdgeAndCircleContact%20%3D%20Box2D.Dynamics.Contacts.b2EdgeAndCircleContact%2C%0A%20%20%20%20%20%20b2NullContact%20%3D%20Box2D.Dynamics.Contacts.b2NullContact%2C%0A%20%20%20%20%20%20b2PolyAndCircleContact%20%3D%20Box2D.Dynamics.Contacts.b2PolyAndCircleContact%2C%0A%20%20%20%20%20%20b2PolyAndEdgeContact%20%3D%20Box2D.Dynamics.Contacts.b2PolyAndEdgeContact%2C%0A%20%20%20%20%20%20b2PolygonContact%20%3D%20Box2D.Dynamics.Contacts.b2PolygonContact%2C%0A%20%20%20%20%20%20b2PositionSolverManifold%20%3D%0A%20%20%20%20%20%20%20%20Box2D.Dynamics.Contacts.b2PositionSolverManifold%2C%0A%20%20%20%20%20%20b2Controller%20%3D%20Box2D.Dynamics.Controllers.b2Controller%2C%0A%20%20%20%20%20%20b2DistanceJoint%20%3D%20Box2D.Dynamics.Joints.b2DistanceJoint%2C%0A%20%20%20%20%20%20b2DistanceJointDef%20%3D%20Box2D.Dynamics.Joints.b2DistanceJointDef%2C%0A%20%20%20%20%20%20b2FrictionJoint%20%3D%20Box2D.Dynamics.Joints.b2FrictionJoint%2C%0A%20%20%20%20%20%20b2FrictionJointDef%20%3D%20Box2D.Dynamics.Joints.b2FrictionJointDef%2C%0A%20%20%20%20%20%20b2GearJoint%20%3D%20Box2D.Dynamics.Joints.b2GearJoint%2C%0A%20%20%20%20%20%20b2GearJointDef%20%3D%20Box2D.Dynamics.Joints.b2GearJointDef%2C%0A%20%20%20%20%20%20b2Jacobian%20%3D%20Box2D.Dynamics.Joints.b2Jacobian%2C%0A%20%20%20%20%20%20b2Joint%20%3D%20Box2D.Dynamics.Joints.b2Joint%2C%0A%20%20%20%20%20%20b2JointDef%20%3D%20Box2D.Dynamics.Joints.b2JointDef%2C%0A%20%20%20%20%20%20b2JointEdge%20%3D%20Box2D.Dynamics.Joints.b2JointEdge%2C%0A%20%20%20%20%20%20b2LineJoint%20%3D%20Box2D.Dynamics.Joints.b2LineJoint%2C%0A%20%20%20%20%20%20b2LineJointDef%20%3D%20Box2D.Dynamics.Joints.b2LineJointDef%2C%0A%20%20%20%20%20%20b2MouseJoint%20%3D%20Box2D.Dynamics.Joints.b2MouseJoint%2C%0A%20%20%20%20%20%20b2MouseJointDef%20%3D%20Box2D.Dynamics.Joints.b2MouseJointDef%2C%0A%20%20%20%20%20%20b2PrismaticJoint%20%3D%20Box2D.Dynamics.Joints.b2PrismaticJoint%2C%0A%20%20%20%20%20%20b2PrismaticJointDef%20%3D%20Box2D.Dynamics.Joints.b2PrismaticJointDef%2C%0A%20%20%20%20%20%20b2PulleyJoint%20%3D%20Box2D.Dynamics.Joints.b2PulleyJoint%2C%0A%20%20%20%20%20%20b2PulleyJointDef%20%3D%20Box2D.Dynamics.Joints.b2PulleyJointDef%2C%0A%20%20%20%20%20%20b2RevoluteJoint%20%3D%20Box2D.Dynamics.Joints.b2RevoluteJoint%2C%0A%20%20%20%20%20%20b2RevoluteJointDef%20%3D%20Box2D.Dynamics.Joints.b2RevoluteJointDef%2C%0A%20%20%20%20%20%20b2WeldJoint%20%3D%20Box2D.Dynamics.Joints.b2WeldJoint%2C%0A%20%20%20%20%20%20b2WeldJointDef%20%3D%20Box2D.Dynamics.Joints.b2WeldJointDef%3B%0A%0A%20%20%20%20b2Body.b2Body%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20this.m_xf%20%3D%20new%20b2Transform()%3B%0A%20%20%20%20%20%20this.m_sweep%20%3D%20new%20b2Sweep()%3B%0A%20%20%20%20%20%20this.m_linearVelocity%20%3D%20new%20b2Vec2()%3B%0A%20%20%20%20%20%20this.m_force%20%3D%20new%20b2Vec2()%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2Body.prototype.connectEdges%20%3D%20function%20(s1%2C%20s2%2C%20angle1)%20%7B%0A%20%20%20%20%20%20if%20(angle1%20%3D%3D%3D%20undefined)%20angle1%20%3D%200%3B%0A%20%20%20%20%20%20var%20angle2%20%3D%20Math.atan2(%0A%20%20%20%20%20%20%20%20s2.GetDirectionVector().y%2C%0A%20%20%20%20%20%20%20%20s2.GetDirectionVector().x%0A%20%20%20%20%20%20)%3B%0A%20%20%20%20%20%20var%20coreOffset%20%3D%20Math.tan((angle2%20-%20angle1)%20*%200.5)%3B%0A%20%20%20%20%20%20var%20core%20%3D%20b2Math.MulFV(coreOffset%2C%20s2.GetDirectionVector())%3B%0A%20%20%20%20%20%20core%20%3D%20b2Math.SubtractVV(core%2C%20s2.GetNormalVector())%3B%0A%20%20%20%20%20%20core%20%3D%20b2Math.MulFV(b2Settings.b2_toiSlop%2C%20core)%3B%0A%20%20%20%20%20%20core%20%3D%20b2Math.AddVV(core%2C%20s2.GetVertex1())%3B%0A%20%20%20%20%20%20var%20cornerDir%20%3D%20b2Math.AddVV(%0A%20%20%20%20%20%20%20%20s1.GetDirectionVector()%2C%0A%20%20%20%20%20%20%20%20s2.GetDirectionVector()%0A%20%20%20%20%20%20)%3B%0A%20%20%20%20%20%20cornerDir.Normalize()%3B%0A%20%20%20%20%20%20var%20convex%20%3D%0A%20%20%20%20%20%20%20%20b2Math.Dot(s1.GetDirectionVector()%2C%20s2.GetNormalVector())%20%3E%200.0%3B%0A%20%20%20%20%20%20s1.SetNextEdge(s2%2C%20core%2C%20cornerDir%2C%20convex)%3B%0A%20%20%20%20%20%20s2.SetPrevEdge(s1%2C%20core%2C%20cornerDir%2C%20convex)%3B%0A%20%20%20%20%20%20return%20angle2%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2Body.prototype.CreateFixture%20%3D%20function%20(def)%20%7B%0A%20%20%20%20%20%20if%20(this.m_world.IsLocked()%20%3D%3D%20true)%20%7B%0A%20%20%20%20%20%20%20%20return%20null%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20var%20fixture%20%3D%20new%20b2Fixture()%3B%0A%20%20%20%20%20%20fixture.Create(this%2C%20this.m_xf%2C%20def)%3B%0A%20%20%20%20%20%20if%20(this.m_flags%20%26%20b2Body.e_activeFlag)%20%7B%0A%20%20%20%20%20%20%20%20var%20broadPhase%20%3D%20this.m_world.m_contactManager.m_broadPhase%3B%0A%20%20%20%20%20%20%20%20fixture.CreateProxy(broadPhase%2C%20this.m_xf)%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20fixture.m_next%20%3D%20this.m_fixtureList%3B%0A%20%20%20%20%20%20this.m_fixtureList%20%3D%20fixture%3B%0A%20%20%20%20%20%20%2B%2Bthis.m_fixtureCount%3B%0A%20%20%20%20%20%20fixture.m_body%20%3D%20this%3B%0A%20%20%20%20%20%20if%20(fixture.m_density%20%3E%200.0)%20%7B%0A%20%20%20%20%20%20%20%20this.ResetMassData()%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20this.m_world.m_flags%20%7C%3D%20b2World.e_newFixture%3B%0A%20%20%20%20%20%20return%20fixture%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2Body.prototype.CreateFixture2%20%3D%20function%20(shape%2C%20density)%20%7B%0A%20%20%20%20%20%20if%20(density%20%3D%3D%3D%20undefined)%20density%20%3D%200.0%3B%0A%20%20%20%20%20%20var%20def%20%3D%20new%20b2FixtureDef()%3B%0A%20%20%20%20%20%20def.shape%20%3D%20shape%3B%0A%20%20%20%20%20%20def.density%20%3D%20density%3B%0A%20%20%20%20%20%20return%20this.CreateFixture(def)%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2Body.prototype.DestroyFixture%20%3D%20function%20(fixture)%20%7B%0A%20%20%20%20%20%20if%20(this.m_world.IsLocked()%20%3D%3D%20true)%20%7B%0A%20%20%20%20%20%20%20%20return%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20var%20node%20%3D%20this.m_fixtureList%3B%0A%20%20%20%20%20%20var%20ppF%20%3D%20null%3B%0A%20%20%20%20%20%20var%20found%20%3D%20false%3B%0A%20%20%20%20%20%20while%20(node%20!%3D%20null)%20%7B%0A%20%20%20%20%20%20%20%20if%20(node%20%3D%3D%20fixture)%20%7B%0A%20%20%20%20%20%20%20%20%20%20if%20(ppF)%20ppF.m_next%20%3D%20fixture.m_next%3B%0A%20%20%20%20%20%20%20%20%20%20else%20this.m_fixtureList%20%3D%20fixture.m_next%3B%0A%20%20%20%20%20%20%20%20%20%20found%20%3D%20true%3B%0A%20%20%20%20%20%20%20%20%20%20break%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20ppF%20%3D%20node%3B%0A%20%20%20%20%20%20%20%20node%20%3D%20node.m_next%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20var%20edge%20%3D%20this.m_contactList%3B%0A%20%20%20%20%20%20while%20(edge)%20%7B%0A%20%20%20%20%20%20%20%20var%20c%20%3D%20edge.contact%3B%0A%20%20%20%20%20%20%20%20edge%20%3D%20edge.next%3B%0A%20%20%20%20%20%20%20%20var%20fixtureA%20%3D%20c.GetFixtureA()%3B%0A%20%20%20%20%20%20%20%20var%20fixtureB%20%3D%20c.GetFixtureB()%3B%0A%20%20%20%20%20%20%20%20if%20(fixture%20%3D%3D%20fixtureA%20%7C%7C%20fixture%20%3D%3D%20fixtureB)%20%7B%0A%20%20%20%20%20%20%20%20%20%20this.m_world.m_contactManager.Destroy(c)%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20if%20(this.m_flags%20%26%20b2Body.e_activeFlag)%20%7B%0A%20%20%20%20%20%20%20%20var%20broadPhase%20%3D%20this.m_world.m_contactManager.m_broadPhase%3B%0A%20%20%20%20%20%20%20%20fixture.DestroyProxy(broadPhase)%3B%0A%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20fixture.Destroy()%3B%0A%20%20%20%20%20%20fixture.m_body%20%3D%20null%3B%0A%20%20%20%20%20%20fixture.m_next%20%3D%20null%3B%0A%20%20%20%20%20%20--this.m_fixtureCount%3B%0A%20%20%20%20%20%20this.ResetMassData()%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2Body.prototype.SetPositionAndAngle%20%3D%20function%20(position%2C%20angle)%20%7B%0A%20%20%20%20%20%20if%20(angle%20%3D%3D%3D%20undefined)%20angle%20%3D%200%3B%0A%20%20%20%20%20%20var%20f%3B%0A%20%20%20%20%20%20if%20(this.m_world.IsLocked()%20%3D%3D%20true)%20%7B%0A%20%20%20%20%20%20%20%20return%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20this.m_xf.R.Set(angle)%3B%0A%20%20%20%20%20%20this.m_xf.position.SetV(position)%3B%0A%20%20%20%20%20%20var%20tMat%20%3D%20this.m_xf.R%3B%0A%20%20%20%20%20%20var%20tVec%20%3D%20this.m_sweep.localCenter%3B%0A%20%20%20%20%20%20this.m_sweep.c.x%20%3D%20tMat.col1.x%20*%20tVec.x%20%2B%20tMat.col2.x%20*%20tVec.y%3B%0A%20%20%20%20%20%20this.m_sweep.c.y%20%3D%20tMat.col1.y%20*%20tVec.x%20%2B%20tMat.col2.y%20*%20tVec.y%3B%0A%20%20%20%20%20%20this.m_sweep.c.x%20%2B%3D%20this.m_xf.position.x%3B%0A%20%20%20%20%20%20this.m_sweep.c.y%20%2B%3D%20this.m_xf.position.y%3B%0A%20%20%20%20%20%20this.m_sweep.c0.SetV(this.m_sweep.c)%3B%0A%20%20%20%20%20%20this.m_sweep.a0%20%3D%20this.m_sweep.a%20%3D%20angle%3B%0A%20%20%20%20%20%20var%20broadPhase%20%3D%20this.m_world.m_contactManager.m_broadPhase%3B%0A%20%20%20%20%20%20for%20(f%20%3D%20this.m_fixtureList%3B%20f%3B%20f%20%3D%20f.m_next)%20%7B%0A%20%20%20%20%20%20%20%20f.Synchronize(broadPhase%2C%20this.m_xf%2C%20this.m_xf)%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20this.m_world.m_contactManager.FindNewContacts()%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2Body.prototype.SetTransform%20%3D%20function%20(xf)%20%7B%0A%20%20%20%20%20%20this.SetPositionAndAngle(xf.position%2C%20xf.GetAngle())%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2Body.prototype.GetTransform%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20return%20this.m_xf%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2Body.prototype.GetPosition%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20return%20this.m_xf.position%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2Body.prototype.SetPosition%20%3D%20function%20(position)%20%7B%0A%20%20%20%20%20%20this.SetPositionAndAngle(position%2C%20this.GetAngle())%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2Body.prototype.GetAngle%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20return%20this.m_sweep.a%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2Body.prototype.SetAngle%20%3D%20function%20(angle)%20%7B%0A%20%20%20%20%20%20if%20(angle%20%3D%3D%3D%20undefined)%20angle%20%3D%200%3B%0A%20%20%20%20%20%20this.SetPositionAndAngle(this.GetPosition()%2C%20angle)%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2Body.prototype.GetWorldCenter%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20return%20this.m_sweep.c%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2Body.prototype.GetLocalCenter%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20return%20this.m_sweep.localCenter%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2Body.prototype.SetLinearVelocity%20%3D%20function%20(v)%20%7B%0A%20%20%20%20%20%20if%20(this.m_type%20%3D%3D%20b2Body.b2_staticBody)%20%7B%0A%20%20%20%20%20%20%20%20return%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20this.m_linearVelocity.SetV(v)%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2Body.prototype.GetLinearVelocity%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20return%20this.m_linearVelocity%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2Body.prototype.SetAngularVelocity%20%3D%20function%20(omega)%20%7B%0A%20%20%20%20%20%20if%20(omega%20%3D%3D%3D%20undefined)%20omega%20%3D%200%3B%0A%20%20%20%20%20%20if%20(this.m_type%20%3D%3D%20b2Body.b2_staticBody)%20%7B%0A%20%20%20%20%20%20%20%20return%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20this.m_angularVelocity%20%3D%20omega%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2Body.prototype.GetAngularVelocity%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20return%20this.m_angularVelocity%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2Body.prototype.GetDefinition%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20var%20bd%20%3D%20new%20b2BodyDef()%3B%0A%20%20%20%20%20%20bd.type%20%3D%20this.GetType()%3B%0A%20%20%20%20%20%20bd.allowSleep%20%3D%0A%20%20%20%20%20%20%20%20(this.m_flags%20%26%20b2Body.e_allowSleepFlag)%20%3D%3D%20b2Body.e_allowSleepFlag%3B%0A%20%20%20%20%20%20bd.angle%20%3D%20this.GetAngle()%3B%0A%20%20%20%20%20%20bd.angularDamping%20%3D%20this.m_angularDamping%3B%0A%20%20%20%20%20%20bd.angularVelocity%20%3D%20this.m_angularVelocity%3B%0A%20%20%20%20%20%20bd.fixedRotation%20%3D%0A%20%20%20%20%20%20%20%20(this.m_flags%20%26%20b2Body.e_fixedRotationFlag)%20%3D%3D%0A%20%20%20%20%20%20%20%20b2Body.e_fixedRotationFlag%3B%0A%20%20%20%20%20%20bd.bullet%20%3D%20(this.m_flags%20%26%20b2Body.e_bulletFlag)%20%3D%3D%20b2Body.e_bulletFlag%3B%0A%20%20%20%20%20%20bd.awake%20%3D%20(this.m_flags%20%26%20b2Body.e_awakeFlag)%20%3D%3D%20b2Body.e_awakeFlag%3B%0A%20%20%20%20%20%20bd.linearDamping%20%3D%20this.m_linearDamping%3B%0A%20%20%20%20%20%20bd.linearVelocity.SetV(this.GetLinearVelocity())%3B%0A%20%20%20%20%20%20bd.position%20%3D%20this.GetPosition()%3B%0A%20%20%20%20%20%20bd.userData%20%3D%20this.GetUserData()%3B%0A%20%20%20%20%20%20return%20bd%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2Body.prototype.ApplyForce%20%3D%20function%20(force%2C%20point)%20%7B%0A%20%20%20%20%20%20if%20(this.m_type%20!%3D%20b2Body.b2_dynamicBody)%20%7B%0A%20%20%20%20%20%20%20%20return%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20if%20(this.IsAwake()%20%3D%3D%20false)%20%7B%0A%20%20%20%20%20%20%20%20this.SetAwake(true)%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20this.m_force.x%20%2B%3D%20force.x%3B%0A%20%20%20%20%20%20this.m_force.y%20%2B%3D%20force.y%3B%0A%20%20%20%20%20%20this.m_torque%20%2B%3D%0A%20%20%20%20%20%20%20%20(point.x%20-%20this.m_sweep.c.x)%20*%20force.y%20-%0A%20%20%20%20%20%20%20%20(point.y%20-%20this.m_sweep.c.y)%20*%20force.x%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2Body.prototype.ApplyTorque%20%3D%20function%20(torque)%20%7B%0A%20%20%20%20%20%20if%20(torque%20%3D%3D%3D%20undefined)%20torque%20%3D%200%3B%0A%20%20%20%20%20%20if%20(this.m_type%20!%3D%20b2Body.b2_dynamicBody)%20%7B%0A%20%20%20%20%20%20%20%20return%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20if%20(this.IsAwake()%20%3D%3D%20false)%20%7B%0A%20%20%20%20%20%20%20%20this.SetAwake(true)%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20this.m_torque%20%2B%3D%20torque%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2Body.prototype.ApplyImpulse%20%3D%20function%20(impulse%2C%20point)%20%7B%0A%20%20%20%20%20%20if%20(this.m_type%20!%3D%20b2Body.b2_dynamicBody)%20%7B%0A%20%20%20%20%20%20%20%20return%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20if%20(this.IsAwake()%20%3D%3D%20false)%20%7B%0A%20%20%20%20%20%20%20%20this.SetAwake(true)%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20this.m_linearVelocity.x%20%2B%3D%20this.m_invMass%20*%20impulse.x%3B%0A%20%20%20%20%20%20this.m_linearVelocity.y%20%2B%3D%20this.m_invMass%20*%20impulse.y%3B%0A%20%20%20%20%20%20this.m_angularVelocity%20%2B%3D%0A%20%20%20%20%20%20%20%20this.m_invI%20*%0A%20%20%20%20%20%20%20%20((point.x%20-%20this.m_sweep.c.x)%20*%20impulse.y%20-%0A%20%20%20%20%20%20%20%20%20%20(point.y%20-%20this.m_sweep.c.y)%20*%20impulse.x)%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2Body.prototype.Split%20%3D%20function%20(callback)%20%7B%0A%20%20%20%20%20%20var%20linearVelocity%20%3D%20this.GetLinearVelocity().Copy()%3B%0A%20%20%20%20%20%20var%20angularVelocity%20%3D%20this.GetAngularVelocity()%3B%0A%20%20%20%20%20%20var%20center%20%3D%20this.GetWorldCenter()%3B%0A%20%20%20%20%20%20var%20body1%20%3D%20this%3B%0A%20%20%20%20%20%20var%20body2%20%3D%20this.m_world.CreateBody(this.GetDefinition())%3B%0A%20%20%20%20%20%20var%20prev%3B%0A%20%20%20%20%20%20for%20(var%20f%20%3D%20body1.m_fixtureList%3B%20f%3B%20)%20%7B%0A%20%20%20%20%20%20%20%20if%20(callback(f))%20%7B%0A%20%20%20%20%20%20%20%20%20%20var%20next%20%3D%20f.m_next%3B%0A%20%20%20%20%20%20%20%20%20%20if%20(prev)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20prev.m_next%20%3D%20next%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20body1.m_fixtureList%20%3D%20next%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20body1.m_fixtureCount--%3B%0A%20%20%20%20%20%20%20%20%20%20f.m_next%20%3D%20body2.m_fixtureList%3B%0A%20%20%20%20%20%20%20%20%20%20body2.m_fixtureList%20%3D%20f%3B%0A%20%20%20%20%20%20%20%20%20%20body2.m_fixtureCount%2B%2B%3B%0A%20%20%20%20%20%20%20%20%20%20f.m_body%20%3D%20body2%3B%0A%20%20%20%20%20%20%20%20%20%20f%20%3D%20next%3B%0A%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20prev%20%3D%20f%3B%0A%20%20%20%20%20%20%20%20%20%20f%20%3D%20f.m_next%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20body1.ResetMassData()%3B%0A%20%20%20%20%20%20body2.ResetMassData()%3B%0A%20%20%20%20%20%20var%20center1%20%3D%20body1.GetWorldCenter()%3B%0A%20%20%20%20%20%20var%20center2%20%3D%20body2.GetWorldCenter()%3B%0A%20%20%20%20%20%20var%20velocity1%20%3D%20b2Math.AddVV(%0A%20%20%20%20%20%20%20%20linearVelocity%2C%0A%20%20%20%20%20%20%20%20b2Math.CrossFV(angularVelocity%2C%20b2Math.SubtractVV(center1%2C%20center))%0A%20%20%20%20%20%20)%3B%0A%20%20%20%20%20%20var%20velocity2%20%3D%20b2Math.AddVV(%0A%20%20%20%20%20%20%20%20linearVelocity%2C%0A%20%20%20%20%20%20%20%20b2Math.CrossFV(angularVelocity%2C%20b2Math.SubtractVV(center2%2C%20center))%0A%20%20%20%20%20%20)%3B%0A%20%20%20%20%20%20body1.SetLinearVelocity(velocity1)%3B%0A%20%20%20%20%20%20body2.SetLinearVelocity(velocity2)%3B%0A%20%20%20%20%20%20body1.SetAngularVelocity(angularVelocity)%3B%0A%20%20%20%20%20%20body2.SetAngularVelocity(angularVelocity)%3B%0A%20%20%20%20%20%20body1.SynchronizeFixtures()%3B%0A%20%20%20%20%20%20body2.SynchronizeFixtures()%3B%0A%20%20%20%20%20%20return%20body2%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2Body.prototype.Merge%20%3D%20function%20(other)%20%7B%0A%20%20%20%20%20%20var%20f%3B%0A%20%20%20%20%20%20for%20(f%20%3D%20other.m_fixtureList%3B%20f%3B%20)%20%7B%0A%20%20%20%20%20%20%20%20var%20next%20%3D%20f.m_next%3B%0A%20%20%20%20%20%20%20%20other.m_fixtureCount--%3B%0A%20%20%20%20%20%20%20%20f.m_next%20%3D%20this.m_fixtureList%3B%0A%20%20%20%20%20%20%20%20this.m_fixtureList%20%3D%20f%3B%0A%20%20%20%20%20%20%20%20this.m_fixtureCount%2B%2B%3B%0A%20%20%20%20%20%20%20%20f.m_body%20%3D%20body2%3B%0A%20%20%20%20%20%20%20%20f%20%3D%20next%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20body1.m_fixtureCount%20%3D%200%3B%0A%20%20%20%20%20%20var%20body1%20%3D%20this%3B%0A%20%20%20%20%20%20var%20body2%20%3D%20other%3B%0A%20%20%20%20%20%20var%20center1%20%3D%20body1.GetWorldCenter()%3B%0A%20%20%20%20%20%20var%20center2%20%3D%20body2.GetWorldCenter()%3B%0A%20%20%20%20%20%20var%20velocity1%20%3D%20body1.GetLinearVelocity().Copy()%3B%0A%20%20%20%20%20%20var%20velocity2%20%3D%20body2.GetLinearVelocity().Copy()%3B%0A%20%20%20%20%20%20var%20angular1%20%3D%20body1.GetAngularVelocity()%3B%0A%20%20%20%20%20%20var%20angular%20%3D%20body2.GetAngularVelocity()%3B%0A%20%20%20%20%20%20body1.ResetMassData()%3B%0A%20%20%20%20%20%20this.SynchronizeFixtures()%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2Body.prototype.GetMass%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20return%20this.m_mass%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2Body.prototype.GetInertia%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20return%20this.m_I%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2Body.prototype.GetMassData%20%3D%20function%20(data)%20%7B%0A%20%20%20%20%20%20data.mass%20%3D%20this.m_mass%3B%0A%20%20%20%20%20%20data.I%20%3D%20this.m_I%3B%0A%20%20%20%20%20%20data.center.SetV(this.m_sweep.localCenter)%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2Body.prototype.SetMassData%20%3D%20function%20(massData)%20%7B%0A%20%20%20%20%20%20b2Settings.b2Assert(this.m_world.IsLocked()%20%3D%3D%20false)%3B%0A%20%20%20%20%20%20if%20(this.m_world.IsLocked()%20%3D%3D%20true)%20%7B%0A%20%20%20%20%20%20%20%20return%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20if%20(this.m_type%20!%3D%20b2Body.b2_dynamicBody)%20%7B%0A%20%20%20%20%20%20%20%20return%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20this.m_invMass%20%3D%200.0%3B%0A%20%20%20%20%20%20this.m_I%20%3D%200.0%3B%0A%20%20%20%20%20%20this.m_invI%20%3D%200.0%3B%0A%20%20%20%20%20%20this.m_mass%20%3D%20massData.mass%3B%0A%20%20%20%20%20%20if%20(this.m_mass%20%3C%3D%200.0)%20%7B%0A%20%20%20%20%20%20%20%20this.m_mass%20%3D%201.0%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20this.m_invMass%20%3D%201.0%20%2F%20this.m_mass%3B%0A%20%20%20%20%20%20if%20(%0A%20%20%20%20%20%20%20%20massData.I%20%3E%200.0%20%26%26%0A%20%20%20%20%20%20%20%20(this.m_flags%20%26%20b2Body.e_fixedRotationFlag)%20%3D%3D%200%0A%20%20%20%20%20%20)%20%7B%0A%20%20%20%20%20%20%20%20this.m_I%20%3D%0A%20%20%20%20%20%20%20%20%20%20massData.I%20-%0A%20%20%20%20%20%20%20%20%20%20this.m_mass%20*%0A%20%20%20%20%20%20%20%20%20%20%20%20(massData.center.x%20*%20massData.center.x%20%2B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20massData.center.y%20*%20massData.center.y)%3B%0A%20%20%20%20%20%20%20%20this.m_invI%20%3D%201.0%20%2F%20this.m_I%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20var%20oldCenter%20%3D%20this.m_sweep.c.Copy()%3B%0A%20%20%20%20%20%20this.m_sweep.localCenter.SetV(massData.center)%3B%0A%20%20%20%20%20%20this.m_sweep.c0.SetV(b2Math.MulX(this.m_xf%2C%20this.m_sweep.localCenter))%3B%0A%20%20%20%20%20%20this.m_sweep.c.SetV(this.m_sweep.c0)%3B%0A%20%20%20%20%20%20this.m_linearVelocity.x%20%2B%3D%0A%20%20%20%20%20%20%20%20this.m_angularVelocity%20*%20-(this.m_sweep.c.y%20-%20oldCenter.y)%3B%0A%20%20%20%20%20%20this.m_linearVelocity.y%20%2B%3D%0A%20%20%20%20%20%20%20%20this.m_angularVelocity%20*%20%2B(this.m_sweep.c.x%20-%20oldCenter.x)%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2Body.prototype.ResetMassData%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20this.m_mass%20%3D%200.0%3B%0A%20%20%20%20%20%20this.m_invMass%20%3D%200.0%3B%0A%20%20%20%20%20%20this.m_I%20%3D%200.0%3B%0A%20%20%20%20%20%20this.m_invI%20%3D%200.0%3B%0A%20%20%20%20%20%20this.m_sweep.localCenter.SetZero()%3B%0A%20%20%20%20%20%20if%20(%0A%20%20%20%20%20%20%20%20this.m_type%20%3D%3D%20b2Body.b2_staticBody%20%7C%7C%0A%20%20%20%20%20%20%20%20this.m_type%20%3D%3D%20b2Body.b2_kinematicBody%0A%20%20%20%20%20%20)%20%7B%0A%20%20%20%20%20%20%20%20return%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20var%20center%20%3D%20b2Vec2.Make(0%2C%200)%3B%0A%20%20%20%20%20%20for%20(var%20f%20%3D%20this.m_fixtureList%3B%20f%3B%20f%20%3D%20f.m_next)%20%7B%0A%20%20%20%20%20%20%20%20if%20(f.m_density%20%3D%3D%200.0)%20%7B%0A%20%20%20%20%20%20%20%20%20%20continue%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20var%20massData%20%3D%20f.GetMassData()%3B%0A%20%20%20%20%20%20%20%20this.m_mass%20%2B%3D%20massData.mass%3B%0A%20%20%20%20%20%20%20%20center.x%20%2B%3D%20massData.center.x%20*%20massData.mass%3B%0A%20%20%20%20%20%20%20%20center.y%20%2B%3D%20massData.center.y%20*%20massData.mass%3B%0A%20%20%20%20%20%20%20%20this.m_I%20%2B%3D%20massData.I%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20if%20(this.m_mass%20%3E%200.0)%20%7B%0A%20%20%20%20%20%20%20%20this.m_invMass%20%3D%201.0%20%2F%20this.m_mass%3B%0A%20%20%20%20%20%20%20%20center.x%20*%3D%20this.m_invMass%3B%0A%20%20%20%20%20%20%20%20center.y%20*%3D%20this.m_invMass%3B%0A%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20this.m_mass%20%3D%201.0%3B%0A%20%20%20%20%20%20%20%20this.m_invMass%20%3D%201.0%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20if%20(this.m_I%20%3E%200.0%20%26%26%20(this.m_flags%20%26%20b2Body.e_fixedRotationFlag)%20%3D%3D%200)%20%7B%0A%20%20%20%20%20%20%20%20this.m_I%20-%3D%20this.m_mass%20*%20(center.x%20*%20center.x%20%2B%20center.y%20*%20center.y)%3B%0A%20%20%20%20%20%20%20%20this.m_I%20*%3D%20this.m_inertiaScale%3B%0A%20%20%20%20%20%20%20%20b2Settings.b2Assert(this.m_I%20%3E%200)%3B%0A%20%20%20%20%20%20%20%20this.m_invI%20%3D%201.0%20%2F%20this.m_I%3B%0A%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20this.m_I%20%3D%200.0%3B%0A%20%20%20%20%20%20%20%20this.m_invI%20%3D%200.0%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20var%20oldCenter%20%3D%20this.m_sweep.c.Copy()%3B%0A%20%20%20%20%20%20this.m_sweep.localCenter.SetV(center)%3B%0A%20%20%20%20%20%20this.m_sweep.c0.SetV(b2Math.MulX(this.m_xf%2C%20this.m_sweep.localCenter))%3B%0A%20%20%20%20%20%20this.m_sweep.c.SetV(this.m_sweep.c0)%3B%0A%20%20%20%20%20%20this.m_linearVelocity.x%20%2B%3D%0A%20%20%20%20%20%20%20%20this.m_angularVelocity%20*%20-(this.m_sweep.c.y%20-%20oldCenter.y)%3B%0A%20%20%20%20%20%20this.m_linearVelocity.y%20%2B%3D%0A%20%20%20%20%20%20%20%20this.m_angularVelocity%20*%20%2B(this.m_sweep.c.x%20-%20oldCenter.x)%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2Body.prototype.GetWorldPoint%20%3D%20function%20(localPoint)%20%7B%0A%20%20%20%20%20%20var%20A%20%3D%20this.m_xf.R%3B%0A%20%20%20%20%20%20var%20u%20%3D%20new%20b2Vec2(%0A%20%20%20%20%20%20%20%20A.col1.x%20*%20localPoint.x%20%2B%20A.col2.x%20*%20localPoint.y%2C%0A%20%20%20%20%20%20%20%20A.col1.y%20*%20localPoint.x%20%2B%20A.col2.y%20*%20localPoint.y%0A%20%20%20%20%20%20)%3B%0A%20%20%20%20%20%20u.x%20%2B%3D%20this.m_xf.position.x%3B%0A%20%20%20%20%20%20u.y%20%2B%3D%20this.m_xf.position.y%3B%0A%20%20%20%20%20%20return%20u%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2Body.prototype.GetWorldVector%20%3D%20function%20(localVector)%20%7B%0A%20%20%20%20%20%20return%20b2Math.MulMV(this.m_xf.R%2C%20localVector)%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2Body.prototype.GetLocalPoint%20%3D%20function%20(worldPoint)%20%7B%0A%20%20%20%20%20%20return%20b2Math.MulXT(this.m_xf%2C%20worldPoint)%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2Body.prototype.GetLocalVector%20%3D%20function%20(worldVector)%20%7B%0A%20%20%20%20%20%20return%20b2Math.MulTMV(this.m_xf.R%2C%20worldVector)%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2Body.prototype.GetLinearVelocityFromWorldPoint%20%3D%20function%20(worldPoint)%20%7B%0A%20%20%20%20%20%20return%20new%20b2Vec2(%0A%20%20%20%20%20%20%20%20this.m_linearVelocity.x%20-%0A%20%20%20%20%20%20%20%20%20%20this.m_angularVelocity%20*%20(worldPoint.y%20-%20this.m_sweep.c.y)%2C%0A%20%20%20%20%20%20%20%20this.m_linearVelocity.y%20%2B%0A%20%20%20%20%20%20%20%20%20%20this.m_angularVelocity%20*%20(worldPoint.x%20-%20this.m_sweep.c.x)%0A%20%20%20%20%20%20)%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2Body.prototype.GetLinearVelocityFromLocalPoint%20%3D%20function%20(localPoint)%20%7B%0A%20%20%20%20%20%20var%20A%20%3D%20this.m_xf.R%3B%0A%20%20%20%20%20%20var%20worldPoint%20%3D%20new%20b2Vec2(%0A%20%20%20%20%20%20%20%20A.col1.x%20*%20localPoint.x%20%2B%20A.col2.x%20*%20localPoint.y%2C%0A%20%20%20%20%20%20%20%20A.col1.y%20*%20localPoint.x%20%2B%20A.col2.y%20*%20localPoint.y%0A%20%20%20%20%20%20)%3B%0A%20%20%20%20%20%20worldPoint.x%20%2B%3D%20this.m_xf.position.x%3B%0A%20%20%20%20%20%20worldPoint.y%20%2B%3D%20this.m_xf.position.y%3B%0A%20%20%20%20%20%20return%20new%20b2Vec2(%0A%20%20%20%20%20%20%20%20this.m_linearVelocity.x%20-%0A%20%20%20%20%20%20%20%20%20%20this.m_angularVelocity%20*%20(worldPoint.y%20-%20this.m_sweep.c.y)%2C%0A%20%20%20%20%20%20%20%20this.m_linearVelocity.y%20%2B%0A%20%20%20%20%20%20%20%20%20%20this.m_angularVelocity%20*%20(worldPoint.x%20-%20this.m_sweep.c.x)%0A%20%20%20%20%20%20)%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2Body.prototype.GetLinearDamping%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20return%20this.m_linearDamping%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2Body.prototype.SetLinearDamping%20%3D%20function%20(linearDamping)%20%7B%0A%20%20%20%20%20%20if%20(linearDamping%20%3D%3D%3D%20undefined)%20linearDamping%20%3D%200%3B%0A%20%20%20%20%20%20this.m_linearDamping%20%3D%20linearDamping%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2Body.prototype.GetAngularDamping%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20return%20this.m_angularDamping%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2Body.prototype.SetAngularDamping%20%3D%20function%20(angularDamping)%20%7B%0A%20%20%20%20%20%20if%20(angularDamping%20%3D%3D%3D%20undefined)%20angularDamping%20%3D%200%3B%0A%20%20%20%20%20%20this.m_angularDamping%20%3D%20angularDamping%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2Body.prototype.SetType%20%3D%20function%20(type)%20%7B%0A%20%20%20%20%20%20if%20(type%20%3D%3D%3D%20undefined)%20type%20%3D%200%3B%0A%20%20%20%20%20%20if%20(this.m_type%20%3D%3D%20type)%20%7B%0A%20%20%20%20%20%20%20%20return%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20this.m_type%20%3D%20type%3B%0A%20%20%20%20%20%20this.ResetMassData()%3B%0A%20%20%20%20%20%20if%20(this.m_type%20%3D%3D%20b2Body.b2_staticBody)%20%7B%0A%20%20%20%20%20%20%20%20this.m_linearVelocity.SetZero()%3B%0A%20%20%20%20%20%20%20%20this.m_angularVelocity%20%3D%200.0%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20this.SetAwake(true)%3B%0A%20%20%20%20%20%20this.m_force.SetZero()%3B%0A%20%20%20%20%20%20this.m_torque%20%3D%200.0%3B%0A%20%20%20%20%20%20for%20(var%20ce%20%3D%20this.m_contactList%3B%20ce%3B%20ce%20%3D%20ce.next)%20%7B%0A%20%20%20%20%20%20%20%20ce.contact.FlagForFiltering()%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2Body.prototype.GetType%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20return%20this.m_type%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2Body.prototype.SetBullet%20%3D%20function%20(flag)%20%7B%0A%20%20%20%20%20%20if%20(flag)%20%7B%0A%20%20%20%20%20%20%20%20this.m_flags%20%7C%3D%20b2Body.e_bulletFlag%3B%0A%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20this.m_flags%20%26%3D%20~b2Body.e_bulletFlag%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2Body.prototype.IsBullet%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20return%20(this.m_flags%20%26%20b2Body.e_bulletFlag)%20%3D%3D%20b2Body.e_bulletFlag%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2Body.prototype.SetSleepingAllowed%20%3D%20function%20(flag)%20%7B%0A%20%20%20%20%20%20if%20(flag)%20%7B%0A%20%20%20%20%20%20%20%20this.m_flags%20%7C%3D%20b2Body.e_allowSleepFlag%3B%0A%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20this.m_flags%20%26%3D%20~b2Body.e_allowSleepFlag%3B%0A%20%20%20%20%20%20%20%20this.SetAwake(true)%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2Body.prototype.SetAwake%20%3D%20function%20(flag)%20%7B%0A%20%20%20%20%20%20if%20(flag)%20%7B%0A%20%20%20%20%20%20%20%20this.m_flags%20%7C%3D%20b2Body.e_awakeFlag%3B%0A%20%20%20%20%20%20%20%20this.m_sleepTime%20%3D%200.0%3B%0A%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20this.m_flags%20%26%3D%20~b2Body.e_awakeFlag%3B%0A%20%20%20%20%20%20%20%20this.m_sleepTime%20%3D%200.0%3B%0A%20%20%20%20%20%20%20%20this.m_linearVelocity.SetZero()%3B%0A%20%20%20%20%20%20%20%20this.m_angularVelocity%20%3D%200.0%3B%0A%20%20%20%20%20%20%20%20this.m_force.SetZero()%3B%0A%20%20%20%20%20%20%20%20this.m_torque%20%3D%200.0%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2Body.prototype.IsAwake%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20return%20(this.m_flags%20%26%20b2Body.e_awakeFlag)%20%3D%3D%20b2Body.e_awakeFlag%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2Body.prototype.SetFixedRotation%20%3D%20function%20(fixed)%20%7B%0A%20%20%20%20%20%20if%20(fixed)%20%7B%0A%20%20%20%20%20%20%20%20this.m_flags%20%7C%3D%20b2Body.e_fixedRotationFlag%3B%0A%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20this.m_flags%20%26%3D%20~b2Body.e_fixedRotationFlag%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20this.ResetMassData()%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2Body.prototype.IsFixedRotation%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20return%20(%0A%20%20%20%20%20%20%20%20(this.m_flags%20%26%20b2Body.e_fixedRotationFlag)%20%3D%3D%0A%20%20%20%20%20%20%20%20b2Body.e_fixedRotationFlag%0A%20%20%20%20%20%20)%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2Body.prototype.SetActive%20%3D%20function%20(flag)%20%7B%0A%20%20%20%20%20%20if%20(flag%20%3D%3D%20this.IsActive())%20%7B%0A%20%20%20%20%20%20%20%20return%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20var%20broadPhase%3B%0A%20%20%20%20%20%20var%20f%3B%0A%20%20%20%20%20%20if%20(flag)%20%7B%0A%20%20%20%20%20%20%20%20this.m_flags%20%7C%3D%20b2Body.e_activeFlag%3B%0A%20%20%20%20%20%20%20%20broadPhase%20%3D%20this.m_world.m_contactManager.m_broadPhase%3B%0A%20%20%20%20%20%20%20%20for%20(f%20%3D%20this.m_fixtureList%3B%20f%3B%20f%20%3D%20f.m_next)%20%7B%0A%20%20%20%20%20%20%20%20%20%20f.CreateProxy(broadPhase%2C%20this.m_xf)%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20this.m_flags%20%26%3D%20~b2Body.e_activeFlag%3B%0A%20%20%20%20%20%20%20%20broadPhase%20%3D%20this.m_world.m_contactManager.m_broadPhase%3B%0A%20%20%20%20%20%20%20%20for%20(f%20%3D%20this.m_fixtureList%3B%20f%3B%20f%20%3D%20f.m_next)%20%7B%0A%20%20%20%20%20%20%20%20%20%20f.DestroyProxy(broadPhase)%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20var%20ce%20%3D%20this.m_contactList%3B%0A%20%20%20%20%20%20%20%20while%20(ce)%20%7B%0A%20%20%20%20%20%20%20%20%20%20var%20ce0%20%3D%20ce%3B%0A%20%20%20%20%20%20%20%20%20%20ce%20%3D%20ce.next%3B%0A%20%20%20%20%20%20%20%20%20%20this.m_world.m_contactManager.Destroy(ce0.contact)%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20this.m_contactList%20%3D%20null%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2Body.prototype.IsActive%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20return%20(this.m_flags%20%26%20b2Body.e_activeFlag)%20%3D%3D%20b2Body.e_activeFlag%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2Body.prototype.IsSleepingAllowed%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20return%20(%0A%20%20%20%20%20%20%20%20(this.m_flags%20%26%20b2Body.e_allowSleepFlag)%20%3D%3D%20b2Body.e_allowSleepFlag%0A%20%20%20%20%20%20)%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2Body.prototype.GetFixtureList%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20return%20this.m_fixtureList%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2Body.prototype.GetJointList%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20return%20this.m_jointList%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2Body.prototype.GetControllerList%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20return%20this.m_controllerList%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2Body.prototype.GetContactList%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20return%20this.m_contactList%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2Body.prototype.GetNext%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20return%20this.m_next%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2Body.prototype.GetUserData%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20return%20this.m_userData%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2Body.prototype.SetUserData%20%3D%20function%20(data)%20%7B%0A%20%20%20%20%20%20this.m_userData%20%3D%20data%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2Body.prototype.GetWorld%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20return%20this.m_world%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2Body.prototype.b2Body%20%3D%20function%20(bd%2C%20world)%20%7B%0A%20%20%20%20%20%20this.m_flags%20%3D%200%3B%0A%20%20%20%20%20%20if%20(bd.bullet)%20%7B%0A%20%20%20%20%20%20%20%20this.m_flags%20%7C%3D%20b2Body.e_bulletFlag%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20if%20(bd.fixedRotation)%20%7B%0A%20%20%20%20%20%20%20%20this.m_flags%20%7C%3D%20b2Body.e_fixedRotationFlag%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20if%20(bd.allowSleep)%20%7B%0A%20%20%20%20%20%20%20%20this.m_flags%20%7C%3D%20b2Body.e_allowSleepFlag%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20if%20(bd.awake)%20%7B%0A%20%20%20%20%20%20%20%20this.m_flags%20%7C%3D%20b2Body.e_awakeFlag%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20if%20(bd.active)%20%7B%0A%20%20%20%20%20%20%20%20this.m_flags%20%7C%3D%20b2Body.e_activeFlag%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20this.m_world%20%3D%20world%3B%0A%20%20%20%20%20%20this.m_xf.position.SetV(bd.position)%3B%0A%20%20%20%20%20%20this.m_xf.R.Set(bd.angle)%3B%0A%20%20%20%20%20%20this.m_sweep.localCenter.SetZero()%3B%0A%20%20%20%20%20%20this.m_sweep.t0%20%3D%201.0%3B%0A%20%20%20%20%20%20this.m_sweep.a0%20%3D%20this.m_sweep.a%20%3D%20bd.angle%3B%0A%20%20%20%20%20%20var%20tMat%20%3D%20this.m_xf.R%3B%0A%20%20%20%20%20%20var%20tVec%20%3D%20this.m_sweep.localCenter%3B%0A%20%20%20%20%20%20this.m_sweep.c.x%20%3D%20tMat.col1.x%20*%20tVec.x%20%2B%20tMat.col2.x%20*%20tVec.y%3B%0A%20%20%20%20%20%20this.m_sweep.c.y%20%3D%20tMat.col1.y%20*%20tVec.x%20%2B%20tMat.col2.y%20*%20tVec.y%3B%0A%20%20%20%20%20%20this.m_sweep.c.x%20%2B%3D%20this.m_xf.position.x%3B%0A%20%20%20%20%20%20this.m_sweep.c.y%20%2B%3D%20this.m_xf.position.y%3B%0A%20%20%20%20%20%20this.m_sweep.c0.SetV(this.m_sweep.c)%3B%0A%20%20%20%20%20%20this.m_jointList%20%3D%20null%3B%0A%20%20%20%20%20%20this.m_controllerList%20%3D%20null%3B%0A%20%20%20%20%20%20this.m_contactList%20%3D%20null%3B%0A%20%20%20%20%20%20this.m_controllerCount%20%3D%200%3B%0A%20%20%20%20%20%20this.m_prev%20%3D%20null%3B%0A%20%20%20%20%20%20this.m_next%20%3D%20null%3B%0A%20%20%20%20%20%20this.m_linearVelocity.SetV(bd.linearVelocity)%3B%0A%20%20%20%20%20%20this.m_angularVelocity%20%3D%20bd.angularVelocity%3B%0A%20%20%20%20%20%20this.m_linearDamping%20%3D%20bd.linearDamping%3B%0A%20%20%20%20%20%20this.m_angularDamping%20%3D%20bd.angularDamping%3B%0A%20%20%20%20%20%20this.m_force.Set(0.0%2C%200.0)%3B%0A%20%20%20%20%20%20this.m_torque%20%3D%200.0%3B%0A%20%20%20%20%20%20this.m_sleepTime%20%3D%200.0%3B%0A%20%20%20%20%20%20this.m_type%20%3D%20bd.type%3B%0A%20%20%20%20%20%20if%20(this.m_type%20%3D%3D%20b2Body.b2_dynamicBody)%20%7B%0A%20%20%20%20%20%20%20%20this.m_mass%20%3D%201.0%3B%0A%20%20%20%20%20%20%20%20this.m_invMass%20%3D%201.0%3B%0A%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20this.m_mass%20%3D%200.0%3B%0A%20%20%20%20%20%20%20%20this.m_invMass%20%3D%200.0%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20this.m_I%20%3D%200.0%3B%0A%20%20%20%20%20%20this.m_invI%20%3D%200.0%3B%0A%20%20%20%20%20%20this.m_inertiaScale%20%3D%20bd.inertiaScale%3B%0A%20%20%20%20%20%20this.m_userData%20%3D%20bd.userData%3B%0A%20%20%20%20%20%20this.m_fixtureList%20%3D%20null%3B%0A%20%20%20%20%20%20this.m_fixtureCount%20%3D%200%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2Body.prototype.SynchronizeFixtures%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20var%20xf1%20%3D%20b2Body.s_xf1%3B%0A%20%20%20%20%20%20xf1.R.Set(this.m_sweep.a0)%3B%0A%20%20%20%20%20%20var%20tMat%20%3D%20xf1.R%3B%0A%20%20%20%20%20%20var%20tVec%20%3D%20this.m_sweep.localCenter%3B%0A%20%20%20%20%20%20xf1.position.x%20%3D%0A%20%20%20%20%20%20%20%20this.m_sweep.c0.x%20-%20(tMat.col1.x%20*%20tVec.x%20%2B%20tMat.col2.x%20*%20tVec.y)%3B%0A%20%20%20%20%20%20xf1.position.y%20%3D%0A%20%20%20%20%20%20%20%20this.m_sweep.c0.y%20-%20(tMat.col1.y%20*%20tVec.x%20%2B%20tMat.col2.y%20*%20tVec.y)%3B%0A%20%20%20%20%20%20var%20f%3B%0A%20%20%20%20%20%20var%20broadPhase%20%3D%20this.m_world.m_contactManager.m_broadPhase%3B%0A%20%20%20%20%20%20for%20(f%20%3D%20this.m_fixtureList%3B%20f%3B%20f%20%3D%20f.m_next)%20%7B%0A%20%20%20%20%20%20%20%20f.Synchronize(broadPhase%2C%20xf1%2C%20this.m_xf)%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2Body.prototype.SynchronizeTransform%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20this.m_xf.R.Set(this.m_sweep.a)%3B%0A%20%20%20%20%20%20var%20tMat%20%3D%20this.m_xf.R%3B%0A%20%20%20%20%20%20var%20tVec%20%3D%20this.m_sweep.localCenter%3B%0A%20%20%20%20%20%20this.m_xf.position.x%20%3D%0A%20%20%20%20%20%20%20%20this.m_sweep.c.x%20-%20(tMat.col1.x%20*%20tVec.x%20%2B%20tMat.col2.x%20*%20tVec.y)%3B%0A%20%20%20%20%20%20this.m_xf.position.y%20%3D%0A%20%20%20%20%20%20%20%20this.m_sweep.c.y%20-%20(tMat.col1.y%20*%20tVec.x%20%2B%20tMat.col2.y%20*%20tVec.y)%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2Body.prototype.ShouldCollide%20%3D%20function%20(other)%20%7B%0A%20%20%20%20%20%20if%20(%0A%20%20%20%20%20%20%20%20this.m_type%20!%3D%20b2Body.b2_dynamicBody%20%26%26%0A%20%20%20%20%20%20%20%20other.m_type%20!%3D%20b2Body.b2_dynamicBody%0A%20%20%20%20%20%20)%20%7B%0A%20%20%20%20%20%20%20%20return%20false%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20for%20(var%20jn%20%3D%20this.m_jointList%3B%20jn%3B%20jn%20%3D%20jn.next)%20%7B%0A%20%20%20%20%20%20%20%20if%20(jn.other%20%3D%3D%20other)%0A%20%20%20%20%20%20%20%20%20%20if%20(jn.joint.m_collideConnected%20%3D%3D%20false)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20false%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20return%20true%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2Body.prototype.Advance%20%3D%20function%20(t)%20%7B%0A%20%20%20%20%20%20if%20(t%20%3D%3D%3D%20undefined)%20t%20%3D%200%3B%0A%20%20%20%20%20%20this.m_sweep.Advance(t)%3B%0A%20%20%20%20%20%20this.m_sweep.c.SetV(this.m_sweep.c0)%3B%0A%20%20%20%20%20%20this.m_sweep.a%20%3D%20this.m_sweep.a0%3B%0A%20%20%20%20%20%20this.SynchronizeTransform()%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20Box2D.postDefs.push(function%20()%20%7B%0A%20%20%20%20%20%20Box2D.Dynamics.b2Body.s_xf1%20%3D%20new%20b2Transform()%3B%0A%20%20%20%20%20%20Box2D.Dynamics.b2Body.e_islandFlag%20%3D%200x0001%3B%0A%20%20%20%20%20%20Box2D.Dynamics.b2Body.e_awakeFlag%20%3D%200x0002%3B%0A%20%20%20%20%20%20Box2D.Dynamics.b2Body.e_allowSleepFlag%20%3D%200x0004%3B%0A%20%20%20%20%20%20Box2D.Dynamics.b2Body.e_bulletFlag%20%3D%200x0008%3B%0A%20%20%20%20%20%20Box2D.Dynamics.b2Body.e_fixedRotationFlag%20%3D%200x0010%3B%0A%20%20%20%20%20%20Box2D.Dynamics.b2Body.e_activeFlag%20%3D%200x0020%3B%0A%20%20%20%20%20%20Box2D.Dynamics.b2Body.b2_staticBody%20%3D%200%3B%0A%20%20%20%20%20%20Box2D.Dynamics.b2Body.b2_kinematicBody%20%3D%201%3B%0A%20%20%20%20%20%20Box2D.Dynamics.b2Body.b2_dynamicBody%20%3D%202%3B%0A%20%20%20%20%7D)%3B%0A%20%20%20%20b2BodyDef.b2BodyDef%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20this.position%20%3D%20new%20b2Vec2()%3B%0A%20%20%20%20%20%20this.linearVelocity%20%3D%20new%20b2Vec2()%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2BodyDef.prototype.b2BodyDef%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20this.userData%20%3D%20null%3B%0A%20%20%20%20%20%20this.position.Set(0.0%2C%200.0)%3B%0A%20%20%20%20%20%20this.angle%20%3D%200.0%3B%0A%20%20%20%20%20%20this.linearVelocity.Set(0%2C%200)%3B%0A%20%20%20%20%20%20this.angularVelocity%20%3D%200.0%3B%0A%20%20%20%20%20%20this.linearDamping%20%3D%200.0%3B%0A%20%20%20%20%20%20this.angularDamping%20%3D%200.0%3B%0A%20%20%20%20%20%20this.allowSleep%20%3D%20true%3B%0A%20%20%20%20%20%20this.awake%20%3D%20true%3B%0A%20%20%20%20%20%20this.fixedRotation%20%3D%20false%3B%0A%20%20%20%20%20%20this.bullet%20%3D%20false%3B%0A%20%20%20%20%20%20this.type%20%3D%20b2Body.b2_staticBody%3B%0A%20%20%20%20%20%20this.active%20%3D%20true%3B%0A%20%20%20%20%20%20this.inertiaScale%20%3D%201.0%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2ContactFilter.b2ContactFilter%20%3D%20function%20()%20%7B%7D%3B%0A%20%20%20%20b2ContactFilter.prototype.ShouldCollide%20%3D%20function%20(fixtureA%2C%20fixtureB)%20%7B%0A%20%20%20%20%20%20var%20filter1%20%3D%20fixtureA.GetFilterData()%3B%0A%20%20%20%20%20%20var%20filter2%20%3D%20fixtureB.GetFilterData()%3B%0A%20%20%20%20%20%20if%20(filter1.groupIndex%20%3D%3D%20filter2.groupIndex%20%26%26%20filter1.groupIndex%20!%3D%200)%20%7B%0A%20%20%20%20%20%20%20%20return%20filter1.groupIndex%20%3E%200%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20var%20collide%20%3D%0A%20%20%20%20%20%20%20%20(filter1.maskBits%20%26%20filter2.categoryBits)%20!%3D%200%20%26%26%0A%20%20%20%20%20%20%20%20(filter1.categoryBits%20%26%20filter2.maskBits)%20!%3D%200%3B%0A%20%20%20%20%20%20return%20collide%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2ContactFilter.prototype.RayCollide%20%3D%20function%20(userData%2C%20fixture)%20%7B%0A%20%20%20%20%20%20if%20(!userData)%20return%20true%3B%0A%20%20%20%20%20%20return%20this.ShouldCollide(%0A%20%20%20%20%20%20%20%20userData%20instanceof%20b2Fixture%20%3F%20userData%20%3A%20null%2C%0A%20%20%20%20%20%20%20%20fixture%0A%20%20%20%20%20%20)%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20Box2D.postDefs.push(function%20()%20%7B%0A%20%20%20%20%20%20Box2D.Dynamics.b2ContactFilter.b2_defaultFilter%20%3D%20new%20b2ContactFilter()%3B%0A%20%20%20%20%7D)%3B%0A%20%20%20%20b2ContactImpulse.b2ContactImpulse%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20this.normalImpulses%20%3D%20new%20Vector_a2j_Number(%0A%20%20%20%20%20%20%20%20b2Settings.b2_maxManifoldPoints%0A%20%20%20%20%20%20)%3B%0A%20%20%20%20%20%20this.tangentImpulses%20%3D%20new%20Vector_a2j_Number(%0A%20%20%20%20%20%20%20%20b2Settings.b2_maxManifoldPoints%0A%20%20%20%20%20%20)%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2ContactListener.b2ContactListener%20%3D%20function%20()%20%7B%7D%3B%0A%20%20%20%20b2ContactListener.prototype.BeginContact%20%3D%20function%20(contact)%20%7B%7D%3B%0A%20%20%20%20b2ContactListener.prototype.EndContact%20%3D%20function%20(contact)%20%7B%7D%3B%0A%20%20%20%20b2ContactListener.prototype.PreSolve%20%3D%20function%20(contact%2C%20oldManifold)%20%7B%7D%3B%0A%20%20%20%20b2ContactListener.prototype.PostSolve%20%3D%20function%20(contact%2C%20impulse)%20%7B%7D%3B%0A%20%20%20%20Box2D.postDefs.push(function%20()%20%7B%0A%20%20%20%20%20%20Box2D.Dynamics.b2ContactListener.b2_defaultListener%20%3D%0A%20%20%20%20%20%20%20%20new%20b2ContactListener()%3B%0A%20%20%20%20%7D)%3B%0A%20%20%20%20b2ContactManager.b2ContactManager%20%3D%20function%20()%20%7B%7D%3B%0A%20%20%20%20b2ContactManager.prototype.b2ContactManager%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20this.m_world%20%3D%20null%3B%0A%20%20%20%20%20%20this.m_contactCount%20%3D%200%3B%0A%20%20%20%20%20%20this.m_contactFilter%20%3D%20b2ContactFilter.b2_defaultFilter%3B%0A%20%20%20%20%20%20this.m_contactListener%20%3D%20b2ContactListener.b2_defaultListener%3B%0A%20%20%20%20%20%20this.m_contactFactory%20%3D%20new%20b2ContactFactory(this.m_allocator)%3B%0A%20%20%20%20%20%20this.m_broadPhase%20%3D%20new%20b2DynamicTreeBroadPhase()%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2ContactManager.prototype.AddPair%20%3D%20function%20(%0A%20%20%20%20%20%20proxyUserDataA%2C%0A%20%20%20%20%20%20proxyUserDataB%0A%20%20%20%20)%20%7B%0A%20%20%20%20%20%20var%20fixtureA%20%3D%0A%20%20%20%20%20%20%20%20proxyUserDataA%20instanceof%20b2Fixture%20%3F%20proxyUserDataA%20%3A%20null%3B%0A%20%20%20%20%20%20var%20fixtureB%20%3D%0A%20%20%20%20%20%20%20%20proxyUserDataB%20instanceof%20b2Fixture%20%3F%20proxyUserDataB%20%3A%20null%3B%0A%20%20%20%20%20%20var%20bodyA%20%3D%20fixtureA.GetBody()%3B%0A%20%20%20%20%20%20var%20bodyB%20%3D%20fixtureB.GetBody()%3B%0A%20%20%20%20%20%20if%20(bodyA%20%3D%3D%20bodyB)%20return%3B%0A%20%20%20%20%20%20var%20edge%20%3D%20bodyB.GetContactList()%3B%0A%20%20%20%20%20%20while%20(edge)%20%7B%0A%20%20%20%20%20%20%20%20if%20(edge.other%20%3D%3D%20bodyA)%20%7B%0A%20%20%20%20%20%20%20%20%20%20var%20fA%20%3D%20edge.contact.GetFixtureA()%3B%0A%20%20%20%20%20%20%20%20%20%20var%20fB%20%3D%20edge.contact.GetFixtureB()%3B%0A%20%20%20%20%20%20%20%20%20%20if%20(fA%20%3D%3D%20fixtureA%20%26%26%20fB%20%3D%3D%20fixtureB)%20return%3B%0A%20%20%20%20%20%20%20%20%20%20if%20(fA%20%3D%3D%20fixtureB%20%26%26%20fB%20%3D%3D%20fixtureA)%20return%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20edge%20%3D%20edge.next%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20if%20(bodyB.ShouldCollide(bodyA)%20%3D%3D%20false)%20%7B%0A%20%20%20%20%20%20%20%20return%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20if%20(this.m_contactFilter.ShouldCollide(fixtureA%2C%20fixtureB)%20%3D%3D%20false)%20%7B%0A%20%20%20%20%20%20%20%20return%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20var%20c%20%3D%20this.m_contactFactory.Create(fixtureA%2C%20fixtureB)%3B%0A%20%20%20%20%20%20fixtureA%20%3D%20c.GetFixtureA()%3B%0A%20%20%20%20%20%20fixtureB%20%3D%20c.GetFixtureB()%3B%0A%20%20%20%20%20%20bodyA%20%3D%20fixtureA.m_body%3B%0A%20%20%20%20%20%20bodyB%20%3D%20fixtureB.m_body%3B%0A%20%20%20%20%20%20c.m_prev%20%3D%20null%3B%0A%20%20%20%20%20%20c.m_next%20%3D%20this.m_world.m_contactList%3B%0A%20%20%20%20%20%20if%20(this.m_world.m_contactList%20!%3D%20null)%20%7B%0A%20%20%20%20%20%20%20%20this.m_world.m_contactList.m_prev%20%3D%20c%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20this.m_world.m_contactList%20%3D%20c%3B%0A%20%20%20%20%20%20c.m_nodeA.contact%20%3D%20c%3B%0A%20%20%20%20%20%20c.m_nodeA.other%20%3D%20bodyB%3B%0A%20%20%20%20%20%20c.m_nodeA.prev%20%3D%20null%3B%0A%20%20%20%20%20%20c.m_nodeA.next%20%3D%20bodyA.m_contactList%3B%0A%20%20%20%20%20%20if%20(bodyA.m_contactList%20!%3D%20null)%20%7B%0A%20%20%20%20%20%20%20%20bodyA.m_contactList.prev%20%3D%20c.m_nodeA%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20bodyA.m_contactList%20%3D%20c.m_nodeA%3B%0A%20%20%20%20%20%20c.m_nodeB.contact%20%3D%20c%3B%0A%20%20%20%20%20%20c.m_nodeB.other%20%3D%20bodyA%3B%0A%20%20%20%20%20%20c.m_nodeB.prev%20%3D%20null%3B%0A%20%20%20%20%20%20c.m_nodeB.next%20%3D%20bodyB.m_contactList%3B%0A%20%20%20%20%20%20if%20(bodyB.m_contactList%20!%3D%20null)%20%7B%0A%20%20%20%20%20%20%20%20bodyB.m_contactList.prev%20%3D%20c.m_nodeB%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20bodyB.m_contactList%20%3D%20c.m_nodeB%3B%0A%20%20%20%20%20%20%2B%2Bthis.m_world.m_contactCount%3B%0A%20%20%20%20%20%20return%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2ContactManager.prototype.FindNewContacts%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20this.m_broadPhase.UpdatePairs(Box2D.generateCallback(this%2C%20this.AddPair))%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2ContactManager.prototype.Destroy%20%3D%20function%20(c)%20%7B%0A%20%20%20%20%20%20var%20fixtureA%20%3D%20c.GetFixtureA()%3B%0A%20%20%20%20%20%20var%20fixtureB%20%3D%20c.GetFixtureB()%3B%0A%20%20%20%20%20%20var%20bodyA%20%3D%20fixtureA.GetBody()%3B%0A%20%20%20%20%20%20var%20bodyB%20%3D%20fixtureB.GetBody()%3B%0A%20%20%20%20%20%20if%20(c.IsTouching())%20%7B%0A%20%20%20%20%20%20%20%20this.m_contactListener.EndContact(c)%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20if%20(c.m_prev)%20%7B%0A%20%20%20%20%20%20%20%20c.m_prev.m_next%20%3D%20c.m_next%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20if%20(c.m_next)%20%7B%0A%20%20%20%20%20%20%20%20c.m_next.m_prev%20%3D%20c.m_prev%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20if%20(c%20%3D%3D%20this.m_world.m_contactList)%20%7B%0A%20%20%20%20%20%20%20%20this.m_world.m_contactList%20%3D%20c.m_next%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20if%20(c.m_nodeA.prev)%20%7B%0A%20%20%20%20%20%20%20%20c.m_nodeA.prev.next%20%3D%20c.m_nodeA.next%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20if%20(c.m_nodeA.next)%20%7B%0A%20%20%20%20%20%20%20%20c.m_nodeA.next.prev%20%3D%20c.m_nodeA.prev%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20if%20(c.m_nodeA%20%3D%3D%20bodyA.m_contactList)%20%7B%0A%20%20%20%20%20%20%20%20bodyA.m_contactList%20%3D%20c.m_nodeA.next%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20if%20(c.m_nodeB.prev)%20%7B%0A%20%20%20%20%20%20%20%20c.m_nodeB.prev.next%20%3D%20c.m_nodeB.next%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20if%20(c.m_nodeB.next)%20%7B%0A%20%20%20%20%20%20%20%20c.m_nodeB.next.prev%20%3D%20c.m_nodeB.prev%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20if%20(c.m_nodeB%20%3D%3D%20bodyB.m_contactList)%20%7B%0A%20%20%20%20%20%20%20%20bodyB.m_contactList%20%3D%20c.m_nodeB.next%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20this.m_contactFactory.Destroy(c)%3B%0A%20%20%20%20%20%20--this.m_contactCount%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2ContactManager.prototype.Collide%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20var%20c%20%3D%20this.m_world.m_contactList%3B%0A%20%20%20%20%20%20while%20(c)%20%7B%0A%20%20%20%20%20%20%20%20var%20fixtureA%20%3D%20c.GetFixtureA()%3B%0A%20%20%20%20%20%20%20%20var%20fixtureB%20%3D%20c.GetFixtureB()%3B%0A%20%20%20%20%20%20%20%20var%20bodyA%20%3D%20fixtureA.GetBody()%3B%0A%20%20%20%20%20%20%20%20var%20bodyB%20%3D%20fixtureB.GetBody()%3B%0A%20%20%20%20%20%20%20%20if%20(bodyA.IsAwake()%20%3D%3D%20false%20%26%26%20bodyB.IsAwake()%20%3D%3D%20false)%20%7B%0A%20%20%20%20%20%20%20%20%20%20c%20%3D%20c.GetNext()%3B%0A%20%20%20%20%20%20%20%20%20%20continue%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20if%20(c.m_flags%20%26%20b2Contact.e_filterFlag)%20%7B%0A%20%20%20%20%20%20%20%20%20%20if%20(bodyB.ShouldCollide(bodyA)%20%3D%3D%20false)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20var%20cNuke%20%3D%20c%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20c%20%3D%20cNuke.GetNext()%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20this.Destroy(cNuke)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20continue%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20if%20(this.m_contactFilter.ShouldCollide(fixtureA%2C%20fixtureB)%20%3D%3D%20false)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20cNuke%20%3D%20c%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20c%20%3D%20cNuke.GetNext()%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20this.Destroy(cNuke)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20continue%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20c.m_flags%20%26%3D%20~b2Contact.e_filterFlag%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20var%20proxyA%20%3D%20fixtureA.m_proxy%3B%0A%20%20%20%20%20%20%20%20var%20proxyB%20%3D%20fixtureB.m_proxy%3B%0A%20%20%20%20%20%20%20%20var%20overlap%20%3D%20this.m_broadPhase.TestOverlap(proxyA%2C%20proxyB)%3B%0A%20%20%20%20%20%20%20%20if%20(overlap%20%3D%3D%20false)%20%7B%0A%20%20%20%20%20%20%20%20%20%20cNuke%20%3D%20c%3B%0A%20%20%20%20%20%20%20%20%20%20c%20%3D%20cNuke.GetNext()%3B%0A%20%20%20%20%20%20%20%20%20%20this.Destroy(cNuke)%3B%0A%20%20%20%20%20%20%20%20%20%20continue%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20c.Update(this.m_contactListener)%3B%0A%20%20%20%20%20%20%20%20c%20%3D%20c.GetNext()%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%3B%0A%20%20%20%20Box2D.postDefs.push(function%20()%20%7B%0A%20%20%20%20%20%20Box2D.Dynamics.b2ContactManager.s_evalCP%20%3D%20new%20b2ContactPoint()%3B%0A%20%20%20%20%7D)%3B%0A%20%20%20%20b2DebugDraw.b2DebugDraw%20%3D%20function%20()%20%7B%7D%3B%0A%20%20%20%20b2DebugDraw.prototype.b2DebugDraw%20%3D%20function%20()%20%7B%7D%3B%0A%20%20%20%20b2DebugDraw.prototype.SetFlags%20%3D%20function%20(flags)%20%7B%0A%20%20%20%20%20%20if%20(flags%20%3D%3D%3D%20undefined)%20flags%20%3D%200%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2DebugDraw.prototype.GetFlags%20%3D%20function%20()%20%7B%7D%3B%0A%20%20%20%20b2DebugDraw.prototype.AppendFlags%20%3D%20function%20(flags)%20%7B%0A%20%20%20%20%20%20if%20(flags%20%3D%3D%3D%20undefined)%20flags%20%3D%200%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2DebugDraw.prototype.ClearFlags%20%3D%20function%20(flags)%20%7B%0A%20%20%20%20%20%20if%20(flags%20%3D%3D%3D%20undefined)%20flags%20%3D%200%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2DebugDraw.prototype.SetSprite%20%3D%20function%20(sprite)%20%7B%7D%3B%0A%20%20%20%20b2DebugDraw.prototype.GetSprite%20%3D%20function%20()%20%7B%7D%3B%0A%20%20%20%20b2DebugDraw.prototype.SetDrawScale%20%3D%20function%20(drawScale)%20%7B%0A%20%20%20%20%20%20if%20(drawScale%20%3D%3D%3D%20undefined)%20drawScale%20%3D%200%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2DebugDraw.prototype.GetDrawScale%20%3D%20function%20()%20%7B%7D%3B%0A%20%20%20%20b2DebugDraw.prototype.SetLineThickness%20%3D%20function%20(lineThickness)%20%7B%0A%20%20%20%20%20%20if%20(lineThickness%20%3D%3D%3D%20undefined)%20lineThickness%20%3D%200%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2DebugDraw.prototype.GetLineThickness%20%3D%20function%20()%20%7B%7D%3B%0A%20%20%20%20b2DebugDraw.prototype.SetAlpha%20%3D%20function%20(alpha)%20%7B%0A%20%20%20%20%20%20if%20(alpha%20%3D%3D%3D%20undefined)%20alpha%20%3D%200%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2DebugDraw.prototype.GetAlpha%20%3D%20function%20()%20%7B%7D%3B%0A%20%20%20%20b2DebugDraw.prototype.SetFillAlpha%20%3D%20function%20(alpha)%20%7B%0A%20%20%20%20%20%20if%20(alpha%20%3D%3D%3D%20undefined)%20alpha%20%3D%200%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2DebugDraw.prototype.GetFillAlpha%20%3D%20function%20()%20%7B%7D%3B%0A%20%20%20%20b2DebugDraw.prototype.SetXFormScale%20%3D%20function%20(xformScale)%20%7B%0A%20%20%20%20%20%20if%20(xformScale%20%3D%3D%3D%20undefined)%20xformScale%20%3D%200%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2DebugDraw.prototype.GetXFormScale%20%3D%20function%20()%20%7B%7D%3B%0A%20%20%20%20b2DebugDraw.prototype.DrawPolygon%20%3D%20function%20(%0A%20%20%20%20%20%20vertices%2C%0A%20%20%20%20%20%20vertexCount%2C%0A%20%20%20%20%20%20color%0A%20%20%20%20)%20%7B%0A%20%20%20%20%20%20if%20(vertexCount%20%3D%3D%3D%20undefined)%20vertexCount%20%3D%200%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2DebugDraw.prototype.DrawSolidPolygon%20%3D%20function%20(%0A%20%20%20%20%20%20vertices%2C%0A%20%20%20%20%20%20vertexCount%2C%0A%20%20%20%20%20%20color%0A%20%20%20%20)%20%7B%0A%20%20%20%20%20%20if%20(vertexCount%20%3D%3D%3D%20undefined)%20vertexCount%20%3D%200%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2DebugDraw.prototype.DrawCircle%20%3D%20function%20(center%2C%20radius%2C%20color)%20%7B%0A%20%20%20%20%20%20if%20(radius%20%3D%3D%3D%20undefined)%20radius%20%3D%200%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2DebugDraw.prototype.DrawSolidCircle%20%3D%20function%20(%0A%20%20%20%20%20%20center%2C%0A%20%20%20%20%20%20radius%2C%0A%20%20%20%20%20%20axis%2C%0A%20%20%20%20%20%20color%0A%20%20%20%20)%20%7B%0A%20%20%20%20%20%20if%20(radius%20%3D%3D%3D%20undefined)%20radius%20%3D%200%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2DebugDraw.prototype.DrawSegment%20%3D%20function%20(p1%2C%20p2%2C%20color)%20%7B%7D%3B%0A%20%20%20%20b2DebugDraw.prototype.DrawTransform%20%3D%20function%20(xf)%20%7B%7D%3B%0A%20%20%20%20Box2D.postDefs.push(function%20()%20%7B%0A%20%20%20%20%20%20Box2D.Dynamics.b2DebugDraw.e_shapeBit%20%3D%200x0001%3B%0A%20%20%20%20%20%20Box2D.Dynamics.b2DebugDraw.e_jointBit%20%3D%200x0002%3B%0A%20%20%20%20%20%20Box2D.Dynamics.b2DebugDraw.e_aabbBit%20%3D%200x0004%3B%0A%20%20%20%20%20%20Box2D.Dynamics.b2DebugDraw.e_pairBit%20%3D%200x0008%3B%0A%20%20%20%20%20%20Box2D.Dynamics.b2DebugDraw.e_centerOfMassBit%20%3D%200x0010%3B%0A%20%20%20%20%20%20Box2D.Dynamics.b2DebugDraw.e_controllerBit%20%3D%200x0020%3B%0A%20%20%20%20%7D)%3B%0A%20%20%20%20b2DestructionListener.b2DestructionListener%20%3D%20function%20()%20%7B%7D%3B%0A%20%20%20%20b2DestructionListener.prototype.SayGoodbyeJoint%20%3D%20function%20(joint)%20%7B%7D%3B%0A%20%20%20%20b2DestructionListener.prototype.SayGoodbyeFixture%20%3D%20function%20(fixture)%20%7B%7D%3B%0A%20%20%20%20b2FilterData.b2FilterData%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20this.categoryBits%20%3D%200x0001%3B%0A%20%20%20%20%20%20this.maskBits%20%3D%200xffff%3B%0A%20%20%20%20%20%20this.groupIndex%20%3D%200%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2FilterData.prototype.Copy%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20var%20copy%20%3D%20new%20b2FilterData()%3B%0A%20%20%20%20%20%20copy.categoryBits%20%3D%20this.categoryBits%3B%0A%20%20%20%20%20%20copy.maskBits%20%3D%20this.maskBits%3B%0A%20%20%20%20%20%20copy.groupIndex%20%3D%20this.groupIndex%3B%0A%20%20%20%20%20%20return%20copy%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2Fixture.b2Fixture%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20this.m_filter%20%3D%20new%20b2FilterData()%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2Fixture.prototype.GetType%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20return%20this.m_shape.GetType()%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2Fixture.prototype.GetShape%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20return%20this.m_shape%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2Fixture.prototype.SetSensor%20%3D%20function%20(sensor)%20%7B%0A%20%20%20%20%20%20if%20(this.m_isSensor%20%3D%3D%20sensor)%20return%3B%0A%20%20%20%20%20%20this.m_isSensor%20%3D%20sensor%3B%0A%20%20%20%20%20%20if%20(this.m_body%20%3D%3D%20null)%20return%3B%0A%20%20%20%20%20%20var%20edge%20%3D%20this.m_body.GetContactList()%3B%0A%20%20%20%20%20%20while%20(edge)%20%7B%0A%20%20%20%20%20%20%20%20var%20contact%20%3D%20edge.contact%3B%0A%20%20%20%20%20%20%20%20var%20fixtureA%20%3D%20contact.GetFixtureA()%3B%0A%20%20%20%20%20%20%20%20var%20fixtureB%20%3D%20contact.GetFixtureB()%3B%0A%20%20%20%20%20%20%20%20if%20(fixtureA%20%3D%3D%20this%20%7C%7C%20fixtureB%20%3D%3D%20this)%0A%20%20%20%20%20%20%20%20%20%20contact.SetSensor(fixtureA.IsSensor()%20%7C%7C%20fixtureB.IsSensor())%3B%0A%20%20%20%20%20%20%20%20edge%20%3D%20edge.next%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2Fixture.prototype.IsSensor%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20return%20this.m_isSensor%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2Fixture.prototype.SetFilterData%20%3D%20function%20(filter)%20%7B%0A%20%20%20%20%20%20this.m_filter%20%3D%20filter.Copy()%3B%0A%20%20%20%20%20%20if%20(this.m_body)%20return%3B%0A%20%20%20%20%20%20var%20edge%20%3D%20this.m_body.GetContactList()%3B%0A%20%20%20%20%20%20while%20(edge)%20%7B%0A%20%20%20%20%20%20%20%20var%20contact%20%3D%20edge.contact%3B%0A%20%20%20%20%20%20%20%20var%20fixtureA%20%3D%20contact.GetFixtureA()%3B%0A%20%20%20%20%20%20%20%20var%20fixtureB%20%3D%20contact.GetFixtureB()%3B%0A%20%20%20%20%20%20%20%20if%20(fixtureA%20%3D%3D%20this%20%7C%7C%20fixtureB%20%3D%3D%20this)%20contact.FlagForFiltering()%3B%0A%20%20%20%20%20%20%20%20edge%20%3D%20edge.next%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2Fixture.prototype.GetFilterData%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20return%20this.m_filter.Copy()%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2Fixture.prototype.GetBody%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20return%20this.m_body%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2Fixture.prototype.GetNext%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20return%20this.m_next%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2Fixture.prototype.GetUserData%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20return%20this.m_userData%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2Fixture.prototype.SetUserData%20%3D%20function%20(data)%20%7B%0A%20%20%20%20%20%20this.m_userData%20%3D%20data%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2Fixture.prototype.TestPoint%20%3D%20function%20(p)%20%7B%0A%20%20%20%20%20%20return%20this.m_shape.TestPoint(this.m_body.GetTransform()%2C%20p)%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2Fixture.prototype.RayCast%20%3D%20function%20(output%2C%20input)%20%7B%0A%20%20%20%20%20%20return%20this.m_shape.RayCast(output%2C%20input%2C%20this.m_body.GetTransform())%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2Fixture.prototype.GetMassData%20%3D%20function%20(massData)%20%7B%0A%20%20%20%20%20%20if%20(massData%20%3D%3D%3D%20undefined)%20massData%20%3D%20null%3B%0A%20%20%20%20%20%20if%20(massData%20%3D%3D%20null)%20%7B%0A%20%20%20%20%20%20%20%20massData%20%3D%20new%20b2MassData()%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20this.m_shape.ComputeMass(massData%2C%20this.m_density)%3B%0A%20%20%20%20%20%20return%20massData%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2Fixture.prototype.SetDensity%20%3D%20function%20(density)%20%7B%0A%20%20%20%20%20%20if%20(density%20%3D%3D%3D%20undefined)%20density%20%3D%200%3B%0A%20%20%20%20%20%20this.m_density%20%3D%20density%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2Fixture.prototype.GetDensity%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20return%20this.m_density%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2Fixture.prototype.GetFriction%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20return%20this.m_friction%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2Fixture.prototype.SetFriction%20%3D%20function%20(friction)%20%7B%0A%20%20%20%20%20%20if%20(friction%20%3D%3D%3D%20undefined)%20friction%20%3D%200%3B%0A%20%20%20%20%20%20this.m_friction%20%3D%20friction%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2Fixture.prototype.GetRestitution%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20return%20this.m_restitution%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2Fixture.prototype.SetRestitution%20%3D%20function%20(restitution)%20%7B%0A%20%20%20%20%20%20if%20(restitution%20%3D%3D%3D%20undefined)%20restitution%20%3D%200%3B%0A%20%20%20%20%20%20this.m_restitution%20%3D%20restitution%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2Fixture.prototype.GetAABB%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20return%20this.m_aabb%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2Fixture.prototype.b2Fixture%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20this.m_aabb%20%3D%20new%20b2AABB()%3B%0A%20%20%20%20%20%20this.m_userData%20%3D%20null%3B%0A%20%20%20%20%20%20this.m_body%20%3D%20null%3B%0A%20%20%20%20%20%20this.m_next%20%3D%20null%3B%0A%20%20%20%20%20%20this.m_shape%20%3D%20null%3B%0A%20%20%20%20%20%20this.m_density%20%3D%200.0%3B%0A%20%20%20%20%20%20this.m_friction%20%3D%200.0%3B%0A%20%20%20%20%20%20this.m_restitution%20%3D%200.0%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2Fixture.prototype.Create%20%3D%20function%20(body%2C%20xf%2C%20def)%20%7B%0A%20%20%20%20%20%20this.m_userData%20%3D%20def.userData%3B%0A%20%20%20%20%20%20this.m_friction%20%3D%20def.friction%3B%0A%20%20%20%20%20%20this.m_restitution%20%3D%20def.restitution%3B%0A%20%20%20%20%20%20this.m_body%20%3D%20body%3B%0A%20%20%20%20%20%20this.m_next%20%3D%20null%3B%0A%20%20%20%20%20%20this.m_filter%20%3D%20def.filter.Copy()%3B%0A%20%20%20%20%20%20this.m_isSensor%20%3D%20def.isSensor%3B%0A%20%20%20%20%20%20this.m_shape%20%3D%20def.shape.Copy()%3B%0A%20%20%20%20%20%20this.m_density%20%3D%20def.density%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2Fixture.prototype.Destroy%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20this.m_shape%20%3D%20null%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2Fixture.prototype.CreateProxy%20%3D%20function%20(broadPhase%2C%20xf)%20%7B%0A%20%20%20%20%20%20this.m_shape.ComputeAABB(this.m_aabb%2C%20xf)%3B%0A%20%20%20%20%20%20this.m_proxy%20%3D%20broadPhase.CreateProxy(this.m_aabb%2C%20this)%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2Fixture.prototype.DestroyProxy%20%3D%20function%20(broadPhase)%20%7B%0A%20%20%20%20%20%20if%20(this.m_proxy%20%3D%3D%20null)%20%7B%0A%20%20%20%20%20%20%20%20return%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20broadPhase.DestroyProxy(this.m_proxy)%3B%0A%20%20%20%20%20%20this.m_proxy%20%3D%20null%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2Fixture.prototype.Synchronize%20%3D%20function%20(%0A%20%20%20%20%20%20broadPhase%2C%0A%20%20%20%20%20%20transform1%2C%0A%20%20%20%20%20%20transform2%0A%20%20%20%20)%20%7B%0A%20%20%20%20%20%20if%20(!this.m_proxy)%20return%3B%0A%20%20%20%20%20%20var%20aabb1%20%3D%20new%20b2AABB()%3B%0A%20%20%20%20%20%20var%20aabb2%20%3D%20new%20b2AABB()%3B%0A%20%20%20%20%20%20this.m_shape.ComputeAABB(aabb1%2C%20transform1)%3B%0A%20%20%20%20%20%20this.m_shape.ComputeAABB(aabb2%2C%20transform2)%3B%0A%20%20%20%20%20%20this.m_aabb.Combine(aabb1%2C%20aabb2)%3B%0A%20%20%20%20%20%20var%20displacement%20%3D%20b2Math.SubtractVV(%0A%20%20%20%20%20%20%20%20transform2.position%2C%0A%20%20%20%20%20%20%20%20transform1.position%0A%20%20%20%20%20%20)%3B%0A%20%20%20%20%20%20broadPhase.MoveProxy(this.m_proxy%2C%20this.m_aabb%2C%20displacement)%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2FixtureDef.b2FixtureDef%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20this.filter%20%3D%20new%20b2FilterData()%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2FixtureDef.prototype.b2FixtureDef%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20this.shape%20%3D%20null%3B%0A%20%20%20%20%20%20this.userData%20%3D%20null%3B%0A%20%20%20%20%20%20this.friction%20%3D%200.2%3B%0A%20%20%20%20%20%20this.restitution%20%3D%200.0%3B%0A%20%20%20%20%20%20this.density%20%3D%200.0%3B%0A%20%20%20%20%20%20this.filter.categoryBits%20%3D%200x0001%3B%0A%20%20%20%20%20%20this.filter.maskBits%20%3D%200xffff%3B%0A%20%20%20%20%20%20this.filter.groupIndex%20%3D%200%3B%0A%20%20%20%20%20%20this.isSensor%20%3D%20false%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2Island.b2Island%20%3D%20function%20()%20%7B%7D%3B%0A%20%20%20%20b2Island.prototype.b2Island%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20this.m_bodies%20%3D%20new%20Vector()%3B%0A%20%20%20%20%20%20this.m_contacts%20%3D%20new%20Vector()%3B%0A%20%20%20%20%20%20this.m_joints%20%3D%20new%20Vector()%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2Island.prototype.Initialize%20%3D%20function%20(%0A%20%20%20%20%20%20bodyCapacity%2C%0A%20%20%20%20%20%20contactCapacity%2C%0A%20%20%20%20%20%20jointCapacity%2C%0A%20%20%20%20%20%20allocator%2C%0A%20%20%20%20%20%20listener%2C%0A%20%20%20%20%20%20contactSolver%0A%20%20%20%20)%20%7B%0A%20%20%20%20%20%20if%20(bodyCapacity%20%3D%3D%3D%20undefined)%20bodyCapacity%20%3D%200%3B%0A%20%20%20%20%20%20if%20(contactCapacity%20%3D%3D%3D%20undefined)%20contactCapacity%20%3D%200%3B%0A%20%20%20%20%20%20if%20(jointCapacity%20%3D%3D%3D%20undefined)%20jointCapacity%20%3D%200%3B%0A%20%20%20%20%20%20var%20i%20%3D%200%3B%0A%20%20%20%20%20%20this.m_bodyCapacity%20%3D%20bodyCapacity%3B%0A%20%20%20%20%20%20this.m_contactCapacity%20%3D%20contactCapacity%3B%0A%20%20%20%20%20%20this.m_jointCapacity%20%3D%20jointCapacity%3B%0A%20%20%20%20%20%20this.m_bodyCount%20%3D%200%3B%0A%20%20%20%20%20%20this.m_contactCount%20%3D%200%3B%0A%20%20%20%20%20%20this.m_jointCount%20%3D%200%3B%0A%20%20%20%20%20%20this.m_allocator%20%3D%20allocator%3B%0A%20%20%20%20%20%20this.m_listener%20%3D%20listener%3B%0A%20%20%20%20%20%20this.m_contactSolver%20%3D%20contactSolver%3B%0A%20%20%20%20%20%20for%20(i%20%3D%20this.m_bodies.length%3B%20i%20%3C%20bodyCapacity%3B%20i%2B%2B)%0A%20%20%20%20%20%20%20%20this.m_bodies%5Bi%5D%20%3D%20null%3B%0A%20%20%20%20%20%20for%20(i%20%3D%20this.m_contacts.length%3B%20i%20%3C%20contactCapacity%3B%20i%2B%2B)%0A%20%20%20%20%20%20%20%20this.m_contacts%5Bi%5D%20%3D%20null%3B%0A%20%20%20%20%20%20for%20(i%20%3D%20this.m_joints.length%3B%20i%20%3C%20jointCapacity%3B%20i%2B%2B)%0A%20%20%20%20%20%20%20%20this.m_joints%5Bi%5D%20%3D%20null%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2Island.prototype.Clear%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20this.m_bodyCount%20%3D%200%3B%0A%20%20%20%20%20%20this.m_contactCount%20%3D%200%3B%0A%20%20%20%20%20%20this.m_jointCount%20%3D%200%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2Island.prototype.Solve%20%3D%20function%20(step%2C%20gravity%2C%20allowSleep)%20%7B%0A%20%20%20%20%20%20var%20i%20%3D%200%3B%0A%20%20%20%20%20%20var%20j%20%3D%200%3B%0A%20%20%20%20%20%20var%20b%3B%0A%20%20%20%20%20%20var%20joint%3B%0A%20%20%20%20%20%20for%20(i%20%3D%200%3B%20i%20%3C%20this.m_bodyCount%3B%20%2B%2Bi)%20%7B%0A%20%20%20%20%20%20%20%20b%20%3D%20this.m_bodies%5Bi%5D%3B%0A%20%20%20%20%20%20%20%20if%20(b.GetType()%20!%3D%20b2Body.b2_dynamicBody)%20continue%3B%0A%20%20%20%20%20%20%20%20b.m_linearVelocity.x%20%2B%3D%0A%20%20%20%20%20%20%20%20%20%20step.dt%20*%20(gravity.x%20%2B%20b.m_invMass%20*%20b.m_force.x)%3B%0A%20%20%20%20%20%20%20%20b.m_linearVelocity.y%20%2B%3D%0A%20%20%20%20%20%20%20%20%20%20step.dt%20*%20(gravity.y%20%2B%20b.m_invMass%20*%20b.m_force.y)%3B%0A%20%20%20%20%20%20%20%20b.m_angularVelocity%20%2B%3D%20step.dt%20*%20b.m_invI%20*%20b.m_torque%3B%0A%20%20%20%20%20%20%20%20b.m_linearVelocity.Multiply(%0A%20%20%20%20%20%20%20%20%20%20b2Math.Clamp(1.0%20-%20step.dt%20*%20b.m_linearDamping%2C%200.0%2C%201.0)%0A%20%20%20%20%20%20%20%20)%3B%0A%20%20%20%20%20%20%20%20b.m_angularVelocity%20*%3D%20b2Math.Clamp(%0A%20%20%20%20%20%20%20%20%20%201.0%20-%20step.dt%20*%20b.m_angularDamping%2C%0A%20%20%20%20%20%20%20%20%20%200.0%2C%0A%20%20%20%20%20%20%20%20%20%201.0%0A%20%20%20%20%20%20%20%20)%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20this.m_contactSolver.Initialize(%0A%20%20%20%20%20%20%20%20step%2C%0A%20%20%20%20%20%20%20%20this.m_contacts%2C%0A%20%20%20%20%20%20%20%20this.m_contactCount%2C%0A%20%20%20%20%20%20%20%20this.m_allocator%0A%20%20%20%20%20%20)%3B%0A%20%20%20%20%20%20var%20contactSolver%20%3D%20this.m_contactSolver%3B%0A%20%20%20%20%20%20contactSolver.InitVelocityConstraints(step)%3B%0A%20%20%20%20%20%20for%20(i%20%3D%200%3B%20i%20%3C%20this.m_jointCount%3B%20%2B%2Bi)%20%7B%0A%20%20%20%20%20%20%20%20joint%20%3D%20this.m_joints%5Bi%5D%3B%0A%20%20%20%20%20%20%20%20joint.InitVelocityConstraints(step)%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20for%20(i%20%3D%200%3B%20i%20%3C%20step.velocityIterations%3B%20%2B%2Bi)%20%7B%0A%20%20%20%20%20%20%20%20for%20(j%20%3D%200%3B%20j%20%3C%20this.m_jointCount%3B%20%2B%2Bj)%20%7B%0A%20%20%20%20%20%20%20%20%20%20joint%20%3D%20this.m_joints%5Bj%5D%3B%0A%20%20%20%20%20%20%20%20%20%20joint.SolveVelocityConstraints(step)%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20contactSolver.SolveVelocityConstraints()%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20for%20(i%20%3D%200%3B%20i%20%3C%20this.m_jointCount%3B%20%2B%2Bi)%20%7B%0A%20%20%20%20%20%20%20%20joint%20%3D%20this.m_joints%5Bi%5D%3B%0A%20%20%20%20%20%20%20%20joint.FinalizeVelocityConstraints()%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20contactSolver.FinalizeVelocityConstraints()%3B%0A%20%20%20%20%20%20for%20(i%20%3D%200%3B%20i%20%3C%20this.m_bodyCount%3B%20%2B%2Bi)%20%7B%0A%20%20%20%20%20%20%20%20b%20%3D%20this.m_bodies%5Bi%5D%3B%0A%20%20%20%20%20%20%20%20if%20(b.GetType()%20%3D%3D%20b2Body.b2_staticBody)%20continue%3B%0A%20%20%20%20%20%20%20%20var%20translationX%20%3D%20step.dt%20*%20b.m_linearVelocity.x%3B%0A%20%20%20%20%20%20%20%20var%20translationY%20%3D%20step.dt%20*%20b.m_linearVelocity.y%3B%0A%20%20%20%20%20%20%20%20if%20(%0A%20%20%20%20%20%20%20%20%20%20translationX%20*%20translationX%20%2B%20translationY%20*%20translationY%20%3E%0A%20%20%20%20%20%20%20%20%20%20b2Settings.b2_maxTranslationSquared%0A%20%20%20%20%20%20%20%20)%20%7B%0A%20%20%20%20%20%20%20%20%20%20b.m_linearVelocity.Normalize()%3B%0A%20%20%20%20%20%20%20%20%20%20b.m_linearVelocity.x%20*%3D%20b2Settings.b2_maxTranslation%20*%20step.inv_dt%3B%0A%20%20%20%20%20%20%20%20%20%20b.m_linearVelocity.y%20*%3D%20b2Settings.b2_maxTranslation%20*%20step.inv_dt%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20var%20rotation%20%3D%20step.dt%20*%20b.m_angularVelocity%3B%0A%20%20%20%20%20%20%20%20if%20(rotation%20*%20rotation%20%3E%20b2Settings.b2_maxRotationSquared)%20%7B%0A%20%20%20%20%20%20%20%20%20%20if%20(b.m_angularVelocity%20%3C%200.0)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20b.m_angularVelocity%20%3D%20-b2Settings.b2_maxRotation%20*%20step.inv_dt%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20b.m_angularVelocity%20%3D%20b2Settings.b2_maxRotation%20*%20step.inv_dt%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20b.m_sweep.c0.SetV(b.m_sweep.c)%3B%0A%20%20%20%20%20%20%20%20b.m_sweep.a0%20%3D%20b.m_sweep.a%3B%0A%20%20%20%20%20%20%20%20b.m_sweep.c.x%20%2B%3D%20step.dt%20*%20b.m_linearVelocity.x%3B%0A%20%20%20%20%20%20%20%20b.m_sweep.c.y%20%2B%3D%20step.dt%20*%20b.m_linearVelocity.y%3B%0A%20%20%20%20%20%20%20%20b.m_sweep.a%20%2B%3D%20step.dt%20*%20b.m_angularVelocity%3B%0A%20%20%20%20%20%20%20%20b.SynchronizeTransform()%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20for%20(i%20%3D%200%3B%20i%20%3C%20step.positionIterations%3B%20%2B%2Bi)%20%7B%0A%20%20%20%20%20%20%20%20var%20contactsOkay%20%3D%20contactSolver.SolvePositionConstraints(%0A%20%20%20%20%20%20%20%20%20%20b2Settings.b2_contactBaumgarte%0A%20%20%20%20%20%20%20%20)%3B%0A%20%20%20%20%20%20%20%20var%20jointsOkay%20%3D%20true%3B%0A%20%20%20%20%20%20%20%20for%20(j%20%3D%200%3B%20j%20%3C%20this.m_jointCount%3B%20%2B%2Bj)%20%7B%0A%20%20%20%20%20%20%20%20%20%20joint%20%3D%20this.m_joints%5Bj%5D%3B%0A%20%20%20%20%20%20%20%20%20%20var%20jointOkay%20%3D%20joint.SolvePositionConstraints(%0A%20%20%20%20%20%20%20%20%20%20%20%20b2Settings.b2_contactBaumgarte%0A%20%20%20%20%20%20%20%20%20%20)%3B%0A%20%20%20%20%20%20%20%20%20%20jointsOkay%20%3D%20jointsOkay%20%26%26%20jointOkay%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20if%20(contactsOkay%20%26%26%20jointsOkay)%20%7B%0A%20%20%20%20%20%20%20%20%20%20break%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20this.Report(contactSolver.m_constraints)%3B%0A%20%20%20%20%20%20if%20(allowSleep)%20%7B%0A%20%20%20%20%20%20%20%20var%20minSleepTime%20%3D%20Number.MAX_VALUE%3B%0A%20%20%20%20%20%20%20%20var%20linTolSqr%20%3D%0A%20%20%20%20%20%20%20%20%20%20b2Settings.b2_linearSleepTolerance%20*%0A%20%20%20%20%20%20%20%20%20%20b2Settings.b2_linearSleepTolerance%3B%0A%20%20%20%20%20%20%20%20var%20angTolSqr%20%3D%0A%20%20%20%20%20%20%20%20%20%20b2Settings.b2_angularSleepTolerance%20*%0A%20%20%20%20%20%20%20%20%20%20b2Settings.b2_angularSleepTolerance%3B%0A%20%20%20%20%20%20%20%20for%20(i%20%3D%200%3B%20i%20%3C%20this.m_bodyCount%3B%20%2B%2Bi)%20%7B%0A%20%20%20%20%20%20%20%20%20%20b%20%3D%20this.m_bodies%5Bi%5D%3B%0A%20%20%20%20%20%20%20%20%20%20if%20(b.GetType()%20%3D%3D%20b2Body.b2_staticBody)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20continue%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20if%20((b.m_flags%20%26%20b2Body.e_allowSleepFlag)%20%3D%3D%200)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20b.m_sleepTime%20%3D%200.0%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20minSleepTime%20%3D%200.0%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20if%20(%0A%20%20%20%20%20%20%20%20%20%20%20%20(b.m_flags%20%26%20b2Body.e_allowSleepFlag)%20%3D%3D%200%20%7C%7C%0A%20%20%20%20%20%20%20%20%20%20%20%20b.m_angularVelocity%20*%20b.m_angularVelocity%20%3E%20angTolSqr%20%7C%7C%0A%20%20%20%20%20%20%20%20%20%20%20%20b2Math.Dot(b.m_linearVelocity%2C%20b.m_linearVelocity)%20%3E%20linTolSqr%0A%20%20%20%20%20%20%20%20%20%20)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20b.m_sleepTime%20%3D%200.0%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20minSleepTime%20%3D%200.0%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20b.m_sleepTime%20%2B%3D%20step.dt%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20minSleepTime%20%3D%20b2Math.Min(minSleepTime%2C%20b.m_sleepTime)%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20if%20(minSleepTime%20%3E%3D%20b2Settings.b2_timeToSleep)%20%7B%0A%20%20%20%20%20%20%20%20%20%20for%20(i%20%3D%200%3B%20i%20%3C%20this.m_bodyCount%3B%20%2B%2Bi)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20b%20%3D%20this.m_bodies%5Bi%5D%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20b.SetAwake(false)%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2Island.prototype.SolveTOI%20%3D%20function%20(subStep)%20%7B%0A%20%20%20%20%20%20var%20i%20%3D%200%3B%0A%20%20%20%20%20%20var%20j%20%3D%200%3B%0A%20%20%20%20%20%20this.m_contactSolver.Initialize(%0A%20%20%20%20%20%20%20%20subStep%2C%0A%20%20%20%20%20%20%20%20this.m_contacts%2C%0A%20%20%20%20%20%20%20%20this.m_contactCount%2C%0A%20%20%20%20%20%20%20%20this.m_allocator%0A%20%20%20%20%20%20)%3B%0A%20%20%20%20%20%20var%20contactSolver%20%3D%20this.m_contactSolver%3B%0A%20%20%20%20%20%20for%20(i%20%3D%200%3B%20i%20%3C%20this.m_jointCount%3B%20%2B%2Bi)%20%7B%0A%20%20%20%20%20%20%20%20this.m_joints%5Bi%5D.InitVelocityConstraints(subStep)%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20for%20(i%20%3D%200%3B%20i%20%3C%20subStep.velocityIterations%3B%20%2B%2Bi)%20%7B%0A%20%20%20%20%20%20%20%20contactSolver.SolveVelocityConstraints()%3B%0A%20%20%20%20%20%20%20%20for%20(j%20%3D%200%3B%20j%20%3C%20this.m_jointCount%3B%20%2B%2Bj)%20%7B%0A%20%20%20%20%20%20%20%20%20%20this.m_joints%5Bj%5D.SolveVelocityConstraints(subStep)%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20for%20(i%20%3D%200%3B%20i%20%3C%20this.m_bodyCount%3B%20%2B%2Bi)%20%7B%0A%20%20%20%20%20%20%20%20var%20b%20%3D%20this.m_bodies%5Bi%5D%3B%0A%20%20%20%20%20%20%20%20if%20(b.GetType()%20%3D%3D%20b2Body.b2_staticBody)%20continue%3B%0A%20%20%20%20%20%20%20%20var%20translationX%20%3D%20subStep.dt%20*%20b.m_linearVelocity.x%3B%0A%20%20%20%20%20%20%20%20var%20translationY%20%3D%20subStep.dt%20*%20b.m_linearVelocity.y%3B%0A%20%20%20%20%20%20%20%20if%20(%0A%20%20%20%20%20%20%20%20%20%20translationX%20*%20translationX%20%2B%20translationY%20*%20translationY%20%3E%0A%20%20%20%20%20%20%20%20%20%20b2Settings.b2_maxTranslationSquared%0A%20%20%20%20%20%20%20%20)%20%7B%0A%20%20%20%20%20%20%20%20%20%20b.m_linearVelocity.Normalize()%3B%0A%20%20%20%20%20%20%20%20%20%20b.m_linearVelocity.x%20*%3D%20b2Settings.b2_maxTranslation%20*%20subStep.inv_dt%3B%0A%20%20%20%20%20%20%20%20%20%20b.m_linearVelocity.y%20*%3D%20b2Settings.b2_maxTranslation%20*%20subStep.inv_dt%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20var%20rotation%20%3D%20subStep.dt%20*%20b.m_angularVelocity%3B%0A%20%20%20%20%20%20%20%20if%20(rotation%20*%20rotation%20%3E%20b2Settings.b2_maxRotationSquared)%20%7B%0A%20%20%20%20%20%20%20%20%20%20if%20(b.m_angularVelocity%20%3C%200.0)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20b.m_angularVelocity%20%3D%20-b2Settings.b2_maxRotation%20*%20subStep.inv_dt%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20b.m_angularVelocity%20%3D%20b2Settings.b2_maxRotation%20*%20subStep.inv_dt%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20b.m_sweep.c0.SetV(b.m_sweep.c)%3B%0A%20%20%20%20%20%20%20%20b.m_sweep.a0%20%3D%20b.m_sweep.a%3B%0A%20%20%20%20%20%20%20%20b.m_sweep.c.x%20%2B%3D%20subStep.dt%20*%20b.m_linearVelocity.x%3B%0A%20%20%20%20%20%20%20%20b.m_sweep.c.y%20%2B%3D%20subStep.dt%20*%20b.m_linearVelocity.y%3B%0A%20%20%20%20%20%20%20%20b.m_sweep.a%20%2B%3D%20subStep.dt%20*%20b.m_angularVelocity%3B%0A%20%20%20%20%20%20%20%20b.SynchronizeTransform()%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20var%20k_toiBaumgarte%20%3D%200.75%3B%0A%20%20%20%20%20%20for%20(i%20%3D%200%3B%20i%20%3C%20subStep.positionIterations%3B%20%2B%2Bi)%20%7B%0A%20%20%20%20%20%20%20%20var%20contactsOkay%20%3D%0A%20%20%20%20%20%20%20%20%20%20contactSolver.SolvePositionConstraints(k_toiBaumgarte)%3B%0A%20%20%20%20%20%20%20%20var%20jointsOkay%20%3D%20true%3B%0A%20%20%20%20%20%20%20%20for%20(j%20%3D%200%3B%20j%20%3C%20this.m_jointCount%3B%20%2B%2Bj)%20%7B%0A%20%20%20%20%20%20%20%20%20%20var%20jointOkay%20%3D%20this.m_joints%5Bj%5D.SolvePositionConstraints(%0A%20%20%20%20%20%20%20%20%20%20%20%20b2Settings.b2_contactBaumgarte%0A%20%20%20%20%20%20%20%20%20%20)%3B%0A%20%20%20%20%20%20%20%20%20%20jointsOkay%20%3D%20jointsOkay%20%26%26%20jointOkay%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20if%20(contactsOkay%20%26%26%20jointsOkay)%20%7B%0A%20%20%20%20%20%20%20%20%20%20break%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20this.Report(contactSolver.m_constraints)%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2Island.prototype.Report%20%3D%20function%20(constraints)%20%7B%0A%20%20%20%20%20%20if%20(this.m_listener%20%3D%3D%20null)%20%7B%0A%20%20%20%20%20%20%20%20return%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20for%20(var%20i%20%3D%200%3B%20i%20%3C%20this.m_contactCount%3B%20%2B%2Bi)%20%7B%0A%20%20%20%20%20%20%20%20var%20c%20%3D%20this.m_contacts%5Bi%5D%3B%0A%20%20%20%20%20%20%20%20var%20cc%20%3D%20constraints%5Bi%5D%3B%0A%20%20%20%20%20%20%20%20for%20(var%20j%20%3D%200%3B%20j%20%3C%20cc.pointCount%3B%20%2B%2Bj)%20%7B%0A%20%20%20%20%20%20%20%20%20%20b2Island.s_impulse.normalImpulses%5Bj%5D%20%3D%20cc.points%5Bj%5D.normalImpulse%3B%0A%20%20%20%20%20%20%20%20%20%20b2Island.s_impulse.tangentImpulses%5Bj%5D%20%3D%20cc.points%5Bj%5D.tangentImpulse%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20this.m_listener.PostSolve(c%2C%20b2Island.s_impulse)%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2Island.prototype.AddBody%20%3D%20function%20(body)%20%7B%0A%20%20%20%20%20%20body.m_islandIndex%20%3D%20this.m_bodyCount%3B%0A%20%20%20%20%20%20this.m_bodies%5Bthis.m_bodyCount%2B%2B%5D%20%3D%20body%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2Island.prototype.AddContact%20%3D%20function%20(contact)%20%7B%0A%20%20%20%20%20%20this.m_contacts%5Bthis.m_contactCount%2B%2B%5D%20%3D%20contact%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2Island.prototype.AddJoint%20%3D%20function%20(joint)%20%7B%0A%20%20%20%20%20%20this.m_joints%5Bthis.m_jointCount%2B%2B%5D%20%3D%20joint%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20Box2D.postDefs.push(function%20()%20%7B%0A%20%20%20%20%20%20Box2D.Dynamics.b2Island.s_impulse%20%3D%20new%20b2ContactImpulse()%3B%0A%20%20%20%20%7D)%3B%0A%20%20%20%20b2TimeStep.b2TimeStep%20%3D%20function%20()%20%7B%7D%3B%0A%20%20%20%20b2TimeStep.prototype.Set%20%3D%20function%20(step)%20%7B%0A%20%20%20%20%20%20this.dt%20%3D%20step.dt%3B%0A%20%20%20%20%20%20this.inv_dt%20%3D%20step.inv_dt%3B%0A%20%20%20%20%20%20this.positionIterations%20%3D%20step.positionIterations%3B%0A%20%20%20%20%20%20this.velocityIterations%20%3D%20step.velocityIterations%3B%0A%20%20%20%20%20%20this.warmStarting%20%3D%20step.warmStarting%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2World.b2World%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20this.s_stack%20%3D%20new%20Vector()%3B%0A%20%20%20%20%20%20this.m_contactManager%20%3D%20new%20b2ContactManager()%3B%0A%20%20%20%20%20%20this.m_contactSolver%20%3D%20new%20b2ContactSolver()%3B%0A%20%20%20%20%20%20this.m_island%20%3D%20new%20b2Island()%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2World.prototype.b2World%20%3D%20function%20(gravity%2C%20doSleep)%20%7B%0A%20%20%20%20%20%20this.m_destructionListener%20%3D%20null%3B%0A%20%20%20%20%20%20this.m_debugDraw%20%3D%20null%3B%0A%20%20%20%20%20%20this.m_bodyList%20%3D%20null%3B%0A%20%20%20%20%20%20this.m_contactList%20%3D%20null%3B%0A%20%20%20%20%20%20this.m_jointList%20%3D%20null%3B%0A%20%20%20%20%20%20this.m_controllerList%20%3D%20null%3B%0A%20%20%20%20%20%20this.m_bodyCount%20%3D%200%3B%0A%20%20%20%20%20%20this.m_contactCount%20%3D%200%3B%0A%20%20%20%20%20%20this.m_jointCount%20%3D%200%3B%0A%20%20%20%20%20%20this.m_controllerCount%20%3D%200%3B%0A%20%20%20%20%20%20b2World.m_warmStarting%20%3D%20true%3B%0A%20%20%20%20%20%20b2World.m_continuousPhysics%20%3D%20true%3B%0A%20%20%20%20%20%20this.m_allowSleep%20%3D%20doSleep%3B%0A%20%20%20%20%20%20this.m_gravity%20%3D%20gravity%3B%0A%20%20%20%20%20%20this.m_inv_dt0%20%3D%200.0%3B%0A%20%20%20%20%20%20this.m_contactManager.m_world%20%3D%20this%3B%0A%20%20%20%20%20%20var%20bd%20%3D%20new%20b2BodyDef()%3B%0A%20%20%20%20%20%20this.m_groundBody%20%3D%20this.CreateBody(bd)%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2World.prototype.SetDestructionListener%20%3D%20function%20(listener)%20%7B%0A%20%20%20%20%20%20this.m_destructionListener%20%3D%20listener%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2World.prototype.SetContactFilter%20%3D%20function%20(filter)%20%7B%0A%20%20%20%20%20%20this.m_contactManager.m_contactFilter%20%3D%20filter%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2World.prototype.SetContactListener%20%3D%20function%20(listener)%20%7B%0A%20%20%20%20%20%20this.m_contactManager.m_contactListener%20%3D%20listener%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2World.prototype.SetDebugDraw%20%3D%20function%20(debugDraw)%20%7B%0A%20%20%20%20%20%20this.m_debugDraw%20%3D%20debugDraw%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2World.prototype.SetBroadPhase%20%3D%20function%20(broadPhase)%20%7B%0A%20%20%20%20%20%20var%20oldBroadPhase%20%3D%20this.m_contactManager.m_broadPhase%3B%0A%20%20%20%20%20%20this.m_contactManager.m_broadPhase%20%3D%20broadPhase%3B%0A%20%20%20%20%20%20for%20(var%20b%20%3D%20this.m_bodyList%3B%20b%3B%20b%20%3D%20b.m_next)%20%7B%0A%20%20%20%20%20%20%20%20for%20(var%20f%20%3D%20b.m_fixtureList%3B%20f%3B%20f%20%3D%20f.m_next)%20%7B%0A%20%20%20%20%20%20%20%20%20%20f.m_proxy%20%3D%20broadPhase.CreateProxy(%0A%20%20%20%20%20%20%20%20%20%20%20%20oldBroadPhase.GetFatAABB(f.m_proxy)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20f%0A%20%20%20%20%20%20%20%20%20%20)%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2World.prototype.Validate%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20this.m_contactManager.m_broadPhase.Validate()%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2World.prototype.GetProxyCount%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20return%20this.m_contactManager.m_broadPhase.GetProxyCount()%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2World.prototype.CreateBody%20%3D%20function%20(def)%20%7B%0A%20%20%20%20%20%20if%20(this.IsLocked()%20%3D%3D%20true)%20%7B%0A%20%20%20%20%20%20%20%20return%20null%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20var%20b%20%3D%20new%20b2Body(def%2C%20this)%3B%0A%20%20%20%20%20%20b.m_prev%20%3D%20null%3B%0A%20%20%20%20%20%20b.m_next%20%3D%20this.m_bodyList%3B%0A%20%20%20%20%20%20if%20(this.m_bodyList)%20%7B%0A%20%20%20%20%20%20%20%20this.m_bodyList.m_prev%20%3D%20b%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20this.m_bodyList%20%3D%20b%3B%0A%20%20%20%20%20%20%2B%2Bthis.m_bodyCount%3B%0A%20%20%20%20%20%20return%20b%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2World.prototype.DestroyBody%20%3D%20function%20(b)%20%7B%0A%20%20%20%20%20%20if%20(this.IsLocked()%20%3D%3D%20true)%20%7B%0A%20%20%20%20%20%20%20%20return%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20var%20jn%20%3D%20b.m_jointList%3B%0A%20%20%20%20%20%20while%20(jn)%20%7B%0A%20%20%20%20%20%20%20%20var%20jn0%20%3D%20jn%3B%0A%20%20%20%20%20%20%20%20jn%20%3D%20jn.next%3B%0A%20%20%20%20%20%20%20%20if%20(this.m_destructionListener)%20%7B%0A%20%20%20%20%20%20%20%20%20%20this.m_destructionListener.SayGoodbyeJoint(jn0.joint)%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20this.DestroyJoint(jn0.joint)%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20var%20coe%20%3D%20b.m_controllerList%3B%0A%20%20%20%20%20%20while%20(coe)%20%7B%0A%20%20%20%20%20%20%20%20var%20coe0%20%3D%20coe%3B%0A%20%20%20%20%20%20%20%20coe%20%3D%20coe.nextController%3B%0A%20%20%20%20%20%20%20%20coe0.controller.RemoveBody(b)%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20var%20ce%20%3D%20b.m_contactList%3B%0A%20%20%20%20%20%20while%20(ce)%20%7B%0A%20%20%20%20%20%20%20%20var%20ce0%20%3D%20ce%3B%0A%20%20%20%20%20%20%20%20ce%20%3D%20ce.next%3B%0A%20%20%20%20%20%20%20%20this.m_contactManager.Destroy(ce0.contact)%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20b.m_contactList%20%3D%20null%3B%0A%20%20%20%20%20%20var%20f%20%3D%20b.m_fixtureList%3B%0A%20%20%20%20%20%20while%20(f)%20%7B%0A%20%20%20%20%20%20%20%20var%20f0%20%3D%20f%3B%0A%20%20%20%20%20%20%20%20f%20%3D%20f.m_next%3B%0A%20%20%20%20%20%20%20%20if%20(this.m_destructionListener)%20%7B%0A%20%20%20%20%20%20%20%20%20%20this.m_destructionListener.SayGoodbyeFixture(f0)%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20f0.DestroyProxy(this.m_contactManager.m_broadPhase)%3B%0A%20%20%20%20%20%20%20%20f0.Destroy()%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20b.m_fixtureList%20%3D%20null%3B%0A%20%20%20%20%20%20b.m_fixtureCount%20%3D%200%3B%0A%20%20%20%20%20%20if%20(b.m_prev)%20%7B%0A%20%20%20%20%20%20%20%20b.m_prev.m_next%20%3D%20b.m_next%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20if%20(b.m_next)%20%7B%0A%20%20%20%20%20%20%20%20b.m_next.m_prev%20%3D%20b.m_prev%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20if%20(b%20%3D%3D%20this.m_bodyList)%20%7B%0A%20%20%20%20%20%20%20%20this.m_bodyList%20%3D%20b.m_next%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20--this.m_bodyCount%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2World.prototype.CreateJoint%20%3D%20function%20(def)%20%7B%0A%20%20%20%20%20%20var%20j%20%3D%20b2Joint.Create(def%2C%20null)%3B%0A%20%20%20%20%20%20j.m_prev%20%3D%20null%3B%0A%20%20%20%20%20%20j.m_next%20%3D%20this.m_jointList%3B%0A%20%20%20%20%20%20if%20(this.m_jointList)%20%7B%0A%20%20%20%20%20%20%20%20this.m_jointList.m_prev%20%3D%20j%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20this.m_jointList%20%3D%20j%3B%0A%20%20%20%20%20%20%2B%2Bthis.m_jointCount%3B%0A%20%20%20%20%20%20j.m_edgeA.joint%20%3D%20j%3B%0A%20%20%20%20%20%20j.m_edgeA.other%20%3D%20j.m_bodyB%3B%0A%20%20%20%20%20%20j.m_edgeA.prev%20%3D%20null%3B%0A%20%20%20%20%20%20j.m_edgeA.next%20%3D%20j.m_bodyA.m_jointList%3B%0A%20%20%20%20%20%20if%20(j.m_bodyA.m_jointList)%20j.m_bodyA.m_jointList.prev%20%3D%20j.m_edgeA%3B%0A%20%20%20%20%20%20j.m_bodyA.m_jointList%20%3D%20j.m_edgeA%3B%0A%20%20%20%20%20%20j.m_edgeB.joint%20%3D%20j%3B%0A%20%20%20%20%20%20j.m_edgeB.other%20%3D%20j.m_bodyA%3B%0A%20%20%20%20%20%20j.m_edgeB.prev%20%3D%20null%3B%0A%20%20%20%20%20%20j.m_edgeB.next%20%3D%20j.m_bodyB.m_jointList%3B%0A%20%20%20%20%20%20if%20(j.m_bodyB.m_jointList)%20j.m_bodyB.m_jointList.prev%20%3D%20j.m_edgeB%3B%0A%20%20%20%20%20%20j.m_bodyB.m_jointList%20%3D%20j.m_edgeB%3B%0A%20%20%20%20%20%20var%20bodyA%20%3D%20def.bodyA%3B%0A%20%20%20%20%20%20var%20bodyB%20%3D%20def.bodyB%3B%0A%20%20%20%20%20%20if%20(def.collideConnected%20%3D%3D%20false)%20%7B%0A%20%20%20%20%20%20%20%20var%20edge%20%3D%20bodyB.GetContactList()%3B%0A%20%20%20%20%20%20%20%20while%20(edge)%20%7B%0A%20%20%20%20%20%20%20%20%20%20if%20(edge.other%20%3D%3D%20bodyA)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20edge.contact.FlagForFiltering()%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20edge%20%3D%20edge.next%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20return%20j%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2World.prototype.DestroyJoint%20%3D%20function%20(j)%20%7B%0A%20%20%20%20%20%20var%20collideConnected%20%3D%20j.m_collideConnected%3B%0A%20%20%20%20%20%20if%20(j.m_prev)%20%7B%0A%20%20%20%20%20%20%20%20j.m_prev.m_next%20%3D%20j.m_next%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20if%20(j.m_next)%20%7B%0A%20%20%20%20%20%20%20%20j.m_next.m_prev%20%3D%20j.m_prev%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20if%20(j%20%3D%3D%20this.m_jointList)%20%7B%0A%20%20%20%20%20%20%20%20this.m_jointList%20%3D%20j.m_next%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20var%20bodyA%20%3D%20j.m_bodyA%3B%0A%20%20%20%20%20%20var%20bodyB%20%3D%20j.m_bodyB%3B%0A%20%20%20%20%20%20bodyA.SetAwake(true)%3B%0A%20%20%20%20%20%20bodyB.SetAwake(true)%3B%0A%20%20%20%20%20%20if%20(j.m_edgeA.prev)%20%7B%0A%20%20%20%20%20%20%20%20j.m_edgeA.prev.next%20%3D%20j.m_edgeA.next%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20if%20(j.m_edgeA.next)%20%7B%0A%20%20%20%20%20%20%20%20j.m_edgeA.next.prev%20%3D%20j.m_edgeA.prev%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20if%20(j.m_edgeA%20%3D%3D%20bodyA.m_jointList)%20%7B%0A%20%20%20%20%20%20%20%20bodyA.m_jointList%20%3D%20j.m_edgeA.next%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20j.m_edgeA.prev%20%3D%20null%3B%0A%20%20%20%20%20%20j.m_edgeA.next%20%3D%20null%3B%0A%20%20%20%20%20%20if%20(j.m_edgeB.prev)%20%7B%0A%20%20%20%20%20%20%20%20j.m_edgeB.prev.next%20%3D%20j.m_edgeB.next%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20if%20(j.m_edgeB.next)%20%7B%0A%20%20%20%20%20%20%20%20j.m_edgeB.next.prev%20%3D%20j.m_edgeB.prev%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20if%20(j.m_edgeB%20%3D%3D%20bodyB.m_jointList)%20%7B%0A%20%20%20%20%20%20%20%20bodyB.m_jointList%20%3D%20j.m_edgeB.next%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20j.m_edgeB.prev%20%3D%20null%3B%0A%20%20%20%20%20%20j.m_edgeB.next%20%3D%20null%3B%0A%20%20%20%20%20%20b2Joint.Destroy(j%2C%20null)%3B%0A%20%20%20%20%20%20--this.m_jointCount%3B%0A%20%20%20%20%20%20if%20(collideConnected%20%3D%3D%20false)%20%7B%0A%20%20%20%20%20%20%20%20var%20edge%20%3D%20bodyB.GetContactList()%3B%0A%20%20%20%20%20%20%20%20while%20(edge)%20%7B%0A%20%20%20%20%20%20%20%20%20%20if%20(edge.other%20%3D%3D%20bodyA)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20edge.contact.FlagForFiltering()%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20edge%20%3D%20edge.next%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2World.prototype.AddController%20%3D%20function%20(c)%20%7B%0A%20%20%20%20%20%20c.m_next%20%3D%20this.m_controllerList%3B%0A%20%20%20%20%20%20c.m_prev%20%3D%20null%3B%0A%20%20%20%20%20%20this.m_controllerList%20%3D%20c%3B%0A%20%20%20%20%20%20c.m_world%20%3D%20this%3B%0A%20%20%20%20%20%20this.m_controllerCount%2B%2B%3B%0A%20%20%20%20%20%20return%20c%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2World.prototype.RemoveController%20%3D%20function%20(c)%20%7B%0A%20%20%20%20%20%20if%20(c.m_prev)%20c.m_prev.m_next%20%3D%20c.m_next%3B%0A%20%20%20%20%20%20if%20(c.m_next)%20c.m_next.m_prev%20%3D%20c.m_prev%3B%0A%20%20%20%20%20%20if%20(this.m_controllerList%20%3D%3D%20c)%20this.m_controllerList%20%3D%20c.m_next%3B%0A%20%20%20%20%20%20this.m_controllerCount--%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2World.prototype.CreateController%20%3D%20function%20(controller)%20%7B%0A%20%20%20%20%20%20if%20(controller.m_world%20!%3D%20this)%0A%20%20%20%20%20%20%20%20throw%20new%20Error(%22Controller%20can%20only%20be%20a%20member%20of%20one%20world%22)%3B%0A%20%20%20%20%20%20controller.m_next%20%3D%20this.m_controllerList%3B%0A%20%20%20%20%20%20controller.m_prev%20%3D%20null%3B%0A%20%20%20%20%20%20if%20(this.m_controllerList)%20this.m_controllerList.m_prev%20%3D%20controller%3B%0A%20%20%20%20%20%20this.m_controllerList%20%3D%20controller%3B%0A%20%20%20%20%20%20%2B%2Bthis.m_controllerCount%3B%0A%20%20%20%20%20%20controller.m_world%20%3D%20this%3B%0A%20%20%20%20%20%20return%20controller%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2World.prototype.DestroyController%20%3D%20function%20(controller)%20%7B%0A%20%20%20%20%20%20controller.Clear()%3B%0A%20%20%20%20%20%20if%20(controller.m_next)%20controller.m_next.m_prev%20%3D%20controller.m_prev%3B%0A%20%20%20%20%20%20if%20(controller.m_prev)%20controller.m_prev.m_next%20%3D%20controller.m_next%3B%0A%20%20%20%20%20%20if%20(controller%20%3D%3D%20this.m_controllerList)%0A%20%20%20%20%20%20%20%20this.m_controllerList%20%3D%20controller.m_next%3B%0A%20%20%20%20%20%20--this.m_controllerCount%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2World.prototype.SetWarmStarting%20%3D%20function%20(flag)%20%7B%0A%20%20%20%20%20%20b2World.m_warmStarting%20%3D%20flag%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2World.prototype.SetContinuousPhysics%20%3D%20function%20(flag)%20%7B%0A%20%20%20%20%20%20b2World.m_continuousPhysics%20%3D%20flag%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2World.prototype.GetBodyCount%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20return%20this.m_bodyCount%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2World.prototype.GetJointCount%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20return%20this.m_jointCount%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2World.prototype.GetContactCount%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20return%20this.m_contactCount%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2World.prototype.SetGravity%20%3D%20function%20(gravity)%20%7B%0A%20%20%20%20%20%20this.m_gravity%20%3D%20gravity%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2World.prototype.GetGravity%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20return%20this.m_gravity%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2World.prototype.GetGroundBody%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20return%20this.m_groundBody%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2World.prototype.Step%20%3D%20function%20(%0A%20%20%20%20%20%20dt%2C%0A%20%20%20%20%20%20velocityIterations%2C%0A%20%20%20%20%20%20positionIterations%0A%20%20%20%20)%20%7B%0A%20%20%20%20%20%20if%20(dt%20%3D%3D%3D%20undefined)%20dt%20%3D%200%3B%0A%20%20%20%20%20%20if%20(velocityIterations%20%3D%3D%3D%20undefined)%20velocityIterations%20%3D%200%3B%0A%20%20%20%20%20%20if%20(positionIterations%20%3D%3D%3D%20undefined)%20positionIterations%20%3D%200%3B%0A%20%20%20%20%20%20if%20(this.m_flags%20%26%20b2World.e_newFixture)%20%7B%0A%20%20%20%20%20%20%20%20this.m_contactManager.FindNewContacts()%3B%0A%20%20%20%20%20%20%20%20this.m_flags%20%26%3D%20~b2World.e_newFixture%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20this.m_flags%20%7C%3D%20b2World.e_locked%3B%0A%20%20%20%20%20%20var%20step%20%3D%20b2World.s_timestep2%3B%0A%20%20%20%20%20%20step.dt%20%3D%20dt%3B%0A%20%20%20%20%20%20step.velocityIterations%20%3D%20velocityIterations%3B%0A%20%20%20%20%20%20step.positionIterations%20%3D%20positionIterations%3B%0A%20%20%20%20%20%20if%20(dt%20%3E%200.0)%20%7B%0A%20%20%20%20%20%20%20%20step.inv_dt%20%3D%201.0%20%2F%20dt%3B%0A%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20step.inv_dt%20%3D%200.0%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20step.dtRatio%20%3D%20this.m_inv_dt0%20*%20dt%3B%0A%20%20%20%20%20%20step.warmStarting%20%3D%20b2World.m_warmStarting%3B%0A%20%20%20%20%20%20this.m_contactManager.Collide()%3B%0A%20%20%20%20%20%20if%20(step.dt%20%3E%200.0)%20%7B%0A%20%20%20%20%20%20%20%20this.Solve(step)%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20if%20(b2World.m_continuousPhysics%20%26%26%20step.dt%20%3E%200.0)%20%7B%0A%20%20%20%20%20%20%20%20this.SolveTOI(step)%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20if%20(step.dt%20%3E%200.0)%20%7B%0A%20%20%20%20%20%20%20%20this.m_inv_dt0%20%3D%20step.inv_dt%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20this.m_flags%20%26%3D%20~b2World.e_locked%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2World.prototype.ClearForces%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20for%20(var%20body%20%3D%20this.m_bodyList%3B%20body%3B%20body%20%3D%20body.m_next)%20%7B%0A%20%20%20%20%20%20%20%20body.m_force.SetZero()%3B%0A%20%20%20%20%20%20%20%20body.m_torque%20%3D%200.0%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2World.prototype.DrawDebugData%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20if%20(this.m_debugDraw%20%3D%3D%20null)%20%7B%0A%20%20%20%20%20%20%20%20return%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20this.m_debugDraw.m_sprite.graphics.clear()%3B%0A%20%20%20%20%20%20var%20flags%20%3D%20this.m_debugDraw.GetFlags()%3B%0A%20%20%20%20%20%20var%20i%20%3D%200%3B%0A%20%20%20%20%20%20var%20b%3B%0A%20%20%20%20%20%20var%20f%3B%0A%20%20%20%20%20%20var%20s%3B%0A%20%20%20%20%20%20var%20j%3B%0A%20%20%20%20%20%20var%20bp%3B%0A%20%20%20%20%20%20var%20invQ%20%3D%20new%20b2Vec2()%3B%0A%20%20%20%20%20%20var%20x1%20%3D%20new%20b2Vec2()%3B%0A%20%20%20%20%20%20var%20x2%20%3D%20new%20b2Vec2()%3B%0A%20%20%20%20%20%20var%20xf%3B%0A%20%20%20%20%20%20var%20b1%20%3D%20new%20b2AABB()%3B%0A%20%20%20%20%20%20var%20b2%20%3D%20new%20b2AABB()%3B%0A%20%20%20%20%20%20var%20vs%20%3D%20%5Bnew%20b2Vec2()%2C%20new%20b2Vec2()%2C%20new%20b2Vec2()%2C%20new%20b2Vec2()%5D%3B%0A%20%20%20%20%20%20var%20color%20%3D%20new%20b2Color(0%2C%200%2C%200)%3B%0A%20%20%20%20%20%20if%20(flags%20%26%20b2DebugDraw.e_shapeBit)%20%7B%0A%20%20%20%20%20%20%20%20for%20(b%20%3D%20this.m_bodyList%3B%20b%3B%20b%20%3D%20b.m_next)%20%7B%0A%20%20%20%20%20%20%20%20%20%20xf%20%3D%20b.m_xf%3B%0A%20%20%20%20%20%20%20%20%20%20for%20(f%20%3D%20b.GetFixtureList()%3B%20f%3B%20f%20%3D%20f.m_next)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20s%20%3D%20f.GetShape()%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(b.IsActive()%20%3D%3D%20false)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20color.Set(0.5%2C%200.5%2C%200.3)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20this.DrawShape(s%2C%20xf%2C%20color)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%20else%20if%20(b.GetType()%20%3D%3D%20b2Body.b2_staticBody)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20color.Set(0.5%2C%200.9%2C%200.5)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20this.DrawShape(s%2C%20xf%2C%20color)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%20else%20if%20(b.GetType()%20%3D%3D%20b2Body.b2_kinematicBody)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20color.Set(0.5%2C%200.5%2C%200.9)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20this.DrawShape(s%2C%20xf%2C%20color)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%20else%20if%20(b.IsAwake()%20%3D%3D%20false)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20color.Set(0.6%2C%200.6%2C%200.6)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20this.DrawShape(s%2C%20xf%2C%20color)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20color.Set(0.9%2C%200.7%2C%200.7)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20this.DrawShape(s%2C%20xf%2C%20color)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20if%20(flags%20%26%20b2DebugDraw.e_jointBit)%20%7B%0A%20%20%20%20%20%20%20%20for%20(j%20%3D%20this.m_jointList%3B%20j%3B%20j%20%3D%20j.m_next)%20%7B%0A%20%20%20%20%20%20%20%20%20%20this.DrawJoint(j)%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20if%20(flags%20%26%20b2DebugDraw.e_controllerBit)%20%7B%0A%20%20%20%20%20%20%20%20for%20(var%20c%20%3D%20this.m_controllerList%3B%20c%3B%20c%20%3D%20c.m_next)%20%7B%0A%20%20%20%20%20%20%20%20%20%20c.Draw(this.m_debugDraw)%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20if%20(flags%20%26%20b2DebugDraw.e_pairBit)%20%7B%0A%20%20%20%20%20%20%20%20color.Set(0.3%2C%200.9%2C%200.9)%3B%0A%20%20%20%20%20%20%20%20for%20(%0A%20%20%20%20%20%20%20%20%20%20var%20contact%20%3D%20this.m_contactManager.m_contactList%3B%0A%20%20%20%20%20%20%20%20%20%20contact%3B%0A%20%20%20%20%20%20%20%20%20%20contact%20%3D%20contact.GetNext()%0A%20%20%20%20%20%20%20%20)%20%7B%0A%20%20%20%20%20%20%20%20%20%20var%20fixtureA%20%3D%20contact.GetFixtureA()%3B%0A%20%20%20%20%20%20%20%20%20%20var%20fixtureB%20%3D%20contact.GetFixtureB()%3B%0A%20%20%20%20%20%20%20%20%20%20var%20cA%20%3D%20fixtureA.GetAABB().GetCenter()%3B%0A%20%20%20%20%20%20%20%20%20%20var%20cB%20%3D%20fixtureB.GetAABB().GetCenter()%3B%0A%20%20%20%20%20%20%20%20%20%20this.m_debugDraw.DrawSegment(cA%2C%20cB%2C%20color)%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20if%20(flags%20%26%20b2DebugDraw.e_aabbBit)%20%7B%0A%20%20%20%20%20%20%20%20bp%20%3D%20this.m_contactManager.m_broadPhase%3B%0A%20%20%20%20%20%20%20%20vs%20%3D%20%5Bnew%20b2Vec2()%2C%20new%20b2Vec2()%2C%20new%20b2Vec2()%2C%20new%20b2Vec2()%5D%3B%0A%20%20%20%20%20%20%20%20for%20(b%20%3D%20this.m_bodyList%3B%20b%3B%20b%20%3D%20b.GetNext())%20%7B%0A%20%20%20%20%20%20%20%20%20%20if%20(b.IsActive()%20%3D%3D%20false)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20continue%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20for%20(f%20%3D%20b.GetFixtureList()%3B%20f%3B%20f%20%3D%20f.GetNext())%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20var%20aabb%20%3D%20bp.GetFatAABB(f.m_proxy)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20vs%5B0%5D.Set(aabb.lowerBound.x%2C%20aabb.lowerBound.y)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20vs%5B1%5D.Set(aabb.upperBound.x%2C%20aabb.lowerBound.y)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20vs%5B2%5D.Set(aabb.upperBound.x%2C%20aabb.upperBound.y)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20vs%5B3%5D.Set(aabb.lowerBound.x%2C%20aabb.upperBound.y)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20this.m_debugDraw.DrawPolygon(vs%2C%204%2C%20color)%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20if%20(flags%20%26%20b2DebugDraw.e_centerOfMassBit)%20%7B%0A%20%20%20%20%20%20%20%20for%20(b%20%3D%20this.m_bodyList%3B%20b%3B%20b%20%3D%20b.m_next)%20%7B%0A%20%20%20%20%20%20%20%20%20%20xf%20%3D%20b2World.s_xf%3B%0A%20%20%20%20%20%20%20%20%20%20xf.R%20%3D%20b.m_xf.R%3B%0A%20%20%20%20%20%20%20%20%20%20xf.position%20%3D%20b.GetWorldCenter()%3B%0A%20%20%20%20%20%20%20%20%20%20this.m_debugDraw.DrawTransform(xf)%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2World.prototype.QueryAABB%20%3D%20function%20(callback%2C%20aabb)%20%7B%0A%20%20%20%20%20%20var%20__this%20%3D%20this%3B%0A%20%20%20%20%20%20var%20broadPhase%20%3D%20__this.m_contactManager.m_broadPhase%3B%0A%0A%20%20%20%20%20%20function%20WorldQueryWrapper(proxy)%20%7B%0A%20%20%20%20%20%20%20%20return%20callback(broadPhase.GetUserData(proxy))%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20broadPhase.Query(WorldQueryWrapper%2C%20aabb)%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2World.prototype.QueryShape%20%3D%20function%20(callback%2C%20shape%2C%20transform)%20%7B%0A%20%20%20%20%20%20var%20__this%20%3D%20this%3B%0A%20%20%20%20%20%20if%20(transform%20%3D%3D%3D%20undefined)%20transform%20%3D%20null%3B%0A%20%20%20%20%20%20if%20(transform%20%3D%3D%20null)%20%7B%0A%20%20%20%20%20%20%20%20transform%20%3D%20new%20b2Transform()%3B%0A%20%20%20%20%20%20%20%20transform.SetIdentity()%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20var%20broadPhase%20%3D%20__this.m_contactManager.m_broadPhase%3B%0A%0A%20%20%20%20%20%20function%20WorldQueryWrapper(proxy)%20%7B%0A%20%20%20%20%20%20%20%20var%20fixture%20%3D%0A%20%20%20%20%20%20%20%20%20%20broadPhase.GetUserData(proxy)%20instanceof%20b2Fixture%0A%20%20%20%20%20%20%20%20%20%20%20%20%3F%20broadPhase.GetUserData(proxy)%0A%20%20%20%20%20%20%20%20%20%20%20%20%3A%20null%3B%0A%20%20%20%20%20%20%20%20if%20(%0A%20%20%20%20%20%20%20%20%20%20b2Shape.TestOverlap(%0A%20%20%20%20%20%20%20%20%20%20%20%20shape%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20transform%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20fixture.GetShape()%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20fixture.GetBody().GetTransform()%0A%20%20%20%20%20%20%20%20%20%20)%0A%20%20%20%20%20%20%20%20)%0A%20%20%20%20%20%20%20%20%20%20return%20callback(fixture)%3B%0A%20%20%20%20%20%20%20%20return%20true%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20var%20aabb%20%3D%20new%20b2AABB()%3B%0A%20%20%20%20%20%20shape.ComputeAABB(aabb%2C%20transform)%3B%0A%20%20%20%20%20%20broadPhase.Query(WorldQueryWrapper%2C%20aabb)%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2World.prototype.QueryPoint%20%3D%20function%20(callback%2C%20p)%20%7B%0A%20%20%20%20%20%20var%20__this%20%3D%20this%3B%0A%20%20%20%20%20%20var%20broadPhase%20%3D%20__this.m_contactManager.m_broadPhase%3B%0A%0A%20%20%20%20%20%20function%20WorldQueryWrapper(proxy)%20%7B%0A%20%20%20%20%20%20%20%20var%20fixture%20%3D%0A%20%20%20%20%20%20%20%20%20%20broadPhase.GetUserData(proxy)%20instanceof%20b2Fixture%0A%20%20%20%20%20%20%20%20%20%20%20%20%3F%20broadPhase.GetUserData(proxy)%0A%20%20%20%20%20%20%20%20%20%20%20%20%3A%20null%3B%0A%20%20%20%20%20%20%20%20if%20(fixture.TestPoint(p))%20return%20callback(fixture)%3B%0A%20%20%20%20%20%20%20%20return%20true%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20var%20aabb%20%3D%20new%20b2AABB()%3B%0A%20%20%20%20%20%20aabb.lowerBound.Set(%0A%20%20%20%20%20%20%20%20p.x%20-%20b2Settings.b2_linearSlop%2C%0A%20%20%20%20%20%20%20%20p.y%20-%20b2Settings.b2_linearSlop%0A%20%20%20%20%20%20)%3B%0A%20%20%20%20%20%20aabb.upperBound.Set(%0A%20%20%20%20%20%20%20%20p.x%20%2B%20b2Settings.b2_linearSlop%2C%0A%20%20%20%20%20%20%20%20p.y%20%2B%20b2Settings.b2_linearSlop%0A%20%20%20%20%20%20)%3B%0A%20%20%20%20%20%20broadPhase.Query(WorldQueryWrapper%2C%20aabb)%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2World.prototype.RayCast%20%3D%20function%20(callback%2C%20point1%2C%20point2)%20%7B%0A%20%20%20%20%20%20var%20__this%20%3D%20this%3B%0A%20%20%20%20%20%20var%20broadPhase%20%3D%20__this.m_contactManager.m_broadPhase%3B%0A%20%20%20%20%20%20var%20output%20%3D%20new%20b2RayCastOutput()%3B%0A%0A%20%20%20%20%20%20function%20RayCastWrapper(input%2C%20proxy)%20%7B%0A%20%20%20%20%20%20%20%20var%20userData%20%3D%20broadPhase.GetUserData(proxy)%3B%0A%20%20%20%20%20%20%20%20var%20fixture%20%3D%20userData%20instanceof%20b2Fixture%20%3F%20userData%20%3A%20null%3B%0A%20%20%20%20%20%20%20%20var%20hit%20%3D%20fixture.RayCast(output%2C%20input)%3B%0A%20%20%20%20%20%20%20%20if%20(hit)%20%7B%0A%20%20%20%20%20%20%20%20%20%20var%20fraction%20%3D%20output.fraction%3B%0A%20%20%20%20%20%20%20%20%20%20var%20point%20%3D%20new%20b2Vec2(%0A%20%20%20%20%20%20%20%20%20%20%20%20(1.0%20-%20fraction)%20*%20point1.x%20%2B%20fraction%20*%20point2.x%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20(1.0%20-%20fraction)%20*%20point1.y%20%2B%20fraction%20*%20point2.y%0A%20%20%20%20%20%20%20%20%20%20)%3B%0A%20%20%20%20%20%20%20%20%20%20return%20callback(fixture%2C%20point%2C%20output.normal%2C%20fraction)%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20return%20input.maxFraction%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20var%20input%20%3D%20new%20b2RayCastInput(point1%2C%20point2)%3B%0A%20%20%20%20%20%20broadPhase.RayCast(RayCastWrapper%2C%20input)%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2World.prototype.RayCastOne%20%3D%20function%20(point1%2C%20point2)%20%7B%0A%20%20%20%20%20%20var%20__this%20%3D%20this%3B%0A%20%20%20%20%20%20var%20result%3B%0A%0A%20%20%20%20%20%20function%20RayCastOneWrapper(fixture%2C%20point%2C%20normal%2C%20fraction)%20%7B%0A%20%20%20%20%20%20%20%20if%20(fraction%20%3D%3D%3D%20undefined)%20fraction%20%3D%200%3B%0A%20%20%20%20%20%20%20%20result%20%3D%20fixture%3B%0A%20%20%20%20%20%20%20%20return%20fraction%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20__this.RayCast(RayCastOneWrapper%2C%20point1%2C%20point2)%3B%0A%20%20%20%20%20%20return%20result%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2World.prototype.RayCastAll%20%3D%20function%20(point1%2C%20point2)%20%7B%0A%20%20%20%20%20%20var%20__this%20%3D%20this%3B%0A%20%20%20%20%20%20var%20result%20%3D%20new%20Vector()%3B%0A%0A%20%20%20%20%20%20function%20RayCastAllWrapper(fixture%2C%20point%2C%20normal%2C%20fraction)%20%7B%0A%20%20%20%20%20%20%20%20if%20(fraction%20%3D%3D%3D%20undefined)%20fraction%20%3D%200%3B%0A%20%20%20%20%20%20%20%20result%5Bresult.length%5D%20%3D%20fixture%3B%0A%20%20%20%20%20%20%20%20return%201%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20__this.RayCast(RayCastAllWrapper%2C%20point1%2C%20point2)%3B%0A%20%20%20%20%20%20return%20result%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2World.prototype.GetBodyList%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20return%20this.m_bodyList%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2World.prototype.GetJointList%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20return%20this.m_jointList%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2World.prototype.GetContactList%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20return%20this.m_contactList%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2World.prototype.IsLocked%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20return%20(this.m_flags%20%26%20b2World.e_locked)%20%3E%200%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2World.prototype.Solve%20%3D%20function%20(step)%20%7B%0A%20%20%20%20%20%20var%20b%3B%0A%20%20%20%20%20%20for%20(%0A%20%20%20%20%20%20%20%20var%20controller%20%3D%20this.m_controllerList%3B%0A%20%20%20%20%20%20%20%20controller%3B%0A%20%20%20%20%20%20%20%20controller%20%3D%20controller.m_next%0A%20%20%20%20%20%20)%20%7B%0A%20%20%20%20%20%20%20%20controller.Step(step)%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20var%20island%20%3D%20this.m_island%3B%0A%20%20%20%20%20%20island.Initialize(%0A%20%20%20%20%20%20%20%20this.m_bodyCount%2C%0A%20%20%20%20%20%20%20%20this.m_contactCount%2C%0A%20%20%20%20%20%20%20%20this.m_jointCount%2C%0A%20%20%20%20%20%20%20%20null%2C%0A%20%20%20%20%20%20%20%20this.m_contactManager.m_contactListener%2C%0A%20%20%20%20%20%20%20%20this.m_contactSolver%0A%20%20%20%20%20%20)%3B%0A%20%20%20%20%20%20for%20(b%20%3D%20this.m_bodyList%3B%20b%3B%20b%20%3D%20b.m_next)%20%7B%0A%20%20%20%20%20%20%20%20b.m_flags%20%26%3D%20~b2Body.e_islandFlag%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20for%20(var%20c%20%3D%20this.m_contactList%3B%20c%3B%20c%20%3D%20c.m_next)%20%7B%0A%20%20%20%20%20%20%20%20c.m_flags%20%26%3D%20~b2Contact.e_islandFlag%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20for%20(var%20j%20%3D%20this.m_jointList%3B%20j%3B%20j%20%3D%20j.m_next)%20%7B%0A%20%20%20%20%20%20%20%20j.m_islandFlag%20%3D%20false%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20var%20stackSize%20%3D%20parseInt(this.m_bodyCount)%3B%0A%20%20%20%20%20%20var%20stack%20%3D%20this.s_stack%3B%0A%20%20%20%20%20%20for%20(var%20seed%20%3D%20this.m_bodyList%3B%20seed%3B%20seed%20%3D%20seed.m_next)%20%7B%0A%20%20%20%20%20%20%20%20if%20(seed.m_flags%20%26%20b2Body.e_islandFlag)%20%7B%0A%20%20%20%20%20%20%20%20%20%20continue%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20if%20(seed.IsAwake()%20%3D%3D%20false%20%7C%7C%20seed.IsActive()%20%3D%3D%20false)%20%7B%0A%20%20%20%20%20%20%20%20%20%20continue%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20if%20(seed.GetType()%20%3D%3D%20b2Body.b2_staticBody)%20%7B%0A%20%20%20%20%20%20%20%20%20%20continue%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20island.Clear()%3B%0A%20%20%20%20%20%20%20%20var%20stackCount%20%3D%200%3B%0A%20%20%20%20%20%20%20%20stack%5BstackCount%2B%2B%5D%20%3D%20seed%3B%0A%20%20%20%20%20%20%20%20seed.m_flags%20%7C%3D%20b2Body.e_islandFlag%3B%0A%20%20%20%20%20%20%20%20while%20(stackCount%20%3E%200)%20%7B%0A%20%20%20%20%20%20%20%20%20%20b%20%3D%20stack%5B--stackCount%5D%3B%0A%20%20%20%20%20%20%20%20%20%20island.AddBody(b)%3B%0A%20%20%20%20%20%20%20%20%20%20if%20(b.IsAwake()%20%3D%3D%20false)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20b.SetAwake(true)%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20if%20(b.GetType()%20%3D%3D%20b2Body.b2_staticBody)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20continue%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20var%20other%3B%0A%20%20%20%20%20%20%20%20%20%20for%20(var%20ce%20%3D%20b.m_contactList%3B%20ce%3B%20ce%20%3D%20ce.next)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(ce.contact.m_flags%20%26%20b2Contact.e_islandFlag)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20continue%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20ce.contact.IsSensor()%20%3D%3D%20true%20%7C%7C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20ce.contact.IsEnabled()%20%3D%3D%20false%20%7C%7C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20ce.contact.IsTouching()%20%3D%3D%20false%0A%20%20%20%20%20%20%20%20%20%20%20%20)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20continue%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20island.AddContact(ce.contact)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20ce.contact.m_flags%20%7C%3D%20b2Contact.e_islandFlag%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20other%20%3D%20ce.other%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(other.m_flags%20%26%20b2Body.e_islandFlag)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20continue%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20stack%5BstackCount%2B%2B%5D%20%3D%20other%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20other.m_flags%20%7C%3D%20b2Body.e_islandFlag%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20for%20(var%20jn%20%3D%20b.m_jointList%3B%20jn%3B%20jn%20%3D%20jn.next)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(jn.joint.m_islandFlag%20%3D%3D%20true)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20continue%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20other%20%3D%20jn.other%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(other.IsActive()%20%3D%3D%20false)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20continue%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20island.AddJoint(jn.joint)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20jn.joint.m_islandFlag%20%3D%20true%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(other.m_flags%20%26%20b2Body.e_islandFlag)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20continue%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20stack%5BstackCount%2B%2B%5D%20%3D%20other%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20other.m_flags%20%7C%3D%20b2Body.e_islandFlag%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20island.Solve(step%2C%20this.m_gravity%2C%20this.m_allowSleep)%3B%0A%20%20%20%20%20%20%20%20for%20(var%20i%20%3D%200%3B%20i%20%3C%20island.m_bodyCount%3B%20%2B%2Bi)%20%7B%0A%20%20%20%20%20%20%20%20%20%20b%20%3D%20island.m_bodies%5Bi%5D%3B%0A%20%20%20%20%20%20%20%20%20%20if%20(b.GetType()%20%3D%3D%20b2Body.b2_staticBody)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20b.m_flags%20%26%3D%20~b2Body.e_islandFlag%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20for%20(i%20%3D%200%3B%20i%20%3C%20stack.length%3B%20%2B%2Bi)%20%7B%0A%20%20%20%20%20%20%20%20if%20(!stack%5Bi%5D)%20break%3B%0A%20%20%20%20%20%20%20%20stack%5Bi%5D%20%3D%20null%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20for%20(b%20%3D%20this.m_bodyList%3B%20b%3B%20b%20%3D%20b.m_next)%20%7B%0A%20%20%20%20%20%20%20%20if%20(b.IsAwake()%20%3D%3D%20false%20%7C%7C%20b.IsActive()%20%3D%3D%20false)%20%7B%0A%20%20%20%20%20%20%20%20%20%20continue%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20if%20(b.GetType()%20%3D%3D%20b2Body.b2_staticBody)%20%7B%0A%20%20%20%20%20%20%20%20%20%20continue%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20b.SynchronizeFixtures()%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20this.m_contactManager.FindNewContacts()%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2World.prototype.SolveTOI%20%3D%20function%20(step)%20%7B%0A%20%20%20%20%20%20var%20b%3B%0A%20%20%20%20%20%20var%20fA%3B%0A%20%20%20%20%20%20var%20fB%3B%0A%20%20%20%20%20%20var%20bA%3B%0A%20%20%20%20%20%20var%20bB%3B%0A%20%20%20%20%20%20var%20cEdge%3B%0A%20%20%20%20%20%20var%20j%3B%0A%20%20%20%20%20%20var%20island%20%3D%20this.m_island%3B%0A%20%20%20%20%20%20island.Initialize(%0A%20%20%20%20%20%20%20%20this.m_bodyCount%2C%0A%20%20%20%20%20%20%20%20b2Settings.b2_maxTOIContactsPerIsland%2C%0A%20%20%20%20%20%20%20%20b2Settings.b2_maxTOIJointsPerIsland%2C%0A%20%20%20%20%20%20%20%20null%2C%0A%20%20%20%20%20%20%20%20this.m_contactManager.m_contactListener%2C%0A%20%20%20%20%20%20%20%20this.m_contactSolver%0A%20%20%20%20%20%20)%3B%0A%20%20%20%20%20%20var%20queue%20%3D%20b2World.s_queue%3B%0A%20%20%20%20%20%20for%20(b%20%3D%20this.m_bodyList%3B%20b%3B%20b%20%3D%20b.m_next)%20%7B%0A%20%20%20%20%20%20%20%20b.m_flags%20%26%3D%20~b2Body.e_islandFlag%3B%0A%20%20%20%20%20%20%20%20b.m_sweep.t0%20%3D%200.0%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20var%20c%3B%0A%20%20%20%20%20%20for%20(c%20%3D%20this.m_contactList%3B%20c%3B%20c%20%3D%20c.m_next)%20%7B%0A%20%20%20%20%20%20%20%20c.m_flags%20%26%3D%20~(b2Contact.e_toiFlag%20%7C%20b2Contact.e_islandFlag)%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20for%20(j%20%3D%20this.m_jointList%3B%20j%3B%20j%20%3D%20j.m_next)%20%7B%0A%20%20%20%20%20%20%20%20j.m_islandFlag%20%3D%20false%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20for%20(%3B%3B)%20%7B%0A%20%20%20%20%20%20%20%20var%20minContact%20%3D%20null%3B%0A%20%20%20%20%20%20%20%20var%20minTOI%20%3D%201.0%3B%0A%20%20%20%20%20%20%20%20for%20(c%20%3D%20this.m_contactList%3B%20c%3B%20c%20%3D%20c.m_next)%20%7B%0A%20%20%20%20%20%20%20%20%20%20if%20(%0A%20%20%20%20%20%20%20%20%20%20%20%20c.IsSensor()%20%3D%3D%20true%20%7C%7C%0A%20%20%20%20%20%20%20%20%20%20%20%20c.IsEnabled()%20%3D%3D%20false%20%7C%7C%0A%20%20%20%20%20%20%20%20%20%20%20%20c.IsContinuous()%20%3D%3D%20false%0A%20%20%20%20%20%20%20%20%20%20)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20continue%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20var%20toi%20%3D%201.0%3B%0A%20%20%20%20%20%20%20%20%20%20if%20(c.m_flags%20%26%20b2Contact.e_toiFlag)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20toi%20%3D%20c.m_toi%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20fA%20%3D%20c.m_fixtureA%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20fB%20%3D%20c.m_fixtureB%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20bA%20%3D%20fA.m_body%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20bB%20%3D%20fB.m_body%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20(bA.GetType()%20!%3D%20b2Body.b2_dynamicBody%20%7C%7C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20bA.IsAwake()%20%3D%3D%20false)%20%26%26%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20(bB.GetType()%20!%3D%20b2Body.b2_dynamicBody%20%7C%7C%20bB.IsAwake()%20%3D%3D%20false)%0A%20%20%20%20%20%20%20%20%20%20%20%20)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20continue%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20var%20t0%20%3D%20bA.m_sweep.t0%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(bA.m_sweep.t0%20%3C%20bB.m_sweep.t0)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20t0%20%3D%20bB.m_sweep.t0%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20bA.m_sweep.Advance(t0)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%20else%20if%20(bB.m_sweep.t0%20%3C%20bA.m_sweep.t0)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20t0%20%3D%20bA.m_sweep.t0%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20bB.m_sweep.Advance(t0)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20toi%20%3D%20c.ComputeTOI(bA.m_sweep%2C%20bB.m_sweep)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20b2Settings.b2Assert(0.0%20%3C%3D%20toi%20%26%26%20toi%20%3C%3D%201.0)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(toi%20%3E%200.0%20%26%26%20toi%20%3C%201.0)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20toi%20%3D%20(1.0%20-%20toi)%20*%20t0%20%2B%20toi%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20(toi%20%3E%201)%20toi%20%3D%201%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20c.m_toi%20%3D%20toi%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20c.m_flags%20%7C%3D%20b2Contact.e_toiFlag%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20if%20(Number.MIN_VALUE%20%3C%20toi%20%26%26%20toi%20%3C%20minTOI)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20minContact%20%3D%20c%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20minTOI%20%3D%20toi%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20if%20(minContact%20%3D%3D%20null%20%7C%7C%201.0%20-%20100.0%20*%20Number.MIN_VALUE%20%3C%20minTOI)%20%7B%0A%20%20%20%20%20%20%20%20%20%20break%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20fA%20%3D%20minContact.m_fixtureA%3B%0A%20%20%20%20%20%20%20%20fB%20%3D%20minContact.m_fixtureB%3B%0A%20%20%20%20%20%20%20%20bA%20%3D%20fA.m_body%3B%0A%20%20%20%20%20%20%20%20bB%20%3D%20fB.m_body%3B%0A%20%20%20%20%20%20%20%20b2World.s_backupA.Set(bA.m_sweep)%3B%0A%20%20%20%20%20%20%20%20b2World.s_backupB.Set(bB.m_sweep)%3B%0A%20%20%20%20%20%20%20%20bA.Advance(minTOI)%3B%0A%20%20%20%20%20%20%20%20bB.Advance(minTOI)%3B%0A%20%20%20%20%20%20%20%20minContact.Update(this.m_contactManager.m_contactListener)%3B%0A%20%20%20%20%20%20%20%20minContact.m_flags%20%26%3D%20~b2Contact.e_toiFlag%3B%0A%20%20%20%20%20%20%20%20if%20(minContact.IsSensor()%20%3D%3D%20true%20%7C%7C%20minContact.IsEnabled()%20%3D%3D%20false)%20%7B%0A%20%20%20%20%20%20%20%20%20%20bA.m_sweep.Set(b2World.s_backupA)%3B%0A%20%20%20%20%20%20%20%20%20%20bB.m_sweep.Set(b2World.s_backupB)%3B%0A%20%20%20%20%20%20%20%20%20%20bA.SynchronizeTransform()%3B%0A%20%20%20%20%20%20%20%20%20%20bB.SynchronizeTransform()%3B%0A%20%20%20%20%20%20%20%20%20%20continue%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20if%20(minContact.IsTouching()%20%3D%3D%20false)%20%7B%0A%20%20%20%20%20%20%20%20%20%20continue%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20var%20seed%20%3D%20bA%3B%0A%20%20%20%20%20%20%20%20if%20(seed.GetType()%20!%3D%20b2Body.b2_dynamicBody)%20%7B%0A%20%20%20%20%20%20%20%20%20%20seed%20%3D%20bB%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20island.Clear()%3B%0A%20%20%20%20%20%20%20%20var%20queueStart%20%3D%200%3B%0A%20%20%20%20%20%20%20%20var%20queueSize%20%3D%200%3B%0A%20%20%20%20%20%20%20%20queue%5BqueueStart%20%2B%20queueSize%2B%2B%5D%20%3D%20seed%3B%0A%20%20%20%20%20%20%20%20seed.m_flags%20%7C%3D%20b2Body.e_islandFlag%3B%0A%20%20%20%20%20%20%20%20while%20(queueSize%20%3E%200)%20%7B%0A%20%20%20%20%20%20%20%20%20%20b%20%3D%20queue%5BqueueStart%2B%2B%5D%3B%0A%20%20%20%20%20%20%20%20%20%20--queueSize%3B%0A%20%20%20%20%20%20%20%20%20%20island.AddBody(b)%3B%0A%20%20%20%20%20%20%20%20%20%20if%20(b.IsAwake()%20%3D%3D%20false)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20b.SetAwake(true)%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20if%20(b.GetType()%20!%3D%20b2Body.b2_dynamicBody)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20continue%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20for%20(cEdge%20%3D%20b.m_contactList%3B%20cEdge%3B%20cEdge%20%3D%20cEdge.next)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(island.m_contactCount%20%3D%3D%20island.m_contactCapacity)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20break%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(cEdge.contact.m_flags%20%26%20b2Contact.e_islandFlag)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20continue%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20cEdge.contact.IsSensor()%20%3D%3D%20true%20%7C%7C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20cEdge.contact.IsEnabled()%20%3D%3D%20false%20%7C%7C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20cEdge.contact.IsTouching()%20%3D%3D%20false%0A%20%20%20%20%20%20%20%20%20%20%20%20)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20continue%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20island.AddContact(cEdge.contact)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20cEdge.contact.m_flags%20%7C%3D%20b2Contact.e_islandFlag%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20var%20other%20%3D%20cEdge.other%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(other.m_flags%20%26%20b2Body.e_islandFlag)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20continue%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(other.GetType()%20!%3D%20b2Body.b2_staticBody)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20other.Advance(minTOI)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20other.SetAwake(true)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20queue%5BqueueStart%20%2B%20queueSize%5D%20%3D%20other%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%2B%2BqueueSize%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20other.m_flags%20%7C%3D%20b2Body.e_islandFlag%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20for%20(var%20jEdge%20%3D%20b.m_jointList%3B%20jEdge%3B%20jEdge%20%3D%20jEdge.next)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(island.m_jointCount%20%3D%3D%20island.m_jointCapacity)%20continue%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(jEdge.joint.m_islandFlag%20%3D%3D%20true)%20continue%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20other%20%3D%20jEdge.other%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(other.IsActive()%20%3D%3D%20false)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20continue%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20island.AddJoint(jEdge.joint)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20jEdge.joint.m_islandFlag%20%3D%20true%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(other.m_flags%20%26%20b2Body.e_islandFlag)%20continue%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(other.GetType()%20!%3D%20b2Body.b2_staticBody)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20other.Advance(minTOI)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20other.SetAwake(true)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20queue%5BqueueStart%20%2B%20queueSize%5D%20%3D%20other%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%2B%2BqueueSize%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20other.m_flags%20%7C%3D%20b2Body.e_islandFlag%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20var%20subStep%20%3D%20b2World.s_timestep%3B%0A%20%20%20%20%20%20%20%20subStep.warmStarting%20%3D%20false%3B%0A%20%20%20%20%20%20%20%20subStep.dt%20%3D%20(1.0%20-%20minTOI)%20*%20step.dt%3B%0A%20%20%20%20%20%20%20%20subStep.inv_dt%20%3D%201.0%20%2F%20subStep.dt%3B%0A%20%20%20%20%20%20%20%20subStep.dtRatio%20%3D%200.0%3B%0A%20%20%20%20%20%20%20%20subStep.velocityIterations%20%3D%20step.velocityIterations%3B%0A%20%20%20%20%20%20%20%20subStep.positionIterations%20%3D%20step.positionIterations%3B%0A%20%20%20%20%20%20%20%20island.SolveTOI(subStep)%3B%0A%20%20%20%20%20%20%20%20var%20i%20%3D%200%3B%0A%20%20%20%20%20%20%20%20for%20(i%20%3D%200%3B%20i%20%3C%20island.m_bodyCount%3B%20%2B%2Bi)%20%7B%0A%20%20%20%20%20%20%20%20%20%20b%20%3D%20island.m_bodies%5Bi%5D%3B%0A%20%20%20%20%20%20%20%20%20%20b.m_flags%20%26%3D%20~b2Body.e_islandFlag%3B%0A%20%20%20%20%20%20%20%20%20%20if%20(b.IsAwake()%20%3D%3D%20false)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20continue%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20if%20(b.GetType()%20!%3D%20b2Body.b2_dynamicBody)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20continue%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20b.SynchronizeFixtures()%3B%0A%20%20%20%20%20%20%20%20%20%20for%20(cEdge%20%3D%20b.m_contactList%3B%20cEdge%3B%20cEdge%20%3D%20cEdge.next)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20cEdge.contact.m_flags%20%26%3D%20~b2Contact.e_toiFlag%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20for%20(i%20%3D%200%3B%20i%20%3C%20island.m_contactCount%3B%20%2B%2Bi)%20%7B%0A%20%20%20%20%20%20%20%20%20%20c%20%3D%20island.m_contacts%5Bi%5D%3B%0A%20%20%20%20%20%20%20%20%20%20c.m_flags%20%26%3D%20~(b2Contact.e_toiFlag%20%7C%20b2Contact.e_islandFlag)%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20for%20(i%20%3D%200%3B%20i%20%3C%20island.m_jointCount%3B%20%2B%2Bi)%20%7B%0A%20%20%20%20%20%20%20%20%20%20j%20%3D%20island.m_joints%5Bi%5D%3B%0A%20%20%20%20%20%20%20%20%20%20j.m_islandFlag%20%3D%20false%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20this.m_contactManager.FindNewContacts()%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2World.prototype.DrawJoint%20%3D%20function%20(joint)%20%7B%0A%20%20%20%20%20%20var%20b1%20%3D%20joint.GetBodyA()%3B%0A%20%20%20%20%20%20var%20b2%20%3D%20joint.GetBodyB()%3B%0A%20%20%20%20%20%20var%20xf1%20%3D%20b1.m_xf%3B%0A%20%20%20%20%20%20var%20xf2%20%3D%20b2.m_xf%3B%0A%20%20%20%20%20%20var%20x1%20%3D%20xf1.position%3B%0A%20%20%20%20%20%20var%20x2%20%3D%20xf2.position%3B%0A%20%20%20%20%20%20var%20p1%20%3D%20joint.GetAnchorA()%3B%0A%20%20%20%20%20%20var%20p2%20%3D%20joint.GetAnchorB()%3B%0A%20%20%20%20%20%20var%20color%20%3D%20b2World.s_jointColor%3B%0A%20%20%20%20%20%20switch%20(joint.m_type)%20%7B%0A%20%20%20%20%20%20%20%20case%20b2Joint.e_distanceJoint%3A%0A%20%20%20%20%20%20%20%20%20%20this.m_debugDraw.DrawSegment(p1%2C%20p2%2C%20color)%3B%0A%20%20%20%20%20%20%20%20%20%20break%3B%0A%20%20%20%20%20%20%20%20case%20b2Joint.e_pulleyJoint%3A%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20var%20pulley%20%3D%20joint%20instanceof%20b2PulleyJoint%20%3F%20joint%20%3A%20null%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20var%20s1%20%3D%20pulley.GetGroundAnchorA()%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20var%20s2%20%3D%20pulley.GetGroundAnchorB()%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20this.m_debugDraw.DrawSegment(s1%2C%20p1%2C%20color)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20this.m_debugDraw.DrawSegment(s2%2C%20p2%2C%20color)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20this.m_debugDraw.DrawSegment(s1%2C%20s2%2C%20color)%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20break%3B%0A%20%20%20%20%20%20%20%20case%20b2Joint.e_mouseJoint%3A%0A%20%20%20%20%20%20%20%20%20%20this.m_debugDraw.DrawSegment(p1%2C%20p2%2C%20color)%3B%0A%20%20%20%20%20%20%20%20%20%20break%3B%0A%20%20%20%20%20%20%20%20default%3A%0A%20%20%20%20%20%20%20%20%20%20if%20(b1%20!%3D%20this.m_groundBody)%0A%20%20%20%20%20%20%20%20%20%20%20%20this.m_debugDraw.DrawSegment(x1%2C%20p1%2C%20color)%3B%0A%20%20%20%20%20%20%20%20%20%20this.m_debugDraw.DrawSegment(p1%2C%20p2%2C%20color)%3B%0A%20%20%20%20%20%20%20%20%20%20if%20(b2%20!%3D%20this.m_groundBody)%0A%20%20%20%20%20%20%20%20%20%20%20%20this.m_debugDraw.DrawSegment(x2%2C%20p2%2C%20color)%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2World.prototype.DrawShape%20%3D%20function%20(shape%2C%20xf%2C%20color)%20%7B%0A%20%20%20%20%20%20switch%20(shape.m_type)%20%7B%0A%20%20%20%20%20%20%20%20case%20b2Shape.e_circleShape%3A%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20var%20circle%20%3D%20shape%20instanceof%20b2CircleShape%20%3F%20shape%20%3A%20null%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20var%20center%20%3D%20b2Math.MulX(xf%2C%20circle.m_p)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20var%20radius%20%3D%20circle.m_radius%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20var%20axis%20%3D%20xf.R.col1%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20this.m_debugDraw.DrawSolidCircle(center%2C%20radius%2C%20axis%2C%20color)%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20break%3B%0A%20%20%20%20%20%20%20%20case%20b2Shape.e_polygonShape%3A%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20var%20i%20%3D%200%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20var%20poly%20%3D%20shape%20instanceof%20b2PolygonShape%20%3F%20shape%20%3A%20null%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20var%20vertexCount%20%3D%20parseInt(poly.GetVertexCount())%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20var%20localVertices%20%3D%20poly.GetVertices()%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20var%20vertices%20%3D%20new%20Vector(vertexCount)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20for%20(i%20%3D%200%3B%20i%20%3C%20vertexCount%3B%20%2B%2Bi)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20vertices%5Bi%5D%20%3D%20b2Math.MulX(xf%2C%20localVertices%5Bi%5D)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20this.m_debugDraw.DrawSolidPolygon(vertices%2C%20vertexCount%2C%20color)%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20break%3B%0A%20%20%20%20%20%20%20%20case%20b2Shape.e_edgeShape%3A%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20var%20edge%20%3D%20shape%20instanceof%20b2EdgeShape%20%3F%20shape%20%3A%20null%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20this.m_debugDraw.DrawSegment(%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20b2Math.MulX(xf%2C%20edge.GetVertex1())%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20b2Math.MulX(xf%2C%20edge.GetVertex2())%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20color%0A%20%20%20%20%20%20%20%20%20%20%20%20)%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20break%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%3B%0A%20%20%20%20Box2D.postDefs.push(function%20()%20%7B%0A%20%20%20%20%20%20Box2D.Dynamics.b2World.s_timestep2%20%3D%20new%20b2TimeStep()%3B%0A%20%20%20%20%20%20Box2D.Dynamics.b2World.s_xf%20%3D%20new%20b2Transform()%3B%0A%20%20%20%20%20%20Box2D.Dynamics.b2World.s_backupA%20%3D%20new%20b2Sweep()%3B%0A%20%20%20%20%20%20Box2D.Dynamics.b2World.s_backupB%20%3D%20new%20b2Sweep()%3B%0A%20%20%20%20%20%20Box2D.Dynamics.b2World.s_timestep%20%3D%20new%20b2TimeStep()%3B%0A%20%20%20%20%20%20Box2D.Dynamics.b2World.s_queue%20%3D%20new%20Vector()%3B%0A%20%20%20%20%20%20Box2D.Dynamics.b2World.s_jointColor%20%3D%20new%20b2Color(0.5%2C%200.8%2C%200.8)%3B%0A%20%20%20%20%20%20Box2D.Dynamics.b2World.e_newFixture%20%3D%200x0001%3B%0A%20%20%20%20%20%20Box2D.Dynamics.b2World.e_locked%20%3D%200x0002%3B%0A%20%20%20%20%7D)%3B%0A%20%20%7D)()%3B%0A%20%20(function%20()%20%7B%0A%20%20%20%20var%20b2CircleShape%20%3D%20Box2D.Collision.Shapes.b2CircleShape%2C%0A%20%20%20%20%20%20b2EdgeChainDef%20%3D%20Box2D.Collision.Shapes.b2EdgeChainDef%2C%0A%20%20%20%20%20%20b2EdgeShape%20%3D%20Box2D.Collision.Shapes.b2EdgeShape%2C%0A%20%20%20%20%20%20b2MassData%20%3D%20Box2D.Collision.Shapes.b2MassData%2C%0A%20%20%20%20%20%20b2PolygonShape%20%3D%20Box2D.Collision.Shapes.b2PolygonShape%2C%0A%20%20%20%20%20%20b2Shape%20%3D%20Box2D.Collision.Shapes.b2Shape%2C%0A%20%20%20%20%20%20b2CircleContact%20%3D%20Box2D.Dynamics.Contacts.b2CircleContact%2C%0A%20%20%20%20%20%20b2Contact%20%3D%20Box2D.Dynamics.Contacts.b2Contact%2C%0A%20%20%20%20%20%20b2ContactConstraint%20%3D%20Box2D.Dynamics.Contacts.b2ContactConstraint%2C%0A%20%20%20%20%20%20b2ContactConstraintPoint%20%3D%0A%20%20%20%20%20%20%20%20Box2D.Dynamics.Contacts.b2ContactConstraintPoint%2C%0A%20%20%20%20%20%20b2ContactEdge%20%3D%20Box2D.Dynamics.Contacts.b2ContactEdge%2C%0A%20%20%20%20%20%20b2ContactFactory%20%3D%20Box2D.Dynamics.Contacts.b2ContactFactory%2C%0A%20%20%20%20%20%20b2ContactRegister%20%3D%20Box2D.Dynamics.Contacts.b2ContactRegister%2C%0A%20%20%20%20%20%20b2ContactResult%20%3D%20Box2D.Dynamics.Contacts.b2ContactResult%2C%0A%20%20%20%20%20%20b2ContactSolver%20%3D%20Box2D.Dynamics.Contacts.b2ContactSolver%2C%0A%20%20%20%20%20%20b2EdgeAndCircleContact%20%3D%20Box2D.Dynamics.Contacts.b2EdgeAndCircleContact%2C%0A%20%20%20%20%20%20b2NullContact%20%3D%20Box2D.Dynamics.Contacts.b2NullContact%2C%0A%20%20%20%20%20%20b2PolyAndCircleContact%20%3D%20Box2D.Dynamics.Contacts.b2PolyAndCircleContact%2C%0A%20%20%20%20%20%20b2PolyAndEdgeContact%20%3D%20Box2D.Dynamics.Contacts.b2PolyAndEdgeContact%2C%0A%20%20%20%20%20%20b2PolygonContact%20%3D%20Box2D.Dynamics.Contacts.b2PolygonContact%2C%0A%20%20%20%20%20%20b2PositionSolverManifold%20%3D%0A%20%20%20%20%20%20%20%20Box2D.Dynamics.Contacts.b2PositionSolverManifold%2C%0A%20%20%20%20%20%20b2Body%20%3D%20Box2D.Dynamics.b2Body%2C%0A%20%20%20%20%20%20b2BodyDef%20%3D%20Box2D.Dynamics.b2BodyDef%2C%0A%20%20%20%20%20%20b2ContactFilter%20%3D%20Box2D.Dynamics.b2ContactFilter%2C%0A%20%20%20%20%20%20b2ContactImpulse%20%3D%20Box2D.Dynamics.b2ContactImpulse%2C%0A%20%20%20%20%20%20b2ContactListener%20%3D%20Box2D.Dynamics.b2ContactListener%2C%0A%20%20%20%20%20%20b2ContactManager%20%3D%20Box2D.Dynamics.b2ContactManager%2C%0A%20%20%20%20%20%20b2DebugDraw%20%3D%20Box2D.Dynamics.b2DebugDraw%2C%0A%20%20%20%20%20%20b2DestructionListener%20%3D%20Box2D.Dynamics.b2DestructionListener%2C%0A%20%20%20%20%20%20b2FilterData%20%3D%20Box2D.Dynamics.b2FilterData%2C%0A%20%20%20%20%20%20b2Fixture%20%3D%20Box2D.Dynamics.b2Fixture%2C%0A%20%20%20%20%20%20b2FixtureDef%20%3D%20Box2D.Dynamics.b2FixtureDef%2C%0A%20%20%20%20%20%20b2Island%20%3D%20Box2D.Dynamics.b2Island%2C%0A%20%20%20%20%20%20b2TimeStep%20%3D%20Box2D.Dynamics.b2TimeStep%2C%0A%20%20%20%20%20%20b2World%20%3D%20Box2D.Dynamics.b2World%2C%0A%20%20%20%20%20%20b2Color%20%3D%20Box2D.Common.b2Color%2C%0A%20%20%20%20%20%20b2internal%20%3D%20Box2D.Common.b2internal%2C%0A%20%20%20%20%20%20b2Settings%20%3D%20Box2D.Common.b2Settings%2C%0A%20%20%20%20%20%20b2Mat22%20%3D%20Box2D.Common.Math.b2Mat22%2C%0A%20%20%20%20%20%20b2Mat33%20%3D%20Box2D.Common.Math.b2Mat33%2C%0A%20%20%20%20%20%20b2Math%20%3D%20Box2D.Common.Math.b2Math%2C%0A%20%20%20%20%20%20b2Sweep%20%3D%20Box2D.Common.Math.b2Sweep%2C%0A%20%20%20%20%20%20b2Transform%20%3D%20Box2D.Common.Math.b2Transform%2C%0A%20%20%20%20%20%20b2Vec2%20%3D%20Box2D.Common.Math.b2Vec2%2C%0A%20%20%20%20%20%20b2Vec3%20%3D%20Box2D.Common.Math.b2Vec3%2C%0A%20%20%20%20%20%20b2AABB%20%3D%20Box2D.Collision.b2AABB%2C%0A%20%20%20%20%20%20b2Bound%20%3D%20Box2D.Collision.b2Bound%2C%0A%20%20%20%20%20%20b2BoundValues%20%3D%20Box2D.Collision.b2BoundValues%2C%0A%20%20%20%20%20%20b2Collision%20%3D%20Box2D.Collision.b2Collision%2C%0A%20%20%20%20%20%20b2ContactID%20%3D%20Box2D.Collision.b2ContactID%2C%0A%20%20%20%20%20%20b2ContactPoint%20%3D%20Box2D.Collision.b2ContactPoint%2C%0A%20%20%20%20%20%20b2Distance%20%3D%20Box2D.Collision.b2Distance%2C%0A%20%20%20%20%20%20b2DistanceInput%20%3D%20Box2D.Collision.b2DistanceInput%2C%0A%20%20%20%20%20%20b2DistanceOutput%20%3D%20Box2D.Collision.b2DistanceOutput%2C%0A%20%20%20%20%20%20b2DistanceProxy%20%3D%20Box2D.Collision.b2DistanceProxy%2C%0A%20%20%20%20%20%20b2DynamicTree%20%3D%20Box2D.Collision.b2DynamicTree%2C%0A%20%20%20%20%20%20b2DynamicTreeBroadPhase%20%3D%20Box2D.Collision.b2DynamicTreeBroadPhase%2C%0A%20%20%20%20%20%20b2DynamicTreeNode%20%3D%20Box2D.Collision.b2DynamicTreeNode%2C%0A%20%20%20%20%20%20b2DynamicTreePair%20%3D%20Box2D.Collision.b2DynamicTreePair%2C%0A%20%20%20%20%20%20b2Manifold%20%3D%20Box2D.Collision.b2Manifold%2C%0A%20%20%20%20%20%20b2ManifoldPoint%20%3D%20Box2D.Collision.b2ManifoldPoint%2C%0A%20%20%20%20%20%20b2Point%20%3D%20Box2D.Collision.b2Point%2C%0A%20%20%20%20%20%20b2RayCastInput%20%3D%20Box2D.Collision.b2RayCastInput%2C%0A%20%20%20%20%20%20b2RayCastOutput%20%3D%20Box2D.Collision.b2RayCastOutput%2C%0A%20%20%20%20%20%20b2Segment%20%3D%20Box2D.Collision.b2Segment%2C%0A%20%20%20%20%20%20b2SeparationFunction%20%3D%20Box2D.Collision.b2SeparationFunction%2C%0A%20%20%20%20%20%20b2Simplex%20%3D%20Box2D.Collision.b2Simplex%2C%0A%20%20%20%20%20%20b2SimplexCache%20%3D%20Box2D.Collision.b2SimplexCache%2C%0A%20%20%20%20%20%20b2SimplexVertex%20%3D%20Box2D.Collision.b2SimplexVertex%2C%0A%20%20%20%20%20%20b2TimeOfImpact%20%3D%20Box2D.Collision.b2TimeOfImpact%2C%0A%20%20%20%20%20%20b2TOIInput%20%3D%20Box2D.Collision.b2TOIInput%2C%0A%20%20%20%20%20%20b2WorldManifold%20%3D%20Box2D.Collision.b2WorldManifold%2C%0A%20%20%20%20%20%20ClipVertex%20%3D%20Box2D.Collision.ClipVertex%2C%0A%20%20%20%20%20%20Features%20%3D%20Box2D.Collision.Features%2C%0A%20%20%20%20%20%20IBroadPhase%20%3D%20Box2D.Collision.IBroadPhase%3B%0A%0A%20%20%20%20Box2D.inherit(b2CircleContact%2C%20Box2D.Dynamics.Contacts.b2Contact)%3B%0A%20%20%20%20b2CircleContact.prototype.__super%20%3D%0A%20%20%20%20%20%20Box2D.Dynamics.Contacts.b2Contact.prototype%3B%0A%20%20%20%20b2CircleContact.b2CircleContact%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20Box2D.Dynamics.Contacts.b2Contact.b2Contact.apply(this%2C%20arguments)%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2CircleContact.Create%20%3D%20function%20(allocator)%20%7B%0A%20%20%20%20%20%20return%20new%20b2CircleContact()%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2CircleContact.Destroy%20%3D%20function%20(contact%2C%20allocator)%20%7B%7D%3B%0A%20%20%20%20b2CircleContact.prototype.Reset%20%3D%20function%20(fixtureA%2C%20fixtureB)%20%7B%0A%20%20%20%20%20%20this.__super.Reset.call(this%2C%20fixtureA%2C%20fixtureB)%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2CircleContact.prototype.Evaluate%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20var%20bA%20%3D%20this.m_fixtureA.GetBody()%3B%0A%20%20%20%20%20%20var%20bB%20%3D%20this.m_fixtureB.GetBody()%3B%0A%20%20%20%20%20%20b2Collision.CollideCircles(%0A%20%20%20%20%20%20%20%20this.m_manifold%2C%0A%20%20%20%20%20%20%20%20this.m_fixtureA.GetShape()%20instanceof%20b2CircleShape%0A%20%20%20%20%20%20%20%20%20%20%3F%20this.m_fixtureA.GetShape()%0A%20%20%20%20%20%20%20%20%20%20%3A%20null%2C%0A%20%20%20%20%20%20%20%20bA.m_xf%2C%0A%20%20%20%20%20%20%20%20this.m_fixtureB.GetShape()%20instanceof%20b2CircleShape%0A%20%20%20%20%20%20%20%20%20%20%3F%20this.m_fixtureB.GetShape()%0A%20%20%20%20%20%20%20%20%20%20%3A%20null%2C%0A%20%20%20%20%20%20%20%20bB.m_xf%0A%20%20%20%20%20%20)%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2Contact.b2Contact%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20this.m_nodeA%20%3D%20new%20b2ContactEdge()%3B%0A%20%20%20%20%20%20this.m_nodeB%20%3D%20new%20b2ContactEdge()%3B%0A%20%20%20%20%20%20this.m_manifold%20%3D%20new%20b2Manifold()%3B%0A%20%20%20%20%20%20this.m_oldManifold%20%3D%20new%20b2Manifold()%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2Contact.prototype.GetManifold%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20return%20this.m_manifold%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2Contact.prototype.GetWorldManifold%20%3D%20function%20(worldManifold)%20%7B%0A%20%20%20%20%20%20var%20bodyA%20%3D%20this.m_fixtureA.GetBody()%3B%0A%20%20%20%20%20%20var%20bodyB%20%3D%20this.m_fixtureB.GetBody()%3B%0A%20%20%20%20%20%20var%20shapeA%20%3D%20this.m_fixtureA.GetShape()%3B%0A%20%20%20%20%20%20var%20shapeB%20%3D%20this.m_fixtureB.GetShape()%3B%0A%20%20%20%20%20%20worldManifold.Initialize(%0A%20%20%20%20%20%20%20%20this.m_manifold%2C%0A%20%20%20%20%20%20%20%20bodyA.GetTransform()%2C%0A%20%20%20%20%20%20%20%20shapeA.m_radius%2C%0A%20%20%20%20%20%20%20%20bodyB.GetTransform()%2C%0A%20%20%20%20%20%20%20%20shapeB.m_radius%0A%20%20%20%20%20%20)%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2Contact.prototype.IsTouching%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20return%20(%0A%20%20%20%20%20%20%20%20(this.m_flags%20%26%20b2Contact.e_touchingFlag)%20%3D%3D%20b2Contact.e_touchingFlag%0A%20%20%20%20%20%20)%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2Contact.prototype.IsContinuous%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20return%20(%0A%20%20%20%20%20%20%20%20(this.m_flags%20%26%20b2Contact.e_continuousFlag)%20%3D%3D%0A%20%20%20%20%20%20%20%20b2Contact.e_continuousFlag%0A%20%20%20%20%20%20)%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2Contact.prototype.SetSensor%20%3D%20function%20(sensor)%20%7B%0A%20%20%20%20%20%20if%20(sensor)%20%7B%0A%20%20%20%20%20%20%20%20this.m_flags%20%7C%3D%20b2Contact.e_sensorFlag%3B%0A%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20this.m_flags%20%26%3D%20~b2Contact.e_sensorFlag%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2Contact.prototype.IsSensor%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20return%20(this.m_flags%20%26%20b2Contact.e_sensorFlag)%20%3D%3D%20b2Contact.e_sensorFlag%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2Contact.prototype.SetEnabled%20%3D%20function%20(flag)%20%7B%0A%20%20%20%20%20%20if%20(flag)%20%7B%0A%20%20%20%20%20%20%20%20this.m_flags%20%7C%3D%20b2Contact.e_enabledFlag%3B%0A%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20this.m_flags%20%26%3D%20~b2Contact.e_enabledFlag%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2Contact.prototype.IsEnabled%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20return%20(%0A%20%20%20%20%20%20%20%20(this.m_flags%20%26%20b2Contact.e_enabledFlag)%20%3D%3D%20b2Contact.e_enabledFlag%0A%20%20%20%20%20%20)%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2Contact.prototype.GetNext%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20return%20this.m_next%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2Contact.prototype.GetFixtureA%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20return%20this.m_fixtureA%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2Contact.prototype.GetFixtureB%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20return%20this.m_fixtureB%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2Contact.prototype.FlagForFiltering%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20this.m_flags%20%7C%3D%20b2Contact.e_filterFlag%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2Contact.prototype.b2Contact%20%3D%20function%20()%20%7B%7D%3B%0A%20%20%20%20b2Contact.prototype.Reset%20%3D%20function%20(fixtureA%2C%20fixtureB)%20%7B%0A%20%20%20%20%20%20if%20(fixtureA%20%3D%3D%3D%20undefined)%20fixtureA%20%3D%20null%3B%0A%20%20%20%20%20%20if%20(fixtureB%20%3D%3D%3D%20undefined)%20fixtureB%20%3D%20null%3B%0A%20%20%20%20%20%20this.m_flags%20%3D%20b2Contact.e_enabledFlag%3B%0A%20%20%20%20%20%20if%20(!fixtureA%20%7C%7C%20!fixtureB)%20%7B%0A%20%20%20%20%20%20%20%20this.m_fixtureA%20%3D%20null%3B%0A%20%20%20%20%20%20%20%20this.m_fixtureB%20%3D%20null%3B%0A%20%20%20%20%20%20%20%20return%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20if%20(fixtureA.IsSensor()%20%7C%7C%20fixtureB.IsSensor())%20%7B%0A%20%20%20%20%20%20%20%20this.m_flags%20%7C%3D%20b2Contact.e_sensorFlag%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20var%20bodyA%20%3D%20fixtureA.GetBody()%3B%0A%20%20%20%20%20%20var%20bodyB%20%3D%20fixtureB.GetBody()%3B%0A%20%20%20%20%20%20if%20(%0A%20%20%20%20%20%20%20%20bodyA.GetType()%20!%3D%20b2Body.b2_dynamicBody%20%7C%7C%0A%20%20%20%20%20%20%20%20bodyA.IsBullet()%20%7C%7C%0A%20%20%20%20%20%20%20%20bodyB.GetType()%20!%3D%20b2Body.b2_dynamicBody%20%7C%7C%0A%20%20%20%20%20%20%20%20bodyB.IsBullet()%0A%20%20%20%20%20%20)%20%7B%0A%20%20%20%20%20%20%20%20this.m_flags%20%7C%3D%20b2Contact.e_continuousFlag%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20this.m_fixtureA%20%3D%20fixtureA%3B%0A%20%20%20%20%20%20this.m_fixtureB%20%3D%20fixtureB%3B%0A%20%20%20%20%20%20this.m_manifold.m_pointCount%20%3D%200%3B%0A%20%20%20%20%20%20this.m_prev%20%3D%20null%3B%0A%20%20%20%20%20%20this.m_next%20%3D%20null%3B%0A%20%20%20%20%20%20this.m_nodeA.contact%20%3D%20null%3B%0A%20%20%20%20%20%20this.m_nodeA.prev%20%3D%20null%3B%0A%20%20%20%20%20%20this.m_nodeA.next%20%3D%20null%3B%0A%20%20%20%20%20%20this.m_nodeA.other%20%3D%20null%3B%0A%20%20%20%20%20%20this.m_nodeB.contact%20%3D%20null%3B%0A%20%20%20%20%20%20this.m_nodeB.prev%20%3D%20null%3B%0A%20%20%20%20%20%20this.m_nodeB.next%20%3D%20null%3B%0A%20%20%20%20%20%20this.m_nodeB.other%20%3D%20null%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2Contact.prototype.Update%20%3D%20function%20(listener)%20%7B%0A%20%20%20%20%20%20var%20tManifold%20%3D%20this.m_oldManifold%3B%0A%20%20%20%20%20%20this.m_oldManifold%20%3D%20this.m_manifold%3B%0A%20%20%20%20%20%20this.m_manifold%20%3D%20tManifold%3B%0A%20%20%20%20%20%20this.m_flags%20%7C%3D%20b2Contact.e_enabledFlag%3B%0A%20%20%20%20%20%20var%20touching%20%3D%20false%3B%0A%20%20%20%20%20%20var%20wasTouching%20%3D%0A%20%20%20%20%20%20%20%20(this.m_flags%20%26%20b2Contact.e_touchingFlag)%20%3D%3D%20b2Contact.e_touchingFlag%3B%0A%20%20%20%20%20%20var%20bodyA%20%3D%20this.m_fixtureA.m_body%3B%0A%20%20%20%20%20%20var%20bodyB%20%3D%20this.m_fixtureB.m_body%3B%0A%20%20%20%20%20%20var%20aabbOverlap%20%3D%20this.m_fixtureA.m_aabb.TestOverlap(%0A%20%20%20%20%20%20%20%20this.m_fixtureB.m_aabb%0A%20%20%20%20%20%20)%3B%0A%20%20%20%20%20%20if%20(this.m_flags%20%26%20b2Contact.e_sensorFlag)%20%7B%0A%20%20%20%20%20%20%20%20if%20(aabbOverlap)%20%7B%0A%20%20%20%20%20%20%20%20%20%20var%20shapeA%20%3D%20this.m_fixtureA.GetShape()%3B%0A%20%20%20%20%20%20%20%20%20%20var%20shapeB%20%3D%20this.m_fixtureB.GetShape()%3B%0A%20%20%20%20%20%20%20%20%20%20var%20xfA%20%3D%20bodyA.GetTransform()%3B%0A%20%20%20%20%20%20%20%20%20%20var%20xfB%20%3D%20bodyB.GetTransform()%3B%0A%20%20%20%20%20%20%20%20%20%20touching%20%3D%20b2Shape.TestOverlap(shapeA%2C%20xfA%2C%20shapeB%2C%20xfB)%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20this.m_manifold.m_pointCount%20%3D%200%3B%0A%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20if%20(%0A%20%20%20%20%20%20%20%20%20%20bodyA.GetType()%20!%3D%20b2Body.b2_dynamicBody%20%7C%7C%0A%20%20%20%20%20%20%20%20%20%20bodyA.IsBullet()%20%7C%7C%0A%20%20%20%20%20%20%20%20%20%20bodyB.GetType()%20!%3D%20b2Body.b2_dynamicBody%20%7C%7C%0A%20%20%20%20%20%20%20%20%20%20bodyB.IsBullet()%0A%20%20%20%20%20%20%20%20)%20%7B%0A%20%20%20%20%20%20%20%20%20%20this.m_flags%20%7C%3D%20b2Contact.e_continuousFlag%3B%0A%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20this.m_flags%20%26%3D%20~b2Contact.e_continuousFlag%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20if%20(aabbOverlap)%20%7B%0A%20%20%20%20%20%20%20%20%20%20this.Evaluate()%3B%0A%20%20%20%20%20%20%20%20%20%20touching%20%3D%20this.m_manifold.m_pointCount%20%3E%200%3B%0A%20%20%20%20%20%20%20%20%20%20for%20(var%20i%20%3D%200%3B%20i%20%3C%20this.m_manifold.m_pointCount%3B%20%2B%2Bi)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20var%20mp2%20%3D%20this.m_manifold.m_points%5Bi%5D%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20mp2.m_normalImpulse%20%3D%200.0%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20mp2.m_tangentImpulse%20%3D%200.0%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20var%20id2%20%3D%20mp2.m_id%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20for%20(var%20j%20%3D%200%3B%20j%20%3C%20this.m_oldManifold.m_pointCount%3B%20%2B%2Bj)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20var%20mp1%20%3D%20this.m_oldManifold.m_points%5Bj%5D%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20(mp1.m_id.key%20%3D%3D%20id2.key)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20mp2.m_normalImpulse%20%3D%20mp1.m_normalImpulse%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20mp2.m_tangentImpulse%20%3D%20mp1.m_tangentImpulse%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20break%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20this.m_manifold.m_pointCount%20%3D%200%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20if%20(touching%20!%3D%20wasTouching)%20%7B%0A%20%20%20%20%20%20%20%20%20%20bodyA.SetAwake(true)%3B%0A%20%20%20%20%20%20%20%20%20%20bodyB.SetAwake(true)%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20if%20(touching)%20%7B%0A%20%20%20%20%20%20%20%20this.m_flags%20%7C%3D%20b2Contact.e_touchingFlag%3B%0A%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20this.m_flags%20%26%3D%20~b2Contact.e_touchingFlag%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20if%20(wasTouching%20%3D%3D%20false%20%26%26%20touching%20%3D%3D%20true)%20%7B%0A%20%20%20%20%20%20%20%20listener.BeginContact(this)%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20if%20(wasTouching%20%3D%3D%20true%20%26%26%20touching%20%3D%3D%20false)%20%7B%0A%20%20%20%20%20%20%20%20listener.EndContact(this)%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20if%20((this.m_flags%20%26%20b2Contact.e_sensorFlag)%20%3D%3D%200)%20%7B%0A%20%20%20%20%20%20%20%20listener.PreSolve(this%2C%20this.m_oldManifold)%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2Contact.prototype.Evaluate%20%3D%20function%20()%20%7B%7D%3B%0A%20%20%20%20b2Contact.prototype.ComputeTOI%20%3D%20function%20(sweepA%2C%20sweepB)%20%7B%0A%20%20%20%20%20%20b2Contact.s_input.proxyA.Set(this.m_fixtureA.GetShape())%3B%0A%20%20%20%20%20%20b2Contact.s_input.proxyB.Set(this.m_fixtureB.GetShape())%3B%0A%20%20%20%20%20%20b2Contact.s_input.sweepA%20%3D%20sweepA%3B%0A%20%20%20%20%20%20b2Contact.s_input.sweepB%20%3D%20sweepB%3B%0A%20%20%20%20%20%20b2Contact.s_input.tolerance%20%3D%20b2Settings.b2_linearSlop%3B%0A%20%20%20%20%20%20return%20b2TimeOfImpact.TimeOfImpact(b2Contact.s_input)%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20Box2D.postDefs.push(function%20()%20%7B%0A%20%20%20%20%20%20Box2D.Dynamics.Contacts.b2Contact.e_sensorFlag%20%3D%200x0001%3B%0A%20%20%20%20%20%20Box2D.Dynamics.Contacts.b2Contact.e_continuousFlag%20%3D%200x0002%3B%0A%20%20%20%20%20%20Box2D.Dynamics.Contacts.b2Contact.e_islandFlag%20%3D%200x0004%3B%0A%20%20%20%20%20%20Box2D.Dynamics.Contacts.b2Contact.e_toiFlag%20%3D%200x0008%3B%0A%20%20%20%20%20%20Box2D.Dynamics.Contacts.b2Contact.e_touchingFlag%20%3D%200x0010%3B%0A%20%20%20%20%20%20Box2D.Dynamics.Contacts.b2Contact.e_enabledFlag%20%3D%200x0020%3B%0A%20%20%20%20%20%20Box2D.Dynamics.Contacts.b2Contact.e_filterFlag%20%3D%200x0040%3B%0A%20%20%20%20%20%20Box2D.Dynamics.Contacts.b2Contact.s_input%20%3D%20new%20b2TOIInput()%3B%0A%20%20%20%20%7D)%3B%0A%20%20%20%20b2ContactConstraint.b2ContactConstraint%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20this.localPlaneNormal%20%3D%20new%20b2Vec2()%3B%0A%20%20%20%20%20%20this.localPoint%20%3D%20new%20b2Vec2()%3B%0A%20%20%20%20%20%20this.normal%20%3D%20new%20b2Vec2()%3B%0A%20%20%20%20%20%20this.normalMass%20%3D%20new%20b2Mat22()%3B%0A%20%20%20%20%20%20this.K%20%3D%20new%20b2Mat22()%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2ContactConstraint.prototype.b2ContactConstraint%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20this.points%20%3D%20new%20Vector(b2Settings.b2_maxManifoldPoints)%3B%0A%20%20%20%20%20%20for%20(var%20i%20%3D%200%3B%20i%20%3C%20b2Settings.b2_maxManifoldPoints%3B%20i%2B%2B)%20%7B%0A%20%20%20%20%20%20%20%20this.points%5Bi%5D%20%3D%20new%20b2ContactConstraintPoint()%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2ContactConstraintPoint.b2ContactConstraintPoint%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20this.localPoint%20%3D%20new%20b2Vec2()%3B%0A%20%20%20%20%20%20this.rA%20%3D%20new%20b2Vec2()%3B%0A%20%20%20%20%20%20this.rB%20%3D%20new%20b2Vec2()%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2ContactEdge.b2ContactEdge%20%3D%20function%20()%20%7B%7D%3B%0A%20%20%20%20b2ContactFactory.b2ContactFactory%20%3D%20function%20()%20%7B%7D%3B%0A%20%20%20%20b2ContactFactory.prototype.b2ContactFactory%20%3D%20function%20(allocator)%20%7B%0A%20%20%20%20%20%20this.m_allocator%20%3D%20allocator%3B%0A%20%20%20%20%20%20this.InitializeRegisters()%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2ContactFactory.prototype.AddType%20%3D%20function%20(%0A%20%20%20%20%20%20createFcn%2C%0A%20%20%20%20%20%20destroyFcn%2C%0A%20%20%20%20%20%20type1%2C%0A%20%20%20%20%20%20type2%0A%20%20%20%20)%20%7B%0A%20%20%20%20%20%20if%20(type1%20%3D%3D%3D%20undefined)%20type1%20%3D%200%3B%0A%20%20%20%20%20%20if%20(type2%20%3D%3D%3D%20undefined)%20type2%20%3D%200%3B%0A%20%20%20%20%20%20this.m_registers%5Btype1%5D%5Btype2%5D.createFcn%20%3D%20createFcn%3B%0A%20%20%20%20%20%20this.m_registers%5Btype1%5D%5Btype2%5D.destroyFcn%20%3D%20destroyFcn%3B%0A%20%20%20%20%20%20this.m_registers%5Btype1%5D%5Btype2%5D.primary%20%3D%20true%3B%0A%20%20%20%20%20%20if%20(type1%20!%3D%20type2)%20%7B%0A%20%20%20%20%20%20%20%20this.m_registers%5Btype2%5D%5Btype1%5D.createFcn%20%3D%20createFcn%3B%0A%20%20%20%20%20%20%20%20this.m_registers%5Btype2%5D%5Btype1%5D.destroyFcn%20%3D%20destroyFcn%3B%0A%20%20%20%20%20%20%20%20this.m_registers%5Btype2%5D%5Btype1%5D.primary%20%3D%20false%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2ContactFactory.prototype.InitializeRegisters%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20this.m_registers%20%3D%20new%20Vector(b2Shape.e_shapeTypeCount)%3B%0A%20%20%20%20%20%20for%20(var%20i%20%3D%200%3B%20i%20%3C%20b2Shape.e_shapeTypeCount%3B%20i%2B%2B)%20%7B%0A%20%20%20%20%20%20%20%20this.m_registers%5Bi%5D%20%3D%20new%20Vector(b2Shape.e_shapeTypeCount)%3B%0A%20%20%20%20%20%20%20%20for%20(var%20j%20%3D%200%3B%20j%20%3C%20b2Shape.e_shapeTypeCount%3B%20j%2B%2B)%20%7B%0A%20%20%20%20%20%20%20%20%20%20this.m_registers%5Bi%5D%5Bj%5D%20%3D%20new%20b2ContactRegister()%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20this.AddType(%0A%20%20%20%20%20%20%20%20b2CircleContact.Create%2C%0A%20%20%20%20%20%20%20%20b2CircleContact.Destroy%2C%0A%20%20%20%20%20%20%20%20b2Shape.e_circleShape%2C%0A%20%20%20%20%20%20%20%20b2Shape.e_circleShape%0A%20%20%20%20%20%20)%3B%0A%20%20%20%20%20%20this.AddType(%0A%20%20%20%20%20%20%20%20b2PolyAndCircleContact.Create%2C%0A%20%20%20%20%20%20%20%20b2PolyAndCircleContact.Destroy%2C%0A%20%20%20%20%20%20%20%20b2Shape.e_polygonShape%2C%0A%20%20%20%20%20%20%20%20b2Shape.e_circleShape%0A%20%20%20%20%20%20)%3B%0A%20%20%20%20%20%20this.AddType(%0A%20%20%20%20%20%20%20%20b2PolygonContact.Create%2C%0A%20%20%20%20%20%20%20%20b2PolygonContact.Destroy%2C%0A%20%20%20%20%20%20%20%20b2Shape.e_polygonShape%2C%0A%20%20%20%20%20%20%20%20b2Shape.e_polygonShape%0A%20%20%20%20%20%20)%3B%0A%20%20%20%20%20%20this.AddType(%0A%20%20%20%20%20%20%20%20b2EdgeAndCircleContact.Create%2C%0A%20%20%20%20%20%20%20%20b2EdgeAndCircleContact.Destroy%2C%0A%20%20%20%20%20%20%20%20b2Shape.e_edgeShape%2C%0A%20%20%20%20%20%20%20%20b2Shape.e_circleShape%0A%20%20%20%20%20%20)%3B%0A%20%20%20%20%20%20this.AddType(%0A%20%20%20%20%20%20%20%20b2PolyAndEdgeContact.Create%2C%0A%20%20%20%20%20%20%20%20b2PolyAndEdgeContact.Destroy%2C%0A%20%20%20%20%20%20%20%20b2Shape.e_polygonShape%2C%0A%20%20%20%20%20%20%20%20b2Shape.e_edgeShape%0A%20%20%20%20%20%20)%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2ContactFactory.prototype.Create%20%3D%20function%20(fixtureA%2C%20fixtureB)%20%7B%0A%20%20%20%20%20%20var%20type1%20%3D%20parseInt(fixtureA.GetType())%3B%0A%20%20%20%20%20%20var%20type2%20%3D%20parseInt(fixtureB.GetType())%3B%0A%20%20%20%20%20%20var%20reg%20%3D%20this.m_registers%5Btype1%5D%5Btype2%5D%3B%0A%20%20%20%20%20%20var%20c%3B%0A%20%20%20%20%20%20if%20(reg.pool)%20%7B%0A%20%20%20%20%20%20%20%20c%20%3D%20reg.pool%3B%0A%20%20%20%20%20%20%20%20reg.pool%20%3D%20c.m_next%3B%0A%20%20%20%20%20%20%20%20reg.poolCount--%3B%0A%20%20%20%20%20%20%20%20c.Reset(fixtureA%2C%20fixtureB)%3B%0A%20%20%20%20%20%20%20%20return%20c%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20var%20createFcn%20%3D%20reg.createFcn%3B%0A%20%20%20%20%20%20if%20(createFcn%20!%3D%20null)%20%7B%0A%20%20%20%20%20%20%20%20if%20(reg.primary)%20%7B%0A%20%20%20%20%20%20%20%20%20%20c%20%3D%20createFcn(this.m_allocator)%3B%0A%20%20%20%20%20%20%20%20%20%20c.Reset(fixtureA%2C%20fixtureB)%3B%0A%20%20%20%20%20%20%20%20%20%20return%20c%3B%0A%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20c%20%3D%20createFcn(this.m_allocator)%3B%0A%20%20%20%20%20%20%20%20%20%20c.Reset(fixtureB%2C%20fixtureA)%3B%0A%20%20%20%20%20%20%20%20%20%20return%20c%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20return%20null%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2ContactFactory.prototype.Destroy%20%3D%20function%20(contact)%20%7B%0A%20%20%20%20%20%20if%20(contact.m_manifold.m_pointCount%20%3E%200)%20%7B%0A%20%20%20%20%20%20%20%20contact.m_fixtureA.m_body.SetAwake(true)%3B%0A%20%20%20%20%20%20%20%20contact.m_fixtureB.m_body.SetAwake(true)%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20var%20type1%20%3D%20parseInt(contact.m_fixtureA.GetType())%3B%0A%20%20%20%20%20%20var%20type2%20%3D%20parseInt(contact.m_fixtureB.GetType())%3B%0A%20%20%20%20%20%20var%20reg%20%3D%20this.m_registers%5Btype1%5D%5Btype2%5D%3B%0A%20%20%20%20%20%20if%20(true)%20%7B%0A%20%20%20%20%20%20%20%20reg.poolCount%2B%2B%3B%0A%20%20%20%20%20%20%20%20contact.m_next%20%3D%20reg.pool%3B%0A%20%20%20%20%20%20%20%20reg.pool%20%3D%20contact%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20var%20destroyFcn%20%3D%20reg.destroyFcn%3B%0A%20%20%20%20%20%20destroyFcn(contact%2C%20this.m_allocator)%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2ContactRegister.b2ContactRegister%20%3D%20function%20()%20%7B%7D%3B%0A%20%20%20%20b2ContactResult.b2ContactResult%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20this.position%20%3D%20new%20b2Vec2()%3B%0A%20%20%20%20%20%20this.normal%20%3D%20new%20b2Vec2()%3B%0A%20%20%20%20%20%20this.id%20%3D%20new%20b2ContactID()%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2ContactSolver.b2ContactSolver%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20this.m_step%20%3D%20new%20b2TimeStep()%3B%0A%20%20%20%20%20%20this.m_constraints%20%3D%20new%20Vector()%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2ContactSolver.prototype.b2ContactSolver%20%3D%20function%20()%20%7B%7D%3B%0A%20%20%20%20b2ContactSolver.prototype.Initialize%20%3D%20function%20(%0A%20%20%20%20%20%20step%2C%0A%20%20%20%20%20%20contacts%2C%0A%20%20%20%20%20%20contactCount%2C%0A%20%20%20%20%20%20allocator%0A%20%20%20%20)%20%7B%0A%20%20%20%20%20%20if%20(contactCount%20%3D%3D%3D%20undefined)%20contactCount%20%3D%200%3B%0A%20%20%20%20%20%20var%20contact%3B%0A%20%20%20%20%20%20this.m_step.Set(step)%3B%0A%20%20%20%20%20%20this.m_allocator%20%3D%20allocator%3B%0A%20%20%20%20%20%20var%20i%20%3D%200%3B%0A%20%20%20%20%20%20var%20tVec%3B%0A%20%20%20%20%20%20var%20tMat%3B%0A%20%20%20%20%20%20this.m_constraintCount%20%3D%20contactCount%3B%0A%20%20%20%20%20%20while%20(this.m_constraints.length%20%3C%20this.m_constraintCount)%20%7B%0A%20%20%20%20%20%20%20%20this.m_constraints%5Bthis.m_constraints.length%5D%20%3D%0A%20%20%20%20%20%20%20%20%20%20new%20b2ContactConstraint()%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20for%20(i%20%3D%200%3B%20i%20%3C%20contactCount%3B%20%2B%2Bi)%20%7B%0A%20%20%20%20%20%20%20%20contact%20%3D%20contacts%5Bi%5D%3B%0A%20%20%20%20%20%20%20%20var%20fixtureA%20%3D%20contact.m_fixtureA%3B%0A%20%20%20%20%20%20%20%20var%20fixtureB%20%3D%20contact.m_fixtureB%3B%0A%20%20%20%20%20%20%20%20var%20shapeA%20%3D%20fixtureA.m_shape%3B%0A%20%20%20%20%20%20%20%20var%20shapeB%20%3D%20fixtureB.m_shape%3B%0A%20%20%20%20%20%20%20%20var%20radiusA%20%3D%20shapeA.m_radius%3B%0A%20%20%20%20%20%20%20%20var%20radiusB%20%3D%20shapeB.m_radius%3B%0A%20%20%20%20%20%20%20%20var%20bodyA%20%3D%20fixtureA.m_body%3B%0A%20%20%20%20%20%20%20%20var%20bodyB%20%3D%20fixtureB.m_body%3B%0A%20%20%20%20%20%20%20%20var%20manifold%20%3D%20contact.GetManifold()%3B%0A%20%20%20%20%20%20%20%20var%20friction%20%3D%20b2Settings.b2MixFriction(%0A%20%20%20%20%20%20%20%20%20%20fixtureA.GetFriction()%2C%0A%20%20%20%20%20%20%20%20%20%20fixtureB.GetFriction()%0A%20%20%20%20%20%20%20%20)%3B%0A%20%20%20%20%20%20%20%20var%20restitution%20%3D%20b2Settings.b2MixRestitution(%0A%20%20%20%20%20%20%20%20%20%20fixtureA.GetRestitution()%2C%0A%20%20%20%20%20%20%20%20%20%20fixtureB.GetRestitution()%0A%20%20%20%20%20%20%20%20)%3B%0A%20%20%20%20%20%20%20%20var%20vAX%20%3D%20bodyA.m_linearVelocity.x%3B%0A%20%20%20%20%20%20%20%20var%20vAY%20%3D%20bodyA.m_linearVelocity.y%3B%0A%20%20%20%20%20%20%20%20var%20vBX%20%3D%20bodyB.m_linearVelocity.x%3B%0A%20%20%20%20%20%20%20%20var%20vBY%20%3D%20bodyB.m_linearVelocity.y%3B%0A%20%20%20%20%20%20%20%20var%20wA%20%3D%20bodyA.m_angularVelocity%3B%0A%20%20%20%20%20%20%20%20var%20wB%20%3D%20bodyB.m_angularVelocity%3B%0A%20%20%20%20%20%20%20%20b2Settings.b2Assert(manifold.m_pointCount%20%3E%200)%3B%0A%20%20%20%20%20%20%20%20b2ContactSolver.s_worldManifold.Initialize(%0A%20%20%20%20%20%20%20%20%20%20manifold%2C%0A%20%20%20%20%20%20%20%20%20%20bodyA.m_xf%2C%0A%20%20%20%20%20%20%20%20%20%20radiusA%2C%0A%20%20%20%20%20%20%20%20%20%20bodyB.m_xf%2C%0A%20%20%20%20%20%20%20%20%20%20radiusB%0A%20%20%20%20%20%20%20%20)%3B%0A%20%20%20%20%20%20%20%20var%20normalX%20%3D%20b2ContactSolver.s_worldManifold.m_normal.x%3B%0A%20%20%20%20%20%20%20%20var%20normalY%20%3D%20b2ContactSolver.s_worldManifold.m_normal.y%3B%0A%20%20%20%20%20%20%20%20var%20cc%20%3D%20this.m_constraints%5Bi%5D%3B%0A%20%20%20%20%20%20%20%20cc.bodyA%20%3D%20bodyA%3B%0A%20%20%20%20%20%20%20%20cc.bodyB%20%3D%20bodyB%3B%0A%20%20%20%20%20%20%20%20cc.manifold%20%3D%20manifold%3B%0A%20%20%20%20%20%20%20%20cc.normal.x%20%3D%20normalX%3B%0A%20%20%20%20%20%20%20%20cc.normal.y%20%3D%20normalY%3B%0A%20%20%20%20%20%20%20%20cc.pointCount%20%3D%20manifold.m_pointCount%3B%0A%20%20%20%20%20%20%20%20cc.friction%20%3D%20friction%3B%0A%20%20%20%20%20%20%20%20cc.restitution%20%3D%20restitution%3B%0A%20%20%20%20%20%20%20%20cc.localPlaneNormal.x%20%3D%20manifold.m_localPlaneNormal.x%3B%0A%20%20%20%20%20%20%20%20cc.localPlaneNormal.y%20%3D%20manifold.m_localPlaneNormal.y%3B%0A%20%20%20%20%20%20%20%20cc.localPoint.x%20%3D%20manifold.m_localPoint.x%3B%0A%20%20%20%20%20%20%20%20cc.localPoint.y%20%3D%20manifold.m_localPoint.y%3B%0A%20%20%20%20%20%20%20%20cc.radius%20%3D%20radiusA%20%2B%20radiusB%3B%0A%20%20%20%20%20%20%20%20cc.type%20%3D%20manifold.m_type%3B%0A%20%20%20%20%20%20%20%20for%20(var%20k%20%3D%200%3B%20k%20%3C%20cc.pointCount%3B%20%2B%2Bk)%20%7B%0A%20%20%20%20%20%20%20%20%20%20var%20cp%20%3D%20manifold.m_points%5Bk%5D%3B%0A%20%20%20%20%20%20%20%20%20%20var%20ccp%20%3D%20cc.points%5Bk%5D%3B%0A%20%20%20%20%20%20%20%20%20%20ccp.normalImpulse%20%3D%20cp.m_normalImpulse%3B%0A%20%20%20%20%20%20%20%20%20%20ccp.tangentImpulse%20%3D%20cp.m_tangentImpulse%3B%0A%20%20%20%20%20%20%20%20%20%20ccp.localPoint.SetV(cp.m_localPoint)%3B%0A%20%20%20%20%20%20%20%20%20%20var%20rAX%20%3D%20(ccp.rA.x%20%3D%0A%20%20%20%20%20%20%20%20%20%20%20%20b2ContactSolver.s_worldManifold.m_points%5Bk%5D.x%20-%20bodyA.m_sweep.c.x)%3B%0A%20%20%20%20%20%20%20%20%20%20var%20rAY%20%3D%20(ccp.rA.y%20%3D%0A%20%20%20%20%20%20%20%20%20%20%20%20b2ContactSolver.s_worldManifold.m_points%5Bk%5D.y%20-%20bodyA.m_sweep.c.y)%3B%0A%20%20%20%20%20%20%20%20%20%20var%20rBX%20%3D%20(ccp.rB.x%20%3D%0A%20%20%20%20%20%20%20%20%20%20%20%20b2ContactSolver.s_worldManifold.m_points%5Bk%5D.x%20-%20bodyB.m_sweep.c.x)%3B%0A%20%20%20%20%20%20%20%20%20%20var%20rBY%20%3D%20(ccp.rB.y%20%3D%0A%20%20%20%20%20%20%20%20%20%20%20%20b2ContactSolver.s_worldManifold.m_points%5Bk%5D.y%20-%20bodyB.m_sweep.c.y)%3B%0A%20%20%20%20%20%20%20%20%20%20var%20rnA%20%3D%20rAX%20*%20normalY%20-%20rAY%20*%20normalX%3B%0A%20%20%20%20%20%20%20%20%20%20var%20rnB%20%3D%20rBX%20*%20normalY%20-%20rBY%20*%20normalX%3B%0A%20%20%20%20%20%20%20%20%20%20rnA%20*%3D%20rnA%3B%0A%20%20%20%20%20%20%20%20%20%20rnB%20*%3D%20rnB%3B%0A%20%20%20%20%20%20%20%20%20%20var%20kNormal%20%3D%0A%20%20%20%20%20%20%20%20%20%20%20%20bodyA.m_invMass%20%2B%0A%20%20%20%20%20%20%20%20%20%20%20%20bodyB.m_invMass%20%2B%0A%20%20%20%20%20%20%20%20%20%20%20%20bodyA.m_invI%20*%20rnA%20%2B%0A%20%20%20%20%20%20%20%20%20%20%20%20bodyB.m_invI%20*%20rnB%3B%0A%20%20%20%20%20%20%20%20%20%20ccp.normalMass%20%3D%201.0%20%2F%20kNormal%3B%0A%20%20%20%20%20%20%20%20%20%20var%20kEqualized%20%3D%0A%20%20%20%20%20%20%20%20%20%20%20%20bodyA.m_mass%20*%20bodyA.m_invMass%20%2B%20bodyB.m_mass%20*%20bodyB.m_invMass%3B%0A%20%20%20%20%20%20%20%20%20%20kEqualized%20%2B%3D%0A%20%20%20%20%20%20%20%20%20%20%20%20bodyA.m_mass%20*%20bodyA.m_invI%20*%20rnA%20%2B%0A%20%20%20%20%20%20%20%20%20%20%20%20bodyB.m_mass%20*%20bodyB.m_invI%20*%20rnB%3B%0A%20%20%20%20%20%20%20%20%20%20ccp.equalizedMass%20%3D%201.0%20%2F%20kEqualized%3B%0A%20%20%20%20%20%20%20%20%20%20var%20tangentX%20%3D%20normalY%3B%0A%20%20%20%20%20%20%20%20%20%20var%20tangentY%20%3D%20-normalX%3B%0A%20%20%20%20%20%20%20%20%20%20var%20rtA%20%3D%20rAX%20*%20tangentY%20-%20rAY%20*%20tangentX%3B%0A%20%20%20%20%20%20%20%20%20%20var%20rtB%20%3D%20rBX%20*%20tangentY%20-%20rBY%20*%20tangentX%3B%0A%20%20%20%20%20%20%20%20%20%20rtA%20*%3D%20rtA%3B%0A%20%20%20%20%20%20%20%20%20%20rtB%20*%3D%20rtB%3B%0A%20%20%20%20%20%20%20%20%20%20var%20kTangent%20%3D%0A%20%20%20%20%20%20%20%20%20%20%20%20bodyA.m_invMass%20%2B%0A%20%20%20%20%20%20%20%20%20%20%20%20bodyB.m_invMass%20%2B%0A%20%20%20%20%20%20%20%20%20%20%20%20bodyA.m_invI%20*%20rtA%20%2B%0A%20%20%20%20%20%20%20%20%20%20%20%20bodyB.m_invI%20*%20rtB%3B%0A%20%20%20%20%20%20%20%20%20%20ccp.tangentMass%20%3D%201.0%20%2F%20kTangent%3B%0A%20%20%20%20%20%20%20%20%20%20ccp.velocityBias%20%3D%200.0%3B%0A%20%20%20%20%20%20%20%20%20%20var%20tX%20%3D%20vBX%20%2B%20-wB%20*%20rBY%20-%20vAX%20-%20-wA%20*%20rAY%3B%0A%20%20%20%20%20%20%20%20%20%20var%20tY%20%3D%20vBY%20%2B%20wB%20*%20rBX%20-%20vAY%20-%20wA%20*%20rAX%3B%0A%20%20%20%20%20%20%20%20%20%20var%20vRel%20%3D%20cc.normal.x%20*%20tX%20%2B%20cc.normal.y%20*%20tY%3B%0A%20%20%20%20%20%20%20%20%20%20if%20(vRel%20%3C%20-b2Settings.b2_velocityThreshold)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20ccp.velocityBias%20%2B%3D%20-cc.restitution%20*%20vRel%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20if%20(cc.pointCount%20%3D%3D%202)%20%7B%0A%20%20%20%20%20%20%20%20%20%20var%20ccp1%20%3D%20cc.points%5B0%5D%3B%0A%20%20%20%20%20%20%20%20%20%20var%20ccp2%20%3D%20cc.points%5B1%5D%3B%0A%20%20%20%20%20%20%20%20%20%20var%20invMassA%20%3D%20bodyA.m_invMass%3B%0A%20%20%20%20%20%20%20%20%20%20var%20invIA%20%3D%20bodyA.m_invI%3B%0A%20%20%20%20%20%20%20%20%20%20var%20invMassB%20%3D%20bodyB.m_invMass%3B%0A%20%20%20%20%20%20%20%20%20%20var%20invIB%20%3D%20bodyB.m_invI%3B%0A%20%20%20%20%20%20%20%20%20%20var%20rn1A%20%3D%20ccp1.rA.x%20*%20normalY%20-%20ccp1.rA.y%20*%20normalX%3B%0A%20%20%20%20%20%20%20%20%20%20var%20rn1B%20%3D%20ccp1.rB.x%20*%20normalY%20-%20ccp1.rB.y%20*%20normalX%3B%0A%20%20%20%20%20%20%20%20%20%20var%20rn2A%20%3D%20ccp2.rA.x%20*%20normalY%20-%20ccp2.rA.y%20*%20normalX%3B%0A%20%20%20%20%20%20%20%20%20%20var%20rn2B%20%3D%20ccp2.rB.x%20*%20normalY%20-%20ccp2.rB.y%20*%20normalX%3B%0A%20%20%20%20%20%20%20%20%20%20var%20k11%20%3D%0A%20%20%20%20%20%20%20%20%20%20%20%20invMassA%20%2B%20invMassB%20%2B%20invIA%20*%20rn1A%20*%20rn1A%20%2B%20invIB%20*%20rn1B%20*%20rn1B%3B%0A%20%20%20%20%20%20%20%20%20%20var%20k22%20%3D%0A%20%20%20%20%20%20%20%20%20%20%20%20invMassA%20%2B%20invMassB%20%2B%20invIA%20*%20rn2A%20*%20rn2A%20%2B%20invIB%20*%20rn2B%20*%20rn2B%3B%0A%20%20%20%20%20%20%20%20%20%20var%20k12%20%3D%0A%20%20%20%20%20%20%20%20%20%20%20%20invMassA%20%2B%20invMassB%20%2B%20invIA%20*%20rn1A%20*%20rn2A%20%2B%20invIB%20*%20rn1B%20*%20rn2B%3B%0A%20%20%20%20%20%20%20%20%20%20var%20k_maxConditionNumber%20%3D%20100.0%3B%0A%20%20%20%20%20%20%20%20%20%20if%20(k11%20*%20k11%20%3C%20k_maxConditionNumber%20*%20(k11%20*%20k22%20-%20k12%20*%20k12))%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20cc.K.col1.Set(k11%2C%20k12)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20cc.K.col2.Set(k12%2C%20k22)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20cc.K.GetInverse(cc.normalMass)%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20cc.pointCount%20%3D%201%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2ContactSolver.prototype.InitVelocityConstraints%20%3D%20function%20(step)%20%7B%0A%20%20%20%20%20%20var%20tVec%3B%0A%20%20%20%20%20%20var%20tVec2%3B%0A%20%20%20%20%20%20var%20tMat%3B%0A%20%20%20%20%20%20for%20(var%20i%20%3D%200%3B%20i%20%3C%20this.m_constraintCount%3B%20%2B%2Bi)%20%7B%0A%20%20%20%20%20%20%20%20var%20c%20%3D%20this.m_constraints%5Bi%5D%3B%0A%20%20%20%20%20%20%20%20var%20bodyA%20%3D%20c.bodyA%3B%0A%20%20%20%20%20%20%20%20var%20bodyB%20%3D%20c.bodyB%3B%0A%20%20%20%20%20%20%20%20var%20invMassA%20%3D%20bodyA.m_invMass%3B%0A%20%20%20%20%20%20%20%20var%20invIA%20%3D%20bodyA.m_invI%3B%0A%20%20%20%20%20%20%20%20var%20invMassB%20%3D%20bodyB.m_invMass%3B%0A%20%20%20%20%20%20%20%20var%20invIB%20%3D%20bodyB.m_invI%3B%0A%20%20%20%20%20%20%20%20var%20normalX%20%3D%20c.normal.x%3B%0A%20%20%20%20%20%20%20%20var%20normalY%20%3D%20c.normal.y%3B%0A%20%20%20%20%20%20%20%20var%20tangentX%20%3D%20normalY%3B%0A%20%20%20%20%20%20%20%20var%20tangentY%20%3D%20-normalX%3B%0A%20%20%20%20%20%20%20%20var%20tX%20%3D%200%3B%0A%20%20%20%20%20%20%20%20var%20j%20%3D%200%3B%0A%20%20%20%20%20%20%20%20var%20tCount%20%3D%200%3B%0A%20%20%20%20%20%20%20%20if%20(step.warmStarting)%20%7B%0A%20%20%20%20%20%20%20%20%20%20tCount%20%3D%20c.pointCount%3B%0A%20%20%20%20%20%20%20%20%20%20for%20(j%20%3D%200%3B%20j%20%3C%20tCount%3B%20%2B%2Bj)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20var%20ccp%20%3D%20c.points%5Bj%5D%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20ccp.normalImpulse%20*%3D%20step.dtRatio%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20ccp.tangentImpulse%20*%3D%20step.dtRatio%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20var%20PX%20%3D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20ccp.normalImpulse%20*%20normalX%20%2B%20ccp.tangentImpulse%20*%20tangentX%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20var%20PY%20%3D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20ccp.normalImpulse%20*%20normalY%20%2B%20ccp.tangentImpulse%20*%20tangentY%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20bodyA.m_angularVelocity%20-%3D%20invIA%20*%20(ccp.rA.x%20*%20PY%20-%20ccp.rA.y%20*%20PX)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20bodyA.m_linearVelocity.x%20-%3D%20invMassA%20*%20PX%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20bodyA.m_linearVelocity.y%20-%3D%20invMassA%20*%20PY%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20bodyB.m_angularVelocity%20%2B%3D%20invIB%20*%20(ccp.rB.x%20*%20PY%20-%20ccp.rB.y%20*%20PX)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20bodyB.m_linearVelocity.x%20%2B%3D%20invMassB%20*%20PX%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20bodyB.m_linearVelocity.y%20%2B%3D%20invMassB%20*%20PY%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20tCount%20%3D%20c.pointCount%3B%0A%20%20%20%20%20%20%20%20%20%20for%20(j%20%3D%200%3B%20j%20%3C%20tCount%3B%20%2B%2Bj)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20var%20ccp2%20%3D%20c.points%5Bj%5D%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20ccp2.normalImpulse%20%3D%200.0%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20ccp2.tangentImpulse%20%3D%200.0%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2ContactSolver.prototype.SolveVelocityConstraints%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20var%20j%20%3D%200%3B%0A%20%20%20%20%20%20var%20ccp%3B%0A%20%20%20%20%20%20var%20rAX%20%3D%200%3B%0A%20%20%20%20%20%20var%20rAY%20%3D%200%3B%0A%20%20%20%20%20%20var%20rBX%20%3D%200%3B%0A%20%20%20%20%20%20var%20rBY%20%3D%200%3B%0A%20%20%20%20%20%20var%20dvX%20%3D%200%3B%0A%20%20%20%20%20%20var%20dvY%20%3D%200%3B%0A%20%20%20%20%20%20var%20vn%20%3D%200%3B%0A%20%20%20%20%20%20var%20vt%20%3D%200%3B%0A%20%20%20%20%20%20var%20lambda%20%3D%200%3B%0A%20%20%20%20%20%20var%20maxFriction%20%3D%200%3B%0A%20%20%20%20%20%20var%20newImpulse%20%3D%200%3B%0A%20%20%20%20%20%20var%20PX%20%3D%200%3B%0A%20%20%20%20%20%20var%20PY%20%3D%200%3B%0A%20%20%20%20%20%20var%20dX%20%3D%200%3B%0A%20%20%20%20%20%20var%20dY%20%3D%200%3B%0A%20%20%20%20%20%20var%20P1X%20%3D%200%3B%0A%20%20%20%20%20%20var%20P1Y%20%3D%200%3B%0A%20%20%20%20%20%20var%20P2X%20%3D%200%3B%0A%20%20%20%20%20%20var%20P2Y%20%3D%200%3B%0A%20%20%20%20%20%20var%20tMat%3B%0A%20%20%20%20%20%20var%20tVec%3B%0A%20%20%20%20%20%20for%20(var%20i%20%3D%200%3B%20i%20%3C%20this.m_constraintCount%3B%20%2B%2Bi)%20%7B%0A%20%20%20%20%20%20%20%20var%20c%20%3D%20this.m_constraints%5Bi%5D%3B%0A%20%20%20%20%20%20%20%20var%20bodyA%20%3D%20c.bodyA%3B%0A%20%20%20%20%20%20%20%20var%20bodyB%20%3D%20c.bodyB%3B%0A%20%20%20%20%20%20%20%20var%20wA%20%3D%20bodyA.m_angularVelocity%3B%0A%20%20%20%20%20%20%20%20var%20wB%20%3D%20bodyB.m_angularVelocity%3B%0A%20%20%20%20%20%20%20%20var%20vA%20%3D%20bodyA.m_linearVelocity%3B%0A%20%20%20%20%20%20%20%20var%20vB%20%3D%20bodyB.m_linearVelocity%3B%0A%20%20%20%20%20%20%20%20var%20invMassA%20%3D%20bodyA.m_invMass%3B%0A%20%20%20%20%20%20%20%20var%20invIA%20%3D%20bodyA.m_invI%3B%0A%20%20%20%20%20%20%20%20var%20invMassB%20%3D%20bodyB.m_invMass%3B%0A%20%20%20%20%20%20%20%20var%20invIB%20%3D%20bodyB.m_invI%3B%0A%20%20%20%20%20%20%20%20var%20normalX%20%3D%20c.normal.x%3B%0A%20%20%20%20%20%20%20%20var%20normalY%20%3D%20c.normal.y%3B%0A%20%20%20%20%20%20%20%20var%20tangentX%20%3D%20normalY%3B%0A%20%20%20%20%20%20%20%20var%20tangentY%20%3D%20-normalX%3B%0A%20%20%20%20%20%20%20%20var%20friction%20%3D%20c.friction%3B%0A%20%20%20%20%20%20%20%20var%20tX%20%3D%200%3B%0A%20%20%20%20%20%20%20%20for%20(j%20%3D%200%3B%20j%20%3C%20c.pointCount%3B%20j%2B%2B)%20%7B%0A%20%20%20%20%20%20%20%20%20%20ccp%20%3D%20c.points%5Bj%5D%3B%0A%20%20%20%20%20%20%20%20%20%20dvX%20%3D%20vB.x%20-%20wB%20*%20ccp.rB.y%20-%20vA.x%20%2B%20wA%20*%20ccp.rA.y%3B%0A%20%20%20%20%20%20%20%20%20%20dvY%20%3D%20vB.y%20%2B%20wB%20*%20ccp.rB.x%20-%20vA.y%20-%20wA%20*%20ccp.rA.x%3B%0A%20%20%20%20%20%20%20%20%20%20vt%20%3D%20dvX%20*%20tangentX%20%2B%20dvY%20*%20tangentY%3B%0A%20%20%20%20%20%20%20%20%20%20lambda%20%3D%20ccp.tangentMass%20*%20-vt%3B%0A%20%20%20%20%20%20%20%20%20%20maxFriction%20%3D%20friction%20*%20ccp.normalImpulse%3B%0A%20%20%20%20%20%20%20%20%20%20newImpulse%20%3D%20b2Math.Clamp(%0A%20%20%20%20%20%20%20%20%20%20%20%20ccp.tangentImpulse%20%2B%20lambda%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20-maxFriction%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20maxFriction%0A%20%20%20%20%20%20%20%20%20%20)%3B%0A%20%20%20%20%20%20%20%20%20%20lambda%20%3D%20newImpulse%20-%20ccp.tangentImpulse%3B%0A%20%20%20%20%20%20%20%20%20%20PX%20%3D%20lambda%20*%20tangentX%3B%0A%20%20%20%20%20%20%20%20%20%20PY%20%3D%20lambda%20*%20tangentY%3B%0A%20%20%20%20%20%20%20%20%20%20vA.x%20-%3D%20invMassA%20*%20PX%3B%0A%20%20%20%20%20%20%20%20%20%20vA.y%20-%3D%20invMassA%20*%20PY%3B%0A%20%20%20%20%20%20%20%20%20%20wA%20-%3D%20invIA%20*%20(ccp.rA.x%20*%20PY%20-%20ccp.rA.y%20*%20PX)%3B%0A%20%20%20%20%20%20%20%20%20%20vB.x%20%2B%3D%20invMassB%20*%20PX%3B%0A%20%20%20%20%20%20%20%20%20%20vB.y%20%2B%3D%20invMassB%20*%20PY%3B%0A%20%20%20%20%20%20%20%20%20%20wB%20%2B%3D%20invIB%20*%20(ccp.rB.x%20*%20PY%20-%20ccp.rB.y%20*%20PX)%3B%0A%20%20%20%20%20%20%20%20%20%20ccp.tangentImpulse%20%3D%20newImpulse%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20var%20tCount%20%3D%20parseInt(c.pointCount)%3B%0A%20%20%20%20%20%20%20%20if%20(c.pointCount%20%3D%3D%201)%20%7B%0A%20%20%20%20%20%20%20%20%20%20ccp%20%3D%20c.points%5B0%5D%3B%0A%20%20%20%20%20%20%20%20%20%20dvX%20%3D%20vB.x%20%2B%20-wB%20*%20ccp.rB.y%20-%20vA.x%20-%20-wA%20*%20ccp.rA.y%3B%0A%20%20%20%20%20%20%20%20%20%20dvY%20%3D%20vB.y%20%2B%20wB%20*%20ccp.rB.x%20-%20vA.y%20-%20wA%20*%20ccp.rA.x%3B%0A%20%20%20%20%20%20%20%20%20%20vn%20%3D%20dvX%20*%20normalX%20%2B%20dvY%20*%20normalY%3B%0A%20%20%20%20%20%20%20%20%20%20lambda%20%3D%20-ccp.normalMass%20*%20(vn%20-%20ccp.velocityBias)%3B%0A%20%20%20%20%20%20%20%20%20%20newImpulse%20%3D%20ccp.normalImpulse%20%2B%20lambda%3B%0A%20%20%20%20%20%20%20%20%20%20newImpulse%20%3D%20newImpulse%20%3E%200%20%3F%20newImpulse%20%3A%200.0%3B%0A%20%20%20%20%20%20%20%20%20%20lambda%20%3D%20newImpulse%20-%20ccp.normalImpulse%3B%0A%20%20%20%20%20%20%20%20%20%20PX%20%3D%20lambda%20*%20normalX%3B%0A%20%20%20%20%20%20%20%20%20%20PY%20%3D%20lambda%20*%20normalY%3B%0A%20%20%20%20%20%20%20%20%20%20vA.x%20-%3D%20invMassA%20*%20PX%3B%0A%20%20%20%20%20%20%20%20%20%20vA.y%20-%3D%20invMassA%20*%20PY%3B%0A%20%20%20%20%20%20%20%20%20%20wA%20-%3D%20invIA%20*%20(ccp.rA.x%20*%20PY%20-%20ccp.rA.y%20*%20PX)%3B%0A%20%20%20%20%20%20%20%20%20%20vB.x%20%2B%3D%20invMassB%20*%20PX%3B%0A%20%20%20%20%20%20%20%20%20%20vB.y%20%2B%3D%20invMassB%20*%20PY%3B%0A%20%20%20%20%20%20%20%20%20%20wB%20%2B%3D%20invIB%20*%20(ccp.rB.x%20*%20PY%20-%20ccp.rB.y%20*%20PX)%3B%0A%20%20%20%20%20%20%20%20%20%20ccp.normalImpulse%20%3D%20newImpulse%3B%0A%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20var%20cp1%20%3D%20c.points%5B0%5D%3B%0A%20%20%20%20%20%20%20%20%20%20var%20cp2%20%3D%20c.points%5B1%5D%3B%0A%20%20%20%20%20%20%20%20%20%20var%20aX%20%3D%20cp1.normalImpulse%3B%0A%20%20%20%20%20%20%20%20%20%20var%20aY%20%3D%20cp2.normalImpulse%3B%0A%20%20%20%20%20%20%20%20%20%20var%20dv1X%20%3D%20vB.x%20-%20wB%20*%20cp1.rB.y%20-%20vA.x%20%2B%20wA%20*%20cp1.rA.y%3B%0A%20%20%20%20%20%20%20%20%20%20var%20dv1Y%20%3D%20vB.y%20%2B%20wB%20*%20cp1.rB.x%20-%20vA.y%20-%20wA%20*%20cp1.rA.x%3B%0A%20%20%20%20%20%20%20%20%20%20var%20dv2X%20%3D%20vB.x%20-%20wB%20*%20cp2.rB.y%20-%20vA.x%20%2B%20wA%20*%20cp2.rA.y%3B%0A%20%20%20%20%20%20%20%20%20%20var%20dv2Y%20%3D%20vB.y%20%2B%20wB%20*%20cp2.rB.x%20-%20vA.y%20-%20wA%20*%20cp2.rA.x%3B%0A%20%20%20%20%20%20%20%20%20%20var%20vn1%20%3D%20dv1X%20*%20normalX%20%2B%20dv1Y%20*%20normalY%3B%0A%20%20%20%20%20%20%20%20%20%20var%20vn2%20%3D%20dv2X%20*%20normalX%20%2B%20dv2Y%20*%20normalY%3B%0A%20%20%20%20%20%20%20%20%20%20var%20bX%20%3D%20vn1%20-%20cp1.velocityBias%3B%0A%20%20%20%20%20%20%20%20%20%20var%20bY%20%3D%20vn2%20-%20cp2.velocityBias%3B%0A%20%20%20%20%20%20%20%20%20%20tMat%20%3D%20c.K%3B%0A%20%20%20%20%20%20%20%20%20%20bX%20-%3D%20tMat.col1.x%20*%20aX%20%2B%20tMat.col2.x%20*%20aY%3B%0A%20%20%20%20%20%20%20%20%20%20bY%20-%3D%20tMat.col1.y%20*%20aX%20%2B%20tMat.col2.y%20*%20aY%3B%0A%20%20%20%20%20%20%20%20%20%20var%20k_errorTol%20%3D%200.001%3B%0A%20%20%20%20%20%20%20%20%20%20for%20(%3B%3B)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20tMat%20%3D%20c.normalMass%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20var%20xX%20%3D%20-(tMat.col1.x%20*%20bX%20%2B%20tMat.col2.x%20*%20bY)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20var%20xY%20%3D%20-(tMat.col1.y%20*%20bX%20%2B%20tMat.col2.y%20*%20bY)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(xX%20%3E%3D%200.0%20%26%26%20xY%20%3E%3D%200.0)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20dX%20%3D%20xX%20-%20aX%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20dY%20%3D%20xY%20-%20aY%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20P1X%20%3D%20dX%20*%20normalX%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20P1Y%20%3D%20dX%20*%20normalY%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20P2X%20%3D%20dY%20*%20normalX%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20P2Y%20%3D%20dY%20*%20normalY%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20vA.x%20-%3D%20invMassA%20*%20(P1X%20%2B%20P2X)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20vA.y%20-%3D%20invMassA%20*%20(P1Y%20%2B%20P2Y)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20wA%20-%3D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20invIA%20*%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20(cp1.rA.x%20*%20P1Y%20-%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20cp1.rA.y%20*%20P1X%20%2B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20cp2.rA.x%20*%20P2Y%20-%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20cp2.rA.y%20*%20P2X)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20vB.x%20%2B%3D%20invMassB%20*%20(P1X%20%2B%20P2X)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20vB.y%20%2B%3D%20invMassB%20*%20(P1Y%20%2B%20P2Y)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20wB%20%2B%3D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20invIB%20*%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20(cp1.rB.x%20*%20P1Y%20-%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20cp1.rB.y%20*%20P1X%20%2B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20cp2.rB.x%20*%20P2Y%20-%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20cp2.rB.y%20*%20P2X)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20cp1.normalImpulse%20%3D%20xX%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20cp2.normalImpulse%20%3D%20xY%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20break%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20xX%20%3D%20-cp1.normalMass%20*%20bX%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20xY%20%3D%200.0%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20vn1%20%3D%200.0%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20vn2%20%3D%20c.K.col1.y%20*%20xX%20%2B%20bY%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(xX%20%3E%3D%200.0%20%26%26%20vn2%20%3E%3D%200.0)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20dX%20%3D%20xX%20-%20aX%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20dY%20%3D%20xY%20-%20aY%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20P1X%20%3D%20dX%20*%20normalX%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20P1Y%20%3D%20dX%20*%20normalY%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20P2X%20%3D%20dY%20*%20normalX%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20P2Y%20%3D%20dY%20*%20normalY%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20vA.x%20-%3D%20invMassA%20*%20(P1X%20%2B%20P2X)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20vA.y%20-%3D%20invMassA%20*%20(P1Y%20%2B%20P2Y)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20wA%20-%3D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20invIA%20*%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20(cp1.rA.x%20*%20P1Y%20-%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20cp1.rA.y%20*%20P1X%20%2B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20cp2.rA.x%20*%20P2Y%20-%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20cp2.rA.y%20*%20P2X)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20vB.x%20%2B%3D%20invMassB%20*%20(P1X%20%2B%20P2X)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20vB.y%20%2B%3D%20invMassB%20*%20(P1Y%20%2B%20P2Y)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20wB%20%2B%3D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20invIB%20*%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20(cp1.rB.x%20*%20P1Y%20-%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20cp1.rB.y%20*%20P1X%20%2B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20cp2.rB.x%20*%20P2Y%20-%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20cp2.rB.y%20*%20P2X)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20cp1.normalImpulse%20%3D%20xX%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20cp2.normalImpulse%20%3D%20xY%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20break%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20xX%20%3D%200.0%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20xY%20%3D%20-cp2.normalMass%20*%20bY%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20vn1%20%3D%20c.K.col2.x%20*%20xY%20%2B%20bX%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20vn2%20%3D%200.0%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(xY%20%3E%3D%200.0%20%26%26%20vn1%20%3E%3D%200.0)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20dX%20%3D%20xX%20-%20aX%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20dY%20%3D%20xY%20-%20aY%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20P1X%20%3D%20dX%20*%20normalX%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20P1Y%20%3D%20dX%20*%20normalY%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20P2X%20%3D%20dY%20*%20normalX%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20P2Y%20%3D%20dY%20*%20normalY%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20vA.x%20-%3D%20invMassA%20*%20(P1X%20%2B%20P2X)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20vA.y%20-%3D%20invMassA%20*%20(P1Y%20%2B%20P2Y)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20wA%20-%3D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20invIA%20*%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20(cp1.rA.x%20*%20P1Y%20-%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20cp1.rA.y%20*%20P1X%20%2B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20cp2.rA.x%20*%20P2Y%20-%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20cp2.rA.y%20*%20P2X)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20vB.x%20%2B%3D%20invMassB%20*%20(P1X%20%2B%20P2X)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20vB.y%20%2B%3D%20invMassB%20*%20(P1Y%20%2B%20P2Y)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20wB%20%2B%3D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20invIB%20*%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20(cp1.rB.x%20*%20P1Y%20-%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20cp1.rB.y%20*%20P1X%20%2B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20cp2.rB.x%20*%20P2Y%20-%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20cp2.rB.y%20*%20P2X)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20cp1.normalImpulse%20%3D%20xX%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20cp2.normalImpulse%20%3D%20xY%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20break%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20xX%20%3D%200.0%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20xY%20%3D%200.0%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20vn1%20%3D%20bX%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20vn2%20%3D%20bY%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(vn1%20%3E%3D%200.0%20%26%26%20vn2%20%3E%3D%200.0)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20dX%20%3D%20xX%20-%20aX%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20dY%20%3D%20xY%20-%20aY%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20P1X%20%3D%20dX%20*%20normalX%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20P1Y%20%3D%20dX%20*%20normalY%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20P2X%20%3D%20dY%20*%20normalX%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20P2Y%20%3D%20dY%20*%20normalY%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20vA.x%20-%3D%20invMassA%20*%20(P1X%20%2B%20P2X)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20vA.y%20-%3D%20invMassA%20*%20(P1Y%20%2B%20P2Y)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20wA%20-%3D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20invIA%20*%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20(cp1.rA.x%20*%20P1Y%20-%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20cp1.rA.y%20*%20P1X%20%2B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20cp2.rA.x%20*%20P2Y%20-%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20cp2.rA.y%20*%20P2X)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20vB.x%20%2B%3D%20invMassB%20*%20(P1X%20%2B%20P2X)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20vB.y%20%2B%3D%20invMassB%20*%20(P1Y%20%2B%20P2Y)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20wB%20%2B%3D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20invIB%20*%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20(cp1.rB.x%20*%20P1Y%20-%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20cp1.rB.y%20*%20P1X%20%2B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20cp2.rB.x%20*%20P2Y%20-%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20cp2.rB.y%20*%20P2X)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20cp1.normalImpulse%20%3D%20xX%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20cp2.normalImpulse%20%3D%20xY%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20break%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20break%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20bodyA.m_angularVelocity%20%3D%20wA%3B%0A%20%20%20%20%20%20%20%20bodyB.m_angularVelocity%20%3D%20wB%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2ContactSolver.prototype.FinalizeVelocityConstraints%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20for%20(var%20i%20%3D%200%3B%20i%20%3C%20this.m_constraintCount%3B%20%2B%2Bi)%20%7B%0A%20%20%20%20%20%20%20%20var%20c%20%3D%20this.m_constraints%5Bi%5D%3B%0A%20%20%20%20%20%20%20%20var%20m%20%3D%20c.manifold%3B%0A%20%20%20%20%20%20%20%20for%20(var%20j%20%3D%200%3B%20j%20%3C%20c.pointCount%3B%20%2B%2Bj)%20%7B%0A%20%20%20%20%20%20%20%20%20%20var%20point1%20%3D%20m.m_points%5Bj%5D%3B%0A%20%20%20%20%20%20%20%20%20%20var%20point2%20%3D%20c.points%5Bj%5D%3B%0A%20%20%20%20%20%20%20%20%20%20point1.m_normalImpulse%20%3D%20point2.normalImpulse%3B%0A%20%20%20%20%20%20%20%20%20%20point1.m_tangentImpulse%20%3D%20point2.tangentImpulse%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2ContactSolver.prototype.SolvePositionConstraints%20%3D%20function%20(baumgarte)%20%7B%0A%20%20%20%20%20%20if%20(baumgarte%20%3D%3D%3D%20undefined)%20baumgarte%20%3D%200%3B%0A%20%20%20%20%20%20var%20minSeparation%20%3D%200.0%3B%0A%20%20%20%20%20%20for%20(var%20i%20%3D%200%3B%20i%20%3C%20this.m_constraintCount%3B%20i%2B%2B)%20%7B%0A%20%20%20%20%20%20%20%20var%20c%20%3D%20this.m_constraints%5Bi%5D%3B%0A%20%20%20%20%20%20%20%20var%20bodyA%20%3D%20c.bodyA%3B%0A%20%20%20%20%20%20%20%20var%20bodyB%20%3D%20c.bodyB%3B%0A%20%20%20%20%20%20%20%20var%20invMassA%20%3D%20bodyA.m_mass%20*%20bodyA.m_invMass%3B%0A%20%20%20%20%20%20%20%20var%20invIA%20%3D%20bodyA.m_mass%20*%20bodyA.m_invI%3B%0A%20%20%20%20%20%20%20%20var%20invMassB%20%3D%20bodyB.m_mass%20*%20bodyB.m_invMass%3B%0A%20%20%20%20%20%20%20%20var%20invIB%20%3D%20bodyB.m_mass%20*%20bodyB.m_invI%3B%0A%20%20%20%20%20%20%20%20b2ContactSolver.s_psm.Initialize(c)%3B%0A%20%20%20%20%20%20%20%20var%20normal%20%3D%20b2ContactSolver.s_psm.m_normal%3B%0A%20%20%20%20%20%20%20%20for%20(var%20j%20%3D%200%3B%20j%20%3C%20c.pointCount%3B%20j%2B%2B)%20%7B%0A%20%20%20%20%20%20%20%20%20%20var%20ccp%20%3D%20c.points%5Bj%5D%3B%0A%20%20%20%20%20%20%20%20%20%20var%20point%20%3D%20b2ContactSolver.s_psm.m_points%5Bj%5D%3B%0A%20%20%20%20%20%20%20%20%20%20var%20separation%20%3D%20b2ContactSolver.s_psm.m_separations%5Bj%5D%3B%0A%20%20%20%20%20%20%20%20%20%20var%20rAX%20%3D%20point.x%20-%20bodyA.m_sweep.c.x%3B%0A%20%20%20%20%20%20%20%20%20%20var%20rAY%20%3D%20point.y%20-%20bodyA.m_sweep.c.y%3B%0A%20%20%20%20%20%20%20%20%20%20var%20rBX%20%3D%20point.x%20-%20bodyB.m_sweep.c.x%3B%0A%20%20%20%20%20%20%20%20%20%20var%20rBY%20%3D%20point.y%20-%20bodyB.m_sweep.c.y%3B%0A%20%20%20%20%20%20%20%20%20%20minSeparation%20%3D%0A%20%20%20%20%20%20%20%20%20%20%20%20minSeparation%20%3C%20separation%20%3F%20minSeparation%20%3A%20separation%3B%0A%20%20%20%20%20%20%20%20%20%20var%20C%20%3D%20b2Math.Clamp(%0A%20%20%20%20%20%20%20%20%20%20%20%20baumgarte%20*%20(separation%20%2B%20b2Settings.b2_linearSlop)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20-b2Settings.b2_maxLinearCorrection%2C%0A%20%20%20%20%20%20%20%20%20%20%20%200.0%0A%20%20%20%20%20%20%20%20%20%20)%3B%0A%20%20%20%20%20%20%20%20%20%20var%20impulse%20%3D%20-ccp.equalizedMass%20*%20C%3B%0A%20%20%20%20%20%20%20%20%20%20var%20PX%20%3D%20impulse%20*%20normal.x%3B%0A%20%20%20%20%20%20%20%20%20%20var%20PY%20%3D%20impulse%20*%20normal.y%3B%0A%20%20%20%20%20%20%20%20%20%20bodyA.m_sweep.c.x%20-%3D%20invMassA%20*%20PX%3B%0A%20%20%20%20%20%20%20%20%20%20bodyA.m_sweep.c.y%20-%3D%20invMassA%20*%20PY%3B%0A%20%20%20%20%20%20%20%20%20%20bodyA.m_sweep.a%20-%3D%20invIA%20*%20(rAX%20*%20PY%20-%20rAY%20*%20PX)%3B%0A%20%20%20%20%20%20%20%20%20%20bodyA.SynchronizeTransform()%3B%0A%20%20%20%20%20%20%20%20%20%20bodyB.m_sweep.c.x%20%2B%3D%20invMassB%20*%20PX%3B%0A%20%20%20%20%20%20%20%20%20%20bodyB.m_sweep.c.y%20%2B%3D%20invMassB%20*%20PY%3B%0A%20%20%20%20%20%20%20%20%20%20bodyB.m_sweep.a%20%2B%3D%20invIB%20*%20(rBX%20*%20PY%20-%20rBY%20*%20PX)%3B%0A%20%20%20%20%20%20%20%20%20%20bodyB.SynchronizeTransform()%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20return%20minSeparation%20%3E%20-1.5%20*%20b2Settings.b2_linearSlop%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20Box2D.postDefs.push(function%20()%20%7B%0A%20%20%20%20%20%20Box2D.Dynamics.Contacts.b2ContactSolver.s_worldManifold%20%3D%0A%20%20%20%20%20%20%20%20new%20b2WorldManifold()%3B%0A%20%20%20%20%20%20Box2D.Dynamics.Contacts.b2ContactSolver.s_psm%20%3D%0A%20%20%20%20%20%20%20%20new%20b2PositionSolverManifold()%3B%0A%20%20%20%20%7D)%3B%0A%20%20%20%20Box2D.inherit(b2EdgeAndCircleContact%2C%20Box2D.Dynamics.Contacts.b2Contact)%3B%0A%20%20%20%20b2EdgeAndCircleContact.prototype.__super%20%3D%0A%20%20%20%20%20%20Box2D.Dynamics.Contacts.b2Contact.prototype%3B%0A%20%20%20%20b2EdgeAndCircleContact.b2EdgeAndCircleContact%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20Box2D.Dynamics.Contacts.b2Contact.b2Contact.apply(this%2C%20arguments)%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2EdgeAndCircleContact.Create%20%3D%20function%20(allocator)%20%7B%0A%20%20%20%20%20%20return%20new%20b2EdgeAndCircleContact()%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2EdgeAndCircleContact.Destroy%20%3D%20function%20(contact%2C%20allocator)%20%7B%7D%3B%0A%20%20%20%20b2EdgeAndCircleContact.prototype.Reset%20%3D%20function%20(fixtureA%2C%20fixtureB)%20%7B%0A%20%20%20%20%20%20this.__super.Reset.call(this%2C%20fixtureA%2C%20fixtureB)%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2EdgeAndCircleContact.prototype.Evaluate%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20var%20bA%20%3D%20this.m_fixtureA.GetBody()%3B%0A%20%20%20%20%20%20var%20bB%20%3D%20this.m_fixtureB.GetBody()%3B%0A%20%20%20%20%20%20this.b2CollideEdgeAndCircle(%0A%20%20%20%20%20%20%20%20this.m_manifold%2C%0A%20%20%20%20%20%20%20%20this.m_fixtureA.GetShape()%20instanceof%20b2EdgeShape%0A%20%20%20%20%20%20%20%20%20%20%3F%20this.m_fixtureA.GetShape()%0A%20%20%20%20%20%20%20%20%20%20%3A%20null%2C%0A%20%20%20%20%20%20%20%20bA.m_xf%2C%0A%20%20%20%20%20%20%20%20this.m_fixtureB.GetShape()%20instanceof%20b2CircleShape%0A%20%20%20%20%20%20%20%20%20%20%3F%20this.m_fixtureB.GetShape()%0A%20%20%20%20%20%20%20%20%20%20%3A%20null%2C%0A%20%20%20%20%20%20%20%20bB.m_xf%0A%20%20%20%20%20%20)%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2EdgeAndCircleContact.prototype.b2CollideEdgeAndCircle%20%3D%20function%20(%0A%20%20%20%20%20%20manifold%2C%0A%20%20%20%20%20%20edge%2C%0A%20%20%20%20%20%20xf1%2C%0A%20%20%20%20%20%20circle%2C%0A%20%20%20%20%20%20xf2%0A%20%20%20%20)%20%7B%7D%3B%0A%20%20%20%20Box2D.inherit(b2NullContact%2C%20Box2D.Dynamics.Contacts.b2Contact)%3B%0A%20%20%20%20b2NullContact.prototype.__super%20%3D%0A%20%20%20%20%20%20Box2D.Dynamics.Contacts.b2Contact.prototype%3B%0A%20%20%20%20b2NullContact.b2NullContact%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20Box2D.Dynamics.Contacts.b2Contact.b2Contact.apply(this%2C%20arguments)%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2NullContact.prototype.b2NullContact%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20this.__super.b2Contact.call(this)%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2NullContact.prototype.Evaluate%20%3D%20function%20()%20%7B%7D%3B%0A%20%20%20%20Box2D.inherit(b2PolyAndCircleContact%2C%20Box2D.Dynamics.Contacts.b2Contact)%3B%0A%20%20%20%20b2PolyAndCircleContact.prototype.__super%20%3D%0A%20%20%20%20%20%20Box2D.Dynamics.Contacts.b2Contact.prototype%3B%0A%20%20%20%20b2PolyAndCircleContact.b2PolyAndCircleContact%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20Box2D.Dynamics.Contacts.b2Contact.b2Contact.apply(this%2C%20arguments)%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2PolyAndCircleContact.Create%20%3D%20function%20(allocator)%20%7B%0A%20%20%20%20%20%20return%20new%20b2PolyAndCircleContact()%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2PolyAndCircleContact.Destroy%20%3D%20function%20(contact%2C%20allocator)%20%7B%7D%3B%0A%20%20%20%20b2PolyAndCircleContact.prototype.Reset%20%3D%20function%20(fixtureA%2C%20fixtureB)%20%7B%0A%20%20%20%20%20%20this.__super.Reset.call(this%2C%20fixtureA%2C%20fixtureB)%3B%0A%20%20%20%20%20%20b2Settings.b2Assert(fixtureA.GetType()%20%3D%3D%20b2Shape.e_polygonShape)%3B%0A%20%20%20%20%20%20b2Settings.b2Assert(fixtureB.GetType()%20%3D%3D%20b2Shape.e_circleShape)%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2PolyAndCircleContact.prototype.Evaluate%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20var%20bA%20%3D%20this.m_fixtureA.m_body%3B%0A%20%20%20%20%20%20var%20bB%20%3D%20this.m_fixtureB.m_body%3B%0A%20%20%20%20%20%20b2Collision.CollidePolygonAndCircle(%0A%20%20%20%20%20%20%20%20this.m_manifold%2C%0A%20%20%20%20%20%20%20%20this.m_fixtureA.GetShape()%20instanceof%20b2PolygonShape%0A%20%20%20%20%20%20%20%20%20%20%3F%20this.m_fixtureA.GetShape()%0A%20%20%20%20%20%20%20%20%20%20%3A%20null%2C%0A%20%20%20%20%20%20%20%20bA.m_xf%2C%0A%20%20%20%20%20%20%20%20this.m_fixtureB.GetShape()%20instanceof%20b2CircleShape%0A%20%20%20%20%20%20%20%20%20%20%3F%20this.m_fixtureB.GetShape()%0A%20%20%20%20%20%20%20%20%20%20%3A%20null%2C%0A%20%20%20%20%20%20%20%20bB.m_xf%0A%20%20%20%20%20%20)%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20Box2D.inherit(b2PolyAndEdgeContact%2C%20Box2D.Dynamics.Contacts.b2Contact)%3B%0A%20%20%20%20b2PolyAndEdgeContact.prototype.__super%20%3D%0A%20%20%20%20%20%20Box2D.Dynamics.Contacts.b2Contact.prototype%3B%0A%20%20%20%20b2PolyAndEdgeContact.b2PolyAndEdgeContact%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20Box2D.Dynamics.Contacts.b2Contact.b2Contact.apply(this%2C%20arguments)%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2PolyAndEdgeContact.Create%20%3D%20function%20(allocator)%20%7B%0A%20%20%20%20%20%20return%20new%20b2PolyAndEdgeContact()%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2PolyAndEdgeContact.Destroy%20%3D%20function%20(contact%2C%20allocator)%20%7B%7D%3B%0A%20%20%20%20b2PolyAndEdgeContact.prototype.Reset%20%3D%20function%20(fixtureA%2C%20fixtureB)%20%7B%0A%20%20%20%20%20%20this.__super.Reset.call(this%2C%20fixtureA%2C%20fixtureB)%3B%0A%20%20%20%20%20%20b2Settings.b2Assert(fixtureA.GetType()%20%3D%3D%20b2Shape.e_polygonShape)%3B%0A%20%20%20%20%20%20b2Settings.b2Assert(fixtureB.GetType()%20%3D%3D%20b2Shape.e_edgeShape)%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2PolyAndEdgeContact.prototype.Evaluate%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20var%20bA%20%3D%20this.m_fixtureA.GetBody()%3B%0A%20%20%20%20%20%20var%20bB%20%3D%20this.m_fixtureB.GetBody()%3B%0A%20%20%20%20%20%20this.b2CollidePolyAndEdge(%0A%20%20%20%20%20%20%20%20this.m_manifold%2C%0A%20%20%20%20%20%20%20%20this.m_fixtureA.GetShape()%20instanceof%20b2PolygonShape%0A%20%20%20%20%20%20%20%20%20%20%3F%20this.m_fixtureA.GetShape()%0A%20%20%20%20%20%20%20%20%20%20%3A%20null%2C%0A%20%20%20%20%20%20%20%20bA.m_xf%2C%0A%20%20%20%20%20%20%20%20this.m_fixtureB.GetShape()%20instanceof%20b2EdgeShape%0A%20%20%20%20%20%20%20%20%20%20%3F%20this.m_fixtureB.GetShape()%0A%20%20%20%20%20%20%20%20%20%20%3A%20null%2C%0A%20%20%20%20%20%20%20%20bB.m_xf%0A%20%20%20%20%20%20)%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2PolyAndEdgeContact.prototype.b2CollidePolyAndEdge%20%3D%20function%20(%0A%20%20%20%20%20%20manifold%2C%0A%20%20%20%20%20%20polygon%2C%0A%20%20%20%20%20%20xf1%2C%0A%20%20%20%20%20%20edge%2C%0A%20%20%20%20%20%20xf2%0A%20%20%20%20)%20%7B%7D%3B%0A%20%20%20%20Box2D.inherit(b2PolygonContact%2C%20Box2D.Dynamics.Contacts.b2Contact)%3B%0A%20%20%20%20b2PolygonContact.prototype.__super%20%3D%0A%20%20%20%20%20%20Box2D.Dynamics.Contacts.b2Contact.prototype%3B%0A%20%20%20%20b2PolygonContact.b2PolygonContact%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20Box2D.Dynamics.Contacts.b2Contact.b2Contact.apply(this%2C%20arguments)%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2PolygonContact.Create%20%3D%20function%20(allocator)%20%7B%0A%20%20%20%20%20%20return%20new%20b2PolygonContact()%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2PolygonContact.Destroy%20%3D%20function%20(contact%2C%20allocator)%20%7B%7D%3B%0A%20%20%20%20b2PolygonContact.prototype.Reset%20%3D%20function%20(fixtureA%2C%20fixtureB)%20%7B%0A%20%20%20%20%20%20this.__super.Reset.call(this%2C%20fixtureA%2C%20fixtureB)%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2PolygonContact.prototype.Evaluate%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20var%20bA%20%3D%20this.m_fixtureA.GetBody()%3B%0A%20%20%20%20%20%20var%20bB%20%3D%20this.m_fixtureB.GetBody()%3B%0A%20%20%20%20%20%20b2Collision.CollidePolygons(%0A%20%20%20%20%20%20%20%20this.m_manifold%2C%0A%20%20%20%20%20%20%20%20this.m_fixtureA.GetShape()%20instanceof%20b2PolygonShape%0A%20%20%20%20%20%20%20%20%20%20%3F%20this.m_fixtureA.GetShape()%0A%20%20%20%20%20%20%20%20%20%20%3A%20null%2C%0A%20%20%20%20%20%20%20%20bA.m_xf%2C%0A%20%20%20%20%20%20%20%20this.m_fixtureB.GetShape()%20instanceof%20b2PolygonShape%0A%20%20%20%20%20%20%20%20%20%20%3F%20this.m_fixtureB.GetShape()%0A%20%20%20%20%20%20%20%20%20%20%3A%20null%2C%0A%20%20%20%20%20%20%20%20bB.m_xf%0A%20%20%20%20%20%20)%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2PositionSolverManifold.b2PositionSolverManifold%20%3D%20function%20()%20%7B%7D%3B%0A%20%20%20%20b2PositionSolverManifold.prototype.b2PositionSolverManifold%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20this.m_normal%20%3D%20new%20b2Vec2()%3B%0A%20%20%20%20%20%20this.m_separations%20%3D%20new%20Vector_a2j_Number(%0A%20%20%20%20%20%20%20%20b2Settings.b2_maxManifoldPoints%0A%20%20%20%20%20%20)%3B%0A%20%20%20%20%20%20this.m_points%20%3D%20new%20Vector(b2Settings.b2_maxManifoldPoints)%3B%0A%20%20%20%20%20%20for%20(var%20i%20%3D%200%3B%20i%20%3C%20b2Settings.b2_maxManifoldPoints%3B%20i%2B%2B)%20%7B%0A%20%20%20%20%20%20%20%20this.m_points%5Bi%5D%20%3D%20new%20b2Vec2()%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2PositionSolverManifold.prototype.Initialize%20%3D%20function%20(cc)%20%7B%0A%20%20%20%20%20%20b2Settings.b2Assert(cc.pointCount%20%3E%200)%3B%0A%20%20%20%20%20%20var%20i%20%3D%200%3B%0A%20%20%20%20%20%20var%20clipPointX%20%3D%200%3B%0A%20%20%20%20%20%20var%20clipPointY%20%3D%200%3B%0A%20%20%20%20%20%20var%20tMat%3B%0A%20%20%20%20%20%20var%20tVec%3B%0A%20%20%20%20%20%20var%20planePointX%20%3D%200%3B%0A%20%20%20%20%20%20var%20planePointY%20%3D%200%3B%0A%20%20%20%20%20%20switch%20(cc.type)%20%7B%0A%20%20%20%20%20%20%20%20case%20b2Manifold.e_circles%3A%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20tMat%20%3D%20cc.bodyA.m_xf.R%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20tVec%20%3D%20cc.localPoint%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20var%20pointAX%20%3D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20cc.bodyA.m_xf.position.x%20%2B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20(tMat.col1.x%20*%20tVec.x%20%2B%20tMat.col2.x%20*%20tVec.y)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20var%20pointAY%20%3D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20cc.bodyA.m_xf.position.y%20%2B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20(tMat.col1.y%20*%20tVec.x%20%2B%20tMat.col2.y%20*%20tVec.y)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20tMat%20%3D%20cc.bodyB.m_xf.R%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20tVec%20%3D%20cc.points%5B0%5D.localPoint%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20var%20pointBX%20%3D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20cc.bodyB.m_xf.position.x%20%2B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20(tMat.col1.x%20*%20tVec.x%20%2B%20tMat.col2.x%20*%20tVec.y)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20var%20pointBY%20%3D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20cc.bodyB.m_xf.position.y%20%2B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20(tMat.col1.y%20*%20tVec.x%20%2B%20tMat.col2.y%20*%20tVec.y)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20var%20dX%20%3D%20pointBX%20-%20pointAX%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20var%20dY%20%3D%20pointBY%20-%20pointAY%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20var%20d2%20%3D%20dX%20*%20dX%20%2B%20dY%20*%20dY%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(d2%20%3E%20Number.MIN_VALUE%20*%20Number.MIN_VALUE)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20var%20d%20%3D%20Math.sqrt(d2)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20this.m_normal.x%20%3D%20dX%20%2F%20d%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20this.m_normal.y%20%3D%20dY%20%2F%20d%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20this.m_normal.x%20%3D%201.0%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20this.m_normal.y%20%3D%200.0%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20this.m_points%5B0%5D.x%20%3D%200.5%20*%20(pointAX%20%2B%20pointBX)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20this.m_points%5B0%5D.y%20%3D%200.5%20*%20(pointAY%20%2B%20pointBY)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20this.m_separations%5B0%5D%20%3D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20dX%20*%20this.m_normal.x%20%2B%20dY%20*%20this.m_normal.y%20-%20cc.radius%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20break%3B%0A%20%20%20%20%20%20%20%20case%20b2Manifold.e_faceA%3A%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20tMat%20%3D%20cc.bodyA.m_xf.R%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20tVec%20%3D%20cc.localPlaneNormal%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20this.m_normal.x%20%3D%20tMat.col1.x%20*%20tVec.x%20%2B%20tMat.col2.x%20*%20tVec.y%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20this.m_normal.y%20%3D%20tMat.col1.y%20*%20tVec.x%20%2B%20tMat.col2.y%20*%20tVec.y%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20tMat%20%3D%20cc.bodyA.m_xf.R%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20tVec%20%3D%20cc.localPoint%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20planePointX%20%3D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20cc.bodyA.m_xf.position.x%20%2B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20(tMat.col1.x%20*%20tVec.x%20%2B%20tMat.col2.x%20*%20tVec.y)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20planePointY%20%3D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20cc.bodyA.m_xf.position.y%20%2B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20(tMat.col1.y%20*%20tVec.x%20%2B%20tMat.col2.y%20*%20tVec.y)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20tMat%20%3D%20cc.bodyB.m_xf.R%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20for%20(i%20%3D%200%3B%20i%20%3C%20cc.pointCount%3B%20%2B%2Bi)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20tVec%20%3D%20cc.points%5Bi%5D.localPoint%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20clipPointX%20%3D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20cc.bodyB.m_xf.position.x%20%2B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20(tMat.col1.x%20*%20tVec.x%20%2B%20tMat.col2.x%20*%20tVec.y)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20clipPointY%20%3D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20cc.bodyB.m_xf.position.y%20%2B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20(tMat.col1.y%20*%20tVec.x%20%2B%20tMat.col2.y%20*%20tVec.y)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20this.m_separations%5Bi%5D%20%3D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20(clipPointX%20-%20planePointX)%20*%20this.m_normal.x%20%2B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20(clipPointY%20-%20planePointY)%20*%20this.m_normal.y%20-%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20cc.radius%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20this.m_points%5Bi%5D.x%20%3D%20clipPointX%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20this.m_points%5Bi%5D.y%20%3D%20clipPointY%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20break%3B%0A%20%20%20%20%20%20%20%20case%20b2Manifold.e_faceB%3A%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20tMat%20%3D%20cc.bodyB.m_xf.R%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20tVec%20%3D%20cc.localPlaneNormal%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20this.m_normal.x%20%3D%20tMat.col1.x%20*%20tVec.x%20%2B%20tMat.col2.x%20*%20tVec.y%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20this.m_normal.y%20%3D%20tMat.col1.y%20*%20tVec.x%20%2B%20tMat.col2.y%20*%20tVec.y%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20tMat%20%3D%20cc.bodyB.m_xf.R%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20tVec%20%3D%20cc.localPoint%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20planePointX%20%3D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20cc.bodyB.m_xf.position.x%20%2B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20(tMat.col1.x%20*%20tVec.x%20%2B%20tMat.col2.x%20*%20tVec.y)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20planePointY%20%3D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20cc.bodyB.m_xf.position.y%20%2B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20(tMat.col1.y%20*%20tVec.x%20%2B%20tMat.col2.y%20*%20tVec.y)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20tMat%20%3D%20cc.bodyA.m_xf.R%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20for%20(i%20%3D%200%3B%20i%20%3C%20cc.pointCount%3B%20%2B%2Bi)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20tVec%20%3D%20cc.points%5Bi%5D.localPoint%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20clipPointX%20%3D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20cc.bodyA.m_xf.position.x%20%2B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20(tMat.col1.x%20*%20tVec.x%20%2B%20tMat.col2.x%20*%20tVec.y)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20clipPointY%20%3D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20cc.bodyA.m_xf.position.y%20%2B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20(tMat.col1.y%20*%20tVec.x%20%2B%20tMat.col2.y%20*%20tVec.y)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20this.m_separations%5Bi%5D%20%3D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20(clipPointX%20-%20planePointX)%20*%20this.m_normal.x%20%2B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20(clipPointY%20-%20planePointY)%20*%20this.m_normal.y%20-%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20cc.radius%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20this.m_points%5Bi%5D.Set(clipPointX%2C%20clipPointY)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20this.m_normal.x%20*%3D%20-1%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20this.m_normal.y%20*%3D%20-1%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20break%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%3B%0A%20%20%20%20Box2D.postDefs.push(function%20()%20%7B%0A%20%20%20%20%20%20Box2D.Dynamics.Contacts.b2PositionSolverManifold.circlePointA%20%3D%0A%20%20%20%20%20%20%20%20new%20b2Vec2()%3B%0A%20%20%20%20%20%20Box2D.Dynamics.Contacts.b2PositionSolverManifold.circlePointB%20%3D%0A%20%20%20%20%20%20%20%20new%20b2Vec2()%3B%0A%20%20%20%20%7D)%3B%0A%20%20%7D)()%3B%0A%20%20(function%20()%20%7B%0A%20%20%20%20var%20b2Body%20%3D%20Box2D.Dynamics.b2Body%2C%0A%20%20%20%20%20%20b2BodyDef%20%3D%20Box2D.Dynamics.b2BodyDef%2C%0A%20%20%20%20%20%20b2ContactFilter%20%3D%20Box2D.Dynamics.b2ContactFilter%2C%0A%20%20%20%20%20%20b2ContactImpulse%20%3D%20Box2D.Dynamics.b2ContactImpulse%2C%0A%20%20%20%20%20%20b2ContactListener%20%3D%20Box2D.Dynamics.b2ContactListener%2C%0A%20%20%20%20%20%20b2ContactManager%20%3D%20Box2D.Dynamics.b2ContactManager%2C%0A%20%20%20%20%20%20b2DebugDraw%20%3D%20Box2D.Dynamics.b2DebugDraw%2C%0A%20%20%20%20%20%20b2DestructionListener%20%3D%20Box2D.Dynamics.b2DestructionListener%2C%0A%20%20%20%20%20%20b2FilterData%20%3D%20Box2D.Dynamics.b2FilterData%2C%0A%20%20%20%20%20%20b2Fixture%20%3D%20Box2D.Dynamics.b2Fixture%2C%0A%20%20%20%20%20%20b2FixtureDef%20%3D%20Box2D.Dynamics.b2FixtureDef%2C%0A%20%20%20%20%20%20b2Island%20%3D%20Box2D.Dynamics.b2Island%2C%0A%20%20%20%20%20%20b2TimeStep%20%3D%20Box2D.Dynamics.b2TimeStep%2C%0A%20%20%20%20%20%20b2World%20%3D%20Box2D.Dynamics.b2World%2C%0A%20%20%20%20%20%20b2Mat22%20%3D%20Box2D.Common.Math.b2Mat22%2C%0A%20%20%20%20%20%20b2Mat33%20%3D%20Box2D.Common.Math.b2Mat33%2C%0A%20%20%20%20%20%20b2Math%20%3D%20Box2D.Common.Math.b2Math%2C%0A%20%20%20%20%20%20b2Sweep%20%3D%20Box2D.Common.Math.b2Sweep%2C%0A%20%20%20%20%20%20b2Transform%20%3D%20Box2D.Common.Math.b2Transform%2C%0A%20%20%20%20%20%20b2Vec2%20%3D%20Box2D.Common.Math.b2Vec2%2C%0A%20%20%20%20%20%20b2Vec3%20%3D%20Box2D.Common.Math.b2Vec3%2C%0A%20%20%20%20%20%20b2Color%20%3D%20Box2D.Common.b2Color%2C%0A%20%20%20%20%20%20b2internal%20%3D%20Box2D.Common.b2internal%2C%0A%20%20%20%20%20%20b2Settings%20%3D%20Box2D.Common.b2Settings%2C%0A%20%20%20%20%20%20b2CircleShape%20%3D%20Box2D.Collision.Shapes.b2CircleShape%2C%0A%20%20%20%20%20%20b2EdgeChainDef%20%3D%20Box2D.Collision.Shapes.b2EdgeChainDef%2C%0A%20%20%20%20%20%20b2EdgeShape%20%3D%20Box2D.Collision.Shapes.b2EdgeShape%2C%0A%20%20%20%20%20%20b2MassData%20%3D%20Box2D.Collision.Shapes.b2MassData%2C%0A%20%20%20%20%20%20b2PolygonShape%20%3D%20Box2D.Collision.Shapes.b2PolygonShape%2C%0A%20%20%20%20%20%20b2Shape%20%3D%20Box2D.Collision.Shapes.b2Shape%2C%0A%20%20%20%20%20%20b2BuoyancyController%20%3D%20Box2D.Dynamics.Controllers.b2BuoyancyController%2C%0A%20%20%20%20%20%20b2ConstantAccelController%20%3D%0A%20%20%20%20%20%20%20%20Box2D.Dynamics.Controllers.b2ConstantAccelController%2C%0A%20%20%20%20%20%20b2ConstantForceController%20%3D%0A%20%20%20%20%20%20%20%20Box2D.Dynamics.Controllers.b2ConstantForceController%2C%0A%20%20%20%20%20%20b2Controller%20%3D%20Box2D.Dynamics.Controllers.b2Controller%2C%0A%20%20%20%20%20%20b2ControllerEdge%20%3D%20Box2D.Dynamics.Controllers.b2ControllerEdge%2C%0A%20%20%20%20%20%20b2GravityController%20%3D%20Box2D.Dynamics.Controllers.b2GravityController%2C%0A%20%20%20%20%20%20b2TensorDampingController%20%3D%0A%20%20%20%20%20%20%20%20Box2D.Dynamics.Controllers.b2TensorDampingController%3B%0A%0A%20%20%20%20Box2D.inherit(%0A%20%20%20%20%20%20b2BuoyancyController%2C%0A%20%20%20%20%20%20Box2D.Dynamics.Controllers.b2Controller%0A%20%20%20%20)%3B%0A%20%20%20%20b2BuoyancyController.prototype.__super%20%3D%0A%20%20%20%20%20%20Box2D.Dynamics.Controllers.b2Controller.prototype%3B%0A%20%20%20%20b2BuoyancyController.b2BuoyancyController%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20Box2D.Dynamics.Controllers.b2Controller.b2Controller.apply(%0A%20%20%20%20%20%20%20%20this%2C%0A%20%20%20%20%20%20%20%20arguments%0A%20%20%20%20%20%20)%3B%0A%20%20%20%20%20%20this.normal%20%3D%20new%20b2Vec2(0%2C%20-1)%3B%0A%20%20%20%20%20%20this.offset%20%3D%200%3B%0A%20%20%20%20%20%20this.density%20%3D%200%3B%0A%20%20%20%20%20%20this.velocity%20%3D%20new%20b2Vec2(0%2C%200)%3B%0A%20%20%20%20%20%20this.linearDrag%20%3D%202%3B%0A%20%20%20%20%20%20this.angularDrag%20%3D%201%3B%0A%20%20%20%20%20%20this.useDensity%20%3D%20false%3B%0A%20%20%20%20%20%20this.useWorldGravity%20%3D%20true%3B%0A%20%20%20%20%20%20this.gravity%20%3D%20null%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2BuoyancyController.prototype.Step%20%3D%20function%20(step)%20%7B%0A%20%20%20%20%20%20if%20(!this.m_bodyList)%20return%3B%0A%20%20%20%20%20%20if%20(this.useWorldGravity)%20%7B%0A%20%20%20%20%20%20%20%20this.gravity%20%3D%20this.GetWorld().GetGravity().Copy()%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20for%20(var%20i%20%3D%20this.m_bodyList%3B%20i%3B%20i%20%3D%20i.nextBody)%20%7B%0A%20%20%20%20%20%20%20%20var%20body%20%3D%20i.body%3B%0A%20%20%20%20%20%20%20%20if%20(body.IsAwake()%20%3D%3D%20false)%20%7B%0A%20%20%20%20%20%20%20%20%20%20continue%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20var%20areac%20%3D%20new%20b2Vec2()%3B%0A%20%20%20%20%20%20%20%20var%20massc%20%3D%20new%20b2Vec2()%3B%0A%20%20%20%20%20%20%20%20var%20area%20%3D%200.0%3B%0A%20%20%20%20%20%20%20%20var%20mass%20%3D%200.0%3B%0A%20%20%20%20%20%20%20%20for%20(%0A%20%20%20%20%20%20%20%20%20%20var%20fixture%20%3D%20body.GetFixtureList()%3B%0A%20%20%20%20%20%20%20%20%20%20fixture%3B%0A%20%20%20%20%20%20%20%20%20%20fixture%20%3D%20fixture.GetNext()%0A%20%20%20%20%20%20%20%20)%20%7B%0A%20%20%20%20%20%20%20%20%20%20var%20sc%20%3D%20new%20b2Vec2()%3B%0A%20%20%20%20%20%20%20%20%20%20var%20sarea%20%3D%20fixture%0A%20%20%20%20%20%20%20%20%20%20%20%20.GetShape()%0A%20%20%20%20%20%20%20%20%20%20%20%20.ComputeSubmergedArea(%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20this.normal%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20this.offset%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20body.GetTransform()%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20sc%0A%20%20%20%20%20%20%20%20%20%20%20%20)%3B%0A%20%20%20%20%20%20%20%20%20%20area%20%2B%3D%20sarea%3B%0A%20%20%20%20%20%20%20%20%20%20areac.x%20%2B%3D%20sarea%20*%20sc.x%3B%0A%20%20%20%20%20%20%20%20%20%20areac.y%20%2B%3D%20sarea%20*%20sc.y%3B%0A%20%20%20%20%20%20%20%20%20%20var%20shapeDensity%20%3D%200%3B%0A%20%20%20%20%20%20%20%20%20%20if%20(this.useDensity)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20shapeDensity%20%3D%201%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20shapeDensity%20%3D%201%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20mass%20%2B%3D%20sarea%20*%20shapeDensity%3B%0A%20%20%20%20%20%20%20%20%20%20massc.x%20%2B%3D%20sarea%20*%20sc.x%20*%20shapeDensity%3B%0A%20%20%20%20%20%20%20%20%20%20massc.y%20%2B%3D%20sarea%20*%20sc.y%20*%20shapeDensity%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20areac.x%20%2F%3D%20area%3B%0A%20%20%20%20%20%20%20%20areac.y%20%2F%3D%20area%3B%0A%20%20%20%20%20%20%20%20massc.x%20%2F%3D%20mass%3B%0A%20%20%20%20%20%20%20%20massc.y%20%2F%3D%20mass%3B%0A%20%20%20%20%20%20%20%20if%20(area%20%3C%20Number.MIN_VALUE)%20continue%3B%0A%20%20%20%20%20%20%20%20var%20buoyancyForce%20%3D%20this.gravity.GetNegative()%3B%0A%20%20%20%20%20%20%20%20buoyancyForce.Multiply(this.density%20*%20area)%3B%0A%20%20%20%20%20%20%20%20body.ApplyForce(buoyancyForce%2C%20massc)%3B%0A%20%20%20%20%20%20%20%20var%20dragForce%20%3D%20body.GetLinearVelocityFromWorldPoint(areac)%3B%0A%20%20%20%20%20%20%20%20dragForce.Subtract(this.velocity)%3B%0A%20%20%20%20%20%20%20%20dragForce.Multiply(-this.linearDrag%20*%20area)%3B%0A%20%20%20%20%20%20%20%20body.ApplyForce(dragForce%2C%20areac)%3B%0A%20%20%20%20%20%20%20%20body.ApplyTorque(%0A%20%20%20%20%20%20%20%20%20%20(-body.GetInertia()%20%2F%20body.GetMass())%20*%0A%20%20%20%20%20%20%20%20%20%20%20%20area%20*%0A%20%20%20%20%20%20%20%20%20%20%20%20body.GetAngularVelocity()%20*%0A%20%20%20%20%20%20%20%20%20%20%20%20this.angularDrag%0A%20%20%20%20%20%20%20%20)%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2BuoyancyController.prototype.Draw%20%3D%20function%20(debugDraw)%20%7B%0A%20%20%20%20%20%20var%20r%20%3D%201000%3B%0A%20%20%20%20%20%20var%20p1%20%3D%20new%20b2Vec2()%3B%0A%20%20%20%20%20%20var%20p2%20%3D%20new%20b2Vec2()%3B%0A%20%20%20%20%20%20p1.x%20%3D%20this.normal.x%20*%20this.offset%20%2B%20this.normal.y%20*%20r%3B%0A%20%20%20%20%20%20p1.y%20%3D%20this.normal.y%20*%20this.offset%20-%20this.normal.x%20*%20r%3B%0A%20%20%20%20%20%20p2.x%20%3D%20this.normal.x%20*%20this.offset%20-%20this.normal.y%20*%20r%3B%0A%20%20%20%20%20%20p2.y%20%3D%20this.normal.y%20*%20this.offset%20%2B%20this.normal.x%20*%20r%3B%0A%20%20%20%20%20%20var%20color%20%3D%20new%20b2Color(0%2C%200%2C%201)%3B%0A%20%20%20%20%20%20debugDraw.DrawSegment(p1%2C%20p2%2C%20color)%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20Box2D.inherit(%0A%20%20%20%20%20%20b2ConstantAccelController%2C%0A%20%20%20%20%20%20Box2D.Dynamics.Controllers.b2Controller%0A%20%20%20%20)%3B%0A%20%20%20%20b2ConstantAccelController.prototype.__super%20%3D%0A%20%20%20%20%20%20Box2D.Dynamics.Controllers.b2Controller.prototype%3B%0A%20%20%20%20b2ConstantAccelController.b2ConstantAccelController%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20Box2D.Dynamics.Controllers.b2Controller.b2Controller.apply(%0A%20%20%20%20%20%20%20%20this%2C%0A%20%20%20%20%20%20%20%20arguments%0A%20%20%20%20%20%20)%3B%0A%20%20%20%20%20%20this.A%20%3D%20new%20b2Vec2(0%2C%200)%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2ConstantAccelController.prototype.Step%20%3D%20function%20(step)%20%7B%0A%20%20%20%20%20%20var%20smallA%20%3D%20new%20b2Vec2(this.A.x%20*%20step.dt%2C%20this.A.y%20*%20step.dt)%3B%0A%20%20%20%20%20%20for%20(var%20i%20%3D%20this.m_bodyList%3B%20i%3B%20i%20%3D%20i.nextBody)%20%7B%0A%20%20%20%20%20%20%20%20var%20body%20%3D%20i.body%3B%0A%20%20%20%20%20%20%20%20if%20(!body.IsAwake())%20continue%3B%0A%20%20%20%20%20%20%20%20body.SetLinearVelocity(%0A%20%20%20%20%20%20%20%20%20%20new%20b2Vec2(%0A%20%20%20%20%20%20%20%20%20%20%20%20body.GetLinearVelocity().x%20%2B%20smallA.x%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20body.GetLinearVelocity().y%20%2B%20smallA.y%0A%20%20%20%20%20%20%20%20%20%20)%0A%20%20%20%20%20%20%20%20)%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%3B%0A%20%20%20%20Box2D.inherit(%0A%20%20%20%20%20%20b2ConstantForceController%2C%0A%20%20%20%20%20%20Box2D.Dynamics.Controllers.b2Controller%0A%20%20%20%20)%3B%0A%20%20%20%20b2ConstantForceController.prototype.__super%20%3D%0A%20%20%20%20%20%20Box2D.Dynamics.Controllers.b2Controller.prototype%3B%0A%20%20%20%20b2ConstantForceController.b2ConstantForceController%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20Box2D.Dynamics.Controllers.b2Controller.b2Controller.apply(%0A%20%20%20%20%20%20%20%20this%2C%0A%20%20%20%20%20%20%20%20arguments%0A%20%20%20%20%20%20)%3B%0A%20%20%20%20%20%20this.F%20%3D%20new%20b2Vec2(0%2C%200)%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2ConstantForceController.prototype.Step%20%3D%20function%20(step)%20%7B%0A%20%20%20%20%20%20for%20(var%20i%20%3D%20this.m_bodyList%3B%20i%3B%20i%20%3D%20i.nextBody)%20%7B%0A%20%20%20%20%20%20%20%20var%20body%20%3D%20i.body%3B%0A%20%20%20%20%20%20%20%20if%20(!body.IsAwake())%20continue%3B%0A%20%20%20%20%20%20%20%20body.ApplyForce(this.F%2C%20body.GetWorldCenter())%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2Controller.b2Controller%20%3D%20function%20()%20%7B%7D%3B%0A%20%20%20%20b2Controller.prototype.Step%20%3D%20function%20(step)%20%7B%7D%3B%0A%20%20%20%20b2Controller.prototype.Draw%20%3D%20function%20(debugDraw)%20%7B%7D%3B%0A%20%20%20%20b2Controller.prototype.AddBody%20%3D%20function%20(body)%20%7B%0A%20%20%20%20%20%20var%20edge%20%3D%20new%20b2ControllerEdge()%3B%0A%20%20%20%20%20%20edge.controller%20%3D%20this%3B%0A%20%20%20%20%20%20edge.body%20%3D%20body%3B%0A%20%20%20%20%20%20edge.nextBody%20%3D%20this.m_bodyList%3B%0A%20%20%20%20%20%20edge.prevBody%20%3D%20null%3B%0A%20%20%20%20%20%20this.m_bodyList%20%3D%20edge%3B%0A%20%20%20%20%20%20if%20(edge.nextBody)%20edge.nextBody.prevBody%20%3D%20edge%3B%0A%20%20%20%20%20%20this.m_bodyCount%2B%2B%3B%0A%20%20%20%20%20%20edge.nextController%20%3D%20body.m_controllerList%3B%0A%20%20%20%20%20%20edge.prevController%20%3D%20null%3B%0A%20%20%20%20%20%20body.m_controllerList%20%3D%20edge%3B%0A%20%20%20%20%20%20if%20(edge.nextController)%20edge.nextController.prevController%20%3D%20edge%3B%0A%20%20%20%20%20%20body.m_controllerCount%2B%2B%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2Controller.prototype.RemoveBody%20%3D%20function%20(body)%20%7B%0A%20%20%20%20%20%20var%20edge%20%3D%20body.m_controllerList%3B%0A%20%20%20%20%20%20while%20(edge%20%26%26%20edge.controller%20!%3D%20this)%20edge%20%3D%20edge.nextController%3B%0A%20%20%20%20%20%20if%20(edge.prevBody)%20edge.prevBody.nextBody%20%3D%20edge.nextBody%3B%0A%20%20%20%20%20%20if%20(edge.nextBody)%20edge.nextBody.prevBody%20%3D%20edge.prevBody%3B%0A%20%20%20%20%20%20if%20(edge.nextController)%0A%20%20%20%20%20%20%20%20edge.nextController.prevController%20%3D%20edge.prevController%3B%0A%20%20%20%20%20%20if%20(edge.prevController)%0A%20%20%20%20%20%20%20%20edge.prevController.nextController%20%3D%20edge.nextController%3B%0A%20%20%20%20%20%20if%20(this.m_bodyList%20%3D%3D%20edge)%20this.m_bodyList%20%3D%20edge.nextBody%3B%0A%20%20%20%20%20%20if%20(body.m_controllerList%20%3D%3D%20edge)%0A%20%20%20%20%20%20%20%20body.m_controllerList%20%3D%20edge.nextController%3B%0A%20%20%20%20%20%20body.m_controllerCount--%3B%0A%20%20%20%20%20%20this.m_bodyCount--%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2Controller.prototype.Clear%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20while%20(this.m_bodyList)%20this.RemoveBody(this.m_bodyList.body)%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2Controller.prototype.GetNext%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20return%20this.m_next%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2Controller.prototype.GetWorld%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20return%20this.m_world%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2Controller.prototype.GetBodyList%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20return%20this.m_bodyList%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2ControllerEdge.b2ControllerEdge%20%3D%20function%20()%20%7B%7D%3B%0A%20%20%20%20Box2D.inherit(b2GravityController%2C%20Box2D.Dynamics.Controllers.b2Controller)%3B%0A%20%20%20%20b2GravityController.prototype.__super%20%3D%0A%20%20%20%20%20%20Box2D.Dynamics.Controllers.b2Controller.prototype%3B%0A%20%20%20%20b2GravityController.b2GravityController%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20Box2D.Dynamics.Controllers.b2Controller.b2Controller.apply(%0A%20%20%20%20%20%20%20%20this%2C%0A%20%20%20%20%20%20%20%20arguments%0A%20%20%20%20%20%20)%3B%0A%20%20%20%20%20%20this.G%20%3D%201%3B%0A%20%20%20%20%20%20this.invSqr%20%3D%20true%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2GravityController.prototype.Step%20%3D%20function%20(step)%20%7B%0A%20%20%20%20%20%20var%20i%20%3D%20null%3B%0A%20%20%20%20%20%20var%20body1%20%3D%20null%3B%0A%20%20%20%20%20%20var%20p1%20%3D%20null%3B%0A%20%20%20%20%20%20var%20mass1%20%3D%200%3B%0A%20%20%20%20%20%20var%20j%20%3D%20null%3B%0A%20%20%20%20%20%20var%20body2%20%3D%20null%3B%0A%20%20%20%20%20%20var%20p2%20%3D%20null%3B%0A%20%20%20%20%20%20var%20dx%20%3D%200%3B%0A%20%20%20%20%20%20var%20dy%20%3D%200%3B%0A%20%20%20%20%20%20var%20r2%20%3D%200%3B%0A%20%20%20%20%20%20var%20f%20%3D%20null%3B%0A%20%20%20%20%20%20if%20(this.invSqr)%20%7B%0A%20%20%20%20%20%20%20%20for%20(i%20%3D%20this.m_bodyList%3B%20i%3B%20i%20%3D%20i.nextBody)%20%7B%0A%20%20%20%20%20%20%20%20%20%20body1%20%3D%20i.body%3B%0A%20%20%20%20%20%20%20%20%20%20p1%20%3D%20body1.GetWorldCenter()%3B%0A%20%20%20%20%20%20%20%20%20%20mass1%20%3D%20body1.GetMass()%3B%0A%20%20%20%20%20%20%20%20%20%20for%20(j%20%3D%20this.m_bodyList%3B%20j%20!%3D%20i%3B%20j%20%3D%20j.nextBody)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20body2%20%3D%20j.body%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20p2%20%3D%20body2.GetWorldCenter()%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20dx%20%3D%20p2.x%20-%20p1.x%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20dy%20%3D%20p2.y%20-%20p1.y%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20r2%20%3D%20dx%20*%20dx%20%2B%20dy%20*%20dy%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(r2%20%3C%20Number.MIN_VALUE)%20continue%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20f%20%3D%20new%20b2Vec2(dx%2C%20dy)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20f.Multiply((this.G%20%2F%20r2%20%2F%20Math.sqrt(r2))%20*%20mass1%20*%20body2.GetMass())%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(body1.IsAwake())%20body1.ApplyForce(f%2C%20p1)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20f.Multiply(-1)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(body2.IsAwake())%20body2.ApplyForce(f%2C%20p2)%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20for%20(i%20%3D%20this.m_bodyList%3B%20i%3B%20i%20%3D%20i.nextBody)%20%7B%0A%20%20%20%20%20%20%20%20%20%20body1%20%3D%20i.body%3B%0A%20%20%20%20%20%20%20%20%20%20p1%20%3D%20body1.GetWorldCenter()%3B%0A%20%20%20%20%20%20%20%20%20%20mass1%20%3D%20body1.GetMass()%3B%0A%20%20%20%20%20%20%20%20%20%20for%20(j%20%3D%20this.m_bodyList%3B%20j%20!%3D%20i%3B%20j%20%3D%20j.nextBody)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20body2%20%3D%20j.body%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20p2%20%3D%20body2.GetWorldCenter()%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20dx%20%3D%20p2.x%20-%20p1.x%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20dy%20%3D%20p2.y%20-%20p1.y%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20r2%20%3D%20dx%20*%20dx%20%2B%20dy%20*%20dy%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(r2%20%3C%20Number.MIN_VALUE)%20continue%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20f%20%3D%20new%20b2Vec2(dx%2C%20dy)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20f.Multiply((this.G%20%2F%20r2)%20*%20mass1%20*%20body2.GetMass())%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(body1.IsAwake())%20body1.ApplyForce(f%2C%20p1)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20f.Multiply(-1)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(body2.IsAwake())%20body2.ApplyForce(f%2C%20p2)%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%3B%0A%20%20%20%20Box2D.inherit(%0A%20%20%20%20%20%20b2TensorDampingController%2C%0A%20%20%20%20%20%20Box2D.Dynamics.Controllers.b2Controller%0A%20%20%20%20)%3B%0A%20%20%20%20b2TensorDampingController.prototype.__super%20%3D%0A%20%20%20%20%20%20Box2D.Dynamics.Controllers.b2Controller.prototype%3B%0A%20%20%20%20b2TensorDampingController.b2TensorDampingController%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20Box2D.Dynamics.Controllers.b2Controller.b2Controller.apply(%0A%20%20%20%20%20%20%20%20this%2C%0A%20%20%20%20%20%20%20%20arguments%0A%20%20%20%20%20%20)%3B%0A%20%20%20%20%20%20this.T%20%3D%20new%20b2Mat22()%3B%0A%20%20%20%20%20%20this.maxTimestep%20%3D%200%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2TensorDampingController.prototype.SetAxisAligned%20%3D%20function%20(%0A%20%20%20%20%20%20xDamping%2C%0A%20%20%20%20%20%20yDamping%0A%20%20%20%20)%20%7B%0A%20%20%20%20%20%20if%20(xDamping%20%3D%3D%3D%20undefined)%20xDamping%20%3D%200%3B%0A%20%20%20%20%20%20if%20(yDamping%20%3D%3D%3D%20undefined)%20yDamping%20%3D%200%3B%0A%20%20%20%20%20%20this.T.col1.x%20%3D%20-xDamping%3B%0A%20%20%20%20%20%20this.T.col1.y%20%3D%200%3B%0A%20%20%20%20%20%20this.T.col2.x%20%3D%200%3B%0A%20%20%20%20%20%20this.T.col2.y%20%3D%20-yDamping%3B%0A%20%20%20%20%20%20if%20(xDamping%20%3E%200%20%7C%7C%20yDamping%20%3E%200)%20%7B%0A%20%20%20%20%20%20%20%20this.maxTimestep%20%3D%201%20%2F%20Math.max(xDamping%2C%20yDamping)%3B%0A%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20this.maxTimestep%20%3D%200%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2TensorDampingController.prototype.Step%20%3D%20function%20(step)%20%7B%0A%20%20%20%20%20%20var%20timestep%20%3D%20step.dt%3B%0A%20%20%20%20%20%20if%20(timestep%20%3C%3D%20Number.MIN_VALUE)%20return%3B%0A%20%20%20%20%20%20if%20(timestep%20%3E%20this.maxTimestep%20%26%26%20this.maxTimestep%20%3E%200)%0A%20%20%20%20%20%20%20%20timestep%20%3D%20this.maxTimestep%3B%0A%20%20%20%20%20%20for%20(var%20i%20%3D%20this.m_bodyList%3B%20i%3B%20i%20%3D%20i.nextBody)%20%7B%0A%20%20%20%20%20%20%20%20var%20body%20%3D%20i.body%3B%0A%20%20%20%20%20%20%20%20if%20(!body.IsAwake())%20%7B%0A%20%20%20%20%20%20%20%20%20%20continue%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20var%20damping%20%3D%20body.GetWorldVector(%0A%20%20%20%20%20%20%20%20%20%20b2Math.MulMV(this.T%2C%20body.GetLocalVector(body.GetLinearVelocity()))%0A%20%20%20%20%20%20%20%20)%3B%0A%20%20%20%20%20%20%20%20body.SetLinearVelocity(%0A%20%20%20%20%20%20%20%20%20%20new%20b2Vec2(%0A%20%20%20%20%20%20%20%20%20%20%20%20body.GetLinearVelocity().x%20%2B%20damping.x%20*%20timestep%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20body.GetLinearVelocity().y%20%2B%20damping.y%20*%20timestep%0A%20%20%20%20%20%20%20%20%20%20)%0A%20%20%20%20%20%20%20%20)%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%3B%0A%20%20%7D)()%3B%0A%20%20(function%20()%20%7B%0A%20%20%20%20var%20b2Color%20%3D%20Box2D.Common.b2Color%2C%0A%20%20%20%20%20%20b2internal%20%3D%20Box2D.Common.b2internal%2C%0A%20%20%20%20%20%20b2Settings%20%3D%20Box2D.Common.b2Settings%2C%0A%20%20%20%20%20%20b2Mat22%20%3D%20Box2D.Common.Math.b2Mat22%2C%0A%20%20%20%20%20%20b2Mat33%20%3D%20Box2D.Common.Math.b2Mat33%2C%0A%20%20%20%20%20%20b2Math%20%3D%20Box2D.Common.Math.b2Math%2C%0A%20%20%20%20%20%20b2Sweep%20%3D%20Box2D.Common.Math.b2Sweep%2C%0A%20%20%20%20%20%20b2Transform%20%3D%20Box2D.Common.Math.b2Transform%2C%0A%20%20%20%20%20%20b2Vec2%20%3D%20Box2D.Common.Math.b2Vec2%2C%0A%20%20%20%20%20%20b2Vec3%20%3D%20Box2D.Common.Math.b2Vec3%2C%0A%20%20%20%20%20%20b2DistanceJoint%20%3D%20Box2D.Dynamics.Joints.b2DistanceJoint%2C%0A%20%20%20%20%20%20b2DistanceJointDef%20%3D%20Box2D.Dynamics.Joints.b2DistanceJointDef%2C%0A%20%20%20%20%20%20b2FrictionJoint%20%3D%20Box2D.Dynamics.Joints.b2FrictionJoint%2C%0A%20%20%20%20%20%20b2FrictionJointDef%20%3D%20Box2D.Dynamics.Joints.b2FrictionJointDef%2C%0A%20%20%20%20%20%20b2GearJoint%20%3D%20Box2D.Dynamics.Joints.b2GearJoint%2C%0A%20%20%20%20%20%20b2GearJointDef%20%3D%20Box2D.Dynamics.Joints.b2GearJointDef%2C%0A%20%20%20%20%20%20b2Jacobian%20%3D%20Box2D.Dynamics.Joints.b2Jacobian%2C%0A%20%20%20%20%20%20b2Joint%20%3D%20Box2D.Dynamics.Joints.b2Joint%2C%0A%20%20%20%20%20%20b2JointDef%20%3D%20Box2D.Dynamics.Joints.b2JointDef%2C%0A%20%20%20%20%20%20b2JointEdge%20%3D%20Box2D.Dynamics.Joints.b2JointEdge%2C%0A%20%20%20%20%20%20b2LineJoint%20%3D%20Box2D.Dynamics.Joints.b2LineJoint%2C%0A%20%20%20%20%20%20b2LineJointDef%20%3D%20Box2D.Dynamics.Joints.b2LineJointDef%2C%0A%20%20%20%20%20%20b2MouseJoint%20%3D%20Box2D.Dynamics.Joints.b2MouseJoint%2C%0A%20%20%20%20%20%20b2MouseJointDef%20%3D%20Box2D.Dynamics.Joints.b2MouseJointDef%2C%0A%20%20%20%20%20%20b2PrismaticJoint%20%3D%20Box2D.Dynamics.Joints.b2PrismaticJoint%2C%0A%20%20%20%20%20%20b2PrismaticJointDef%20%3D%20Box2D.Dynamics.Joints.b2PrismaticJointDef%2C%0A%20%20%20%20%20%20b2PulleyJoint%20%3D%20Box2D.Dynamics.Joints.b2PulleyJoint%2C%0A%20%20%20%20%20%20b2PulleyJointDef%20%3D%20Box2D.Dynamics.Joints.b2PulleyJointDef%2C%0A%20%20%20%20%20%20b2RevoluteJoint%20%3D%20Box2D.Dynamics.Joints.b2RevoluteJoint%2C%0A%20%20%20%20%20%20b2RevoluteJointDef%20%3D%20Box2D.Dynamics.Joints.b2RevoluteJointDef%2C%0A%20%20%20%20%20%20b2WeldJoint%20%3D%20Box2D.Dynamics.Joints.b2WeldJoint%2C%0A%20%20%20%20%20%20b2WeldJointDef%20%3D%20Box2D.Dynamics.Joints.b2WeldJointDef%2C%0A%20%20%20%20%20%20b2Body%20%3D%20Box2D.Dynamics.b2Body%2C%0A%20%20%20%20%20%20b2BodyDef%20%3D%20Box2D.Dynamics.b2BodyDef%2C%0A%20%20%20%20%20%20b2ContactFilter%20%3D%20Box2D.Dynamics.b2ContactFilter%2C%0A%20%20%20%20%20%20b2ContactImpulse%20%3D%20Box2D.Dynamics.b2ContactImpulse%2C%0A%20%20%20%20%20%20b2ContactListener%20%3D%20Box2D.Dynamics.b2ContactListener%2C%0A%20%20%20%20%20%20b2ContactManager%20%3D%20Box2D.Dynamics.b2ContactManager%2C%0A%20%20%20%20%20%20b2DebugDraw%20%3D%20Box2D.Dynamics.b2DebugDraw%2C%0A%20%20%20%20%20%20b2DestructionListener%20%3D%20Box2D.Dynamics.b2DestructionListener%2C%0A%20%20%20%20%20%20b2FilterData%20%3D%20Box2D.Dynamics.b2FilterData%2C%0A%20%20%20%20%20%20b2Fixture%20%3D%20Box2D.Dynamics.b2Fixture%2C%0A%20%20%20%20%20%20b2FixtureDef%20%3D%20Box2D.Dynamics.b2FixtureDef%2C%0A%20%20%20%20%20%20b2Island%20%3D%20Box2D.Dynamics.b2Island%2C%0A%20%20%20%20%20%20b2TimeStep%20%3D%20Box2D.Dynamics.b2TimeStep%2C%0A%20%20%20%20%20%20b2World%20%3D%20Box2D.Dynamics.b2World%3B%0A%0A%20%20%20%20Box2D.inherit(b2DistanceJoint%2C%20Box2D.Dynamics.Joints.b2Joint)%3B%0A%20%20%20%20b2DistanceJoint.prototype.__super%20%3D%20Box2D.Dynamics.Joints.b2Joint.prototype%3B%0A%20%20%20%20b2DistanceJoint.b2DistanceJoint%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20Box2D.Dynamics.Joints.b2Joint.b2Joint.apply(this%2C%20arguments)%3B%0A%20%20%20%20%20%20this.m_localAnchor1%20%3D%20new%20b2Vec2()%3B%0A%20%20%20%20%20%20this.m_localAnchor2%20%3D%20new%20b2Vec2()%3B%0A%20%20%20%20%20%20this.m_u%20%3D%20new%20b2Vec2()%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2DistanceJoint.prototype.GetAnchorA%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20return%20this.m_bodyA.GetWorldPoint(this.m_localAnchor1)%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2DistanceJoint.prototype.GetAnchorB%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20return%20this.m_bodyB.GetWorldPoint(this.m_localAnchor2)%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2DistanceJoint.prototype.GetReactionForce%20%3D%20function%20(inv_dt)%20%7B%0A%20%20%20%20%20%20if%20(inv_dt%20%3D%3D%3D%20undefined)%20inv_dt%20%3D%200%3B%0A%20%20%20%20%20%20return%20new%20b2Vec2(%0A%20%20%20%20%20%20%20%20inv_dt%20*%20this.m_impulse%20*%20this.m_u.x%2C%0A%20%20%20%20%20%20%20%20inv_dt%20*%20this.m_impulse%20*%20this.m_u.y%0A%20%20%20%20%20%20)%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2DistanceJoint.prototype.GetReactionTorque%20%3D%20function%20(inv_dt)%20%7B%0A%20%20%20%20%20%20if%20(inv_dt%20%3D%3D%3D%20undefined)%20inv_dt%20%3D%200%3B%0A%20%20%20%20%20%20return%200.0%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2DistanceJoint.prototype.GetLength%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20return%20this.m_length%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2DistanceJoint.prototype.SetLength%20%3D%20function%20(length)%20%7B%0A%20%20%20%20%20%20if%20(length%20%3D%3D%3D%20undefined)%20length%20%3D%200%3B%0A%20%20%20%20%20%20this.m_length%20%3D%20length%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2DistanceJoint.prototype.GetFrequency%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20return%20this.m_frequencyHz%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2DistanceJoint.prototype.SetFrequency%20%3D%20function%20(hz)%20%7B%0A%20%20%20%20%20%20if%20(hz%20%3D%3D%3D%20undefined)%20hz%20%3D%200%3B%0A%20%20%20%20%20%20this.m_frequencyHz%20%3D%20hz%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2DistanceJoint.prototype.GetDampingRatio%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20return%20this.m_dampingRatio%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2DistanceJoint.prototype.SetDampingRatio%20%3D%20function%20(ratio)%20%7B%0A%20%20%20%20%20%20if%20(ratio%20%3D%3D%3D%20undefined)%20ratio%20%3D%200%3B%0A%20%20%20%20%20%20this.m_dampingRatio%20%3D%20ratio%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2DistanceJoint.prototype.b2DistanceJoint%20%3D%20function%20(def)%20%7B%0A%20%20%20%20%20%20this.__super.b2Joint.call(this%2C%20def)%3B%0A%20%20%20%20%20%20var%20tMat%3B%0A%20%20%20%20%20%20var%20tX%20%3D%200%3B%0A%20%20%20%20%20%20var%20tY%20%3D%200%3B%0A%20%20%20%20%20%20this.m_localAnchor1.SetV(def.localAnchorA)%3B%0A%20%20%20%20%20%20this.m_localAnchor2.SetV(def.localAnchorB)%3B%0A%20%20%20%20%20%20this.m_length%20%3D%20def.length%3B%0A%20%20%20%20%20%20this.m_frequencyHz%20%3D%20def.frequencyHz%3B%0A%20%20%20%20%20%20this.m_dampingRatio%20%3D%20def.dampingRatio%3B%0A%20%20%20%20%20%20this.m_impulse%20%3D%200.0%3B%0A%20%20%20%20%20%20this.m_gamma%20%3D%200.0%3B%0A%20%20%20%20%20%20this.m_bias%20%3D%200.0%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2DistanceJoint.prototype.InitVelocityConstraints%20%3D%20function%20(step)%20%7B%0A%20%20%20%20%20%20var%20tMat%3B%0A%20%20%20%20%20%20var%20tX%20%3D%200%3B%0A%20%20%20%20%20%20var%20bA%20%3D%20this.m_bodyA%3B%0A%20%20%20%20%20%20var%20bB%20%3D%20this.m_bodyB%3B%0A%20%20%20%20%20%20tMat%20%3D%20bA.m_xf.R%3B%0A%20%20%20%20%20%20var%20r1X%20%3D%20this.m_localAnchor1.x%20-%20bA.m_sweep.localCenter.x%3B%0A%20%20%20%20%20%20var%20r1Y%20%3D%20this.m_localAnchor1.y%20-%20bA.m_sweep.localCenter.y%3B%0A%20%20%20%20%20%20tX%20%3D%20tMat.col1.x%20*%20r1X%20%2B%20tMat.col2.x%20*%20r1Y%3B%0A%20%20%20%20%20%20r1Y%20%3D%20tMat.col1.y%20*%20r1X%20%2B%20tMat.col2.y%20*%20r1Y%3B%0A%20%20%20%20%20%20r1X%20%3D%20tX%3B%0A%20%20%20%20%20%20tMat%20%3D%20bB.m_xf.R%3B%0A%20%20%20%20%20%20var%20r2X%20%3D%20this.m_localAnchor2.x%20-%20bB.m_sweep.localCenter.x%3B%0A%20%20%20%20%20%20var%20r2Y%20%3D%20this.m_localAnchor2.y%20-%20bB.m_sweep.localCenter.y%3B%0A%20%20%20%20%20%20tX%20%3D%20tMat.col1.x%20*%20r2X%20%2B%20tMat.col2.x%20*%20r2Y%3B%0A%20%20%20%20%20%20r2Y%20%3D%20tMat.col1.y%20*%20r2X%20%2B%20tMat.col2.y%20*%20r2Y%3B%0A%20%20%20%20%20%20r2X%20%3D%20tX%3B%0A%20%20%20%20%20%20this.m_u.x%20%3D%20bB.m_sweep.c.x%20%2B%20r2X%20-%20bA.m_sweep.c.x%20-%20r1X%3B%0A%20%20%20%20%20%20this.m_u.y%20%3D%20bB.m_sweep.c.y%20%2B%20r2Y%20-%20bA.m_sweep.c.y%20-%20r1Y%3B%0A%20%20%20%20%20%20var%20length%20%3D%20Math.sqrt(this.m_u.x%20*%20this.m_u.x%20%2B%20this.m_u.y%20*%20this.m_u.y)%3B%0A%20%20%20%20%20%20if%20(length%20%3E%20b2Settings.b2_linearSlop)%20%7B%0A%20%20%20%20%20%20%20%20this.m_u.Multiply(1.0%20%2F%20length)%3B%0A%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20this.m_u.SetZero()%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20var%20cr1u%20%3D%20r1X%20*%20this.m_u.y%20-%20r1Y%20*%20this.m_u.x%3B%0A%20%20%20%20%20%20var%20cr2u%20%3D%20r2X%20*%20this.m_u.y%20-%20r2Y%20*%20this.m_u.x%3B%0A%20%20%20%20%20%20var%20invMass%20%3D%0A%20%20%20%20%20%20%20%20bA.m_invMass%20%2B%0A%20%20%20%20%20%20%20%20bA.m_invI%20*%20cr1u%20*%20cr1u%20%2B%0A%20%20%20%20%20%20%20%20bB.m_invMass%20%2B%0A%20%20%20%20%20%20%20%20bB.m_invI%20*%20cr2u%20*%20cr2u%3B%0A%20%20%20%20%20%20this.m_mass%20%3D%20invMass%20!%3D%200.0%20%3F%201.0%20%2F%20invMass%20%3A%200.0%3B%0A%20%20%20%20%20%20if%20(this.m_frequencyHz%20%3E%200.0)%20%7B%0A%20%20%20%20%20%20%20%20var%20C%20%3D%20length%20-%20this.m_length%3B%0A%20%20%20%20%20%20%20%20var%20omega%20%3D%202.0%20*%20Math.PI%20*%20this.m_frequencyHz%3B%0A%20%20%20%20%20%20%20%20var%20d%20%3D%202.0%20*%20this.m_mass%20*%20this.m_dampingRatio%20*%20omega%3B%0A%20%20%20%20%20%20%20%20var%20k%20%3D%20this.m_mass%20*%20omega%20*%20omega%3B%0A%20%20%20%20%20%20%20%20this.m_gamma%20%3D%20step.dt%20*%20(d%20%2B%20step.dt%20*%20k)%3B%0A%20%20%20%20%20%20%20%20this.m_gamma%20%3D%20this.m_gamma%20!%3D%200.0%20%3F%201%20%2F%20this.m_gamma%20%3A%200.0%3B%0A%20%20%20%20%20%20%20%20this.m_bias%20%3D%20C%20*%20step.dt%20*%20k%20*%20this.m_gamma%3B%0A%20%20%20%20%20%20%20%20this.m_mass%20%3D%20invMass%20%2B%20this.m_gamma%3B%0A%20%20%20%20%20%20%20%20this.m_mass%20%3D%20this.m_mass%20!%3D%200.0%20%3F%201.0%20%2F%20this.m_mass%20%3A%200.0%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20if%20(step.warmStarting)%20%7B%0A%20%20%20%20%20%20%20%20this.m_impulse%20*%3D%20step.dtRatio%3B%0A%20%20%20%20%20%20%20%20var%20PX%20%3D%20this.m_impulse%20*%20this.m_u.x%3B%0A%20%20%20%20%20%20%20%20var%20PY%20%3D%20this.m_impulse%20*%20this.m_u.y%3B%0A%20%20%20%20%20%20%20%20bA.m_linearVelocity.x%20-%3D%20bA.m_invMass%20*%20PX%3B%0A%20%20%20%20%20%20%20%20bA.m_linearVelocity.y%20-%3D%20bA.m_invMass%20*%20PY%3B%0A%20%20%20%20%20%20%20%20bA.m_angularVelocity%20-%3D%20bA.m_invI%20*%20(r1X%20*%20PY%20-%20r1Y%20*%20PX)%3B%0A%20%20%20%20%20%20%20%20bB.m_linearVelocity.x%20%2B%3D%20bB.m_invMass%20*%20PX%3B%0A%20%20%20%20%20%20%20%20bB.m_linearVelocity.y%20%2B%3D%20bB.m_invMass%20*%20PY%3B%0A%20%20%20%20%20%20%20%20bB.m_angularVelocity%20%2B%3D%20bB.m_invI%20*%20(r2X%20*%20PY%20-%20r2Y%20*%20PX)%3B%0A%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20this.m_impulse%20%3D%200.0%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2DistanceJoint.prototype.SolveVelocityConstraints%20%3D%20function%20(step)%20%7B%0A%20%20%20%20%20%20var%20tMat%3B%0A%20%20%20%20%20%20var%20bA%20%3D%20this.m_bodyA%3B%0A%20%20%20%20%20%20var%20bB%20%3D%20this.m_bodyB%3B%0A%20%20%20%20%20%20tMat%20%3D%20bA.m_xf.R%3B%0A%20%20%20%20%20%20var%20r1X%20%3D%20this.m_localAnchor1.x%20-%20bA.m_sweep.localCenter.x%3B%0A%20%20%20%20%20%20var%20r1Y%20%3D%20this.m_localAnchor1.y%20-%20bA.m_sweep.localCenter.y%3B%0A%20%20%20%20%20%20var%20tX%20%3D%20tMat.col1.x%20*%20r1X%20%2B%20tMat.col2.x%20*%20r1Y%3B%0A%20%20%20%20%20%20r1Y%20%3D%20tMat.col1.y%20*%20r1X%20%2B%20tMat.col2.y%20*%20r1Y%3B%0A%20%20%20%20%20%20r1X%20%3D%20tX%3B%0A%20%20%20%20%20%20tMat%20%3D%20bB.m_xf.R%3B%0A%20%20%20%20%20%20var%20r2X%20%3D%20this.m_localAnchor2.x%20-%20bB.m_sweep.localCenter.x%3B%0A%20%20%20%20%20%20var%20r2Y%20%3D%20this.m_localAnchor2.y%20-%20bB.m_sweep.localCenter.y%3B%0A%20%20%20%20%20%20tX%20%3D%20tMat.col1.x%20*%20r2X%20%2B%20tMat.col2.x%20*%20r2Y%3B%0A%20%20%20%20%20%20r2Y%20%3D%20tMat.col1.y%20*%20r2X%20%2B%20tMat.col2.y%20*%20r2Y%3B%0A%20%20%20%20%20%20r2X%20%3D%20tX%3B%0A%20%20%20%20%20%20var%20v1X%20%3D%20bA.m_linearVelocity.x%20%2B%20-bA.m_angularVelocity%20*%20r1Y%3B%0A%20%20%20%20%20%20var%20v1Y%20%3D%20bA.m_linearVelocity.y%20%2B%20bA.m_angularVelocity%20*%20r1X%3B%0A%20%20%20%20%20%20var%20v2X%20%3D%20bB.m_linearVelocity.x%20%2B%20-bB.m_angularVelocity%20*%20r2Y%3B%0A%20%20%20%20%20%20var%20v2Y%20%3D%20bB.m_linearVelocity.y%20%2B%20bB.m_angularVelocity%20*%20r2X%3B%0A%20%20%20%20%20%20var%20Cdot%20%3D%20this.m_u.x%20*%20(v2X%20-%20v1X)%20%2B%20this.m_u.y%20*%20(v2Y%20-%20v1Y)%3B%0A%20%20%20%20%20%20var%20impulse%20%3D%0A%20%20%20%20%20%20%20%20-this.m_mass%20*%20(Cdot%20%2B%20this.m_bias%20%2B%20this.m_gamma%20*%20this.m_impulse)%3B%0A%20%20%20%20%20%20this.m_impulse%20%2B%3D%20impulse%3B%0A%20%20%20%20%20%20var%20PX%20%3D%20impulse%20*%20this.m_u.x%3B%0A%20%20%20%20%20%20var%20PY%20%3D%20impulse%20*%20this.m_u.y%3B%0A%20%20%20%20%20%20bA.m_linearVelocity.x%20-%3D%20bA.m_invMass%20*%20PX%3B%0A%20%20%20%20%20%20bA.m_linearVelocity.y%20-%3D%20bA.m_invMass%20*%20PY%3B%0A%20%20%20%20%20%20bA.m_angularVelocity%20-%3D%20bA.m_invI%20*%20(r1X%20*%20PY%20-%20r1Y%20*%20PX)%3B%0A%20%20%20%20%20%20bB.m_linearVelocity.x%20%2B%3D%20bB.m_invMass%20*%20PX%3B%0A%20%20%20%20%20%20bB.m_linearVelocity.y%20%2B%3D%20bB.m_invMass%20*%20PY%3B%0A%20%20%20%20%20%20bB.m_angularVelocity%20%2B%3D%20bB.m_invI%20*%20(r2X%20*%20PY%20-%20r2Y%20*%20PX)%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2DistanceJoint.prototype.SolvePositionConstraints%20%3D%20function%20(baumgarte)%20%7B%0A%20%20%20%20%20%20if%20(baumgarte%20%3D%3D%3D%20undefined)%20baumgarte%20%3D%200%3B%0A%20%20%20%20%20%20var%20tMat%3B%0A%20%20%20%20%20%20if%20(this.m_frequencyHz%20%3E%200.0)%20%7B%0A%20%20%20%20%20%20%20%20return%20true%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20var%20bA%20%3D%20this.m_bodyA%3B%0A%20%20%20%20%20%20var%20bB%20%3D%20this.m_bodyB%3B%0A%20%20%20%20%20%20tMat%20%3D%20bA.m_xf.R%3B%0A%20%20%20%20%20%20var%20r1X%20%3D%20this.m_localAnchor1.x%20-%20bA.m_sweep.localCenter.x%3B%0A%20%20%20%20%20%20var%20r1Y%20%3D%20this.m_localAnchor1.y%20-%20bA.m_sweep.localCenter.y%3B%0A%20%20%20%20%20%20var%20tX%20%3D%20tMat.col1.x%20*%20r1X%20%2B%20tMat.col2.x%20*%20r1Y%3B%0A%20%20%20%20%20%20r1Y%20%3D%20tMat.col1.y%20*%20r1X%20%2B%20tMat.col2.y%20*%20r1Y%3B%0A%20%20%20%20%20%20r1X%20%3D%20tX%3B%0A%20%20%20%20%20%20tMat%20%3D%20bB.m_xf.R%3B%0A%20%20%20%20%20%20var%20r2X%20%3D%20this.m_localAnchor2.x%20-%20bB.m_sweep.localCenter.x%3B%0A%20%20%20%20%20%20var%20r2Y%20%3D%20this.m_localAnchor2.y%20-%20bB.m_sweep.localCenter.y%3B%0A%20%20%20%20%20%20tX%20%3D%20tMat.col1.x%20*%20r2X%20%2B%20tMat.col2.x%20*%20r2Y%3B%0A%20%20%20%20%20%20r2Y%20%3D%20tMat.col1.y%20*%20r2X%20%2B%20tMat.col2.y%20*%20r2Y%3B%0A%20%20%20%20%20%20r2X%20%3D%20tX%3B%0A%20%20%20%20%20%20var%20dX%20%3D%20bB.m_sweep.c.x%20%2B%20r2X%20-%20bA.m_sweep.c.x%20-%20r1X%3B%0A%20%20%20%20%20%20var%20dY%20%3D%20bB.m_sweep.c.y%20%2B%20r2Y%20-%20bA.m_sweep.c.y%20-%20r1Y%3B%0A%20%20%20%20%20%20var%20length%20%3D%20Math.sqrt(dX%20*%20dX%20%2B%20dY%20*%20dY)%3B%0A%20%20%20%20%20%20dX%20%2F%3D%20length%3B%0A%20%20%20%20%20%20dY%20%2F%3D%20length%3B%0A%20%20%20%20%20%20var%20C%20%3D%20length%20-%20this.m_length%3B%0A%20%20%20%20%20%20C%20%3D%20b2Math.Clamp(%0A%20%20%20%20%20%20%20%20C%2C%0A%20%20%20%20%20%20%20%20-b2Settings.b2_maxLinearCorrection%2C%0A%20%20%20%20%20%20%20%20b2Settings.b2_maxLinearCorrection%0A%20%20%20%20%20%20)%3B%0A%20%20%20%20%20%20var%20impulse%20%3D%20-this.m_mass%20*%20C%3B%0A%20%20%20%20%20%20this.m_u.Set(dX%2C%20dY)%3B%0A%20%20%20%20%20%20var%20PX%20%3D%20impulse%20*%20this.m_u.x%3B%0A%20%20%20%20%20%20var%20PY%20%3D%20impulse%20*%20this.m_u.y%3B%0A%20%20%20%20%20%20bA.m_sweep.c.x%20-%3D%20bA.m_invMass%20*%20PX%3B%0A%20%20%20%20%20%20bA.m_sweep.c.y%20-%3D%20bA.m_invMass%20*%20PY%3B%0A%20%20%20%20%20%20bA.m_sweep.a%20-%3D%20bA.m_invI%20*%20(r1X%20*%20PY%20-%20r1Y%20*%20PX)%3B%0A%20%20%20%20%20%20bB.m_sweep.c.x%20%2B%3D%20bB.m_invMass%20*%20PX%3B%0A%20%20%20%20%20%20bB.m_sweep.c.y%20%2B%3D%20bB.m_invMass%20*%20PY%3B%0A%20%20%20%20%20%20bB.m_sweep.a%20%2B%3D%20bB.m_invI%20*%20(r2X%20*%20PY%20-%20r2Y%20*%20PX)%3B%0A%20%20%20%20%20%20bA.SynchronizeTransform()%3B%0A%20%20%20%20%20%20bB.SynchronizeTransform()%3B%0A%20%20%20%20%20%20return%20b2Math.Abs(C)%20%3C%20b2Settings.b2_linearSlop%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20Box2D.inherit(b2DistanceJointDef%2C%20Box2D.Dynamics.Joints.b2JointDef)%3B%0A%20%20%20%20b2DistanceJointDef.prototype.__super%20%3D%0A%20%20%20%20%20%20Box2D.Dynamics.Joints.b2JointDef.prototype%3B%0A%20%20%20%20b2DistanceJointDef.b2DistanceJointDef%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20Box2D.Dynamics.Joints.b2JointDef.b2JointDef.apply(this%2C%20arguments)%3B%0A%20%20%20%20%20%20this.localAnchorA%20%3D%20new%20b2Vec2()%3B%0A%20%20%20%20%20%20this.localAnchorB%20%3D%20new%20b2Vec2()%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2DistanceJointDef.prototype.b2DistanceJointDef%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20this.__super.b2JointDef.call(this)%3B%0A%20%20%20%20%20%20this.type%20%3D%20b2Joint.e_distanceJoint%3B%0A%20%20%20%20%20%20this.length%20%3D%201.0%3B%0A%20%20%20%20%20%20this.frequencyHz%20%3D%200.0%3B%0A%20%20%20%20%20%20this.dampingRatio%20%3D%200.0%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2DistanceJointDef.prototype.Initialize%20%3D%20function%20(%0A%20%20%20%20%20%20bA%2C%0A%20%20%20%20%20%20bB%2C%0A%20%20%20%20%20%20anchorA%2C%0A%20%20%20%20%20%20anchorB%0A%20%20%20%20)%20%7B%0A%20%20%20%20%20%20this.bodyA%20%3D%20bA%3B%0A%20%20%20%20%20%20this.bodyB%20%3D%20bB%3B%0A%20%20%20%20%20%20this.localAnchorA.SetV(this.bodyA.GetLocalPoint(anchorA))%3B%0A%20%20%20%20%20%20this.localAnchorB.SetV(this.bodyB.GetLocalPoint(anchorB))%3B%0A%20%20%20%20%20%20var%20dX%20%3D%20anchorB.x%20-%20anchorA.x%3B%0A%20%20%20%20%20%20var%20dY%20%3D%20anchorB.y%20-%20anchorA.y%3B%0A%20%20%20%20%20%20this.length%20%3D%20Math.sqrt(dX%20*%20dX%20%2B%20dY%20*%20dY)%3B%0A%20%20%20%20%20%20this.frequencyHz%20%3D%200.0%3B%0A%20%20%20%20%20%20this.dampingRatio%20%3D%200.0%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20Box2D.inherit(b2FrictionJoint%2C%20Box2D.Dynamics.Joints.b2Joint)%3B%0A%20%20%20%20b2FrictionJoint.prototype.__super%20%3D%20Box2D.Dynamics.Joints.b2Joint.prototype%3B%0A%20%20%20%20b2FrictionJoint.b2FrictionJoint%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20Box2D.Dynamics.Joints.b2Joint.b2Joint.apply(this%2C%20arguments)%3B%0A%20%20%20%20%20%20this.m_localAnchorA%20%3D%20new%20b2Vec2()%3B%0A%20%20%20%20%20%20this.m_localAnchorB%20%3D%20new%20b2Vec2()%3B%0A%20%20%20%20%20%20this.m_linearMass%20%3D%20new%20b2Mat22()%3B%0A%20%20%20%20%20%20this.m_linearImpulse%20%3D%20new%20b2Vec2()%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2FrictionJoint.prototype.GetAnchorA%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20return%20this.m_bodyA.GetWorldPoint(this.m_localAnchorA)%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2FrictionJoint.prototype.GetAnchorB%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20return%20this.m_bodyB.GetWorldPoint(this.m_localAnchorB)%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2FrictionJoint.prototype.GetReactionForce%20%3D%20function%20(inv_dt)%20%7B%0A%20%20%20%20%20%20if%20(inv_dt%20%3D%3D%3D%20undefined)%20inv_dt%20%3D%200%3B%0A%20%20%20%20%20%20return%20new%20b2Vec2(%0A%20%20%20%20%20%20%20%20inv_dt%20*%20this.m_linearImpulse.x%2C%0A%20%20%20%20%20%20%20%20inv_dt%20*%20this.m_linearImpulse.y%0A%20%20%20%20%20%20)%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2FrictionJoint.prototype.GetReactionTorque%20%3D%20function%20(inv_dt)%20%7B%0A%20%20%20%20%20%20if%20(inv_dt%20%3D%3D%3D%20undefined)%20inv_dt%20%3D%200%3B%0A%20%20%20%20%20%20return%20inv_dt%20*%20this.m_angularImpulse%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2FrictionJoint.prototype.SetMaxForce%20%3D%20function%20(force)%20%7B%0A%20%20%20%20%20%20if%20(force%20%3D%3D%3D%20undefined)%20force%20%3D%200%3B%0A%20%20%20%20%20%20this.m_maxForce%20%3D%20force%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2FrictionJoint.prototype.GetMaxForce%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20return%20this.m_maxForce%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2FrictionJoint.prototype.SetMaxTorque%20%3D%20function%20(torque)%20%7B%0A%20%20%20%20%20%20if%20(torque%20%3D%3D%3D%20undefined)%20torque%20%3D%200%3B%0A%20%20%20%20%20%20this.m_maxTorque%20%3D%20torque%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2FrictionJoint.prototype.GetMaxTorque%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20return%20this.m_maxTorque%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2FrictionJoint.prototype.b2FrictionJoint%20%3D%20function%20(def)%20%7B%0A%20%20%20%20%20%20this.__super.b2Joint.call(this%2C%20def)%3B%0A%20%20%20%20%20%20this.m_localAnchorA.SetV(def.localAnchorA)%3B%0A%20%20%20%20%20%20this.m_localAnchorB.SetV(def.localAnchorB)%3B%0A%20%20%20%20%20%20this.m_linearMass.SetZero()%3B%0A%20%20%20%20%20%20this.m_angularMass%20%3D%200.0%3B%0A%20%20%20%20%20%20this.m_linearImpulse.SetZero()%3B%0A%20%20%20%20%20%20this.m_angularImpulse%20%3D%200.0%3B%0A%20%20%20%20%20%20this.m_maxForce%20%3D%20def.maxForce%3B%0A%20%20%20%20%20%20this.m_maxTorque%20%3D%20def.maxTorque%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2FrictionJoint.prototype.InitVelocityConstraints%20%3D%20function%20(step)%20%7B%0A%20%20%20%20%20%20var%20tMat%3B%0A%20%20%20%20%20%20var%20tX%20%3D%200%3B%0A%20%20%20%20%20%20var%20bA%20%3D%20this.m_bodyA%3B%0A%20%20%20%20%20%20var%20bB%20%3D%20this.m_bodyB%3B%0A%20%20%20%20%20%20tMat%20%3D%20bA.m_xf.R%3B%0A%20%20%20%20%20%20var%20rAX%20%3D%20this.m_localAnchorA.x%20-%20bA.m_sweep.localCenter.x%3B%0A%20%20%20%20%20%20var%20rAY%20%3D%20this.m_localAnchorA.y%20-%20bA.m_sweep.localCenter.y%3B%0A%20%20%20%20%20%20tX%20%3D%20tMat.col1.x%20*%20rAX%20%2B%20tMat.col2.x%20*%20rAY%3B%0A%20%20%20%20%20%20rAY%20%3D%20tMat.col1.y%20*%20rAX%20%2B%20tMat.col2.y%20*%20rAY%3B%0A%20%20%20%20%20%20rAX%20%3D%20tX%3B%0A%20%20%20%20%20%20tMat%20%3D%20bB.m_xf.R%3B%0A%20%20%20%20%20%20var%20rBX%20%3D%20this.m_localAnchorB.x%20-%20bB.m_sweep.localCenter.x%3B%0A%20%20%20%20%20%20var%20rBY%20%3D%20this.m_localAnchorB.y%20-%20bB.m_sweep.localCenter.y%3B%0A%20%20%20%20%20%20tX%20%3D%20tMat.col1.x%20*%20rBX%20%2B%20tMat.col2.x%20*%20rBY%3B%0A%20%20%20%20%20%20rBY%20%3D%20tMat.col1.y%20*%20rBX%20%2B%20tMat.col2.y%20*%20rBY%3B%0A%20%20%20%20%20%20rBX%20%3D%20tX%3B%0A%20%20%20%20%20%20var%20mA%20%3D%20bA.m_invMass%3B%0A%20%20%20%20%20%20var%20mB%20%3D%20bB.m_invMass%3B%0A%20%20%20%20%20%20var%20iA%20%3D%20bA.m_invI%3B%0A%20%20%20%20%20%20var%20iB%20%3D%20bB.m_invI%3B%0A%20%20%20%20%20%20var%20K%20%3D%20new%20b2Mat22()%3B%0A%20%20%20%20%20%20K.col1.x%20%3D%20mA%20%2B%20mB%3B%0A%20%20%20%20%20%20K.col2.x%20%3D%200.0%3B%0A%20%20%20%20%20%20K.col1.y%20%3D%200.0%3B%0A%20%20%20%20%20%20K.col2.y%20%3D%20mA%20%2B%20mB%3B%0A%20%20%20%20%20%20K.col1.x%20%2B%3D%20iA%20*%20rAY%20*%20rAY%3B%0A%20%20%20%20%20%20K.col2.x%20%2B%3D%20-iA%20*%20rAX%20*%20rAY%3B%0A%20%20%20%20%20%20K.col1.y%20%2B%3D%20-iA%20*%20rAX%20*%20rAY%3B%0A%20%20%20%20%20%20K.col2.y%20%2B%3D%20iA%20*%20rAX%20*%20rAX%3B%0A%20%20%20%20%20%20K.col1.x%20%2B%3D%20iB%20*%20rBY%20*%20rBY%3B%0A%20%20%20%20%20%20K.col2.x%20%2B%3D%20-iB%20*%20rBX%20*%20rBY%3B%0A%20%20%20%20%20%20K.col1.y%20%2B%3D%20-iB%20*%20rBX%20*%20rBY%3B%0A%20%20%20%20%20%20K.col2.y%20%2B%3D%20iB%20*%20rBX%20*%20rBX%3B%0A%20%20%20%20%20%20K.GetInverse(this.m_linearMass)%3B%0A%20%20%20%20%20%20this.m_angularMass%20%3D%20iA%20%2B%20iB%3B%0A%20%20%20%20%20%20if%20(this.m_angularMass%20%3E%200.0)%20%7B%0A%20%20%20%20%20%20%20%20this.m_angularMass%20%3D%201.0%20%2F%20this.m_angularMass%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20if%20(step.warmStarting)%20%7B%0A%20%20%20%20%20%20%20%20this.m_linearImpulse.x%20*%3D%20step.dtRatio%3B%0A%20%20%20%20%20%20%20%20this.m_linearImpulse.y%20*%3D%20step.dtRatio%3B%0A%20%20%20%20%20%20%20%20this.m_angularImpulse%20*%3D%20step.dtRatio%3B%0A%20%20%20%20%20%20%20%20var%20P%20%3D%20this.m_linearImpulse%3B%0A%20%20%20%20%20%20%20%20bA.m_linearVelocity.x%20-%3D%20mA%20*%20P.x%3B%0A%20%20%20%20%20%20%20%20bA.m_linearVelocity.y%20-%3D%20mA%20*%20P.y%3B%0A%20%20%20%20%20%20%20%20bA.m_angularVelocity%20-%3D%0A%20%20%20%20%20%20%20%20%20%20iA%20*%20(rAX%20*%20P.y%20-%20rAY%20*%20P.x%20%2B%20this.m_angularImpulse)%3B%0A%20%20%20%20%20%20%20%20bB.m_linearVelocity.x%20%2B%3D%20mB%20*%20P.x%3B%0A%20%20%20%20%20%20%20%20bB.m_linearVelocity.y%20%2B%3D%20mB%20*%20P.y%3B%0A%20%20%20%20%20%20%20%20bB.m_angularVelocity%20%2B%3D%0A%20%20%20%20%20%20%20%20%20%20iB%20*%20(rBX%20*%20P.y%20-%20rBY%20*%20P.x%20%2B%20this.m_angularImpulse)%3B%0A%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20this.m_linearImpulse.SetZero()%3B%0A%20%20%20%20%20%20%20%20this.m_angularImpulse%20%3D%200.0%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2FrictionJoint.prototype.SolveVelocityConstraints%20%3D%20function%20(step)%20%7B%0A%20%20%20%20%20%20var%20tMat%3B%0A%20%20%20%20%20%20var%20tX%20%3D%200%3B%0A%20%20%20%20%20%20var%20bA%20%3D%20this.m_bodyA%3B%0A%20%20%20%20%20%20var%20bB%20%3D%20this.m_bodyB%3B%0A%20%20%20%20%20%20var%20vA%20%3D%20bA.m_linearVelocity%3B%0A%20%20%20%20%20%20var%20wA%20%3D%20bA.m_angularVelocity%3B%0A%20%20%20%20%20%20var%20vB%20%3D%20bB.m_linearVelocity%3B%0A%20%20%20%20%20%20var%20wB%20%3D%20bB.m_angularVelocity%3B%0A%20%20%20%20%20%20var%20mA%20%3D%20bA.m_invMass%3B%0A%20%20%20%20%20%20var%20mB%20%3D%20bB.m_invMass%3B%0A%20%20%20%20%20%20var%20iA%20%3D%20bA.m_invI%3B%0A%20%20%20%20%20%20var%20iB%20%3D%20bB.m_invI%3B%0A%20%20%20%20%20%20tMat%20%3D%20bA.m_xf.R%3B%0A%20%20%20%20%20%20var%20rAX%20%3D%20this.m_localAnchorA.x%20-%20bA.m_sweep.localCenter.x%3B%0A%20%20%20%20%20%20var%20rAY%20%3D%20this.m_localAnchorA.y%20-%20bA.m_sweep.localCenter.y%3B%0A%20%20%20%20%20%20tX%20%3D%20tMat.col1.x%20*%20rAX%20%2B%20tMat.col2.x%20*%20rAY%3B%0A%20%20%20%20%20%20rAY%20%3D%20tMat.col1.y%20*%20rAX%20%2B%20tMat.col2.y%20*%20rAY%3B%0A%20%20%20%20%20%20rAX%20%3D%20tX%3B%0A%20%20%20%20%20%20tMat%20%3D%20bB.m_xf.R%3B%0A%20%20%20%20%20%20var%20rBX%20%3D%20this.m_localAnchorB.x%20-%20bB.m_sweep.localCenter.x%3B%0A%20%20%20%20%20%20var%20rBY%20%3D%20this.m_localAnchorB.y%20-%20bB.m_sweep.localCenter.y%3B%0A%20%20%20%20%20%20tX%20%3D%20tMat.col1.x%20*%20rBX%20%2B%20tMat.col2.x%20*%20rBY%3B%0A%20%20%20%20%20%20rBY%20%3D%20tMat.col1.y%20*%20rBX%20%2B%20tMat.col2.y%20*%20rBY%3B%0A%20%20%20%20%20%20rBX%20%3D%20tX%3B%0A%20%20%20%20%20%20var%20maxImpulse%20%3D%200%3B%0A%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20var%20Cdot%20%3D%20wB%20-%20wA%3B%0A%20%20%20%20%20%20%20%20var%20impulse%20%3D%20-this.m_angularMass%20*%20Cdot%3B%0A%20%20%20%20%20%20%20%20var%20oldImpulse%20%3D%20this.m_angularImpulse%3B%0A%20%20%20%20%20%20%20%20maxImpulse%20%3D%20step.dt%20*%20this.m_maxTorque%3B%0A%20%20%20%20%20%20%20%20this.m_angularImpulse%20%3D%20b2Math.Clamp(%0A%20%20%20%20%20%20%20%20%20%20this.m_angularImpulse%20%2B%20impulse%2C%0A%20%20%20%20%20%20%20%20%20%20-maxImpulse%2C%0A%20%20%20%20%20%20%20%20%20%20maxImpulse%0A%20%20%20%20%20%20%20%20)%3B%0A%20%20%20%20%20%20%20%20impulse%20%3D%20this.m_angularImpulse%20-%20oldImpulse%3B%0A%20%20%20%20%20%20%20%20wA%20-%3D%20iA%20*%20impulse%3B%0A%20%20%20%20%20%20%20%20wB%20%2B%3D%20iB%20*%20impulse%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20var%20CdotX%20%3D%20vB.x%20-%20wB%20*%20rBY%20-%20vA.x%20%2B%20wA%20*%20rAY%3B%0A%20%20%20%20%20%20%20%20var%20CdotY%20%3D%20vB.y%20%2B%20wB%20*%20rBX%20-%20vA.y%20-%20wA%20*%20rAX%3B%0A%20%20%20%20%20%20%20%20var%20impulseV%20%3D%20b2Math.MulMV(%0A%20%20%20%20%20%20%20%20%20%20this.m_linearMass%2C%0A%20%20%20%20%20%20%20%20%20%20new%20b2Vec2(-CdotX%2C%20-CdotY)%0A%20%20%20%20%20%20%20%20)%3B%0A%20%20%20%20%20%20%20%20var%20oldImpulseV%20%3D%20this.m_linearImpulse.Copy()%3B%0A%20%20%20%20%20%20%20%20this.m_linearImpulse.Add(impulseV)%3B%0A%20%20%20%20%20%20%20%20maxImpulse%20%3D%20step.dt%20*%20this.m_maxForce%3B%0A%20%20%20%20%20%20%20%20if%20(this.m_linearImpulse.LengthSquared()%20%3E%20maxImpulse%20*%20maxImpulse)%20%7B%0A%20%20%20%20%20%20%20%20%20%20this.m_linearImpulse.Normalize()%3B%0A%20%20%20%20%20%20%20%20%20%20this.m_linearImpulse.Multiply(maxImpulse)%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20impulseV%20%3D%20b2Math.SubtractVV(this.m_linearImpulse%2C%20oldImpulseV)%3B%0A%20%20%20%20%20%20%20%20vA.x%20-%3D%20mA%20*%20impulseV.x%3B%0A%20%20%20%20%20%20%20%20vA.y%20-%3D%20mA%20*%20impulseV.y%3B%0A%20%20%20%20%20%20%20%20wA%20-%3D%20iA%20*%20(rAX%20*%20impulseV.y%20-%20rAY%20*%20impulseV.x)%3B%0A%20%20%20%20%20%20%20%20vB.x%20%2B%3D%20mB%20*%20impulseV.x%3B%0A%20%20%20%20%20%20%20%20vB.y%20%2B%3D%20mB%20*%20impulseV.y%3B%0A%20%20%20%20%20%20%20%20wB%20%2B%3D%20iB%20*%20(rBX%20*%20impulseV.y%20-%20rBY%20*%20impulseV.x)%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20bA.m_angularVelocity%20%3D%20wA%3B%0A%20%20%20%20%20%20bB.m_angularVelocity%20%3D%20wB%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2FrictionJoint.prototype.SolvePositionConstraints%20%3D%20function%20(baumgarte)%20%7B%0A%20%20%20%20%20%20if%20(baumgarte%20%3D%3D%3D%20undefined)%20baumgarte%20%3D%200%3B%0A%20%20%20%20%20%20return%20true%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20Box2D.inherit(b2FrictionJointDef%2C%20Box2D.Dynamics.Joints.b2JointDef)%3B%0A%20%20%20%20b2FrictionJointDef.prototype.__super%20%3D%0A%20%20%20%20%20%20Box2D.Dynamics.Joints.b2JointDef.prototype%3B%0A%20%20%20%20b2FrictionJointDef.b2FrictionJointDef%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20Box2D.Dynamics.Joints.b2JointDef.b2JointDef.apply(this%2C%20arguments)%3B%0A%20%20%20%20%20%20this.localAnchorA%20%3D%20new%20b2Vec2()%3B%0A%20%20%20%20%20%20this.localAnchorB%20%3D%20new%20b2Vec2()%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2FrictionJointDef.prototype.b2FrictionJointDef%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20this.__super.b2JointDef.call(this)%3B%0A%20%20%20%20%20%20this.type%20%3D%20b2Joint.e_frictionJoint%3B%0A%20%20%20%20%20%20this.maxForce%20%3D%200.0%3B%0A%20%20%20%20%20%20this.maxTorque%20%3D%200.0%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2FrictionJointDef.prototype.Initialize%20%3D%20function%20(bA%2C%20bB%2C%20anchor)%20%7B%0A%20%20%20%20%20%20this.bodyA%20%3D%20bA%3B%0A%20%20%20%20%20%20this.bodyB%20%3D%20bB%3B%0A%20%20%20%20%20%20this.localAnchorA.SetV(this.bodyA.GetLocalPoint(anchor))%3B%0A%20%20%20%20%20%20this.localAnchorB.SetV(this.bodyB.GetLocalPoint(anchor))%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20Box2D.inherit(b2GearJoint%2C%20Box2D.Dynamics.Joints.b2Joint)%3B%0A%20%20%20%20b2GearJoint.prototype.__super%20%3D%20Box2D.Dynamics.Joints.b2Joint.prototype%3B%0A%20%20%20%20b2GearJoint.b2GearJoint%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20Box2D.Dynamics.Joints.b2Joint.b2Joint.apply(this%2C%20arguments)%3B%0A%20%20%20%20%20%20this.m_groundAnchor1%20%3D%20new%20b2Vec2()%3B%0A%20%20%20%20%20%20this.m_groundAnchor2%20%3D%20new%20b2Vec2()%3B%0A%20%20%20%20%20%20this.m_localAnchor1%20%3D%20new%20b2Vec2()%3B%0A%20%20%20%20%20%20this.m_localAnchor2%20%3D%20new%20b2Vec2()%3B%0A%20%20%20%20%20%20this.m_J%20%3D%20new%20b2Jacobian()%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2GearJoint.prototype.GetAnchorA%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20return%20this.m_bodyA.GetWorldPoint(this.m_localAnchor1)%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2GearJoint.prototype.GetAnchorB%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20return%20this.m_bodyB.GetWorldPoint(this.m_localAnchor2)%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2GearJoint.prototype.GetReactionForce%20%3D%20function%20(inv_dt)%20%7B%0A%20%20%20%20%20%20if%20(inv_dt%20%3D%3D%3D%20undefined)%20inv_dt%20%3D%200%3B%0A%20%20%20%20%20%20return%20new%20b2Vec2(%0A%20%20%20%20%20%20%20%20inv_dt%20*%20this.m_impulse%20*%20this.m_J.linearB.x%2C%0A%20%20%20%20%20%20%20%20inv_dt%20*%20this.m_impulse%20*%20this.m_J.linearB.y%0A%20%20%20%20%20%20)%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2GearJoint.prototype.GetReactionTorque%20%3D%20function%20(inv_dt)%20%7B%0A%20%20%20%20%20%20if%20(inv_dt%20%3D%3D%3D%20undefined)%20inv_dt%20%3D%200%3B%0A%20%20%20%20%20%20var%20tMat%20%3D%20this.m_bodyB.m_xf.R%3B%0A%20%20%20%20%20%20var%20rX%20%3D%20this.m_localAnchor1.x%20-%20this.m_bodyB.m_sweep.localCenter.x%3B%0A%20%20%20%20%20%20var%20rY%20%3D%20this.m_localAnchor1.y%20-%20this.m_bodyB.m_sweep.localCenter.y%3B%0A%20%20%20%20%20%20var%20tX%20%3D%20tMat.col1.x%20*%20rX%20%2B%20tMat.col2.x%20*%20rY%3B%0A%20%20%20%20%20%20rY%20%3D%20tMat.col1.y%20*%20rX%20%2B%20tMat.col2.y%20*%20rY%3B%0A%20%20%20%20%20%20rX%20%3D%20tX%3B%0A%20%20%20%20%20%20var%20PX%20%3D%20this.m_impulse%20*%20this.m_J.linearB.x%3B%0A%20%20%20%20%20%20var%20PY%20%3D%20this.m_impulse%20*%20this.m_J.linearB.y%3B%0A%20%20%20%20%20%20return%20inv_dt%20*%20(this.m_impulse%20*%20this.m_J.angularB%20-%20rX%20*%20PY%20%2B%20rY%20*%20PX)%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2GearJoint.prototype.GetRatio%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20return%20this.m_ratio%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2GearJoint.prototype.SetRatio%20%3D%20function%20(ratio)%20%7B%0A%20%20%20%20%20%20if%20(ratio%20%3D%3D%3D%20undefined)%20ratio%20%3D%200%3B%0A%20%20%20%20%20%20this.m_ratio%20%3D%20ratio%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2GearJoint.prototype.b2GearJoint%20%3D%20function%20(def)%20%7B%0A%20%20%20%20%20%20this.__super.b2Joint.call(this%2C%20def)%3B%0A%20%20%20%20%20%20var%20type1%20%3D%20parseInt(def.joint1.m_type)%3B%0A%20%20%20%20%20%20var%20type2%20%3D%20parseInt(def.joint2.m_type)%3B%0A%20%20%20%20%20%20this.m_revolute1%20%3D%20null%3B%0A%20%20%20%20%20%20this.m_prismatic1%20%3D%20null%3B%0A%20%20%20%20%20%20this.m_revolute2%20%3D%20null%3B%0A%20%20%20%20%20%20this.m_prismatic2%20%3D%20null%3B%0A%20%20%20%20%20%20var%20coordinate1%20%3D%200%3B%0A%20%20%20%20%20%20var%20coordinate2%20%3D%200%3B%0A%20%20%20%20%20%20this.m_ground1%20%3D%20def.joint1.GetBodyA()%3B%0A%20%20%20%20%20%20this.m_bodyA%20%3D%20def.joint1.GetBodyB()%3B%0A%20%20%20%20%20%20if%20(type1%20%3D%3D%20b2Joint.e_revoluteJoint)%20%7B%0A%20%20%20%20%20%20%20%20this.m_revolute1%20%3D%0A%20%20%20%20%20%20%20%20%20%20def.joint1%20instanceof%20b2RevoluteJoint%20%3F%20def.joint1%20%3A%20null%3B%0A%20%20%20%20%20%20%20%20this.m_groundAnchor1.SetV(this.m_revolute1.m_localAnchor1)%3B%0A%20%20%20%20%20%20%20%20this.m_localAnchor1.SetV(this.m_revolute1.m_localAnchor2)%3B%0A%20%20%20%20%20%20%20%20coordinate1%20%3D%20this.m_revolute1.GetJointAngle()%3B%0A%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20this.m_prismatic1%20%3D%0A%20%20%20%20%20%20%20%20%20%20def.joint1%20instanceof%20b2PrismaticJoint%20%3F%20def.joint1%20%3A%20null%3B%0A%20%20%20%20%20%20%20%20this.m_groundAnchor1.SetV(this.m_prismatic1.m_localAnchor1)%3B%0A%20%20%20%20%20%20%20%20this.m_localAnchor1.SetV(this.m_prismatic1.m_localAnchor2)%3B%0A%20%20%20%20%20%20%20%20coordinate1%20%3D%20this.m_prismatic1.GetJointTranslation()%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20this.m_ground2%20%3D%20def.joint2.GetBodyA()%3B%0A%20%20%20%20%20%20this.m_bodyB%20%3D%20def.joint2.GetBodyB()%3B%0A%20%20%20%20%20%20if%20(type2%20%3D%3D%20b2Joint.e_revoluteJoint)%20%7B%0A%20%20%20%20%20%20%20%20this.m_revolute2%20%3D%0A%20%20%20%20%20%20%20%20%20%20def.joint2%20instanceof%20b2RevoluteJoint%20%3F%20def.joint2%20%3A%20null%3B%0A%20%20%20%20%20%20%20%20this.m_groundAnchor2.SetV(this.m_revolute2.m_localAnchor1)%3B%0A%20%20%20%20%20%20%20%20this.m_localAnchor2.SetV(this.m_revolute2.m_localAnchor2)%3B%0A%20%20%20%20%20%20%20%20coordinate2%20%3D%20this.m_revolute2.GetJointAngle()%3B%0A%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20this.m_prismatic2%20%3D%0A%20%20%20%20%20%20%20%20%20%20def.joint2%20instanceof%20b2PrismaticJoint%20%3F%20def.joint2%20%3A%20null%3B%0A%20%20%20%20%20%20%20%20this.m_groundAnchor2.SetV(this.m_prismatic2.m_localAnchor1)%3B%0A%20%20%20%20%20%20%20%20this.m_localAnchor2.SetV(this.m_prismatic2.m_localAnchor2)%3B%0A%20%20%20%20%20%20%20%20coordinate2%20%3D%20this.m_prismatic2.GetJointTranslation()%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20this.m_ratio%20%3D%20def.ratio%3B%0A%20%20%20%20%20%20this.m_constant%20%3D%20coordinate1%20%2B%20this.m_ratio%20*%20coordinate2%3B%0A%20%20%20%20%20%20this.m_impulse%20%3D%200.0%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2GearJoint.prototype.InitVelocityConstraints%20%3D%20function%20(step)%20%7B%0A%20%20%20%20%20%20var%20g1%20%3D%20this.m_ground1%3B%0A%20%20%20%20%20%20var%20g2%20%3D%20this.m_ground2%3B%0A%20%20%20%20%20%20var%20bA%20%3D%20this.m_bodyA%3B%0A%20%20%20%20%20%20var%20bB%20%3D%20this.m_bodyB%3B%0A%20%20%20%20%20%20var%20ugX%20%3D%200%3B%0A%20%20%20%20%20%20var%20ugY%20%3D%200%3B%0A%20%20%20%20%20%20var%20rX%20%3D%200%3B%0A%20%20%20%20%20%20var%20rY%20%3D%200%3B%0A%20%20%20%20%20%20var%20tMat%3B%0A%20%20%20%20%20%20var%20tVec%3B%0A%20%20%20%20%20%20var%20crug%20%3D%200%3B%0A%20%20%20%20%20%20var%20tX%20%3D%200%3B%0A%20%20%20%20%20%20var%20K%20%3D%200.0%3B%0A%20%20%20%20%20%20this.m_J.SetZero()%3B%0A%20%20%20%20%20%20if%20(this.m_revolute1)%20%7B%0A%20%20%20%20%20%20%20%20this.m_J.angularA%20%3D%20-1.0%3B%0A%20%20%20%20%20%20%20%20K%20%2B%3D%20bA.m_invI%3B%0A%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20tMat%20%3D%20g1.m_xf.R%3B%0A%20%20%20%20%20%20%20%20tVec%20%3D%20this.m_prismatic1.m_localXAxis1%3B%0A%20%20%20%20%20%20%20%20ugX%20%3D%20tMat.col1.x%20*%20tVec.x%20%2B%20tMat.col2.x%20*%20tVec.y%3B%0A%20%20%20%20%20%20%20%20ugY%20%3D%20tMat.col1.y%20*%20tVec.x%20%2B%20tMat.col2.y%20*%20tVec.y%3B%0A%20%20%20%20%20%20%20%20tMat%20%3D%20bA.m_xf.R%3B%0A%20%20%20%20%20%20%20%20rX%20%3D%20this.m_localAnchor1.x%20-%20bA.m_sweep.localCenter.x%3B%0A%20%20%20%20%20%20%20%20rY%20%3D%20this.m_localAnchor1.y%20-%20bA.m_sweep.localCenter.y%3B%0A%20%20%20%20%20%20%20%20tX%20%3D%20tMat.col1.x%20*%20rX%20%2B%20tMat.col2.x%20*%20rY%3B%0A%20%20%20%20%20%20%20%20rY%20%3D%20tMat.col1.y%20*%20rX%20%2B%20tMat.col2.y%20*%20rY%3B%0A%20%20%20%20%20%20%20%20rX%20%3D%20tX%3B%0A%20%20%20%20%20%20%20%20crug%20%3D%20rX%20*%20ugY%20-%20rY%20*%20ugX%3B%0A%20%20%20%20%20%20%20%20this.m_J.linearA.Set(-ugX%2C%20-ugY)%3B%0A%20%20%20%20%20%20%20%20this.m_J.angularA%20%3D%20-crug%3B%0A%20%20%20%20%20%20%20%20K%20%2B%3D%20bA.m_invMass%20%2B%20bA.m_invI%20*%20crug%20*%20crug%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20if%20(this.m_revolute2)%20%7B%0A%20%20%20%20%20%20%20%20this.m_J.angularB%20%3D%20-this.m_ratio%3B%0A%20%20%20%20%20%20%20%20K%20%2B%3D%20this.m_ratio%20*%20this.m_ratio%20*%20bB.m_invI%3B%0A%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20tMat%20%3D%20g2.m_xf.R%3B%0A%20%20%20%20%20%20%20%20tVec%20%3D%20this.m_prismatic2.m_localXAxis1%3B%0A%20%20%20%20%20%20%20%20ugX%20%3D%20tMat.col1.x%20*%20tVec.x%20%2B%20tMat.col2.x%20*%20tVec.y%3B%0A%20%20%20%20%20%20%20%20ugY%20%3D%20tMat.col1.y%20*%20tVec.x%20%2B%20tMat.col2.y%20*%20tVec.y%3B%0A%20%20%20%20%20%20%20%20tMat%20%3D%20bB.m_xf.R%3B%0A%20%20%20%20%20%20%20%20rX%20%3D%20this.m_localAnchor2.x%20-%20bB.m_sweep.localCenter.x%3B%0A%20%20%20%20%20%20%20%20rY%20%3D%20this.m_localAnchor2.y%20-%20bB.m_sweep.localCenter.y%3B%0A%20%20%20%20%20%20%20%20tX%20%3D%20tMat.col1.x%20*%20rX%20%2B%20tMat.col2.x%20*%20rY%3B%0A%20%20%20%20%20%20%20%20rY%20%3D%20tMat.col1.y%20*%20rX%20%2B%20tMat.col2.y%20*%20rY%3B%0A%20%20%20%20%20%20%20%20rX%20%3D%20tX%3B%0A%20%20%20%20%20%20%20%20crug%20%3D%20rX%20*%20ugY%20-%20rY%20*%20ugX%3B%0A%20%20%20%20%20%20%20%20this.m_J.linearB.Set(-this.m_ratio%20*%20ugX%2C%20-this.m_ratio%20*%20ugY)%3B%0A%20%20%20%20%20%20%20%20this.m_J.angularB%20%3D%20-this.m_ratio%20*%20crug%3B%0A%20%20%20%20%20%20%20%20K%20%2B%3D%0A%20%20%20%20%20%20%20%20%20%20this.m_ratio%20*%0A%20%20%20%20%20%20%20%20%20%20this.m_ratio%20*%0A%20%20%20%20%20%20%20%20%20%20(bB.m_invMass%20%2B%20bB.m_invI%20*%20crug%20*%20crug)%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20this.m_mass%20%3D%20K%20%3E%200.0%20%3F%201.0%20%2F%20K%20%3A%200.0%3B%0A%20%20%20%20%20%20if%20(step.warmStarting)%20%7B%0A%20%20%20%20%20%20%20%20bA.m_linearVelocity.x%20%2B%3D%0A%20%20%20%20%20%20%20%20%20%20bA.m_invMass%20*%20this.m_impulse%20*%20this.m_J.linearA.x%3B%0A%20%20%20%20%20%20%20%20bA.m_linearVelocity.y%20%2B%3D%0A%20%20%20%20%20%20%20%20%20%20bA.m_invMass%20*%20this.m_impulse%20*%20this.m_J.linearA.y%3B%0A%20%20%20%20%20%20%20%20bA.m_angularVelocity%20%2B%3D%20bA.m_invI%20*%20this.m_impulse%20*%20this.m_J.angularA%3B%0A%20%20%20%20%20%20%20%20bB.m_linearVelocity.x%20%2B%3D%0A%20%20%20%20%20%20%20%20%20%20bB.m_invMass%20*%20this.m_impulse%20*%20this.m_J.linearB.x%3B%0A%20%20%20%20%20%20%20%20bB.m_linearVelocity.y%20%2B%3D%0A%20%20%20%20%20%20%20%20%20%20bB.m_invMass%20*%20this.m_impulse%20*%20this.m_J.linearB.y%3B%0A%20%20%20%20%20%20%20%20bB.m_angularVelocity%20%2B%3D%20bB.m_invI%20*%20this.m_impulse%20*%20this.m_J.angularB%3B%0A%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20this.m_impulse%20%3D%200.0%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2GearJoint.prototype.SolveVelocityConstraints%20%3D%20function%20(step)%20%7B%0A%20%20%20%20%20%20var%20bA%20%3D%20this.m_bodyA%3B%0A%20%20%20%20%20%20var%20bB%20%3D%20this.m_bodyB%3B%0A%20%20%20%20%20%20var%20Cdot%20%3D%20this.m_J.Compute(%0A%20%20%20%20%20%20%20%20bA.m_linearVelocity%2C%0A%20%20%20%20%20%20%20%20bA.m_angularVelocity%2C%0A%20%20%20%20%20%20%20%20bB.m_linearVelocity%2C%0A%20%20%20%20%20%20%20%20bB.m_angularVelocity%0A%20%20%20%20%20%20)%3B%0A%20%20%20%20%20%20var%20impulse%20%3D%20-this.m_mass%20*%20Cdot%3B%0A%20%20%20%20%20%20this.m_impulse%20%2B%3D%20impulse%3B%0A%20%20%20%20%20%20bA.m_linearVelocity.x%20%2B%3D%20bA.m_invMass%20*%20impulse%20*%20this.m_J.linearA.x%3B%0A%20%20%20%20%20%20bA.m_linearVelocity.y%20%2B%3D%20bA.m_invMass%20*%20impulse%20*%20this.m_J.linearA.y%3B%0A%20%20%20%20%20%20bA.m_angularVelocity%20%2B%3D%20bA.m_invI%20*%20impulse%20*%20this.m_J.angularA%3B%0A%20%20%20%20%20%20bB.m_linearVelocity.x%20%2B%3D%20bB.m_invMass%20*%20impulse%20*%20this.m_J.linearB.x%3B%0A%20%20%20%20%20%20bB.m_linearVelocity.y%20%2B%3D%20bB.m_invMass%20*%20impulse%20*%20this.m_J.linearB.y%3B%0A%20%20%20%20%20%20bB.m_angularVelocity%20%2B%3D%20bB.m_invI%20*%20impulse%20*%20this.m_J.angularB%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2GearJoint.prototype.SolvePositionConstraints%20%3D%20function%20(baumgarte)%20%7B%0A%20%20%20%20%20%20if%20(baumgarte%20%3D%3D%3D%20undefined)%20baumgarte%20%3D%200%3B%0A%20%20%20%20%20%20var%20linearError%20%3D%200.0%3B%0A%20%20%20%20%20%20var%20bA%20%3D%20this.m_bodyA%3B%0A%20%20%20%20%20%20var%20bB%20%3D%20this.m_bodyB%3B%0A%20%20%20%20%20%20var%20coordinate1%20%3D%200%3B%0A%20%20%20%20%20%20var%20coordinate2%20%3D%200%3B%0A%20%20%20%20%20%20if%20(this.m_revolute1)%20%7B%0A%20%20%20%20%20%20%20%20coordinate1%20%3D%20this.m_revolute1.GetJointAngle()%3B%0A%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20coordinate1%20%3D%20this.m_prismatic1.GetJointTranslation()%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20if%20(this.m_revolute2)%20%7B%0A%20%20%20%20%20%20%20%20coordinate2%20%3D%20this.m_revolute2.GetJointAngle()%3B%0A%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20coordinate2%20%3D%20this.m_prismatic2.GetJointTranslation()%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20var%20C%20%3D%20this.m_constant%20-%20(coordinate1%20%2B%20this.m_ratio%20*%20coordinate2)%3B%0A%20%20%20%20%20%20var%20impulse%20%3D%20-this.m_mass%20*%20C%3B%0A%20%20%20%20%20%20bA.m_sweep.c.x%20%2B%3D%20bA.m_invMass%20*%20impulse%20*%20this.m_J.linearA.x%3B%0A%20%20%20%20%20%20bA.m_sweep.c.y%20%2B%3D%20bA.m_invMass%20*%20impulse%20*%20this.m_J.linearA.y%3B%0A%20%20%20%20%20%20bA.m_sweep.a%20%2B%3D%20bA.m_invI%20*%20impulse%20*%20this.m_J.angularA%3B%0A%20%20%20%20%20%20bB.m_sweep.c.x%20%2B%3D%20bB.m_invMass%20*%20impulse%20*%20this.m_J.linearB.x%3B%0A%20%20%20%20%20%20bB.m_sweep.c.y%20%2B%3D%20bB.m_invMass%20*%20impulse%20*%20this.m_J.linearB.y%3B%0A%20%20%20%20%20%20bB.m_sweep.a%20%2B%3D%20bB.m_invI%20*%20impulse%20*%20this.m_J.angularB%3B%0A%20%20%20%20%20%20bA.SynchronizeTransform()%3B%0A%20%20%20%20%20%20bB.SynchronizeTransform()%3B%0A%20%20%20%20%20%20return%20linearError%20%3C%20b2Settings.b2_linearSlop%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20Box2D.inherit(b2GearJointDef%2C%20Box2D.Dynamics.Joints.b2JointDef)%3B%0A%20%20%20%20b2GearJointDef.prototype.__super%20%3D%0A%20%20%20%20%20%20Box2D.Dynamics.Joints.b2JointDef.prototype%3B%0A%20%20%20%20b2GearJointDef.b2GearJointDef%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20Box2D.Dynamics.Joints.b2JointDef.b2JointDef.apply(this%2C%20arguments)%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2GearJointDef.prototype.b2GearJointDef%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20this.__super.b2JointDef.call(this)%3B%0A%20%20%20%20%20%20this.type%20%3D%20b2Joint.e_gearJoint%3B%0A%20%20%20%20%20%20this.joint1%20%3D%20null%3B%0A%20%20%20%20%20%20this.joint2%20%3D%20null%3B%0A%20%20%20%20%20%20this.ratio%20%3D%201.0%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2Jacobian.b2Jacobian%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20this.linearA%20%3D%20new%20b2Vec2()%3B%0A%20%20%20%20%20%20this.linearB%20%3D%20new%20b2Vec2()%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2Jacobian.prototype.SetZero%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20this.linearA.SetZero()%3B%0A%20%20%20%20%20%20this.angularA%20%3D%200.0%3B%0A%20%20%20%20%20%20this.linearB.SetZero()%3B%0A%20%20%20%20%20%20this.angularB%20%3D%200.0%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2Jacobian.prototype.Set%20%3D%20function%20(x1%2C%20a1%2C%20x2%2C%20a2)%20%7B%0A%20%20%20%20%20%20if%20(a1%20%3D%3D%3D%20undefined)%20a1%20%3D%200%3B%0A%20%20%20%20%20%20if%20(a2%20%3D%3D%3D%20undefined)%20a2%20%3D%200%3B%0A%20%20%20%20%20%20this.linearA.SetV(x1)%3B%0A%20%20%20%20%20%20this.angularA%20%3D%20a1%3B%0A%20%20%20%20%20%20this.linearB.SetV(x2)%3B%0A%20%20%20%20%20%20this.angularB%20%3D%20a2%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2Jacobian.prototype.Compute%20%3D%20function%20(x1%2C%20a1%2C%20x2%2C%20a2)%20%7B%0A%20%20%20%20%20%20if%20(a1%20%3D%3D%3D%20undefined)%20a1%20%3D%200%3B%0A%20%20%20%20%20%20if%20(a2%20%3D%3D%3D%20undefined)%20a2%20%3D%200%3B%0A%20%20%20%20%20%20return%20(%0A%20%20%20%20%20%20%20%20this.linearA.x%20*%20x1.x%20%2B%0A%20%20%20%20%20%20%20%20this.linearA.y%20*%20x1.y%20%2B%0A%20%20%20%20%20%20%20%20this.angularA%20*%20a1%20%2B%0A%20%20%20%20%20%20%20%20(this.linearB.x%20*%20x2.x%20%2B%20this.linearB.y%20*%20x2.y)%20%2B%0A%20%20%20%20%20%20%20%20this.angularB%20*%20a2%0A%20%20%20%20%20%20)%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2Joint.b2Joint%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20this.m_edgeA%20%3D%20new%20b2JointEdge()%3B%0A%20%20%20%20%20%20this.m_edgeB%20%3D%20new%20b2JointEdge()%3B%0A%20%20%20%20%20%20this.m_localCenterA%20%3D%20new%20b2Vec2()%3B%0A%20%20%20%20%20%20this.m_localCenterB%20%3D%20new%20b2Vec2()%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2Joint.prototype.GetType%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20return%20this.m_type%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2Joint.prototype.GetAnchorA%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20return%20null%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2Joint.prototype.GetAnchorB%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20return%20null%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2Joint.prototype.GetReactionForce%20%3D%20function%20(inv_dt)%20%7B%0A%20%20%20%20%20%20if%20(inv_dt%20%3D%3D%3D%20undefined)%20inv_dt%20%3D%200%3B%0A%20%20%20%20%20%20return%20null%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2Joint.prototype.GetReactionTorque%20%3D%20function%20(inv_dt)%20%7B%0A%20%20%20%20%20%20if%20(inv_dt%20%3D%3D%3D%20undefined)%20inv_dt%20%3D%200%3B%0A%20%20%20%20%20%20return%200.0%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2Joint.prototype.GetBodyA%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20return%20this.m_bodyA%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2Joint.prototype.GetBodyB%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20return%20this.m_bodyB%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2Joint.prototype.GetNext%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20return%20this.m_next%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2Joint.prototype.GetUserData%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20return%20this.m_userData%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2Joint.prototype.SetUserData%20%3D%20function%20(data)%20%7B%0A%20%20%20%20%20%20this.m_userData%20%3D%20data%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2Joint.prototype.IsActive%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20return%20this.m_bodyA.IsActive()%20%26%26%20this.m_bodyB.IsActive()%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2Joint.Create%20%3D%20function%20(def%2C%20allocator)%20%7B%0A%20%20%20%20%20%20var%20joint%20%3D%20null%3B%0A%20%20%20%20%20%20switch%20(def.type)%20%7B%0A%20%20%20%20%20%20%20%20case%20b2Joint.e_distanceJoint%3A%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20joint%20%3D%20new%20b2DistanceJoint(%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20def%20instanceof%20b2DistanceJointDef%20%3F%20def%20%3A%20null%0A%20%20%20%20%20%20%20%20%20%20%20%20)%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20break%3B%0A%20%20%20%20%20%20%20%20case%20b2Joint.e_mouseJoint%3A%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20joint%20%3D%20new%20b2MouseJoint(%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20def%20instanceof%20b2MouseJointDef%20%3F%20def%20%3A%20null%0A%20%20%20%20%20%20%20%20%20%20%20%20)%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20break%3B%0A%20%20%20%20%20%20%20%20case%20b2Joint.e_prismaticJoint%3A%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20joint%20%3D%20new%20b2PrismaticJoint(%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20def%20instanceof%20b2PrismaticJointDef%20%3F%20def%20%3A%20null%0A%20%20%20%20%20%20%20%20%20%20%20%20)%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20break%3B%0A%20%20%20%20%20%20%20%20case%20b2Joint.e_revoluteJoint%3A%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20joint%20%3D%20new%20b2RevoluteJoint(%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20def%20instanceof%20b2RevoluteJointDef%20%3F%20def%20%3A%20null%0A%20%20%20%20%20%20%20%20%20%20%20%20)%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20break%3B%0A%20%20%20%20%20%20%20%20case%20b2Joint.e_pulleyJoint%3A%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20joint%20%3D%20new%20b2PulleyJoint(%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20def%20instanceof%20b2PulleyJointDef%20%3F%20def%20%3A%20null%0A%20%20%20%20%20%20%20%20%20%20%20%20)%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20break%3B%0A%20%20%20%20%20%20%20%20case%20b2Joint.e_gearJoint%3A%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20joint%20%3D%20new%20b2GearJoint(def%20instanceof%20b2GearJointDef%20%3F%20def%20%3A%20null)%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20break%3B%0A%20%20%20%20%20%20%20%20case%20b2Joint.e_lineJoint%3A%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20joint%20%3D%20new%20b2LineJoint(def%20instanceof%20b2LineJointDef%20%3F%20def%20%3A%20null)%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20break%3B%0A%20%20%20%20%20%20%20%20case%20b2Joint.e_weldJoint%3A%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20joint%20%3D%20new%20b2WeldJoint(def%20instanceof%20b2WeldJointDef%20%3F%20def%20%3A%20null)%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20break%3B%0A%20%20%20%20%20%20%20%20case%20b2Joint.e_frictionJoint%3A%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20joint%20%3D%20new%20b2FrictionJoint(%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20def%20instanceof%20b2FrictionJointDef%20%3F%20def%20%3A%20null%0A%20%20%20%20%20%20%20%20%20%20%20%20)%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20break%3B%0A%20%20%20%20%20%20%20%20default%3A%0A%20%20%20%20%20%20%20%20%20%20break%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20return%20joint%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2Joint.Destroy%20%3D%20function%20(joint%2C%20allocator)%20%7B%7D%3B%0A%20%20%20%20b2Joint.prototype.b2Joint%20%3D%20function%20(def)%20%7B%0A%20%20%20%20%20%20b2Settings.b2Assert(def.bodyA%20!%3D%20def.bodyB)%3B%0A%20%20%20%20%20%20this.m_type%20%3D%20def.type%3B%0A%20%20%20%20%20%20this.m_prev%20%3D%20null%3B%0A%20%20%20%20%20%20this.m_next%20%3D%20null%3B%0A%20%20%20%20%20%20this.m_bodyA%20%3D%20def.bodyA%3B%0A%20%20%20%20%20%20this.m_bodyB%20%3D%20def.bodyB%3B%0A%20%20%20%20%20%20this.m_collideConnected%20%3D%20def.collideConnected%3B%0A%20%20%20%20%20%20this.m_islandFlag%20%3D%20false%3B%0A%20%20%20%20%20%20this.m_userData%20%3D%20def.userData%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2Joint.prototype.InitVelocityConstraints%20%3D%20function%20(step)%20%7B%7D%3B%0A%20%20%20%20b2Joint.prototype.SolveVelocityConstraints%20%3D%20function%20(step)%20%7B%7D%3B%0A%20%20%20%20b2Joint.prototype.FinalizeVelocityConstraints%20%3D%20function%20()%20%7B%7D%3B%0A%20%20%20%20b2Joint.prototype.SolvePositionConstraints%20%3D%20function%20(baumgarte)%20%7B%0A%20%20%20%20%20%20if%20(baumgarte%20%3D%3D%3D%20undefined)%20baumgarte%20%3D%200%3B%0A%20%20%20%20%20%20return%20false%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20Box2D.postDefs.push(function%20()%20%7B%0A%20%20%20%20%20%20Box2D.Dynamics.Joints.b2Joint.e_unknownJoint%20%3D%200%3B%0A%20%20%20%20%20%20Box2D.Dynamics.Joints.b2Joint.e_revoluteJoint%20%3D%201%3B%0A%20%20%20%20%20%20Box2D.Dynamics.Joints.b2Joint.e_prismaticJoint%20%3D%202%3B%0A%20%20%20%20%20%20Box2D.Dynamics.Joints.b2Joint.e_distanceJoint%20%3D%203%3B%0A%20%20%20%20%20%20Box2D.Dynamics.Joints.b2Joint.e_pulleyJoint%20%3D%204%3B%0A%20%20%20%20%20%20Box2D.Dynamics.Joints.b2Joint.e_mouseJoint%20%3D%205%3B%0A%20%20%20%20%20%20Box2D.Dynamics.Joints.b2Joint.e_gearJoint%20%3D%206%3B%0A%20%20%20%20%20%20Box2D.Dynamics.Joints.b2Joint.e_lineJoint%20%3D%207%3B%0A%20%20%20%20%20%20Box2D.Dynamics.Joints.b2Joint.e_weldJoint%20%3D%208%3B%0A%20%20%20%20%20%20Box2D.Dynamics.Joints.b2Joint.e_frictionJoint%20%3D%209%3B%0A%20%20%20%20%20%20Box2D.Dynamics.Joints.b2Joint.e_inactiveLimit%20%3D%200%3B%0A%20%20%20%20%20%20Box2D.Dynamics.Joints.b2Joint.e_atLowerLimit%20%3D%201%3B%0A%20%20%20%20%20%20Box2D.Dynamics.Joints.b2Joint.e_atUpperLimit%20%3D%202%3B%0A%20%20%20%20%20%20Box2D.Dynamics.Joints.b2Joint.e_equalLimits%20%3D%203%3B%0A%20%20%20%20%7D)%3B%0A%20%20%20%20b2JointDef.b2JointDef%20%3D%20function%20()%20%7B%7D%3B%0A%20%20%20%20b2JointDef.prototype.b2JointDef%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20this.type%20%3D%20b2Joint.e_unknownJoint%3B%0A%20%20%20%20%20%20this.userData%20%3D%20null%3B%0A%20%20%20%20%20%20this.bodyA%20%3D%20null%3B%0A%20%20%20%20%20%20this.bodyB%20%3D%20null%3B%0A%20%20%20%20%20%20this.collideConnected%20%3D%20false%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2JointEdge.b2JointEdge%20%3D%20function%20()%20%7B%7D%3B%0A%20%20%20%20Box2D.inherit(b2LineJoint%2C%20Box2D.Dynamics.Joints.b2Joint)%3B%0A%20%20%20%20b2LineJoint.prototype.__super%20%3D%20Box2D.Dynamics.Joints.b2Joint.prototype%3B%0A%20%20%20%20b2LineJoint.b2LineJoint%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20Box2D.Dynamics.Joints.b2Joint.b2Joint.apply(this%2C%20arguments)%3B%0A%20%20%20%20%20%20this.m_localAnchor1%20%3D%20new%20b2Vec2()%3B%0A%20%20%20%20%20%20this.m_localAnchor2%20%3D%20new%20b2Vec2()%3B%0A%20%20%20%20%20%20this.m_localXAxis1%20%3D%20new%20b2Vec2()%3B%0A%20%20%20%20%20%20this.m_localYAxis1%20%3D%20new%20b2Vec2()%3B%0A%20%20%20%20%20%20this.m_axis%20%3D%20new%20b2Vec2()%3B%0A%20%20%20%20%20%20this.m_perp%20%3D%20new%20b2Vec2()%3B%0A%20%20%20%20%20%20this.m_K%20%3D%20new%20b2Mat22()%3B%0A%20%20%20%20%20%20this.m_impulse%20%3D%20new%20b2Vec2()%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2LineJoint.prototype.GetAnchorA%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20return%20this.m_bodyA.GetWorldPoint(this.m_localAnchor1)%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2LineJoint.prototype.GetAnchorB%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20return%20this.m_bodyB.GetWorldPoint(this.m_localAnchor2)%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2LineJoint.prototype.GetReactionForce%20%3D%20function%20(inv_dt)%20%7B%0A%20%20%20%20%20%20if%20(inv_dt%20%3D%3D%3D%20undefined)%20inv_dt%20%3D%200%3B%0A%20%20%20%20%20%20return%20new%20b2Vec2(%0A%20%20%20%20%20%20%20%20inv_dt%20*%0A%20%20%20%20%20%20%20%20%20%20(this.m_impulse.x%20*%20this.m_perp.x%20%2B%0A%20%20%20%20%20%20%20%20%20%20%20%20(this.m_motorImpulse%20%2B%20this.m_impulse.y)%20*%20this.m_axis.x)%2C%0A%20%20%20%20%20%20%20%20inv_dt%20*%0A%20%20%20%20%20%20%20%20%20%20(this.m_impulse.x%20*%20this.m_perp.y%20%2B%0A%20%20%20%20%20%20%20%20%20%20%20%20(this.m_motorImpulse%20%2B%20this.m_impulse.y)%20*%20this.m_axis.y)%0A%20%20%20%20%20%20)%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2LineJoint.prototype.GetReactionTorque%20%3D%20function%20(inv_dt)%20%7B%0A%20%20%20%20%20%20if%20(inv_dt%20%3D%3D%3D%20undefined)%20inv_dt%20%3D%200%3B%0A%20%20%20%20%20%20return%20inv_dt%20*%20this.m_impulse.y%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2LineJoint.prototype.GetJointTranslation%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20var%20bA%20%3D%20this.m_bodyA%3B%0A%20%20%20%20%20%20var%20bB%20%3D%20this.m_bodyB%3B%0A%20%20%20%20%20%20var%20tMat%3B%0A%20%20%20%20%20%20var%20p1%20%3D%20bA.GetWorldPoint(this.m_localAnchor1)%3B%0A%20%20%20%20%20%20var%20p2%20%3D%20bB.GetWorldPoint(this.m_localAnchor2)%3B%0A%20%20%20%20%20%20var%20dX%20%3D%20p2.x%20-%20p1.x%3B%0A%20%20%20%20%20%20var%20dY%20%3D%20p2.y%20-%20p1.y%3B%0A%20%20%20%20%20%20var%20axis%20%3D%20bA.GetWorldVector(this.m_localXAxis1)%3B%0A%20%20%20%20%20%20var%20translation%20%3D%20axis.x%20*%20dX%20%2B%20axis.y%20*%20dY%3B%0A%20%20%20%20%20%20return%20translation%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2LineJoint.prototype.GetJointSpeed%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20var%20bA%20%3D%20this.m_bodyA%3B%0A%20%20%20%20%20%20var%20bB%20%3D%20this.m_bodyB%3B%0A%20%20%20%20%20%20var%20tMat%3B%0A%20%20%20%20%20%20tMat%20%3D%20bA.m_xf.R%3B%0A%20%20%20%20%20%20var%20r1X%20%3D%20this.m_localAnchor1.x%20-%20bA.m_sweep.localCenter.x%3B%0A%20%20%20%20%20%20var%20r1Y%20%3D%20this.m_localAnchor1.y%20-%20bA.m_sweep.localCenter.y%3B%0A%20%20%20%20%20%20var%20tX%20%3D%20tMat.col1.x%20*%20r1X%20%2B%20tMat.col2.x%20*%20r1Y%3B%0A%20%20%20%20%20%20r1Y%20%3D%20tMat.col1.y%20*%20r1X%20%2B%20tMat.col2.y%20*%20r1Y%3B%0A%20%20%20%20%20%20r1X%20%3D%20tX%3B%0A%20%20%20%20%20%20tMat%20%3D%20bB.m_xf.R%3B%0A%20%20%20%20%20%20var%20r2X%20%3D%20this.m_localAnchor2.x%20-%20bB.m_sweep.localCenter.x%3B%0A%20%20%20%20%20%20var%20r2Y%20%3D%20this.m_localAnchor2.y%20-%20bB.m_sweep.localCenter.y%3B%0A%20%20%20%20%20%20tX%20%3D%20tMat.col1.x%20*%20r2X%20%2B%20tMat.col2.x%20*%20r2Y%3B%0A%20%20%20%20%20%20r2Y%20%3D%20tMat.col1.y%20*%20r2X%20%2B%20tMat.col2.y%20*%20r2Y%3B%0A%20%20%20%20%20%20r2X%20%3D%20tX%3B%0A%20%20%20%20%20%20var%20p1X%20%3D%20bA.m_sweep.c.x%20%2B%20r1X%3B%0A%20%20%20%20%20%20var%20p1Y%20%3D%20bA.m_sweep.c.y%20%2B%20r1Y%3B%0A%20%20%20%20%20%20var%20p2X%20%3D%20bB.m_sweep.c.x%20%2B%20r2X%3B%0A%20%20%20%20%20%20var%20p2Y%20%3D%20bB.m_sweep.c.y%20%2B%20r2Y%3B%0A%20%20%20%20%20%20var%20dX%20%3D%20p2X%20-%20p1X%3B%0A%20%20%20%20%20%20var%20dY%20%3D%20p2Y%20-%20p1Y%3B%0A%20%20%20%20%20%20var%20axis%20%3D%20bA.GetWorldVector(this.m_localXAxis1)%3B%0A%20%20%20%20%20%20var%20v1%20%3D%20bA.m_linearVelocity%3B%0A%20%20%20%20%20%20var%20v2%20%3D%20bB.m_linearVelocity%3B%0A%20%20%20%20%20%20var%20w1%20%3D%20bA.m_angularVelocity%3B%0A%20%20%20%20%20%20var%20w2%20%3D%20bB.m_angularVelocity%3B%0A%20%20%20%20%20%20var%20speed%20%3D%0A%20%20%20%20%20%20%20%20dX%20*%20(-w1%20*%20axis.y)%20%2B%0A%20%20%20%20%20%20%20%20dY%20*%20(w1%20*%20axis.x)%20%2B%0A%20%20%20%20%20%20%20%20(axis.x%20*%20(v2.x%20%2B%20-w2%20*%20r2Y%20-%20v1.x%20-%20-w1%20*%20r1Y)%20%2B%0A%20%20%20%20%20%20%20%20%20%20axis.y%20*%20(v2.y%20%2B%20w2%20*%20r2X%20-%20v1.y%20-%20w1%20*%20r1X))%3B%0A%20%20%20%20%20%20return%20speed%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2LineJoint.prototype.IsLimitEnabled%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20return%20this.m_enableLimit%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2LineJoint.prototype.EnableLimit%20%3D%20function%20(flag)%20%7B%0A%20%20%20%20%20%20this.m_bodyA.SetAwake(true)%3B%0A%20%20%20%20%20%20this.m_bodyB.SetAwake(true)%3B%0A%20%20%20%20%20%20this.m_enableLimit%20%3D%20flag%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2LineJoint.prototype.GetLowerLimit%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20return%20this.m_lowerTranslation%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2LineJoint.prototype.GetUpperLimit%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20return%20this.m_upperTranslation%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2LineJoint.prototype.SetLimits%20%3D%20function%20(lower%2C%20upper)%20%7B%0A%20%20%20%20%20%20if%20(lower%20%3D%3D%3D%20undefined)%20lower%20%3D%200%3B%0A%20%20%20%20%20%20if%20(upper%20%3D%3D%3D%20undefined)%20upper%20%3D%200%3B%0A%20%20%20%20%20%20this.m_bodyA.SetAwake(true)%3B%0A%20%20%20%20%20%20this.m_bodyB.SetAwake(true)%3B%0A%20%20%20%20%20%20this.m_lowerTranslation%20%3D%20lower%3B%0A%20%20%20%20%20%20this.m_upperTranslation%20%3D%20upper%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2LineJoint.prototype.IsMotorEnabled%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20return%20this.m_enableMotor%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2LineJoint.prototype.EnableMotor%20%3D%20function%20(flag)%20%7B%0A%20%20%20%20%20%20this.m_bodyA.SetAwake(true)%3B%0A%20%20%20%20%20%20this.m_bodyB.SetAwake(true)%3B%0A%20%20%20%20%20%20this.m_enableMotor%20%3D%20flag%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2LineJoint.prototype.SetMotorSpeed%20%3D%20function%20(speed)%20%7B%0A%20%20%20%20%20%20if%20(speed%20%3D%3D%3D%20undefined)%20speed%20%3D%200%3B%0A%20%20%20%20%20%20this.m_bodyA.SetAwake(true)%3B%0A%20%20%20%20%20%20this.m_bodyB.SetAwake(true)%3B%0A%20%20%20%20%20%20this.m_motorSpeed%20%3D%20speed%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2LineJoint.prototype.GetMotorSpeed%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20return%20this.m_motorSpeed%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2LineJoint.prototype.SetMaxMotorForce%20%3D%20function%20(force)%20%7B%0A%20%20%20%20%20%20if%20(force%20%3D%3D%3D%20undefined)%20force%20%3D%200%3B%0A%20%20%20%20%20%20this.m_bodyA.SetAwake(true)%3B%0A%20%20%20%20%20%20this.m_bodyB.SetAwake(true)%3B%0A%20%20%20%20%20%20this.m_maxMotorForce%20%3D%20force%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2LineJoint.prototype.GetMaxMotorForce%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20return%20this.m_maxMotorForce%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2LineJoint.prototype.GetMotorForce%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20return%20this.m_motorImpulse%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2LineJoint.prototype.b2LineJoint%20%3D%20function%20(def)%20%7B%0A%20%20%20%20%20%20this.__super.b2Joint.call(this%2C%20def)%3B%0A%20%20%20%20%20%20var%20tMat%3B%0A%20%20%20%20%20%20var%20tX%20%3D%200%3B%0A%20%20%20%20%20%20var%20tY%20%3D%200%3B%0A%20%20%20%20%20%20this.m_localAnchor1.SetV(def.localAnchorA)%3B%0A%20%20%20%20%20%20this.m_localAnchor2.SetV(def.localAnchorB)%3B%0A%20%20%20%20%20%20this.m_localXAxis1.SetV(def.localAxisA)%3B%0A%20%20%20%20%20%20this.m_localYAxis1.x%20%3D%20-this.m_localXAxis1.y%3B%0A%20%20%20%20%20%20this.m_localYAxis1.y%20%3D%20this.m_localXAxis1.x%3B%0A%20%20%20%20%20%20this.m_impulse.SetZero()%3B%0A%20%20%20%20%20%20this.m_motorMass%20%3D%200.0%3B%0A%20%20%20%20%20%20this.m_motorImpulse%20%3D%200.0%3B%0A%20%20%20%20%20%20this.m_lowerTranslation%20%3D%20def.lowerTranslation%3B%0A%20%20%20%20%20%20this.m_upperTranslation%20%3D%20def.upperTranslation%3B%0A%20%20%20%20%20%20this.m_maxMotorForce%20%3D%20def.maxMotorForce%3B%0A%20%20%20%20%20%20this.m_motorSpeed%20%3D%20def.motorSpeed%3B%0A%20%20%20%20%20%20this.m_enableLimit%20%3D%20def.enableLimit%3B%0A%20%20%20%20%20%20this.m_enableMotor%20%3D%20def.enableMotor%3B%0A%20%20%20%20%20%20this.m_limitState%20%3D%20b2Joint.e_inactiveLimit%3B%0A%20%20%20%20%20%20this.m_axis.SetZero()%3B%0A%20%20%20%20%20%20this.m_perp.SetZero()%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2LineJoint.prototype.InitVelocityConstraints%20%3D%20function%20(step)%20%7B%0A%20%20%20%20%20%20var%20bA%20%3D%20this.m_bodyA%3B%0A%20%20%20%20%20%20var%20bB%20%3D%20this.m_bodyB%3B%0A%20%20%20%20%20%20var%20tMat%3B%0A%20%20%20%20%20%20var%20tX%20%3D%200%3B%0A%20%20%20%20%20%20this.m_localCenterA.SetV(bA.GetLocalCenter())%3B%0A%20%20%20%20%20%20this.m_localCenterB.SetV(bB.GetLocalCenter())%3B%0A%20%20%20%20%20%20var%20xf1%20%3D%20bA.GetTransform()%3B%0A%20%20%20%20%20%20var%20xf2%20%3D%20bB.GetTransform()%3B%0A%20%20%20%20%20%20tMat%20%3D%20bA.m_xf.R%3B%0A%20%20%20%20%20%20var%20r1X%20%3D%20this.m_localAnchor1.x%20-%20this.m_localCenterA.x%3B%0A%20%20%20%20%20%20var%20r1Y%20%3D%20this.m_localAnchor1.y%20-%20this.m_localCenterA.y%3B%0A%20%20%20%20%20%20tX%20%3D%20tMat.col1.x%20*%20r1X%20%2B%20tMat.col2.x%20*%20r1Y%3B%0A%20%20%20%20%20%20r1Y%20%3D%20tMat.col1.y%20*%20r1X%20%2B%20tMat.col2.y%20*%20r1Y%3B%0A%20%20%20%20%20%20r1X%20%3D%20tX%3B%0A%20%20%20%20%20%20tMat%20%3D%20bB.m_xf.R%3B%0A%20%20%20%20%20%20var%20r2X%20%3D%20this.m_localAnchor2.x%20-%20this.m_localCenterB.x%3B%0A%20%20%20%20%20%20var%20r2Y%20%3D%20this.m_localAnchor2.y%20-%20this.m_localCenterB.y%3B%0A%20%20%20%20%20%20tX%20%3D%20tMat.col1.x%20*%20r2X%20%2B%20tMat.col2.x%20*%20r2Y%3B%0A%20%20%20%20%20%20r2Y%20%3D%20tMat.col1.y%20*%20r2X%20%2B%20tMat.col2.y%20*%20r2Y%3B%0A%20%20%20%20%20%20r2X%20%3D%20tX%3B%0A%20%20%20%20%20%20var%20dX%20%3D%20bB.m_sweep.c.x%20%2B%20r2X%20-%20bA.m_sweep.c.x%20-%20r1X%3B%0A%20%20%20%20%20%20var%20dY%20%3D%20bB.m_sweep.c.y%20%2B%20r2Y%20-%20bA.m_sweep.c.y%20-%20r1Y%3B%0A%20%20%20%20%20%20this.m_invMassA%20%3D%20bA.m_invMass%3B%0A%20%20%20%20%20%20this.m_invMassB%20%3D%20bB.m_invMass%3B%0A%20%20%20%20%20%20this.m_invIA%20%3D%20bA.m_invI%3B%0A%20%20%20%20%20%20this.m_invIB%20%3D%20bB.m_invI%3B%0A%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20this.m_axis.SetV(b2Math.MulMV(xf1.R%2C%20this.m_localXAxis1))%3B%0A%20%20%20%20%20%20%20%20this.m_a1%20%3D%20(dX%20%2B%20r1X)%20*%20this.m_axis.y%20-%20(dY%20%2B%20r1Y)%20*%20this.m_axis.x%3B%0A%20%20%20%20%20%20%20%20this.m_a2%20%3D%20r2X%20*%20this.m_axis.y%20-%20r2Y%20*%20this.m_axis.x%3B%0A%20%20%20%20%20%20%20%20this.m_motorMass%20%3D%0A%20%20%20%20%20%20%20%20%20%20this.m_invMassA%20%2B%0A%20%20%20%20%20%20%20%20%20%20this.m_invMassB%20%2B%0A%20%20%20%20%20%20%20%20%20%20this.m_invIA%20*%20this.m_a1%20*%20this.m_a1%20%2B%0A%20%20%20%20%20%20%20%20%20%20this.m_invIB%20*%20this.m_a2%20*%20this.m_a2%3B%0A%20%20%20%20%20%20%20%20this.m_motorMass%20%3D%0A%20%20%20%20%20%20%20%20%20%20this.m_motorMass%20%3E%20Number.MIN_VALUE%20%3F%201.0%20%2F%20this.m_motorMass%20%3A%200.0%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20this.m_perp.SetV(b2Math.MulMV(xf1.R%2C%20this.m_localYAxis1))%3B%0A%20%20%20%20%20%20%20%20this.m_s1%20%3D%20(dX%20%2B%20r1X)%20*%20this.m_perp.y%20-%20(dY%20%2B%20r1Y)%20*%20this.m_perp.x%3B%0A%20%20%20%20%20%20%20%20this.m_s2%20%3D%20r2X%20*%20this.m_perp.y%20-%20r2Y%20*%20this.m_perp.x%3B%0A%20%20%20%20%20%20%20%20var%20m1%20%3D%20this.m_invMassA%3B%0A%20%20%20%20%20%20%20%20var%20m2%20%3D%20this.m_invMassB%3B%0A%20%20%20%20%20%20%20%20var%20i1%20%3D%20this.m_invIA%3B%0A%20%20%20%20%20%20%20%20var%20i2%20%3D%20this.m_invIB%3B%0A%20%20%20%20%20%20%20%20this.m_K.col1.x%20%3D%0A%20%20%20%20%20%20%20%20%20%20m1%20%2B%20m2%20%2B%20i1%20*%20this.m_s1%20*%20this.m_s1%20%2B%20i2%20*%20this.m_s2%20*%20this.m_s2%3B%0A%20%20%20%20%20%20%20%20this.m_K.col1.y%20%3D%0A%20%20%20%20%20%20%20%20%20%20i1%20*%20this.m_s1%20*%20this.m_a1%20%2B%20i2%20*%20this.m_s2%20*%20this.m_a2%3B%0A%20%20%20%20%20%20%20%20this.m_K.col2.x%20%3D%20this.m_K.col1.y%3B%0A%20%20%20%20%20%20%20%20this.m_K.col2.y%20%3D%0A%20%20%20%20%20%20%20%20%20%20m1%20%2B%20m2%20%2B%20i1%20*%20this.m_a1%20*%20this.m_a1%20%2B%20i2%20*%20this.m_a2%20*%20this.m_a2%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20if%20(this.m_enableLimit)%20%7B%0A%20%20%20%20%20%20%20%20var%20jointTransition%20%3D%20this.m_axis.x%20*%20dX%20%2B%20this.m_axis.y%20*%20dY%3B%0A%20%20%20%20%20%20%20%20if%20(%0A%20%20%20%20%20%20%20%20%20%20b2Math.Abs(this.m_upperTranslation%20-%20this.m_lowerTranslation)%20%3C%0A%20%20%20%20%20%20%20%20%20%202.0%20*%20b2Settings.b2_linearSlop%0A%20%20%20%20%20%20%20%20)%20%7B%0A%20%20%20%20%20%20%20%20%20%20this.m_limitState%20%3D%20b2Joint.e_equalLimits%3B%0A%20%20%20%20%20%20%20%20%7D%20else%20if%20(jointTransition%20%3C%3D%20this.m_lowerTranslation)%20%7B%0A%20%20%20%20%20%20%20%20%20%20if%20(this.m_limitState%20!%3D%20b2Joint.e_atLowerLimit)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20this.m_limitState%20%3D%20b2Joint.e_atLowerLimit%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20this.m_impulse.y%20%3D%200.0%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%20else%20if%20(jointTransition%20%3E%3D%20this.m_upperTranslation)%20%7B%0A%20%20%20%20%20%20%20%20%20%20if%20(this.m_limitState%20!%3D%20b2Joint.e_atUpperLimit)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20this.m_limitState%20%3D%20b2Joint.e_atUpperLimit%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20this.m_impulse.y%20%3D%200.0%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20this.m_limitState%20%3D%20b2Joint.e_inactiveLimit%3B%0A%20%20%20%20%20%20%20%20%20%20this.m_impulse.y%20%3D%200.0%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20this.m_limitState%20%3D%20b2Joint.e_inactiveLimit%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20if%20(this.m_enableMotor%20%3D%3D%20false)%20%7B%0A%20%20%20%20%20%20%20%20this.m_motorImpulse%20%3D%200.0%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20if%20(step.warmStarting)%20%7B%0A%20%20%20%20%20%20%20%20this.m_impulse.x%20*%3D%20step.dtRatio%3B%0A%20%20%20%20%20%20%20%20this.m_impulse.y%20*%3D%20step.dtRatio%3B%0A%20%20%20%20%20%20%20%20this.m_motorImpulse%20*%3D%20step.dtRatio%3B%0A%20%20%20%20%20%20%20%20var%20PX%20%3D%0A%20%20%20%20%20%20%20%20%20%20this.m_impulse.x%20*%20this.m_perp.x%20%2B%0A%20%20%20%20%20%20%20%20%20%20(this.m_motorImpulse%20%2B%20this.m_impulse.y)%20*%20this.m_axis.x%3B%0A%20%20%20%20%20%20%20%20var%20PY%20%3D%0A%20%20%20%20%20%20%20%20%20%20this.m_impulse.x%20*%20this.m_perp.y%20%2B%0A%20%20%20%20%20%20%20%20%20%20(this.m_motorImpulse%20%2B%20this.m_impulse.y)%20*%20this.m_axis.y%3B%0A%20%20%20%20%20%20%20%20var%20L1%20%3D%0A%20%20%20%20%20%20%20%20%20%20this.m_impulse.x%20*%20this.m_s1%20%2B%0A%20%20%20%20%20%20%20%20%20%20(this.m_motorImpulse%20%2B%20this.m_impulse.y)%20*%20this.m_a1%3B%0A%20%20%20%20%20%20%20%20var%20L2%20%3D%0A%20%20%20%20%20%20%20%20%20%20this.m_impulse.x%20*%20this.m_s2%20%2B%0A%20%20%20%20%20%20%20%20%20%20(this.m_motorImpulse%20%2B%20this.m_impulse.y)%20*%20this.m_a2%3B%0A%20%20%20%20%20%20%20%20bA.m_linearVelocity.x%20-%3D%20this.m_invMassA%20*%20PX%3B%0A%20%20%20%20%20%20%20%20bA.m_linearVelocity.y%20-%3D%20this.m_invMassA%20*%20PY%3B%0A%20%20%20%20%20%20%20%20bA.m_angularVelocity%20-%3D%20this.m_invIA%20*%20L1%3B%0A%20%20%20%20%20%20%20%20bB.m_linearVelocity.x%20%2B%3D%20this.m_invMassB%20*%20PX%3B%0A%20%20%20%20%20%20%20%20bB.m_linearVelocity.y%20%2B%3D%20this.m_invMassB%20*%20PY%3B%0A%20%20%20%20%20%20%20%20bB.m_angularVelocity%20%2B%3D%20this.m_invIB%20*%20L2%3B%0A%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20this.m_impulse.SetZero()%3B%0A%20%20%20%20%20%20%20%20this.m_motorImpulse%20%3D%200.0%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2LineJoint.prototype.SolveVelocityConstraints%20%3D%20function%20(step)%20%7B%0A%20%20%20%20%20%20var%20bA%20%3D%20this.m_bodyA%3B%0A%20%20%20%20%20%20var%20bB%20%3D%20this.m_bodyB%3B%0A%20%20%20%20%20%20var%20v1%20%3D%20bA.m_linearVelocity%3B%0A%20%20%20%20%20%20var%20w1%20%3D%20bA.m_angularVelocity%3B%0A%20%20%20%20%20%20var%20v2%20%3D%20bB.m_linearVelocity%3B%0A%20%20%20%20%20%20var%20w2%20%3D%20bB.m_angularVelocity%3B%0A%20%20%20%20%20%20var%20PX%20%3D%200%3B%0A%20%20%20%20%20%20var%20PY%20%3D%200%3B%0A%20%20%20%20%20%20var%20L1%20%3D%200%3B%0A%20%20%20%20%20%20var%20L2%20%3D%200%3B%0A%20%20%20%20%20%20if%20(this.m_enableMotor%20%26%26%20this.m_limitState%20!%3D%20b2Joint.e_equalLimits)%20%7B%0A%20%20%20%20%20%20%20%20var%20Cdot%20%3D%0A%20%20%20%20%20%20%20%20%20%20this.m_axis.x%20*%20(v2.x%20-%20v1.x)%20%2B%0A%20%20%20%20%20%20%20%20%20%20this.m_axis.y%20*%20(v2.y%20-%20v1.y)%20%2B%0A%20%20%20%20%20%20%20%20%20%20this.m_a2%20*%20w2%20-%0A%20%20%20%20%20%20%20%20%20%20this.m_a1%20*%20w1%3B%0A%20%20%20%20%20%20%20%20var%20impulse%20%3D%20this.m_motorMass%20*%20(this.m_motorSpeed%20-%20Cdot)%3B%0A%20%20%20%20%20%20%20%20var%20oldImpulse%20%3D%20this.m_motorImpulse%3B%0A%20%20%20%20%20%20%20%20var%20maxImpulse%20%3D%20step.dt%20*%20this.m_maxMotorForce%3B%0A%20%20%20%20%20%20%20%20this.m_motorImpulse%20%3D%20b2Math.Clamp(%0A%20%20%20%20%20%20%20%20%20%20this.m_motorImpulse%20%2B%20impulse%2C%0A%20%20%20%20%20%20%20%20%20%20-maxImpulse%2C%0A%20%20%20%20%20%20%20%20%20%20maxImpulse%0A%20%20%20%20%20%20%20%20)%3B%0A%20%20%20%20%20%20%20%20impulse%20%3D%20this.m_motorImpulse%20-%20oldImpulse%3B%0A%20%20%20%20%20%20%20%20PX%20%3D%20impulse%20*%20this.m_axis.x%3B%0A%20%20%20%20%20%20%20%20PY%20%3D%20impulse%20*%20this.m_axis.y%3B%0A%20%20%20%20%20%20%20%20L1%20%3D%20impulse%20*%20this.m_a1%3B%0A%20%20%20%20%20%20%20%20L2%20%3D%20impulse%20*%20this.m_a2%3B%0A%20%20%20%20%20%20%20%20v1.x%20-%3D%20this.m_invMassA%20*%20PX%3B%0A%20%20%20%20%20%20%20%20v1.y%20-%3D%20this.m_invMassA%20*%20PY%3B%0A%20%20%20%20%20%20%20%20w1%20-%3D%20this.m_invIA%20*%20L1%3B%0A%20%20%20%20%20%20%20%20v2.x%20%2B%3D%20this.m_invMassB%20*%20PX%3B%0A%20%20%20%20%20%20%20%20v2.y%20%2B%3D%20this.m_invMassB%20*%20PY%3B%0A%20%20%20%20%20%20%20%20w2%20%2B%3D%20this.m_invIB%20*%20L2%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20var%20Cdot1%20%3D%0A%20%20%20%20%20%20%20%20this.m_perp.x%20*%20(v2.x%20-%20v1.x)%20%2B%0A%20%20%20%20%20%20%20%20this.m_perp.y%20*%20(v2.y%20-%20v1.y)%20%2B%0A%20%20%20%20%20%20%20%20this.m_s2%20*%20w2%20-%0A%20%20%20%20%20%20%20%20this.m_s1%20*%20w1%3B%0A%20%20%20%20%20%20if%20(this.m_enableLimit%20%26%26%20this.m_limitState%20!%3D%20b2Joint.e_inactiveLimit)%20%7B%0A%20%20%20%20%20%20%20%20var%20Cdot2%20%3D%0A%20%20%20%20%20%20%20%20%20%20this.m_axis.x%20*%20(v2.x%20-%20v1.x)%20%2B%0A%20%20%20%20%20%20%20%20%20%20this.m_axis.y%20*%20(v2.y%20-%20v1.y)%20%2B%0A%20%20%20%20%20%20%20%20%20%20this.m_a2%20*%20w2%20-%0A%20%20%20%20%20%20%20%20%20%20this.m_a1%20*%20w1%3B%0A%20%20%20%20%20%20%20%20var%20f1%20%3D%20this.m_impulse.Copy()%3B%0A%20%20%20%20%20%20%20%20var%20df%20%3D%20this.m_K.Solve(new%20b2Vec2()%2C%20-Cdot1%2C%20-Cdot2)%3B%0A%20%20%20%20%20%20%20%20this.m_impulse.Add(df)%3B%0A%20%20%20%20%20%20%20%20if%20(this.m_limitState%20%3D%3D%20b2Joint.e_atLowerLimit)%20%7B%0A%20%20%20%20%20%20%20%20%20%20this.m_impulse.y%20%3D%20b2Math.Max(this.m_impulse.y%2C%200.0)%3B%0A%20%20%20%20%20%20%20%20%7D%20else%20if%20(this.m_limitState%20%3D%3D%20b2Joint.e_atUpperLimit)%20%7B%0A%20%20%20%20%20%20%20%20%20%20this.m_impulse.y%20%3D%20b2Math.Min(this.m_impulse.y%2C%200.0)%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20var%20b%20%3D%20-Cdot1%20-%20(this.m_impulse.y%20-%20f1.y)%20*%20this.m_K.col2.x%3B%0A%20%20%20%20%20%20%20%20var%20f2r%20%3D%200%3B%0A%20%20%20%20%20%20%20%20if%20(this.m_K.col1.x%20!%3D%200.0)%20%7B%0A%20%20%20%20%20%20%20%20%20%20f2r%20%3D%20b%20%2F%20this.m_K.col1.x%20%2B%20f1.x%3B%0A%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20f2r%20%3D%20f1.x%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20this.m_impulse.x%20%3D%20f2r%3B%0A%20%20%20%20%20%20%20%20df.x%20%3D%20this.m_impulse.x%20-%20f1.x%3B%0A%20%20%20%20%20%20%20%20df.y%20%3D%20this.m_impulse.y%20-%20f1.y%3B%0A%20%20%20%20%20%20%20%20PX%20%3D%20df.x%20*%20this.m_perp.x%20%2B%20df.y%20*%20this.m_axis.x%3B%0A%20%20%20%20%20%20%20%20PY%20%3D%20df.x%20*%20this.m_perp.y%20%2B%20df.y%20*%20this.m_axis.y%3B%0A%20%20%20%20%20%20%20%20L1%20%3D%20df.x%20*%20this.m_s1%20%2B%20df.y%20*%20this.m_a1%3B%0A%20%20%20%20%20%20%20%20L2%20%3D%20df.x%20*%20this.m_s2%20%2B%20df.y%20*%20this.m_a2%3B%0A%20%20%20%20%20%20%20%20v1.x%20-%3D%20this.m_invMassA%20*%20PX%3B%0A%20%20%20%20%20%20%20%20v1.y%20-%3D%20this.m_invMassA%20*%20PY%3B%0A%20%20%20%20%20%20%20%20w1%20-%3D%20this.m_invIA%20*%20L1%3B%0A%20%20%20%20%20%20%20%20v2.x%20%2B%3D%20this.m_invMassB%20*%20PX%3B%0A%20%20%20%20%20%20%20%20v2.y%20%2B%3D%20this.m_invMassB%20*%20PY%3B%0A%20%20%20%20%20%20%20%20w2%20%2B%3D%20this.m_invIB%20*%20L2%3B%0A%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20var%20df2%20%3D%200%3B%0A%20%20%20%20%20%20%20%20if%20(this.m_K.col1.x%20!%3D%200.0)%20%7B%0A%20%20%20%20%20%20%20%20%20%20df2%20%3D%20-Cdot1%20%2F%20this.m_K.col1.x%3B%0A%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20df2%20%3D%200.0%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20this.m_impulse.x%20%2B%3D%20df2%3B%0A%20%20%20%20%20%20%20%20PX%20%3D%20df2%20*%20this.m_perp.x%3B%0A%20%20%20%20%20%20%20%20PY%20%3D%20df2%20*%20this.m_perp.y%3B%0A%20%20%20%20%20%20%20%20L1%20%3D%20df2%20*%20this.m_s1%3B%0A%20%20%20%20%20%20%20%20L2%20%3D%20df2%20*%20this.m_s2%3B%0A%20%20%20%20%20%20%20%20v1.x%20-%3D%20this.m_invMassA%20*%20PX%3B%0A%20%20%20%20%20%20%20%20v1.y%20-%3D%20this.m_invMassA%20*%20PY%3B%0A%20%20%20%20%20%20%20%20w1%20-%3D%20this.m_invIA%20*%20L1%3B%0A%20%20%20%20%20%20%20%20v2.x%20%2B%3D%20this.m_invMassB%20*%20PX%3B%0A%20%20%20%20%20%20%20%20v2.y%20%2B%3D%20this.m_invMassB%20*%20PY%3B%0A%20%20%20%20%20%20%20%20w2%20%2B%3D%20this.m_invIB%20*%20L2%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20bA.m_linearVelocity.SetV(v1)%3B%0A%20%20%20%20%20%20bA.m_angularVelocity%20%3D%20w1%3B%0A%20%20%20%20%20%20bB.m_linearVelocity.SetV(v2)%3B%0A%20%20%20%20%20%20bB.m_angularVelocity%20%3D%20w2%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2LineJoint.prototype.SolvePositionConstraints%20%3D%20function%20(baumgarte)%20%7B%0A%20%20%20%20%20%20if%20(baumgarte%20%3D%3D%3D%20undefined)%20baumgarte%20%3D%200%3B%0A%20%20%20%20%20%20var%20limitC%20%3D%200%3B%0A%20%20%20%20%20%20var%20oldLimitImpulse%20%3D%200%3B%0A%20%20%20%20%20%20var%20bA%20%3D%20this.m_bodyA%3B%0A%20%20%20%20%20%20var%20bB%20%3D%20this.m_bodyB%3B%0A%20%20%20%20%20%20var%20c1%20%3D%20bA.m_sweep.c%3B%0A%20%20%20%20%20%20var%20a1%20%3D%20bA.m_sweep.a%3B%0A%20%20%20%20%20%20var%20c2%20%3D%20bB.m_sweep.c%3B%0A%20%20%20%20%20%20var%20a2%20%3D%20bB.m_sweep.a%3B%0A%20%20%20%20%20%20var%20tMat%3B%0A%20%20%20%20%20%20var%20tX%20%3D%200%3B%0A%20%20%20%20%20%20var%20m1%20%3D%200%3B%0A%20%20%20%20%20%20var%20m2%20%3D%200%3B%0A%20%20%20%20%20%20var%20i1%20%3D%200%3B%0A%20%20%20%20%20%20var%20i2%20%3D%200%3B%0A%20%20%20%20%20%20var%20linearError%20%3D%200.0%3B%0A%20%20%20%20%20%20var%20angularError%20%3D%200.0%3B%0A%20%20%20%20%20%20var%20active%20%3D%20false%3B%0A%20%20%20%20%20%20var%20C2%20%3D%200.0%3B%0A%20%20%20%20%20%20var%20R1%20%3D%20b2Mat22.FromAngle(a1)%3B%0A%20%20%20%20%20%20var%20R2%20%3D%20b2Mat22.FromAngle(a2)%3B%0A%20%20%20%20%20%20tMat%20%3D%20R1%3B%0A%20%20%20%20%20%20var%20r1X%20%3D%20this.m_localAnchor1.x%20-%20this.m_localCenterA.x%3B%0A%20%20%20%20%20%20var%20r1Y%20%3D%20this.m_localAnchor1.y%20-%20this.m_localCenterA.y%3B%0A%20%20%20%20%20%20tX%20%3D%20tMat.col1.x%20*%20r1X%20%2B%20tMat.col2.x%20*%20r1Y%3B%0A%20%20%20%20%20%20r1Y%20%3D%20tMat.col1.y%20*%20r1X%20%2B%20tMat.col2.y%20*%20r1Y%3B%0A%20%20%20%20%20%20r1X%20%3D%20tX%3B%0A%20%20%20%20%20%20tMat%20%3D%20R2%3B%0A%20%20%20%20%20%20var%20r2X%20%3D%20this.m_localAnchor2.x%20-%20this.m_localCenterB.x%3B%0A%20%20%20%20%20%20var%20r2Y%20%3D%20this.m_localAnchor2.y%20-%20this.m_localCenterB.y%3B%0A%20%20%20%20%20%20tX%20%3D%20tMat.col1.x%20*%20r2X%20%2B%20tMat.col2.x%20*%20r2Y%3B%0A%20%20%20%20%20%20r2Y%20%3D%20tMat.col1.y%20*%20r2X%20%2B%20tMat.col2.y%20*%20r2Y%3B%0A%20%20%20%20%20%20r2X%20%3D%20tX%3B%0A%20%20%20%20%20%20var%20dX%20%3D%20c2.x%20%2B%20r2X%20-%20c1.x%20-%20r1X%3B%0A%20%20%20%20%20%20var%20dY%20%3D%20c2.y%20%2B%20r2Y%20-%20c1.y%20-%20r1Y%3B%0A%20%20%20%20%20%20if%20(this.m_enableLimit)%20%7B%0A%20%20%20%20%20%20%20%20this.m_axis%20%3D%20b2Math.MulMV(R1%2C%20this.m_localXAxis1)%3B%0A%20%20%20%20%20%20%20%20this.m_a1%20%3D%20(dX%20%2B%20r1X)%20*%20this.m_axis.y%20-%20(dY%20%2B%20r1Y)%20*%20this.m_axis.x%3B%0A%20%20%20%20%20%20%20%20this.m_a2%20%3D%20r2X%20*%20this.m_axis.y%20-%20r2Y%20*%20this.m_axis.x%3B%0A%20%20%20%20%20%20%20%20var%20translation%20%3D%20this.m_axis.x%20*%20dX%20%2B%20this.m_axis.y%20*%20dY%3B%0A%20%20%20%20%20%20%20%20if%20(%0A%20%20%20%20%20%20%20%20%20%20b2Math.Abs(this.m_upperTranslation%20-%20this.m_lowerTranslation)%20%3C%0A%20%20%20%20%20%20%20%20%20%202.0%20*%20b2Settings.b2_linearSlop%0A%20%20%20%20%20%20%20%20)%20%7B%0A%20%20%20%20%20%20%20%20%20%20C2%20%3D%20b2Math.Clamp(%0A%20%20%20%20%20%20%20%20%20%20%20%20translation%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20-b2Settings.b2_maxLinearCorrection%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20b2Settings.b2_maxLinearCorrection%0A%20%20%20%20%20%20%20%20%20%20)%3B%0A%20%20%20%20%20%20%20%20%20%20linearError%20%3D%20b2Math.Abs(translation)%3B%0A%20%20%20%20%20%20%20%20%20%20active%20%3D%20true%3B%0A%20%20%20%20%20%20%20%20%7D%20else%20if%20(translation%20%3C%3D%20this.m_lowerTranslation)%20%7B%0A%20%20%20%20%20%20%20%20%20%20C2%20%3D%20b2Math.Clamp(%0A%20%20%20%20%20%20%20%20%20%20%20%20translation%20-%20this.m_lowerTranslation%20%2B%20b2Settings.b2_linearSlop%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20-b2Settings.b2_maxLinearCorrection%2C%0A%20%20%20%20%20%20%20%20%20%20%20%200.0%0A%20%20%20%20%20%20%20%20%20%20)%3B%0A%20%20%20%20%20%20%20%20%20%20linearError%20%3D%20this.m_lowerTranslation%20-%20translation%3B%0A%20%20%20%20%20%20%20%20%20%20active%20%3D%20true%3B%0A%20%20%20%20%20%20%20%20%7D%20else%20if%20(translation%20%3E%3D%20this.m_upperTranslation)%20%7B%0A%20%20%20%20%20%20%20%20%20%20C2%20%3D%20b2Math.Clamp(%0A%20%20%20%20%20%20%20%20%20%20%20%20translation%20-%20this.m_upperTranslation%20%2B%20b2Settings.b2_linearSlop%2C%0A%20%20%20%20%20%20%20%20%20%20%20%200.0%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20b2Settings.b2_maxLinearCorrection%0A%20%20%20%20%20%20%20%20%20%20)%3B%0A%20%20%20%20%20%20%20%20%20%20linearError%20%3D%20translation%20-%20this.m_upperTranslation%3B%0A%20%20%20%20%20%20%20%20%20%20active%20%3D%20true%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20this.m_perp%20%3D%20b2Math.MulMV(R1%2C%20this.m_localYAxis1)%3B%0A%20%20%20%20%20%20this.m_s1%20%3D%20(dX%20%2B%20r1X)%20*%20this.m_perp.y%20-%20(dY%20%2B%20r1Y)%20*%20this.m_perp.x%3B%0A%20%20%20%20%20%20this.m_s2%20%3D%20r2X%20*%20this.m_perp.y%20-%20r2Y%20*%20this.m_perp.x%3B%0A%20%20%20%20%20%20var%20impulse%20%3D%20new%20b2Vec2()%3B%0A%20%20%20%20%20%20var%20C1%20%3D%20this.m_perp.x%20*%20dX%20%2B%20this.m_perp.y%20*%20dY%3B%0A%20%20%20%20%20%20linearError%20%3D%20b2Math.Max(linearError%2C%20b2Math.Abs(C1))%3B%0A%20%20%20%20%20%20angularError%20%3D%200.0%3B%0A%20%20%20%20%20%20if%20(active)%20%7B%0A%20%20%20%20%20%20%20%20m1%20%3D%20this.m_invMassA%3B%0A%20%20%20%20%20%20%20%20m2%20%3D%20this.m_invMassB%3B%0A%20%20%20%20%20%20%20%20i1%20%3D%20this.m_invIA%3B%0A%20%20%20%20%20%20%20%20i2%20%3D%20this.m_invIB%3B%0A%20%20%20%20%20%20%20%20this.m_K.col1.x%20%3D%0A%20%20%20%20%20%20%20%20%20%20m1%20%2B%20m2%20%2B%20i1%20*%20this.m_s1%20*%20this.m_s1%20%2B%20i2%20*%20this.m_s2%20*%20this.m_s2%3B%0A%20%20%20%20%20%20%20%20this.m_K.col1.y%20%3D%0A%20%20%20%20%20%20%20%20%20%20i1%20*%20this.m_s1%20*%20this.m_a1%20%2B%20i2%20*%20this.m_s2%20*%20this.m_a2%3B%0A%20%20%20%20%20%20%20%20this.m_K.col2.x%20%3D%20this.m_K.col1.y%3B%0A%20%20%20%20%20%20%20%20this.m_K.col2.y%20%3D%0A%20%20%20%20%20%20%20%20%20%20m1%20%2B%20m2%20%2B%20i1%20*%20this.m_a1%20*%20this.m_a1%20%2B%20i2%20*%20this.m_a2%20*%20this.m_a2%3B%0A%20%20%20%20%20%20%20%20this.m_K.Solve(impulse%2C%20-C1%2C%20-C2)%3B%0A%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20m1%20%3D%20this.m_invMassA%3B%0A%20%20%20%20%20%20%20%20m2%20%3D%20this.m_invMassB%3B%0A%20%20%20%20%20%20%20%20i1%20%3D%20this.m_invIA%3B%0A%20%20%20%20%20%20%20%20i2%20%3D%20this.m_invIB%3B%0A%20%20%20%20%20%20%20%20var%20k11%20%3D%0A%20%20%20%20%20%20%20%20%20%20m1%20%2B%20m2%20%2B%20i1%20*%20this.m_s1%20*%20this.m_s1%20%2B%20i2%20*%20this.m_s2%20*%20this.m_s2%3B%0A%20%20%20%20%20%20%20%20var%20impulse1%20%3D%200%3B%0A%20%20%20%20%20%20%20%20if%20(k11%20!%3D%200.0)%20%7B%0A%20%20%20%20%20%20%20%20%20%20impulse1%20%3D%20-C1%20%2F%20k11%3B%0A%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20impulse1%20%3D%200.0%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20impulse.x%20%3D%20impulse1%3B%0A%20%20%20%20%20%20%20%20impulse.y%20%3D%200.0%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20var%20PX%20%3D%20impulse.x%20*%20this.m_perp.x%20%2B%20impulse.y%20*%20this.m_axis.x%3B%0A%20%20%20%20%20%20var%20PY%20%3D%20impulse.x%20*%20this.m_perp.y%20%2B%20impulse.y%20*%20this.m_axis.y%3B%0A%20%20%20%20%20%20var%20L1%20%3D%20impulse.x%20*%20this.m_s1%20%2B%20impulse.y%20*%20this.m_a1%3B%0A%20%20%20%20%20%20var%20L2%20%3D%20impulse.x%20*%20this.m_s2%20%2B%20impulse.y%20*%20this.m_a2%3B%0A%20%20%20%20%20%20c1.x%20-%3D%20this.m_invMassA%20*%20PX%3B%0A%20%20%20%20%20%20c1.y%20-%3D%20this.m_invMassA%20*%20PY%3B%0A%20%20%20%20%20%20a1%20-%3D%20this.m_invIA%20*%20L1%3B%0A%20%20%20%20%20%20c2.x%20%2B%3D%20this.m_invMassB%20*%20PX%3B%0A%20%20%20%20%20%20c2.y%20%2B%3D%20this.m_invMassB%20*%20PY%3B%0A%20%20%20%20%20%20a2%20%2B%3D%20this.m_invIB%20*%20L2%3B%0A%20%20%20%20%20%20bA.m_sweep.a%20%3D%20a1%3B%0A%20%20%20%20%20%20bB.m_sweep.a%20%3D%20a2%3B%0A%20%20%20%20%20%20bA.SynchronizeTransform()%3B%0A%20%20%20%20%20%20bB.SynchronizeTransform()%3B%0A%20%20%20%20%20%20return%20(%0A%20%20%20%20%20%20%20%20linearError%20%3C%3D%20b2Settings.b2_linearSlop%20%26%26%0A%20%20%20%20%20%20%20%20angularError%20%3C%3D%20b2Settings.b2_angularSlop%0A%20%20%20%20%20%20)%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20Box2D.inherit(b2LineJointDef%2C%20Box2D.Dynamics.Joints.b2JointDef)%3B%0A%20%20%20%20b2LineJointDef.prototype.__super%20%3D%0A%20%20%20%20%20%20Box2D.Dynamics.Joints.b2JointDef.prototype%3B%0A%20%20%20%20b2LineJointDef.b2LineJointDef%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20Box2D.Dynamics.Joints.b2JointDef.b2JointDef.apply(this%2C%20arguments)%3B%0A%20%20%20%20%20%20this.localAnchorA%20%3D%20new%20b2Vec2()%3B%0A%20%20%20%20%20%20this.localAnchorB%20%3D%20new%20b2Vec2()%3B%0A%20%20%20%20%20%20this.localAxisA%20%3D%20new%20b2Vec2()%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2LineJointDef.prototype.b2LineJointDef%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20this.__super.b2JointDef.call(this)%3B%0A%20%20%20%20%20%20this.type%20%3D%20b2Joint.e_lineJoint%3B%0A%20%20%20%20%20%20this.localAxisA.Set(1.0%2C%200.0)%3B%0A%20%20%20%20%20%20this.enableLimit%20%3D%20false%3B%0A%20%20%20%20%20%20this.lowerTranslation%20%3D%200.0%3B%0A%20%20%20%20%20%20this.upperTranslation%20%3D%200.0%3B%0A%20%20%20%20%20%20this.enableMotor%20%3D%20false%3B%0A%20%20%20%20%20%20this.maxMotorForce%20%3D%200.0%3B%0A%20%20%20%20%20%20this.motorSpeed%20%3D%200.0%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2LineJointDef.prototype.Initialize%20%3D%20function%20(bA%2C%20bB%2C%20anchor%2C%20axis)%20%7B%0A%20%20%20%20%20%20this.bodyA%20%3D%20bA%3B%0A%20%20%20%20%20%20this.bodyB%20%3D%20bB%3B%0A%20%20%20%20%20%20this.localAnchorA%20%3D%20this.bodyA.GetLocalPoint(anchor)%3B%0A%20%20%20%20%20%20this.localAnchorB%20%3D%20this.bodyB.GetLocalPoint(anchor)%3B%0A%20%20%20%20%20%20this.localAxisA%20%3D%20this.bodyA.GetLocalVector(axis)%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20Box2D.inherit(b2MouseJoint%2C%20Box2D.Dynamics.Joints.b2Joint)%3B%0A%20%20%20%20b2MouseJoint.prototype.__super%20%3D%20Box2D.Dynamics.Joints.b2Joint.prototype%3B%0A%20%20%20%20b2MouseJoint.b2MouseJoint%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20Box2D.Dynamics.Joints.b2Joint.b2Joint.apply(this%2C%20arguments)%3B%0A%20%20%20%20%20%20this.K%20%3D%20new%20b2Mat22()%3B%0A%20%20%20%20%20%20this.K1%20%3D%20new%20b2Mat22()%3B%0A%20%20%20%20%20%20this.K2%20%3D%20new%20b2Mat22()%3B%0A%20%20%20%20%20%20this.m_localAnchor%20%3D%20new%20b2Vec2()%3B%0A%20%20%20%20%20%20this.m_target%20%3D%20new%20b2Vec2()%3B%0A%20%20%20%20%20%20this.m_impulse%20%3D%20new%20b2Vec2()%3B%0A%20%20%20%20%20%20this.m_mass%20%3D%20new%20b2Mat22()%3B%0A%20%20%20%20%20%20this.m_C%20%3D%20new%20b2Vec2()%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2MouseJoint.prototype.GetAnchorA%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20return%20this.m_target%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2MouseJoint.prototype.GetAnchorB%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20return%20this.m_bodyB.GetWorldPoint(this.m_localAnchor)%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2MouseJoint.prototype.GetReactionForce%20%3D%20function%20(inv_dt)%20%7B%0A%20%20%20%20%20%20if%20(inv_dt%20%3D%3D%3D%20undefined)%20inv_dt%20%3D%200%3B%0A%20%20%20%20%20%20return%20new%20b2Vec2(inv_dt%20*%20this.m_impulse.x%2C%20inv_dt%20*%20this.m_impulse.y)%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2MouseJoint.prototype.GetReactionTorque%20%3D%20function%20(inv_dt)%20%7B%0A%20%20%20%20%20%20if%20(inv_dt%20%3D%3D%3D%20undefined)%20inv_dt%20%3D%200%3B%0A%20%20%20%20%20%20return%200.0%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2MouseJoint.prototype.GetTarget%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20return%20this.m_target%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2MouseJoint.prototype.SetTarget%20%3D%20function%20(target)%20%7B%0A%20%20%20%20%20%20if%20(this.m_bodyB.IsAwake()%20%3D%3D%20false)%20%7B%0A%20%20%20%20%20%20%20%20this.m_bodyB.SetAwake(true)%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20this.m_target%20%3D%20target%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2MouseJoint.prototype.GetMaxForce%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20return%20this.m_maxForce%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2MouseJoint.prototype.SetMaxForce%20%3D%20function%20(maxForce)%20%7B%0A%20%20%20%20%20%20if%20(maxForce%20%3D%3D%3D%20undefined)%20maxForce%20%3D%200%3B%0A%20%20%20%20%20%20this.m_maxForce%20%3D%20maxForce%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2MouseJoint.prototype.GetFrequency%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20return%20this.m_frequencyHz%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2MouseJoint.prototype.SetFrequency%20%3D%20function%20(hz)%20%7B%0A%20%20%20%20%20%20if%20(hz%20%3D%3D%3D%20undefined)%20hz%20%3D%200%3B%0A%20%20%20%20%20%20this.m_frequencyHz%20%3D%20hz%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2MouseJoint.prototype.GetDampingRatio%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20return%20this.m_dampingRatio%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2MouseJoint.prototype.SetDampingRatio%20%3D%20function%20(ratio)%20%7B%0A%20%20%20%20%20%20if%20(ratio%20%3D%3D%3D%20undefined)%20ratio%20%3D%200%3B%0A%20%20%20%20%20%20this.m_dampingRatio%20%3D%20ratio%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2MouseJoint.prototype.b2MouseJoint%20%3D%20function%20(def)%20%7B%0A%20%20%20%20%20%20this.__super.b2Joint.call(this%2C%20def)%3B%0A%20%20%20%20%20%20this.m_target.SetV(def.target)%3B%0A%20%20%20%20%20%20var%20tX%20%3D%20this.m_target.x%20-%20this.m_bodyB.m_xf.position.x%3B%0A%20%20%20%20%20%20var%20tY%20%3D%20this.m_target.y%20-%20this.m_bodyB.m_xf.position.y%3B%0A%20%20%20%20%20%20var%20tMat%20%3D%20this.m_bodyB.m_xf.R%3B%0A%20%20%20%20%20%20this.m_localAnchor.x%20%3D%20tX%20*%20tMat.col1.x%20%2B%20tY%20*%20tMat.col1.y%3B%0A%20%20%20%20%20%20this.m_localAnchor.y%20%3D%20tX%20*%20tMat.col2.x%20%2B%20tY%20*%20tMat.col2.y%3B%0A%20%20%20%20%20%20this.m_maxForce%20%3D%20def.maxForce%3B%0A%20%20%20%20%20%20this.m_impulse.SetZero()%3B%0A%20%20%20%20%20%20this.m_frequencyHz%20%3D%20def.frequencyHz%3B%0A%20%20%20%20%20%20this.m_dampingRatio%20%3D%20def.dampingRatio%3B%0A%20%20%20%20%20%20this.m_beta%20%3D%200.0%3B%0A%20%20%20%20%20%20this.m_gamma%20%3D%200.0%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2MouseJoint.prototype.InitVelocityConstraints%20%3D%20function%20(step)%20%7B%0A%20%20%20%20%20%20var%20b%20%3D%20this.m_bodyB%3B%0A%20%20%20%20%20%20var%20mass%20%3D%20b.GetMass()%3B%0A%20%20%20%20%20%20var%20omega%20%3D%202.0%20*%20Math.PI%20*%20this.m_frequencyHz%3B%0A%20%20%20%20%20%20var%20d%20%3D%202.0%20*%20mass%20*%20this.m_dampingRatio%20*%20omega%3B%0A%20%20%20%20%20%20var%20k%20%3D%20mass%20*%20omega%20*%20omega%3B%0A%20%20%20%20%20%20this.m_gamma%20%3D%20step.dt%20*%20(d%20%2B%20step.dt%20*%20k)%3B%0A%20%20%20%20%20%20this.m_gamma%20%3D%20this.m_gamma%20!%3D%200%20%3F%201%20%2F%20this.m_gamma%20%3A%200.0%3B%0A%20%20%20%20%20%20this.m_beta%20%3D%20step.dt%20*%20k%20*%20this.m_gamma%3B%0A%20%20%20%20%20%20var%20tMat%3B%0A%20%20%20%20%20%20tMat%20%3D%20b.m_xf.R%3B%0A%20%20%20%20%20%20var%20rX%20%3D%20this.m_localAnchor.x%20-%20b.m_sweep.localCenter.x%3B%0A%20%20%20%20%20%20var%20rY%20%3D%20this.m_localAnchor.y%20-%20b.m_sweep.localCenter.y%3B%0A%20%20%20%20%20%20var%20tX%20%3D%20tMat.col1.x%20*%20rX%20%2B%20tMat.col2.x%20*%20rY%3B%0A%20%20%20%20%20%20rY%20%3D%20tMat.col1.y%20*%20rX%20%2B%20tMat.col2.y%20*%20rY%3B%0A%20%20%20%20%20%20rX%20%3D%20tX%3B%0A%20%20%20%20%20%20var%20invMass%20%3D%20b.m_invMass%3B%0A%20%20%20%20%20%20var%20invI%20%3D%20b.m_invI%3B%0A%20%20%20%20%20%20this.K1.col1.x%20%3D%20invMass%3B%0A%20%20%20%20%20%20this.K1.col2.x%20%3D%200.0%3B%0A%20%20%20%20%20%20this.K1.col1.y%20%3D%200.0%3B%0A%20%20%20%20%20%20this.K1.col2.y%20%3D%20invMass%3B%0A%20%20%20%20%20%20this.K2.col1.x%20%3D%20invI%20*%20rY%20*%20rY%3B%0A%20%20%20%20%20%20this.K2.col2.x%20%3D%20-invI%20*%20rX%20*%20rY%3B%0A%20%20%20%20%20%20this.K2.col1.y%20%3D%20-invI%20*%20rX%20*%20rY%3B%0A%20%20%20%20%20%20this.K2.col2.y%20%3D%20invI%20*%20rX%20*%20rX%3B%0A%20%20%20%20%20%20this.K.SetM(this.K1)%3B%0A%20%20%20%20%20%20this.K.AddM(this.K2)%3B%0A%20%20%20%20%20%20this.K.col1.x%20%2B%3D%20this.m_gamma%3B%0A%20%20%20%20%20%20this.K.col2.y%20%2B%3D%20this.m_gamma%3B%0A%20%20%20%20%20%20this.K.GetInverse(this.m_mass)%3B%0A%20%20%20%20%20%20this.m_C.x%20%3D%20b.m_sweep.c.x%20%2B%20rX%20-%20this.m_target.x%3B%0A%20%20%20%20%20%20this.m_C.y%20%3D%20b.m_sweep.c.y%20%2B%20rY%20-%20this.m_target.y%3B%0A%20%20%20%20%20%20b.m_angularVelocity%20*%3D%200.98%3B%0A%20%20%20%20%20%20this.m_impulse.x%20*%3D%20step.dtRatio%3B%0A%20%20%20%20%20%20this.m_impulse.y%20*%3D%20step.dtRatio%3B%0A%20%20%20%20%20%20b.m_linearVelocity.x%20%2B%3D%20invMass%20*%20this.m_impulse.x%3B%0A%20%20%20%20%20%20b.m_linearVelocity.y%20%2B%3D%20invMass%20*%20this.m_impulse.y%3B%0A%20%20%20%20%20%20b.m_angularVelocity%20%2B%3D%0A%20%20%20%20%20%20%20%20invI%20*%20(rX%20*%20this.m_impulse.y%20-%20rY%20*%20this.m_impulse.x)%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2MouseJoint.prototype.SolveVelocityConstraints%20%3D%20function%20(step)%20%7B%0A%20%20%20%20%20%20var%20b%20%3D%20this.m_bodyB%3B%0A%20%20%20%20%20%20var%20tMat%3B%0A%20%20%20%20%20%20var%20tX%20%3D%200%3B%0A%20%20%20%20%20%20var%20tY%20%3D%200%3B%0A%20%20%20%20%20%20tMat%20%3D%20b.m_xf.R%3B%0A%20%20%20%20%20%20var%20rX%20%3D%20this.m_localAnchor.x%20-%20b.m_sweep.localCenter.x%3B%0A%20%20%20%20%20%20var%20rY%20%3D%20this.m_localAnchor.y%20-%20b.m_sweep.localCenter.y%3B%0A%20%20%20%20%20%20tX%20%3D%20tMat.col1.x%20*%20rX%20%2B%20tMat.col2.x%20*%20rY%3B%0A%20%20%20%20%20%20rY%20%3D%20tMat.col1.y%20*%20rX%20%2B%20tMat.col2.y%20*%20rY%3B%0A%20%20%20%20%20%20rX%20%3D%20tX%3B%0A%20%20%20%20%20%20var%20CdotX%20%3D%20b.m_linearVelocity.x%20%2B%20-b.m_angularVelocity%20*%20rY%3B%0A%20%20%20%20%20%20var%20CdotY%20%3D%20b.m_linearVelocity.y%20%2B%20b.m_angularVelocity%20*%20rX%3B%0A%20%20%20%20%20%20tMat%20%3D%20this.m_mass%3B%0A%20%20%20%20%20%20tX%20%3D%20CdotX%20%2B%20this.m_beta%20*%20this.m_C.x%20%2B%20this.m_gamma%20*%20this.m_impulse.x%3B%0A%20%20%20%20%20%20tY%20%3D%20CdotY%20%2B%20this.m_beta%20*%20this.m_C.y%20%2B%20this.m_gamma%20*%20this.m_impulse.y%3B%0A%20%20%20%20%20%20var%20impulseX%20%3D%20-(tMat.col1.x%20*%20tX%20%2B%20tMat.col2.x%20*%20tY)%3B%0A%20%20%20%20%20%20var%20impulseY%20%3D%20-(tMat.col1.y%20*%20tX%20%2B%20tMat.col2.y%20*%20tY)%3B%0A%20%20%20%20%20%20var%20oldImpulseX%20%3D%20this.m_impulse.x%3B%0A%20%20%20%20%20%20var%20oldImpulseY%20%3D%20this.m_impulse.y%3B%0A%20%20%20%20%20%20this.m_impulse.x%20%2B%3D%20impulseX%3B%0A%20%20%20%20%20%20this.m_impulse.y%20%2B%3D%20impulseY%3B%0A%20%20%20%20%20%20var%20maxImpulse%20%3D%20step.dt%20*%20this.m_maxForce%3B%0A%20%20%20%20%20%20if%20(this.m_impulse.LengthSquared()%20%3E%20maxImpulse%20*%20maxImpulse)%20%7B%0A%20%20%20%20%20%20%20%20this.m_impulse.Multiply(maxImpulse%20%2F%20this.m_impulse.Length())%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20impulseX%20%3D%20this.m_impulse.x%20-%20oldImpulseX%3B%0A%20%20%20%20%20%20impulseY%20%3D%20this.m_impulse.y%20-%20oldImpulseY%3B%0A%20%20%20%20%20%20b.m_linearVelocity.x%20%2B%3D%20b.m_invMass%20*%20impulseX%3B%0A%20%20%20%20%20%20b.m_linearVelocity.y%20%2B%3D%20b.m_invMass%20*%20impulseY%3B%0A%20%20%20%20%20%20b.m_angularVelocity%20%2B%3D%20b.m_invI%20*%20(rX%20*%20impulseY%20-%20rY%20*%20impulseX)%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2MouseJoint.prototype.SolvePositionConstraints%20%3D%20function%20(baumgarte)%20%7B%0A%20%20%20%20%20%20if%20(baumgarte%20%3D%3D%3D%20undefined)%20baumgarte%20%3D%200%3B%0A%20%20%20%20%20%20return%20true%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20Box2D.inherit(b2MouseJointDef%2C%20Box2D.Dynamics.Joints.b2JointDef)%3B%0A%20%20%20%20b2MouseJointDef.prototype.__super%20%3D%0A%20%20%20%20%20%20Box2D.Dynamics.Joints.b2JointDef.prototype%3B%0A%20%20%20%20b2MouseJointDef.b2MouseJointDef%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20Box2D.Dynamics.Joints.b2JointDef.b2JointDef.apply(this%2C%20arguments)%3B%0A%20%20%20%20%20%20this.target%20%3D%20new%20b2Vec2()%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2MouseJointDef.prototype.b2MouseJointDef%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20this.__super.b2JointDef.call(this)%3B%0A%20%20%20%20%20%20this.type%20%3D%20b2Joint.e_mouseJoint%3B%0A%20%20%20%20%20%20this.maxForce%20%3D%200.0%3B%0A%20%20%20%20%20%20this.frequencyHz%20%3D%205.0%3B%0A%20%20%20%20%20%20this.dampingRatio%20%3D%200.7%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20Box2D.inherit(b2PrismaticJoint%2C%20Box2D.Dynamics.Joints.b2Joint)%3B%0A%20%20%20%20b2PrismaticJoint.prototype.__super%20%3D%0A%20%20%20%20%20%20Box2D.Dynamics.Joints.b2Joint.prototype%3B%0A%20%20%20%20b2PrismaticJoint.b2PrismaticJoint%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20Box2D.Dynamics.Joints.b2Joint.b2Joint.apply(this%2C%20arguments)%3B%0A%20%20%20%20%20%20this.m_localAnchor1%20%3D%20new%20b2Vec2()%3B%0A%20%20%20%20%20%20this.m_localAnchor2%20%3D%20new%20b2Vec2()%3B%0A%20%20%20%20%20%20this.m_localXAxis1%20%3D%20new%20b2Vec2()%3B%0A%20%20%20%20%20%20this.m_localYAxis1%20%3D%20new%20b2Vec2()%3B%0A%20%20%20%20%20%20this.m_axis%20%3D%20new%20b2Vec2()%3B%0A%20%20%20%20%20%20this.m_perp%20%3D%20new%20b2Vec2()%3B%0A%20%20%20%20%20%20this.m_K%20%3D%20new%20b2Mat33()%3B%0A%20%20%20%20%20%20this.m_impulse%20%3D%20new%20b2Vec3()%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2PrismaticJoint.prototype.GetAnchorA%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20return%20this.m_bodyA.GetWorldPoint(this.m_localAnchor1)%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2PrismaticJoint.prototype.GetAnchorB%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20return%20this.m_bodyB.GetWorldPoint(this.m_localAnchor2)%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2PrismaticJoint.prototype.GetReactionForce%20%3D%20function%20(inv_dt)%20%7B%0A%20%20%20%20%20%20if%20(inv_dt%20%3D%3D%3D%20undefined)%20inv_dt%20%3D%200%3B%0A%20%20%20%20%20%20return%20new%20b2Vec2(%0A%20%20%20%20%20%20%20%20inv_dt%20*%0A%20%20%20%20%20%20%20%20%20%20(this.m_impulse.x%20*%20this.m_perp.x%20%2B%0A%20%20%20%20%20%20%20%20%20%20%20%20(this.m_motorImpulse%20%2B%20this.m_impulse.z)%20*%20this.m_axis.x)%2C%0A%20%20%20%20%20%20%20%20inv_dt%20*%0A%20%20%20%20%20%20%20%20%20%20(this.m_impulse.x%20*%20this.m_perp.y%20%2B%0A%20%20%20%20%20%20%20%20%20%20%20%20(this.m_motorImpulse%20%2B%20this.m_impulse.z)%20*%20this.m_axis.y)%0A%20%20%20%20%20%20)%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2PrismaticJoint.prototype.GetReactionTorque%20%3D%20function%20(inv_dt)%20%7B%0A%20%20%20%20%20%20if%20(inv_dt%20%3D%3D%3D%20undefined)%20inv_dt%20%3D%200%3B%0A%20%20%20%20%20%20return%20inv_dt%20*%20this.m_impulse.y%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2PrismaticJoint.prototype.GetJointTranslation%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20var%20bA%20%3D%20this.m_bodyA%3B%0A%20%20%20%20%20%20var%20bB%20%3D%20this.m_bodyB%3B%0A%20%20%20%20%20%20var%20tMat%3B%0A%20%20%20%20%20%20var%20p1%20%3D%20bA.GetWorldPoint(this.m_localAnchor1)%3B%0A%20%20%20%20%20%20var%20p2%20%3D%20bB.GetWorldPoint(this.m_localAnchor2)%3B%0A%20%20%20%20%20%20var%20dX%20%3D%20p2.x%20-%20p1.x%3B%0A%20%20%20%20%20%20var%20dY%20%3D%20p2.y%20-%20p1.y%3B%0A%20%20%20%20%20%20var%20axis%20%3D%20bA.GetWorldVector(this.m_localXAxis1)%3B%0A%20%20%20%20%20%20var%20translation%20%3D%20axis.x%20*%20dX%20%2B%20axis.y%20*%20dY%3B%0A%20%20%20%20%20%20return%20translation%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2PrismaticJoint.prototype.GetJointSpeed%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20var%20bA%20%3D%20this.m_bodyA%3B%0A%20%20%20%20%20%20var%20bB%20%3D%20this.m_bodyB%3B%0A%20%20%20%20%20%20var%20tMat%3B%0A%20%20%20%20%20%20tMat%20%3D%20bA.m_xf.R%3B%0A%20%20%20%20%20%20var%20r1X%20%3D%20this.m_localAnchor1.x%20-%20bA.m_sweep.localCenter.x%3B%0A%20%20%20%20%20%20var%20r1Y%20%3D%20this.m_localAnchor1.y%20-%20bA.m_sweep.localCenter.y%3B%0A%20%20%20%20%20%20var%20tX%20%3D%20tMat.col1.x%20*%20r1X%20%2B%20tMat.col2.x%20*%20r1Y%3B%0A%20%20%20%20%20%20r1Y%20%3D%20tMat.col1.y%20*%20r1X%20%2B%20tMat.col2.y%20*%20r1Y%3B%0A%20%20%20%20%20%20r1X%20%3D%20tX%3B%0A%20%20%20%20%20%20tMat%20%3D%20bB.m_xf.R%3B%0A%20%20%20%20%20%20var%20r2X%20%3D%20this.m_localAnchor2.x%20-%20bB.m_sweep.localCenter.x%3B%0A%20%20%20%20%20%20var%20r2Y%20%3D%20this.m_localAnchor2.y%20-%20bB.m_sweep.localCenter.y%3B%0A%20%20%20%20%20%20tX%20%3D%20tMat.col1.x%20*%20r2X%20%2B%20tMat.col2.x%20*%20r2Y%3B%0A%20%20%20%20%20%20r2Y%20%3D%20tMat.col1.y%20*%20r2X%20%2B%20tMat.col2.y%20*%20r2Y%3B%0A%20%20%20%20%20%20r2X%20%3D%20tX%3B%0A%20%20%20%20%20%20var%20p1X%20%3D%20bA.m_sweep.c.x%20%2B%20r1X%3B%0A%20%20%20%20%20%20var%20p1Y%20%3D%20bA.m_sweep.c.y%20%2B%20r1Y%3B%0A%20%20%20%20%20%20var%20p2X%20%3D%20bB.m_sweep.c.x%20%2B%20r2X%3B%0A%20%20%20%20%20%20var%20p2Y%20%3D%20bB.m_sweep.c.y%20%2B%20r2Y%3B%0A%20%20%20%20%20%20var%20dX%20%3D%20p2X%20-%20p1X%3B%0A%20%20%20%20%20%20var%20dY%20%3D%20p2Y%20-%20p1Y%3B%0A%20%20%20%20%20%20var%20axis%20%3D%20bA.GetWorldVector(this.m_localXAxis1)%3B%0A%20%20%20%20%20%20var%20v1%20%3D%20bA.m_linearVelocity%3B%0A%20%20%20%20%20%20var%20v2%20%3D%20bB.m_linearVelocity%3B%0A%20%20%20%20%20%20var%20w1%20%3D%20bA.m_angularVelocity%3B%0A%20%20%20%20%20%20var%20w2%20%3D%20bB.m_angularVelocity%3B%0A%20%20%20%20%20%20var%20speed%20%3D%0A%20%20%20%20%20%20%20%20dX%20*%20(-w1%20*%20axis.y)%20%2B%0A%20%20%20%20%20%20%20%20dY%20*%20(w1%20*%20axis.x)%20%2B%0A%20%20%20%20%20%20%20%20(axis.x%20*%20(v2.x%20%2B%20-w2%20*%20r2Y%20-%20v1.x%20-%20-w1%20*%20r1Y)%20%2B%0A%20%20%20%20%20%20%20%20%20%20axis.y%20*%20(v2.y%20%2B%20w2%20*%20r2X%20-%20v1.y%20-%20w1%20*%20r1X))%3B%0A%20%20%20%20%20%20return%20speed%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2PrismaticJoint.prototype.IsLimitEnabled%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20return%20this.m_enableLimit%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2PrismaticJoint.prototype.EnableLimit%20%3D%20function%20(flag)%20%7B%0A%20%20%20%20%20%20this.m_bodyA.SetAwake(true)%3B%0A%20%20%20%20%20%20this.m_bodyB.SetAwake(true)%3B%0A%20%20%20%20%20%20this.m_enableLimit%20%3D%20flag%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2PrismaticJoint.prototype.GetLowerLimit%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20return%20this.m_lowerTranslation%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2PrismaticJoint.prototype.GetUpperLimit%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20return%20this.m_upperTranslation%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2PrismaticJoint.prototype.SetLimits%20%3D%20function%20(lower%2C%20upper)%20%7B%0A%20%20%20%20%20%20if%20(lower%20%3D%3D%3D%20undefined)%20lower%20%3D%200%3B%0A%20%20%20%20%20%20if%20(upper%20%3D%3D%3D%20undefined)%20upper%20%3D%200%3B%0A%20%20%20%20%20%20this.m_bodyA.SetAwake(true)%3B%0A%20%20%20%20%20%20this.m_bodyB.SetAwake(true)%3B%0A%20%20%20%20%20%20this.m_lowerTranslation%20%3D%20lower%3B%0A%20%20%20%20%20%20this.m_upperTranslation%20%3D%20upper%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2PrismaticJoint.prototype.IsMotorEnabled%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20return%20this.m_enableMotor%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2PrismaticJoint.prototype.EnableMotor%20%3D%20function%20(flag)%20%7B%0A%20%20%20%20%20%20this.m_bodyA.SetAwake(true)%3B%0A%20%20%20%20%20%20this.m_bodyB.SetAwake(true)%3B%0A%20%20%20%20%20%20this.m_enableMotor%20%3D%20flag%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2PrismaticJoint.prototype.SetMotorSpeed%20%3D%20function%20(speed)%20%7B%0A%20%20%20%20%20%20if%20(speed%20%3D%3D%3D%20undefined)%20speed%20%3D%200%3B%0A%20%20%20%20%20%20this.m_bodyA.SetAwake(true)%3B%0A%20%20%20%20%20%20this.m_bodyB.SetAwake(true)%3B%0A%20%20%20%20%20%20this.m_motorSpeed%20%3D%20speed%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2PrismaticJoint.prototype.GetMotorSpeed%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20return%20this.m_motorSpeed%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2PrismaticJoint.prototype.SetMaxMotorForce%20%3D%20function%20(force)%20%7B%0A%20%20%20%20%20%20if%20(force%20%3D%3D%3D%20undefined)%20force%20%3D%200%3B%0A%20%20%20%20%20%20this.m_bodyA.SetAwake(true)%3B%0A%20%20%20%20%20%20this.m_bodyB.SetAwake(true)%3B%0A%20%20%20%20%20%20this.m_maxMotorForce%20%3D%20force%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2PrismaticJoint.prototype.GetMotorForce%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20return%20this.m_motorImpulse%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2PrismaticJoint.prototype.b2PrismaticJoint%20%3D%20function%20(def)%20%7B%0A%20%20%20%20%20%20this.__super.b2Joint.call(this%2C%20def)%3B%0A%20%20%20%20%20%20var%20tMat%3B%0A%20%20%20%20%20%20var%20tX%20%3D%200%3B%0A%20%20%20%20%20%20var%20tY%20%3D%200%3B%0A%20%20%20%20%20%20this.m_localAnchor1.SetV(def.localAnchorA)%3B%0A%20%20%20%20%20%20this.m_localAnchor2.SetV(def.localAnchorB)%3B%0A%20%20%20%20%20%20this.m_localXAxis1.SetV(def.localAxisA)%3B%0A%20%20%20%20%20%20this.m_localYAxis1.x%20%3D%20-this.m_localXAxis1.y%3B%0A%20%20%20%20%20%20this.m_localYAxis1.y%20%3D%20this.m_localXAxis1.x%3B%0A%20%20%20%20%20%20this.m_refAngle%20%3D%20def.referenceAngle%3B%0A%20%20%20%20%20%20this.m_impulse.SetZero()%3B%0A%20%20%20%20%20%20this.m_motorMass%20%3D%200.0%3B%0A%20%20%20%20%20%20this.m_motorImpulse%20%3D%200.0%3B%0A%20%20%20%20%20%20this.m_lowerTranslation%20%3D%20def.lowerTranslation%3B%0A%20%20%20%20%20%20this.m_upperTranslation%20%3D%20def.upperTranslation%3B%0A%20%20%20%20%20%20this.m_maxMotorForce%20%3D%20def.maxMotorForce%3B%0A%20%20%20%20%20%20this.m_motorSpeed%20%3D%20def.motorSpeed%3B%0A%20%20%20%20%20%20this.m_enableLimit%20%3D%20def.enableLimit%3B%0A%20%20%20%20%20%20this.m_enableMotor%20%3D%20def.enableMotor%3B%0A%20%20%20%20%20%20this.m_limitState%20%3D%20b2Joint.e_inactiveLimit%3B%0A%20%20%20%20%20%20this.m_axis.SetZero()%3B%0A%20%20%20%20%20%20this.m_perp.SetZero()%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2PrismaticJoint.prototype.InitVelocityConstraints%20%3D%20function%20(step)%20%7B%0A%20%20%20%20%20%20var%20bA%20%3D%20this.m_bodyA%3B%0A%20%20%20%20%20%20var%20bB%20%3D%20this.m_bodyB%3B%0A%20%20%20%20%20%20var%20tMat%3B%0A%20%20%20%20%20%20var%20tX%20%3D%200%3B%0A%20%20%20%20%20%20this.m_localCenterA.SetV(bA.GetLocalCenter())%3B%0A%20%20%20%20%20%20this.m_localCenterB.SetV(bB.GetLocalCenter())%3B%0A%20%20%20%20%20%20var%20xf1%20%3D%20bA.GetTransform()%3B%0A%20%20%20%20%20%20var%20xf2%20%3D%20bB.GetTransform()%3B%0A%20%20%20%20%20%20tMat%20%3D%20bA.m_xf.R%3B%0A%20%20%20%20%20%20var%20r1X%20%3D%20this.m_localAnchor1.x%20-%20this.m_localCenterA.x%3B%0A%20%20%20%20%20%20var%20r1Y%20%3D%20this.m_localAnchor1.y%20-%20this.m_localCenterA.y%3B%0A%20%20%20%20%20%20tX%20%3D%20tMat.col1.x%20*%20r1X%20%2B%20tMat.col2.x%20*%20r1Y%3B%0A%20%20%20%20%20%20r1Y%20%3D%20tMat.col1.y%20*%20r1X%20%2B%20tMat.col2.y%20*%20r1Y%3B%0A%20%20%20%20%20%20r1X%20%3D%20tX%3B%0A%20%20%20%20%20%20tMat%20%3D%20bB.m_xf.R%3B%0A%20%20%20%20%20%20var%20r2X%20%3D%20this.m_localAnchor2.x%20-%20this.m_localCenterB.x%3B%0A%20%20%20%20%20%20var%20r2Y%20%3D%20this.m_localAnchor2.y%20-%20this.m_localCenterB.y%3B%0A%20%20%20%20%20%20tX%20%3D%20tMat.col1.x%20*%20r2X%20%2B%20tMat.col2.x%20*%20r2Y%3B%0A%20%20%20%20%20%20r2Y%20%3D%20tMat.col1.y%20*%20r2X%20%2B%20tMat.col2.y%20*%20r2Y%3B%0A%20%20%20%20%20%20r2X%20%3D%20tX%3B%0A%20%20%20%20%20%20var%20dX%20%3D%20bB.m_sweep.c.x%20%2B%20r2X%20-%20bA.m_sweep.c.x%20-%20r1X%3B%0A%20%20%20%20%20%20var%20dY%20%3D%20bB.m_sweep.c.y%20%2B%20r2Y%20-%20bA.m_sweep.c.y%20-%20r1Y%3B%0A%20%20%20%20%20%20this.m_invMassA%20%3D%20bA.m_invMass%3B%0A%20%20%20%20%20%20this.m_invMassB%20%3D%20bB.m_invMass%3B%0A%20%20%20%20%20%20this.m_invIA%20%3D%20bA.m_invI%3B%0A%20%20%20%20%20%20this.m_invIB%20%3D%20bB.m_invI%3B%0A%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20this.m_axis.SetV(b2Math.MulMV(xf1.R%2C%20this.m_localXAxis1))%3B%0A%20%20%20%20%20%20%20%20this.m_a1%20%3D%20(dX%20%2B%20r1X)%20*%20this.m_axis.y%20-%20(dY%20%2B%20r1Y)%20*%20this.m_axis.x%3B%0A%20%20%20%20%20%20%20%20this.m_a2%20%3D%20r2X%20*%20this.m_axis.y%20-%20r2Y%20*%20this.m_axis.x%3B%0A%20%20%20%20%20%20%20%20this.m_motorMass%20%3D%0A%20%20%20%20%20%20%20%20%20%20this.m_invMassA%20%2B%0A%20%20%20%20%20%20%20%20%20%20this.m_invMassB%20%2B%0A%20%20%20%20%20%20%20%20%20%20this.m_invIA%20*%20this.m_a1%20*%20this.m_a1%20%2B%0A%20%20%20%20%20%20%20%20%20%20this.m_invIB%20*%20this.m_a2%20*%20this.m_a2%3B%0A%20%20%20%20%20%20%20%20if%20(this.m_motorMass%20%3E%20Number.MIN_VALUE)%0A%20%20%20%20%20%20%20%20%20%20this.m_motorMass%20%3D%201.0%20%2F%20this.m_motorMass%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20this.m_perp.SetV(b2Math.MulMV(xf1.R%2C%20this.m_localYAxis1))%3B%0A%20%20%20%20%20%20%20%20this.m_s1%20%3D%20(dX%20%2B%20r1X)%20*%20this.m_perp.y%20-%20(dY%20%2B%20r1Y)%20*%20this.m_perp.x%3B%0A%20%20%20%20%20%20%20%20this.m_s2%20%3D%20r2X%20*%20this.m_perp.y%20-%20r2Y%20*%20this.m_perp.x%3B%0A%20%20%20%20%20%20%20%20var%20m1%20%3D%20this.m_invMassA%3B%0A%20%20%20%20%20%20%20%20var%20m2%20%3D%20this.m_invMassB%3B%0A%20%20%20%20%20%20%20%20var%20i1%20%3D%20this.m_invIA%3B%0A%20%20%20%20%20%20%20%20var%20i2%20%3D%20this.m_invIB%3B%0A%20%20%20%20%20%20%20%20this.m_K.col1.x%20%3D%0A%20%20%20%20%20%20%20%20%20%20m1%20%2B%20m2%20%2B%20i1%20*%20this.m_s1%20*%20this.m_s1%20%2B%20i2%20*%20this.m_s2%20*%20this.m_s2%3B%0A%20%20%20%20%20%20%20%20this.m_K.col1.y%20%3D%20i1%20*%20this.m_s1%20%2B%20i2%20*%20this.m_s2%3B%0A%20%20%20%20%20%20%20%20this.m_K.col1.z%20%3D%0A%20%20%20%20%20%20%20%20%20%20i1%20*%20this.m_s1%20*%20this.m_a1%20%2B%20i2%20*%20this.m_s2%20*%20this.m_a2%3B%0A%20%20%20%20%20%20%20%20this.m_K.col2.x%20%3D%20this.m_K.col1.y%3B%0A%20%20%20%20%20%20%20%20this.m_K.col2.y%20%3D%20i1%20%2B%20i2%3B%0A%20%20%20%20%20%20%20%20this.m_K.col2.z%20%3D%20i1%20*%20this.m_a1%20%2B%20i2%20*%20this.m_a2%3B%0A%20%20%20%20%20%20%20%20this.m_K.col3.x%20%3D%20this.m_K.col1.z%3B%0A%20%20%20%20%20%20%20%20this.m_K.col3.y%20%3D%20this.m_K.col2.z%3B%0A%20%20%20%20%20%20%20%20this.m_K.col3.z%20%3D%0A%20%20%20%20%20%20%20%20%20%20m1%20%2B%20m2%20%2B%20i1%20*%20this.m_a1%20*%20this.m_a1%20%2B%20i2%20*%20this.m_a2%20*%20this.m_a2%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20if%20(this.m_enableLimit)%20%7B%0A%20%20%20%20%20%20%20%20var%20jointTransition%20%3D%20this.m_axis.x%20*%20dX%20%2B%20this.m_axis.y%20*%20dY%3B%0A%20%20%20%20%20%20%20%20if%20(%0A%20%20%20%20%20%20%20%20%20%20b2Math.Abs(this.m_upperTranslation%20-%20this.m_lowerTranslation)%20%3C%0A%20%20%20%20%20%20%20%20%20%202.0%20*%20b2Settings.b2_linearSlop%0A%20%20%20%20%20%20%20%20)%20%7B%0A%20%20%20%20%20%20%20%20%20%20this.m_limitState%20%3D%20b2Joint.e_equalLimits%3B%0A%20%20%20%20%20%20%20%20%7D%20else%20if%20(jointTransition%20%3C%3D%20this.m_lowerTranslation)%20%7B%0A%20%20%20%20%20%20%20%20%20%20if%20(this.m_limitState%20!%3D%20b2Joint.e_atLowerLimit)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20this.m_limitState%20%3D%20b2Joint.e_atLowerLimit%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20this.m_impulse.z%20%3D%200.0%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%20else%20if%20(jointTransition%20%3E%3D%20this.m_upperTranslation)%20%7B%0A%20%20%20%20%20%20%20%20%20%20if%20(this.m_limitState%20!%3D%20b2Joint.e_atUpperLimit)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20this.m_limitState%20%3D%20b2Joint.e_atUpperLimit%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20this.m_impulse.z%20%3D%200.0%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20this.m_limitState%20%3D%20b2Joint.e_inactiveLimit%3B%0A%20%20%20%20%20%20%20%20%20%20this.m_impulse.z%20%3D%200.0%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20this.m_limitState%20%3D%20b2Joint.e_inactiveLimit%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20if%20(this.m_enableMotor%20%3D%3D%20false)%20%7B%0A%20%20%20%20%20%20%20%20this.m_motorImpulse%20%3D%200.0%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20if%20(step.warmStarting)%20%7B%0A%20%20%20%20%20%20%20%20this.m_impulse.x%20*%3D%20step.dtRatio%3B%0A%20%20%20%20%20%20%20%20this.m_impulse.y%20*%3D%20step.dtRatio%3B%0A%20%20%20%20%20%20%20%20this.m_motorImpulse%20*%3D%20step.dtRatio%3B%0A%20%20%20%20%20%20%20%20var%20PX%20%3D%0A%20%20%20%20%20%20%20%20%20%20this.m_impulse.x%20*%20this.m_perp.x%20%2B%0A%20%20%20%20%20%20%20%20%20%20(this.m_motorImpulse%20%2B%20this.m_impulse.z)%20*%20this.m_axis.x%3B%0A%20%20%20%20%20%20%20%20var%20PY%20%3D%0A%20%20%20%20%20%20%20%20%20%20this.m_impulse.x%20*%20this.m_perp.y%20%2B%0A%20%20%20%20%20%20%20%20%20%20(this.m_motorImpulse%20%2B%20this.m_impulse.z)%20*%20this.m_axis.y%3B%0A%20%20%20%20%20%20%20%20var%20L1%20%3D%0A%20%20%20%20%20%20%20%20%20%20this.m_impulse.x%20*%20this.m_s1%20%2B%0A%20%20%20%20%20%20%20%20%20%20this.m_impulse.y%20%2B%0A%20%20%20%20%20%20%20%20%20%20(this.m_motorImpulse%20%2B%20this.m_impulse.z)%20*%20this.m_a1%3B%0A%20%20%20%20%20%20%20%20var%20L2%20%3D%0A%20%20%20%20%20%20%20%20%20%20this.m_impulse.x%20*%20this.m_s2%20%2B%0A%20%20%20%20%20%20%20%20%20%20this.m_impulse.y%20%2B%0A%20%20%20%20%20%20%20%20%20%20(this.m_motorImpulse%20%2B%20this.m_impulse.z)%20*%20this.m_a2%3B%0A%20%20%20%20%20%20%20%20bA.m_linearVelocity.x%20-%3D%20this.m_invMassA%20*%20PX%3B%0A%20%20%20%20%20%20%20%20bA.m_linearVelocity.y%20-%3D%20this.m_invMassA%20*%20PY%3B%0A%20%20%20%20%20%20%20%20bA.m_angularVelocity%20-%3D%20this.m_invIA%20*%20L1%3B%0A%20%20%20%20%20%20%20%20bB.m_linearVelocity.x%20%2B%3D%20this.m_invMassB%20*%20PX%3B%0A%20%20%20%20%20%20%20%20bB.m_linearVelocity.y%20%2B%3D%20this.m_invMassB%20*%20PY%3B%0A%20%20%20%20%20%20%20%20bB.m_angularVelocity%20%2B%3D%20this.m_invIB%20*%20L2%3B%0A%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20this.m_impulse.SetZero()%3B%0A%20%20%20%20%20%20%20%20this.m_motorImpulse%20%3D%200.0%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2PrismaticJoint.prototype.SolveVelocityConstraints%20%3D%20function%20(step)%20%7B%0A%20%20%20%20%20%20var%20bA%20%3D%20this.m_bodyA%3B%0A%20%20%20%20%20%20var%20bB%20%3D%20this.m_bodyB%3B%0A%20%20%20%20%20%20var%20v1%20%3D%20bA.m_linearVelocity%3B%0A%20%20%20%20%20%20var%20w1%20%3D%20bA.m_angularVelocity%3B%0A%20%20%20%20%20%20var%20v2%20%3D%20bB.m_linearVelocity%3B%0A%20%20%20%20%20%20var%20w2%20%3D%20bB.m_angularVelocity%3B%0A%20%20%20%20%20%20var%20PX%20%3D%200%3B%0A%20%20%20%20%20%20var%20PY%20%3D%200%3B%0A%20%20%20%20%20%20var%20L1%20%3D%200%3B%0A%20%20%20%20%20%20var%20L2%20%3D%200%3B%0A%20%20%20%20%20%20if%20(this.m_enableMotor%20%26%26%20this.m_limitState%20!%3D%20b2Joint.e_equalLimits)%20%7B%0A%20%20%20%20%20%20%20%20var%20Cdot%20%3D%0A%20%20%20%20%20%20%20%20%20%20this.m_axis.x%20*%20(v2.x%20-%20v1.x)%20%2B%0A%20%20%20%20%20%20%20%20%20%20this.m_axis.y%20*%20(v2.y%20-%20v1.y)%20%2B%0A%20%20%20%20%20%20%20%20%20%20this.m_a2%20*%20w2%20-%0A%20%20%20%20%20%20%20%20%20%20this.m_a1%20*%20w1%3B%0A%20%20%20%20%20%20%20%20var%20impulse%20%3D%20this.m_motorMass%20*%20(this.m_motorSpeed%20-%20Cdot)%3B%0A%20%20%20%20%20%20%20%20var%20oldImpulse%20%3D%20this.m_motorImpulse%3B%0A%20%20%20%20%20%20%20%20var%20maxImpulse%20%3D%20step.dt%20*%20this.m_maxMotorForce%3B%0A%20%20%20%20%20%20%20%20this.m_motorImpulse%20%3D%20b2Math.Clamp(%0A%20%20%20%20%20%20%20%20%20%20this.m_motorImpulse%20%2B%20impulse%2C%0A%20%20%20%20%20%20%20%20%20%20-maxImpulse%2C%0A%20%20%20%20%20%20%20%20%20%20maxImpulse%0A%20%20%20%20%20%20%20%20)%3B%0A%20%20%20%20%20%20%20%20impulse%20%3D%20this.m_motorImpulse%20-%20oldImpulse%3B%0A%20%20%20%20%20%20%20%20PX%20%3D%20impulse%20*%20this.m_axis.x%3B%0A%20%20%20%20%20%20%20%20PY%20%3D%20impulse%20*%20this.m_axis.y%3B%0A%20%20%20%20%20%20%20%20L1%20%3D%20impulse%20*%20this.m_a1%3B%0A%20%20%20%20%20%20%20%20L2%20%3D%20impulse%20*%20this.m_a2%3B%0A%20%20%20%20%20%20%20%20v1.x%20-%3D%20this.m_invMassA%20*%20PX%3B%0A%20%20%20%20%20%20%20%20v1.y%20-%3D%20this.m_invMassA%20*%20PY%3B%0A%20%20%20%20%20%20%20%20w1%20-%3D%20this.m_invIA%20*%20L1%3B%0A%20%20%20%20%20%20%20%20v2.x%20%2B%3D%20this.m_invMassB%20*%20PX%3B%0A%20%20%20%20%20%20%20%20v2.y%20%2B%3D%20this.m_invMassB%20*%20PY%3B%0A%20%20%20%20%20%20%20%20w2%20%2B%3D%20this.m_invIB%20*%20L2%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20var%20Cdot1X%20%3D%0A%20%20%20%20%20%20%20%20this.m_perp.x%20*%20(v2.x%20-%20v1.x)%20%2B%0A%20%20%20%20%20%20%20%20this.m_perp.y%20*%20(v2.y%20-%20v1.y)%20%2B%0A%20%20%20%20%20%20%20%20this.m_s2%20*%20w2%20-%0A%20%20%20%20%20%20%20%20this.m_s1%20*%20w1%3B%0A%20%20%20%20%20%20var%20Cdot1Y%20%3D%20w2%20-%20w1%3B%0A%20%20%20%20%20%20if%20(this.m_enableLimit%20%26%26%20this.m_limitState%20!%3D%20b2Joint.e_inactiveLimit)%20%7B%0A%20%20%20%20%20%20%20%20var%20Cdot2%20%3D%0A%20%20%20%20%20%20%20%20%20%20this.m_axis.x%20*%20(v2.x%20-%20v1.x)%20%2B%0A%20%20%20%20%20%20%20%20%20%20this.m_axis.y%20*%20(v2.y%20-%20v1.y)%20%2B%0A%20%20%20%20%20%20%20%20%20%20this.m_a2%20*%20w2%20-%0A%20%20%20%20%20%20%20%20%20%20this.m_a1%20*%20w1%3B%0A%20%20%20%20%20%20%20%20var%20f1%20%3D%20this.m_impulse.Copy()%3B%0A%20%20%20%20%20%20%20%20var%20df%20%3D%20this.m_K.Solve33(new%20b2Vec3()%2C%20-Cdot1X%2C%20-Cdot1Y%2C%20-Cdot2)%3B%0A%20%20%20%20%20%20%20%20this.m_impulse.Add(df)%3B%0A%20%20%20%20%20%20%20%20if%20(this.m_limitState%20%3D%3D%20b2Joint.e_atLowerLimit)%20%7B%0A%20%20%20%20%20%20%20%20%20%20this.m_impulse.z%20%3D%20b2Math.Max(this.m_impulse.z%2C%200.0)%3B%0A%20%20%20%20%20%20%20%20%7D%20else%20if%20(this.m_limitState%20%3D%3D%20b2Joint.e_atUpperLimit)%20%7B%0A%20%20%20%20%20%20%20%20%20%20this.m_impulse.z%20%3D%20b2Math.Min(this.m_impulse.z%2C%200.0)%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20var%20bX%20%3D%20-Cdot1X%20-%20(this.m_impulse.z%20-%20f1.z)%20*%20this.m_K.col3.x%3B%0A%20%20%20%20%20%20%20%20var%20bY%20%3D%20-Cdot1Y%20-%20(this.m_impulse.z%20-%20f1.z)%20*%20this.m_K.col3.y%3B%0A%20%20%20%20%20%20%20%20var%20f2r%20%3D%20this.m_K.Solve22(new%20b2Vec2()%2C%20bX%2C%20bY)%3B%0A%20%20%20%20%20%20%20%20f2r.x%20%2B%3D%20f1.x%3B%0A%20%20%20%20%20%20%20%20f2r.y%20%2B%3D%20f1.y%3B%0A%20%20%20%20%20%20%20%20this.m_impulse.x%20%3D%20f2r.x%3B%0A%20%20%20%20%20%20%20%20this.m_impulse.y%20%3D%20f2r.y%3B%0A%20%20%20%20%20%20%20%20df.x%20%3D%20this.m_impulse.x%20-%20f1.x%3B%0A%20%20%20%20%20%20%20%20df.y%20%3D%20this.m_impulse.y%20-%20f1.y%3B%0A%20%20%20%20%20%20%20%20df.z%20%3D%20this.m_impulse.z%20-%20f1.z%3B%0A%20%20%20%20%20%20%20%20PX%20%3D%20df.x%20*%20this.m_perp.x%20%2B%20df.z%20*%20this.m_axis.x%3B%0A%20%20%20%20%20%20%20%20PY%20%3D%20df.x%20*%20this.m_perp.y%20%2B%20df.z%20*%20this.m_axis.y%3B%0A%20%20%20%20%20%20%20%20L1%20%3D%20df.x%20*%20this.m_s1%20%2B%20df.y%20%2B%20df.z%20*%20this.m_a1%3B%0A%20%20%20%20%20%20%20%20L2%20%3D%20df.x%20*%20this.m_s2%20%2B%20df.y%20%2B%20df.z%20*%20this.m_a2%3B%0A%20%20%20%20%20%20%20%20v1.x%20-%3D%20this.m_invMassA%20*%20PX%3B%0A%20%20%20%20%20%20%20%20v1.y%20-%3D%20this.m_invMassA%20*%20PY%3B%0A%20%20%20%20%20%20%20%20w1%20-%3D%20this.m_invIA%20*%20L1%3B%0A%20%20%20%20%20%20%20%20v2.x%20%2B%3D%20this.m_invMassB%20*%20PX%3B%0A%20%20%20%20%20%20%20%20v2.y%20%2B%3D%20this.m_invMassB%20*%20PY%3B%0A%20%20%20%20%20%20%20%20w2%20%2B%3D%20this.m_invIB%20*%20L2%3B%0A%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20var%20df2%20%3D%20this.m_K.Solve22(new%20b2Vec2()%2C%20-Cdot1X%2C%20-Cdot1Y)%3B%0A%20%20%20%20%20%20%20%20this.m_impulse.x%20%2B%3D%20df2.x%3B%0A%20%20%20%20%20%20%20%20this.m_impulse.y%20%2B%3D%20df2.y%3B%0A%20%20%20%20%20%20%20%20PX%20%3D%20df2.x%20*%20this.m_perp.x%3B%0A%20%20%20%20%20%20%20%20PY%20%3D%20df2.x%20*%20this.m_perp.y%3B%0A%20%20%20%20%20%20%20%20L1%20%3D%20df2.x%20*%20this.m_s1%20%2B%20df2.y%3B%0A%20%20%20%20%20%20%20%20L2%20%3D%20df2.x%20*%20this.m_s2%20%2B%20df2.y%3B%0A%20%20%20%20%20%20%20%20v1.x%20-%3D%20this.m_invMassA%20*%20PX%3B%0A%20%20%20%20%20%20%20%20v1.y%20-%3D%20this.m_invMassA%20*%20PY%3B%0A%20%20%20%20%20%20%20%20w1%20-%3D%20this.m_invIA%20*%20L1%3B%0A%20%20%20%20%20%20%20%20v2.x%20%2B%3D%20this.m_invMassB%20*%20PX%3B%0A%20%20%20%20%20%20%20%20v2.y%20%2B%3D%20this.m_invMassB%20*%20PY%3B%0A%20%20%20%20%20%20%20%20w2%20%2B%3D%20this.m_invIB%20*%20L2%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20bA.m_linearVelocity.SetV(v1)%3B%0A%20%20%20%20%20%20bA.m_angularVelocity%20%3D%20w1%3B%0A%20%20%20%20%20%20bB.m_linearVelocity.SetV(v2)%3B%0A%20%20%20%20%20%20bB.m_angularVelocity%20%3D%20w2%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2PrismaticJoint.prototype.SolvePositionConstraints%20%3D%20function%20(baumgarte)%20%7B%0A%20%20%20%20%20%20if%20(baumgarte%20%3D%3D%3D%20undefined)%20baumgarte%20%3D%200%3B%0A%20%20%20%20%20%20var%20limitC%20%3D%200%3B%0A%20%20%20%20%20%20var%20oldLimitImpulse%20%3D%200%3B%0A%20%20%20%20%20%20var%20bA%20%3D%20this.m_bodyA%3B%0A%20%20%20%20%20%20var%20bB%20%3D%20this.m_bodyB%3B%0A%20%20%20%20%20%20var%20c1%20%3D%20bA.m_sweep.c%3B%0A%20%20%20%20%20%20var%20a1%20%3D%20bA.m_sweep.a%3B%0A%20%20%20%20%20%20var%20c2%20%3D%20bB.m_sweep.c%3B%0A%20%20%20%20%20%20var%20a2%20%3D%20bB.m_sweep.a%3B%0A%20%20%20%20%20%20var%20tMat%3B%0A%20%20%20%20%20%20var%20tX%20%3D%200%3B%0A%20%20%20%20%20%20var%20m1%20%3D%200%3B%0A%20%20%20%20%20%20var%20m2%20%3D%200%3B%0A%20%20%20%20%20%20var%20i1%20%3D%200%3B%0A%20%20%20%20%20%20var%20i2%20%3D%200%3B%0A%20%20%20%20%20%20var%20linearError%20%3D%200.0%3B%0A%20%20%20%20%20%20var%20angularError%20%3D%200.0%3B%0A%20%20%20%20%20%20var%20active%20%3D%20false%3B%0A%20%20%20%20%20%20var%20C2%20%3D%200.0%3B%0A%20%20%20%20%20%20var%20R1%20%3D%20b2Mat22.FromAngle(a1)%3B%0A%20%20%20%20%20%20var%20R2%20%3D%20b2Mat22.FromAngle(a2)%3B%0A%20%20%20%20%20%20tMat%20%3D%20R1%3B%0A%20%20%20%20%20%20var%20r1X%20%3D%20this.m_localAnchor1.x%20-%20this.m_localCenterA.x%3B%0A%20%20%20%20%20%20var%20r1Y%20%3D%20this.m_localAnchor1.y%20-%20this.m_localCenterA.y%3B%0A%20%20%20%20%20%20tX%20%3D%20tMat.col1.x%20*%20r1X%20%2B%20tMat.col2.x%20*%20r1Y%3B%0A%20%20%20%20%20%20r1Y%20%3D%20tMat.col1.y%20*%20r1X%20%2B%20tMat.col2.y%20*%20r1Y%3B%0A%20%20%20%20%20%20r1X%20%3D%20tX%3B%0A%20%20%20%20%20%20tMat%20%3D%20R2%3B%0A%20%20%20%20%20%20var%20r2X%20%3D%20this.m_localAnchor2.x%20-%20this.m_localCenterB.x%3B%0A%20%20%20%20%20%20var%20r2Y%20%3D%20this.m_localAnchor2.y%20-%20this.m_localCenterB.y%3B%0A%20%20%20%20%20%20tX%20%3D%20tMat.col1.x%20*%20r2X%20%2B%20tMat.col2.x%20*%20r2Y%3B%0A%20%20%20%20%20%20r2Y%20%3D%20tMat.col1.y%20*%20r2X%20%2B%20tMat.col2.y%20*%20r2Y%3B%0A%20%20%20%20%20%20r2X%20%3D%20tX%3B%0A%20%20%20%20%20%20var%20dX%20%3D%20c2.x%20%2B%20r2X%20-%20c1.x%20-%20r1X%3B%0A%20%20%20%20%20%20var%20dY%20%3D%20c2.y%20%2B%20r2Y%20-%20c1.y%20-%20r1Y%3B%0A%20%20%20%20%20%20if%20(this.m_enableLimit)%20%7B%0A%20%20%20%20%20%20%20%20this.m_axis%20%3D%20b2Math.MulMV(R1%2C%20this.m_localXAxis1)%3B%0A%20%20%20%20%20%20%20%20this.m_a1%20%3D%20(dX%20%2B%20r1X)%20*%20this.m_axis.y%20-%20(dY%20%2B%20r1Y)%20*%20this.m_axis.x%3B%0A%20%20%20%20%20%20%20%20this.m_a2%20%3D%20r2X%20*%20this.m_axis.y%20-%20r2Y%20*%20this.m_axis.x%3B%0A%20%20%20%20%20%20%20%20var%20translation%20%3D%20this.m_axis.x%20*%20dX%20%2B%20this.m_axis.y%20*%20dY%3B%0A%20%20%20%20%20%20%20%20if%20(%0A%20%20%20%20%20%20%20%20%20%20b2Math.Abs(this.m_upperTranslation%20-%20this.m_lowerTranslation)%20%3C%0A%20%20%20%20%20%20%20%20%20%202.0%20*%20b2Settings.b2_linearSlop%0A%20%20%20%20%20%20%20%20)%20%7B%0A%20%20%20%20%20%20%20%20%20%20C2%20%3D%20b2Math.Clamp(%0A%20%20%20%20%20%20%20%20%20%20%20%20translation%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20-b2Settings.b2_maxLinearCorrection%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20b2Settings.b2_maxLinearCorrection%0A%20%20%20%20%20%20%20%20%20%20)%3B%0A%20%20%20%20%20%20%20%20%20%20linearError%20%3D%20b2Math.Abs(translation)%3B%0A%20%20%20%20%20%20%20%20%20%20active%20%3D%20true%3B%0A%20%20%20%20%20%20%20%20%7D%20else%20if%20(translation%20%3C%3D%20this.m_lowerTranslation)%20%7B%0A%20%20%20%20%20%20%20%20%20%20C2%20%3D%20b2Math.Clamp(%0A%20%20%20%20%20%20%20%20%20%20%20%20translation%20-%20this.m_lowerTranslation%20%2B%20b2Settings.b2_linearSlop%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20-b2Settings.b2_maxLinearCorrection%2C%0A%20%20%20%20%20%20%20%20%20%20%20%200.0%0A%20%20%20%20%20%20%20%20%20%20)%3B%0A%20%20%20%20%20%20%20%20%20%20linearError%20%3D%20this.m_lowerTranslation%20-%20translation%3B%0A%20%20%20%20%20%20%20%20%20%20active%20%3D%20true%3B%0A%20%20%20%20%20%20%20%20%7D%20else%20if%20(translation%20%3E%3D%20this.m_upperTranslation)%20%7B%0A%20%20%20%20%20%20%20%20%20%20C2%20%3D%20b2Math.Clamp(%0A%20%20%20%20%20%20%20%20%20%20%20%20translation%20-%20this.m_upperTranslation%20%2B%20b2Settings.b2_linearSlop%2C%0A%20%20%20%20%20%20%20%20%20%20%20%200.0%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20b2Settings.b2_maxLinearCorrection%0A%20%20%20%20%20%20%20%20%20%20)%3B%0A%20%20%20%20%20%20%20%20%20%20linearError%20%3D%20translation%20-%20this.m_upperTranslation%3B%0A%20%20%20%20%20%20%20%20%20%20active%20%3D%20true%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20this.m_perp%20%3D%20b2Math.MulMV(R1%2C%20this.m_localYAxis1)%3B%0A%20%20%20%20%20%20this.m_s1%20%3D%20(dX%20%2B%20r1X)%20*%20this.m_perp.y%20-%20(dY%20%2B%20r1Y)%20*%20this.m_perp.x%3B%0A%20%20%20%20%20%20this.m_s2%20%3D%20r2X%20*%20this.m_perp.y%20-%20r2Y%20*%20this.m_perp.x%3B%0A%20%20%20%20%20%20var%20impulse%20%3D%20new%20b2Vec3()%3B%0A%20%20%20%20%20%20var%20C1X%20%3D%20this.m_perp.x%20*%20dX%20%2B%20this.m_perp.y%20*%20dY%3B%0A%20%20%20%20%20%20var%20C1Y%20%3D%20a2%20-%20a1%20-%20this.m_refAngle%3B%0A%20%20%20%20%20%20linearError%20%3D%20b2Math.Max(linearError%2C%20b2Math.Abs(C1X))%3B%0A%20%20%20%20%20%20angularError%20%3D%20b2Math.Abs(C1Y)%3B%0A%20%20%20%20%20%20if%20(active)%20%7B%0A%20%20%20%20%20%20%20%20m1%20%3D%20this.m_invMassA%3B%0A%20%20%20%20%20%20%20%20m2%20%3D%20this.m_invMassB%3B%0A%20%20%20%20%20%20%20%20i1%20%3D%20this.m_invIA%3B%0A%20%20%20%20%20%20%20%20i2%20%3D%20this.m_invIB%3B%0A%20%20%20%20%20%20%20%20this.m_K.col1.x%20%3D%0A%20%20%20%20%20%20%20%20%20%20m1%20%2B%20m2%20%2B%20i1%20*%20this.m_s1%20*%20this.m_s1%20%2B%20i2%20*%20this.m_s2%20*%20this.m_s2%3B%0A%20%20%20%20%20%20%20%20this.m_K.col1.y%20%3D%20i1%20*%20this.m_s1%20%2B%20i2%20*%20this.m_s2%3B%0A%20%20%20%20%20%20%20%20this.m_K.col1.z%20%3D%0A%20%20%20%20%20%20%20%20%20%20i1%20*%20this.m_s1%20*%20this.m_a1%20%2B%20i2%20*%20this.m_s2%20*%20this.m_a2%3B%0A%20%20%20%20%20%20%20%20this.m_K.col2.x%20%3D%20this.m_K.col1.y%3B%0A%20%20%20%20%20%20%20%20this.m_K.col2.y%20%3D%20i1%20%2B%20i2%3B%0A%20%20%20%20%20%20%20%20this.m_K.col2.z%20%3D%20i1%20*%20this.m_a1%20%2B%20i2%20*%20this.m_a2%3B%0A%20%20%20%20%20%20%20%20this.m_K.col3.x%20%3D%20this.m_K.col1.z%3B%0A%20%20%20%20%20%20%20%20this.m_K.col3.y%20%3D%20this.m_K.col2.z%3B%0A%20%20%20%20%20%20%20%20this.m_K.col3.z%20%3D%0A%20%20%20%20%20%20%20%20%20%20m1%20%2B%20m2%20%2B%20i1%20*%20this.m_a1%20*%20this.m_a1%20%2B%20i2%20*%20this.m_a2%20*%20this.m_a2%3B%0A%20%20%20%20%20%20%20%20this.m_K.Solve33(impulse%2C%20-C1X%2C%20-C1Y%2C%20-C2)%3B%0A%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20m1%20%3D%20this.m_invMassA%3B%0A%20%20%20%20%20%20%20%20m2%20%3D%20this.m_invMassB%3B%0A%20%20%20%20%20%20%20%20i1%20%3D%20this.m_invIA%3B%0A%20%20%20%20%20%20%20%20i2%20%3D%20this.m_invIB%3B%0A%20%20%20%20%20%20%20%20var%20k11%20%3D%0A%20%20%20%20%20%20%20%20%20%20m1%20%2B%20m2%20%2B%20i1%20*%20this.m_s1%20*%20this.m_s1%20%2B%20i2%20*%20this.m_s2%20*%20this.m_s2%3B%0A%20%20%20%20%20%20%20%20var%20k12%20%3D%20i1%20*%20this.m_s1%20%2B%20i2%20*%20this.m_s2%3B%0A%20%20%20%20%20%20%20%20var%20k22%20%3D%20i1%20%2B%20i2%3B%0A%20%20%20%20%20%20%20%20this.m_K.col1.Set(k11%2C%20k12%2C%200.0)%3B%0A%20%20%20%20%20%20%20%20this.m_K.col2.Set(k12%2C%20k22%2C%200.0)%3B%0A%20%20%20%20%20%20%20%20var%20impulse1%20%3D%20this.m_K.Solve22(new%20b2Vec2()%2C%20-C1X%2C%20-C1Y)%3B%0A%20%20%20%20%20%20%20%20impulse.x%20%3D%20impulse1.x%3B%0A%20%20%20%20%20%20%20%20impulse.y%20%3D%20impulse1.y%3B%0A%20%20%20%20%20%20%20%20impulse.z%20%3D%200.0%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20var%20PX%20%3D%20impulse.x%20*%20this.m_perp.x%20%2B%20impulse.z%20*%20this.m_axis.x%3B%0A%20%20%20%20%20%20var%20PY%20%3D%20impulse.x%20*%20this.m_perp.y%20%2B%20impulse.z%20*%20this.m_axis.y%3B%0A%20%20%20%20%20%20var%20L1%20%3D%20impulse.x%20*%20this.m_s1%20%2B%20impulse.y%20%2B%20impulse.z%20*%20this.m_a1%3B%0A%20%20%20%20%20%20var%20L2%20%3D%20impulse.x%20*%20this.m_s2%20%2B%20impulse.y%20%2B%20impulse.z%20*%20this.m_a2%3B%0A%20%20%20%20%20%20c1.x%20-%3D%20this.m_invMassA%20*%20PX%3B%0A%20%20%20%20%20%20c1.y%20-%3D%20this.m_invMassA%20*%20PY%3B%0A%20%20%20%20%20%20a1%20-%3D%20this.m_invIA%20*%20L1%3B%0A%20%20%20%20%20%20c2.x%20%2B%3D%20this.m_invMassB%20*%20PX%3B%0A%20%20%20%20%20%20c2.y%20%2B%3D%20this.m_invMassB%20*%20PY%3B%0A%20%20%20%20%20%20a2%20%2B%3D%20this.m_invIB%20*%20L2%3B%0A%20%20%20%20%20%20bA.m_sweep.a%20%3D%20a1%3B%0A%20%20%20%20%20%20bB.m_sweep.a%20%3D%20a2%3B%0A%20%20%20%20%20%20bA.SynchronizeTransform()%3B%0A%20%20%20%20%20%20bB.SynchronizeTransform()%3B%0A%20%20%20%20%20%20return%20(%0A%20%20%20%20%20%20%20%20linearError%20%3C%3D%20b2Settings.b2_linearSlop%20%26%26%0A%20%20%20%20%20%20%20%20angularError%20%3C%3D%20b2Settings.b2_angularSlop%0A%20%20%20%20%20%20)%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20Box2D.inherit(b2PrismaticJointDef%2C%20Box2D.Dynamics.Joints.b2JointDef)%3B%0A%20%20%20%20b2PrismaticJointDef.prototype.__super%20%3D%0A%20%20%20%20%20%20Box2D.Dynamics.Joints.b2JointDef.prototype%3B%0A%20%20%20%20b2PrismaticJointDef.b2PrismaticJointDef%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20Box2D.Dynamics.Joints.b2JointDef.b2JointDef.apply(this%2C%20arguments)%3B%0A%20%20%20%20%20%20this.localAnchorA%20%3D%20new%20b2Vec2()%3B%0A%20%20%20%20%20%20this.localAnchorB%20%3D%20new%20b2Vec2()%3B%0A%20%20%20%20%20%20this.localAxisA%20%3D%20new%20b2Vec2()%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2PrismaticJointDef.prototype.b2PrismaticJointDef%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20this.__super.b2JointDef.call(this)%3B%0A%20%20%20%20%20%20this.type%20%3D%20b2Joint.e_prismaticJoint%3B%0A%20%20%20%20%20%20this.localAxisA.Set(1.0%2C%200.0)%3B%0A%20%20%20%20%20%20this.referenceAngle%20%3D%200.0%3B%0A%20%20%20%20%20%20this.enableLimit%20%3D%20false%3B%0A%20%20%20%20%20%20this.lowerTranslation%20%3D%200.0%3B%0A%20%20%20%20%20%20this.upperTranslation%20%3D%200.0%3B%0A%20%20%20%20%20%20this.enableMotor%20%3D%20false%3B%0A%20%20%20%20%20%20this.maxMotorForce%20%3D%200.0%3B%0A%20%20%20%20%20%20this.motorSpeed%20%3D%200.0%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2PrismaticJointDef.prototype.Initialize%20%3D%20function%20(bA%2C%20bB%2C%20anchor%2C%20axis)%20%7B%0A%20%20%20%20%20%20this.bodyA%20%3D%20bA%3B%0A%20%20%20%20%20%20this.bodyB%20%3D%20bB%3B%0A%20%20%20%20%20%20this.localAnchorA%20%3D%20this.bodyA.GetLocalPoint(anchor)%3B%0A%20%20%20%20%20%20this.localAnchorB%20%3D%20this.bodyB.GetLocalPoint(anchor)%3B%0A%20%20%20%20%20%20this.localAxisA%20%3D%20this.bodyA.GetLocalVector(axis)%3B%0A%20%20%20%20%20%20this.referenceAngle%20%3D%20this.bodyB.GetAngle()%20-%20this.bodyA.GetAngle()%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20Box2D.inherit(b2PulleyJoint%2C%20Box2D.Dynamics.Joints.b2Joint)%3B%0A%20%20%20%20b2PulleyJoint.prototype.__super%20%3D%20Box2D.Dynamics.Joints.b2Joint.prototype%3B%0A%20%20%20%20b2PulleyJoint.b2PulleyJoint%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20Box2D.Dynamics.Joints.b2Joint.b2Joint.apply(this%2C%20arguments)%3B%0A%20%20%20%20%20%20this.m_groundAnchor1%20%3D%20new%20b2Vec2()%3B%0A%20%20%20%20%20%20this.m_groundAnchor2%20%3D%20new%20b2Vec2()%3B%0A%20%20%20%20%20%20this.m_localAnchor1%20%3D%20new%20b2Vec2()%3B%0A%20%20%20%20%20%20this.m_localAnchor2%20%3D%20new%20b2Vec2()%3B%0A%20%20%20%20%20%20this.m_u1%20%3D%20new%20b2Vec2()%3B%0A%20%20%20%20%20%20this.m_u2%20%3D%20new%20b2Vec2()%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2PulleyJoint.prototype.GetAnchorA%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20return%20this.m_bodyA.GetWorldPoint(this.m_localAnchor1)%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2PulleyJoint.prototype.GetAnchorB%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20return%20this.m_bodyB.GetWorldPoint(this.m_localAnchor2)%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2PulleyJoint.prototype.GetReactionForce%20%3D%20function%20(inv_dt)%20%7B%0A%20%20%20%20%20%20if%20(inv_dt%20%3D%3D%3D%20undefined)%20inv_dt%20%3D%200%3B%0A%20%20%20%20%20%20return%20new%20b2Vec2(%0A%20%20%20%20%20%20%20%20inv_dt%20*%20this.m_impulse%20*%20this.m_u2.x%2C%0A%20%20%20%20%20%20%20%20inv_dt%20*%20this.m_impulse%20*%20this.m_u2.y%0A%20%20%20%20%20%20)%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2PulleyJoint.prototype.GetReactionTorque%20%3D%20function%20(inv_dt)%20%7B%0A%20%20%20%20%20%20if%20(inv_dt%20%3D%3D%3D%20undefined)%20inv_dt%20%3D%200%3B%0A%20%20%20%20%20%20return%200.0%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2PulleyJoint.prototype.GetGroundAnchorA%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20var%20a%20%3D%20this.m_ground.m_xf.position.Copy()%3B%0A%20%20%20%20%20%20a.Add(this.m_groundAnchor1)%3B%0A%20%20%20%20%20%20return%20a%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2PulleyJoint.prototype.GetGroundAnchorB%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20var%20a%20%3D%20this.m_ground.m_xf.position.Copy()%3B%0A%20%20%20%20%20%20a.Add(this.m_groundAnchor2)%3B%0A%20%20%20%20%20%20return%20a%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2PulleyJoint.prototype.GetLength1%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20var%20p%20%3D%20this.m_bodyA.GetWorldPoint(this.m_localAnchor1)%3B%0A%20%20%20%20%20%20var%20sX%20%3D%20this.m_ground.m_xf.position.x%20%2B%20this.m_groundAnchor1.x%3B%0A%20%20%20%20%20%20var%20sY%20%3D%20this.m_ground.m_xf.position.y%20%2B%20this.m_groundAnchor1.y%3B%0A%20%20%20%20%20%20var%20dX%20%3D%20p.x%20-%20sX%3B%0A%20%20%20%20%20%20var%20dY%20%3D%20p.y%20-%20sY%3B%0A%20%20%20%20%20%20return%20Math.sqrt(dX%20*%20dX%20%2B%20dY%20*%20dY)%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2PulleyJoint.prototype.GetLength2%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20var%20p%20%3D%20this.m_bodyB.GetWorldPoint(this.m_localAnchor2)%3B%0A%20%20%20%20%20%20var%20sX%20%3D%20this.m_ground.m_xf.position.x%20%2B%20this.m_groundAnchor2.x%3B%0A%20%20%20%20%20%20var%20sY%20%3D%20this.m_ground.m_xf.position.y%20%2B%20this.m_groundAnchor2.y%3B%0A%20%20%20%20%20%20var%20dX%20%3D%20p.x%20-%20sX%3B%0A%20%20%20%20%20%20var%20dY%20%3D%20p.y%20-%20sY%3B%0A%20%20%20%20%20%20return%20Math.sqrt(dX%20*%20dX%20%2B%20dY%20*%20dY)%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2PulleyJoint.prototype.GetRatio%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20return%20this.m_ratio%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2PulleyJoint.prototype.b2PulleyJoint%20%3D%20function%20(def)%20%7B%0A%20%20%20%20%20%20this.__super.b2Joint.call(this%2C%20def)%3B%0A%20%20%20%20%20%20var%20tMat%3B%0A%20%20%20%20%20%20var%20tX%20%3D%200%3B%0A%20%20%20%20%20%20var%20tY%20%3D%200%3B%0A%20%20%20%20%20%20this.m_ground%20%3D%20this.m_bodyA.m_world.m_groundBody%3B%0A%20%20%20%20%20%20this.m_groundAnchor1.x%20%3D%0A%20%20%20%20%20%20%20%20def.groundAnchorA.x%20-%20this.m_ground.m_xf.position.x%3B%0A%20%20%20%20%20%20this.m_groundAnchor1.y%20%3D%0A%20%20%20%20%20%20%20%20def.groundAnchorA.y%20-%20this.m_ground.m_xf.position.y%3B%0A%20%20%20%20%20%20this.m_groundAnchor2.x%20%3D%0A%20%20%20%20%20%20%20%20def.groundAnchorB.x%20-%20this.m_ground.m_xf.position.x%3B%0A%20%20%20%20%20%20this.m_groundAnchor2.y%20%3D%0A%20%20%20%20%20%20%20%20def.groundAnchorB.y%20-%20this.m_ground.m_xf.position.y%3B%0A%20%20%20%20%20%20this.m_localAnchor1.SetV(def.localAnchorA)%3B%0A%20%20%20%20%20%20this.m_localAnchor2.SetV(def.localAnchorB)%3B%0A%20%20%20%20%20%20this.m_ratio%20%3D%20def.ratio%3B%0A%20%20%20%20%20%20this.m_constant%20%3D%20def.lengthA%20%2B%20this.m_ratio%20*%20def.lengthB%3B%0A%20%20%20%20%20%20this.m_maxLength1%20%3D%20b2Math.Min(%0A%20%20%20%20%20%20%20%20def.maxLengthA%2C%0A%20%20%20%20%20%20%20%20this.m_constant%20-%20this.m_ratio%20*%20b2PulleyJoint.b2_minPulleyLength%0A%20%20%20%20%20%20)%3B%0A%20%20%20%20%20%20this.m_maxLength2%20%3D%20b2Math.Min(%0A%20%20%20%20%20%20%20%20def.maxLengthB%2C%0A%20%20%20%20%20%20%20%20(this.m_constant%20-%20b2PulleyJoint.b2_minPulleyLength)%20%2F%20this.m_ratio%0A%20%20%20%20%20%20)%3B%0A%20%20%20%20%20%20this.m_impulse%20%3D%200.0%3B%0A%20%20%20%20%20%20this.m_limitImpulse1%20%3D%200.0%3B%0A%20%20%20%20%20%20this.m_limitImpulse2%20%3D%200.0%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2PulleyJoint.prototype.InitVelocityConstraints%20%3D%20function%20(step)%20%7B%0A%20%20%20%20%20%20var%20bA%20%3D%20this.m_bodyA%3B%0A%20%20%20%20%20%20var%20bB%20%3D%20this.m_bodyB%3B%0A%20%20%20%20%20%20var%20tMat%3B%0A%20%20%20%20%20%20tMat%20%3D%20bA.m_xf.R%3B%0A%20%20%20%20%20%20var%20r1X%20%3D%20this.m_localAnchor1.x%20-%20bA.m_sweep.localCenter.x%3B%0A%20%20%20%20%20%20var%20r1Y%20%3D%20this.m_localAnchor1.y%20-%20bA.m_sweep.localCenter.y%3B%0A%20%20%20%20%20%20var%20tX%20%3D%20tMat.col1.x%20*%20r1X%20%2B%20tMat.col2.x%20*%20r1Y%3B%0A%20%20%20%20%20%20r1Y%20%3D%20tMat.col1.y%20*%20r1X%20%2B%20tMat.col2.y%20*%20r1Y%3B%0A%20%20%20%20%20%20r1X%20%3D%20tX%3B%0A%20%20%20%20%20%20tMat%20%3D%20bB.m_xf.R%3B%0A%20%20%20%20%20%20var%20r2X%20%3D%20this.m_localAnchor2.x%20-%20bB.m_sweep.localCenter.x%3B%0A%20%20%20%20%20%20var%20r2Y%20%3D%20this.m_localAnchor2.y%20-%20bB.m_sweep.localCenter.y%3B%0A%20%20%20%20%20%20tX%20%3D%20tMat.col1.x%20*%20r2X%20%2B%20tMat.col2.x%20*%20r2Y%3B%0A%20%20%20%20%20%20r2Y%20%3D%20tMat.col1.y%20*%20r2X%20%2B%20tMat.col2.y%20*%20r2Y%3B%0A%20%20%20%20%20%20r2X%20%3D%20tX%3B%0A%20%20%20%20%20%20var%20p1X%20%3D%20bA.m_sweep.c.x%20%2B%20r1X%3B%0A%20%20%20%20%20%20var%20p1Y%20%3D%20bA.m_sweep.c.y%20%2B%20r1Y%3B%0A%20%20%20%20%20%20var%20p2X%20%3D%20bB.m_sweep.c.x%20%2B%20r2X%3B%0A%20%20%20%20%20%20var%20p2Y%20%3D%20bB.m_sweep.c.y%20%2B%20r2Y%3B%0A%20%20%20%20%20%20var%20s1X%20%3D%20this.m_ground.m_xf.position.x%20%2B%20this.m_groundAnchor1.x%3B%0A%20%20%20%20%20%20var%20s1Y%20%3D%20this.m_ground.m_xf.position.y%20%2B%20this.m_groundAnchor1.y%3B%0A%20%20%20%20%20%20var%20s2X%20%3D%20this.m_ground.m_xf.position.x%20%2B%20this.m_groundAnchor2.x%3B%0A%20%20%20%20%20%20var%20s2Y%20%3D%20this.m_ground.m_xf.position.y%20%2B%20this.m_groundAnchor2.y%3B%0A%20%20%20%20%20%20this.m_u1.Set(p1X%20-%20s1X%2C%20p1Y%20-%20s1Y)%3B%0A%20%20%20%20%20%20this.m_u2.Set(p2X%20-%20s2X%2C%20p2Y%20-%20s2Y)%3B%0A%20%20%20%20%20%20var%20length1%20%3D%20this.m_u1.Length()%3B%0A%20%20%20%20%20%20var%20length2%20%3D%20this.m_u2.Length()%3B%0A%20%20%20%20%20%20if%20(length1%20%3E%20b2Settings.b2_linearSlop)%20%7B%0A%20%20%20%20%20%20%20%20this.m_u1.Multiply(1.0%20%2F%20length1)%3B%0A%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20this.m_u1.SetZero()%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20if%20(length2%20%3E%20b2Settings.b2_linearSlop)%20%7B%0A%20%20%20%20%20%20%20%20this.m_u2.Multiply(1.0%20%2F%20length2)%3B%0A%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20this.m_u2.SetZero()%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20var%20C%20%3D%20this.m_constant%20-%20length1%20-%20this.m_ratio%20*%20length2%3B%0A%20%20%20%20%20%20if%20(C%20%3E%200.0)%20%7B%0A%20%20%20%20%20%20%20%20this.m_state%20%3D%20b2Joint.e_inactiveLimit%3B%0A%20%20%20%20%20%20%20%20this.m_impulse%20%3D%200.0%3B%0A%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20this.m_state%20%3D%20b2Joint.e_atUpperLimit%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20if%20(length1%20%3C%20this.m_maxLength1)%20%7B%0A%20%20%20%20%20%20%20%20this.m_limitState1%20%3D%20b2Joint.e_inactiveLimit%3B%0A%20%20%20%20%20%20%20%20this.m_limitImpulse1%20%3D%200.0%3B%0A%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20this.m_limitState1%20%3D%20b2Joint.e_atUpperLimit%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20if%20(length2%20%3C%20this.m_maxLength2)%20%7B%0A%20%20%20%20%20%20%20%20this.m_limitState2%20%3D%20b2Joint.e_inactiveLimit%3B%0A%20%20%20%20%20%20%20%20this.m_limitImpulse2%20%3D%200.0%3B%0A%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20this.m_limitState2%20%3D%20b2Joint.e_atUpperLimit%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20var%20cr1u1%20%3D%20r1X%20*%20this.m_u1.y%20-%20r1Y%20*%20this.m_u1.x%3B%0A%20%20%20%20%20%20var%20cr2u2%20%3D%20r2X%20*%20this.m_u2.y%20-%20r2Y%20*%20this.m_u2.x%3B%0A%20%20%20%20%20%20this.m_limitMass1%20%3D%20bA.m_invMass%20%2B%20bA.m_invI%20*%20cr1u1%20*%20cr1u1%3B%0A%20%20%20%20%20%20this.m_limitMass2%20%3D%20bB.m_invMass%20%2B%20bB.m_invI%20*%20cr2u2%20*%20cr2u2%3B%0A%20%20%20%20%20%20this.m_pulleyMass%20%3D%0A%20%20%20%20%20%20%20%20this.m_limitMass1%20%2B%20this.m_ratio%20*%20this.m_ratio%20*%20this.m_limitMass2%3B%0A%20%20%20%20%20%20this.m_limitMass1%20%3D%201.0%20%2F%20this.m_limitMass1%3B%0A%20%20%20%20%20%20this.m_limitMass2%20%3D%201.0%20%2F%20this.m_limitMass2%3B%0A%20%20%20%20%20%20this.m_pulleyMass%20%3D%201.0%20%2F%20this.m_pulleyMass%3B%0A%20%20%20%20%20%20if%20(step.warmStarting)%20%7B%0A%20%20%20%20%20%20%20%20this.m_impulse%20*%3D%20step.dtRatio%3B%0A%20%20%20%20%20%20%20%20this.m_limitImpulse1%20*%3D%20step.dtRatio%3B%0A%20%20%20%20%20%20%20%20this.m_limitImpulse2%20*%3D%20step.dtRatio%3B%0A%20%20%20%20%20%20%20%20var%20P1X%20%3D%20(-this.m_impulse%20-%20this.m_limitImpulse1)%20*%20this.m_u1.x%3B%0A%20%20%20%20%20%20%20%20var%20P1Y%20%3D%20(-this.m_impulse%20-%20this.m_limitImpulse1)%20*%20this.m_u1.y%3B%0A%20%20%20%20%20%20%20%20var%20P2X%20%3D%0A%20%20%20%20%20%20%20%20%20%20(-this.m_ratio%20*%20this.m_impulse%20-%20this.m_limitImpulse2)%20*%20this.m_u2.x%3B%0A%20%20%20%20%20%20%20%20var%20P2Y%20%3D%0A%20%20%20%20%20%20%20%20%20%20(-this.m_ratio%20*%20this.m_impulse%20-%20this.m_limitImpulse2)%20*%20this.m_u2.y%3B%0A%20%20%20%20%20%20%20%20bA.m_linearVelocity.x%20%2B%3D%20bA.m_invMass%20*%20P1X%3B%0A%20%20%20%20%20%20%20%20bA.m_linearVelocity.y%20%2B%3D%20bA.m_invMass%20*%20P1Y%3B%0A%20%20%20%20%20%20%20%20bA.m_angularVelocity%20%2B%3D%20bA.m_invI%20*%20(r1X%20*%20P1Y%20-%20r1Y%20*%20P1X)%3B%0A%20%20%20%20%20%20%20%20bB.m_linearVelocity.x%20%2B%3D%20bB.m_invMass%20*%20P2X%3B%0A%20%20%20%20%20%20%20%20bB.m_linearVelocity.y%20%2B%3D%20bB.m_invMass%20*%20P2Y%3B%0A%20%20%20%20%20%20%20%20bB.m_angularVelocity%20%2B%3D%20bB.m_invI%20*%20(r2X%20*%20P2Y%20-%20r2Y%20*%20P2X)%3B%0A%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20this.m_impulse%20%3D%200.0%3B%0A%20%20%20%20%20%20%20%20this.m_limitImpulse1%20%3D%200.0%3B%0A%20%20%20%20%20%20%20%20this.m_limitImpulse2%20%3D%200.0%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2PulleyJoint.prototype.SolveVelocityConstraints%20%3D%20function%20(step)%20%7B%0A%20%20%20%20%20%20var%20bA%20%3D%20this.m_bodyA%3B%0A%20%20%20%20%20%20var%20bB%20%3D%20this.m_bodyB%3B%0A%20%20%20%20%20%20var%20tMat%3B%0A%20%20%20%20%20%20tMat%20%3D%20bA.m_xf.R%3B%0A%20%20%20%20%20%20var%20r1X%20%3D%20this.m_localAnchor1.x%20-%20bA.m_sweep.localCenter.x%3B%0A%20%20%20%20%20%20var%20r1Y%20%3D%20this.m_localAnchor1.y%20-%20bA.m_sweep.localCenter.y%3B%0A%20%20%20%20%20%20var%20tX%20%3D%20tMat.col1.x%20*%20r1X%20%2B%20tMat.col2.x%20*%20r1Y%3B%0A%20%20%20%20%20%20r1Y%20%3D%20tMat.col1.y%20*%20r1X%20%2B%20tMat.col2.y%20*%20r1Y%3B%0A%20%20%20%20%20%20r1X%20%3D%20tX%3B%0A%20%20%20%20%20%20tMat%20%3D%20bB.m_xf.R%3B%0A%20%20%20%20%20%20var%20r2X%20%3D%20this.m_localAnchor2.x%20-%20bB.m_sweep.localCenter.x%3B%0A%20%20%20%20%20%20var%20r2Y%20%3D%20this.m_localAnchor2.y%20-%20bB.m_sweep.localCenter.y%3B%0A%20%20%20%20%20%20tX%20%3D%20tMat.col1.x%20*%20r2X%20%2B%20tMat.col2.x%20*%20r2Y%3B%0A%20%20%20%20%20%20r2Y%20%3D%20tMat.col1.y%20*%20r2X%20%2B%20tMat.col2.y%20*%20r2Y%3B%0A%20%20%20%20%20%20r2X%20%3D%20tX%3B%0A%20%20%20%20%20%20var%20v1X%20%3D%200%3B%0A%20%20%20%20%20%20var%20v1Y%20%3D%200%3B%0A%20%20%20%20%20%20var%20v2X%20%3D%200%3B%0A%20%20%20%20%20%20var%20v2Y%20%3D%200%3B%0A%20%20%20%20%20%20var%20P1X%20%3D%200%3B%0A%20%20%20%20%20%20var%20P1Y%20%3D%200%3B%0A%20%20%20%20%20%20var%20P2X%20%3D%200%3B%0A%20%20%20%20%20%20var%20P2Y%20%3D%200%3B%0A%20%20%20%20%20%20var%20Cdot%20%3D%200%3B%0A%20%20%20%20%20%20var%20impulse%20%3D%200%3B%0A%20%20%20%20%20%20var%20oldImpulse%20%3D%200%3B%0A%20%20%20%20%20%20if%20(this.m_state%20%3D%3D%20b2Joint.e_atUpperLimit)%20%7B%0A%20%20%20%20%20%20%20%20v1X%20%3D%20bA.m_linearVelocity.x%20%2B%20-bA.m_angularVelocity%20*%20r1Y%3B%0A%20%20%20%20%20%20%20%20v1Y%20%3D%20bA.m_linearVelocity.y%20%2B%20bA.m_angularVelocity%20*%20r1X%3B%0A%20%20%20%20%20%20%20%20v2X%20%3D%20bB.m_linearVelocity.x%20%2B%20-bB.m_angularVelocity%20*%20r2Y%3B%0A%20%20%20%20%20%20%20%20v2Y%20%3D%20bB.m_linearVelocity.y%20%2B%20bB.m_angularVelocity%20*%20r2X%3B%0A%20%20%20%20%20%20%20%20Cdot%20%3D%0A%20%20%20%20%20%20%20%20%20%20-(this.m_u1.x%20*%20v1X%20%2B%20this.m_u1.y%20*%20v1Y)%20-%0A%20%20%20%20%20%20%20%20%20%20this.m_ratio%20*%20(this.m_u2.x%20*%20v2X%20%2B%20this.m_u2.y%20*%20v2Y)%3B%0A%20%20%20%20%20%20%20%20impulse%20%3D%20this.m_pulleyMass%20*%20-Cdot%3B%0A%20%20%20%20%20%20%20%20oldImpulse%20%3D%20this.m_impulse%3B%0A%20%20%20%20%20%20%20%20this.m_impulse%20%3D%20b2Math.Max(0.0%2C%20this.m_impulse%20%2B%20impulse)%3B%0A%20%20%20%20%20%20%20%20impulse%20%3D%20this.m_impulse%20-%20oldImpulse%3B%0A%20%20%20%20%20%20%20%20P1X%20%3D%20-impulse%20*%20this.m_u1.x%3B%0A%20%20%20%20%20%20%20%20P1Y%20%3D%20-impulse%20*%20this.m_u1.y%3B%0A%20%20%20%20%20%20%20%20P2X%20%3D%20-this.m_ratio%20*%20impulse%20*%20this.m_u2.x%3B%0A%20%20%20%20%20%20%20%20P2Y%20%3D%20-this.m_ratio%20*%20impulse%20*%20this.m_u2.y%3B%0A%20%20%20%20%20%20%20%20bA.m_linearVelocity.x%20%2B%3D%20bA.m_invMass%20*%20P1X%3B%0A%20%20%20%20%20%20%20%20bA.m_linearVelocity.y%20%2B%3D%20bA.m_invMass%20*%20P1Y%3B%0A%20%20%20%20%20%20%20%20bA.m_angularVelocity%20%2B%3D%20bA.m_invI%20*%20(r1X%20*%20P1Y%20-%20r1Y%20*%20P1X)%3B%0A%20%20%20%20%20%20%20%20bB.m_linearVelocity.x%20%2B%3D%20bB.m_invMass%20*%20P2X%3B%0A%20%20%20%20%20%20%20%20bB.m_linearVelocity.y%20%2B%3D%20bB.m_invMass%20*%20P2Y%3B%0A%20%20%20%20%20%20%20%20bB.m_angularVelocity%20%2B%3D%20bB.m_invI%20*%20(r2X%20*%20P2Y%20-%20r2Y%20*%20P2X)%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20if%20(this.m_limitState1%20%3D%3D%20b2Joint.e_atUpperLimit)%20%7B%0A%20%20%20%20%20%20%20%20v1X%20%3D%20bA.m_linearVelocity.x%20%2B%20-bA.m_angularVelocity%20*%20r1Y%3B%0A%20%20%20%20%20%20%20%20v1Y%20%3D%20bA.m_linearVelocity.y%20%2B%20bA.m_angularVelocity%20*%20r1X%3B%0A%20%20%20%20%20%20%20%20Cdot%20%3D%20-(this.m_u1.x%20*%20v1X%20%2B%20this.m_u1.y%20*%20v1Y)%3B%0A%20%20%20%20%20%20%20%20impulse%20%3D%20-this.m_limitMass1%20*%20Cdot%3B%0A%20%20%20%20%20%20%20%20oldImpulse%20%3D%20this.m_limitImpulse1%3B%0A%20%20%20%20%20%20%20%20this.m_limitImpulse1%20%3D%20b2Math.Max(0.0%2C%20this.m_limitImpulse1%20%2B%20impulse)%3B%0A%20%20%20%20%20%20%20%20impulse%20%3D%20this.m_limitImpulse1%20-%20oldImpulse%3B%0A%20%20%20%20%20%20%20%20P1X%20%3D%20-impulse%20*%20this.m_u1.x%3B%0A%20%20%20%20%20%20%20%20P1Y%20%3D%20-impulse%20*%20this.m_u1.y%3B%0A%20%20%20%20%20%20%20%20bA.m_linearVelocity.x%20%2B%3D%20bA.m_invMass%20*%20P1X%3B%0A%20%20%20%20%20%20%20%20bA.m_linearVelocity.y%20%2B%3D%20bA.m_invMass%20*%20P1Y%3B%0A%20%20%20%20%20%20%20%20bA.m_angularVelocity%20%2B%3D%20bA.m_invI%20*%20(r1X%20*%20P1Y%20-%20r1Y%20*%20P1X)%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20if%20(this.m_limitState2%20%3D%3D%20b2Joint.e_atUpperLimit)%20%7B%0A%20%20%20%20%20%20%20%20v2X%20%3D%20bB.m_linearVelocity.x%20%2B%20-bB.m_angularVelocity%20*%20r2Y%3B%0A%20%20%20%20%20%20%20%20v2Y%20%3D%20bB.m_linearVelocity.y%20%2B%20bB.m_angularVelocity%20*%20r2X%3B%0A%20%20%20%20%20%20%20%20Cdot%20%3D%20-(this.m_u2.x%20*%20v2X%20%2B%20this.m_u2.y%20*%20v2Y)%3B%0A%20%20%20%20%20%20%20%20impulse%20%3D%20-this.m_limitMass2%20*%20Cdot%3B%0A%20%20%20%20%20%20%20%20oldImpulse%20%3D%20this.m_limitImpulse2%3B%0A%20%20%20%20%20%20%20%20this.m_limitImpulse2%20%3D%20b2Math.Max(0.0%2C%20this.m_limitImpulse2%20%2B%20impulse)%3B%0A%20%20%20%20%20%20%20%20impulse%20%3D%20this.m_limitImpulse2%20-%20oldImpulse%3B%0A%20%20%20%20%20%20%20%20P2X%20%3D%20-impulse%20*%20this.m_u2.x%3B%0A%20%20%20%20%20%20%20%20P2Y%20%3D%20-impulse%20*%20this.m_u2.y%3B%0A%20%20%20%20%20%20%20%20bB.m_linearVelocity.x%20%2B%3D%20bB.m_invMass%20*%20P2X%3B%0A%20%20%20%20%20%20%20%20bB.m_linearVelocity.y%20%2B%3D%20bB.m_invMass%20*%20P2Y%3B%0A%20%20%20%20%20%20%20%20bB.m_angularVelocity%20%2B%3D%20bB.m_invI%20*%20(r2X%20*%20P2Y%20-%20r2Y%20*%20P2X)%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2PulleyJoint.prototype.SolvePositionConstraints%20%3D%20function%20(baumgarte)%20%7B%0A%20%20%20%20%20%20if%20(baumgarte%20%3D%3D%3D%20undefined)%20baumgarte%20%3D%200%3B%0A%20%20%20%20%20%20var%20bA%20%3D%20this.m_bodyA%3B%0A%20%20%20%20%20%20var%20bB%20%3D%20this.m_bodyB%3B%0A%20%20%20%20%20%20var%20tMat%3B%0A%20%20%20%20%20%20var%20s1X%20%3D%20this.m_ground.m_xf.position.x%20%2B%20this.m_groundAnchor1.x%3B%0A%20%20%20%20%20%20var%20s1Y%20%3D%20this.m_ground.m_xf.position.y%20%2B%20this.m_groundAnchor1.y%3B%0A%20%20%20%20%20%20var%20s2X%20%3D%20this.m_ground.m_xf.position.x%20%2B%20this.m_groundAnchor2.x%3B%0A%20%20%20%20%20%20var%20s2Y%20%3D%20this.m_ground.m_xf.position.y%20%2B%20this.m_groundAnchor2.y%3B%0A%20%20%20%20%20%20var%20r1X%20%3D%200%3B%0A%20%20%20%20%20%20var%20r1Y%20%3D%200%3B%0A%20%20%20%20%20%20var%20r2X%20%3D%200%3B%0A%20%20%20%20%20%20var%20r2Y%20%3D%200%3B%0A%20%20%20%20%20%20var%20p1X%20%3D%200%3B%0A%20%20%20%20%20%20var%20p1Y%20%3D%200%3B%0A%20%20%20%20%20%20var%20p2X%20%3D%200%3B%0A%20%20%20%20%20%20var%20p2Y%20%3D%200%3B%0A%20%20%20%20%20%20var%20length1%20%3D%200%3B%0A%20%20%20%20%20%20var%20length2%20%3D%200%3B%0A%20%20%20%20%20%20var%20C%20%3D%200%3B%0A%20%20%20%20%20%20var%20impulse%20%3D%200%3B%0A%20%20%20%20%20%20var%20oldImpulse%20%3D%200%3B%0A%20%20%20%20%20%20var%20oldLimitPositionImpulse%20%3D%200%3B%0A%20%20%20%20%20%20var%20tX%20%3D%200%3B%0A%20%20%20%20%20%20var%20linearError%20%3D%200.0%3B%0A%20%20%20%20%20%20if%20(this.m_state%20%3D%3D%20b2Joint.e_atUpperLimit)%20%7B%0A%20%20%20%20%20%20%20%20tMat%20%3D%20bA.m_xf.R%3B%0A%20%20%20%20%20%20%20%20r1X%20%3D%20this.m_localAnchor1.x%20-%20bA.m_sweep.localCenter.x%3B%0A%20%20%20%20%20%20%20%20r1Y%20%3D%20this.m_localAnchor1.y%20-%20bA.m_sweep.localCenter.y%3B%0A%20%20%20%20%20%20%20%20tX%20%3D%20tMat.col1.x%20*%20r1X%20%2B%20tMat.col2.x%20*%20r1Y%3B%0A%20%20%20%20%20%20%20%20r1Y%20%3D%20tMat.col1.y%20*%20r1X%20%2B%20tMat.col2.y%20*%20r1Y%3B%0A%20%20%20%20%20%20%20%20r1X%20%3D%20tX%3B%0A%20%20%20%20%20%20%20%20tMat%20%3D%20bB.m_xf.R%3B%0A%20%20%20%20%20%20%20%20r2X%20%3D%20this.m_localAnchor2.x%20-%20bB.m_sweep.localCenter.x%3B%0A%20%20%20%20%20%20%20%20r2Y%20%3D%20this.m_localAnchor2.y%20-%20bB.m_sweep.localCenter.y%3B%0A%20%20%20%20%20%20%20%20tX%20%3D%20tMat.col1.x%20*%20r2X%20%2B%20tMat.col2.x%20*%20r2Y%3B%0A%20%20%20%20%20%20%20%20r2Y%20%3D%20tMat.col1.y%20*%20r2X%20%2B%20tMat.col2.y%20*%20r2Y%3B%0A%20%20%20%20%20%20%20%20r2X%20%3D%20tX%3B%0A%20%20%20%20%20%20%20%20p1X%20%3D%20bA.m_sweep.c.x%20%2B%20r1X%3B%0A%20%20%20%20%20%20%20%20p1Y%20%3D%20bA.m_sweep.c.y%20%2B%20r1Y%3B%0A%20%20%20%20%20%20%20%20p2X%20%3D%20bB.m_sweep.c.x%20%2B%20r2X%3B%0A%20%20%20%20%20%20%20%20p2Y%20%3D%20bB.m_sweep.c.y%20%2B%20r2Y%3B%0A%20%20%20%20%20%20%20%20this.m_u1.Set(p1X%20-%20s1X%2C%20p1Y%20-%20s1Y)%3B%0A%20%20%20%20%20%20%20%20this.m_u2.Set(p2X%20-%20s2X%2C%20p2Y%20-%20s2Y)%3B%0A%20%20%20%20%20%20%20%20length1%20%3D%20this.m_u1.Length()%3B%0A%20%20%20%20%20%20%20%20length2%20%3D%20this.m_u2.Length()%3B%0A%20%20%20%20%20%20%20%20if%20(length1%20%3E%20b2Settings.b2_linearSlop)%20%7B%0A%20%20%20%20%20%20%20%20%20%20this.m_u1.Multiply(1.0%20%2F%20length1)%3B%0A%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20this.m_u1.SetZero()%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20if%20(length2%20%3E%20b2Settings.b2_linearSlop)%20%7B%0A%20%20%20%20%20%20%20%20%20%20this.m_u2.Multiply(1.0%20%2F%20length2)%3B%0A%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20this.m_u2.SetZero()%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20C%20%3D%20this.m_constant%20-%20length1%20-%20this.m_ratio%20*%20length2%3B%0A%20%20%20%20%20%20%20%20linearError%20%3D%20b2Math.Max(linearError%2C%20-C)%3B%0A%20%20%20%20%20%20%20%20C%20%3D%20b2Math.Clamp(%0A%20%20%20%20%20%20%20%20%20%20C%20%2B%20b2Settings.b2_linearSlop%2C%0A%20%20%20%20%20%20%20%20%20%20-b2Settings.b2_maxLinearCorrection%2C%0A%20%20%20%20%20%20%20%20%20%200.0%0A%20%20%20%20%20%20%20%20)%3B%0A%20%20%20%20%20%20%20%20impulse%20%3D%20-this.m_pulleyMass%20*%20C%3B%0A%20%20%20%20%20%20%20%20p1X%20%3D%20-impulse%20*%20this.m_u1.x%3B%0A%20%20%20%20%20%20%20%20p1Y%20%3D%20-impulse%20*%20this.m_u1.y%3B%0A%20%20%20%20%20%20%20%20p2X%20%3D%20-this.m_ratio%20*%20impulse%20*%20this.m_u2.x%3B%0A%20%20%20%20%20%20%20%20p2Y%20%3D%20-this.m_ratio%20*%20impulse%20*%20this.m_u2.y%3B%0A%20%20%20%20%20%20%20%20bA.m_sweep.c.x%20%2B%3D%20bA.m_invMass%20*%20p1X%3B%0A%20%20%20%20%20%20%20%20bA.m_sweep.c.y%20%2B%3D%20bA.m_invMass%20*%20p1Y%3B%0A%20%20%20%20%20%20%20%20bA.m_sweep.a%20%2B%3D%20bA.m_invI%20*%20(r1X%20*%20p1Y%20-%20r1Y%20*%20p1X)%3B%0A%20%20%20%20%20%20%20%20bB.m_sweep.c.x%20%2B%3D%20bB.m_invMass%20*%20p2X%3B%0A%20%20%20%20%20%20%20%20bB.m_sweep.c.y%20%2B%3D%20bB.m_invMass%20*%20p2Y%3B%0A%20%20%20%20%20%20%20%20bB.m_sweep.a%20%2B%3D%20bB.m_invI%20*%20(r2X%20*%20p2Y%20-%20r2Y%20*%20p2X)%3B%0A%20%20%20%20%20%20%20%20bA.SynchronizeTransform()%3B%0A%20%20%20%20%20%20%20%20bB.SynchronizeTransform()%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20if%20(this.m_limitState1%20%3D%3D%20b2Joint.e_atUpperLimit)%20%7B%0A%20%20%20%20%20%20%20%20tMat%20%3D%20bA.m_xf.R%3B%0A%20%20%20%20%20%20%20%20r1X%20%3D%20this.m_localAnchor1.x%20-%20bA.m_sweep.localCenter.x%3B%0A%20%20%20%20%20%20%20%20r1Y%20%3D%20this.m_localAnchor1.y%20-%20bA.m_sweep.localCenter.y%3B%0A%20%20%20%20%20%20%20%20tX%20%3D%20tMat.col1.x%20*%20r1X%20%2B%20tMat.col2.x%20*%20r1Y%3B%0A%20%20%20%20%20%20%20%20r1Y%20%3D%20tMat.col1.y%20*%20r1X%20%2B%20tMat.col2.y%20*%20r1Y%3B%0A%20%20%20%20%20%20%20%20r1X%20%3D%20tX%3B%0A%20%20%20%20%20%20%20%20p1X%20%3D%20bA.m_sweep.c.x%20%2B%20r1X%3B%0A%20%20%20%20%20%20%20%20p1Y%20%3D%20bA.m_sweep.c.y%20%2B%20r1Y%3B%0A%20%20%20%20%20%20%20%20this.m_u1.Set(p1X%20-%20s1X%2C%20p1Y%20-%20s1Y)%3B%0A%20%20%20%20%20%20%20%20length1%20%3D%20this.m_u1.Length()%3B%0A%20%20%20%20%20%20%20%20if%20(length1%20%3E%20b2Settings.b2_linearSlop)%20%7B%0A%20%20%20%20%20%20%20%20%20%20this.m_u1.x%20*%3D%201.0%20%2F%20length1%3B%0A%20%20%20%20%20%20%20%20%20%20this.m_u1.y%20*%3D%201.0%20%2F%20length1%3B%0A%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20this.m_u1.SetZero()%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20C%20%3D%20this.m_maxLength1%20-%20length1%3B%0A%20%20%20%20%20%20%20%20linearError%20%3D%20b2Math.Max(linearError%2C%20-C)%3B%0A%20%20%20%20%20%20%20%20C%20%3D%20b2Math.Clamp(%0A%20%20%20%20%20%20%20%20%20%20C%20%2B%20b2Settings.b2_linearSlop%2C%0A%20%20%20%20%20%20%20%20%20%20-b2Settings.b2_maxLinearCorrection%2C%0A%20%20%20%20%20%20%20%20%20%200.0%0A%20%20%20%20%20%20%20%20)%3B%0A%20%20%20%20%20%20%20%20impulse%20%3D%20-this.m_limitMass1%20*%20C%3B%0A%20%20%20%20%20%20%20%20p1X%20%3D%20-impulse%20*%20this.m_u1.x%3B%0A%20%20%20%20%20%20%20%20p1Y%20%3D%20-impulse%20*%20this.m_u1.y%3B%0A%20%20%20%20%20%20%20%20bA.m_sweep.c.x%20%2B%3D%20bA.m_invMass%20*%20p1X%3B%0A%20%20%20%20%20%20%20%20bA.m_sweep.c.y%20%2B%3D%20bA.m_invMass%20*%20p1Y%3B%0A%20%20%20%20%20%20%20%20bA.m_sweep.a%20%2B%3D%20bA.m_invI%20*%20(r1X%20*%20p1Y%20-%20r1Y%20*%20p1X)%3B%0A%20%20%20%20%20%20%20%20bA.SynchronizeTransform()%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20if%20(this.m_limitState2%20%3D%3D%20b2Joint.e_atUpperLimit)%20%7B%0A%20%20%20%20%20%20%20%20tMat%20%3D%20bB.m_xf.R%3B%0A%20%20%20%20%20%20%20%20r2X%20%3D%20this.m_localAnchor2.x%20-%20bB.m_sweep.localCenter.x%3B%0A%20%20%20%20%20%20%20%20r2Y%20%3D%20this.m_localAnchor2.y%20-%20bB.m_sweep.localCenter.y%3B%0A%20%20%20%20%20%20%20%20tX%20%3D%20tMat.col1.x%20*%20r2X%20%2B%20tMat.col2.x%20*%20r2Y%3B%0A%20%20%20%20%20%20%20%20r2Y%20%3D%20tMat.col1.y%20*%20r2X%20%2B%20tMat.col2.y%20*%20r2Y%3B%0A%20%20%20%20%20%20%20%20r2X%20%3D%20tX%3B%0A%20%20%20%20%20%20%20%20p2X%20%3D%20bB.m_sweep.c.x%20%2B%20r2X%3B%0A%20%20%20%20%20%20%20%20p2Y%20%3D%20bB.m_sweep.c.y%20%2B%20r2Y%3B%0A%20%20%20%20%20%20%20%20this.m_u2.Set(p2X%20-%20s2X%2C%20p2Y%20-%20s2Y)%3B%0A%20%20%20%20%20%20%20%20length2%20%3D%20this.m_u2.Length()%3B%0A%20%20%20%20%20%20%20%20if%20(length2%20%3E%20b2Settings.b2_linearSlop)%20%7B%0A%20%20%20%20%20%20%20%20%20%20this.m_u2.x%20*%3D%201.0%20%2F%20length2%3B%0A%20%20%20%20%20%20%20%20%20%20this.m_u2.y%20*%3D%201.0%20%2F%20length2%3B%0A%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20this.m_u2.SetZero()%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20C%20%3D%20this.m_maxLength2%20-%20length2%3B%0A%20%20%20%20%20%20%20%20linearError%20%3D%20b2Math.Max(linearError%2C%20-C)%3B%0A%20%20%20%20%20%20%20%20C%20%3D%20b2Math.Clamp(%0A%20%20%20%20%20%20%20%20%20%20C%20%2B%20b2Settings.b2_linearSlop%2C%0A%20%20%20%20%20%20%20%20%20%20-b2Settings.b2_maxLinearCorrection%2C%0A%20%20%20%20%20%20%20%20%20%200.0%0A%20%20%20%20%20%20%20%20)%3B%0A%20%20%20%20%20%20%20%20impulse%20%3D%20-this.m_limitMass2%20*%20C%3B%0A%20%20%20%20%20%20%20%20p2X%20%3D%20-impulse%20*%20this.m_u2.x%3B%0A%20%20%20%20%20%20%20%20p2Y%20%3D%20-impulse%20*%20this.m_u2.y%3B%0A%20%20%20%20%20%20%20%20bB.m_sweep.c.x%20%2B%3D%20bB.m_invMass%20*%20p2X%3B%0A%20%20%20%20%20%20%20%20bB.m_sweep.c.y%20%2B%3D%20bB.m_invMass%20*%20p2Y%3B%0A%20%20%20%20%20%20%20%20bB.m_sweep.a%20%2B%3D%20bB.m_invI%20*%20(r2X%20*%20p2Y%20-%20r2Y%20*%20p2X)%3B%0A%20%20%20%20%20%20%20%20bB.SynchronizeTransform()%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20return%20linearError%20%3C%20b2Settings.b2_linearSlop%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20Box2D.postDefs.push(function%20()%20%7B%0A%20%20%20%20%20%20Box2D.Dynamics.Joints.b2PulleyJoint.b2_minPulleyLength%20%3D%202.0%3B%0A%20%20%20%20%7D)%3B%0A%20%20%20%20Box2D.inherit(b2PulleyJointDef%2C%20Box2D.Dynamics.Joints.b2JointDef)%3B%0A%20%20%20%20b2PulleyJointDef.prototype.__super%20%3D%0A%20%20%20%20%20%20Box2D.Dynamics.Joints.b2JointDef.prototype%3B%0A%20%20%20%20b2PulleyJointDef.b2PulleyJointDef%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20Box2D.Dynamics.Joints.b2JointDef.b2JointDef.apply(this%2C%20arguments)%3B%0A%20%20%20%20%20%20this.groundAnchorA%20%3D%20new%20b2Vec2()%3B%0A%20%20%20%20%20%20this.groundAnchorB%20%3D%20new%20b2Vec2()%3B%0A%20%20%20%20%20%20this.localAnchorA%20%3D%20new%20b2Vec2()%3B%0A%20%20%20%20%20%20this.localAnchorB%20%3D%20new%20b2Vec2()%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2PulleyJointDef.prototype.b2PulleyJointDef%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20this.__super.b2JointDef.call(this)%3B%0A%20%20%20%20%20%20this.type%20%3D%20b2Joint.e_pulleyJoint%3B%0A%20%20%20%20%20%20this.groundAnchorA.Set(-1.0%2C%201.0)%3B%0A%20%20%20%20%20%20this.groundAnchorB.Set(1.0%2C%201.0)%3B%0A%20%20%20%20%20%20this.localAnchorA.Set(-1.0%2C%200.0)%3B%0A%20%20%20%20%20%20this.localAnchorB.Set(1.0%2C%200.0)%3B%0A%20%20%20%20%20%20this.lengthA%20%3D%200.0%3B%0A%20%20%20%20%20%20this.maxLengthA%20%3D%200.0%3B%0A%20%20%20%20%20%20this.lengthB%20%3D%200.0%3B%0A%20%20%20%20%20%20this.maxLengthB%20%3D%200.0%3B%0A%20%20%20%20%20%20this.ratio%20%3D%201.0%3B%0A%20%20%20%20%20%20this.collideConnected%20%3D%20true%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2PulleyJointDef.prototype.Initialize%20%3D%20function%20(%0A%20%20%20%20%20%20bA%2C%0A%20%20%20%20%20%20bB%2C%0A%20%20%20%20%20%20gaA%2C%0A%20%20%20%20%20%20gaB%2C%0A%20%20%20%20%20%20anchorA%2C%0A%20%20%20%20%20%20anchorB%2C%0A%20%20%20%20%20%20r%0A%20%20%20%20)%20%7B%0A%20%20%20%20%20%20if%20(r%20%3D%3D%3D%20undefined)%20r%20%3D%200%3B%0A%20%20%20%20%20%20this.bodyA%20%3D%20bA%3B%0A%20%20%20%20%20%20this.bodyB%20%3D%20bB%3B%0A%20%20%20%20%20%20this.groundAnchorA.SetV(gaA)%3B%0A%20%20%20%20%20%20this.groundAnchorB.SetV(gaB)%3B%0A%20%20%20%20%20%20this.localAnchorA%20%3D%20this.bodyA.GetLocalPoint(anchorA)%3B%0A%20%20%20%20%20%20this.localAnchorB%20%3D%20this.bodyB.GetLocalPoint(anchorB)%3B%0A%20%20%20%20%20%20var%20d1X%20%3D%20anchorA.x%20-%20gaA.x%3B%0A%20%20%20%20%20%20var%20d1Y%20%3D%20anchorA.y%20-%20gaA.y%3B%0A%20%20%20%20%20%20this.lengthA%20%3D%20Math.sqrt(d1X%20*%20d1X%20%2B%20d1Y%20*%20d1Y)%3B%0A%20%20%20%20%20%20var%20d2X%20%3D%20anchorB.x%20-%20gaB.x%3B%0A%20%20%20%20%20%20var%20d2Y%20%3D%20anchorB.y%20-%20gaB.y%3B%0A%20%20%20%20%20%20this.lengthB%20%3D%20Math.sqrt(d2X%20*%20d2X%20%2B%20d2Y%20*%20d2Y)%3B%0A%20%20%20%20%20%20this.ratio%20%3D%20r%3B%0A%20%20%20%20%20%20var%20C%20%3D%20this.lengthA%20%2B%20this.ratio%20*%20this.lengthB%3B%0A%20%20%20%20%20%20this.maxLengthA%20%3D%20C%20-%20this.ratio%20*%20b2PulleyJoint.b2_minPulleyLength%3B%0A%20%20%20%20%20%20this.maxLengthB%20%3D%20(C%20-%20b2PulleyJoint.b2_minPulleyLength)%20%2F%20this.ratio%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20Box2D.inherit(b2RevoluteJoint%2C%20Box2D.Dynamics.Joints.b2Joint)%3B%0A%20%20%20%20b2RevoluteJoint.prototype.__super%20%3D%20Box2D.Dynamics.Joints.b2Joint.prototype%3B%0A%20%20%20%20b2RevoluteJoint.b2RevoluteJoint%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20Box2D.Dynamics.Joints.b2Joint.b2Joint.apply(this%2C%20arguments)%3B%0A%20%20%20%20%20%20this.K%20%3D%20new%20b2Mat22()%3B%0A%20%20%20%20%20%20this.K1%20%3D%20new%20b2Mat22()%3B%0A%20%20%20%20%20%20this.K2%20%3D%20new%20b2Mat22()%3B%0A%20%20%20%20%20%20this.K3%20%3D%20new%20b2Mat22()%3B%0A%20%20%20%20%20%20this.impulse3%20%3D%20new%20b2Vec3()%3B%0A%20%20%20%20%20%20this.impulse2%20%3D%20new%20b2Vec2()%3B%0A%20%20%20%20%20%20this.reduced%20%3D%20new%20b2Vec2()%3B%0A%20%20%20%20%20%20this.m_localAnchor1%20%3D%20new%20b2Vec2()%3B%0A%20%20%20%20%20%20this.m_localAnchor2%20%3D%20new%20b2Vec2()%3B%0A%20%20%20%20%20%20this.m_impulse%20%3D%20new%20b2Vec3()%3B%0A%20%20%20%20%20%20this.m_mass%20%3D%20new%20b2Mat33()%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2RevoluteJoint.prototype.GetAnchorA%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20return%20this.m_bodyA.GetWorldPoint(this.m_localAnchor1)%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2RevoluteJoint.prototype.GetAnchorB%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20return%20this.m_bodyB.GetWorldPoint(this.m_localAnchor2)%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2RevoluteJoint.prototype.GetReactionForce%20%3D%20function%20(inv_dt)%20%7B%0A%20%20%20%20%20%20if%20(inv_dt%20%3D%3D%3D%20undefined)%20inv_dt%20%3D%200%3B%0A%20%20%20%20%20%20return%20new%20b2Vec2(inv_dt%20*%20this.m_impulse.x%2C%20inv_dt%20*%20this.m_impulse.y)%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2RevoluteJoint.prototype.GetReactionTorque%20%3D%20function%20(inv_dt)%20%7B%0A%20%20%20%20%20%20if%20(inv_dt%20%3D%3D%3D%20undefined)%20inv_dt%20%3D%200%3B%0A%20%20%20%20%20%20return%20inv_dt%20*%20this.m_impulse.z%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2RevoluteJoint.prototype.GetJointAngle%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20return%20(%0A%20%20%20%20%20%20%20%20this.m_bodyB.m_sweep.a%20-%20this.m_bodyA.m_sweep.a%20-%20this.m_referenceAngle%0A%20%20%20%20%20%20)%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2RevoluteJoint.prototype.GetJointSpeed%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20return%20this.m_bodyB.m_angularVelocity%20-%20this.m_bodyA.m_angularVelocity%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2RevoluteJoint.prototype.IsLimitEnabled%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20return%20this.m_enableLimit%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2RevoluteJoint.prototype.EnableLimit%20%3D%20function%20(flag)%20%7B%0A%20%20%20%20%20%20this.m_enableLimit%20%3D%20flag%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2RevoluteJoint.prototype.GetLowerLimit%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20return%20this.m_lowerAngle%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2RevoluteJoint.prototype.GetUpperLimit%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20return%20this.m_upperAngle%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2RevoluteJoint.prototype.SetLimits%20%3D%20function%20(lower%2C%20upper)%20%7B%0A%20%20%20%20%20%20if%20(lower%20%3D%3D%3D%20undefined)%20lower%20%3D%200%3B%0A%20%20%20%20%20%20if%20(upper%20%3D%3D%3D%20undefined)%20upper%20%3D%200%3B%0A%20%20%20%20%20%20this.m_lowerAngle%20%3D%20lower%3B%0A%20%20%20%20%20%20this.m_upperAngle%20%3D%20upper%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2RevoluteJoint.prototype.IsMotorEnabled%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20this.m_bodyA.SetAwake(true)%3B%0A%20%20%20%20%20%20this.m_bodyB.SetAwake(true)%3B%0A%20%20%20%20%20%20return%20this.m_enableMotor%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2RevoluteJoint.prototype.EnableMotor%20%3D%20function%20(flag)%20%7B%0A%20%20%20%20%20%20this.m_enableMotor%20%3D%20flag%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2RevoluteJoint.prototype.SetMotorSpeed%20%3D%20function%20(speed)%20%7B%0A%20%20%20%20%20%20if%20(speed%20%3D%3D%3D%20undefined)%20speed%20%3D%200%3B%0A%20%20%20%20%20%20this.m_bodyA.SetAwake(true)%3B%0A%20%20%20%20%20%20this.m_bodyB.SetAwake(true)%3B%0A%20%20%20%20%20%20this.m_motorSpeed%20%3D%20speed%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2RevoluteJoint.prototype.GetMotorSpeed%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20return%20this.m_motorSpeed%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2RevoluteJoint.prototype.SetMaxMotorTorque%20%3D%20function%20(torque)%20%7B%0A%20%20%20%20%20%20if%20(torque%20%3D%3D%3D%20undefined)%20torque%20%3D%200%3B%0A%20%20%20%20%20%20this.m_maxMotorTorque%20%3D%20torque%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2RevoluteJoint.prototype.GetMotorTorque%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20return%20this.m_maxMotorTorque%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2RevoluteJoint.prototype.b2RevoluteJoint%20%3D%20function%20(def)%20%7B%0A%20%20%20%20%20%20this.__super.b2Joint.call(this%2C%20def)%3B%0A%20%20%20%20%20%20this.m_localAnchor1.SetV(def.localAnchorA)%3B%0A%20%20%20%20%20%20this.m_localAnchor2.SetV(def.localAnchorB)%3B%0A%20%20%20%20%20%20this.m_referenceAngle%20%3D%20def.referenceAngle%3B%0A%20%20%20%20%20%20this.m_impulse.SetZero()%3B%0A%20%20%20%20%20%20this.m_motorImpulse%20%3D%200.0%3B%0A%20%20%20%20%20%20this.m_lowerAngle%20%3D%20def.lowerAngle%3B%0A%20%20%20%20%20%20this.m_upperAngle%20%3D%20def.upperAngle%3B%0A%20%20%20%20%20%20this.m_maxMotorTorque%20%3D%20def.maxMotorTorque%3B%0A%20%20%20%20%20%20this.m_motorSpeed%20%3D%20def.motorSpeed%3B%0A%20%20%20%20%20%20this.m_enableLimit%20%3D%20def.enableLimit%3B%0A%20%20%20%20%20%20this.m_enableMotor%20%3D%20def.enableMotor%3B%0A%20%20%20%20%20%20this.m_limitState%20%3D%20b2Joint.e_inactiveLimit%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2RevoluteJoint.prototype.InitVelocityConstraints%20%3D%20function%20(step)%20%7B%0A%20%20%20%20%20%20var%20bA%20%3D%20this.m_bodyA%3B%0A%20%20%20%20%20%20var%20bB%20%3D%20this.m_bodyB%3B%0A%20%20%20%20%20%20var%20tMat%3B%0A%20%20%20%20%20%20var%20tX%20%3D%200%3B%0A%20%20%20%20%20%20if%20(this.m_enableMotor%20%7C%7C%20this.m_enableLimit)%20%7B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20tMat%20%3D%20bA.m_xf.R%3B%0A%20%20%20%20%20%20var%20r1X%20%3D%20this.m_localAnchor1.x%20-%20bA.m_sweep.localCenter.x%3B%0A%20%20%20%20%20%20var%20r1Y%20%3D%20this.m_localAnchor1.y%20-%20bA.m_sweep.localCenter.y%3B%0A%20%20%20%20%20%20tX%20%3D%20tMat.col1.x%20*%20r1X%20%2B%20tMat.col2.x%20*%20r1Y%3B%0A%20%20%20%20%20%20r1Y%20%3D%20tMat.col1.y%20*%20r1X%20%2B%20tMat.col2.y%20*%20r1Y%3B%0A%20%20%20%20%20%20r1X%20%3D%20tX%3B%0A%20%20%20%20%20%20tMat%20%3D%20bB.m_xf.R%3B%0A%20%20%20%20%20%20var%20r2X%20%3D%20this.m_localAnchor2.x%20-%20bB.m_sweep.localCenter.x%3B%0A%20%20%20%20%20%20var%20r2Y%20%3D%20this.m_localAnchor2.y%20-%20bB.m_sweep.localCenter.y%3B%0A%20%20%20%20%20%20tX%20%3D%20tMat.col1.x%20*%20r2X%20%2B%20tMat.col2.x%20*%20r2Y%3B%0A%20%20%20%20%20%20r2Y%20%3D%20tMat.col1.y%20*%20r2X%20%2B%20tMat.col2.y%20*%20r2Y%3B%0A%20%20%20%20%20%20r2X%20%3D%20tX%3B%0A%20%20%20%20%20%20var%20m1%20%3D%20bA.m_invMass%3B%0A%20%20%20%20%20%20var%20m2%20%3D%20bB.m_invMass%3B%0A%20%20%20%20%20%20var%20i1%20%3D%20bA.m_invI%3B%0A%20%20%20%20%20%20var%20i2%20%3D%20bB.m_invI%3B%0A%20%20%20%20%20%20this.m_mass.col1.x%20%3D%20m1%20%2B%20m2%20%2B%20r1Y%20*%20r1Y%20*%20i1%20%2B%20r2Y%20*%20r2Y%20*%20i2%3B%0A%20%20%20%20%20%20this.m_mass.col2.x%20%3D%20-r1Y%20*%20r1X%20*%20i1%20-%20r2Y%20*%20r2X%20*%20i2%3B%0A%20%20%20%20%20%20this.m_mass.col3.x%20%3D%20-r1Y%20*%20i1%20-%20r2Y%20*%20i2%3B%0A%20%20%20%20%20%20this.m_mass.col1.y%20%3D%20this.m_mass.col2.x%3B%0A%20%20%20%20%20%20this.m_mass.col2.y%20%3D%20m1%20%2B%20m2%20%2B%20r1X%20*%20r1X%20*%20i1%20%2B%20r2X%20*%20r2X%20*%20i2%3B%0A%20%20%20%20%20%20this.m_mass.col3.y%20%3D%20r1X%20*%20i1%20%2B%20r2X%20*%20i2%3B%0A%20%20%20%20%20%20this.m_mass.col1.z%20%3D%20this.m_mass.col3.x%3B%0A%20%20%20%20%20%20this.m_mass.col2.z%20%3D%20this.m_mass.col3.y%3B%0A%20%20%20%20%20%20this.m_mass.col3.z%20%3D%20i1%20%2B%20i2%3B%0A%20%20%20%20%20%20this.m_motorMass%20%3D%201.0%20%2F%20(i1%20%2B%20i2)%3B%0A%20%20%20%20%20%20if%20(this.m_enableMotor%20%3D%3D%20false)%20%7B%0A%20%20%20%20%20%20%20%20this.m_motorImpulse%20%3D%200.0%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20if%20(this.m_enableLimit)%20%7B%0A%20%20%20%20%20%20%20%20var%20jointAngle%20%3D%20bB.m_sweep.a%20-%20bA.m_sweep.a%20-%20this.m_referenceAngle%3B%0A%20%20%20%20%20%20%20%20if%20(%0A%20%20%20%20%20%20%20%20%20%20b2Math.Abs(this.m_upperAngle%20-%20this.m_lowerAngle)%20%3C%0A%20%20%20%20%20%20%20%20%20%202.0%20*%20b2Settings.b2_angularSlop%0A%20%20%20%20%20%20%20%20)%20%7B%0A%20%20%20%20%20%20%20%20%20%20this.m_limitState%20%3D%20b2Joint.e_equalLimits%3B%0A%20%20%20%20%20%20%20%20%7D%20else%20if%20(jointAngle%20%3C%3D%20this.m_lowerAngle)%20%7B%0A%20%20%20%20%20%20%20%20%20%20if%20(this.m_limitState%20!%3D%20b2Joint.e_atLowerLimit)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20this.m_impulse.z%20%3D%200.0%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20this.m_limitState%20%3D%20b2Joint.e_atLowerLimit%3B%0A%20%20%20%20%20%20%20%20%7D%20else%20if%20(jointAngle%20%3E%3D%20this.m_upperAngle)%20%7B%0A%20%20%20%20%20%20%20%20%20%20if%20(this.m_limitState%20!%3D%20b2Joint.e_atUpperLimit)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20this.m_impulse.z%20%3D%200.0%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20this.m_limitState%20%3D%20b2Joint.e_atUpperLimit%3B%0A%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20this.m_limitState%20%3D%20b2Joint.e_inactiveLimit%3B%0A%20%20%20%20%20%20%20%20%20%20this.m_impulse.z%20%3D%200.0%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20this.m_limitState%20%3D%20b2Joint.e_inactiveLimit%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20if%20(step.warmStarting)%20%7B%0A%20%20%20%20%20%20%20%20this.m_impulse.x%20*%3D%20step.dtRatio%3B%0A%20%20%20%20%20%20%20%20this.m_impulse.y%20*%3D%20step.dtRatio%3B%0A%20%20%20%20%20%20%20%20this.m_motorImpulse%20*%3D%20step.dtRatio%3B%0A%20%20%20%20%20%20%20%20var%20PX%20%3D%20this.m_impulse.x%3B%0A%20%20%20%20%20%20%20%20var%20PY%20%3D%20this.m_impulse.y%3B%0A%20%20%20%20%20%20%20%20bA.m_linearVelocity.x%20-%3D%20m1%20*%20PX%3B%0A%20%20%20%20%20%20%20%20bA.m_linearVelocity.y%20-%3D%20m1%20*%20PY%3B%0A%20%20%20%20%20%20%20%20bA.m_angularVelocity%20-%3D%0A%20%20%20%20%20%20%20%20%20%20i1%20*%20(r1X%20*%20PY%20-%20r1Y%20*%20PX%20%2B%20this.m_motorImpulse%20%2B%20this.m_impulse.z)%3B%0A%20%20%20%20%20%20%20%20bB.m_linearVelocity.x%20%2B%3D%20m2%20*%20PX%3B%0A%20%20%20%20%20%20%20%20bB.m_linearVelocity.y%20%2B%3D%20m2%20*%20PY%3B%0A%20%20%20%20%20%20%20%20bB.m_angularVelocity%20%2B%3D%0A%20%20%20%20%20%20%20%20%20%20i2%20*%20(r2X%20*%20PY%20-%20r2Y%20*%20PX%20%2B%20this.m_motorImpulse%20%2B%20this.m_impulse.z)%3B%0A%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20this.m_impulse.SetZero()%3B%0A%20%20%20%20%20%20%20%20this.m_motorImpulse%20%3D%200.0%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2RevoluteJoint.prototype.SolveVelocityConstraints%20%3D%20function%20(step)%20%7B%0A%20%20%20%20%20%20var%20bA%20%3D%20this.m_bodyA%3B%0A%20%20%20%20%20%20var%20bB%20%3D%20this.m_bodyB%3B%0A%20%20%20%20%20%20var%20tMat%3B%0A%20%20%20%20%20%20var%20tX%20%3D%200%3B%0A%20%20%20%20%20%20var%20newImpulse%20%3D%200%3B%0A%20%20%20%20%20%20var%20r1X%20%3D%200%3B%0A%20%20%20%20%20%20var%20r1Y%20%3D%200%3B%0A%20%20%20%20%20%20var%20r2X%20%3D%200%3B%0A%20%20%20%20%20%20var%20r2Y%20%3D%200%3B%0A%20%20%20%20%20%20var%20v1%20%3D%20bA.m_linearVelocity%3B%0A%20%20%20%20%20%20var%20w1%20%3D%20bA.m_angularVelocity%3B%0A%20%20%20%20%20%20var%20v2%20%3D%20bB.m_linearVelocity%3B%0A%20%20%20%20%20%20var%20w2%20%3D%20bB.m_angularVelocity%3B%0A%20%20%20%20%20%20var%20m1%20%3D%20bA.m_invMass%3B%0A%20%20%20%20%20%20var%20m2%20%3D%20bB.m_invMass%3B%0A%20%20%20%20%20%20var%20i1%20%3D%20bA.m_invI%3B%0A%20%20%20%20%20%20var%20i2%20%3D%20bB.m_invI%3B%0A%20%20%20%20%20%20if%20(this.m_enableMotor%20%26%26%20this.m_limitState%20!%3D%20b2Joint.e_equalLimits)%20%7B%0A%20%20%20%20%20%20%20%20var%20Cdot%20%3D%20w2%20-%20w1%20-%20this.m_motorSpeed%3B%0A%20%20%20%20%20%20%20%20var%20impulse%20%3D%20this.m_motorMass%20*%20-Cdot%3B%0A%20%20%20%20%20%20%20%20var%20oldImpulse%20%3D%20this.m_motorImpulse%3B%0A%20%20%20%20%20%20%20%20var%20maxImpulse%20%3D%20step.dt%20*%20this.m_maxMotorTorque%3B%0A%20%20%20%20%20%20%20%20this.m_motorImpulse%20%3D%20b2Math.Clamp(%0A%20%20%20%20%20%20%20%20%20%20this.m_motorImpulse%20%2B%20impulse%2C%0A%20%20%20%20%20%20%20%20%20%20-maxImpulse%2C%0A%20%20%20%20%20%20%20%20%20%20maxImpulse%0A%20%20%20%20%20%20%20%20)%3B%0A%20%20%20%20%20%20%20%20impulse%20%3D%20this.m_motorImpulse%20-%20oldImpulse%3B%0A%20%20%20%20%20%20%20%20w1%20-%3D%20i1%20*%20impulse%3B%0A%20%20%20%20%20%20%20%20w2%20%2B%3D%20i2%20*%20impulse%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20if%20(this.m_enableLimit%20%26%26%20this.m_limitState%20!%3D%20b2Joint.e_inactiveLimit)%20%7B%0A%20%20%20%20%20%20%20%20tMat%20%3D%20bA.m_xf.R%3B%0A%20%20%20%20%20%20%20%20r1X%20%3D%20this.m_localAnchor1.x%20-%20bA.m_sweep.localCenter.x%3B%0A%20%20%20%20%20%20%20%20r1Y%20%3D%20this.m_localAnchor1.y%20-%20bA.m_sweep.localCenter.y%3B%0A%20%20%20%20%20%20%20%20tX%20%3D%20tMat.col1.x%20*%20r1X%20%2B%20tMat.col2.x%20*%20r1Y%3B%0A%20%20%20%20%20%20%20%20r1Y%20%3D%20tMat.col1.y%20*%20r1X%20%2B%20tMat.col2.y%20*%20r1Y%3B%0A%20%20%20%20%20%20%20%20r1X%20%3D%20tX%3B%0A%20%20%20%20%20%20%20%20tMat%20%3D%20bB.m_xf.R%3B%0A%20%20%20%20%20%20%20%20r2X%20%3D%20this.m_localAnchor2.x%20-%20bB.m_sweep.localCenter.x%3B%0A%20%20%20%20%20%20%20%20r2Y%20%3D%20this.m_localAnchor2.y%20-%20bB.m_sweep.localCenter.y%3B%0A%20%20%20%20%20%20%20%20tX%20%3D%20tMat.col1.x%20*%20r2X%20%2B%20tMat.col2.x%20*%20r2Y%3B%0A%20%20%20%20%20%20%20%20r2Y%20%3D%20tMat.col1.y%20*%20r2X%20%2B%20tMat.col2.y%20*%20r2Y%3B%0A%20%20%20%20%20%20%20%20r2X%20%3D%20tX%3B%0A%20%20%20%20%20%20%20%20var%20Cdot1X%20%3D%20v2.x%20%2B%20-w2%20*%20r2Y%20-%20v1.x%20-%20-w1%20*%20r1Y%3B%0A%20%20%20%20%20%20%20%20var%20Cdot1Y%20%3D%20v2.y%20%2B%20w2%20*%20r2X%20-%20v1.y%20-%20w1%20*%20r1X%3B%0A%20%20%20%20%20%20%20%20var%20Cdot2%20%3D%20w2%20-%20w1%3B%0A%20%20%20%20%20%20%20%20this.m_mass.Solve33(this.impulse3%2C%20-Cdot1X%2C%20-Cdot1Y%2C%20-Cdot2)%3B%0A%20%20%20%20%20%20%20%20if%20(this.m_limitState%20%3D%3D%20b2Joint.e_equalLimits)%20%7B%0A%20%20%20%20%20%20%20%20%20%20this.m_impulse.Add(this.impulse3)%3B%0A%20%20%20%20%20%20%20%20%7D%20else%20if%20(this.m_limitState%20%3D%3D%20b2Joint.e_atLowerLimit)%20%7B%0A%20%20%20%20%20%20%20%20%20%20newImpulse%20%3D%20this.m_impulse.z%20%2B%20this.impulse3.z%3B%0A%20%20%20%20%20%20%20%20%20%20if%20(newImpulse%20%3C%200.0)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20this.m_mass.Solve22(this.reduced%2C%20-Cdot1X%2C%20-Cdot1Y)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20this.impulse3.x%20%3D%20this.reduced.x%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20this.impulse3.y%20%3D%20this.reduced.y%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20this.impulse3.z%20%3D%20-this.m_impulse.z%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20this.m_impulse.x%20%2B%3D%20this.reduced.x%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20this.m_impulse.y%20%2B%3D%20this.reduced.y%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20this.m_impulse.z%20%3D%200.0%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%20else%20if%20(this.m_limitState%20%3D%3D%20b2Joint.e_atUpperLimit)%20%7B%0A%20%20%20%20%20%20%20%20%20%20newImpulse%20%3D%20this.m_impulse.z%20%2B%20this.impulse3.z%3B%0A%20%20%20%20%20%20%20%20%20%20if%20(newImpulse%20%3E%200.0)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20this.m_mass.Solve22(this.reduced%2C%20-Cdot1X%2C%20-Cdot1Y)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20this.impulse3.x%20%3D%20this.reduced.x%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20this.impulse3.y%20%3D%20this.reduced.y%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20this.impulse3.z%20%3D%20-this.m_impulse.z%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20this.m_impulse.x%20%2B%3D%20this.reduced.x%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20this.m_impulse.y%20%2B%3D%20this.reduced.y%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20this.m_impulse.z%20%3D%200.0%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20v1.x%20-%3D%20m1%20*%20this.impulse3.x%3B%0A%20%20%20%20%20%20%20%20v1.y%20-%3D%20m1%20*%20this.impulse3.y%3B%0A%20%20%20%20%20%20%20%20w1%20-%3D%0A%20%20%20%20%20%20%20%20%20%20i1%20*%0A%20%20%20%20%20%20%20%20%20%20(r1X%20*%20this.impulse3.y%20-%20r1Y%20*%20this.impulse3.x%20%2B%20this.impulse3.z)%3B%0A%20%20%20%20%20%20%20%20v2.x%20%2B%3D%20m2%20*%20this.impulse3.x%3B%0A%20%20%20%20%20%20%20%20v2.y%20%2B%3D%20m2%20*%20this.impulse3.y%3B%0A%20%20%20%20%20%20%20%20w2%20%2B%3D%0A%20%20%20%20%20%20%20%20%20%20i2%20*%0A%20%20%20%20%20%20%20%20%20%20(r2X%20*%20this.impulse3.y%20-%20r2Y%20*%20this.impulse3.x%20%2B%20this.impulse3.z)%3B%0A%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20tMat%20%3D%20bA.m_xf.R%3B%0A%20%20%20%20%20%20%20%20r1X%20%3D%20this.m_localAnchor1.x%20-%20bA.m_sweep.localCenter.x%3B%0A%20%20%20%20%20%20%20%20r1Y%20%3D%20this.m_localAnchor1.y%20-%20bA.m_sweep.localCenter.y%3B%0A%20%20%20%20%20%20%20%20tX%20%3D%20tMat.col1.x%20*%20r1X%20%2B%20tMat.col2.x%20*%20r1Y%3B%0A%20%20%20%20%20%20%20%20r1Y%20%3D%20tMat.col1.y%20*%20r1X%20%2B%20tMat.col2.y%20*%20r1Y%3B%0A%20%20%20%20%20%20%20%20r1X%20%3D%20tX%3B%0A%20%20%20%20%20%20%20%20tMat%20%3D%20bB.m_xf.R%3B%0A%20%20%20%20%20%20%20%20r2X%20%3D%20this.m_localAnchor2.x%20-%20bB.m_sweep.localCenter.x%3B%0A%20%20%20%20%20%20%20%20r2Y%20%3D%20this.m_localAnchor2.y%20-%20bB.m_sweep.localCenter.y%3B%0A%20%20%20%20%20%20%20%20tX%20%3D%20tMat.col1.x%20*%20r2X%20%2B%20tMat.col2.x%20*%20r2Y%3B%0A%20%20%20%20%20%20%20%20r2Y%20%3D%20tMat.col1.y%20*%20r2X%20%2B%20tMat.col2.y%20*%20r2Y%3B%0A%20%20%20%20%20%20%20%20r2X%20%3D%20tX%3B%0A%20%20%20%20%20%20%20%20var%20CdotX%20%3D%20v2.x%20%2B%20-w2%20*%20r2Y%20-%20v1.x%20-%20-w1%20*%20r1Y%3B%0A%20%20%20%20%20%20%20%20var%20CdotY%20%3D%20v2.y%20%2B%20w2%20*%20r2X%20-%20v1.y%20-%20w1%20*%20r1X%3B%0A%20%20%20%20%20%20%20%20this.m_mass.Solve22(this.impulse2%2C%20-CdotX%2C%20-CdotY)%3B%0A%20%20%20%20%20%20%20%20this.m_impulse.x%20%2B%3D%20this.impulse2.x%3B%0A%20%20%20%20%20%20%20%20this.m_impulse.y%20%2B%3D%20this.impulse2.y%3B%0A%20%20%20%20%20%20%20%20v1.x%20-%3D%20m1%20*%20this.impulse2.x%3B%0A%20%20%20%20%20%20%20%20v1.y%20-%3D%20m1%20*%20this.impulse2.y%3B%0A%20%20%20%20%20%20%20%20w1%20-%3D%20i1%20*%20(r1X%20*%20this.impulse2.y%20-%20r1Y%20*%20this.impulse2.x)%3B%0A%20%20%20%20%20%20%20%20v2.x%20%2B%3D%20m2%20*%20this.impulse2.x%3B%0A%20%20%20%20%20%20%20%20v2.y%20%2B%3D%20m2%20*%20this.impulse2.y%3B%0A%20%20%20%20%20%20%20%20w2%20%2B%3D%20i2%20*%20(r2X%20*%20this.impulse2.y%20-%20r2Y%20*%20this.impulse2.x)%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20bA.m_linearVelocity.SetV(v1)%3B%0A%20%20%20%20%20%20bA.m_angularVelocity%20%3D%20w1%3B%0A%20%20%20%20%20%20bB.m_linearVelocity.SetV(v2)%3B%0A%20%20%20%20%20%20bB.m_angularVelocity%20%3D%20w2%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2RevoluteJoint.prototype.SolvePositionConstraints%20%3D%20function%20(baumgarte)%20%7B%0A%20%20%20%20%20%20if%20(baumgarte%20%3D%3D%3D%20undefined)%20baumgarte%20%3D%200%3B%0A%20%20%20%20%20%20var%20oldLimitImpulse%20%3D%200%3B%0A%20%20%20%20%20%20var%20C%20%3D%200%3B%0A%20%20%20%20%20%20var%20tMat%3B%0A%20%20%20%20%20%20var%20bA%20%3D%20this.m_bodyA%3B%0A%20%20%20%20%20%20var%20bB%20%3D%20this.m_bodyB%3B%0A%20%20%20%20%20%20var%20angularError%20%3D%200.0%3B%0A%20%20%20%20%20%20var%20positionError%20%3D%200.0%3B%0A%20%20%20%20%20%20var%20tX%20%3D%200%3B%0A%20%20%20%20%20%20var%20impulseX%20%3D%200%3B%0A%20%20%20%20%20%20var%20impulseY%20%3D%200%3B%0A%20%20%20%20%20%20if%20(this.m_enableLimit%20%26%26%20this.m_limitState%20!%3D%20b2Joint.e_inactiveLimit)%20%7B%0A%20%20%20%20%20%20%20%20var%20angle%20%3D%20bB.m_sweep.a%20-%20bA.m_sweep.a%20-%20this.m_referenceAngle%3B%0A%20%20%20%20%20%20%20%20var%20limitImpulse%20%3D%200.0%3B%0A%20%20%20%20%20%20%20%20if%20(this.m_limitState%20%3D%3D%20b2Joint.e_equalLimits)%20%7B%0A%20%20%20%20%20%20%20%20%20%20C%20%3D%20b2Math.Clamp(%0A%20%20%20%20%20%20%20%20%20%20%20%20angle%20-%20this.m_lowerAngle%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20-b2Settings.b2_maxAngularCorrection%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20b2Settings.b2_maxAngularCorrection%0A%20%20%20%20%20%20%20%20%20%20)%3B%0A%20%20%20%20%20%20%20%20%20%20limitImpulse%20%3D%20-this.m_motorMass%20*%20C%3B%0A%20%20%20%20%20%20%20%20%20%20angularError%20%3D%20b2Math.Abs(C)%3B%0A%20%20%20%20%20%20%20%20%7D%20else%20if%20(this.m_limitState%20%3D%3D%20b2Joint.e_atLowerLimit)%20%7B%0A%20%20%20%20%20%20%20%20%20%20C%20%3D%20angle%20-%20this.m_lowerAngle%3B%0A%20%20%20%20%20%20%20%20%20%20angularError%20%3D%20-C%3B%0A%20%20%20%20%20%20%20%20%20%20C%20%3D%20b2Math.Clamp(%0A%20%20%20%20%20%20%20%20%20%20%20%20C%20%2B%20b2Settings.b2_angularSlop%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20-b2Settings.b2_maxAngularCorrection%2C%0A%20%20%20%20%20%20%20%20%20%20%20%200.0%0A%20%20%20%20%20%20%20%20%20%20)%3B%0A%20%20%20%20%20%20%20%20%20%20limitImpulse%20%3D%20-this.m_motorMass%20*%20C%3B%0A%20%20%20%20%20%20%20%20%7D%20else%20if%20(this.m_limitState%20%3D%3D%20b2Joint.e_atUpperLimit)%20%7B%0A%20%20%20%20%20%20%20%20%20%20C%20%3D%20angle%20-%20this.m_upperAngle%3B%0A%20%20%20%20%20%20%20%20%20%20angularError%20%3D%20C%3B%0A%20%20%20%20%20%20%20%20%20%20C%20%3D%20b2Math.Clamp(%0A%20%20%20%20%20%20%20%20%20%20%20%20C%20-%20b2Settings.b2_angularSlop%2C%0A%20%20%20%20%20%20%20%20%20%20%20%200.0%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20b2Settings.b2_maxAngularCorrection%0A%20%20%20%20%20%20%20%20%20%20)%3B%0A%20%20%20%20%20%20%20%20%20%20limitImpulse%20%3D%20-this.m_motorMass%20*%20C%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20bA.m_sweep.a%20-%3D%20bA.m_invI%20*%20limitImpulse%3B%0A%20%20%20%20%20%20%20%20bB.m_sweep.a%20%2B%3D%20bB.m_invI%20*%20limitImpulse%3B%0A%20%20%20%20%20%20%20%20bA.SynchronizeTransform()%3B%0A%20%20%20%20%20%20%20%20bB.SynchronizeTransform()%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20tMat%20%3D%20bA.m_xf.R%3B%0A%20%20%20%20%20%20%20%20var%20r1X%20%3D%20this.m_localAnchor1.x%20-%20bA.m_sweep.localCenter.x%3B%0A%20%20%20%20%20%20%20%20var%20r1Y%20%3D%20this.m_localAnchor1.y%20-%20bA.m_sweep.localCenter.y%3B%0A%20%20%20%20%20%20%20%20tX%20%3D%20tMat.col1.x%20*%20r1X%20%2B%20tMat.col2.x%20*%20r1Y%3B%0A%20%20%20%20%20%20%20%20r1Y%20%3D%20tMat.col1.y%20*%20r1X%20%2B%20tMat.col2.y%20*%20r1Y%3B%0A%20%20%20%20%20%20%20%20r1X%20%3D%20tX%3B%0A%20%20%20%20%20%20%20%20tMat%20%3D%20bB.m_xf.R%3B%0A%20%20%20%20%20%20%20%20var%20r2X%20%3D%20this.m_localAnchor2.x%20-%20bB.m_sweep.localCenter.x%3B%0A%20%20%20%20%20%20%20%20var%20r2Y%20%3D%20this.m_localAnchor2.y%20-%20bB.m_sweep.localCenter.y%3B%0A%20%20%20%20%20%20%20%20tX%20%3D%20tMat.col1.x%20*%20r2X%20%2B%20tMat.col2.x%20*%20r2Y%3B%0A%20%20%20%20%20%20%20%20r2Y%20%3D%20tMat.col1.y%20*%20r2X%20%2B%20tMat.col2.y%20*%20r2Y%3B%0A%20%20%20%20%20%20%20%20r2X%20%3D%20tX%3B%0A%20%20%20%20%20%20%20%20var%20CX%20%3D%20bB.m_sweep.c.x%20%2B%20r2X%20-%20bA.m_sweep.c.x%20-%20r1X%3B%0A%20%20%20%20%20%20%20%20var%20CY%20%3D%20bB.m_sweep.c.y%20%2B%20r2Y%20-%20bA.m_sweep.c.y%20-%20r1Y%3B%0A%20%20%20%20%20%20%20%20var%20CLengthSquared%20%3D%20CX%20*%20CX%20%2B%20CY%20*%20CY%3B%0A%20%20%20%20%20%20%20%20var%20CLength%20%3D%20Math.sqrt(CLengthSquared)%3B%0A%20%20%20%20%20%20%20%20positionError%20%3D%20CLength%3B%0A%20%20%20%20%20%20%20%20var%20invMass1%20%3D%20bA.m_invMass%3B%0A%20%20%20%20%20%20%20%20var%20invMass2%20%3D%20bB.m_invMass%3B%0A%20%20%20%20%20%20%20%20var%20invI1%20%3D%20bA.m_invI%3B%0A%20%20%20%20%20%20%20%20var%20invI2%20%3D%20bB.m_invI%3B%0A%20%20%20%20%20%20%20%20var%20k_allowedStretch%20%3D%2010.0%20*%20b2Settings.b2_linearSlop%3B%0A%20%20%20%20%20%20%20%20if%20(CLengthSquared%20%3E%20k_allowedStretch%20*%20k_allowedStretch)%20%7B%0A%20%20%20%20%20%20%20%20%20%20var%20uX%20%3D%20CX%20%2F%20CLength%3B%0A%20%20%20%20%20%20%20%20%20%20var%20uY%20%3D%20CY%20%2F%20CLength%3B%0A%20%20%20%20%20%20%20%20%20%20var%20k%20%3D%20invMass1%20%2B%20invMass2%3B%0A%20%20%20%20%20%20%20%20%20%20var%20m%20%3D%201.0%20%2F%20k%3B%0A%20%20%20%20%20%20%20%20%20%20impulseX%20%3D%20m%20*%20-CX%3B%0A%20%20%20%20%20%20%20%20%20%20impulseY%20%3D%20m%20*%20-CY%3B%0A%20%20%20%20%20%20%20%20%20%20var%20k_beta%20%3D%200.5%3B%0A%20%20%20%20%20%20%20%20%20%20bA.m_sweep.c.x%20-%3D%20k_beta%20*%20invMass1%20*%20impulseX%3B%0A%20%20%20%20%20%20%20%20%20%20bA.m_sweep.c.y%20-%3D%20k_beta%20*%20invMass1%20*%20impulseY%3B%0A%20%20%20%20%20%20%20%20%20%20bB.m_sweep.c.x%20%2B%3D%20k_beta%20*%20invMass2%20*%20impulseX%3B%0A%20%20%20%20%20%20%20%20%20%20bB.m_sweep.c.y%20%2B%3D%20k_beta%20*%20invMass2%20*%20impulseY%3B%0A%20%20%20%20%20%20%20%20%20%20CX%20%3D%20bB.m_sweep.c.x%20%2B%20r2X%20-%20bA.m_sweep.c.x%20-%20r1X%3B%0A%20%20%20%20%20%20%20%20%20%20CY%20%3D%20bB.m_sweep.c.y%20%2B%20r2Y%20-%20bA.m_sweep.c.y%20-%20r1Y%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20this.K1.col1.x%20%3D%20invMass1%20%2B%20invMass2%3B%0A%20%20%20%20%20%20%20%20this.K1.col2.x%20%3D%200.0%3B%0A%20%20%20%20%20%20%20%20this.K1.col1.y%20%3D%200.0%3B%0A%20%20%20%20%20%20%20%20this.K1.col2.y%20%3D%20invMass1%20%2B%20invMass2%3B%0A%20%20%20%20%20%20%20%20this.K2.col1.x%20%3D%20invI1%20*%20r1Y%20*%20r1Y%3B%0A%20%20%20%20%20%20%20%20this.K2.col2.x%20%3D%20-invI1%20*%20r1X%20*%20r1Y%3B%0A%20%20%20%20%20%20%20%20this.K2.col1.y%20%3D%20-invI1%20*%20r1X%20*%20r1Y%3B%0A%20%20%20%20%20%20%20%20this.K2.col2.y%20%3D%20invI1%20*%20r1X%20*%20r1X%3B%0A%20%20%20%20%20%20%20%20this.K3.col1.x%20%3D%20invI2%20*%20r2Y%20*%20r2Y%3B%0A%20%20%20%20%20%20%20%20this.K3.col2.x%20%3D%20-invI2%20*%20r2X%20*%20r2Y%3B%0A%20%20%20%20%20%20%20%20this.K3.col1.y%20%3D%20-invI2%20*%20r2X%20*%20r2Y%3B%0A%20%20%20%20%20%20%20%20this.K3.col2.y%20%3D%20invI2%20*%20r2X%20*%20r2X%3B%0A%20%20%20%20%20%20%20%20this.K.SetM(this.K1)%3B%0A%20%20%20%20%20%20%20%20this.K.AddM(this.K2)%3B%0A%20%20%20%20%20%20%20%20this.K.AddM(this.K3)%3B%0A%20%20%20%20%20%20%20%20this.K.Solve(b2RevoluteJoint.tImpulse%2C%20-CX%2C%20-CY)%3B%0A%20%20%20%20%20%20%20%20impulseX%20%3D%20b2RevoluteJoint.tImpulse.x%3B%0A%20%20%20%20%20%20%20%20impulseY%20%3D%20b2RevoluteJoint.tImpulse.y%3B%0A%20%20%20%20%20%20%20%20bA.m_sweep.c.x%20-%3D%20bA.m_invMass%20*%20impulseX%3B%0A%20%20%20%20%20%20%20%20bA.m_sweep.c.y%20-%3D%20bA.m_invMass%20*%20impulseY%3B%0A%20%20%20%20%20%20%20%20bA.m_sweep.a%20-%3D%20bA.m_invI%20*%20(r1X%20*%20impulseY%20-%20r1Y%20*%20impulseX)%3B%0A%20%20%20%20%20%20%20%20bB.m_sweep.c.x%20%2B%3D%20bB.m_invMass%20*%20impulseX%3B%0A%20%20%20%20%20%20%20%20bB.m_sweep.c.y%20%2B%3D%20bB.m_invMass%20*%20impulseY%3B%0A%20%20%20%20%20%20%20%20bB.m_sweep.a%20%2B%3D%20bB.m_invI%20*%20(r2X%20*%20impulseY%20-%20r2Y%20*%20impulseX)%3B%0A%20%20%20%20%20%20%20%20bA.SynchronizeTransform()%3B%0A%20%20%20%20%20%20%20%20bB.SynchronizeTransform()%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20return%20(%0A%20%20%20%20%20%20%20%20positionError%20%3C%3D%20b2Settings.b2_linearSlop%20%26%26%0A%20%20%20%20%20%20%20%20angularError%20%3C%3D%20b2Settings.b2_angularSlop%0A%20%20%20%20%20%20)%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20Box2D.postDefs.push(function%20()%20%7B%0A%20%20%20%20%20%20Box2D.Dynamics.Joints.b2RevoluteJoint.tImpulse%20%3D%20new%20b2Vec2()%3B%0A%20%20%20%20%7D)%3B%0A%20%20%20%20Box2D.inherit(b2RevoluteJointDef%2C%20Box2D.Dynamics.Joints.b2JointDef)%3B%0A%20%20%20%20b2RevoluteJointDef.prototype.__super%20%3D%0A%20%20%20%20%20%20Box2D.Dynamics.Joints.b2JointDef.prototype%3B%0A%20%20%20%20b2RevoluteJointDef.b2RevoluteJointDef%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20Box2D.Dynamics.Joints.b2JointDef.b2JointDef.apply(this%2C%20arguments)%3B%0A%20%20%20%20%20%20this.localAnchorA%20%3D%20new%20b2Vec2()%3B%0A%20%20%20%20%20%20this.localAnchorB%20%3D%20new%20b2Vec2()%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2RevoluteJointDef.prototype.b2RevoluteJointDef%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20this.__super.b2JointDef.call(this)%3B%0A%20%20%20%20%20%20this.type%20%3D%20b2Joint.e_revoluteJoint%3B%0A%20%20%20%20%20%20this.localAnchorA.Set(0.0%2C%200.0)%3B%0A%20%20%20%20%20%20this.localAnchorB.Set(0.0%2C%200.0)%3B%0A%20%20%20%20%20%20this.referenceAngle%20%3D%200.0%3B%0A%20%20%20%20%20%20this.lowerAngle%20%3D%200.0%3B%0A%20%20%20%20%20%20this.upperAngle%20%3D%200.0%3B%0A%20%20%20%20%20%20this.maxMotorTorque%20%3D%200.0%3B%0A%20%20%20%20%20%20this.motorSpeed%20%3D%200.0%3B%0A%20%20%20%20%20%20this.enableLimit%20%3D%20false%3B%0A%20%20%20%20%20%20this.enableMotor%20%3D%20false%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2RevoluteJointDef.prototype.Initialize%20%3D%20function%20(bA%2C%20bB%2C%20anchor)%20%7B%0A%20%20%20%20%20%20this.bodyA%20%3D%20bA%3B%0A%20%20%20%20%20%20this.bodyB%20%3D%20bB%3B%0A%20%20%20%20%20%20this.localAnchorA%20%3D%20this.bodyA.GetLocalPoint(anchor)%3B%0A%20%20%20%20%20%20this.localAnchorB%20%3D%20this.bodyB.GetLocalPoint(anchor)%3B%0A%20%20%20%20%20%20this.referenceAngle%20%3D%20this.bodyB.GetAngle()%20-%20this.bodyA.GetAngle()%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20Box2D.inherit(b2WeldJoint%2C%20Box2D.Dynamics.Joints.b2Joint)%3B%0A%20%20%20%20b2WeldJoint.prototype.__super%20%3D%20Box2D.Dynamics.Joints.b2Joint.prototype%3B%0A%20%20%20%20b2WeldJoint.b2WeldJoint%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20Box2D.Dynamics.Joints.b2Joint.b2Joint.apply(this%2C%20arguments)%3B%0A%20%20%20%20%20%20this.m_localAnchorA%20%3D%20new%20b2Vec2()%3B%0A%20%20%20%20%20%20this.m_localAnchorB%20%3D%20new%20b2Vec2()%3B%0A%20%20%20%20%20%20this.m_impulse%20%3D%20new%20b2Vec3()%3B%0A%20%20%20%20%20%20this.m_mass%20%3D%20new%20b2Mat33()%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2WeldJoint.prototype.GetAnchorA%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20return%20this.m_bodyA.GetWorldPoint(this.m_localAnchorA)%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2WeldJoint.prototype.GetAnchorB%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20return%20this.m_bodyB.GetWorldPoint(this.m_localAnchorB)%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2WeldJoint.prototype.GetReactionForce%20%3D%20function%20(inv_dt)%20%7B%0A%20%20%20%20%20%20if%20(inv_dt%20%3D%3D%3D%20undefined)%20inv_dt%20%3D%200%3B%0A%20%20%20%20%20%20return%20new%20b2Vec2(inv_dt%20*%20this.m_impulse.x%2C%20inv_dt%20*%20this.m_impulse.y)%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2WeldJoint.prototype.GetReactionTorque%20%3D%20function%20(inv_dt)%20%7B%0A%20%20%20%20%20%20if%20(inv_dt%20%3D%3D%3D%20undefined)%20inv_dt%20%3D%200%3B%0A%20%20%20%20%20%20return%20inv_dt%20*%20this.m_impulse.z%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2WeldJoint.prototype.b2WeldJoint%20%3D%20function%20(def)%20%7B%0A%20%20%20%20%20%20this.__super.b2Joint.call(this%2C%20def)%3B%0A%20%20%20%20%20%20this.m_localAnchorA.SetV(def.localAnchorA)%3B%0A%20%20%20%20%20%20this.m_localAnchorB.SetV(def.localAnchorB)%3B%0A%20%20%20%20%20%20this.m_referenceAngle%20%3D%20def.referenceAngle%3B%0A%20%20%20%20%20%20this.m_impulse.SetZero()%3B%0A%20%20%20%20%20%20this.m_mass%20%3D%20new%20b2Mat33()%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2WeldJoint.prototype.InitVelocityConstraints%20%3D%20function%20(step)%20%7B%0A%20%20%20%20%20%20var%20tMat%3B%0A%20%20%20%20%20%20var%20tX%20%3D%200%3B%0A%20%20%20%20%20%20var%20bA%20%3D%20this.m_bodyA%3B%0A%20%20%20%20%20%20var%20bB%20%3D%20this.m_bodyB%3B%0A%20%20%20%20%20%20tMat%20%3D%20bA.m_xf.R%3B%0A%20%20%20%20%20%20var%20rAX%20%3D%20this.m_localAnchorA.x%20-%20bA.m_sweep.localCenter.x%3B%0A%20%20%20%20%20%20var%20rAY%20%3D%20this.m_localAnchorA.y%20-%20bA.m_sweep.localCenter.y%3B%0A%20%20%20%20%20%20tX%20%3D%20tMat.col1.x%20*%20rAX%20%2B%20tMat.col2.x%20*%20rAY%3B%0A%20%20%20%20%20%20rAY%20%3D%20tMat.col1.y%20*%20rAX%20%2B%20tMat.col2.y%20*%20rAY%3B%0A%20%20%20%20%20%20rAX%20%3D%20tX%3B%0A%20%20%20%20%20%20tMat%20%3D%20bB.m_xf.R%3B%0A%20%20%20%20%20%20var%20rBX%20%3D%20this.m_localAnchorB.x%20-%20bB.m_sweep.localCenter.x%3B%0A%20%20%20%20%20%20var%20rBY%20%3D%20this.m_localAnchorB.y%20-%20bB.m_sweep.localCenter.y%3B%0A%20%20%20%20%20%20tX%20%3D%20tMat.col1.x%20*%20rBX%20%2B%20tMat.col2.x%20*%20rBY%3B%0A%20%20%20%20%20%20rBY%20%3D%20tMat.col1.y%20*%20rBX%20%2B%20tMat.col2.y%20*%20rBY%3B%0A%20%20%20%20%20%20rBX%20%3D%20tX%3B%0A%20%20%20%20%20%20var%20mA%20%3D%20bA.m_invMass%3B%0A%20%20%20%20%20%20var%20mB%20%3D%20bB.m_invMass%3B%0A%20%20%20%20%20%20var%20iA%20%3D%20bA.m_invI%3B%0A%20%20%20%20%20%20var%20iB%20%3D%20bB.m_invI%3B%0A%20%20%20%20%20%20this.m_mass.col1.x%20%3D%20mA%20%2B%20mB%20%2B%20rAY%20*%20rAY%20*%20iA%20%2B%20rBY%20*%20rBY%20*%20iB%3B%0A%20%20%20%20%20%20this.m_mass.col2.x%20%3D%20-rAY%20*%20rAX%20*%20iA%20-%20rBY%20*%20rBX%20*%20iB%3B%0A%20%20%20%20%20%20this.m_mass.col3.x%20%3D%20-rAY%20*%20iA%20-%20rBY%20*%20iB%3B%0A%20%20%20%20%20%20this.m_mass.col1.y%20%3D%20this.m_mass.col2.x%3B%0A%20%20%20%20%20%20this.m_mass.col2.y%20%3D%20mA%20%2B%20mB%20%2B%20rAX%20*%20rAX%20*%20iA%20%2B%20rBX%20*%20rBX%20*%20iB%3B%0A%20%20%20%20%20%20this.m_mass.col3.y%20%3D%20rAX%20*%20iA%20%2B%20rBX%20*%20iB%3B%0A%20%20%20%20%20%20this.m_mass.col1.z%20%3D%20this.m_mass.col3.x%3B%0A%20%20%20%20%20%20this.m_mass.col2.z%20%3D%20this.m_mass.col3.y%3B%0A%20%20%20%20%20%20this.m_mass.col3.z%20%3D%20iA%20%2B%20iB%3B%0A%20%20%20%20%20%20if%20(step.warmStarting)%20%7B%0A%20%20%20%20%20%20%20%20this.m_impulse.x%20*%3D%20step.dtRatio%3B%0A%20%20%20%20%20%20%20%20this.m_impulse.y%20*%3D%20step.dtRatio%3B%0A%20%20%20%20%20%20%20%20this.m_impulse.z%20*%3D%20step.dtRatio%3B%0A%20%20%20%20%20%20%20%20bA.m_linearVelocity.x%20-%3D%20mA%20*%20this.m_impulse.x%3B%0A%20%20%20%20%20%20%20%20bA.m_linearVelocity.y%20-%3D%20mA%20*%20this.m_impulse.y%3B%0A%20%20%20%20%20%20%20%20bA.m_angularVelocity%20-%3D%0A%20%20%20%20%20%20%20%20%20%20iA%20*%0A%20%20%20%20%20%20%20%20%20%20(rAX%20*%20this.m_impulse.y%20-%20rAY%20*%20this.m_impulse.x%20%2B%20this.m_impulse.z)%3B%0A%20%20%20%20%20%20%20%20bB.m_linearVelocity.x%20%2B%3D%20mB%20*%20this.m_impulse.x%3B%0A%20%20%20%20%20%20%20%20bB.m_linearVelocity.y%20%2B%3D%20mB%20*%20this.m_impulse.y%3B%0A%20%20%20%20%20%20%20%20bB.m_angularVelocity%20%2B%3D%0A%20%20%20%20%20%20%20%20%20%20iB%20*%0A%20%20%20%20%20%20%20%20%20%20(rBX%20*%20this.m_impulse.y%20-%20rBY%20*%20this.m_impulse.x%20%2B%20this.m_impulse.z)%3B%0A%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20this.m_impulse.SetZero()%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2WeldJoint.prototype.SolveVelocityConstraints%20%3D%20function%20(step)%20%7B%0A%20%20%20%20%20%20var%20tMat%3B%0A%20%20%20%20%20%20var%20tX%20%3D%200%3B%0A%20%20%20%20%20%20var%20bA%20%3D%20this.m_bodyA%3B%0A%20%20%20%20%20%20var%20bB%20%3D%20this.m_bodyB%3B%0A%20%20%20%20%20%20var%20vA%20%3D%20bA.m_linearVelocity%3B%0A%20%20%20%20%20%20var%20wA%20%3D%20bA.m_angularVelocity%3B%0A%20%20%20%20%20%20var%20vB%20%3D%20bB.m_linearVelocity%3B%0A%20%20%20%20%20%20var%20wB%20%3D%20bB.m_angularVelocity%3B%0A%20%20%20%20%20%20var%20mA%20%3D%20bA.m_invMass%3B%0A%20%20%20%20%20%20var%20mB%20%3D%20bB.m_invMass%3B%0A%20%20%20%20%20%20var%20iA%20%3D%20bA.m_invI%3B%0A%20%20%20%20%20%20var%20iB%20%3D%20bB.m_invI%3B%0A%20%20%20%20%20%20tMat%20%3D%20bA.m_xf.R%3B%0A%20%20%20%20%20%20var%20rAX%20%3D%20this.m_localAnchorA.x%20-%20bA.m_sweep.localCenter.x%3B%0A%20%20%20%20%20%20var%20rAY%20%3D%20this.m_localAnchorA.y%20-%20bA.m_sweep.localCenter.y%3B%0A%20%20%20%20%20%20tX%20%3D%20tMat.col1.x%20*%20rAX%20%2B%20tMat.col2.x%20*%20rAY%3B%0A%20%20%20%20%20%20rAY%20%3D%20tMat.col1.y%20*%20rAX%20%2B%20tMat.col2.y%20*%20rAY%3B%0A%20%20%20%20%20%20rAX%20%3D%20tX%3B%0A%20%20%20%20%20%20tMat%20%3D%20bB.m_xf.R%3B%0A%20%20%20%20%20%20var%20rBX%20%3D%20this.m_localAnchorB.x%20-%20bB.m_sweep.localCenter.x%3B%0A%20%20%20%20%20%20var%20rBY%20%3D%20this.m_localAnchorB.y%20-%20bB.m_sweep.localCenter.y%3B%0A%20%20%20%20%20%20tX%20%3D%20tMat.col1.x%20*%20rBX%20%2B%20tMat.col2.x%20*%20rBY%3B%0A%20%20%20%20%20%20rBY%20%3D%20tMat.col1.y%20*%20rBX%20%2B%20tMat.col2.y%20*%20rBY%3B%0A%20%20%20%20%20%20rBX%20%3D%20tX%3B%0A%20%20%20%20%20%20var%20Cdot1X%20%3D%20vB.x%20-%20wB%20*%20rBY%20-%20vA.x%20%2B%20wA%20*%20rAY%3B%0A%20%20%20%20%20%20var%20Cdot1Y%20%3D%20vB.y%20%2B%20wB%20*%20rBX%20-%20vA.y%20-%20wA%20*%20rAX%3B%0A%20%20%20%20%20%20var%20Cdot2%20%3D%20wB%20-%20wA%3B%0A%20%20%20%20%20%20var%20impulse%20%3D%20new%20b2Vec3()%3B%0A%20%20%20%20%20%20this.m_mass.Solve33(impulse%2C%20-Cdot1X%2C%20-Cdot1Y%2C%20-Cdot2)%3B%0A%20%20%20%20%20%20this.m_impulse.Add(impulse)%3B%0A%20%20%20%20%20%20vA.x%20-%3D%20mA%20*%20impulse.x%3B%0A%20%20%20%20%20%20vA.y%20-%3D%20mA%20*%20impulse.y%3B%0A%20%20%20%20%20%20wA%20-%3D%20iA%20*%20(rAX%20*%20impulse.y%20-%20rAY%20*%20impulse.x%20%2B%20impulse.z)%3B%0A%20%20%20%20%20%20vB.x%20%2B%3D%20mB%20*%20impulse.x%3B%0A%20%20%20%20%20%20vB.y%20%2B%3D%20mB%20*%20impulse.y%3B%0A%20%20%20%20%20%20wB%20%2B%3D%20iB%20*%20(rBX%20*%20impulse.y%20-%20rBY%20*%20impulse.x%20%2B%20impulse.z)%3B%0A%20%20%20%20%20%20bA.m_angularVelocity%20%3D%20wA%3B%0A%20%20%20%20%20%20bB.m_angularVelocity%20%3D%20wB%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2WeldJoint.prototype.SolvePositionConstraints%20%3D%20function%20(baumgarte)%20%7B%0A%20%20%20%20%20%20if%20(baumgarte%20%3D%3D%3D%20undefined)%20baumgarte%20%3D%200%3B%0A%20%20%20%20%20%20var%20tMat%3B%0A%20%20%20%20%20%20var%20tX%20%3D%200%3B%0A%20%20%20%20%20%20var%20bA%20%3D%20this.m_bodyA%3B%0A%20%20%20%20%20%20var%20bB%20%3D%20this.m_bodyB%3B%0A%20%20%20%20%20%20tMat%20%3D%20bA.m_xf.R%3B%0A%20%20%20%20%20%20var%20rAX%20%3D%20this.m_localAnchorA.x%20-%20bA.m_sweep.localCenter.x%3B%0A%20%20%20%20%20%20var%20rAY%20%3D%20this.m_localAnchorA.y%20-%20bA.m_sweep.localCenter.y%3B%0A%20%20%20%20%20%20tX%20%3D%20tMat.col1.x%20*%20rAX%20%2B%20tMat.col2.x%20*%20rAY%3B%0A%20%20%20%20%20%20rAY%20%3D%20tMat.col1.y%20*%20rAX%20%2B%20tMat.col2.y%20*%20rAY%3B%0A%20%20%20%20%20%20rAX%20%3D%20tX%3B%0A%20%20%20%20%20%20tMat%20%3D%20bB.m_xf.R%3B%0A%20%20%20%20%20%20var%20rBX%20%3D%20this.m_localAnchorB.x%20-%20bB.m_sweep.localCenter.x%3B%0A%20%20%20%20%20%20var%20rBY%20%3D%20this.m_localAnchorB.y%20-%20bB.m_sweep.localCenter.y%3B%0A%20%20%20%20%20%20tX%20%3D%20tMat.col1.x%20*%20rBX%20%2B%20tMat.col2.x%20*%20rBY%3B%0A%20%20%20%20%20%20rBY%20%3D%20tMat.col1.y%20*%20rBX%20%2B%20tMat.col2.y%20*%20rBY%3B%0A%20%20%20%20%20%20rBX%20%3D%20tX%3B%0A%20%20%20%20%20%20var%20mA%20%3D%20bA.m_invMass%3B%0A%20%20%20%20%20%20var%20mB%20%3D%20bB.m_invMass%3B%0A%20%20%20%20%20%20var%20iA%20%3D%20bA.m_invI%3B%0A%20%20%20%20%20%20var%20iB%20%3D%20bB.m_invI%3B%0A%20%20%20%20%20%20var%20C1X%20%3D%20bB.m_sweep.c.x%20%2B%20rBX%20-%20bA.m_sweep.c.x%20-%20rAX%3B%0A%20%20%20%20%20%20var%20C1Y%20%3D%20bB.m_sweep.c.y%20%2B%20rBY%20-%20bA.m_sweep.c.y%20-%20rAY%3B%0A%20%20%20%20%20%20var%20C2%20%3D%20bB.m_sweep.a%20-%20bA.m_sweep.a%20-%20this.m_referenceAngle%3B%0A%20%20%20%20%20%20var%20k_allowedStretch%20%3D%2010.0%20*%20b2Settings.b2_linearSlop%3B%0A%20%20%20%20%20%20var%20positionError%20%3D%20Math.sqrt(C1X%20*%20C1X%20%2B%20C1Y%20*%20C1Y)%3B%0A%20%20%20%20%20%20var%20angularError%20%3D%20b2Math.Abs(C2)%3B%0A%20%20%20%20%20%20if%20(positionError%20%3E%20k_allowedStretch)%20%7B%0A%20%20%20%20%20%20%20%20iA%20*%3D%201.0%3B%0A%20%20%20%20%20%20%20%20iB%20*%3D%201.0%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20this.m_mass.col1.x%20%3D%20mA%20%2B%20mB%20%2B%20rAY%20*%20rAY%20*%20iA%20%2B%20rBY%20*%20rBY%20*%20iB%3B%0A%20%20%20%20%20%20this.m_mass.col2.x%20%3D%20-rAY%20*%20rAX%20*%20iA%20-%20rBY%20*%20rBX%20*%20iB%3B%0A%20%20%20%20%20%20this.m_mass.col3.x%20%3D%20-rAY%20*%20iA%20-%20rBY%20*%20iB%3B%0A%20%20%20%20%20%20this.m_mass.col1.y%20%3D%20this.m_mass.col2.x%3B%0A%20%20%20%20%20%20this.m_mass.col2.y%20%3D%20mA%20%2B%20mB%20%2B%20rAX%20*%20rAX%20*%20iA%20%2B%20rBX%20*%20rBX%20*%20iB%3B%0A%20%20%20%20%20%20this.m_mass.col3.y%20%3D%20rAX%20*%20iA%20%2B%20rBX%20*%20iB%3B%0A%20%20%20%20%20%20this.m_mass.col1.z%20%3D%20this.m_mass.col3.x%3B%0A%20%20%20%20%20%20this.m_mass.col2.z%20%3D%20this.m_mass.col3.y%3B%0A%20%20%20%20%20%20this.m_mass.col3.z%20%3D%20iA%20%2B%20iB%3B%0A%20%20%20%20%20%20var%20impulse%20%3D%20new%20b2Vec3()%3B%0A%20%20%20%20%20%20this.m_mass.Solve33(impulse%2C%20-C1X%2C%20-C1Y%2C%20-C2)%3B%0A%20%20%20%20%20%20bA.m_sweep.c.x%20-%3D%20mA%20*%20impulse.x%3B%0A%20%20%20%20%20%20bA.m_sweep.c.y%20-%3D%20mA%20*%20impulse.y%3B%0A%20%20%20%20%20%20bA.m_sweep.a%20-%3D%20iA%20*%20(rAX%20*%20impulse.y%20-%20rAY%20*%20impulse.x%20%2B%20impulse.z)%3B%0A%20%20%20%20%20%20bB.m_sweep.c.x%20%2B%3D%20mB%20*%20impulse.x%3B%0A%20%20%20%20%20%20bB.m_sweep.c.y%20%2B%3D%20mB%20*%20impulse.y%3B%0A%20%20%20%20%20%20bB.m_sweep.a%20%2B%3D%20iB%20*%20(rBX%20*%20impulse.y%20-%20rBY%20*%20impulse.x%20%2B%20impulse.z)%3B%0A%20%20%20%20%20%20bA.SynchronizeTransform()%3B%0A%20%20%20%20%20%20bB.SynchronizeTransform()%3B%0A%20%20%20%20%20%20return%20(%0A%20%20%20%20%20%20%20%20positionError%20%3C%3D%20b2Settings.b2_linearSlop%20%26%26%0A%20%20%20%20%20%20%20%20angularError%20%3C%3D%20b2Settings.b2_angularSlop%0A%20%20%20%20%20%20)%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20Box2D.inherit(b2WeldJointDef%2C%20Box2D.Dynamics.Joints.b2JointDef)%3B%0A%20%20%20%20b2WeldJointDef.prototype.__super%20%3D%0A%20%20%20%20%20%20Box2D.Dynamics.Joints.b2JointDef.prototype%3B%0A%20%20%20%20b2WeldJointDef.b2WeldJointDef%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20Box2D.Dynamics.Joints.b2JointDef.b2JointDef.apply(this%2C%20arguments)%3B%0A%20%20%20%20%20%20this.localAnchorA%20%3D%20new%20b2Vec2()%3B%0A%20%20%20%20%20%20this.localAnchorB%20%3D%20new%20b2Vec2()%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2WeldJointDef.prototype.b2WeldJointDef%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20this.__super.b2JointDef.call(this)%3B%0A%20%20%20%20%20%20this.type%20%3D%20b2Joint.e_weldJoint%3B%0A%20%20%20%20%20%20this.referenceAngle%20%3D%200.0%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2WeldJointDef.prototype.Initialize%20%3D%20function%20(bA%2C%20bB%2C%20anchor)%20%7B%0A%20%20%20%20%20%20this.bodyA%20%3D%20bA%3B%0A%20%20%20%20%20%20this.bodyB%20%3D%20bB%3B%0A%20%20%20%20%20%20this.localAnchorA.SetV(this.bodyA.GetLocalPoint(anchor))%3B%0A%20%20%20%20%20%20this.localAnchorB.SetV(this.bodyB.GetLocalPoint(anchor))%3B%0A%20%20%20%20%20%20this.referenceAngle%20%3D%20this.bodyB.GetAngle()%20-%20this.bodyA.GetAngle()%3B%0A%20%20%20%20%7D%3B%0A%20%20%7D)()%3B%0A%20%20(function%20()%20%7B%0A%20%20%20%20var%20b2DebugDraw%20%3D%20Box2D.Dynamics.b2DebugDraw%3B%0A%20%20%20%20b2DebugDraw.b2DebugDraw%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20this.m_drawScale%20%3D%201.0%3B%0A%20%20%20%20%20%20this.m_lineThickness%20%3D%201.0%3B%0A%20%20%20%20%20%20this.m_alpha%20%3D%201.0%3B%0A%20%20%20%20%20%20this.m_fillAlpha%20%3D%201.0%3B%0A%20%20%20%20%20%20this.m_xformScale%20%3D%201.0%3B%0A%20%20%20%20%20%20var%20__this%20%3D%20this%3B%0A%20%20%20%20%20%20%2F%2F%23WORKAROUND%0A%20%20%20%20%20%20this.m_sprite%20%3D%20%7B%0A%20%20%20%20%20%20%20%20graphics%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20clear%3A%20function%20()%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20__this.m_ctx.clearRect(%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%200%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%200%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20__this.m_ctx.canvas.width%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20__this.m_ctx.canvas.height%0A%20%20%20%20%20%20%20%20%20%20%20%20)%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%7D%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2DebugDraw.prototype._color%20%3D%20function%20(color%2C%20alpha)%20%7B%0A%20%20%20%20%20%20return%20(%0A%20%20%20%20%20%20%20%20%22rgba(%22%20%2B%0A%20%20%20%20%20%20%20%20((color%20%26%200xff0000)%20%3E%3E%2016)%20%2B%0A%20%20%20%20%20%20%20%20%22%2C%22%20%2B%0A%20%20%20%20%20%20%20%20((color%20%26%200xff00)%20%3E%3E%208)%20%2B%0A%20%20%20%20%20%20%20%20%22%2C%22%20%2B%0A%20%20%20%20%20%20%20%20(color%20%26%200xff)%20%2B%0A%20%20%20%20%20%20%20%20%22%2C%22%20%2B%0A%20%20%20%20%20%20%20%20alpha%20%2B%0A%20%20%20%20%20%20%20%20%22)%22%0A%20%20%20%20%20%20)%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2DebugDraw.prototype.b2DebugDraw%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20this.m_drawFlags%20%3D%200%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2DebugDraw.prototype.SetFlags%20%3D%20function%20(flags)%20%7B%0A%20%20%20%20%20%20if%20(flags%20%3D%3D%3D%20undefined)%20flags%20%3D%200%3B%0A%20%20%20%20%20%20this.m_drawFlags%20%3D%20flags%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2DebugDraw.prototype.GetFlags%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20return%20this.m_drawFlags%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2DebugDraw.prototype.AppendFlags%20%3D%20function%20(flags)%20%7B%0A%20%20%20%20%20%20if%20(flags%20%3D%3D%3D%20undefined)%20flags%20%3D%200%3B%0A%20%20%20%20%20%20this.m_drawFlags%20%7C%3D%20flags%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2DebugDraw.prototype.ClearFlags%20%3D%20function%20(flags)%20%7B%0A%20%20%20%20%20%20if%20(flags%20%3D%3D%3D%20undefined)%20flags%20%3D%200%3B%0A%20%20%20%20%20%20this.m_drawFlags%20%26%3D%20~flags%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2DebugDraw.prototype.SetSprite%20%3D%20function%20(sprite)%20%7B%0A%20%20%20%20%20%20this.m_ctx%20%3D%20sprite%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2DebugDraw.prototype.GetSprite%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20return%20this.m_ctx%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2DebugDraw.prototype.SetDrawScale%20%3D%20function%20(drawScale)%20%7B%0A%20%20%20%20%20%20if%20(drawScale%20%3D%3D%3D%20undefined)%20drawScale%20%3D%200%3B%0A%20%20%20%20%20%20this.m_drawScale%20%3D%20drawScale%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2DebugDraw.prototype.GetDrawScale%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20return%20this.m_drawScale%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2DebugDraw.prototype.SetLineThickness%20%3D%20function%20(lineThickness)%20%7B%0A%20%20%20%20%20%20if%20(lineThickness%20%3D%3D%3D%20undefined)%20lineThickness%20%3D%200%3B%0A%20%20%20%20%20%20this.m_lineThickness%20%3D%20lineThickness%3B%0A%20%20%20%20%20%20this.m_ctx.strokeWidth%20%3D%20lineThickness%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2DebugDraw.prototype.GetLineThickness%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20return%20this.m_lineThickness%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2DebugDraw.prototype.SetAlpha%20%3D%20function%20(alpha)%20%7B%0A%20%20%20%20%20%20if%20(alpha%20%3D%3D%3D%20undefined)%20alpha%20%3D%200%3B%0A%20%20%20%20%20%20this.m_alpha%20%3D%20alpha%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2DebugDraw.prototype.GetAlpha%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20return%20this.m_alpha%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2DebugDraw.prototype.SetFillAlpha%20%3D%20function%20(alpha)%20%7B%0A%20%20%20%20%20%20if%20(alpha%20%3D%3D%3D%20undefined)%20alpha%20%3D%200%3B%0A%20%20%20%20%20%20this.m_fillAlpha%20%3D%20alpha%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2DebugDraw.prototype.GetFillAlpha%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20return%20this.m_fillAlpha%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2DebugDraw.prototype.SetXFormScale%20%3D%20function%20(xformScale)%20%7B%0A%20%20%20%20%20%20if%20(xformScale%20%3D%3D%3D%20undefined)%20xformScale%20%3D%200%3B%0A%20%20%20%20%20%20this.m_xformScale%20%3D%20xformScale%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2DebugDraw.prototype.GetXFormScale%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20return%20this.m_xformScale%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2DebugDraw.prototype.DrawPolygon%20%3D%20function%20(%0A%20%20%20%20%20%20vertices%2C%0A%20%20%20%20%20%20vertexCount%2C%0A%20%20%20%20%20%20color%0A%20%20%20%20)%20%7B%0A%20%20%20%20%20%20if%20(!vertexCount)%20return%3B%0A%20%20%20%20%20%20var%20s%20%3D%20this.m_ctx%3B%0A%20%20%20%20%20%20var%20drawScale%20%3D%20this.m_drawScale%3B%0A%20%20%20%20%20%20s.beginPath()%3B%0A%20%20%20%20%20%20s.strokeStyle%20%3D%20this._color(color.color%2C%20this.m_alpha)%3B%0A%20%20%20%20%20%20s.moveTo(vertices%5B0%5D.x%20*%20drawScale%2C%20vertices%5B0%5D.y%20*%20drawScale)%3B%0A%20%20%20%20%20%20for%20(var%20i%20%3D%201%3B%20i%20%3C%20vertexCount%3B%20i%2B%2B)%20%7B%0A%20%20%20%20%20%20%20%20s.lineTo(vertices%5Bi%5D.x%20*%20drawScale%2C%20vertices%5Bi%5D.y%20*%20drawScale)%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20s.lineTo(vertices%5B0%5D.x%20*%20drawScale%2C%20vertices%5B0%5D.y%20*%20drawScale)%3B%0A%20%20%20%20%20%20s.closePath()%3B%0A%20%20%20%20%20%20s.stroke()%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2DebugDraw.prototype.DrawSolidPolygon%20%3D%20function%20(%0A%20%20%20%20%20%20vertices%2C%0A%20%20%20%20%20%20vertexCount%2C%0A%20%20%20%20%20%20color%0A%20%20%20%20)%20%7B%0A%20%20%20%20%20%20if%20(!vertexCount)%20return%3B%0A%20%20%20%20%20%20var%20s%20%3D%20this.m_ctx%3B%0A%20%20%20%20%20%20var%20drawScale%20%3D%20this.m_drawScale%3B%0A%20%20%20%20%20%20s.beginPath()%3B%0A%20%20%20%20%20%20s.strokeStyle%20%3D%20this._color(color.color%2C%20this.m_alpha)%3B%0A%20%20%20%20%20%20s.fillStyle%20%3D%20this._color(color.color%2C%20this.m_fillAlpha)%3B%0A%20%20%20%20%20%20s.moveTo(vertices%5B0%5D.x%20*%20drawScale%2C%20vertices%5B0%5D.y%20*%20drawScale)%3B%0A%20%20%20%20%20%20for%20(var%20i%20%3D%201%3B%20i%20%3C%20vertexCount%3B%20i%2B%2B)%20%7B%0A%20%20%20%20%20%20%20%20s.lineTo(vertices%5Bi%5D.x%20*%20drawScale%2C%20vertices%5Bi%5D.y%20*%20drawScale)%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20s.lineTo(vertices%5B0%5D.x%20*%20drawScale%2C%20vertices%5B0%5D.y%20*%20drawScale)%3B%0A%20%20%20%20%20%20s.closePath()%3B%0A%20%20%20%20%20%20s.fill()%3B%0A%20%20%20%20%20%20s.stroke()%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2DebugDraw.prototype.DrawCircle%20%3D%20function%20(center%2C%20radius%2C%20color)%20%7B%0A%20%20%20%20%20%20if%20(!radius)%20return%3B%0A%20%20%20%20%20%20var%20s%20%3D%20this.m_ctx%3B%0A%20%20%20%20%20%20var%20drawScale%20%3D%20this.m_drawScale%3B%0A%20%20%20%20%20%20s.beginPath()%3B%0A%20%20%20%20%20%20s.strokeStyle%20%3D%20this._color(color.color%2C%20this.m_alpha)%3B%0A%20%20%20%20%20%20s.arc(%0A%20%20%20%20%20%20%20%20center.x%20*%20drawScale%2C%0A%20%20%20%20%20%20%20%20center.y%20*%20drawScale%2C%0A%20%20%20%20%20%20%20%20radius%20*%20drawScale%2C%0A%20%20%20%20%20%20%20%200%2C%0A%20%20%20%20%20%20%20%20Math.PI%20*%202%2C%0A%20%20%20%20%20%20%20%20true%0A%20%20%20%20%20%20)%3B%0A%20%20%20%20%20%20s.closePath()%3B%0A%20%20%20%20%20%20s.stroke()%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2DebugDraw.prototype.DrawSolidCircle%20%3D%20function%20(%0A%20%20%20%20%20%20center%2C%0A%20%20%20%20%20%20radius%2C%0A%20%20%20%20%20%20axis%2C%0A%20%20%20%20%20%20color%0A%20%20%20%20)%20%7B%0A%20%20%20%20%20%20if%20(!radius)%20return%3B%0A%20%20%20%20%20%20var%20s%20%3D%20this.m_ctx%2C%0A%20%20%20%20%20%20%20%20drawScale%20%3D%20this.m_drawScale%2C%0A%20%20%20%20%20%20%20%20cx%20%3D%20center.x%20*%20drawScale%2C%0A%20%20%20%20%20%20%20%20cy%20%3D%20center.y%20*%20drawScale%3B%0A%20%20%20%20%20%20s.moveTo(0%2C%200)%3B%0A%20%20%20%20%20%20s.beginPath()%3B%0A%20%20%20%20%20%20s.strokeStyle%20%3D%20this._color(color.color%2C%20this.m_alpha)%3B%0A%20%20%20%20%20%20s.fillStyle%20%3D%20this._color(color.color%2C%20this.m_fillAlpha)%3B%0A%20%20%20%20%20%20s.arc(cx%2C%20cy%2C%20radius%20*%20drawScale%2C%200%2C%20Math.PI%20*%202%2C%20true)%3B%0A%20%20%20%20%20%20s.moveTo(cx%2C%20cy)%3B%0A%20%20%20%20%20%20s.lineTo(%0A%20%20%20%20%20%20%20%20(center.x%20%2B%20axis.x%20*%20radius)%20*%20drawScale%2C%0A%20%20%20%20%20%20%20%20(center.y%20%2B%20axis.y%20*%20radius)%20*%20drawScale%0A%20%20%20%20%20%20)%3B%0A%20%20%20%20%20%20s.closePath()%3B%0A%20%20%20%20%20%20s.fill()%3B%0A%20%20%20%20%20%20s.stroke()%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2DebugDraw.prototype.DrawSegment%20%3D%20function%20(p1%2C%20p2%2C%20color)%20%7B%0A%20%20%20%20%20%20var%20s%20%3D%20this.m_ctx%2C%0A%20%20%20%20%20%20%20%20drawScale%20%3D%20this.m_drawScale%3B%0A%20%20%20%20%20%20s.strokeStyle%20%3D%20this._color(color.color%2C%20this.m_alpha)%3B%0A%20%20%20%20%20%20s.beginPath()%3B%0A%20%20%20%20%20%20s.moveTo(p1.x%20*%20drawScale%2C%20p1.y%20*%20drawScale)%3B%0A%20%20%20%20%20%20s.lineTo(p2.x%20*%20drawScale%2C%20p2.y%20*%20drawScale)%3B%0A%20%20%20%20%20%20s.closePath()%3B%0A%20%20%20%20%20%20s.stroke()%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2DebugDraw.prototype.DrawTransform%20%3D%20function%20(xf)%20%7B%0A%20%20%20%20%20%20var%20s%20%3D%20this.m_ctx%2C%0A%20%20%20%20%20%20%20%20drawScale%20%3D%20this.m_drawScale%3B%0A%20%20%20%20%20%20s.beginPath()%3B%0A%20%20%20%20%20%20s.strokeStyle%20%3D%20this._color(0xff0000%2C%20this.m_alpha)%3B%0A%20%20%20%20%20%20s.moveTo(xf.position.x%20*%20drawScale%2C%20xf.position.y%20*%20drawScale)%3B%0A%20%20%20%20%20%20s.lineTo(%0A%20%20%20%20%20%20%20%20(xf.position.x%20%2B%20this.m_xformScale%20*%20xf.R.col1.x)%20*%20drawScale%2C%0A%20%20%20%20%20%20%20%20(xf.position.y%20%2B%20this.m_xformScale%20*%20xf.R.col1.y)%20*%20drawScale%0A%20%20%20%20%20%20)%3B%0A%0A%20%20%20%20%20%20s.strokeStyle%20%3D%20this._color(0xff00%2C%20this.m_alpha)%3B%0A%20%20%20%20%20%20s.moveTo(xf.position.x%20*%20drawScale%2C%20xf.position.y%20*%20drawScale)%3B%0A%20%20%20%20%20%20s.lineTo(%0A%20%20%20%20%20%20%20%20(xf.position.x%20%2B%20this.m_xformScale%20*%20xf.R.col2.x)%20*%20drawScale%2C%0A%20%20%20%20%20%20%20%20(xf.position.y%20%2B%20this.m_xformScale%20*%20xf.R.col2.y)%20*%20drawScale%0A%20%20%20%20%20%20)%3B%0A%20%20%20%20%20%20s.closePath()%3B%0A%20%20%20%20%20%20s.stroke()%3B%0A%20%20%20%20%7D%3B%0A%20%20%7D)()%3B%0A%20%20var%20i%3B%0A%20%20for%20(i%20%3D%200%3B%20i%20%3C%20Box2D.postDefs.length%3B%20%2B%2Bi)%20Box2D.postDefs%5Bi%5D()%3B%0A%0A%20%20const%20ArgumentType%20%3D%20Scratch.ArgumentType%3B%0A%20%20const%20BlockType%20%3D%20Scratch.BlockType%3B%0A%20%20%2F%2F%20const%20MathUtil%20%3D%20require('..%2F..%2Futil%2Fmath-util')%3B%0A%20%20%2F%2F%20const%20Clone%20%3D%20require('..%2F..%2Futil%2Fclone')%3B%0A%20%20const%20Cast%20%3D%20%7B%0A%20%20%20%20toNumber%3A%20(n)%20%3D%3E%20%2Bn%20%7C%7C%200%2C%0A%20%20%7D%3B%0A%20%20%2F%2F%20const%20Cast%20%3D%20require('..%2F..%2Futil%2Fcast')%3B%0A%20%20%2F%2F%20const%20Runtime%20%3D%20require('..%2F..%2Fengine%2Fruntime')%3B%0A%20%20%2F%2F%20const%20RenderedTarget%20%3D%20require('..%2F..%2Fsprites%2Frendered-target')%3B%0A%20%20%2F%2F%20const%20MathUtil%20%3D%20require('..%2F..%2Futil%2Fmath-util')%3B%0A%20%20%2F%2F%20const%20Timer%20%3D%20require('..%2F..%2Futil%2Ftimer')%3B%0A%20%20%2F%2F%20const%20Matter%20%3D%20require('matterJs%2Fmatter')%3B%0A%20%20%2F%2F%20const%20Matter%20%3D%20require('matter-js')%3B%0A%20%20const%20ROTATION_STYLE_ALL_AROUND%20%3D%20%22all%20around%22%3B%0A%0A%20%20%2F%2F%20const%20Box2D%20%3D%20require('.%2FBox2d.min').box2d%3B%0A%0A%20%20%2F%2F%20window.decomp%20%3D%20require('poly-decomp')%3B%0A%0A%20%20const%20b2World%20%3D%20Box2D.Dynamics.b2World%3B%0A%20%20const%20b2Vec2%20%3D%20Box2D.Common.Math.b2Vec2%3B%0A%20%20const%20b2AABB%20%3D%20Box2D.Collision.b2AABB%3B%0A%20%20const%20b2BodyDef%20%3D%20Box2D.Dynamics.b2BodyDef%3B%0A%20%20const%20b2Body%20%3D%20Box2D.Dynamics.b2Body%3B%0A%20%20const%20b2FixtureDef%20%3D%20Box2D.Dynamics.b2FixtureDef%3B%0A%20%20%2F%2F%20const%20b2Fixture%20%3D%20Box2D.Dynamics.b2Fixture%3B%0A%20%20%2F%2F%20const%20b2Fixture%20%3D%20Box2D.Dynamics.b2Fixture%3B%0A%20%20const%20b2Contact%20%3D%20Box2D.Dynamics.Contacts.b2Contact%3B%0A%20%20%2F%2F%20const%20b2MassData%20%3D%20Box2D.Collision.Shapes.b2MassData%3B%0A%20%20const%20b2PolygonShape%20%3D%20Box2D.Collision.Shapes.b2PolygonShape%3B%0A%20%20const%20b2CircleShape%20%3D%20Box2D.Collision.Shapes.b2CircleShape%3B%0A%20%20%2F%2F%20const%20b2DebugDraw%20%3D%20Box2D.Dynamics.b2DebugDraw%3B%0A%20%20const%20b2MouseJointDef%20%3D%20Box2D.Dynamics.Joints.b2MouseJointDef%3B%0A%20%20const%20b2Math%20%3D%20Box2D.Common.Math.b2Math%3B%0A%0A%20%20let%20world%3B%0A%20%20let%20zoom%3B%0A%0A%20%20const%20fixDef%20%3D%20new%20b2FixtureDef()%3B%0A%20%20const%20bodyDef%20%3D%20new%20b2BodyDef()%3B%0A%0A%20%20%2F%2F%20const%20uid_seq%20%3D%200%3B%0A%20%20%2F%2F%20let%20ujidSeq%20%3D%200%3B%0A%0A%20%20const%20prevPos%20%3D%20%7B%7D%3B%0A%20%20%2F**%0A%20%20%20*%20Active%20b2Body%2Fs%20in%20the%20world.%0A%20%20%20*%20%40type%20%7BObject.%3Cstring%2C*%3E%7D%0A%20%20%20*%2F%0A%20%20const%20bodies%20%3D%20%7B%7D%3B%0A%20%20%2F%2F%20const%20joints%20%3D%20%7B%7D%3B%0A%20%20const%20pinned%20%3D%20%7B%7D%3B%20%2F%2F%20Map%20of%20IDs%20to%20pinned%20joints%0A%20%20%2F**%0A%20%20%20*%20The%20runtime%20instantiating%20this%20block%20package.%0A%20%20%20*%20%40type%20%7BArray%7D%0A%20%20%20*%2F%0A%20%20const%20stageBodies%20%3D%20%5B%5D%3B%0A%0A%20%20%2F%2F%20const%20categorySeq%20%3D%201%3B%0A%20%20%2F%2F%20const%20categories%20%3D%20%7Bdefault%3A%201%7D%3B%0A%0A%20%20const%20bodyCategoryBits%20%3D%201%3B%0A%20%20const%20bodyMaskBits%20%3D%201%3B%0A%20%20%2F%2F%20const%20noCollideSeq%20%3D%200%3B%0A%0A%20%20const%20toRad%20%3D%20Math.PI%20%2F%20180%3B%0A%0A%20%20%2F%2F%20Used%20to%20record%20the%20scroll%20position%20of%20all%20sprites%0A%20%20const%20_scroll%20%3D%20new%20b2Vec2(0%2C%200)%3B%0A%0A%20%20const%20STAGE_TYPE_OPTIONS%20%3D%20%7B%0A%20%20%20%20BOXED%3A%20%22boxed%22%2C%0A%20%20%20%20FLOOR%3A%20%22floor%22%2C%0A%20%20%20%20OPEN%3A%20%22open%22%2C%0A%20%20%7D%3B%0A%0A%20%20const%20SPACE_TYPE_OPTIONS%20%3D%20%7B%0A%20%20%20%20WORLD%3A%20%22world%22%2C%0A%20%20%20%20STAGE%3A%20%22stage%22%2C%0A%20%20%20%20RELATIVE%3A%20%22relative%22%2C%0A%20%20%7D%3B%0A%0A%20%20const%20WHERE_TYPE_OPTIONS%20%3D%20%7B%0A%20%20%20%20ANY%3A%20%22any%22%2C%0A%20%20%20%20FEET%3A%20%22feet%22%2C%0A%20%20%7D%3B%0A%0A%20%20const%20SHAPE_TYPE_OPTIONS%20%3D%20%7B%0A%20%20%20%20COSTUME%3A%20%22costume%22%2C%0A%20%20%20%20CIRCLE%3A%20%22circle%22%2C%0A%20%20%20%20SVG_POLYGON%3A%20%22svg%22%2C%0A%20%20%20%20ALL%3A%20%22all%22%2C%0A%20%20%7D%3B%0A%0A%20%20const%20_definePolyFromHull%20%3D%20function%20(hullPoints)%20%7B%0A%20%20%20%20fixDef.shape%20%3D%20new%20b2PolygonShape()%3B%0A%0A%20%20%20%20const%20vertices%20%3D%20%5B%5D%3B%0A%0A%20%20%20%20let%20prev%20%3D%20null%3B%0A%20%20%20%20for%20(let%20i%20%3D%20hullPoints.length%20-%201%3B%20i%20%3E%3D%200%3B%20i--)%20%7B%0A%20%20%20%20%20%20%2F%2F%20for%20(let%20i%20%3D%200%3B%20i%20%3C%20hullPoints.length%3B%20i%2B%2B)%20%7B%0A%20%20%20%20%20%20const%20b2Vec%20%3D%20new%20b2Vec2(hullPoints%5Bi%5D.x%20%2F%20zoom%2C%20hullPoints%5Bi%5D.y%20%2F%20zoom)%3B%0A%20%20%20%20%20%20if%20(%0A%20%20%20%20%20%20%20%20prev%20!%3D%3D%20null%20%26%26%0A%20%20%20%20%20%20%20%20b2Math.SubtractVV(b2Vec%2C%20prev).LengthSquared()%20%3E%20Number.MIN_VALUE%0A%20%20%20%20%20%20)%20%7B%0A%20%20%20%20%20%20%20%20vertices.push(b2Vec)%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20prev%20%3D%20b2Vec%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20fixDef.shape.SetAsArray(vertices)%3B%0A%20%20%7D%3B%0A%0A%20%20const%20_placeBody%20%3D%20function%20(id%2C%20x%2C%20y%2C%20dir)%20%7B%0A%20%20%20%20if%20(bodies%5Bid%5D)%20%7B%0A%20%20%20%20%20%20world.DestroyBody(bodies%5Bid%5D)%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20fixDef.filter.categoryBits%20%3D%20bodyCategoryBits%3B%0A%20%20%20%20fixDef.filter.maskBits%20%3D%20bodyMaskBits%3B%0A%0A%20%20%20%20bodyDef.position.x%20%3D%20(x%20%2B%20_scroll.x)%20%2F%20zoom%3B%0A%20%20%20%20bodyDef.position.y%20%3D%20(y%20%2B%20_scroll.y)%20%2F%20zoom%3B%0A%20%20%20%20bodyDef.angle%20%3D%20(90%20-%20dir)%20*%20toRad%3B%0A%0A%20%20%20%20const%20body%20%3D%20world.CreateBody(bodyDef)%3B%0A%20%20%20%20body.uid%20%3D%20id%3B%0A%20%20%20%20body.CreateFixture(fixDef)%3B%0A%20%20%20%20bodies%5Bid%5D%20%3D%20body%3B%0A%20%20%20%20return%20body%3B%0A%20%20%7D%3B%0A%0A%20%20const%20_removeBody%20%3D%20function%20(id)%20%7B%0A%20%20%20%20if%20(!bodies%5Bid%5D)%20return%3B%0A%0A%20%20%20%20world.DestroyBody(bodies%5Bid%5D)%3B%0A%20%20%20%20delete%20bodies%5Bid%5D%3B%0A%20%20%20%20delete%20prevPos%5Bid%5D%3B%0A%20%20%7D%3B%0A%0A%20%20const%20_applyForce%20%3D%20function%20(id%2C%20ftype%2C%20x%2C%20y%2C%20dir%2C%20pow)%20%7B%0A%20%20%20%20const%20body%20%3D%20bodies%5Bid%5D%3B%0A%20%20%20%20if%20(!body)%20%7B%0A%20%20%20%20%20%20return%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20dir%20%3D%20(90%20-%20dir)%20*%20toRad%3B%0A%0A%20%20%20%20if%20(ftype%20%3D%3D%3D%20%22Impulse%22)%20%7B%0A%20%20%20%20%20%20const%20center%20%3D%20body.GetLocalCenter()%3B%20%2F%2F%20get%20the%20mass%20data%20from%20you%20body%0A%0A%20%20%20%20%20%20body.ApplyImpulse(%0A%20%20%20%20%20%20%20%20%7B%20x%3A%20pow%20*%20Math.cos(dir)%2C%20y%3A%20pow%20*%20Math.sin(dir)%20%7D%2C%0A%20%20%20%20%20%20%20%20body.GetWorldPoint(%7B%20x%3A%20x%20%2F%20zoom%20%2B%20center.x%2C%20y%3A%20y%20%2F%20zoom%20%2B%20center.y%20%7D)%0A%20%20%20%20%20%20)%3B%0A%20%20%20%20%7D%20else%20if%20(ftype%20%3D%3D%3D%20%22World%20Impulse%22)%20%7B%0A%20%20%20%20%20%20body.ApplyForce(%0A%20%20%20%20%20%20%20%20%7B%20x%3A%20pow%20*%20Math.cos(dir)%2C%20y%3A%20pow%20*%20Math.sin(dir)%20%7D%2C%0A%20%20%20%20%20%20%20%20%7B%20x%3A%20x%20%2F%20zoom%2C%20y%3A%20y%20%2F%20zoom%20%7D%0A%20%20%20%20%20%20)%3B%0A%20%20%20%20%7D%0A%20%20%7D%3B%0A%0A%20%20%2F%2F%20%5B''%2C%20'Define%20Spring%20Length%3A%20%25n%20Damping%3A%20%25n%20%20Freq%3A%20%25n'%2C%20'_defineSpring'%2C%20100%2C%200.5%2C%208%5D%2C%0A%20%20const%20defSpring%20%3D%20%7B%20len%3A%20100%2C%20damp%3A%200.7%2C%20freq%3A%205%20%7D%3B%0A%20%20const%20_defineSpring%20%3D%20function%20(len%2C%20damp%2C%20freq)%20%7B%0A%20%20%20%20defSpring.len%20%3D%20len%20%3C%200.1%20%3F%200.1%20%3A%20len%20%2F%20zoom%3B%0A%20%20%20%20defSpring.damp%20%3D%20damp%20%3C%200%20%3F%200.7%20%3A%20damp%3B%0A%20%20%20%20defSpring.freq%20%3D%20freq%20%3E%200%20%3F%20freq%20%3A%205%3B%0A%20%20%7D%3B%0A%0A%20%20const%20_createJointOfType%20%3D%20function%20(%0A%20%20%20%20jName%2C%0A%20%20%20%20typ%2C%0A%20%20%20%20bodyID%2C%0A%20%20%20%20x%2C%0A%20%20%20%20y%2C%0A%20%20%20%20bodyID2%2C%0A%20%20%20%20x2%2C%0A%20%20%20%20y2%0A%20%20)%20%7B%0A%20%20%20%20%2F%2F%20if%20(jName.length%20%3E%200)%20ext.destroyJoint(jName)%3B%0A%0A%20%20%20%20if%20(!bodyID)%20bodyID%20%3D%20null%3B%0A%20%20%20%20if%20(!bodyID2)%20bodyID2%20%3D%20null%3B%0A%20%20%20%20if%20(!bodyID%20%26%26%20!bodyID2)%20%7B%0A%20%20%20%20%20%20return%20null%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20const%20body%20%3D%20bodyID%20%3F%20bodies%5BbodyID%5D%20%3A%20world.GetGroundBody()%3B%0A%20%20%20%20const%20body2%20%3D%20bodyID2%20%3F%20bodies%5BbodyID2%5D%20%3A%20world.GetGroundBody()%3B%0A%0A%20%20%20%20if%20(!body%20%7C%7C%20!body2)%20return%20null%3B%0A%0A%20%20%20%20let%20md%3B%0A%20%20%20%20switch%20(typ)%20%7B%0A%20%20%20%20%20%20case%20%22Spring%22%3A%0A%20%20%20%20%20%20%20%20md%20%3D%20new%20Box2D.Dynamics.Joints.b2DistanceJointDef()%3B%0A%20%20%20%20%20%20%20%20md.length%20%3D%20defSpring.len%3B%0A%20%20%20%20%20%20%20%20md.dampingRatio%20%3D%20defSpring.damp%3B%0A%20%20%20%20%20%20%20%20md.frequencyHz%20%3D%20defSpring.freq%3B%0A%20%20%20%20%20%20%20%20md.bodyA%20%3D%20body%3B%0A%20%20%20%20%20%20%20%20md.bodyB%20%3D%20body2%3B%0A%20%20%20%20%20%20%20%20md.localAnchorA%20%3D%20%7B%20x%3A%20x%20%2F%20zoom%2C%20y%3A%20y%20%2F%20zoom%20%7D%3B%0A%20%20%20%20%20%20%20%20md.localAnchorB%20%3D%20%7B%20x%3A%20x2%20%2F%20zoom%2C%20y%3A%20y2%20%2F%20zoom%20%7D%3B%0A%20%20%20%20%20%20%20%20break%3B%0A%0A%20%20%20%20%20%20case%20%22Rotating%22%3A%0A%20%20%20%20%20%20%20%20md%20%3D%20new%20Box2D.Dynamics.Joints.b2RevoluteJointDef()%3B%0A%20%20%20%20%20%20%20%20md.bodyA%20%3D%20body%3B%0A%20%20%20%20%20%20%20%20md.bodyB%20%3D%20body2%3B%0A%20%20%20%20%20%20%20%20md.localAnchorA%20%3D%20%7B%20x%3A%20x%20%2F%20zoom%2C%20y%3A%20y%20%2F%20zoom%20%7D%3B%0A%20%20%20%20%20%20%20%20if%20(x2%20%3D%3D%3D%20null)%20%7B%0A%20%20%20%20%20%20%20%20%20%20if%20(body2)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20md.localAnchorB%20%3D%20body2.GetLocalPoint(body.GetPosition())%3B%20%2F%2F%20Wheel%20Type%20Joint...%0A%20%20%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20md.localAnchorB%20%3D%20body.GetWorldPoint(%7B%20x%3A%20x%20%2F%20zoom%2C%20y%3A%20y%20%2F%20zoom%20%7D)%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20md.localAnchorB%20%3D%20%7B%20x%3A%20x2%20%2F%20zoom%2C%20y%3A%20y2%20%2F%20zoom%20%7D%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20break%3B%0A%0A%20%20%20%20%20%20case%20%22Mouse%22%3A%0A%20%20%20%20%20%20%20%20md%20%3D%20new%20b2MouseJointDef()%3B%0A%20%20%20%20%20%20%20%20if%20(bodyID)%20%7B%0A%20%20%20%20%20%20%20%20%20%20md.bodyB%20%3D%20body%3B%0A%20%20%20%20%20%20%20%20%20%20md.target.Set(x%20%2F%20zoom%2C%20y%20%2F%20zoom)%3B%0A%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20md.bodyB%20%3D%20body2%3B%0A%20%20%20%20%20%20%20%20%20%20md.target.Set(x2%20%2F%20zoom%2C%20y2%20%2F%20zoom)%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20md.bodyA%20%3D%20world.GetGroundBody()%3B%0A%20%20%20%20%20%20%20%20md.collideConnected%20%3D%20true%3B%0A%20%20%20%20%20%20%20%20md.maxForce%20%3D%20300.0%20*%20body.GetMass()%3B%0A%20%20%20%20%20%20%20%20break%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F%2F%20md.collideConnected%20%3D%20true%3B%0A%20%20%20%20%2F%2F%20md.maxForce%20%3D%20300.0%20*%20body.GetMass()%3B%0A%20%20%20%20const%20joint%20%3D%20world.CreateJoint(md)%3B%0A%20%20%20%20if%20(bodyID)%20%7B%0A%20%20%20%20%20%20body.SetAwake(true)%3B%0A%20%20%20%20%7D%0A%20%20%20%20if%20(bodyID2)%20%7B%0A%20%20%20%20%20%20body2.SetAwake(true)%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F%2F%20if%20(!jName)%20%7B%0A%20%20%20%20%2F%2F%20%20%20%20%20ujidSeq%2B%2B%3B%0A%20%20%20%20%2F%2F%20%20%20%20%20jName%20%3D%20%60_%24%7BujidSeq%7D%60%3B%0A%20%20%20%20%2F%2F%20%7D%0A%20%20%20%20%2F%2F%20joints%5BjName%5D%20%3D%20joint%3B%0A%20%20%20%20return%20joint%3B%0A%20%20%7D%3B%0A%0A%20%20%2F**%0A%20%20%20*%20Set%20the%20X%20and%20Y%20coordinates%20(No%20Fencing)%0A%20%20%20*%20%40param%20%7B!RenderedTarget%7D%20rt%20the%20renderedTarget.%0A%20%20%20*%20%40param%20%7B!number%7D%20x%20New%20X%20coordinate%2C%20in%20Scratch%20coordinates.%0A%20%20%20*%20%40param%20%7B!number%7D%20y%20New%20Y%20coordinate%2C%20in%20Scratch%20coordinates.%0A%20%20%20*%20%40param%20%7B%3Fboolean%7D%20force%20Force%20setting%20X%2FY%2C%20in%20case%20of%20dragging%0A%20%20%20*%2F%0A%20%20const%20_setXY%20%3D%20function%20(rt%2C%20x%2C%20y%2C%20force)%20%7B%0A%20%20%20%20if%20(rt.isStage)%20return%3B%0A%20%20%20%20if%20(rt.dragging%20%26%26%20!force)%20return%3B%0A%20%20%20%20const%20oldX%20%3D%20rt.x%3B%0A%20%20%20%20const%20oldY%20%3D%20rt.y%3B%0A%20%20%20%20if%20(rt.renderer)%20%7B%0A%20%20%20%20%20%20%2F%2F%20const%20position%20%3D%20rt.renderer.getFencedPositionOfDrawable(rt.drawableID%2C%20%5Bx%2C%20y%5D)%3B%0A%20%20%20%20%20%20rt.x%20%3D%20x%3B%20%2F%2F%20position%5B0%5D%3B%0A%20%20%20%20%20%20rt.y%20%3D%20y%3B%20%2F%2F%20position%5B1%5D%3B%0A%0A%20%20%20%20%20%20rt.renderer.updateDrawableProperties(rt.drawableID%2C%20%7B%0A%20%20%20%20%20%20%20%20position%3A%20%5Bx%2C%20y%5D%2C%0A%20%20%20%20%20%20%7D)%3B%0A%20%20%20%20%20%20if%20(rt.visible)%20%7B%0A%20%20%20%20%20%20%20%20rt.emit(%22EVENT_TARGET_VISUAL_CHANGE%22%2C%20rt)%3B%0A%20%20%20%20%20%20%20%20rt.runtime.requestRedraw()%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20rt.x%20%3D%20x%3B%0A%20%20%20%20%20%20rt.y%20%3D%20y%3B%0A%20%20%20%20%7D%0A%20%20%20%20rt.emit(%22EVENT_TARGET_MOVED%22%2C%20rt%2C%20oldX%2C%20oldY%2C%20force)%3B%0A%20%20%20%20rt.runtime.requestTargetsUpdate(rt)%3B%0A%20%20%7D%3B%0A%0A%20%20const%20createStageBody%20%3D%20function%20()%20%7B%0A%20%20%20%20const%20body%20%3D%20world.CreateBody(bodyDef)%3B%0A%20%20%20%20body.CreateFixture(fixDef)%3B%0A%20%20%20%20stageBodies.push(body)%3B%0A%20%20%7D%3B%0A%0A%20%20const%20_setStageType%20%3D%20function%20(type)%20%7B%0A%20%20%20%20%2F%2F%20Clear%20down%20previous%20stage%0A%20%20%20%20if%20(stageBodies.length%20%3E%200)%20%7B%0A%20%20%20%20%20%20for%20(const%20stageBodyID%20in%20stageBodies)%20%7B%0A%20%20%20%20%20%20%20%20world.DestroyBody(stageBodies%5BstageBodyID%5D)%3B%0A%20%20%20%20%20%20%20%20delete%20stageBodies%5BstageBodyID%5D%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F%2F%20Build%20up%20new%20stage%0A%20%20%20%20bodyDef.type%20%3D%20b2Body.b2_staticBody%3B%0A%20%20%20%20fixDef.shape%20%3D%20new%20b2PolygonShape()%3B%0A%20%20%20%20bodyDef.angle%20%3D%200%3B%0A%0A%20%20%20%20const%20%7B%20stageWidth%2C%20stageHeight%20%7D%20%3D%20Scratch.vm.runtime%3B%0A%20%20%20%20const%20stageBounds%20%3D%20%7B%0A%20%20%20%20%20%20left%3A%20-stageWidth%20%2F%202%2C%0A%20%20%20%20%20%20right%3A%20stageWidth%20%2F%202%2C%0A%20%20%20%20%20%20top%3A%20stageHeight%20%2F%202%2C%0A%20%20%20%20%20%20bottom%3A%20-stageHeight%20%2F%202%2C%0A%20%20%20%20%7D%3B%0A%0A%20%20%20%20if%20(type%20%3D%3D%3D%20STAGE_TYPE_OPTIONS.BOXED)%20%7B%0A%20%20%20%20%20%20%2F%2F%20For%20the%20ceiling%20boxes...%0A%20%20%20%20%20%20%2F%2F%20use%20a%20width%20equivalent%20to%20the%20stage%20width%20%2B%2010%2C%20with%20a%20thickness%20of%2010%0A%20%20%20%20%20%20fixDef.shape.SetAsBox((stageWidth%20%2B%2010)%20%2F%20zoom%2C%2010%20%2F%20zoom)%3B%0A%20%20%20%20%20%20%2F%2F%20create%20one%20such%20box%20at%20the%20bottom%20of%20the%20stage%2C%20accounting%20for%20thickness...%0A%20%20%20%20%20%20bodyDef.position.Set(0%2C%20(stageBounds.bottom%20-%2010)%20%2F%20zoom)%3B%0A%20%20%20%20%20%20createStageBody()%3B%0A%20%20%20%20%20%20%2F%2F%20and%20one%20820%20units%20above%20the%20top%20of%20the%20stage.%0A%20%20%20%20%20%20bodyDef.position.Set(0%2C%20(stageBounds.top%20%2B%20820)%20%2F%20zoom)%3B%0A%20%20%20%20%20%20createStageBody()%3B%0A%20%20%20%20%20%20%2F%2F%20For%20the%20left%20%26%20right%20wall%20boxes...%0A%20%20%20%20%20%20%2F%2F%20use%20a%20height%20equivalent%20to%20the%20stage%20height%20%2B%20820%2C%20with%20a%20thickness%20of%2010%0A%20%20%20%20%20%20fixDef.shape.SetAsBox(10%20%2F%20zoom%2C%20(stageHeight%20%2B%20820)%20%2F%20zoom)%3B%0A%20%20%20%20%20%20%2F%2F%20create%20a%20box%20at%20the%20left%20of%20the%20stage...%0A%20%20%20%20%20%20bodyDef.position.Set((stageBounds.left%20-%2010)%20%2F%20zoom%2C%200)%3B%0A%20%20%20%20%20%20createStageBody()%3B%0A%20%20%20%20%20%20%2F%2F%20and%20one%20at%20the%20right%20of%20the%20stage.%0A%20%20%20%20%20%20bodyDef.position.Set((stageBounds.right%20%2B%2010)%20%2F%20zoom%2C%200)%3B%0A%20%20%20%20%20%20createStageBody()%3B%0A%20%20%20%20%7D%20else%20if%20(type%20%3D%3D%3D%20STAGE_TYPE_OPTIONS.FLOOR)%20%7B%0A%20%20%20%20%20%20%2F%2F%20All%20floor%20boxes%20are%20positioned%20at%20the%20bottom%20of%20the%20stage%2C%20accounting%20for%0A%20%20%20%20%20%20%2F%2F%20the%20thickness%20of%20100.%0A%20%20%20%20%20%20const%20floorY%20%3D%20(stageBounds.bottom%20-%20100)%20%2F%20zoom%3B%0A%0A%20%20%20%20%20%20%2F%2F%20The%20floor%20boxes%20have%20a%20width%20of%20the%20stage%20width%20%2B%204520%20units%2C%20and%20a%0A%20%20%20%20%20%20%2F%2F%20thickness%20of%20100%20units.%0A%20%20%20%20%20%20fixDef.shape.SetAsBox((stageWidth%20%2B%204520)%20%2F%20zoom%2C%20100%20%2F%20zoom)%3B%0A%20%20%20%20%20%20%2F%2F%20Floor%20boxes%20are%20created%20at%20different%20intervals%20throughout%20the%20bottom%20of%20the%20stage.%0A%20%20%20%20%20%20bodyDef.position.Set(0%2C%20floorY)%3B%0A%20%20%20%20%20%20createStageBody()%3B%0A%20%20%20%20%20%20bodyDef.position.Set(stageBounds.left%20-%205000%2C%20floorY)%3B%0A%20%20%20%20%20%20createStageBody()%3B%0A%20%20%20%20%20%20bodyDef.position.Set(stageBounds.right%20%2B%205000%2C%20floorY)%3B%0A%20%20%20%20%20%20createStageBody()%3B%0A%20%20%20%20%20%20bodyDef.position.Set(stageBounds.left%20-%2015000%2C%20floorY)%3B%0A%20%20%20%20%20%20createStageBody()%3B%0A%20%20%20%20%20%20bodyDef.position.Set(stageBounds.right%20%2B%2015000%2C%20floorY)%3B%0A%20%20%20%20%20%20createStageBody()%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20bodyDef.type%20%3D%20b2Body.b2_dynamicBody%3B%0A%0A%20%20%20%20for%20(const%20bodyID%20in%20bodies)%20%7B%0A%20%20%20%20%20%20bodies%5BbodyID%5D.SetAwake(true)%3B%0A%20%20%20%20%7D%0A%20%20%7D%3B%0A%0A%20%20let%20tickRate%20%3D%2030%3B%0A%0A%20%20const%20blockIconURI%20%3D%0A%20%20%20%20%22data%3Aimage%2Fsvg%2Bxml%3Bbase64%2CPHN2ZyB2ZXJzaW9uPSIxLjEiDQoJIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIHhtbG5zOmE9Imh0dHA6Ly9ucy5hZG9iZS5jb20vQWRvYmVTVkdWaWV3ZXJFeHRlbnNpb25zLzMuMC8iDQoJIHg9IjBweCIgeT0iMHB4IiB3aWR0aD0iNDBweCIgaGVpZ2h0PSI0MHB4IiB2aWV3Qm94PSItMy43IC0zLjcgNDAgNDAiIGVuYWJsZS1iYWNrZ3JvdW5kPSJuZXcgLTMuNyAtMy43IDQwIDQwIg0KCSB4bWw6c3BhY2U9InByZXNlcnZlIj4NCjxkZWZzPg0KPC9kZWZzPg0KPHJlY3QgeD0iOC45IiB5PSIxLjUiIGZpbGw9IiNGRkZGRkYiIHN0cm9rZT0iIzE2OUZCMCIgc3Ryb2tlLXdpZHRoPSIzIiB3aWR0aD0iMTQuOCIgaGVpZ2h0PSIxNC44Ii8%2BDQo8cmVjdCB4PSIxLjUiIHk9IjE2LjMiIGZpbGw9IiNGRkZGRkYiIHN0cm9rZT0iIzE2OUZCMCIgc3Ryb2tlLXdpZHRoPSIzIiB3aWR0aD0iMTQuOCIgaGVpZ2h0PSIxNC44Ii8%2BDQo8cmVjdCB4PSIxNi4zIiB5PSIxNi4zIiBmaWxsPSIjRkZGRkZGIiBzdHJva2U9IiMxNjlGQjAiIHN0cm9rZS13aWR0aD0iMyIgd2lkdGg9IjE0LjgiIGhlaWdodD0iMTQuOCIvPg0KPC9zdmc%2B%22%3B%0A%20%20const%20menuIconURI%20%3D%0A%20%20%20%20%22data%3Aimage%2Fsvg%2Bxml%3Bbase64%2CPHN2ZyB2ZXJzaW9uPSIxLjEiDQoJIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIHhtbG5zOmE9Imh0dHA6Ly9ucy5hZG9iZS5jb20vQWRvYmVTVkdWaWV3ZXJFeHRlbnNpb25zLzMuMC8iDQoJIHg9IjBweCIgeT0iMHB4IiB3aWR0aD0iNDBweCIgaGVpZ2h0PSI0MHB4IiB2aWV3Qm94PSItMy43IC0zLjcgNDAgNDAiIGVuYWJsZS1iYWNrZ3JvdW5kPSJuZXcgLTMuNyAtMy43IDQwIDQwIg0KCSB4bWw6c3BhY2U9InByZXNlcnZlIj4NCjxkZWZzPg0KPC9kZWZzPg0KPHJlY3QgeD0iOC45IiB5PSIxLjUiIGZpbGw9IiNGRkZGRkYiIHN0cm9rZT0iIzE2OUZCMCIgc3Ryb2tlLXdpZHRoPSIzIiB3aWR0aD0iMTQuOCIgaGVpZ2h0PSIxNC44Ii8%2BDQo8cmVjdCB4PSIxLjUiIHk9IjE2LjMiIGZpbGw9IiNGRkZGRkYiIHN0cm9rZT0iIzE2OUZCMCIgc3Ryb2tlLXdpZHRoPSIzIiB3aWR0aD0iMTQuOCIgaGVpZ2h0PSIxNC44Ii8%2BDQo8cmVjdCB4PSIxNi4zIiB5PSIxNi4zIiBmaWxsPSIjRkZGRkZGIiBzdHJva2U9IiMxNjlGQjAiIHN0cm9rZS13aWR0aD0iMyIgd2lkdGg9IjE0LjgiIGhlaWdodD0iMTQuOCIvPg0KPC9zdmc%2B%22%3B%0A%20%20const%20vm%20%3D%20Scratch.vm%3B%0A%0A%20%20class%20Scratch3Griffpatch%20%7B%0A%20%20%20%20constructor()%20%7B%0A%20%20%20%20%20%20%2F**%0A%20%20%20%20%20%20%20*%20The%20runtime%20instantiating%20this%20block%20package.%0A%20%20%20%20%20%20%20*%20%40type%20%7BRuntime%7D%0A%20%20%20%20%20%20%20*%2F%0A%20%20%20%20%20%20this.runtime%20%3D%20vm.runtime%3B%0A%0A%20%20%20%20%20%20%2F%2F%20Clear%20target%20motion%20state%20values%20when%20the%20project%20starts.%0A%20%20%20%20%20%20this.runtime.on(%22PROJECT_START%22%2C%20this.reset.bind(this))%3B%0A%0A%20%20%20%20%20%20world%20%3D%20new%20b2World(%0A%20%20%20%20%20%20%20%20new%20b2Vec2(0%2C%20-10)%2C%20%2F%2F%20gravity%20(10)%0A%20%20%20%20%20%20%20%20true%20%2F%2F%20allow%20sleep%0A%20%20%20%20%20%20)%3B%0A%0A%20%20%20%20%20%20zoom%20%3D%2050%3B%20%2F%2F%20scale%3B%0A%0A%20%20%20%20%20%20this.map%20%3D%20%7B%7D%3B%0A%0A%20%20%20%20%20%20fixDef.density%20%3D%201.0%3B%20%2F%2F%201.0%0A%20%20%20%20%20%20fixDef.friction%20%3D%200.5%3B%20%2F%2F%200.5%0A%20%20%20%20%20%20fixDef.restitution%20%3D%200.2%3B%20%2F%2F%200.2%0A%0A%20%20%20%20%20%20_setStageType(STAGE_TYPE_OPTIONS.BOXED)%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20reset()%20%7B%0A%20%20%20%20%20%20for%20(const%20body%20in%20bodies)%20%7B%0A%20%20%20%20%20%20%20%20if%20(pinned%5Bbody.uid%5D)%20%7B%0A%20%20%20%20%20%20%20%20%20%20world.DestroyJoint(pinned%5Bbody.uid%5D)%3B%0A%20%20%20%20%20%20%20%20%20%20delete%20pinned%5Bbody.uid%5D%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20world.DestroyBody(bodies%5Bbody%5D)%3B%0A%20%20%20%20%20%20%20%20delete%20bodies%5Bbody%5D%3B%0A%20%20%20%20%20%20%20%20delete%20prevPos%5Bbody%5D%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20tickRate%20%3D%2030%3B%0A%20%20%20%20%20%20%2F%2F%20todo%3A%20delete%20joins%3F%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F**%0A%20%20%20%20%20*%20The%20key%20to%20load%20%26%20store%20a%20target's%20music-related%20state.%0A%20%20%20%20%20*%20%40type%20%7Bstring%7D%0A%20%20%20%20%20*%2F%0A%20%20%20%20static%20get%20STATE_KEY()%20%7B%0A%20%20%20%20%20%20return%20%22Scratch.Griffpatch%22%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F**%0A%20%20%20%20%20*%20%40returns%20%7Bobject%7D%20metadata%20for%20this%20extension%20and%20its%20blocks.%0A%20%20%20%20%20*%2F%0A%20%20%20%20getInfo()%20%7B%0A%20%20%20%20%20%20return%20%7B%0A%20%20%20%20%20%20%20%20id%3A%20%22griffpatch%22%2C%0A%20%20%20%20%20%20%20%20name%3A%20Scratch.translate(%7B%0A%20%20%20%20%20%20%20%20%20%20id%3A%20%22griffpatch.categoryName%22%2C%0A%20%20%20%20%20%20%20%20%20%20default%3A%20%22Physics%22%2C%0A%20%20%20%20%20%20%20%20%20%20description%3A%20%22Label%20for%20the%20Griffpatch%20extension%20category%22%2C%0A%20%20%20%20%20%20%20%20%7D)%2C%0A%20%20%20%20%20%20%20%20docsURI%3A%20%22https%3A%2F%2Fextensions.turbowarp.org%2Fbox2d%22%2C%0A%20%20%20%20%20%20%20%20menuIconURI%3A%20menuIconURI%2C%0A%20%20%20%20%20%20%20%20blockIconURI%3A%20blockIconURI%2C%0A%20%20%20%20%20%20%20%20blocks%3A%20%5B%0A%20%20%20%20%20%20%20%20%20%20%2F%2F%20Global%20Setup%20------------------%0A%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22setStage%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20BlockType.COMMAND%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20Scratch.translate(%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20id%3A%20%22griffpatch.setStage%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20default%3A%20%22set%20stage%20boundaries%20to%20%5BstageType%5D%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20description%3A%20%22Set%20the%20stage%20type%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20stageType%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20ArgumentType.STRING%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20menu%3A%20%22StageTypes%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%20STAGE_TYPE_OPTIONS.BOXED%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22setGravity%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20BlockType.COMMAND%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20Scratch.translate(%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20id%3A%20%22griffpatch.setGravity%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20default%3A%20%22set%20gravity%20to%20x%3A%20%5Bgx%5D%20y%3A%20%5Bgy%5D%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20description%3A%20%22Set%20the%20gravity%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20gx%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20ArgumentType.NUMBER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%200%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20gy%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20ArgumentType.NUMBER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%20-10%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22getGravityX%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20BlockType.REPORTER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20Scratch.translate(%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20id%3A%20%22griffpatch.getGravityX%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20default%3A%20%22gravity%20x%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20description%3A%20%22Get%20the%20gravity's%20x%20value%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D)%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22getGravityY%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20BlockType.REPORTER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20Scratch.translate(%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20id%3A%20%22griffpatch.getGravityY%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20default%3A%20%22gravity%20y%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20description%3A%20%22Get%20the%20gravity's%20y%20value%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D)%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%0A%20%20%20%20%20%20%20%20%20%20%22---%22%2C%0A%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22setPhysics%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20BlockType.COMMAND%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20Scratch.translate(%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20id%3A%20%22griffpatch.setPhysics%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20default%3A%20%22enable%20for%20%5Bshape%5D%20mode%20%5Bmode%5D%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20description%3A%20%22Enable%20Physics%20for%20this%20Sprite%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20shape%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20ArgumentType.STRING%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20menu%3A%20%22ShapeTypes%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%20%22costume%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20mode%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20ArgumentType.STRING%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20menu%3A%20%22EnableModeTypes%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%20%22normal%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20filter%3A%20%5BScratch.TargetType.SPRITE%5D%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22disablePhysics%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20BlockType.COMMAND%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20Scratch.translate(%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20id%3A%20%22griffpatch.disablePhysics%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20default%3A%20%22disable%20physics%20for%20this%20sprite%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20description%3A%20%22Disable%20Physics%20for%20this%20Sprite%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20filter%3A%20%5BScratch.TargetType.SPRITE%5D%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%2F%2F%20%7B%0A%20%20%20%20%20%20%20%20%20%20%2F%2F%20%20%20%20%20opcode%3A%20'setPhysics'%2C%0A%20%20%20%20%20%20%20%20%20%20%2F%2F%20%20%20%20%20blockType%3A%20BlockType.COMMAND%2C%0A%20%20%20%20%20%20%20%20%20%20%2F%2F%20%20%20%20%20text%3A%20Scratch.translate(%7B%0A%20%20%20%20%20%20%20%20%20%20%2F%2F%20%20%20%20%20%20%20%20%20id%3A%20'griffpatch.setPhysics'%2C%0A%20%20%20%20%20%20%20%20%20%20%2F%2F%20%20%20%20%20%20%20%20%20default%3A%20'enable%20physics%20for%20sprite%20%5Bshape%5D'%2C%0A%20%20%20%20%20%20%20%20%20%20%2F%2F%20%20%20%20%20%20%20%20%20description%3A%20'Enable%20Physics%20for%20this%20Sprite'%0A%20%20%20%20%20%20%20%20%20%20%2F%2F%20%20%20%20%20%7D)%2C%0A%20%20%20%20%20%20%20%20%20%20%2F%2F%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%2F%2F%20%20%20%20%20%20%20%20%20shape%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%2F%2F%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20ArgumentType.STRING%2C%0A%20%20%20%20%20%20%20%20%20%20%2F%2F%20%20%20%20%20%20%20%20%20%20%20%20%20menu%3A%20'ShapeTypes'%2C%0A%20%20%20%20%20%20%20%20%20%20%2F%2F%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%20'costume'%0A%20%20%20%20%20%20%20%20%20%20%2F%2F%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%2F%2F%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%2F%2F%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%2F%2F%20%7B%0A%20%20%20%20%20%20%20%20%20%20%2F%2F%20%20%20%20%20opcode%3A%20'setPhysicsAll'%2C%0A%20%20%20%20%20%20%20%20%20%20%2F%2F%20%20%20%20%20blockType%3A%20BlockType.COMMAND%2C%0A%20%20%20%20%20%20%20%20%20%20%2F%2F%20%20%20%20%20text%3A%20Scratch.translate(%7B%0A%20%20%20%20%20%20%20%20%20%20%2F%2F%20%20%20%20%20%20%20%20%20id%3A%20'griffpatch.setPhysicsAll'%2C%0A%20%20%20%20%20%20%20%20%20%20%2F%2F%20%20%20%20%20%20%20%20%20default%3A%20'enable%20physics%20for%20all%20sprites'%2C%0A%20%20%20%20%20%20%20%20%20%20%2F%2F%20%20%20%20%20%20%20%20%20description%3A%20'Enable%20Physics%20For%20All%20Sprites'%0A%20%20%20%20%20%20%20%20%20%20%2F%2F%20%20%20%20%20%7D)%0A%20%20%20%20%20%20%20%20%20%20%2F%2F%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%2F%2F%0A%20%20%20%20%20%20%20%20%20%20%22---%22%2C%0A%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22doTick%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20BlockType.COMMAND%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20Scratch.translate(%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20id%3A%20%22griffpatch.doTick%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20default%3A%20%22step%20simulation%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20description%3A%20%22Run%20a%20single%20tick%20of%20the%20physics%20simulation%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D)%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22setTickRate%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20BlockType.COMMAND%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20Scratch.translate(%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20id%3A%20%22griffpatch.setTickRate%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20default%3A%20%22set%20simulation%20rate%20to%20%5Brate%5D%2Fs%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20description%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%22Set%20the%20number%20of%20physics%20simulation%20steps%20to%20run%20per%20second%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20rate%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20ArgumentType.NUMBER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%2030%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22getTickRate%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20BlockType.REPORTER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20Scratch.translate(%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20id%3A%20%22griffpatch.getTickRate%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20default%3A%20%22simulation%20rate%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20description%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%22Get%20the%20number%20of%20physics%20simulation%20steps%20to%20run%20per%20second%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D)%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%0A%20%20%20%20%20%20%20%20%20%20%22---%22%2C%0A%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22setPosition%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20BlockType.COMMAND%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20Scratch.translate(%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20id%3A%20%22griffpatch.setPosition%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20default%3A%20%22go%20to%20x%3A%20%5Bx%5D%20y%3A%20%5By%5D%20%5Bspace%5D%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20description%3A%20%22Position%20Sprite%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20x%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20ArgumentType.NUMBER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%200%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20y%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20ArgumentType.NUMBER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%200%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20space%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20ArgumentType.STRING%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20menu%3A%20%22SpaceTypes%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%20%22world%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20filter%3A%20%5BScratch.TargetType.SPRITE%5D%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%0A%20%20%20%20%20%20%20%20%20%20%22---%22%2C%0A%0A%20%20%20%20%20%20%20%20%20%20%2F%2F%20applyForce%20(target%2C%20ftype%2C%20x%2C%20y%2C%20dir%2C%20pow)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%2F%2F%20applyAngForce%20(target%2C%20pow)%20%7B%0A%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22setVelocity%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20BlockType.COMMAND%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20Scratch.translate(%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20id%3A%20%22griffpatch.setVelocity%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20default%3A%20%22set%20velocity%20to%20sx%3A%20%5Bsx%5D%20sy%3A%20%5Bsy%5D%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20description%3A%20%22Set%20Velocity%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20sx%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20ArgumentType.NUMBER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%200%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20sy%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20ArgumentType.NUMBER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%200%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20filter%3A%20%5BScratch.TargetType.SPRITE%5D%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22changeVelocity%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20BlockType.COMMAND%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20Scratch.translate(%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20id%3A%20%22griffpatch.changeVelocity%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20default%3A%20%22change%20velocity%20by%20sx%3A%20%5Bsx%5D%20sy%3A%20%5Bsy%5D%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20description%3A%20%22Change%20Velocity%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20sx%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20ArgumentType.NUMBER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%200%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20sy%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20ArgumentType.NUMBER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%200%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20filter%3A%20%5BScratch.TargetType.SPRITE%5D%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22getVelocityX%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20Scratch.translate(%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20id%3A%20%22griffpatch.getVelocityX%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20default%3A%20%22x%20velocity%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20description%3A%20%22get%20the%20x%20velocity%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20BlockType.REPORTER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20filter%3A%20%5BScratch.TargetType.SPRITE%5D%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22getVelocityY%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20Scratch.translate(%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20id%3A%20%22griffpatch.getVelocityY%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20default%3A%20%22y%20velocity%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20description%3A%20%22get%20the%20y%20velocity%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20BlockType.REPORTER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20filter%3A%20%5BScratch.TargetType.SPRITE%5D%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%0A%20%20%20%20%20%20%20%20%20%20%22---%22%2C%0A%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22applyForce%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20BlockType.COMMAND%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20Scratch.translate(%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20id%3A%20%22griffpatch.applyForce%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20default%3A%20%22push%20with%20force%20%5Bforce%5D%20in%20direction%20%5Bdir%5D%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20description%3A%20%22Push%20this%20object%20in%20a%20given%20direction%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20force%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20ArgumentType.NUMBER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%2025%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20dir%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20ArgumentType.ANGLE%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%200%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20filter%3A%20%5BScratch.TargetType.SPRITE%5D%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22applyAngForce%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20BlockType.COMMAND%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20Scratch.translate(%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20id%3A%20%22griffpatch.applyAngForce%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20default%3A%20%22spin%20with%20force%20%5Bforce%5D%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20description%3A%20%22Push%20this%20object%20in%20a%20given%20direction%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20force%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20ArgumentType.NUMBER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%20500%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20filter%3A%20%5BScratch.TargetType.SPRITE%5D%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%0A%20%20%20%20%20%20%20%20%20%20%22---%22%2C%0A%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22setAngVelocity%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20BlockType.COMMAND%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20Scratch.translate(%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20id%3A%20%22griffpatch.setAngVelocity%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20default%3A%20%22set%20angular%20velocity%20to%20%5Bforce%5D%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20description%3A%20%22Set%20the%20angular%20velocity%20of%20the%20sprite%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20force%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20ArgumentType.NUMBER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%2030%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20filter%3A%20%5BScratch.TargetType.SPRITE%5D%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22getAngVelocity%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20BlockType.REPORTER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20Scratch.translate(%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20id%3A%20%22griffpatch.getAngVelocity%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20default%3A%20%22angular%20velocity%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20description%3A%20%22Get%20the%20angular%20velocity%20of%20the%20sprite%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20filter%3A%20%5BScratch.TargetType.SPRITE%5D%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%0A%20%20%20%20%20%20%20%20%20%20%22---%22%2C%0A%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22setStatic%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20BlockType.COMMAND%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20Scratch.translate(%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20id%3A%20%22griffpatch.setStatic%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20default%3A%20%22set%20fixed%20to%20%5Bstatic%5D%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20description%3A%20%22Sets%20whether%20this%20block%20is%20static%20or%20dynamic%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20static%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20ArgumentType.STRING%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20menu%3A%20%22StaticTypes%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%20%22static%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20filter%3A%20%5BScratch.TargetType.SPRITE%5D%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22getStatic%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20Scratch.translate(%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20id%3A%20%22griffpatch.getStatic%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20default%3A%20%22fixed%3F%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20description%3A%20%22get%20whether%20this%20sprite%20is%20fixed%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20BlockType.BOOLEAN%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20filter%3A%20%5BScratch.TargetType.SPRITE%5D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20disableMonitor%3A%20true%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%0A%20%20%20%20%20%20%20%20%20%20%22---%22%2C%0A%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22setDensity%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20BlockType.COMMAND%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20Scratch.translate(%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20id%3A%20%22griffpatch.setDensity%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20default%3A%20%22set%20density%20to%20%5Bdensity%5D%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20description%3A%20%22Set%20the%20density%20of%20the%20object%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20density%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20ArgumentType.NUMBER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20menu%3A%20%22DensityTypes%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%20100%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20filter%3A%20%5BScratch.TargetType.SPRITE%5D%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22setDensityValue%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20func%3A%20%22setDensity%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20BlockType.COMMAND%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20Scratch.translate(%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20id%3A%20%22griffpatch.setDensityValue%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20default%3A%20%22set%20density%20to%20%5Bdensity%5D%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20description%3A%20%22Set%20the%20density%20of%20the%20object%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20density%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20ArgumentType.NUMBER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%20100%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20filter%3A%20%5BScratch.TargetType.SPRITE%5D%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22getDensity%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20BlockType.REPORTER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20Scratch.translate(%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20id%3A%20%22griffpatch.getDensity%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20default%3A%20%22density%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20description%3A%20%22Get%20the%20density%20of%20the%20object%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20filter%3A%20%5BScratch.TargetType.SPRITE%5D%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%0A%20%20%20%20%20%20%20%20%20%20%22---%22%2C%0A%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22setFriction%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20BlockType.COMMAND%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20Scratch.translate(%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20id%3A%20%22griffpatch.setFriction%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20default%3A%20%22set%20friction%20to%20%5Bfriction%5D%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20description%3A%20%22Set%20the%20friction%20of%20the%20object%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20friction%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20ArgumentType.NUMBER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20menu%3A%20%22FrictionTypes%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%2050%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20filter%3A%20%5BScratch.TargetType.SPRITE%5D%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22setFrictionValue%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20func%3A%20%22setFriction%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20BlockType.COMMAND%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20Scratch.translate(%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20id%3A%20%22griffpatch.setFrictionValue%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20default%3A%20%22set%20friction%20to%20%5Bfriction%5D%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20description%3A%20%22Set%20the%20friction%20value%20of%20the%20object%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20friction%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20ArgumentType.NUMBER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%2050%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20filter%3A%20%5BScratch.TargetType.SPRITE%5D%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22getFriction%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20BlockType.REPORTER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20Scratch.translate(%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20id%3A%20%22griffpatch.getFriction%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20default%3A%20%22friction%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20description%3A%20%22Get%20the%20friction%20of%20the%20object%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20filter%3A%20%5BScratch.TargetType.SPRITE%5D%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%0A%20%20%20%20%20%20%20%20%20%20%22---%22%2C%0A%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22setRestitution%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20BlockType.COMMAND%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20Scratch.translate(%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20id%3A%20%22griffpatch.setRestitution%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20default%3A%20%22set%20bounce%20to%20%5Brestitution%5D%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20description%3A%20%22Set%20the%20bounce%20of%20the%20object%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20restitution%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20ArgumentType.NUMBER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20menu%3A%20%22RestitutionTypes%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%2020%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20filter%3A%20%5BScratch.TargetType.SPRITE%5D%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22setRestitutionValue%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20func%3A%20%22setRestitution%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20BlockType.COMMAND%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20Scratch.translate(%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20id%3A%20%22griffpatch.setRestitutionValue%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20default%3A%20%22set%20bounce%20to%20%5Brestitution%5D%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20description%3A%20%22Set%20the%20bounce%20value%20of%20the%20object%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20restitution%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20ArgumentType.NUMBER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%2020%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20filter%3A%20%5BScratch.TargetType.SPRITE%5D%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22getRestitution%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20BlockType.REPORTER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20Scratch.translate(%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20id%3A%20%22griffpatch.getRestitution%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20default%3A%20%22bounce%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20description%3A%20%22Get%20the%20bounce%20value%20of%20the%20object%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20filter%3A%20%5BScratch.TargetType.SPRITE%5D%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%0A%20%20%20%20%20%20%20%20%20%20%22---%22%2C%0A%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22setProperties%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20BlockType.COMMAND%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20Scratch.translate(%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20id%3A%20%22griffpatch.setProperties%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20default%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%22set%20density%20%5Bdensity%5D%20roughness%20%5Bfriction%5D%20bounce%20%5Brestitution%5D%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20description%3A%20%22Set%20the%20density%20of%20the%20object%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20density%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20ArgumentType.NUMBER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20menu%3A%20%22DensityTypes%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%20100%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20friction%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20ArgumentType.NUMBER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20menu%3A%20%22FrictionTypes%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%2050%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20restitution%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20ArgumentType.NUMBER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20menu%3A%20%22RestitutionTypes%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%2020%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20filter%3A%20%5BScratch.TargetType.SPRITE%5D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20hideFromPalette%3A%20true%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%2F%2F%20%7B%0A%20%20%20%20%20%20%20%20%20%20%2F%2F%20%20%20%20%20opcode%3A%20'pinSprite'%2C%0A%20%20%20%20%20%20%20%20%20%20%2F%2F%20%20%20%20%20blockType%3A%20BlockType.COMMAND%2C%0A%20%20%20%20%20%20%20%20%20%20%2F%2F%20%20%20%20%20text%3A%20Scratch.translate(%7B%0A%20%20%20%20%20%20%20%20%20%20%2F%2F%20%20%20%20%20%20%20%20%20id%3A%20'griffpatch.pinSprite'%2C%0A%20%20%20%20%20%20%20%20%20%20%2F%2F%20%20%20%20%20%20%20%20%20default%3A%20'pin%20to%20world%20at%20sprite%5C's%20x%3A%20%5Bx%5D%20y%3A%20%5By%5D'%2C%0A%20%20%20%20%20%20%20%20%20%20%2F%2F%20%20%20%20%20%20%20%20%20description%3A%20'Pin%20the%20sprite'%0A%20%20%20%20%20%20%20%20%20%20%2F%2F%20%20%20%20%20%7D)%2C%0A%20%20%20%20%20%20%20%20%20%20%2F%2F%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%2F%2F%20%20%20%20%20%20%20%20%20x%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%2F%2F%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20ArgumentType.NUMBER%2C%0A%20%20%20%20%20%20%20%20%20%20%2F%2F%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%200%0A%20%20%20%20%20%20%20%20%20%20%2F%2F%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%2F%2F%20%20%20%20%20%20%20%20%20y%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%2F%2F%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20ArgumentType.NUMBER%2C%0A%20%20%20%20%20%20%20%20%20%20%2F%2F%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%200%0A%20%20%20%20%20%20%20%20%20%20%2F%2F%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%2F%2F%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%2F%2F%20%7D%2C%0A%0A%20%20%20%20%20%20%20%20%20%20%22---%22%2C%0A%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22getTouching%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20Scratch.translate(%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20id%3A%20%22griffpatch.getTouching%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20default%3A%20%22list%20sprites%20touching%20%5Bwhere%5D%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20description%3A%20%22get%20the%20name%20of%20any%20sprites%20we%20are%20touching%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20BlockType.REPORTER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20where%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20ArgumentType.STRING%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20menu%3A%20%22WhereTypes%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%20%22any%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20filter%3A%20%5BScratch.TargetType.SPRITE%5D%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%0A%20%20%20%20%20%20%20%20%20%20%2F%2F%20Scene%20Scrolling%20-------------------%0A%0A%20%20%20%20%20%20%20%20%20%20%22---%22%2C%0A%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22setScroll%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20BlockType.COMMAND%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20Scratch.translate(%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20id%3A%20%22griffpatch.setScroll%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20default%3A%20%22set%20scroll%20to%20x%3A%20%5Box%5D%20y%3A%20%5Boy%5D%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20description%3A%20%22Sets%20whether%20this%20block%20is%20static%20or%20dynamic%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20ox%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20ArgumentType.NUMBER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%200%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20oy%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20ArgumentType.NUMBER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%200%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22changeScroll%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20BlockType.COMMAND%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20Scratch.translate(%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20id%3A%20%22griffpatch.changeScroll%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20default%3A%20%22change%20scroll%20by%20x%3A%20%5Box%5D%20y%3A%20%5Boy%5D%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20description%3A%20%22Sets%20whether%20this%20block%20is%20static%20or%20dynamic%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20ox%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20ArgumentType.NUMBER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%200%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20oy%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20ArgumentType.NUMBER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%200%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22getScrollX%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20Scratch.translate(%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20id%3A%20%22griffpatch.getScrollX%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20default%3A%20%22x%20scroll%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20description%3A%20%22get%20the%20x%20scroll%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20BlockType.REPORTER%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22getScrollY%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20Scratch.translate(%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20id%3A%20%22griffpatch.getScrollY%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20default%3A%20%22y%20scroll%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20description%3A%20%22get%20the%20y%20scroll%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20BlockType.REPORTER%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%5D%2C%0A%0A%20%20%20%20%20%20%20%20menus%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20StageTypes%3A%20this.STAGE_TYPE_MENU%2C%0A%20%20%20%20%20%20%20%20%20%20SpaceTypes%3A%20this.SPACE_TYPE_MENU%2C%0A%20%20%20%20%20%20%20%20%20%20WhereTypes%3A%20this.WHERE_TYPE_MENU%2C%0A%20%20%20%20%20%20%20%20%20%20ShapeTypes%3A%20this.SHAPE_TYPE_MENU%2C%0A%20%20%20%20%20%20%20%20%20%20EnableModeTypes%3A%20this.ENABLE_TYPES_TYPE_MENU%2C%0A%20%20%20%20%20%20%20%20%20%20StaticTypes%3A%20this.STATIC_TYPE_MENU%2C%0A%20%20%20%20%20%20%20%20%20%20FrictionTypes%3A%20this.FRICTION_TYPE_MENU%2C%0A%20%20%20%20%20%20%20%20%20%20RestitutionTypes%3A%20this.RESTITUTION_TYPE_MENU%2C%0A%20%20%20%20%20%20%20%20%20%20DensityTypes%3A%20this.DENSITY_TYPE_MENU%2C%0A%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%7D%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20get%20STAGE_TYPE_MENU()%20%7B%0A%20%20%20%20%20%20return%20%5B%0A%20%20%20%20%20%20%20%20%7B%20text%3A%20%22boxed%20stage%22%2C%20value%3A%20STAGE_TYPE_OPTIONS.BOXED%20%7D%2C%0A%20%20%20%20%20%20%20%20%7B%20text%3A%20%22open%20(with%20floor)%22%2C%20value%3A%20STAGE_TYPE_OPTIONS.FLOOR%20%7D%2C%0A%20%20%20%20%20%20%20%20%7B%20text%3A%20%22open%20(no%20floor)%22%2C%20value%3A%20STAGE_TYPE_OPTIONS.OPEN%20%7D%2C%0A%20%20%20%20%20%20%5D%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20get%20SPACE_TYPE_MENU()%20%7B%0A%20%20%20%20%20%20return%20%5B%0A%20%20%20%20%20%20%20%20%7B%20text%3A%20%22in%20world%22%2C%20value%3A%20SPACE_TYPE_OPTIONS.WORLD%20%7D%2C%0A%20%20%20%20%20%20%20%20%7B%20text%3A%20%22on%20stage%22%2C%20value%3A%20SPACE_TYPE_OPTIONS.STAGE%20%7D%2C%0A%20%20%20%20%20%20%20%20%7B%20text%3A%20%22relative%22%2C%20value%3A%20SPACE_TYPE_OPTIONS.RELATIVE%20%7D%2C%0A%20%20%20%20%20%20%5D%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20get%20WHERE_TYPE_MENU()%20%7B%0A%20%20%20%20%20%20return%20%5B%0A%20%20%20%20%20%20%20%20%7B%20text%3A%20%22any%22%2C%20value%3A%20WHERE_TYPE_OPTIONS.ANY%20%7D%2C%0A%20%20%20%20%20%20%20%20%7B%20text%3A%20%22feet%22%2C%20value%3A%20WHERE_TYPE_OPTIONS.FEET%20%7D%2C%0A%20%20%20%20%20%20%5D%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20get%20SHAPE_TYPE_MENU()%20%7B%0A%20%20%20%20%20%20return%20%5B%0A%20%20%20%20%20%20%20%20%7B%20text%3A%20%22this%20costume%22%2C%20value%3A%20SHAPE_TYPE_OPTIONS.COSTUME%20%7D%2C%0A%20%20%20%20%20%20%20%20%7B%20text%3A%20%22this%20circle%22%2C%20value%3A%20SHAPE_TYPE_OPTIONS.CIRCLE%20%7D%2C%0A%20%20%20%20%20%20%20%20%2F%2F%20%7B%20text%3A%20%22this%20polygon%22%2C%20value%3A%20SHAPE_TYPE_OPTIONS.SVG_POLYGON%20%7D%2C%0A%20%20%20%20%20%20%20%20%7B%20text%3A%20%22all%20sprites%22%2C%20value%3A%20SHAPE_TYPE_OPTIONS.ALL%20%7D%2C%0A%20%20%20%20%20%20%5D%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20get%20ENABLE_TYPES_TYPE_MENU()%20%7B%0A%20%20%20%20%20%20return%20%5B%0A%20%20%20%20%20%20%20%20%7B%20text%3A%20%22normal%22%2C%20value%3A%20%22normal%22%20%7D%2C%0A%20%20%20%20%20%20%20%20%7B%20text%3A%20%22precision%22%2C%20value%3A%20%22bullet%22%20%7D%2C%0A%20%20%20%20%20%20%5D%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20get%20STATIC_TYPE_MENU()%20%7B%0A%20%20%20%20%20%20return%20%5B%0A%20%20%20%20%20%20%20%20%7B%20text%3A%20%22free%22%2C%20value%3A%20%22dynamic%22%20%7D%2C%0A%20%20%20%20%20%20%20%20%7B%20text%3A%20%22fixed%20in%20place%22%2C%20value%3A%20%22static%22%20%7D%2C%0A%20%20%20%20%20%20%20%20%7B%20text%3A%20%22fixed%20(but%20can%20rotate)%22%2C%20value%3A%20%22pinned%22%20%7D%2C%0A%20%20%20%20%20%20%5D%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20get%20DENSITY_TYPE_MENU()%20%7B%0A%20%20%20%20%20%20return%20%5B%0A%20%20%20%20%20%20%20%20%7B%20text%3A%20%22very%20light%22%2C%20value%3A%20%2225%22%20%7D%2C%0A%20%20%20%20%20%20%20%20%7B%20text%3A%20%22light%22%2C%20value%3A%20%2250%22%20%7D%2C%0A%20%20%20%20%20%20%20%20%7B%20text%3A%20%22normal%22%2C%20value%3A%20%22100%22%20%7D%2C%0A%20%20%20%20%20%20%20%20%7B%20text%3A%20%22heavy%22%2C%20value%3A%20%22200%22%20%7D%2C%0A%20%20%20%20%20%20%20%20%7B%20text%3A%20%22very%20heavy%22%2C%20value%3A%20%22400%22%20%7D%2C%0A%20%20%20%20%20%20%5D%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20get%20FRICTION_TYPE_MENU()%20%7B%0A%20%20%20%20%20%20return%20%5B%0A%20%20%20%20%20%20%20%20%7B%20text%3A%20%22none%22%2C%20value%3A%20%220%22%20%7D%2C%0A%20%20%20%20%20%20%20%20%7B%20text%3A%20%22smooth%22%2C%20value%3A%20%2220%22%20%7D%2C%0A%20%20%20%20%20%20%20%20%7B%20text%3A%20%22normal%22%2C%20value%3A%20%2250%22%20%7D%2C%0A%20%20%20%20%20%20%20%20%7B%20text%3A%20%22rough%22%2C%20value%3A%20%2275%22%20%7D%2C%0A%20%20%20%20%20%20%20%20%7B%20text%3A%20%22extremely%20rough%22%2C%20value%3A%20%22100%22%20%7D%2C%0A%20%20%20%20%20%20%5D%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20get%20RESTITUTION_TYPE_MENU()%20%7B%0A%20%20%20%20%20%20return%20%5B%0A%20%20%20%20%20%20%20%20%7B%20text%3A%20%22none%22%2C%20value%3A%20%220%22%20%7D%2C%0A%20%20%20%20%20%20%20%20%7B%20text%3A%20%22little%22%2C%20value%3A%20%2210%22%20%7D%2C%0A%20%20%20%20%20%20%20%20%7B%20text%3A%20%22normal%22%2C%20value%3A%20%2220%22%20%7D%2C%0A%20%20%20%20%20%20%20%20%7B%20text%3A%20%22quite%20bouncy%22%2C%20value%3A%20%2240%22%20%7D%2C%0A%20%20%20%20%20%20%20%20%7B%20text%3A%20%22very%20bouncy%22%2C%20value%3A%20%2270%22%20%7D%2C%0A%20%20%20%20%20%20%20%20%7B%20text%3A%20%22unstable%22%2C%20value%3A%20%22100%22%20%7D%2C%0A%20%20%20%20%20%20%5D%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F**%0A%20%20%20%20%20*%20Play%20a%20drum%20sound%20for%20some%20number%20of%20beats.%0A%20%20%20%20%20*%20%40property%20%7Bnumber%7D%20x%20-%20x%20offset.%0A%20%20%20%20%20*%20%40property%20%7Bnumber%7D%20y%20-%20y%20offset.%0A%20%20%20%20%20*%2F%0A%20%20%20%20doTick()%20%7B%0A%20%20%20%20%20%20%2F%2F%20args%2C%20util)%20%7B%0A%20%20%20%20%20%20%2F%2F%20this._playDrumForBeats(args.DRUM%2C%20args.BEATS%2C%20util)%3B%0A%20%20%20%20%20%20%2F%2F%20if%20(util.runtime.audioEngine%20%3D%3D%3D%20null)%20return%3B%0A%20%20%20%20%20%20%2F%2F%20if%20(util.target.sprite.soundBank%20%3D%3D%3D%20null)%20return%3B%0A%0A%20%20%20%20%20%20%2F%2F%20const%20dx%20%3D%20Cast.toNumber(args.x)%3B%0A%20%20%20%20%20%20%2F%2F%20const%20dy%20%3D%20Cast.toNumber(args.y)%3B%0A%0A%20%20%20%20%20%20%2F%2F%20const%20allTargets%20%3D%20this.runtime.targets%3B%0A%20%20%20%20%20%20%2F%2F%20if%20(allTargets%20%3D%3D%3D%20null)%20return%3B%0A%20%20%20%20%20%20%2F%2F%20for%20(let%20i%20%3D%200%3B%20i%20%3C%20allTargets.length%3B%20i%2B%2B)%20%7B%0A%20%20%20%20%20%20%2F%2F%20%20%20%20%20const%20target%20%3D%20allTargets%5Bi%5D%3B%0A%20%20%20%20%20%20%2F%2F%20%20%20%20%20if%20(!target.isStage)%20%7B%0A%20%20%20%20%20%20%2F%2F%20%20%20%20%20%20%20%20%20target.setXY(target.x%20%2B%20dx%2C%20target.y%20%2B%20dy)%3B%0A%20%20%20%20%20%20%2F%2F%20%20%20%20%20%7D%0A%20%20%20%20%20%20%2F%2F%20%7D%0A%0A%20%20%20%20%20%20%2F%2F%20util.target.setXY(util.target.x%20%2B%20dx%2C%20util.target.y%20%2B%20dy)%3B%0A%0A%20%20%20%20%20%20%2F%2F%20Matter.Engine.update(this.engine%2C%201000%20%2F%2030)%3B%0A%20%20%20%20%20%20this._checkMoved()%3B%0A%0A%20%20%20%20%20%20%2F%2F%20world.Step(1%20%2F%2030%2C%2010%2C%2010)%3B%0A%20%20%20%20%20%20world.Step(1%20%2F%20tickRate%2C%2010%2C%2010)%3B%0A%20%20%20%20%20%20world.ClearForces()%3B%0A%0A%20%20%20%20%20%20for%20(const%20targetID%20in%20bodies)%20%7B%0A%20%20%20%20%20%20%20%20const%20body%20%3D%20bodies%5BtargetID%5D%3B%0A%20%20%20%20%20%20%20%20const%20target%20%3D%20this.runtime.getTargetById(targetID)%3B%0A%20%20%20%20%20%20%20%20if%20(!target)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%2F%2F%20Drop%20target%20from%20simulation%0A%20%20%20%20%20%20%20%20%20%20world.DestroyBody(body)%3B%0A%20%20%20%20%20%20%20%20%20%20delete%20bodies%5BtargetID%5D%3B%0A%20%20%20%20%20%20%20%20%20%20delete%20prevPos%5BtargetID%5D%3B%0A%20%20%20%20%20%20%20%20%20%20continue%3B%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20const%20position%20%3D%20body.GetPosition()%3B%0A%0A%20%20%20%20%20%20%20%20_setXY(%0A%20%20%20%20%20%20%20%20%20%20target%2C%0A%20%20%20%20%20%20%20%20%20%20position.x%20*%20zoom%20-%20_scroll.x%2C%0A%20%20%20%20%20%20%20%20%20%20position.y%20*%20zoom%20-%20_scroll.y%0A%20%20%20%20%20%20%20%20)%3B%0A%20%20%20%20%20%20%20%20if%20(target.rotationStyle%20%3D%3D%3D%20ROTATION_STYLE_ALL_AROUND)%20%7B%0A%20%20%20%20%20%20%20%20%20%20target.setDirection(90%20-%20body.GetAngle()%20%2F%20toRad)%3B%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20prevPos%5BtargetID%5D%20%3D%20%7B%20x%3A%20target.x%2C%20y%3A%20target.y%2C%20dir%3A%20target.direction%20%7D%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%0A%20%20%20%20setTickRate(args)%20%7B%0A%20%20%20%20%20%20let%20rate%20%3D%20Scratch.Cast.toNumber(args.rate)%3B%0A%20%20%20%20%20%20if%20(Number.isNaN(rate)%20%7C%7C%20rate%20%3D%3D%3D%20Infinity)%20rate%20%3D%2030%3B%0A%20%20%20%20%20%20rate%20%3D%20Math.max(rate%2C%200.01)%3B%0A%0A%20%20%20%20%20%20tickRate%20%3D%20rate%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20getTickRate()%20%7B%0A%20%20%20%20%20%20return%20tickRate%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20_checkMoved()%20%7B%0A%20%20%20%20%20%20for%20(const%20targetID%20in%20bodies)%20%7B%0A%20%20%20%20%20%20%20%20const%20body%20%3D%20bodies%5BtargetID%5D%3B%0A%20%20%20%20%20%20%20%20const%20target%20%3D%20this.runtime.getTargetById(targetID)%3B%0A%20%20%20%20%20%20%20%20if%20(!target)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%2F%2F%20Drop%20target%20from%20simulation%0A%20%20%20%20%20%20%20%20%20%20world.DestroyBody(body)%3B%0A%20%20%20%20%20%20%20%20%20%20delete%20bodies%5BtargetID%5D%3B%0A%20%20%20%20%20%20%20%20%20%20delete%20prevPos%5BtargetID%5D%3B%0A%20%20%20%20%20%20%20%20%20%20continue%3B%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20const%20prev%20%3D%20prevPos%5BtargetID%5D%3B%0A%20%20%20%20%20%20%20%20const%20fixedRotation%20%3D%0A%20%20%20%20%20%20%20%20%20%20target.rotationStyle%20!%3D%3D%20ROTATION_STYLE_ALL_AROUND%3B%0A%0A%20%20%20%20%20%20%20%20if%20(prev%20%26%26%20(prev.x%20!%3D%3D%20target.x%20%7C%7C%20prev.y%20!%3D%3D%20target.y))%20%7B%0A%20%20%20%20%20%20%20%20%20%20const%20pos%20%3D%20new%20b2Vec2(%0A%20%20%20%20%20%20%20%20%20%20%20%20(target.x%20%2B%20_scroll.x)%20%2F%20zoom%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20(target.y%20%2B%20_scroll.y)%20%2F%20zoom%0A%20%20%20%20%20%20%20%20%20%20)%3B%0A%20%20%20%20%20%20%20%20%20%20this._setPosition(body%2C%20pos)%3B%0A%20%20%20%20%20%20%20%20%20%20if%20(!fixedRotation)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20body.SetAngle((90%20-%20target.direction)%20*%20toRad)%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20body.SetAwake(true)%3B%0A%20%20%20%20%20%20%20%20%7D%20else%20if%20(!fixedRotation%20%26%26%20prev%20%26%26%20prev.dir%20!%3D%3D%20target.direction)%20%7B%0A%20%20%20%20%20%20%20%20%20%20body.SetAngle((90%20-%20target.direction)%20*%20toRad)%3B%0A%20%20%20%20%20%20%20%20%20%20body.SetAwake(true)%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F**%0A%20%20%20%20%20*%20Play%20a%20drum%20sound%20for%20some%20number%20of%20beats.%0A%20%20%20%20%20*%20%40property%20%7Bnumber%7D%20x%20-%20x%20offset.%0A%20%20%20%20%20*%20%40property%20%7Bnumber%7D%20y%20-%20y%20offset.%0A%20%20%20%20%20*%2F%0A%20%20%20%20setPhysicsAll()%20%7B%0A%20%20%20%20%20%20const%20allTargets%20%3D%20this.runtime.targets%3B%0A%20%20%20%20%20%20if%20(allTargets%20%3D%3D%3D%20null)%20return%3B%0A%20%20%20%20%20%20for%20(let%20i%20%3D%200%3B%20i%20%3C%20allTargets.length%3B%20i%2B%2B)%20%7B%0A%20%20%20%20%20%20%20%20const%20target%20%3D%20allTargets%5Bi%5D%3B%0A%20%20%20%20%20%20%20%20if%20(!target.isStage%20%26%26%20!bodies%5Btarget.id%5D)%20%7B%0A%20%20%20%20%20%20%20%20%20%20this.setPhysicsFor(target)%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F**%0A%20%20%20%20%20*%20Play%20a%20drum%20sound%20for%20some%20number%20of%20beats.%0A%20%20%20%20%20*%20%40param%20%7Bobject%7D%20args%20-%20the%20block%20arguments.%0A%20%20%20%20%20*%20%40param%20%7Bobject%7D%20util%20-%20utility%20object%20provided%20by%20the%20runtime.%0A%20%20%20%20%20*%20%40property%20%7Bstring%7D%20shape%20-%20the%20shape%0A%20%20%20%20%20*%2F%0A%20%20%20%20setPhysics(args%2C%20util)%20%7B%0A%20%20%20%20%20%20%2F%2F%20this._playDrumForBeats(args.DRUM%2C%20args.BEATS%2C%20util)%3B%0A%20%20%20%20%20%20%2F%2F%20if%20(util.runtime.audioEngine%20%3D%3D%3D%20null)%20return%3B%0A%20%20%20%20%20%20%2F%2F%20if%20(util.target.sprite.soundBank%20%3D%3D%3D%20null)%20return%3B%0A%0A%20%20%20%20%20%20%2F%2F%20const%20dx%20%3D%20Cast.toNumber(args.x)%3B%0A%20%20%20%20%20%20%2F%2F%20const%20dy%20%3D%20Cast.toNumber(args.y)%3B%0A%0A%20%20%20%20%20%20if%20(args.shape%20%3D%3D%3D%20SHAPE_TYPE_OPTIONS.ALL)%20%7B%0A%20%20%20%20%20%20%20%20this.setPhysicsAll()%3B%0A%20%20%20%20%20%20%20%20return%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20const%20target%20%3D%20util.target%3B%0A%20%20%20%20%20%20const%20body%20%3D%20this.setPhysicsFor(target%2C%20args.shape)%3B%0A%20%20%20%20%20%20if%20(body)%20%7B%0A%20%20%20%20%20%20%20%20body.SetBullet(args.mode%20%3D%3D%3D%20%22bullet%22)%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%0A%20%20%20%20setPhysicsFor(target%2C%20shape)%20%7B%0A%20%20%20%20%20%20const%20r%20%3D%20this.runtime.renderer%3B%0A%20%20%20%20%20%20const%20drawable%20%3D%20r._allDrawables%5Btarget.drawableID%5D%3B%0A%0A%20%20%20%20%20%20%2F%2F%20Tell%20the%20Drawable%20about%20its%20updated%20convex%20hullPoints%2C%20if%20necessary.%0A%20%20%20%20%20%20if%20(drawable.needsConvexHullPoints())%20%7B%0A%20%20%20%20%20%20%20%20const%20points%20%3D%20r._getConvexHullPointsForDrawable(target.drawableID)%3B%0A%20%20%20%20%20%20%20%20drawable.setConvexHullPoints(points)%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%2F%2F%20if%20(drawable._transformDirty)%20%7B%0A%20%20%20%20%20%20%2F%2F%20%20%20%20%20drawable._calculateTransform()%3B%0A%20%20%20%20%20%20%2F%2F%20%7D%0A%20%20%20%20%20%20%2F%2F%20const%20points%20%3D%20drawable._getTransformedHullPoints()%3B%0A%20%20%20%20%20%20%2F%2F%0A%20%20%20%20%20%20%2F%2F%20const%20hullPoints%20%3D%20%5B%5D%3B%0A%20%20%20%20%20%20%2F%2F%20for%20(const%20i%20in%20points)%20%7B%0A%20%20%20%20%20%20%2F%2F%20%20%20%20%20hullPoints.push(%7Bx%3A%20points%5Bi%5D%5B0%5D%20-%20target.x%2C%20y%3A%20points%5Bi%5D%5B1%5D%20-%20target.y%7D)%3B%0A%20%20%20%20%20%20%2F%2F%20%7D%0A%0A%20%20%20%20%20%20const%20points%20%3D%20drawable._convexHullPoints%3B%0A%20%20%20%20%20%20const%20scaleX%20%3D%20drawable.scale%5B0%5D%20%2F%20100%3B%0A%20%20%20%20%20%20const%20scaleY%20%3D%20drawable.scale%5B1%5D%20%2F%20-100%3B%20%2F%2F%20Flip%20Y%20for%20hulls%0A%20%20%20%20%20%20const%20offset%20%3D%20drawable.skin.rotationCenter%3B%0A%20%20%20%20%20%20let%20allHulls%20%3D%20null%3B%0A%0A%20%20%20%20%20%20if%20(shape%20%3D%3D%3D%20SHAPE_TYPE_OPTIONS.CIRCLE)%20%7B%0A%20%20%20%20%20%20%20%20fixDef.shape%20%3D%20new%20b2CircleShape()%3B%0A%20%20%20%20%20%20%20%20const%20size%20%3D%20drawable.skin.size%3B%0A%20%20%20%20%20%20%20%20fixDef.shape.SetRadius(%0A%20%20%20%20%20%20%20%20%20%20(size%5B0%5D%20*%20Math.abs(scaleX)%20%2B%20size%5B1%5D%20*%20Math.abs(scaleY))%20%2F%204.0%20%2F%20zoom%0A%20%20%20%20%20%20%20%20)%3B%0A%20%20%20%20%20%20%20%20%2F%2F%20fixDef.shape.SetRadius((drawable.getBounds().width%20%2F%202)%20%2F%20zoom)%3B%0A%20%20%20%20%20%20%7D%20else%20if%20(shape%20%3D%3D%3D%20SHAPE_TYPE_OPTIONS.SVG_POLYGON)%20%7B%0A%20%20%20%20%20%20%20%20const%20svg%20%3D%20drawable._skin._svgRenderer._svgTag%3B%0A%0A%20%20%20%20%20%20%20%20%2F%2F%20recurse%20through%20childNodes%20of%20type%20'g'%2C%20looking%20for%20type%20'path'%0A%0A%20%20%20%20%20%20%20%20const%20hullPoints%20%3D%20%5B%5D%3B%0A%20%20%20%20%20%20%20%20if%20(svg)%20%7B%0A%20%20%20%20%20%20%20%20%20%20this._fetchPolygonPointsFromSVG(%0A%20%20%20%20%20%20%20%20%20%20%20%20svg%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20hullPoints%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20offset%5B0%5D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20offset%5B1%5D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20scaleX%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20scaleY%0A%20%20%20%20%20%20%20%20%20%20)%3B%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20_definePolyFromHull(hullPoints%5B0%5D)%3B%0A%20%20%20%20%20%20%20%20allHulls%20%3D%20hullPoints%3B%0A%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20const%20hullPoints%20%3D%20%5B%5D%3B%0A%20%20%20%20%20%20%20%20for%20(const%20i%20in%20points)%20%7B%0A%20%20%20%20%20%20%20%20%20%20hullPoints.push(%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20x%3A%20(points%5Bi%5D%5B0%5D%20-%20offset%5B0%5D)%20*%20scaleX%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20y%3A%20(points%5Bi%5D%5B1%5D%20-%20offset%5B1%5D)%20*%20scaleY%2C%0A%20%20%20%20%20%20%20%20%20%20%7D)%3B%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20_definePolyFromHull(hullPoints)%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20const%20fixedRotation%20%3D%20target.rotationStyle%20!%3D%3D%20ROTATION_STYLE_ALL_AROUND%3B%0A%20%20%20%20%20%20const%20body%20%3D%20_placeBody(%0A%20%20%20%20%20%20%20%20target.id%2C%0A%20%20%20%20%20%20%20%20target.x%2C%0A%20%20%20%20%20%20%20%20target.y%2C%0A%20%20%20%20%20%20%20%20fixedRotation%20%3F%2090%20%3A%20target.direction%0A%20%20%20%20%20%20)%3B%0A%20%20%20%20%20%20if%20(target.rotationStyle%20!%3D%3D%20ROTATION_STYLE_ALL_AROUND)%20%7B%0A%20%20%20%20%20%20%20%20body.SetFixedRotation(true)%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20if%20(allHulls)%20%7B%0A%20%20%20%20%20%20%20%20for%20(let%20i%20%3D%201%3B%20i%20%3C%20allHulls.length%3B%20i%2B%2B)%20%7B%0A%20%20%20%20%20%20%20%20%20%20_definePolyFromHull(allHulls%5Bi%5D)%3B%0A%20%20%20%20%20%20%20%20%20%20body.CreateFixture(fixDef)%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20return%20body%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20disablePhysics(args%2C%20util)%20%7B%0A%20%20%20%20%20%20_removeBody(util.target.id)%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F**%0A%20%20%20%20%20*%0A%20%20%20%20%20*%20%40param%20svg%20the%20svg%20element%0A%20%20%20%20%20*%20%40param%20%7BArray%7D%20hullPointsList%20array%20of%20points%0A%20%20%20%20%20*%20%40private%0A%20%20%20%20%20*%2F%0A%20%20%20%20_fetchPolygonPointsFromSVG(svg%2C%20hullPointsList%2C%20ox%2C%20oy%2C%20scaleX%2C%20scaleY)%20%7B%0A%20%20%20%20%20%20if%20(svg.tagName%20%3D%3D%3D%20%22g%22%20%7C%7C%20svg.tagName%20%3D%3D%3D%20%22svg%22)%20%7B%0A%20%20%20%20%20%20%20%20if%20(svg.hasChildNodes())%20%7B%0A%20%20%20%20%20%20%20%20%20%20for%20(const%20node%20of%20svg.childNodes)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20this._fetchPolygonPointsFromSVG(%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20node%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20hullPointsList%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20ox%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20oy%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20scaleX%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20scaleY%0A%20%20%20%20%20%20%20%20%20%20%20%20)%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20return%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20if%20(svg.tagName%20!%3D%3D%20%22path%22)%20%7B%0A%20%20%20%20%20%20%20%20return%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%2F%2F%20This%20is%20it%20boys!%20Get%20that%20svg%20data%20%3A)%0A%20%20%20%20%20%20%2F%2F%20%3Cpath%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20d%3D%22M%201%20109.7118%20L%201%201.8097%20L%2060.3049%2038.0516%20L%20117.9625%201.8097%20L%20117.9625%20109.7118%20L%2059.8931%2073.8817%20Z%20%22%0A%20%20%20%20%20%20%2F%2F%20%20data-paper-data%3D%22%7B%26quot%3BorigPos%26quot%3B%3Anull%7D%22%20stroke-width%3D%222%22%20fill%3D%22%239966ff%22%2F%3E%0A%0A%20%20%20%20%20%20let%20fx%3B%0A%20%20%20%20%20%20let%20fy%3B%0A%0A%20%20%20%20%20%20const%20hullPoints%20%3D%20%5B%5D%3B%0A%20%20%20%20%20%20hullPointsList.push(hullPoints)%3B%0A%0A%20%20%20%20%20%20const%20tokens%20%3D%20svg.getAttribute(%22d%22).split(%22%20%22)%3B%0A%20%20%20%20%20%20for%20(let%20i%20%3D%200%3B%20i%20%3C%20tokens.length%3B%20)%20%7B%0A%20%20%20%20%20%20%20%20const%20token%20%3D%20tokens%5Bi%2B%2B%5D%3B%0A%20%20%20%20%20%20%20%20if%20(token%20%3D%3D%3D%20%22M%22%20%7C%7C%20token%20%3D%3D%3D%20%22L%22)%20%7B%0A%20%20%20%20%20%20%20%20%20%20const%20x%20%3D%20Cast.toNumber(tokens%5Bi%2B%2B%5D)%3B%0A%20%20%20%20%20%20%20%20%20%20const%20y%20%3D%20Cast.toNumber(tokens%5Bi%2B%2B%5D)%3B%0A%20%20%20%20%20%20%20%20%20%20hullPoints.push(%7B%20x%3A%20(x%20-%20ox)%20*%20scaleX%2C%20y%3A%20(y%20-%20oy)%20*%20scaleY%20%7D)%3B%0A%20%20%20%20%20%20%20%20%20%20if%20(token%20%3D%3D%3D%20%22M%22)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20fx%20%3D%20x%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20fy%20%3D%20y%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20if%20(token%20%3D%3D%3D%20%22Z%22)%20%7B%0A%20%20%20%20%20%20%20%20%20%20hullPoints.push(%7B%20x%3A%20(fx%20-%20ox)%20*%20scaleX%2C%20y%3A%20(fy%20-%20oy)%20*%20scaleY%20%7D)%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%0A%20%20%20%20applyForce(args%2C%20util)%20%7B%0A%20%20%20%20%20%20_applyForce(%0A%20%20%20%20%20%20%20%20util.target.id%2C%0A%20%20%20%20%20%20%20%20%22Impulse%22%2C%0A%20%20%20%20%20%20%20%200%2C%0A%20%20%20%20%20%20%20%200%2C%0A%20%20%20%20%20%20%20%20Cast.toNumber(args.dir)%2C%0A%20%20%20%20%20%20%20%20Cast.toNumber(args.force)%0A%20%20%20%20%20%20)%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20applyAngForce(args%2C%20util)%20%7B%0A%20%20%20%20%20%20let%20body%20%3D%20bodies%5Butil.target.id%5D%3B%0A%20%20%20%20%20%20if%20(!body)%20%7B%0A%20%20%20%20%20%20%20%20body%20%3D%20this.setPhysicsFor(util.target)%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20body.ApplyTorque(-Cast.toNumber(args.force))%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20setAngVelocity(args%2C%20util)%20%7B%0A%20%20%20%20%20%20let%20body%20%3D%20bodies%5Butil.target.id%5D%3B%0A%20%20%20%20%20%20if%20(!body)%20%7B%0A%20%20%20%20%20%20%20%20body%20%3D%20this.setPhysicsFor(util.target)%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20body.SetAngularVelocity(-Cast.toNumber(args.force))%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20getAngVelocity(args%2C%20util)%20%7B%0A%20%20%20%20%20%20const%20body%20%3D%20bodies%5Butil.target.id%5D%3B%0A%20%20%20%20%20%20if%20(!body)%20%7B%0A%20%20%20%20%20%20%20%20return%200%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20const%20vel%20%3D%20-body.GetAngularVelocity()%3B%0A%20%20%20%20%20%20return%20vel%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20setDensity(args%2C%20util)%20%7B%0A%20%20%20%20%20%20let%20body%20%3D%20bodies%5Butil.target.id%5D%3B%0A%20%20%20%20%20%20if%20(!body)%20%7B%0A%20%20%20%20%20%20%20%20body%20%3D%20this.setPhysicsFor(util.target)%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20body.GetFixtureList().SetDensity(Cast.toNumber(args.density)%20%2F%20100.0)%3B%0A%20%20%20%20%20%20body.ResetMassData()%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20getDensity(args%2C%20util)%20%7B%0A%20%20%20%20%20%20let%20body%20%3D%20bodies%5Butil.target.id%5D%3B%0A%20%20%20%20%20%20if%20(!body)%20%7B%0A%20%20%20%20%20%20%20%20body%20%3D%20this.setPhysicsFor(util.target)%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20return%20body.GetFixtureList().GetDensity()%20*%20100%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20setFriction(args%2C%20util)%20%7B%0A%20%20%20%20%20%20let%20body%20%3D%20bodies%5Butil.target.id%5D%3B%0A%20%20%20%20%20%20if%20(!body)%20%7B%0A%20%20%20%20%20%20%20%20body%20%3D%20this.setPhysicsFor(util.target)%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20body.GetFixtureList().SetFriction(Cast.toNumber(args.friction)%20%2F%20100.0)%3B%0A%20%20%20%20%20%20body.ResetMassData()%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20getFriction(args%2C%20util)%20%7B%0A%20%20%20%20%20%20let%20body%20%3D%20bodies%5Butil.target.id%5D%3B%0A%20%20%20%20%20%20if%20(!body)%20%7B%0A%20%20%20%20%20%20%20%20body%20%3D%20this.setPhysicsFor(util.target)%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20return%20body.GetFixtureList().GetFriction()%20*%20100%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20setRestitution(args%2C%20util)%20%7B%0A%20%20%20%20%20%20let%20body%20%3D%20bodies%5Butil.target.id%5D%3B%0A%20%20%20%20%20%20if%20(!body)%20%7B%0A%20%20%20%20%20%20%20%20body%20%3D%20this.setPhysicsFor(util.target)%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20body%0A%20%20%20%20%20%20%20%20.GetFixtureList()%0A%20%20%20%20%20%20%20%20.SetRestitution(Cast.toNumber(args.restitution)%20%2F%20100.0)%3B%0A%20%20%20%20%20%20body.ResetMassData()%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20getRestitution(args%2C%20util)%20%7B%0A%20%20%20%20%20%20let%20body%20%3D%20bodies%5Butil.target.id%5D%3B%0A%20%20%20%20%20%20if%20(!body)%20%7B%0A%20%20%20%20%20%20%20%20body%20%3D%20this.setPhysicsFor(util.target)%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20return%20body.GetFixtureList().GetRestitution()%20*%20100%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20setProperties(args%2C%20util)%20%7B%0A%20%20%20%20%20%20let%20body%20%3D%20bodies%5Butil.target.id%5D%3B%0A%20%20%20%20%20%20if%20(!body)%20%7B%0A%20%20%20%20%20%20%20%20body%20%3D%20this.setPhysicsFor(util.target)%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20body.GetFixtureList().SetDensity(Cast.toNumber(args.density)%20%2F%20100.0)%3B%0A%20%20%20%20%20%20body.GetFixtureList().SetFriction(Cast.toNumber(args.friction)%20%2F%20100.0)%3B%0A%20%20%20%20%20%20body%0A%20%20%20%20%20%20%20%20.GetFixtureList()%0A%20%20%20%20%20%20%20%20.SetRestitution(Cast.toNumber(args.restitution)%20%2F%20100.0)%3B%0A%20%20%20%20%20%20body.ResetMassData()%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20pinSprite(args%2C%20util)%20%7B%0A%20%20%20%20%20%20if%20(!bodies%5Butil.target.id%5D)%20%7B%0A%20%20%20%20%20%20%20%20this.setPhysicsFor(util.target)%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20const%20x%20%3D%20Cast.toNumber(args.x)%3B%0A%20%20%20%20%20%20const%20y%20%3D%20Cast.toNumber(args.y)%3B%0A%0A%20%20%20%20%20%20_createJointOfType(%0A%20%20%20%20%20%20%20%20null%2C%0A%20%20%20%20%20%20%20%20%22Rotating%22%2C%0A%20%20%20%20%20%20%20%20util.target.id%2C%0A%20%20%20%20%20%20%20%20x%2C%0A%20%20%20%20%20%20%20%20y%2C%0A%20%20%20%20%20%20%20%20null%2C%0A%20%20%20%20%20%20%20%20null%2C%0A%20%20%20%20%20%20%20%20null%0A%20%20%20%20%20%20)%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F**%0A%20%20%20%20%20*%20Set's%20the%20sprites%20position.%0A%20%20%20%20%20*%20%40param%20%7Bobject%7D%20args%20-%20the%20block%20arguments.%0A%20%20%20%20%20*%20%40param%20%7Bobject%7D%20util%20-%20utility%20object%20provided%20by%20the%20runtime.%0A%20%20%20%20%20*%20%40property%20%7Bnumber%7D%20x%20-%20x%20offset.%0A%20%20%20%20%20*%20%40property%20%7Bnumber%7D%20y%20-%20y%20offset.%0A%20%20%20%20%20*%20%40property%20%7Bstring%7D%20space%20-%20Space%20type%20(SPACE_TYPE_OPTIONS)%0A%20%20%20%20%20*%2F%0A%20%20%20%20setPosition(args%2C%20util)%20%7B%0A%20%20%20%20%20%20const%20x%20%3D%20Cast.toNumber(args.x)%3B%0A%20%20%20%20%20%20const%20y%20%3D%20Cast.toNumber(args.y)%3B%0A%20%20%20%20%20%20const%20body%20%3D%20bodies%5Butil.target.id%5D%3B%0A%0A%20%20%20%20%20%20switch%20(args.space)%20%7B%0A%20%20%20%20%20%20%20%20case%20SPACE_TYPE_OPTIONS.STAGE%3A%0A%20%20%20%20%20%20%20%20%20%20_setXY(util.target%2C%20x%2C%20y)%3B%20%2F%2F%20Position%20on%20stage%20(after%20scroll)%0A%20%20%20%20%20%20%20%20%20%20if%20(body)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20this._setPosition(%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20body%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20new%20b2Vec2((x%20%2B%20_scroll.x)%20%2F%20zoom%2C%20(y%20%2B%20_scroll.y)%20%2F%20zoom)%0A%20%20%20%20%20%20%20%20%20%20%20%20)%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20break%3B%0A%20%20%20%20%20%20%20%20case%20SPACE_TYPE_OPTIONS.RELATIVE%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20_setXY(util.target%2C%20util.target.x%20%2B%20x%2C%20util.target.x%20%2B%20y)%3B%0A%20%20%20%20%20%20%20%20%20%20if%20(body)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20const%20pos%20%3D%20body.GetPosition()%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20const%20pos2%20%3D%20new%20b2Vec2(pos.x%20%2B%20x%20%2F%20zoom%2C%20pos.y%20%2B%20y%20%2F%20zoom)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20this._setPosition(body%2C%20pos2)%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20break%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20default%3A%0A%20%20%20%20%20%20%20%20%20%20_setXY(util.target%2C%20x%20-%20_scroll.x%2C%20y%20-%20_scroll.y)%3B%0A%20%20%20%20%20%20%20%20%20%20if%20(body)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20this._setPosition(body%2C%20new%20b2Vec2(x%20%2F%20zoom%2C%20y%20%2F%20zoom))%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%0A%20%20%20%20_setPosition(body%2C%20pos2)%20%7B%0A%20%20%20%20%20%20const%20md%20%3D%20pinned%5Bbody.uid%5D%3B%0A%20%20%20%20%20%20if%20(md)%20%7B%0A%20%20%20%20%20%20%20%20world.DestroyJoint(md)%3B%0A%20%20%20%20%20%20%20%20pinned%5Bbody.uid%5D%20%3D%20_createJointOfType(%0A%20%20%20%20%20%20%20%20%20%20null%2C%0A%20%20%20%20%20%20%20%20%20%20%22Rotating%22%2C%0A%20%20%20%20%20%20%20%20%20%20body.uid%2C%0A%20%20%20%20%20%20%20%20%20%200%2C%0A%20%20%20%20%20%20%20%20%20%200%2C%0A%20%20%20%20%20%20%20%20%20%20null%2C%0A%20%20%20%20%20%20%20%20%20%20pos2.x%20*%20zoom%2C%0A%20%20%20%20%20%20%20%20%20%20pos2.y%20*%20zoom%0A%20%20%20%20%20%20%20%20)%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20body.SetPosition(pos2)%3B%0A%20%20%20%20%20%20%2F%2F%20if%20(md)%20%7B%0A%20%20%20%20%20%20%2F%2F%20%20%20%20%20pinned%5Bbody.uid%5D%20%3D%20_createJointOfType(null%2C%20'Rotating'%2C%20body.uid%2C%200%2C%200%2C%20null%2C%20null%2C%20null)%3B%0A%20%20%20%20%20%20%2F%2F%20%7D%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F**%0A%20%20%20%20%20*%20Set%20the%20sprites%20velocity.%0A%20%20%20%20%20*%20%40param%20%7Bobject%7D%20args%20-%20the%20block%20arguments.%0A%20%20%20%20%20*%20%40param%20%7Bobject%7D%20util%20-%20utility%20object%20provided%20by%20the%20runtime.%0A%20%20%20%20%20*%20%40property%20%7Bnumber%7D%20sx%20-%20speed%20x.%0A%20%20%20%20%20*%20%40property%20%7Bnumber%7D%20sy%20-%20speed%20y.%0A%20%20%20%20%20*%2F%0A%20%20%20%20setVelocity(args%2C%20util)%20%7B%0A%20%20%20%20%20%20let%20body%20%3D%20bodies%5Butil.target.id%5D%3B%0A%20%20%20%20%20%20if%20(!body)%20%7B%0A%20%20%20%20%20%20%20%20body%20%3D%20this.setPhysicsFor(util.target)%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20body.SetAwake(true)%3B%0A%0A%20%20%20%20%20%20const%20x%20%3D%20Cast.toNumber(args.sx)%3B%0A%20%20%20%20%20%20const%20y%20%3D%20Cast.toNumber(args.sy)%3B%0A%20%20%20%20%20%20const%20force%20%3D%20new%20b2Vec2(x%2C%20y)%3B%0A%20%20%20%20%20%20force.Multiply(30%20%2F%20zoom)%3B%0A%20%20%20%20%20%20body.SetLinearVelocity(force)%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F**%0A%20%20%20%20%20*%20Change%20the%20sprites%20velocity.%0A%20%20%20%20%20*%20%40param%20%7Bobject%7D%20args%20-%20the%20block%20arguments.%0A%20%20%20%20%20*%20%40param%20%7Bobject%7D%20util%20-%20utility%20object%20provided%20by%20the%20runtime.%0A%20%20%20%20%20*%20%40property%20%7Bnumber%7D%20sx%20-%20speed%20x.%0A%20%20%20%20%20*%20%40property%20%7Bnumber%7D%20sy%20-%20speed%20y.%0A%20%20%20%20%20*%2F%0A%20%20%20%20changeVelocity(args%2C%20util)%20%7B%0A%20%20%20%20%20%20let%20body%20%3D%20bodies%5Butil.target.id%5D%3B%0A%20%20%20%20%20%20if%20(!body)%20%7B%0A%20%20%20%20%20%20%20%20body%20%3D%20this.setPhysicsFor(util.target)%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20body.SetAwake(true)%3B%0A%0A%20%20%20%20%20%20const%20x%20%3D%20Cast.toNumber(args.sx)%3B%0A%20%20%20%20%20%20const%20y%20%3D%20Cast.toNumber(args.sy)%3B%0A%20%20%20%20%20%20const%20force%20%3D%20new%20b2Vec2(x%2C%20y)%3B%0A%20%20%20%20%20%20force.Multiply(30%20%2F%20zoom)%3B%0A%20%20%20%20%20%20force.Add(body.GetLinearVelocity())%3B%0A%20%20%20%20%20%20body.SetLinearVelocity(force)%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F**%0A%20%20%20%20%20*%20Get%20the%20current%20tempo.%0A%20%20%20%20%20*%20%40param%20%7Bobject%7D%20args%20-%20the%20block%20arguments.%0A%20%20%20%20%20*%20%40param%20%7Bobject%7D%20util%20-%20utility%20object%20provided%20by%20the%20runtime.%0A%20%20%20%20%20*%20%40return%20%7Bboolean%7D%20-%20the%20current%20tempo%2C%20in%20beats%20per%20minute.%0A%20%20%20%20%20*%2F%0A%20%20%20%20getStatic(args%2C%20util)%20%7B%0A%20%20%20%20%20%20const%20body%20%3D%20bodies%5Butil.target.id%5D%3B%0A%20%20%20%20%20%20if%20(!body)%20%7B%0A%20%20%20%20%20%20%20%20return%20false%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20const%20type%20%3D%20body.GetType()%3B%0A%20%20%20%20%20%20return%20type%20%3D%3D%3D%20b2Body.b2_staticBody%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F**%0A%20%20%20%20%20*%20Get%20the%20current%20tempo.%0A%20%20%20%20%20*%20%40param%20%7Bobject%7D%20args%20-%20the%20block%20arguments.%0A%20%20%20%20%20*%20%40param%20%7Bobject%7D%20util%20-%20utility%20object%20provided%20by%20the%20runtime.%0A%20%20%20%20%20*%20%40return%20%7Bnumber%7D%20-%20the%20current%20x%20velocity.%0A%20%20%20%20%20*%2F%0A%20%20%20%20getVelocityX(args%2C%20util)%20%7B%0A%20%20%20%20%20%20const%20body%20%3D%20bodies%5Butil.target.id%5D%3B%0A%20%20%20%20%20%20if%20(!body)%20%7B%0A%20%20%20%20%20%20%20%20return%200%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20const%20x%20%3D%20body.GetLinearVelocity().x%3B%0A%20%20%20%20%20%20return%20(x%20*%20zoom)%20%2F%2030%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F**%0A%20%20%20%20%20*%20Get%20the%20current%20tempo.%0A%20%20%20%20%20*%20%40param%20%7Bobject%7D%20args%20-%20the%20block%20arguments.%0A%20%20%20%20%20*%20%40param%20%7Bobject%7D%20util%20-%20utility%20object%20provided%20by%20the%20runtime.%0A%20%20%20%20%20*%20%40return%20%7Bboolean%7D%20-%20the%20current%20y%20velocity.%0A%20%20%20%20%20*%2F%0A%20%20%20%20getVelocityY(args%2C%20util)%20%7B%0A%20%20%20%20%20%20const%20body%20%3D%20bodies%5Butil.target.id%5D%3B%0A%20%20%20%20%20%20if%20(!body)%20%7B%0A%20%20%20%20%20%20%20%20return%200%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20const%20y%20%3D%20body.GetLinearVelocity().y%3B%0A%20%20%20%20%20%20return%20(y%20*%20zoom)%20%2F%2030%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F**%0A%20%20%20%20%20*%20Sets%20the%20static%20property%0A%20%20%20%20%20*%20%40param%20%7Bobject%7D%20args%20-%20the%20block%20arguments.%0A%20%20%20%20%20*%20%40param%20%7Bobject%7D%20util%20-%20utility%20object%20provided%20by%20the%20runtime.%0A%20%20%20%20%20*%20%40property%20%7Bstring%7D%20static%20-%20static%20or%20not%0A%20%20%20%20%20*%2F%0A%20%20%20%20setStatic(args%2C%20util)%20%7B%0A%20%20%20%20%20%20const%20target%20%3D%20util.target%3B%0A%20%20%20%20%20%20let%20body%20%3D%20bodies%5Butil.target.id%5D%3B%0A%20%20%20%20%20%20if%20(!body)%20%7B%0A%20%20%20%20%20%20%20%20body%20%3D%20this.setPhysicsFor(target)%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20body.SetType(%0A%20%20%20%20%20%20%20%20args.static%20%3D%3D%3D%20%22static%22%20%3F%20b2Body.b2_staticBody%20%3A%20b2Body.b2_dynamicBody%0A%20%20%20%20%20%20)%3B%0A%0A%20%20%20%20%20%20const%20pos%20%3D%20new%20b2Vec2(%0A%20%20%20%20%20%20%20%20(target.x%20%2B%20_scroll.x)%20%2F%20zoom%2C%0A%20%20%20%20%20%20%20%20(target.y%20%2B%20_scroll.y)%20%2F%20zoom%0A%20%20%20%20%20%20)%3B%0A%20%20%20%20%20%20const%20fixedRotation%20%3D%20target.rotationStyle%20!%3D%3D%20ROTATION_STYLE_ALL_AROUND%3B%0A%20%20%20%20%20%20body.SetPositionAndAngle(%0A%20%20%20%20%20%20%20%20pos%2C%0A%20%20%20%20%20%20%20%20fixedRotation%20%3F%200%20%3A%20(90%20-%20target.direction)%20*%20toRad%0A%20%20%20%20%20%20)%3B%0A%0A%20%20%20%20%20%20if%20(args.static%20%3D%3D%3D%20%22pinned%22)%20%7B%0A%20%20%20%20%20%20%20%20%2F%2F%20Find%20what's%20behind%20the%20sprite%20(pin%20to%20that)%0A%20%20%20%20%20%20%20%20const%20point%20%3D%20new%20b2AABB()%3B%0A%20%20%20%20%20%20%20%20point.lowerBound.SetV(pos)%3B%0A%20%20%20%20%20%20%20%20point.upperBound.SetV(pos)%3B%0A%20%20%20%20%20%20%20%20let%20body2ID%20%3D%20null%3B%0A%20%20%20%20%20%20%20%20world.QueryAABB((fixture)%20%3D%3E%20%7B%0A%20%20%20%20%20%20%20%20%20%20const%20body2%20%3D%20fixture.GetBody()%3B%0A%20%20%20%20%20%20%20%20%20%20if%20(body2%20!%3D%3D%20body%20%26%26%20fixture.TestPoint(pos.x%2C%20pos.y))%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20body2ID%20%3D%20body2.uid%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20false%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20return%20true%3B%0A%20%20%20%20%20%20%20%20%7D%2C%20point)%3B%0A%0A%20%20%20%20%20%20%20%20pinned%5Btarget.id%5D%20%3D%20_createJointOfType(%0A%20%20%20%20%20%20%20%20%20%20null%2C%0A%20%20%20%20%20%20%20%20%20%20%22Rotating%22%2C%0A%20%20%20%20%20%20%20%20%20%20target.id%2C%0A%20%20%20%20%20%20%20%20%20%200%2C%0A%20%20%20%20%20%20%20%20%20%200%2C%0A%20%20%20%20%20%20%20%20%20%20body2ID%2C%0A%20%20%20%20%20%20%20%20%20%20null%2C%0A%20%20%20%20%20%20%20%20%20%20null%0A%20%20%20%20%20%20%20%20)%3B%0A%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20const%20pin%20%3D%20pinned%5Btarget.id%5D%3B%0A%20%20%20%20%20%20%20%20if%20(pin)%20%7B%0A%20%20%20%20%20%20%20%20%20%20world.DestroyJoint(pin)%3B%0A%20%20%20%20%20%20%20%20%20%20%2F%2F%20delete%20joints%5Bpin.I%5D%3B%0A%20%20%20%20%20%20%20%20%20%20delete%20pinned%5Btarget.id%5D%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F**%0A%20%20%20%20%20*%20Sets%20the%20sprite%20offset%0A%20%20%20%20%20*%20%40param%20%7Bobject%7D%20args%20-%20the%20block%20arguments.%0A%20%20%20%20%20*%20%40property%20%7Bnumber%7D%20ox%20-%20x%20offset.%0A%20%20%20%20%20*%20%40property%20%7Bnumber%7D%20oy%20-%20y%20offset.%0A%20%20%20%20%20*%2F%0A%20%20%20%20setScroll(args)%20%7B%0A%20%20%20%20%20%20this._checkMoved()%3B%0A%20%20%20%20%20%20_scroll.x%20%3D%20Cast.toNumber(args.ox)%3B%0A%20%20%20%20%20%20_scroll.y%20%3D%20Cast.toNumber(args.oy)%3B%0A%20%20%20%20%20%20this._repositionBodies()%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F**%0A%20%20%20%20%20*%20Sets%20the%20sprite%20offset%0A%20%20%20%20%20*%20%40param%20%7Bobject%7D%20args%20-%20the%20block%20arguments.%0A%20%20%20%20%20*%20%40property%20%7Bnumber%7D%20ox%20-%20x%20offset.%0A%20%20%20%20%20*%20%40property%20%7Bnumber%7D%20oy%20-%20y%20offset.%0A%20%20%20%20%20*%2F%0A%20%20%20%20changeScroll(args)%20%7B%0A%20%20%20%20%20%20this._checkMoved()%3B%0A%20%20%20%20%20%20_scroll.x%20%2B%3D%20Cast.toNumber(args.ox)%3B%0A%20%20%20%20%20%20_scroll.y%20%2B%3D%20Cast.toNumber(args.oy)%3B%0A%20%20%20%20%20%20this._repositionBodies()%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F**%0A%20%20%20%20%20*%20Get%20the%20scroll%20x.%0A%20%20%20%20%20*%20%40return%20%7Bnumber%7D%20-%20the%20current%20x%20velocity.%0A%20%20%20%20%20*%2F%0A%20%20%20%20getScrollX()%20%7B%0A%20%20%20%20%20%20return%20_scroll.x%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F**%0A%20%20%20%20%20*%20Get%20the%20scroll%20x.%0A%20%20%20%20%20*%20%40return%20%7Bnumber%7D%20-%20the%20current%20x%20velocity.%0A%20%20%20%20%20*%2F%0A%20%20%20%20getScrollY()%20%7B%0A%20%20%20%20%20%20return%20_scroll.y%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20_repositionBodies()%20%7B%0A%20%20%20%20%20%20for%20(const%20targetID%20in%20bodies)%20%7B%0A%20%20%20%20%20%20%20%20const%20body%20%3D%20bodies%5BtargetID%5D%3B%0A%20%20%20%20%20%20%20%20const%20target%20%3D%20this.runtime.getTargetById(targetID)%3B%0A%20%20%20%20%20%20%20%20if%20(target)%20%7B%0A%20%20%20%20%20%20%20%20%20%20const%20position%20%3D%20body.GetPosition()%3B%0A%20%20%20%20%20%20%20%20%20%20_setXY(%0A%20%20%20%20%20%20%20%20%20%20%20%20target%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20position.x%20*%20zoom%20-%20_scroll.x%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20position.y%20*%20zoom%20-%20_scroll.y%0A%20%20%20%20%20%20%20%20%20%20)%3B%0A%20%20%20%20%20%20%20%20%20%20prevPos%5BtargetID%5D%20%3D%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20x%3A%20target.x%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20y%3A%20target.y%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20dir%3A%20target.direction%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%0A%20%20%20%20getTouching(args%2C%20util)%20%7B%0A%20%20%20%20%20%20const%20target%20%3D%20util.target%3B%0A%20%20%20%20%20%20const%20body%20%3D%20bodies%5Btarget.id%5D%3B%0A%20%20%20%20%20%20if%20(!body)%20%7B%0A%20%20%20%20%20%20%20%20return%20%22%22%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20const%20where%20%3D%20args.where%3B%0A%20%20%20%20%20%20let%20touching%20%3D%20%22%22%3B%0A%20%20%20%20%20%20const%20contacts%20%3D%20body.GetContactList()%3B%0A%20%20%20%20%20%20for%20(let%20ce%20%3D%20contacts%3B%20ce%3B%20ce%20%3D%20ce.next)%20%7B%0A%20%20%20%20%20%20%20%20%2F%2F%20noinspection%20JSBitwiseOperatorUsage%0A%20%20%20%20%20%20%20%20if%20(ce.contact.m_flags%20%26%20b2Contact.e_islandFlag)%20%7B%0A%20%20%20%20%20%20%20%20%20%20continue%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20if%20(%0A%20%20%20%20%20%20%20%20%20%20ce.contact.IsSensor()%20%3D%3D%3D%20true%20%7C%7C%0A%20%20%20%20%20%20%20%20%20%20ce.contact.IsEnabled()%20%3D%3D%3D%20false%20%7C%7C%0A%20%20%20%20%20%20%20%20%20%20ce.contact.IsTouching()%20%3D%3D%3D%20false%0A%20%20%20%20%20%20%20%20)%20%7B%0A%20%20%20%20%20%20%20%20%20%20continue%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20const%20contact%20%3D%20ce.contact%3B%0A%20%20%20%20%20%20%20%20const%20fixtureA%20%3D%20contact.GetFixtureA()%3B%0A%20%20%20%20%20%20%20%20const%20fixtureB%20%3D%20contact.GetFixtureB()%3B%0A%20%20%20%20%20%20%20%20const%20bodyA%20%3D%20fixtureA.GetBody()%3B%0A%20%20%20%20%20%20%20%20const%20bodyB%20%3D%20fixtureB.GetBody()%3B%0A%0A%20%20%20%20%20%20%20%20%2F%2F%20const%20myFix%20%3D%20touchingB%20%3F%20fixtureA%20%3A%20fixtureB%3B%0A%0A%20%20%20%20%20%20%20%20const%20touchingB%20%3D%20bodyA%20%3D%3D%3D%20body%3B%0A%20%20%20%20%20%20%20%20if%20(where%20!%3D%3D%20%22any%22)%20%7B%0A%20%20%20%20%20%20%20%20%20%20const%20man%20%3D%20new%20Box2D.Collision.b2WorldManifold()%3B%0A%20%20%20%20%20%20%20%20%20%20contact.GetWorldManifold(man)%3B%0A%20%20%20%20%20%20%20%20%20%20%2F%2F%20man.m_points%0A%20%20%20%20%20%20%20%20%20%20%2F%2F%20const%20mx%20%3D%20man.m_normal.x%3B%0A%20%20%20%20%20%20%20%20%20%20%2F%2F%20const%20my%20%3D%20man.m_normal.y%3B%0A%0A%20%20%20%20%20%20%20%20%20%20if%20(where%20%3D%3D%3D%20%22feet%22)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20if%20(my%20%3E%20-0.6)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20%20%20%20%20continue%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20%7D%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20const%20fixture%20%3D%20body.GetFixtureList()%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20const%20y%20%3D%20man.m_points%5B0%5D.y%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20y%20%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20fixture.m_aabb.lowerBound.y%20*%200.75%20%2B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20fixture.m_aabb.upperBound.y%20*%200.25%0A%20%20%20%20%20%20%20%20%20%20%20%20)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20continue%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20const%20lp%20%3D%20body.GetLocalPoint(man.m_points%5B0%5D).Normalize()%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20if%20(lp.y)%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20const%20other%20%3D%20touchingB%20%3F%20bodyB%20%3A%20bodyA%3B%0A%20%20%20%20%20%20%20%20const%20uid%20%3D%20other.uid%3B%0A%20%20%20%20%20%20%20%20const%20target2%20%3D%20uid%0A%20%20%20%20%20%20%20%20%20%20%3F%20this.runtime.getTargetById(uid)%0A%20%20%20%20%20%20%20%20%20%20%3A%20this.runtime.getTargetForStage()%3B%0A%20%20%20%20%20%20%20%20if%20(target2)%20%7B%0A%20%20%20%20%20%20%20%20%20%20const%20name%20%3D%20target2.sprite.name%3B%0A%20%20%20%20%20%20%20%20%20%20if%20(touching.length%20%3D%3D%3D%200)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20touching%20%3D%20name%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20touching%20%2B%3D%20%60%2C%24%7Bname%7D%60%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20return%20touching%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F**%0A%20%20%20%20%20*%20Sets%20the%20stage%0A%20%20%20%20%20*%20%40param%20%7Bobject%7D%20args%20-%20the%20block%20arguments.%0A%20%20%20%20%20*%20%40property%20%7Bnumber%7D%20stageType%20-%20Stage%20Type.%0A%20%20%20%20%20*%2F%0A%20%20%20%20setStage(args)%20%7B%0A%20%20%20%20%20%20_setStageType(args.stageType)%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F**%0A%20%20%20%20%20*%20Sets%20the%20gravity%0A%20%20%20%20%20*%20%40param%20%7Bobject%7D%20args%20-%20the%20block%20arguments.%0A%20%20%20%20%20*%20%40property%20%7Bnumber%7D%20gx%20-%20Gravity%20x.%0A%20%20%20%20%20*%20%40property%20%7Bnumber%7D%20gy%20-%20Gravity%20y.%0A%20%20%20%20%20*%2F%0A%20%20%20%20setGravity(args)%20%7B%0A%20%20%20%20%20%20world.SetGravity(%0A%20%20%20%20%20%20%20%20new%20b2Vec2(Cast.toNumber(args.gx)%2C%20Cast.toNumber(args.gy))%0A%20%20%20%20%20%20)%3B%0A%20%20%20%20%20%20for%20(const%20bodyID%20in%20bodies)%20%7B%0A%20%20%20%20%20%20%20%20bodies%5BbodyID%5D.SetAwake(true)%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%0A%20%20%20%20getGravityX()%20%7B%0A%20%20%20%20%20%20return%20world.GetGravity().x%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20getGravityY()%20%7B%0A%20%20%20%20%20%20return%20world.GetGravity().y%3B%0A%20%20%20%20%7D%0A%20%20%7D%0A%0A%20%20Scratch.extensions.register(new%20Scratch3Griffpatch())%3B%0A%7D)(Scratch)%3B%0A%20%7D)(Scratch)%3B","data:text/javascript;,(function(Scratch)%20%7B%20%2F%2F%20Name%3A%20Stretch%0A%2F%2F%20ID%3A%20stretch%0A%2F%2F%20Description%3A%20Stretch%20sprites%20horizontally%20or%20vertically.%0A%2F%2F%20License%3A%20MIT%20AND%20MPL-2.0%0A%0A%2F*%20generated%20l10n%20code%20*%2FScratch.translate.setup(%7B%22de%22%3A%7B%22_Stretch%22%3A%22Strecken%22%7D%2C%22fi%22%3A%7B%22_Stretch%22%3A%22Venyt%C3%A4%22%7D%2C%22it%22%3A%7B%22_Stretch%22%3A%22Stira%22%2C%22_change%20stretch%20by%20x%3A%20%5BDX%5D%20y%3A%20%5BDY%5D%22%3A%22cambia%20deformazione%20di%20x%3A%20%5BDX%5D%20y%3A%20%5BDY%5D%22%2C%22_change%20stretch%20x%20by%20%5BDX%5D%22%3A%22cambia%20deformazione%20x%20di%20%5BDX%5D%22%2C%22_change%20stretch%20y%20by%20%5BDY%5D%22%3A%22cambia%20deformazione%20y%20di%20%5BDY%5D%22%2C%22_set%20stretch%20to%20x%3A%20%5BX%5D%20y%3A%20%5BY%5D%22%3A%22imposta%20deformazione%20a%20x%3A%20%5BX%5D%20y%3A%20%5BY%5D%22%2C%22_set%20stretch%20x%20to%20%5BX%5D%22%3A%22porta%20deformazione%20x%20a%20%5BX%5D%22%2C%22_set%20stretch%20y%20to%20%5BY%5D%22%3A%22porta%20deformazione%20y%20a%20%5BY%5D%22%2C%22_x%20stretch%22%3A%22deformazione%20x%22%2C%22_y%20stretch%22%3A%22deformazione%20y%22%7D%2C%22nb%22%3A%7B%22_Stretch%22%3A%22Strekke%22%2C%22_change%20stretch%20by%20x%3A%20%5BDX%5D%20y%3A%20%5BDY%5D%22%3A%22endre%20strekk%20med%20x%3A%20%5BDX%5D%20y%3A%20%5BDY%5D%22%2C%22_change%20stretch%20x%20by%20%5BDX%5D%22%3A%22endre%20strekk%20x%20med%20%5BDX%5D%22%2C%22_change%20stretch%20y%20by%20%5BDY%5D%22%3A%22endre%20strekk%20y%20med%20%5BDY%5D%22%2C%22_set%20stretch%20to%20x%3A%20%5BX%5D%20y%3A%20%5BY%5D%22%3A%22sett%20strekk%20til%20x%3A%20%5BX%5D%20y%3A%20%5BY%5D%22%2C%22_set%20stretch%20x%20to%20%5BX%5D%22%3A%22sett%20strekk%20x%20til%20%5BX%5D%22%2C%22_set%20stretch%20y%20to%20%5BY%5D%22%3A%22sett%20strekk%20y%20til%20%5BY%5D%22%2C%22_x%20stretch%22%3A%22x%20strekk%22%2C%22_y%20stretch%22%3A%22y%20strekk%22%7D%2C%22nl%22%3A%7B%22_Stretch%22%3A%22Rekken%22%2C%22_change%20stretch%20by%20x%3A%20%5BDX%5D%20y%3A%20%5BDY%5D%22%3A%22verander%20uitrekking%20met%20x%3A%20%5BDX%5D%20y%3A%20%5BDY%5D%22%2C%22_change%20stretch%20x%20by%20%5BDX%5D%22%3A%22verander%20x-uitrekking%20met%20%5BDX%5D%22%2C%22_change%20stretch%20y%20by%20%5BDY%5D%22%3A%22verander%20y-uitrekking%20met%20%5BDY%5D%22%2C%22_set%20stretch%20to%20x%3A%20%5BX%5D%20y%3A%20%5BY%5D%22%3A%22stel%20uitrekking%20in%20op%20x%3A%20%5BX%5D%20y%3A%20%5BY%5D%22%2C%22_set%20stretch%20x%20to%20%5BX%5D%22%3A%22maak%20x-uitrekking%20%5BX%5D%22%2C%22_set%20stretch%20y%20to%20%5BY%5D%22%3A%22maak%20y-uitrekking%20%5BY%5D%22%2C%22_x%20stretch%22%3A%22x-uitrekking%22%2C%22_y%20stretch%22%3A%22y-uitrekking%22%7D%2C%22ru%22%3A%7B%22_Stretch%22%3A%22%D0%A0%D0%B0%D1%81%D1%82%D1%8F%D0%B6%D0%B5%D0%BD%D0%B8%D0%B5%22%2C%22_change%20stretch%20by%20x%3A%20%5BDX%5D%20y%3A%20%5BDY%5D%22%3A%22%D0%B8%D0%B7%D0%BC%D0%B5%D0%BD%D0%B8%D1%82%D1%8C%20%D1%80%D0%B0%D1%81%D1%82%D1%8F%D0%B6%D0%B5%D0%BD%D0%B8%D0%B5%20%D0%BD%D0%B0%20x%3A%20%5BDX%5D%20y%3A%20%5BDY%5D%22%2C%22_change%20stretch%20x%20by%20%5BDX%5D%22%3A%22%D0%B8%D0%B7%D0%BC%D0%B5%D0%BD%D0%B8%D1%82%D1%8C%20%D1%80%D0%B0%D1%81%D1%82%D1%8F%D0%B6%D0%B5%D0%BD%D0%B8%D0%B5%20x%20%D0%BD%D0%B0%20%5BDX%5D%22%2C%22_change%20stretch%20y%20by%20%5BDY%5D%22%3A%22%D0%B8%D0%B7%D0%BC%D0%B5%D0%BD%D0%B8%D1%82%D1%8C%20%D1%80%D0%B0%D1%81%D1%82%D1%8F%D0%B6%D0%B5%D0%BD%D0%B8%D0%B5%20y%20%D0%BD%D0%B0%20%5BDY%5D%22%2C%22_set%20stretch%20to%20x%3A%20%5BX%5D%20y%3A%20%5BY%5D%22%3A%22%D0%B7%D0%B0%D0%B4%D0%B0%D1%82%D1%8C%20%D1%80%D0%B0%D1%81%D1%82%D1%8F%D0%B6%D0%B5%D0%BD%D0%B8%D0%B5%20%D0%B2%20x%3A%20%5BX%5D%20y%3A%20%5BY%5D%22%2C%22_set%20stretch%20x%20to%20%5BX%5D%22%3A%22%D0%B7%D0%B0%D0%B4%D0%B0%D1%82%D1%8C%20%D1%80%D0%B0%D1%81%D1%82%D1%8F%D0%B6%D0%B5%D0%BD%D0%B8%D0%B5%20x%20%D0%B2%20%5BX%5D%22%2C%22_set%20stretch%20y%20to%20%5BY%5D%22%3A%22%D0%B7%D0%B0%D0%B4%D0%B0%D1%82%D1%8C%20%D1%80%D0%B0%D1%81%D1%82%D1%8F%D0%B6%D0%B5%D0%BD%D0%B8%D0%B5%20y%20%D0%B2%20%5BY%5D%22%2C%22_x%20stretch%22%3A%22%D1%80%D0%B0%D1%81%D1%82%D1%8F%D0%B6%D0%B5%D0%BD%D0%B8%D0%B5%20x%22%2C%22_y%20stretch%22%3A%22%D1%80%D0%B0%D1%81%D1%82%D1%8F%D0%B6%D0%B5%D0%BD%D0%B8%D0%B5%20y%22%7D%2C%22zh-cn%22%3A%7B%22_Stretch%22%3A%22%E8%A7%92%E8%89%B2%E6%8B%89%E4%BC%B8%22%2C%22_change%20stretch%20by%20x%3A%20%5BDX%5D%20y%3A%20%5BDY%5D%22%3A%22%E5%A2%9E%E5%8A%A0%E8%A7%92%E8%89%B2%E6%8B%89%E4%BC%B8x%20%5BDX%5D%20y%20%5BDY%5D%22%2C%22_change%20stretch%20x%20by%20%5BDX%5D%22%3A%22x%E6%8B%89%E4%BC%B8%E5%A2%9E%E5%8A%A0%5BDX%5D%22%2C%22_change%20stretch%20y%20by%20%5BDY%5D%22%3A%22y%E6%8B%89%E4%BC%B8%E5%A2%9E%E5%8A%A0%5BDY%5D%22%2C%22_set%20stretch%20to%20x%3A%20%5BX%5D%20y%3A%20%5BY%5D%22%3A%22%E8%AE%BE%E7%BD%AE%E8%A7%92%E8%89%B2%E6%8B%89%E4%BC%B8x%20%5BX%5D%20y%20%5BY%5D%22%2C%22_set%20stretch%20x%20to%20%5BX%5D%22%3A%22%E8%AE%BE%E7%BD%AEx%E6%8B%89%E4%BC%B8%E4%B8%BA%5BX%5D%22%2C%22_set%20stretch%20y%20to%20%5BY%5D%22%3A%22%E8%AE%BE%E7%BD%AEy%E6%8B%89%E4%BC%B8%E4%B8%BA%5BY%5D%22%2C%22_x%20stretch%22%3A%22x%E6%8B%89%E4%BC%B8%22%2C%22_y%20stretch%22%3A%22y%E6%8B%89%E4%BC%B8%22%7D%7D)%3B%2F*%20end%20generated%20l10n%20code%20*%2F(function%20(Scratch)%20%7B%0A%20%20%22use%20strict%22%3B%0A%0A%20%20const%20STRETCH_X%20%3D%20Symbol(%22stretch.x%22)%3B%0A%20%20const%20STRETCH_Y%20%3D%20Symbol(%22stretch.y%22)%3B%0A%0A%20%20const%20vm%20%3D%20Scratch.vm%3B%0A%0A%20%20%2F**%0A%20%20%20*%20%40param%20%7BVM.RenderedTarget%7D%20target%0A%20%20%20*%20%40param%20%7BVM.RenderedTarget%7D%20%5BoriginalTarget%5D%20If%20target%20is%20a%20clone%2C%20the%20original%20to%20copy%20from.%0A%20%20%20*%2F%0A%20%20const%20implementStretchForTarget%20%3D%20(target%2C%20originalTarget)%20%3D%3E%20%7B%0A%20%20%20%20if%20(STRETCH_X%20in%20target)%20%7B%0A%20%20%20%20%20%20%2F%2F%20Target%20already%20has%20stretch.%20Don't%20implement%20again.%0A%20%20%20%20%20%20return%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20target%5BSTRETCH_X%5D%20%3D%20originalTarget%20%3F%20originalTarget%5BSTRETCH_X%5D%20%3A%20100%3B%0A%20%20%20%20target%5BSTRETCH_Y%5D%20%3D%20originalTarget%20%3F%20originalTarget%5BSTRETCH_Y%5D%20%3A%20100%3B%0A%0A%20%20%20%20const%20original%20%3D%20target._getRenderedDirectionAndScale%3B%0A%20%20%20%20target._getRenderedDirectionAndScale%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20const%20result%20%3D%20original.call(this)%3B%0A%0A%20%20%20%20%20%20result.scale%5B0%5D%20*%3D%20this%5BSTRETCH_X%5D%20%2F%20100%3B%0A%20%20%20%20%20%20result.scale%5B1%5D%20*%3D%20this%5BSTRETCH_Y%5D%20%2F%20100%3B%0A%0A%20%20%20%20%20%20return%20result%3B%0A%20%20%20%20%7D%3B%0A%20%20%7D%3B%0A%20%20vm.runtime.targets.forEach((target)%20%3D%3E%20implementStretchForTarget(target))%3B%0A%20%20vm.runtime.on(%22targetWasCreated%22%2C%20(target%2C%20originalTarget)%20%3D%3E%0A%20%20%20%20implementStretchForTarget(target%2C%20originalTarget)%0A%20%20)%3B%0A%20%20vm.runtime.on(%22PROJECT_LOADED%22%2C%20()%20%3D%3E%20%7B%0A%20%20%20%20vm.runtime.targets.forEach((target)%20%3D%3E%20implementStretchForTarget(target))%3B%0A%20%20%7D)%3B%0A%0A%20%20%2F**%0A%20%20%20*%20%40param%20%7BVM.RenderedTarget%7D%20target%0A%20%20%20*%2F%0A%20%20const%20forceUpdateDirectionAndScale%20%3D%20(target)%20%3D%3E%20%7B%0A%20%20%20%20target.setDirection(target.direction)%3B%0A%20%20%7D%3B%0A%0A%20%20class%20Stretch%20%7B%0A%20%20%20%20getInfo()%20%7B%0A%20%20%20%20%20%20return%20%7B%0A%20%20%20%20%20%20%20%20id%3A%20%22stretch%22%2C%0A%20%20%20%20%20%20%20%20name%3A%20Scratch.translate(%22Stretch%22)%2C%0A%20%20%20%20%20%20%20%20color1%3A%20%22%234287f5%22%2C%0A%20%20%20%20%20%20%20%20color2%3A%20%22%232b62ba%22%2C%0A%20%20%20%20%20%20%20%20color3%3A%20%22%23204785%22%2C%0A%20%20%20%20%20%20%20%20blocks%3A%20%5B%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22setStretch%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.COMMAND%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20Scratch.translate(%22set%20stretch%20to%20x%3A%20%5BX%5D%20y%3A%20%5BY%5D%22)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20X%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.NUMBER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%20100%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20Y%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.NUMBER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%20100%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20filter%3A%20%5BScratch.TargetType.SPRITE%5D%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22changeStretch%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.COMMAND%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20Scratch.translate(%22change%20stretch%20by%20x%3A%20%5BDX%5D%20y%3A%20%5BDY%5D%22)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20DX%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.NUMBER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%200%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20DY%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.NUMBER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%200%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%0A%20%20%20%20%20%20%20%20%20%20%22---%22%2C%0A%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22setStretchX%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.COMMAND%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20Scratch.translate(%22set%20stretch%20x%20to%20%5BX%5D%22)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20X%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.NUMBER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%20100%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20filter%3A%20%5BScratch.TargetType.SPRITE%5D%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22setStretchY%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.COMMAND%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20Scratch.translate(%22set%20stretch%20y%20to%20%5BY%5D%22)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20Y%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.NUMBER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%20100%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20filter%3A%20%5BScratch.TargetType.SPRITE%5D%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22changeStretchX%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.COMMAND%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20Scratch.translate(%22change%20stretch%20x%20by%20%5BDX%5D%22)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20DX%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.NUMBER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%2010%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22changeStretchY%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.COMMAND%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20Scratch.translate(%22change%20stretch%20y%20by%20%5BDY%5D%22)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20DY%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.NUMBER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%2010%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%0A%20%20%20%20%20%20%20%20%20%20%22---%22%2C%0A%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22getX%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.REPORTER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20Scratch.translate(%22x%20stretch%22)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20filter%3A%20%5BScratch.TargetType.SPRITE%5D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20disableMonitor%3A%20true%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22getY%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.REPORTER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20Scratch.translate(%22y%20stretch%22)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20filter%3A%20%5BScratch.TargetType.SPRITE%5D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20disableMonitor%3A%20true%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%5D%2C%0A%20%20%20%20%20%20%7D%3B%0A%20%20%20%20%7D%0A%20%20%20%20setStretch(args%2C%20util)%20%7B%0A%20%20%20%20%20%20util.target%5BSTRETCH_X%5D%20%3D%20Scratch.Cast.toNumber(args.X)%3B%0A%20%20%20%20%20%20util.target%5BSTRETCH_Y%5D%20%3D%20Scratch.Cast.toNumber(args.Y)%3B%0A%20%20%20%20%20%20forceUpdateDirectionAndScale(util.target)%3B%0A%20%20%20%20%7D%0A%20%20%20%20changeStretch(args%2C%20util)%20%7B%0A%20%20%20%20%20%20util.target%5BSTRETCH_X%5D%20%2B%3D%20Scratch.Cast.toNumber(args.DX)%3B%0A%20%20%20%20%20%20util.target%5BSTRETCH_Y%5D%20%2B%3D%20Scratch.Cast.toNumber(args.DY)%3B%0A%20%20%20%20%20%20forceUpdateDirectionAndScale(util.target)%3B%0A%20%20%20%20%7D%0A%20%20%20%20setStretchX(args%2C%20util)%20%7B%0A%20%20%20%20%20%20util.target%5BSTRETCH_X%5D%20%3D%20Scratch.Cast.toNumber(args.X)%3B%0A%20%20%20%20%20%20forceUpdateDirectionAndScale(util.target)%3B%0A%20%20%20%20%7D%0A%20%20%20%20setStretchY(args%2C%20util)%20%7B%0A%20%20%20%20%20%20util.target%5BSTRETCH_Y%5D%20%3D%20Scratch.Cast.toNumber(args.Y)%3B%0A%20%20%20%20%20%20forceUpdateDirectionAndScale(util.target)%3B%0A%20%20%20%20%7D%0A%20%20%20%20changeStretchX(args%2C%20util)%20%7B%0A%20%20%20%20%20%20util.target%5BSTRETCH_X%5D%20%2B%3D%20Scratch.Cast.toNumber(args.DX)%3B%0A%20%20%20%20%20%20forceUpdateDirectionAndScale(util.target)%3B%0A%20%20%20%20%7D%0A%20%20%20%20changeStretchY(args%2C%20util)%20%7B%0A%20%20%20%20%20%20util.target%5BSTRETCH_Y%5D%20%2B%3D%20Scratch.Cast.toNumber(args.DY)%3B%0A%20%20%20%20%20%20forceUpdateDirectionAndScale(util.target)%3B%0A%20%20%20%20%7D%0A%20%20%20%20getX(args%2C%20util)%20%7B%0A%20%20%20%20%20%20return%20util.target%5BSTRETCH_X%5D%3B%0A%20%20%20%20%7D%0A%20%20%20%20getY(args%2C%20util)%20%7B%0A%20%20%20%20%20%20return%20util.target%5BSTRETCH_Y%5D%3B%0A%20%20%20%20%7D%0A%20%20%7D%0A%0A%20%20Scratch.extensions.register(new%20Stretch())%3B%0A%7D)(Scratch)%3B%0A%20%7D)(Scratch)%3B","data:text/javascript;,(function(Scratch)%20%7B%20%2F%2F%20Name%3A%20Utilities%0A%2F%2F%20ID%3A%20utilities%0A%2F%2F%20Description%3A%20A%20bunch%20of%20interesting%20blocks.%0A%2F%2F%20Original%3A%20Sheep_maker%20%3Chttps%3A%2F%2Fscratch.mit.edu%2Fusers%2FSheep_maker%2F%3E%0A%2F%2F%20License%3A%20MIT%20AND%20MPL-2.0%0A%0A%2F*!%0A%20*%20This%20is%20based%20on%3A%0A%20*%20https%3A%2F%2Fgithub.com%2FSheepTester%2Fsheeptester.github.io%2Fblob%2Fmaster%2Fjavascripts%2Futilities.js%0A%20*%0A%20*%20Original%20license%3A%0A%20*%20MIT%20License%0A%20*%0A%20*%20Copyright%20(c)%202021%20Sean%0A%20*%0A%20*%20Permission%20is%20hereby%20granted%2C%20free%20of%20charge%2C%20to%20any%20person%20obtaining%20a%20copy%0A%20*%20of%20this%20software%20and%20associated%20documentation%20files%20(the%20%22Software%22)%2C%20to%20deal%0A%20*%20in%20the%20Software%20without%20restriction%2C%20including%20without%20limitation%20the%20rights%0A%20*%20to%20use%2C%20copy%2C%20modify%2C%20merge%2C%20publish%2C%20distribute%2C%20sublicense%2C%20and%2For%20sell%0A%20*%20copies%20of%20the%20Software%2C%20and%20to%20permit%20persons%20to%20whom%20the%20Software%20is%0A%20*%20furnished%20to%20do%20so%2C%20subject%20to%20the%20following%20conditions%3A%0A%20*%0A%20*%20The%20above%20copyright%20notice%20and%20this%20permission%20notice%20shall%20be%20included%20in%20all%0A%20*%20copies%20or%20substantial%20portions%20of%20the%20Software.%0A%20*%0A%20*%20THE%20SOFTWARE%20IS%20PROVIDED%20%22AS%20IS%22%2C%20WITHOUT%20WARRANTY%20OF%20ANY%20KIND%2C%20EXPRESS%20OR%0A%20*%20IMPLIED%2C%20INCLUDING%20BUT%20NOT%20LIMITED%20TO%20THE%20WARRANTIES%20OF%20MERCHANTABILITY%2C%0A%20*%20FITNESS%20FOR%20A%20PARTICULAR%20PURPOSE%20AND%20NONINFRINGEMENT.%20IN%20NO%20EVENT%20SHALL%20THE%0A%20*%20AUTHORS%20OR%20COPYRIGHT%20HOLDERS%20BE%20LIABLE%20FOR%20ANY%20CLAIM%2C%20DAMAGES%20OR%20OTHER%0A%20*%20LIABILITY%2C%20WHETHER%20IN%20AN%20ACTION%20OF%20CONTRACT%2C%20TORT%20OR%20OTHERWISE%2C%20ARISING%20FROM%2C%0A%20*%20OUT%20OF%20OR%20IN%20CONNECTION%20WITH%20THE%20SOFTWARE%20OR%20THE%20USE%20OR%20OTHER%20DEALINGS%20IN%20THE%0A%20*%20SOFTWARE.%0A%20*%2F%0A%0A%2F*%20generated%20l10n%20code%20*%2FScratch.translate.setup(%7B%22de%22%3A%7B%22_Utilities%22%3A%22Verschiedene%20Bl%C3%B6cke%22%7D%2C%22fi%22%3A%7B%22_Utilities%22%3A%22Ty%C3%B6kalut%22%7D%2C%22it%22%3A%7B%22_Utilities%22%3A%22Utilit%C3%A0%22%2C%22_pi%22%3A%22pi%20greco%22%7D%2C%22ja%22%3A%7B%22_Utilities%22%3A%22%E3%83%A6%E3%83%BC%E3%83%86%E3%82%A3%E3%83%AA%E3%83%86%E3%82%A3%22%7D%2C%22nb%22%3A%7B%22_Utilities%22%3A%22Verkt%C3%B8y%22%2C%22_true%22%3A%22sann%22%7D%2C%22nl%22%3A%7B%22_Utilities%22%3A%22Utiliteiten%22%2C%22_%5BPATH%5D%20of%20%5BJSON_STRING%5D%22%3A%22%5BPATH%5D%20van%20%5BJSON_STRING%5D%22%2C%22_clamp%20%5BINPUT%5D%20between%20%5BMIN%5D%20and%20%5BMAX%5D%22%3A%22klem%20%5BINPUT%5D%20tussen%20%5BMIN%5D%20en%20%5BMAX%5D%22%2C%22_current%20millisecond%22%3A%22huidige%20milliseconde%22%2C%22_false%22%3A%22onwaar%22%2C%22_get%20content%20from%20%5BURL%5D%22%3A%22inhoud%20van%20%5BURL%5D%22%2C%22_if%20%5BA%5D%20then%20%5BB%5D%20else%20%5BC%5D%22%3A%22als%20%5BA%5D%20dan%20%5BB%5D%20anders%20%5BC%5D%22%2C%22_is%20%5BA%5D%20exactly%20%5BB%5D%3F%22%3A%22is%20%5BA%5D%20precies%20%5BB%5D%3F%22%2C%22_letters%20%5BSTART%5D%20to%20%5BEND%5D%20of%20%5BSTRING%5D%22%3A%22letters%20%5BSTART%5D%20t%2Fm%20%5BEND%5D%20van%20%5BSTRING%5D%22%2C%22_replace%20%5BSTRING%5D%20using%20the%20rule%20%5BREGEX%5D%20with%20%5BNEWSTRING%5D%22%3A%22vervang%20%5BSTRING%5D%20met%20regel%20%5BREGEX%5D%20door%20%5BNEWSTRING%5D%22%2C%22_true%22%3A%22waar%22%7D%2C%22ru%22%3A%7B%22_Utilities%22%3A%22%D0%A3%D1%82%D0%B8%D0%BB%D0%B8%D1%82%D1%8B%22%2C%22_%5BPATH%5D%20of%20%5BJSON_STRING%5D%22%3A%22%5BPATH%5D%20%D0%B8%D0%B7%20%5BJSON_STRING%5D%22%2C%22_clamp%20%5BINPUT%5D%20between%20%5BMIN%5D%20and%20%5BMAX%5D%22%3A%22%D0%B7%D0%B0%D0%B6%D0%B8%D0%BC%20%5BINPUT%5D%20%D0%BC%D0%B5%D0%B6%D0%B4%D1%83%20%5BMIN%5D%20%D0%B8%20%5BMAX%5D%22%2C%22_current%20millisecond%22%3A%22%D1%82%D0%B5%D0%BA%D1%83%D1%89%D0%B8%D0%B5%20%D0%BC%D0%B8%D0%BB%D0%BB%D0%B8%D1%81%D0%B5%D0%BA%D1%83%D0%BD%D0%B4%D1%8B%22%2C%22_false%22%3A%22%D0%BD%D0%B5%D1%82%22%2C%22_get%20content%20from%20%5BURL%5D%22%3A%22%D0%B2%D0%B7%D1%8F%D1%82%D1%8C%20%D0%BA%D0%BE%D0%BD%D1%82%D0%B5%D0%BD%D1%82%20%D0%B8%D0%B7%20%5BURL%5D%22%2C%22_if%20%5BA%5D%20then%20%5BB%5D%20else%20%5BC%5D%22%3A%22%D0%B5%D1%81%D0%BB%D0%B8%20%5BA%5D%20%D1%82%D0%BE%D0%B3%D0%B4%D0%B0%20%5BB%5D%20%D0%B8%D0%BD%D0%B0%D1%87%D0%B5%20%5BC%5D%22%2C%22_is%20%5BA%5D%20exactly%20%5BB%5D%3F%22%3A%22%5BA%5D%20%D1%82%D0%BE%D1%87%D0%BD%D0%BE%20%D0%BB%D0%B8%20%5BB%5D%3F%22%2C%22_letters%20%5BSTART%5D%20to%20%5BEND%5D%20of%20%5BSTRING%5D%22%3A%22%D0%B1%D1%83%D0%BA%D0%B2%D1%8B%20%D1%81%20%5BSTART%5D%20%D0%B4%D0%BE%20%5BEND%5D%20%D0%B2%20%D1%81%D1%82%D1%80%D0%BE%D0%BA%D0%B5%20%5BSTRING%5D%22%2C%22_pi%22%3A%22%D0%BF%D0%B8%22%2C%22_replace%20%5BSTRING%5D%20using%20the%20rule%20%5BREGEX%5D%20with%20%5BNEWSTRING%5D%22%3A%22%D0%B7%D0%B0%D0%BC%D0%B5%D0%BD%D0%B8%D1%82%D1%8C%20%5BSTRING%5D%20%D0%B8%D1%81%D0%BF%D0%BE%D0%BB%D1%8C%D0%B7%D1%83%D1%8F%20%D0%BF%D1%80%D0%B0%D0%B2%D0%B8%D0%BB%D0%BE%20%5BREGEX%5D%20%D1%81%20%5BNEWSTRING%5D%22%2C%22_true%22%3A%22%D0%B4%D0%B0%22%7D%2C%22zh-cn%22%3A%7B%22_Utilities%22%3A%22%E5%B7%A5%E5%85%B7%22%2C%22_%5BPATH%5D%20of%20%5BJSON_STRING%5D%22%3A%22%5BJSON_STRING%5D%E4%B8%AD%E7%9A%84%5BPATH%5D%22%2C%22_clamp%20%5BINPUT%5D%20between%20%5BMIN%5D%20and%20%5BMAX%5D%22%3A%22%5BMIN%5D%E5%88%B0%5BMAX%5D%E4%B9%8B%E9%97%B4%E7%9A%84%5BINPUT%5D%22%2C%22_current%20millisecond%22%3A%22%E5%BD%93%E5%89%8D%E6%AF%AB%E7%A7%92%22%2C%22_false%22%3A%22%E5%81%87%22%2C%22_get%20content%20from%20%5BURL%5D%22%3A%22%E8%8E%B7%E5%8F%96%5BURL%5D%22%2C%22_if%20%5BA%5D%20then%20%5BB%5D%20else%20%5BC%5D%22%3A%22%5BA%5D%EF%BC%9F%5BB%5D%EF%BC%9A%5BC%5D%22%2C%22_is%20%5BA%5D%20exactly%20%5BB%5D%3F%22%3A%22%5BA%5D%3D%3D%3D%5BB%5D%22%2C%22_letters%20%5BSTART%5D%20to%20%5BEND%5D%20of%20%5BSTRING%5D%22%3A%22%5BSTRING%5D%E7%9A%84%E7%AC%AC%5BSTART%5D%E5%88%B0%E7%AC%AC%5BEND%5D%E4%BD%8D%22%2C%22_pi%22%3A%22%CF%80%22%2C%22_replace%20%5BSTRING%5D%20using%20the%20rule%20%5BREGEX%5D%20with%20%5BNEWSTRING%5D%22%3A%22%E4%BB%A5%E8%A7%84%E5%88%99%5BREGEX%5D%E6%9B%BF%E6%8D%A2%5BSTRING%5D%E4%B8%BA%5BNEWSTRING%5D%22%2C%22_true%22%3A%22%E7%9C%9F%22%7D%7D)%3B%2F*%20end%20generated%20l10n%20code%20*%2F(function%20(Scratch)%20%7B%0A%20%20%22use%20strict%22%3B%0A%0A%20%20const%20icon%20%3D%0A%20%20%20%20%22data%3Aimage%2Fpng%3Bbase64%2CiVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAADTUlEQVRIS63VTWgUZxgH8P%2B7Mzsf%2B2U2SrPJKBoEA1WKUMzupaKHpgoetadCnaBN9FRaLLRQEW17KKIed1V21dJLbU%2FFRqiixx219NDaVi%2BNmnWNZT%2Bcze7Ozsf7yoxEYpnMRJI5DQzP%2B5v3P8%2F7DEHANVHM7iXAVyAkwQCNgZYjDp3KH7jzZ1DdwmckBLirrE29KQgcTNOBZTrQdYP2es631LSPnp34zQqDlgTIcvTlOowxNBsG6o3uHw6he899eOt%2BEBIGeBHxUW5ElDjEYwKSKdFbzzAsVB61%2Fq4lWlsvv3%2FXXAwJBOaL9pe29slE3MgoOSHF%2BN0DAwnwfASNehe1WudkYVw7sixgYfFkMXtSikU%2FVZQU3LhmHjVZ17Sz59Tbt%2F2QJe3glUIGMnEhe3PgjcR2Ny5dN%2FDf0873ebX8gS%2FwshUBUMK%2BPKveuhzWGZPF0fdiceHq4FAK3a6FyoyuFca13GKA14ruw8qM%2FldhXNscBnz03duDUSY83jCchu04ePBvs5ZXtTW%2BwGQpW12%2FIZ1xP9r0dAM9g2bOH9Rmg5DDpW0ZwvFVD7CpW1ctqNqQP1DM%2FZJRErvdFqw%2BbqHdMccKqvZr4AEsbdsVj4lTbkTttolqtXWloGp7FtlB7uv%2B1fIX6bSM9pyJJ9W5a3m1PAYC5ou4H7mUvT44mNwZTwio17to1Dsn8qp21Bc4cGl0WCLcP%2BvW9wkRQrxddNrW6cyw9NmxnTfthUX7ftgs9LcTP8dkfmxIWeW16cOHTdO22EheLU8v2qYTxezn6bT8zeo1MS%2FT2dk5GB3rHgNOMd6%2BSsFxnE3eJcAnohwdUZQkQAjqtTYadePHwri2L%2FCgHbuxg3%2FywPhdUZJbJOnF3GnpPS9fw7ABAkgij3h8flS46REYPRvVig5KoebV8oXAg3bw4ugmjkV%2B6u%2BXt%2FT1SSDE%2Fwy6sTxrdiHHBYgCH4q8ssqLjOPHZYk%2FkkiKEUHg4Y5qBgbLpDBNG62W5Rhde4rjsGdISUEUgxHf1zx0MfsWdTBGCHIAeQeABbAyBdPmfziTpdz%2BSASlMOT1Z9GCoJeCLAtwrTBk2UAYsiKAH%2BJN2YreXDHg%2FwilzJ3Oz1YUmEcYY2fce0LIx88BFi6vvp70RPYAAAAASUVORK5CYII%3D%22%3B%0A%0A%20%20class%20Utilities%20%7B%0A%20%20%20%20getInfo()%20%7B%0A%20%20%20%20%20%20return%20%7B%0A%20%20%20%20%20%20%20%20id%3A%20%22utilities%22%2C%0A%20%20%20%20%20%20%20%20name%3A%20Scratch.translate(%22Utilities%22)%2C%0A%0A%20%20%20%20%20%20%20%20color1%3A%20%22%238BC34A%22%2C%0A%20%20%20%20%20%20%20%20color2%3A%20%22%237CB342%22%2C%0A%20%20%20%20%20%20%20%20color3%3A%20%22%23689F38%22%2C%0A%0A%20%20%20%20%20%20%20%20menuIconURI%3A%20icon%2C%0A%0A%20%20%20%20%20%20%20%20blocks%3A%20%5B%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22isExactly%22%2C%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.BOOLEAN%2C%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20Scratch.translate(%22is%20%5BA%5D%20exactly%20%5BB%5D%3F%22)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20A%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.STRING%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%20%22apple%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20B%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.STRING%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%20%22APPLE%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22isLessOrEqual%22%2C%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.BOOLEAN%2C%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20%22%5BA%5D%20%3C%3D%20%5BB%5D%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20A%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.NUMBER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20B%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.NUMBER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%2050%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22isMoreOrEqual%22%2C%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.BOOLEAN%2C%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20%22%5BA%5D%20%3E%3D%20%5BB%5D%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20A%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.NUMBER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20B%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.NUMBER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%2050%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22trueBlock%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.BOOLEAN%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20Scratch.translate(%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20default%3A%20%22true%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20description%3A%20%22Block%20that%20returns%20true%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20disableMonitor%3A%20true%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22falseBlock%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.BOOLEAN%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20Scratch.translate(%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20default%3A%20%22false%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20description%3A%20%22Block%20that%20returns%20false%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20disableMonitor%3A%20true%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22exponent%22%2C%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.REPORTER%2C%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20%22%5BA%5D%20%5E%20%5BB%5D%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20A%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.NUMBER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20B%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.NUMBER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22pi%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.REPORTER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20Scratch.translate(%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20default%3A%20%22pi%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20description%3A%20%22Block%20that%20returns%203.1415...%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D)%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22ternaryOperator%22%2C%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.REPORTER%2C%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20Scratch.translate(%22if%20%5BA%5D%20then%20%5BB%5D%20else%20%5BC%5D%22)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20A%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.BOOLEAN%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20B%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.STRING%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%20%22banana%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20C%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.STRING%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%20%22apple%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20allowDropAnywhere%3A%20true%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22letters%22%2C%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.REPORTER%2C%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20Scratch.translate(%22letters%20%5BSTART%5D%20to%20%5BEND%5D%20of%20%5BSTRING%5D%22)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20START%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.NUMBER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%205%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20END%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.NUMBER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%207%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20STRING%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.STRING%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%20%22red%20apple%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22clamp%22%2C%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.REPORTER%2C%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20Scratch.translate(%22clamp%20%5BINPUT%5D%20between%20%5BMIN%5D%20and%20%5BMAX%5D%22)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20INPUT%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.NUMBER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%2030%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20MIN%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.NUMBER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%2025%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20MAX%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.NUMBER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%2040%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22currentMillisecond%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.REPORTER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20Scratch.translate(%22current%20millisecond%22)%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22fetchFrom%22%2C%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.REPORTER%2C%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20Scratch.translate(%22get%20content%20from%20%5BURL%5D%22)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20URL%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.STRING%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%20%22https%3A%2F%2Fextensions.turbowarp.org%2Fhello.txt%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22parseJSON%22%2C%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.REPORTER%2C%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20Scratch.translate(%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20default%3A%20%22%5BPATH%5D%20of%20%5BJSON_STRING%5D%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20description%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20'PATH%20is%20a%20string%20like%20%22fruit%2Fapples%22%20and%20JSON_STRING%20is%20an%20object%20like%20%7B%22fruit%22%3A%7B%22apples%22%3A3%7D%7D.%203%20would%20be%20reported%20in%20this%20example.'%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20PATH%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.STRING%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%20%22fruit%2Fapples%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20JSON_STRING%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.STRING%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20'%7B%22fruit%22%3A%20%7B%22apples%22%3A%202%2C%20%22bananas%22%3A%203%7D%2C%20%22total_fruit%22%3A%205%7D'%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22newline%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.REPORTER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20%22newline%20character%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20disableMonitor%3A%20true%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22stringToBoolean%22%2C%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.BOOLEAN%2C%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20%22%5BSTRING%5D%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20STRING%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.STRING%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%20%22true%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22regexReplace%22%2C%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.REPORTER%2C%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20Scratch.translate(%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%22replace%20%5BSTRING%5D%20using%20the%20rule%20%5BREGEX%5D%20with%20%5BNEWSTRING%5D%22%0A%20%20%20%20%20%20%20%20%20%20%20%20)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20STRING%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.STRING%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%20%22bananas%20are%20awesome.%20i%20like%20bananas.%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20REGEX%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.STRING%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%20%22banana%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20NEWSTRING%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.STRING%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%20%22apple%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%5D%2C%0A%20%20%20%20%20%20%7D%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20isExactly(%7B%20A%2C%20B%20%7D)%20%7B%0A%20%20%20%20%20%20return%20A%20%3D%3D%3D%20B%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20isLessOrEqual(%7B%20A%2C%20B%20%7D)%20%7B%0A%20%20%20%20%20%20return%20Scratch.Cast.compare(A%2C%20B)%20%3C%3D%200%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20isMoreOrEqual(%7B%20A%2C%20B%20%7D)%20%7B%0A%20%20%20%20%20%20return%20Scratch.Cast.compare(A%2C%20B)%20%3E%3D%200%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20trueBlock()%20%7B%0A%20%20%20%20%20%20return%20true%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20falseBlock()%20%7B%0A%20%20%20%20%20%20return%20false%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20exponent(%7B%20A%2C%20B%20%7D)%20%7B%0A%20%20%20%20%20%20A%20%3D%20Scratch.Cast.toNumber(A)%3B%0A%20%20%20%20%20%20B%20%3D%20Scratch.Cast.toNumber(B)%3B%0A%20%20%20%20%20%20return%20Math.pow(A%2C%20B)%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20pi()%20%7B%0A%20%20%20%20%20%20return%20Math.PI%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20ternaryOperator(%7B%20A%2C%20B%2C%20C%20%7D)%20%7B%0A%20%20%20%20%20%20return%20A%20%3F%20B%20%3A%20C%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20letters(%7B%20STRING%2C%20START%2C%20END%20%7D)%20%7B%0A%20%20%20%20%20%20return%20STRING.slice(Math.max(1%2C%20START)%20-%201%2C%20Math.min(STRING.length%2C%20END))%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20clamp(%7B%20INPUT%2C%20MIN%2C%20MAX%20%7D)%20%7B%0A%20%20%20%20%20%20INPUT%20%3D%20Scratch.Cast.toNumber(INPUT)%3B%0A%20%20%20%20%20%20MIN%20%3D%20Scratch.Cast.toNumber(MIN)%3B%0A%20%20%20%20%20%20MAX%20%3D%20Scratch.Cast.toNumber(MAX)%3B%0A%20%20%20%20%20%20if%20(MIN%20%3E%20MAX)%20%7B%0A%20%20%20%20%20%20%20%20return%20Math.min(Math.max(INPUT%2C%20MAX)%2C%20MIN)%3B%0A%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20return%20Math.min(Math.max(INPUT%2C%20MIN)%2C%20MAX)%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%0A%20%20%20%20currentMillisecond()%20%7B%0A%20%20%20%20%20%20return%20Date.now()%20%25%201000%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20fetchFrom(%7B%20URL%20%7D)%20%7B%0A%20%20%20%20%20%20return%20Scratch.fetch(URL)%0A%20%20%20%20%20%20%20%20.then((res)%20%3D%3E%20res.text())%0A%20%20%20%20%20%20%20%20.catch((err)%20%3D%3E%20%22%22)%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20parseJSON(%7B%20PATH%2C%20JSON_STRING%20%7D)%20%7B%0A%20%20%20%20%20%20try%20%7B%0A%20%20%20%20%20%20%20%20const%20path%20%3D%20PATH.toString()%0A%20%20%20%20%20%20%20%20%20%20.split(%22%2F%22)%0A%20%20%20%20%20%20%20%20%20%20.map((prop)%20%3D%3E%20decodeURIComponent(prop))%3B%0A%20%20%20%20%20%20%20%20if%20(path%5B0%5D%20%3D%3D%3D%20%22%22)%20path.splice(0%2C%201)%3B%0A%20%20%20%20%20%20%20%20if%20(path%5Bpath.length%20-%201%5D%20%3D%3D%3D%20%22%22)%20path.splice(-1%2C%201)%3B%0A%20%20%20%20%20%20%20%20let%20json%3B%0A%20%20%20%20%20%20%20%20try%20%7B%0A%20%20%20%20%20%20%20%20%20%20json%20%3D%20JSON.parse(%22%20%22%20%2B%20JSON_STRING)%3B%0A%20%20%20%20%20%20%20%20%7D%20catch%20(e)%20%7B%0A%20%20%20%20%20%20%20%20%20%20return%20e.message%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20path.forEach((prop)%20%3D%3E%20(json%20%3D%20json%5Bprop%5D))%3B%0A%20%20%20%20%20%20%20%20if%20(json%20%3D%3D%3D%20null)%20return%20%22null%22%3B%0A%20%20%20%20%20%20%20%20else%20if%20(json%20%3D%3D%3D%20undefined)%20return%20%22%22%3B%0A%20%20%20%20%20%20%20%20else%20if%20(typeof%20json%20%3D%3D%3D%20%22object%22)%20return%20JSON.stringify(json)%3B%0A%20%20%20%20%20%20%20%20else%20return%20json.toString()%3B%0A%20%20%20%20%20%20%7D%20catch%20(err)%20%7B%0A%20%20%20%20%20%20%20%20return%20%22%22%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%0A%20%20%20%20newline()%20%7B%0A%20%20%20%20%20%20return%20%22%5Cn%22%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20stringToBoolean(%7B%20STRING%20%7D)%20%7B%0A%20%20%20%20%20%20return%20STRING%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20regexReplace(%7B%20STRING%2C%20REGEX%2C%20NEWSTRING%20%7D)%20%7B%0A%20%20%20%20%20%20return%20STRING.toString().replace(new%20RegExp(REGEX%2C%20%22gi%22)%2C%20NEWSTRING)%3B%0A%20%20%20%20%7D%0A%20%20%7D%0A%0A%20%20Scratch.extensions.register(new%20Utilities())%3B%0A%7D)(Scratch)%3B%0A%20%7D)(Scratch)%3B","data:text/javascript;,(function(Scratch)%20%7B%20%2F%2F%20Name%3A%20Camera%20Controls%20(Very%20Buggy)%0A%2F%2F%20ID%3A%20DTcameracontrols%0A%2F%2F%20Description%3A%20Move%20the%20visible%20part%20of%20the%20stage.%0A%2F%2F%20By%3A%20DT%0A%2F%2F%20License%3A%20MIT%0A%0A%2F*%20generated%20l10n%20code%20*%2FScratch.translate.setup(%7B%22it%22%3A%7B%22_Camera%20(Very%20Buggy)%22%3A%22Camera%20(Presenti%20Diversi%20Bug)%22%2C%22_background%20color%22%3A%22colore%20di%20sfondo%22%2C%22_camera%20direction%22%3A%22direzione%20camera%22%2C%22_camera%20x%22%3A%22x%20camera%22%2C%22_camera%20y%22%3A%22y%20camera%22%2C%22_camera%20zoom%22%3A%22zoom%20camera%22%2C%22_change%20camera%20x%20by%20%5Bval%5D%22%3A%22cambia%20camera%20x%20di%20%5Bval%5D%22%2C%22_change%20camera%20y%20by%20%5Bval%5D%22%3A%22cambia%20camera%20y%20di%20%5Bval%5D%22%2C%22_change%20camera%20zoom%20by%20%5Bval%5D%22%3A%22cambia%20zoom%20camera%20di%20%5Bval%5D%22%2C%22_move%20camera%20%5Bval%5D%20steps%22%3A%22sposta%20camera%20di%20%5Bval%5Dpassi%22%2C%22_move%20camera%20to%20%5Bsprite%5D%22%3A%22sposta%20la%20camera%20dove%20si%20trova%20%5Bsprite%5D%22%2C%22_no%20sprites%20exist%22%3A%22non%20ci%20sono%20sprite%22%2C%22_point%20camera%20towards%20%5Bsprite%5D%22%3A%22punta%20camera%20verso%20%5Bsprite%5D%22%2C%22_set%20background%20color%20to%20%5Bval%5D%22%3A%22usa%20colore%20di%20sfondo%20%5Bval%5D%22%2C%22_set%20camera%20direction%20to%20%5Bval%5D%22%3A%22porta%20direzione%20camera%20a%20%5Bval%5D%22%2C%22_set%20camera%20to%20x%3A%20%5Bx%5D%20y%3A%20%5By%5D%22%3A%22sposta%20la%20camera%20a%20x%3A%20%5Bx%5D%20y%3A%20%5By%5D%22%2C%22_set%20camera%20x%20to%20%5Bval%5D%22%3A%22porta%20camera%20x%20a%20%5Bval%5D%22%2C%22_set%20camera%20y%20to%20%5Bval%5D%22%3A%22porta%20camera%20y%20a%20%5Bval%5D%22%2C%22_set%20camera%20zoom%20to%20%5Bval%5D%20%25%22%3A%22porta%20zoom%20camera%20a%20%5Bval%5D%20%25%22%2C%22_turn%20camera%20%5Bimage%5D%20%5Bval%5D%20degrees%22%3A%22gira%20camera%20%5Bimage%5D%20di%20%5Bval%5D%20gradi%22%7D%2C%22ja%22%3A%7B%22_camera%20direction%22%3A%22%E3%82%AB%E3%83%A1%E3%83%A9%E3%81%AE%E5%90%91%E3%81%8D%22%2C%22_camera%20x%22%3A%22%E3%82%AB%E3%83%A1%E3%83%A9%E3%81%AEx%E5%BA%A7%E6%A8%99%22%2C%22_camera%20y%22%3A%22%E3%82%AB%E3%83%A1%E3%83%A9%E3%81%AEy%E5%BA%A7%E6%A8%99%22%7D%2C%22nb%22%3A%7B%22_Camera%20(Very%20Buggy)%22%3A%22Kamera%20(Veldig%20Ustabil)%22%2C%22_background%20color%22%3A%22Bakgrunnsfarge%22%2C%22_camera%20direction%22%3A%22kamera%20retning%22%2C%22_camera%20x%22%3A%22kamera%20x%22%2C%22_camera%20y%22%3A%22kamera%20y%22%2C%22_camera%20zoom%22%3A%22kamera%20zoom%22%2C%22_change%20camera%20x%20by%20%5Bval%5D%22%3A%22endre%20kamera%20x%20med%20%5Bval%5D%22%2C%22_change%20camera%20y%20by%20%5Bval%5D%22%3A%22endre%20kamera%20y%20med%20%5Bval%5D%22%2C%22_change%20camera%20zoom%20by%20%5Bval%5D%22%3A%22endre%20kamera%20zoom%20med%20%5Bval%5D%22%2C%22_move%20camera%20%5Bval%5D%20steps%22%3A%22flytt%20kamera%20%5Bval%5D%20trinn%22%2C%22_move%20camera%20to%20%5Bsprite%5D%22%3A%22flytt%20kamera%20til%20%5Bsprite%5D%22%2C%22_no%20sprites%20exist%22%3A%22ingen%20sprites%20eksisterer%22%2C%22_point%20camera%20towards%20%5Bsprite%5D%22%3A%22peker%20kameraet%20mot%20%5Bsprite%5D%22%2C%22_set%20background%20color%20to%20%5Bval%5D%22%3A%22sett%20bakgrunnsfarge%20til%20%5Bval%5D%22%2C%22_set%20camera%20direction%20to%20%5Bval%5D%22%3A%22sett%20kamera%20retning%20til%20%5Bval%5D%22%2C%22_set%20camera%20to%20x%3A%20%5Bx%5D%20y%3A%20%5By%5D%22%3A%22sett%20kamera%20til%20x%3A%20%5Bx%5D%20y%3A%20%5By%5D%22%2C%22_set%20camera%20x%20to%20%5Bval%5D%22%3A%22sett%20kamera%20x%20til%20%5Bval%5D%22%2C%22_set%20camera%20y%20to%20%5Bval%5D%22%3A%22sett%20kamera%20y%20til%20%5Bval%5D%22%2C%22_set%20camera%20zoom%20to%20%5Bval%5D%20%25%22%3A%22sett%20kamera%20zoom%20til%20%5Bval%5D%20%25%22%2C%22_turn%20camera%20%5Bimage%5D%20%5Bval%5D%20degrees%22%3A%22snu%20kamera%20%5Bimage%5D%20%5Bval%5D%20grader%22%7D%2C%22nl%22%3A%7B%22_Camera%20(Very%20Buggy)%22%3A%22Camera%20(veel%20bugs)%22%2C%22_background%20color%22%3A%22achtergrondkleur%22%2C%22_camera%20direction%22%3A%22camera-richting%22%2C%22_camera%20x%22%3A%22camera-x%22%2C%22_camera%20y%22%3A%22camera-y%22%2C%22_camera%20zoom%22%3A%22camera-zoom%22%2C%22_change%20camera%20x%20by%20%5Bval%5D%22%3A%22verander%20camera-x%20met%20%5Bval%5D%22%2C%22_change%20camera%20y%20by%20%5Bval%5D%22%3A%22verander%20camera-y%20%5Bval%5D%22%2C%22_change%20camera%20zoom%20by%20%5Bval%5D%22%3A%22verander%20camera-zoom%20met%20%5Bval%5D%22%2C%22_move%20camera%20%5Bval%5D%20steps%22%3A%22verplaats%20camera%20%5Bval%5D%20stappen%22%2C%22_move%20camera%20to%20%5Bsprite%5D%22%3A%22verplaats%20camera%20naar%20%5Bsprite%5D%22%2C%22_no%20sprites%20exist%22%3A%22...%22%2C%22_point%20camera%20towards%20%5Bsprite%5D%22%3A%22richt%20camera%20naar%20%5Bsprite%5D%22%2C%22_set%20background%20color%20to%20%5Bval%5D%22%3A%22maak%20achtergrondkleur%20%5Bval%5D%22%2C%22_set%20camera%20direction%20to%20%5Bval%5D%22%3A%22richt%20camera%20naar%20%5Bval%5D%20graden%22%2C%22_set%20camera%20to%20x%3A%20%5Bx%5D%20y%3A%20%5By%5D%22%3A%22verplaats%20camera%20naar%20x%3A%20%5Bx%5D%20y%3A%20%5By%5D%22%2C%22_set%20camera%20x%20to%20%5Bval%5D%22%3A%22maak%20camera-x%20%5Bval%5D%22%2C%22_set%20camera%20y%20to%20%5Bval%5D%22%3A%22maak%20camera-y%20%5Bval%5D%22%2C%22_set%20camera%20zoom%20to%20%5Bval%5D%20%25%22%3A%22maak%20camera-zoom%20%5Bval%5D%20%25%22%2C%22_turn%20camera%20%5Bimage%5D%20%5Bval%5D%20degrees%22%3A%22draai%20camera%20%5Bimage%5D%20%5Bval%5D%20graden%22%7D%2C%22ru%22%3A%7B%22_Camera%20(Very%20Buggy)%22%3A%22%D0%9A%D0%B0%D0%BC%D0%B5%D1%80%D0%B0%20(%D0%9E%D1%87%D0%B5%D0%BD%D1%8C%20%D0%91%D0%B0%D0%B3%D0%B0%D0%BD%D0%BD%D0%BE%D0%B5)%22%2C%22_background%20color%22%3A%22%D1%86%D0%B2%D0%B5%D1%82%20%D0%B7%D0%B0%D0%B4%D0%BD%D0%B5%D0%B3%D0%BE%20%D1%84%D0%BE%D0%BD%D0%B0%22%2C%22_camera%20direction%22%3A%22%D0%BD%D0%B0%D0%BF%D1%80%D0%B0%D0%B2%D0%BB%D0%B5%D0%BD%D0%B8%D0%B5%20%D0%BA%D0%B0%D0%BC%D0%B5%D1%80%D1%8B%22%2C%22_camera%20x%22%3A%22x%20%D0%BA%D0%B0%D0%BC%D0%B5%D1%80%D1%8B%22%2C%22_camera%20y%22%3A%22y%20%D0%BA%D0%B0%D0%BC%D0%B5%D1%80%D1%8B%22%2C%22_camera%20zoom%22%3A%22%D0%BF%D1%80%D0%B8%D0%B1%D0%BB%D0%B8%D0%B6%D0%B5%D0%BD%D0%B8%D0%B5%20%D0%BA%D0%B0%D0%BC%D0%B5%D1%80%D1%8B%22%2C%22_change%20camera%20x%20by%20%5Bval%5D%22%3A%22%D0%B8%D0%B7%D0%BC%D0%B5%D0%BD%D0%B8%D1%82%D1%8C%20x%20%D0%BA%D0%B0%D0%BC%D0%B5%D1%80%D1%8B%20%D0%BD%D0%B0%20%5Bval%5D%22%2C%22_change%20camera%20y%20by%20%5Bval%5D%22%3A%22%D0%B8%D0%B7%D0%BC%D0%B5%D0%BD%D0%B8%D1%82%D1%8C%20y%20%D0%BA%D0%B0%D0%BC%D0%B5%D1%80%D1%8B%20%D0%BD%D0%B0%20%5Bval%5D%22%2C%22_change%20camera%20zoom%20by%20%5Bval%5D%22%3A%22%D0%B8%D0%B7%D0%BC%D0%B5%D0%BD%D0%B8%D1%82%D1%8C%20%D0%BF%D1%80%D0%B8%D0%B1%D0%BB%D0%B8%D0%B6%D0%B5%D0%BD%D0%B8%D0%B5%20%D0%BA%D0%B0%D0%BC%D0%B5%D1%80%D1%8B%20%D0%BD%D0%B0%20%5Bval%5D%22%2C%22_move%20camera%20%5Bval%5D%20steps%22%3A%22%D0%BF%D0%BE%D0%B9%D1%82%D0%B8%20%D0%BA%D0%B0%D0%BC%D0%B5%D1%80%D1%83%20%D0%BD%D0%B0%20%5Bval%5D%20%D1%88%D0%B0%D0%B3%D0%BE%D0%B2%22%2C%22_move%20camera%20to%20%5Bsprite%5D%22%3A%22%D0%B4%D0%B2%D0%B8%D0%BD%D1%83%D1%82%D1%8C%20%D0%BA%D0%B0%D0%BC%D0%B5%D1%80%D1%83%20%D0%BD%D0%B0%20%5Bsprite%5D%22%2C%22_no%20sprites%20exist%22%3A%22%D0%BD%D0%B8%D0%BA%D0%B0%D0%BA%D0%B8%D1%85%20%D1%81%D0%BF%D1%80%D0%B0%D0%B9%D1%82%D0%BE%D0%B2%20%D0%BD%D0%B5%20%D1%81%D1%83%D1%89%D0%B5%D1%81%D1%82%D0%B2%D1%83%D0%B5%D1%82%22%2C%22_point%20camera%20towards%20%5Bsprite%5D%22%3A%22%D0%BD%D0%B0%D0%B2%D0%B5%D1%81%D1%82%D0%B8%20%D0%BA%D0%B0%D0%BC%D0%B5%D1%80%D1%83%20%D0%BD%D0%B0%20%5Bsprite%5D%22%2C%22_set%20background%20color%20to%20%5Bval%5D%22%3A%22%D1%83%D1%81%D1%82%D0%B0%D0%BD%D0%BE%D0%B2%D0%B8%D1%82%D1%8C%20%D1%86%D0%B2%D0%B5%D1%82%20%D0%B7%D0%B0%D0%B4%D0%BD%D0%B5%D0%B3%D0%BE%20%D1%84%D0%BE%D0%BD%D0%B0%20%D0%BD%D0%B0%20%5Bval%5D%22%2C%22_set%20camera%20direction%20to%20%5Bval%5D%22%3A%22%D1%83%D1%81%D1%82%D0%B0%D0%BD%D0%BE%D0%B2%D0%B8%D1%82%D1%8C%20%D0%BD%D0%B0%D0%BF%D1%80%D0%B0%D0%B2%D0%BB%D0%B5%D0%BD%D0%B8%D0%B5%20%D0%BA%D0%B0%D0%BC%D0%B5%D1%80%D1%8B%20%D0%BD%D0%B0%20%5Bval%5D%22%2C%22_set%20camera%20to%20x%3A%20%5Bx%5D%20y%3A%20%5By%5D%22%3A%22%D1%83%D1%81%D1%82%D0%B0%D0%BD%D0%BE%D0%B2%D0%B8%D1%82%D1%8C%20%D0%BA%D0%B0%D0%BC%D0%B5%D1%80%D1%83%20%D0%BD%D0%B0%20%D0%BF%D0%BE%D0%B7%D0%B8%D1%86%D0%B8%D0%B8%20x%3A%20%5Bx%5D%20y%3A%20%5By%5D%22%2C%22_set%20camera%20x%20to%20%5Bval%5D%22%3A%22%D1%83%D1%81%D1%82%D0%B0%D0%BD%D0%BE%D0%B2%D0%B8%D1%82%D1%8C%20x%20%D0%BA%D0%B0%D0%BC%D0%B5%D1%80%D1%8B%20%D0%BD%D0%B0%20%5Bval%5D%22%2C%22_set%20camera%20y%20to%20%5Bval%5D%22%3A%22%D1%83%D1%81%D1%82%D0%B0%D0%BD%D0%BE%D0%B2%D0%B8%D1%82%D1%8C%20y%20%D0%BA%D0%B0%D0%BC%D0%B5%D1%80%D1%8B%20%D0%BD%D0%B0%20%5Bval%5D%22%2C%22_set%20camera%20zoom%20to%20%5Bval%5D%20%25%22%3A%22%D1%83%D1%81%D1%82%D0%B0%D0%BD%D0%BE%D0%B2%D0%B8%D1%82%D1%8C%20%D0%BF%D1%80%D0%B8%D0%B1%D0%BB%D0%B8%D0%B6%D0%B5%D0%BD%D0%B8%D0%B5%20%D0%BA%D0%B0%D0%BC%D0%B5%D0%BD%D1%8B%20%D0%B2%20%5Bval%5D%25%22%2C%22_turn%20camera%20%5Bimage%5D%20%5Bval%5D%20degrees%22%3A%22%D0%BF%D0%BE%D0%B2%D0%B5%D1%80%D0%BD%D1%83%D1%82%D1%8C%20%D0%BA%D0%B0%D0%BC%D0%B5%D1%80%D1%83%20%5Bimage%5D%20%D0%BD%D0%B0%20%5Bval%5D%20%D0%B3%D1%80%D0%B0%D0%B4%D1%83%D1%81%D0%BE%D0%B2%22%7D%2C%22zh-cn%22%3A%7B%22_Camera%20(Very%20Buggy)%22%3A%22%E8%88%9E%E5%8F%B0%E6%91%84%E5%83%8F%E6%9C%BA(%E6%9C%89Bug)%22%2C%22_background%20color%22%3A%22%E8%83%8C%E6%99%AF%E9%A2%9C%E8%89%B2%22%2C%22_camera%20direction%22%3A%22%E6%91%84%E5%83%8F%E6%9C%BA%E7%9A%84%E6%96%B9%E5%90%91%22%2C%22_camera%20x%22%3A%22%E6%91%84%E5%83%8F%E6%9C%BAx%E5%9D%90%E6%A0%87%22%2C%22_camera%20y%22%3A%22%E6%91%84%E5%83%8F%E6%9C%BAy%E5%9D%90%E6%A0%87%22%2C%22_camera%20zoom%22%3A%22%E6%91%84%E5%83%8F%E6%9C%BA%E8%A7%86%E9%87%8E%22%2C%22_change%20camera%20x%20by%20%5Bval%5D%22%3A%22%E6%91%84%E5%83%8F%E6%9C%BA%E7%9A%84x%E5%9D%90%E6%A0%87%E5%A2%9E%E5%8A%A0%5Bval%5D%22%2C%22_change%20camera%20y%20by%20%5Bval%5D%22%3A%22%E6%91%84%E5%83%8F%E6%9C%BA%E7%9A%84y%E5%9D%90%E6%A0%87%E5%A2%9E%E5%8A%A0%5Bval%5D%22%2C%22_change%20camera%20zoom%20by%20%5Bval%5D%22%3A%22%E6%91%84%E5%83%8F%E6%9C%BA%E6%8B%89%E8%BF%91%5Bval%5D%22%2C%22_move%20camera%20%5Bval%5D%20steps%22%3A%22%E6%91%84%E5%83%8F%E6%9C%BA%E7%A7%BB%E5%8A%A8%5Bval%5D%E6%AD%A5%22%2C%22_move%20camera%20to%20%5Bsprite%5D%22%3A%22%E7%A7%BB%E5%8A%A8%E6%91%84%E5%83%8F%E6%9C%BA%E5%88%B0%E8%A7%92%E8%89%B2%5Bsprite%5D%22%2C%22_no%20sprites%20exist%22%3A%22%E6%B2%A1%E6%9C%89%E8%A7%92%E8%89%B2%22%2C%22_point%20camera%20towards%20%5Bsprite%5D%22%3A%22%E6%91%84%E5%83%8F%E6%9C%BA%E9%9D%A2%E5%90%91%5Bsprite%5D%22%2C%22_set%20background%20color%20to%20%5Bval%5D%22%3A%22%E8%AE%BE%E7%BD%AE%E8%83%8C%E6%99%AF%E9%A2%9C%E8%89%B2%E4%B8%BA%5Bval%5D%22%2C%22_set%20camera%20direction%20to%20%5Bval%5D%22%3A%22%E8%AE%BE%E7%BD%AE%E6%91%84%E5%83%8F%E6%9C%BA%E7%9A%84%E6%96%B9%E5%90%91%E4%B8%BA%5Bval%5D%22%2C%22_set%20camera%20to%20x%3A%20%5Bx%5D%20y%3A%20%5By%5D%22%3A%22%E8%AE%BE%E7%BD%AE%E6%91%84%E5%83%8F%E6%9C%BA%E7%9A%84%E5%9D%90%E6%A0%87%E4%B8%BAx%5Bx%5D%20y%5By%5D%22%2C%22_set%20camera%20x%20to%20%5Bval%5D%22%3A%22%E8%AE%BE%E7%BD%AE%E6%91%84%E5%83%8F%E6%9C%BA%E7%9A%84x%E5%9D%90%E6%A0%87%E4%B8%BA%5Bval%5D%22%2C%22_set%20camera%20y%20to%20%5Bval%5D%22%3A%22%E8%AE%BE%E7%BD%AE%E6%91%84%E5%83%8F%E6%9C%BA%E7%9A%84y%E5%9D%90%E6%A0%87%E4%B8%BA%5Bval%5D%22%2C%22_set%20camera%20zoom%20to%20%5Bval%5D%20%25%22%3A%22%E8%AE%BE%E7%BD%AE%E6%91%84%E5%83%8F%E6%9C%BA%E8%A7%86%E9%87%8E%E4%B8%BA%5Bval%5D%25%22%2C%22_turn%20camera%20%5Bimage%5D%20%5Bval%5D%20degrees%22%3A%22%E6%91%84%E5%83%8F%E6%9C%BA%5Bimage%5D%5Bval%5D%E5%BA%A6%22%7D%7D)%3B%2F*%20end%20generated%20l10n%20code%20*%2F((Scratch)%20%3D%3E%20%7B%0A%20%20%22use%20strict%22%3B%0A%0A%20%20if%20(!Scratch.extensions.unsandboxed)%20%7B%0A%20%20%20%20throw%20new%20Error(%22Camera%20extension%20must%20be%20run%20unsandboxed%22)%3B%0A%20%20%7D%0A%0A%20%20const%20icon%20%3D%0A%20%20%20%20%22data%3Aimage%2Fsvg%2Bxml%3Bbase64%2CPHN2ZyB2ZXJzaW9uPSIxLjEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIHdpZHRoPSIyMjUuMzU0OCIgaGVpZ2h0PSIyMjUuMzU0OCIgdmlld0JveD0iMCwwLDIyNS4zNTQ4LDIyNS4zNTQ4Ij48ZyB0cmFuc2Zvcm09InRyYW5zbGF0ZSgtMTg3LjMyMjkzLC0zNy4zMjI1OSkiPjxnIGRhdGEtcGFwZXItZGF0YT0ieyZxdW90O2lzUGFpbnRpbmdMYXllciZxdW90Ozp0cnVlfSIgZmlsbC1ydWxlPSJub256ZXJvIiBzdHJva2U9Im5vbmUiIHN0cm9rZS1saW5lY2FwPSJidXR0IiBzdHJva2UtbGluZWpvaW49Im1pdGVyIiBzdHJva2UtbWl0ZXJsaW1pdD0iMTAiIHN0cm9rZS1kYXNoYXJyYXk9IiIgc3Ryb2tlLWRhc2hvZmZzZXQ9IjAiIHN0eWxlPSJtaXgtYmxlbmQtbW9kZTogbm9ybWFsIj48cGF0aCBkPSJNMTg3LjMyMjk0LDE1MGMwLC02Mi4yMzAwMSA1MC40NDczOSwtMTEyLjY3NzQgMTEyLjY3NzQsLTExMi42Nzc0YzYyLjIzMDAxLDAgMTEyLjY3NzQsNTAuNDQ3MzkgMTEyLjY3NzQsMTEyLjY3NzRjMCw2Mi4yMzAwMSAtNTAuNDQ3MzksMTEyLjY3NzQgLTExMi42Nzc0LDExMi42Nzc0Yy02Mi4yMzAwMSwwIC0xMTIuNjc3NCwtNTAuNDQ3MzkgLTExMi42Nzc0LC0xMTIuNjc3NHoiIGZpbGw9IiNmZjRkYTciIHN0cm9rZS13aWR0aD0iMCIvPjxnPjxwYXRoIGQ9Ik0zMTcuMTAyOSw4MC44MTA4N2MyMS44OTI0LDAgMzkuNjYyMDcsMTcuNzM3MjMgMzkuNjYyMDcsMzkuNjM0NGMwLDEyLjMwNTE3IC01LjYxMTQ4LDIzLjI5NjIyIC0xNC40MDA4OCwzMC41NjgyNGg4Ljc3MDMydjY4LjE3NTYzaC0xMTQuMTMzMjV2LTU1Ljc5ODg5Yy0xNC4zMzQwOCwtMy41MjgxNyAtMjQuOTYxNTMsLTE2LjQ1NzQ3IC0yNC45NjE1MywtMzEuODgwNDRjMCwtMTguMTM5IDE0LjY5NjczLC0zMi44MzQ3OCAzMi44MzQ3OCwtMzIuODM0NzhjMTIuMDM3OTUsMCAyMi41NTY2MSw2LjQ3ODAxIDI4LjI3MjExLDE2LjEzMzk1bDQuODYxMzcsLTAuOTI0NzVjMy4xMjkyNiwtMTguNzY2OTYgMTkuNDM5NzYsLTMzLjA3MzM2IDM5LjA5OTAyLC0zMy4wNzMzNnpNMjc2LjIxODUxLDE0MS4yOTE3MWMtMS4xMDAzNSwzLjUzMzg5IC0yLjc2OTQ3LDYuODEyMDMgLTQuOTIwNTQsOS43MjE3OWgyMC41NDc3NGMtMy42ODc1NCwtMy4wNDgxNCAtNi44MDI0OCwtNi43NjUyNyAtOS4xODU0NSwtMTAuOTQ0Mjl6IiBmaWxsPSIjZmZmZmZmIiBzdHJva2Utd2lkdGg9IjEiLz48cGF0aCBkPSJNMzM2LjU3NTI5LDExOS41MjgxNWMwLDExLjA2ODM1IC04Ljk3MjY0LDIwLjA0MDk5IC0yMC4wNDA5OSwyMC4wNDA5OWMtMTEuMDY4MzUsMCAtMjAuMDQwOTksLTguOTcyNjQgLTIwLjA0MDk5LC0yMC4wNDA5OWMwLC0xMS4wNjgzNSA4Ljk3MjY0LC0yMC4wNDA5OSAyMC4wNDA5OSwtMjAuMDQwOTljMTEuMDY4MzUsMCAyMC4wNDA5OSw4Ljk3MjY0IDIwLjA0MDk5LDIwLjA0MDk5eiIgZmlsbD0iI2ZmNGRhNyIgc3Ryb2tlLXdpZHRoPSIwLjUiLz48cGF0aCBkPSJNMjYxLjE4MywxMzAuMDI1ODFjMCw4Ljk2MDA0IC03LjI2MzYyLDE2LjIyMzY2IC0xNi4yMjM2NiwxNi4yMjM2NmMtOC45NjAwNCwwIC0xNi4yMjM2NiwtNy4yNjM2MiAtMTYuMjIzNjYsLTE2LjIyMzY2YzAsLTguOTYwMDQgNy4yNjM2MiwtMTYuMjIzNjYgMTYuMjIzNjYsLTE2LjIyMzY2YzguOTYwMDQsMCAxNi4yMjM2Niw3LjI2MzYyIDE2LjIyMzY2LDE2LjIyMzY2eiIgZmlsbD0iI2ZmNGRhNyIgc3Ryb2tlLXdpZHRoPSIwLjUiLz48cGF0aCBkPSJNMzg3Ljk2MDM5LDE0NS44NTcyNHY2MC41MTA0M2wtMjEuNjAzMjYsLTEzLjQ3MjE3aC0xNi44OTgzNHYtMzMuNTY2MDdoMTYuODk4MzRsMjEuNTk5MTcsLTEzLjQ3MTEyeiIgZmlsbD0iI2ZmZmZmZiIgc3Ryb2tlLXdpZHRoPSIxIi8%2BPC9nPjwvZz48L2c%2BPC9zdmc%2BPCEtLXJvdGF0aW9uQ2VudGVyOjExMi42NzcwNjU6MTEyLjY3NzQwNS0tPg%3D%3D%22%3B%0A%20%20const%20CW%20%3D%0A%20%20%20%20%22data%3Aimage%2Fpng%3Bbase64%2CiVBORw0KGgoAAAANSUhEUgAAAIUAAAB%2BCAYAAAAKj9LmAAAAAXNSR0IArs4c6QAABqdJREFUeF7tneuV1DAMhZdSoBWoB2qBeqAVKAWOOQRCNvHV27Kt%2Fbsex7r6ciV7MjNvXupvWgW%2Bv%2F%2F8sy3%2B3bdPbyyDMJ3McmHauQ7BqPNYC0u9LnccissijumhQCJxRb8bbyG0dh3cODVrng4KrjjaZGSARBqzFIz0UEgF8YDhaU6p%2BJQ1auOXrC0tFFoxKIJ7jJEk4WkdVhpw15QKCisRPJLNnZObiOv8llpw15ICCksBKMl7%2B%2FXj72E%2FPnyhDFeN4SbkuBjS5IjhGN%2BLhbuGoVCgwKnZuApEfR0aZwkNJzFIl6d4rcAYAgUKGiXLCwJ0XQt3QXAgbXqxTwkFCriXlJEgPK1L4yR3cCB9KBo8rQnBeI4xzClQwHfCU0Sg3N0RY6SAHMlC%2BlC1sHCLEChQwNekUQWISDb3GhI4GhhII6om6aFAga4Ewx08EkC0jpkaCg4Q1LuAe9dmGa%2BBQ6KNtq9wKR9UICQBZ0k0dx0SMKT6pIKCCkMTVBowNxnZxlPh0OijLSFmTkEFQhNstgRr1oPg0OiUAooCQobHU%2FI0QKBjb8p5hdopKEBYBCmTPf%2BrrmBYaaXpK1RQFBB20LUkWgGBjuORW4ihKCDsgPCYSdNXuEFhSb2HaDvMKS0hIiiQSxQQOZALg6KAyJFwyiqkJYTlFAUEJRV5xgyHokpGHhjQWUX7f28HQnaKcol8SaesSNJXkKAoICjy5xwzBIoqGzlh0JQQ6BQ9lyggcgMhPdnsQjFL2UDvOFJStzLg3BIihmK0iBYg9GAZHR8FZOoYMyiylg1vGK5CrwAH97zi0SmyQRENw0pwmECRCYjRMKwCB6eE3DpFFiiyAXEGZLayooJiBSDQQyTn5KId1irNKKeEvHKKDFBwHYIDQS%2FJEkBmcQwXKCKCHwXDHShcQCL0oW5Bn8ZRS8h%2FTjHSJThAWDkDRWQOHNnBMIUiIlgKFJEwXIFBcERoRIG4N2YqKLID0YReGYrr8xV%2Fy8eo0lFAaO9%2F3uspbgGh8LTFAoKXUIvR00MxsodYpWRcQSJDMaJ0IJcYDQSCwtNBLRyBuy099xW%2Fy0c0FLMD0TTbFgqvwDmna553zdPcK%2Bw0NFvTrlPsCMXqQDRYUF8RDkVml9gBiB4UR1%2FR%2Fao%2BD6eYFQoPLUaURhUUHiLMCsTMjSV3F9J2fY9OUVD8k9NDi1EucVy311ekgCLzmcSKQKBms6AYcE4z2iVQXxEGxYz9xKouUVAQbsunrejKUPTAGO4UmfuJFXcdqNFs%2Fy8o%2FqgU%2Ff4PwcDchqBSXlAQoDiyM3s5QW9EwhNNawHQebvbbUGcGB1xE6eZfljo4VV2KFo2dwfj6O%2BqfFzu7V3BODf8BcWN4e8GxnUHWFA8dAG7gHF3JFBQEFrD1QBBZ0MFBQGK3YYUFLtlnBBvQUEQabchw6E4TtF2Ez5zvKHPaM5wgJU5WVFrC32au6CISqvuOgWFTr8lX50CiuorcrEV%2FlnSKiG5ALhbTfj3UxQUBcUrBdBTP%2FklW3%2BF4U7RJC23yA0WhKItP%2BoprGo4c8BC%2Bh5Nayh6blFgjAejoBifg3QrIEHhUULKLdKx8HdB5C9sjy4hVUbGQUOGotxiXJKirzwciioj0SnH10vxy0Dok0vomUIcZo3gKJACCuQW1V9wUqofm%2BrXBssx9Am1mCEVFOUYFinVz5HyF4yRY1Q50Se%2BN0NKKCiOUWD4gdGFol125Jd5lGP4JV7sFAgKrwOt84IpYJRr2MIDnQKB4XH8fQ2RCsbxujrX0EFCgmJGMMo95GCYQBFRRo4Qua5R7sGHgwwFcosZwLiTp0rNa1VYUCAwIvoLSRPKuVcKkpcXUygi3aLg4KDOG8uGArnFKDDadaX9Rk%2ByHZ1DBEVmMLQNafUdgvJxFg19F1R0j9G747UuspNjiJ3iSMBMYNxBw4FlFzDcoRjZY%2FDaK1pPsgMYaigo%2FcVMYKCGtaBg3GqojBQYDDEHDzVxCmp%2FcYzL1IA%2B6b%2Fzp%2BNNoaCWkllcY9dPx5tDsRIYBYVDHaP0Gdld4w6M1ZtNF6fgHHBl7zMKCge34JSTjK5RUDhBwQUjCxzVUzgCISknGcpKQREEhcQ1RjlHQREIBfew67q0iMOvOrwaAISmpJxf6wHIzkA0bd23pFTeqGcaaD4tJOit9NXPKFJBYeUcT9AgWBAMbd4dgEgLhbbnQG4i%2Bf8uQKSHIgscOwExDRTepaXnHLsBMSUUkYDsCMT0UNzd4Ra7mF1hOPRMsyWVNH%2Fc1%2FSA2R2Es5a%2FACFtcn%2FxxMQMAAAAAElFTkSuQmCC%22%3B%0A%20%20const%20CCW%20%3D%0A%20%20%20%20%22data%3Aimage%2Fpng%3Bbase64%2CiVBORw0KGgoAAAANSUhEUgAAAIYAAAB9CAYAAABnLBtLAAAAAXNSR0IArs4c6QAABotJREFUeF7tnWuW5TQMhJmlwFZgPcNaYD3DVmApzAmHzEmnY%2BthvRxV%2F01iy6XPJSU3fe%2BXnwz%2B%2Fv71j3%2BpYX756%2Fcv1DkVjnPWcsS5y3q0mi4liyviGVwVMaVxS8Wtsk5p3Nfz1WBoxY0WTRvniqj3a6PXbBG7CoxVsT2FWo3NQlRqDM%2F1U3Nzj6eA4VGjdwBiJycRg2GZgNWdYxkLdyd5nbeqhXVcpmD8%2FO3rh%2Fj%2B%2Be3PabxaMd4ERFUXEYExS8gdinPBlnBYAjGKd3XnUevljq%2FdNNzxqfPcwTgCoMSiRFgFwgsCSlzO2qkxKG2o67XHTcDgCK%2BBYwUITkxa0bTXURrMxo0GJAwMzu65Ll4DRUUYRsnWQBIJBxsMTX9xF4US41j424GQapLVnIaCwXENiU3v5BDUuqhNEw3IMhia5EhFuIuimZNKTJXjEm08S0sKGFrneDMQKyXGA5AtwOgExBWQTPdggWHReD5ZNbXwrkBo3cPSOZbAsEjcCA6Lsav0DRZxUJvonMMKjnQwnvoNQPGMUiQcJcA44QAQPG%2FhALLqHCQYXv0FTwKctfLkdAUOgLExe5RzpIAB269BlBccascAGDXA4Dws1DjHFAz0F3WST0Vi7RwAg1J8o%2BOWcKjAQBmpSQvAqJmXElFZwQHHKJFO2yBmcHAb0SEYaDxtkxU92iocYjA69BeUHT8luZou1Boo52gPBiWgdqdXAGXFNdqC4QXEHaRsQLRwPILx5v4iCogqgACMiednwVClF9HAIXKMbFvU1PtKUFzjj9QSYFyUXwGC6tjvgGr%2BSeoYozIcnxzjDf2FBgopDDP3koASBYfUNV4HhgQKSxieQOECkg3Hkw5sMKKC1%2FQRnHcSruN6A6EpNRH6SlzjNWBw4IgGQgpIJhx3bQCG1qKU11HlxRsOrmt8AKND45ntGgdPmXCYguFNsXLzDS%2BjGlDA8fyleVddWI6xGxg79BuUc3hqPto4LcAAHGMf5pSTH47xhv7iLgVKihyO0zVeDQZcwxEMz1pn3XSOxqvuHBl3KVSfQTrGG8DYwTmiSznVZ%2FwHRnRQUU4h6Tkq38J6bE6AIfgoPhuO6A06KydTx%2FAgNcstznmpnZIZH8DIVJ%2F40vuqruGxSeEYDyBSXXkWu5GuMQUjMpAssZ%2FmBRjjnws5XLNdj0H1GlVLyRG3dTlBKdmolMweH5QBw4PSCuWk8p3JNmCcibSmNQOQ6o%2FGT01GfZ91DshSQj39zEhixpzZ%2FUUVMI44yM9KMhKUMWcVKCqUkg9gdHcNgPFxO7LfEs%2FYxRFzVgKiZCm5J4F6RyAiad5zVISiQin58YBrloC3AVIVhmsOSt2VeO9OjM9XAGDwtWp1JsBolW7%2BYgEGX6s2Z0Z%2B2s168tlG%2BeILBRjFE5QVXhQY1AeJ5A%2FZZAnUdd4K%2FcWnR%2BJdk1Fp3QCjUjaKxBJVRo7lUq82opQUgSLyUTjAKJR0KpQKbnHE%2BOm%2F3anAcdxXgQpgDL84xXfpGH2kQCQUnDKCu5IirEaCQT2%2FOCVB85kMRyQUXLeAYxSG4gjN%2Bq1wgJGccO70VdziejeCUsLNntN50VBI3AKlxCnp1LDU65KRJeTJLQAGlUGH4xlQzNwCYDgkWTrkLlDAMaSZXTifgsLrLkTjFgBjIdGSS3eDAmBIsqs4lwOEp1No3QJgKJLNvWRnKAAGN8vC86pDMboTuS4Tn5UIkz47nQuEd%2FlYKSHn%2BgCGARgSIHaAAqVkAQopDBFAUE7BKSFwDAUUGhjOaTwecz8tgfu%2BBbV8lJKBQisQXIeMAoJyC%2BnXPwAMxs9dUrtrdLwKFJISglLyEiAop9BA0bb5tCoTWSXjOq%2FXd5e2KyXWUESWC89m8z52KzAsoMgGIcItWpUSKRSVAJA6hbavuM7TxjEoMKqDcCaN6iksoGjjGIBCfsPdwjEy3siWp2J%2BRZRTtHmOASh0iL7eMaK%2BoUYnP31VtFO0d4zqzSYHCKtG8wlPOAa9acPPyIaixV3JTqWEC4SnU6CUfPsa7gSjCSsBATCKgFERCpSSJM%2BQwHCGKH3RZnVpbZvPQ7joO5MdgGhTSo6FZjegOwEBMP5XwMs1NDBklY2WzzFmjnEVZBWQFRAqAdHKMbhwcPoOCwDuOzS6seQ0pq9vPq8iUB%2B%2FcwSzPKciEO0c41xwNhyVYbhC38oxMuHYBYi2jhEFx24g3EtkS8fw6Dt2BwFgTLpHTv%2FxNgBGcnwHa6xrfvicCcEAAAAASUVORK5CYII%3D%22%3B%0A%0A%20%20const%20vm%20%3D%20Scratch.vm%3B%0A%0A%20%20let%20cameraX%20%3D%200%3B%0A%20%20let%20cameraY%20%3D%200%3B%0A%20%20let%20cameraZoom%20%3D%20100%3B%0A%20%20let%20cameraDirection%20%3D%2090%3B%0A%20%20let%20cameraBG%20%3D%20%22%23ffffff%22%3B%0A%0A%20%20vm.runtime.runtimeOptions.fencing%20%3D%20false%3B%0A%20%20vm.renderer.offscreenTouching%20%3D%20true%3B%0A%20%20vm.setInterpolation(false)%3B%0A%0A%20%20function%20updateCamera(%0A%20%20%20%20x%20%3D%20cameraX%2C%0A%20%20%20%20y%20%3D%20cameraY%2C%0A%20%20%20%20scale%20%3D%20cameraZoom%20%2F%20100%2C%0A%20%20%20%20rot%20%3D%20-cameraDirection%20%2B%2090%0A%20%20)%20%7B%0A%20%20%20%20rot%20%3D%20(rot%20%2F%20180)%20*%20Math.PI%3B%0A%20%20%20%20const%20s%20%3D%20Math.sin(rot)%20*%20scale%3B%0A%20%20%20%20const%20c%20%3D%20Math.cos(rot)%20*%20scale%3B%0A%20%20%20%20const%20w%20%3D%20vm.runtime.stageWidth%20%2F%202%3B%0A%20%20%20%20const%20h%20%3D%20vm.runtime.stageHeight%20%2F%202%3B%0A%20%20%20%20vm.renderer._projection%20%3D%20%5B%0A%20%20%20%20%20%20c%20%2F%20w%2C%0A%20%20%20%20%20%20-s%20%2F%20h%2C%0A%20%20%20%20%20%200%2C%0A%20%20%20%20%20%200%2C%0A%20%20%20%20%20%20s%20%2F%20w%2C%0A%20%20%20%20%20%20c%20%2F%20h%2C%0A%20%20%20%20%20%200%2C%0A%20%20%20%20%20%200%2C%0A%20%20%20%20%20%200%2C%0A%20%20%20%20%20%200%2C%0A%20%20%20%20%20%20-1%2C%0A%20%20%20%20%20%200%2C%0A%20%20%20%20%20%20(c%20*%20-x%20%2B%20s%20*%20-y)%20%2F%20w%2C%0A%20%20%20%20%20%20(c%20*%20-y%20-%20s%20*%20-x)%20%2F%20h%2C%0A%20%20%20%20%20%200%2C%0A%20%20%20%20%20%201%2C%0A%20%20%20%20%5D%3B%0A%20%20%20%20vm.renderer.dirty%20%3D%20true%3B%0A%20%20%7D%0A%0A%20%20function%20updateCameraBG(color%20%3D%20cameraBG)%20%7B%0A%20%20%20%20const%20rgb%20%3D%20Scratch.Cast.toRgbColorList(color)%3B%0A%20%20%20%20Scratch.vm.renderer.setBackgroundColor(%0A%20%20%20%20%20%20rgb%5B0%5D%20%2F%20255%2C%0A%20%20%20%20%20%20rgb%5B1%5D%20%2F%20255%2C%0A%20%20%20%20%20%20rgb%5B2%5D%20%2F%20255%0A%20%20%20%20)%3B%0A%20%20%7D%0A%0A%20%20%2F%2F%20tell%20resize%20to%20update%20camera%20as%20well%0A%20%20vm.runtime.on(%22STAGE_SIZE_CHANGED%22%2C%20(_)%20%3D%3E%20updateCamera())%3B%0A%0A%20%20vm.runtime.on(%22RUNTIME_DISPOSED%22%2C%20(_)%20%3D%3E%20%7B%0A%20%20%20%20cameraX%20%3D%200%3B%0A%20%20%20%20cameraY%20%3D%200%3B%0A%20%20%20%20cameraZoom%20%3D%20100%3B%0A%20%20%20%20cameraDirection%20%3D%2090%3B%0A%20%20%20%20cameraBG%20%3D%20%22%23ffffff%22%3B%0A%20%20%20%20updateCamera()%3B%0A%20%20%20%20updateCameraBG()%3B%0A%20%20%7D)%3B%0A%0A%20%20function%20_translateX(x%2C%20fromTopLeft%20%3D%20false%2C%20multiplier%20%3D%201%2C%20doZoom%20%3D%20true)%20%7B%0A%20%20%20%20const%20w%20%3D%20fromTopLeft%20%3F%20vm.runtime.stageWidth%20%2F%202%20%3A%200%3B%0A%20%20%20%20return%20(x%20-%20w)%20%2F%20(doZoom%20%3F%20cameraZoom%20%2F%20100%20%3A%201)%20%2B%20w%20%2B%20cameraX%20*%20multiplier%3B%0A%20%20%7D%0A%0A%20%20function%20_translateY(y%2C%20fromTopLeft%20%3D%20false%2C%20multiplier%20%3D%201%2C%20doZoom%20%3D%20true)%20%7B%0A%20%20%20%20const%20h%20%3D%20fromTopLeft%20%3F%20vm.runtime.stageHeight%20%2F%202%20%3A%200%3B%0A%20%20%20%20return%20(y%20-%20h)%20%2F%20(doZoom%20%3F%20cameraZoom%20%2F%20100%20%3A%201)%20%2B%20h%20%2B%20cameraY%20*%20multiplier%3B%0A%20%20%7D%0A%0A%20%20function%20rotate(cx%2C%20cy%2C%20x%2C%20y%2C%20radians)%20%7B%0A%20%20%20%20const%20cos%20%3D%20Math.cos(radians)%2C%0A%20%20%20%20%20%20sin%20%3D%20Math.sin(radians)%2C%0A%20%20%20%20%20%20nx%20%3D%20cos%20*%20(x%20-%20cx)%20%2B%20sin%20*%20(y%20-%20cy)%20%2B%20cx%2C%0A%20%20%20%20%20%20ny%20%3D%20cos%20*%20(y%20-%20cy)%20-%20sin%20*%20(x%20-%20cx)%20%2B%20cy%3B%0A%20%20%20%20return%20%5Bnx%2C%20ny%5D%3B%0A%20%20%7D%0A%0A%20%20%2F%2F%20rotation%20hell%0A%20%20function%20translateX(%0A%20%20%20%20x%2C%0A%20%20%20%20fromTopLeft%20%3D%20false%2C%0A%20%20%20%20xMult%20%3D%201%2C%0A%20%20%20%20doZoom%20%3D%20true%2C%0A%20%20%20%20y%20%3D%200%2C%0A%20%20%20%20yMult%20%3D%20xMult%0A%20%20)%20%7B%0A%20%20%20%20if%20((cameraDirection%20-%2090)%20%25%20360%20%3D%3D%3D%200%20%7C%7C%20!doZoom)%20%7B%0A%20%20%20%20%20%20return%20_translateX(x%2C%20fromTopLeft%2C%20xMult%2C%20doZoom)%3B%0A%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20const%20w%20%3D%20fromTopLeft%20%3F%20vm.runtime.stageWidth%20%2F%202%20%3A%200%3B%0A%20%20%20%20%20%20const%20h%20%3D%20fromTopLeft%20%3F%20vm.runtime.stageHeight%20%2F%202%20%3A%200%3B%0A%20%20%20%20%20%20const%20rotated%20%3D%20rotate(%0A%20%20%20%20%20%20%20%20cameraX%20%2B%20w%2C%0A%20%20%20%20%20%20%20%20cameraY%20%2B%20h%2C%0A%20%20%20%20%20%20%20%20_translateX(x%2C%20fromTopLeft%2C%20xMult%2C%20doZoom)%2C%0A%20%20%20%20%20%20%20%20_translateY(y%2C%20fromTopLeft%2C%20yMult%2C%20doZoom)%2C%0A%20%20%20%20%20%20%20%20((-cameraDirection%20%2B%2090)%20%2F%20180)%20*%20Math.PI%0A%20%20%20%20%20%20)%3B%0A%20%20%20%20%20%20return%20rotated%5B0%5D%3B%0A%20%20%20%20%7D%0A%20%20%7D%0A%20%20function%20translateY(%0A%20%20%20%20y%2C%0A%20%20%20%20fromTopLeft%20%3D%20false%2C%0A%20%20%20%20yMult%20%3D%201%2C%0A%20%20%20%20doZoom%20%3D%20true%2C%0A%20%20%20%20x%20%3D%200%2C%0A%20%20%20%20xMult%20%3D%20yMult%0A%20%20)%20%7B%0A%20%20%20%20if%20((cameraDirection%20-%2090)%20%25%20360%20%3D%3D%3D%200%20%7C%7C%20!doZoom)%20%7B%0A%20%20%20%20%20%20return%20_translateY(y%2C%20fromTopLeft%2C%20yMult%2C%20doZoom)%3B%0A%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20const%20w%20%3D%20fromTopLeft%20%3F%20vm.runtime.stageWidth%20%2F%202%20%3A%200%3B%0A%20%20%20%20%20%20const%20h%20%3D%20fromTopLeft%20%3F%20vm.runtime.stageHeight%20%2F%202%20%3A%200%3B%0A%20%20%20%20%20%20const%20rotated%20%3D%20rotate(%0A%20%20%20%20%20%20%20%20cameraX%20%2B%20w%2C%0A%20%20%20%20%20%20%20%20cameraY%20%2B%20h%2C%0A%20%20%20%20%20%20%20%20_translateX(x%2C%20fromTopLeft%2C%20xMult%2C%20doZoom)%2C%0A%20%20%20%20%20%20%20%20_translateY(y%2C%20fromTopLeft%2C%20yMult%2C%20doZoom)%2C%0A%20%20%20%20%20%20%20%20((-cameraDirection%20%2B%2090)%20%2F%20180)%20*%20Math.PI%0A%20%20%20%20%20%20)%3B%0A%20%20%20%20%20%20return%20rotated%5B1%5D%3B%0A%20%20%20%20%7D%0A%20%20%7D%0A%0A%20%20%2F%2F%20fix%20mouse%20positions%0A%20%20const%20oldSX%20%3D%20vm.runtime.ioDevices.mouse.getScratchX%3B%0A%20%20const%20oldSY%20%3D%20vm.runtime.ioDevices.mouse.getScratchY%3B%0A%20%20vm.runtime.ioDevices.mouse.getScratchX%20%3D%20function%20(...a)%20%7B%0A%20%20%20%20return%20translateX(%0A%20%20%20%20%20%20oldSX.apply(this%2C%20a)%2C%0A%20%20%20%20%20%20false%2C%0A%20%20%20%20%20%201%2C%0A%20%20%20%20%20%20true%2C%0A%20%20%20%20%20%20oldSY.apply(this%2C%20a)%2C%0A%20%20%20%20%20%201%0A%20%20%20%20)%3B%0A%20%20%7D%3B%0A%20%20vm.runtime.ioDevices.mouse.getScratchY%20%3D%20function%20(...a)%20%7B%0A%20%20%20%20return%20translateY(%0A%20%20%20%20%20%20oldSY.apply(this%2C%20a)%2C%0A%20%20%20%20%20%20false%2C%0A%20%20%20%20%20%201%2C%0A%20%20%20%20%20%20true%2C%0A%20%20%20%20%20%20oldSX.apply(this%2C%20a)%2C%0A%20%20%20%20%20%201%0A%20%20%20%20)%3B%0A%20%20%7D%3B%0A%20%20const%20oldCX%20%3D%20vm.runtime.ioDevices.mouse.getClientX%3B%0A%20%20const%20oldCY%20%3D%20vm.runtime.ioDevices.mouse.getClientY%3B%0A%20%20vm.runtime.ioDevices.mouse.getClientX%20%3D%20function%20(...a)%20%7B%0A%20%20%20%20return%20translateX(%0A%20%20%20%20%20%20oldCX.apply(this%2C%20a)%2C%0A%20%20%20%20%20%20true%2C%0A%20%20%20%20%20%201%2C%0A%20%20%20%20%20%20true%2C%0A%20%20%20%20%20%20oldCY.apply(this%2C%20a)%2C%0A%20%20%20%20%20%20-1%0A%20%20%20%20)%3B%0A%20%20%7D%3B%0A%20%20vm.runtime.ioDevices.mouse.getClientY%20%3D%20function%20(...a)%20%7B%0A%20%20%20%20return%20translateY(%0A%20%20%20%20%20%20oldCY.apply(this%2C%20a)%2C%0A%20%20%20%20%20%20true%2C%0A%20%20%20%20%20%20-1%2C%0A%20%20%20%20%20%20true%2C%0A%20%20%20%20%20%20oldCX.apply(this%2C%20a)%2C%0A%20%20%20%20%20%201%0A%20%20%20%20)%3B%0A%20%20%7D%3B%0A%0A%20%20const%20oldPick%20%3D%20vm.renderer.pick%3B%0A%20%20vm.renderer.pick%20%3D%20function%20(x%2C%20y)%20%7B%0A%20%20%20%20return%20oldPick.call(%0A%20%20%20%20%20%20this%2C%0A%20%20%20%20%20%20translateX(x%2C%20true%2C%201%2C%20true%2C%20y%2C%20-1)%2C%0A%20%20%20%20%20%20translateY(y%2C%20true%2C%20-1%2C%20true%2C%20x%2C%201)%0A%20%20%20%20)%3B%0A%20%20%7D%3B%0A%0A%20%20const%20oldExtract%20%3D%20vm.renderer.extractDrawableScreenSpace%3B%0A%20%20vm.renderer.extractDrawableScreenSpace%20%3D%20function%20(...args)%20%7B%0A%20%20%20%20const%20extracted%20%3D%20oldExtract.apply(this%2C%20args)%3B%0A%20%20%20%20extracted.x%20%3D%20translateX(extracted.x%2C%20false%2C%20-1%2C%20false%2C%20extracted.y%2C%201)%3B%0A%20%20%20%20extracted.y%20%3D%20translateY(extracted.y%2C%20false%2C%201%2C%20false%2C%20extracted.x%2C%20-1)%3B%0A%20%20%20%20return%20extracted%3B%0A%20%20%7D%3B%0A%0A%20%20%2F%2F%20%40ts-expect-error%0A%20%20if%20(vm.runtime.ext_scratch3_looks)%20%7B%0A%20%20%20%20%2F%2F%20%40ts-expect-error%0A%20%20%20%20const%20oldPosBubble%20%3D%20vm.runtime.ext_scratch3_looks._positionBubble%3B%0A%20%20%20%20%2F%2F%20%40ts-expect-error%0A%20%20%20%20vm.runtime.ext_scratch3_looks._positionBubble%20%3D%20function%20(target)%20%7B%0A%20%20%20%20%20%20%2F%2F%20it's%20harder%20to%20limit%20speech%20bubbles%20to%20the%20camera%20region...%0A%20%20%20%20%20%20%2F%2F%20it's%20easier%20to%20just%20remove%20speech%20bubble%20bounds%20entirely%0A%20%20%20%20%20%20const%20oldGetNativeSize%20%3D%20this.runtime.renderer.getNativeSize%3B%0A%20%20%20%20%20%20this.runtime.renderer.getNativeSize%20%3D%20()%20%3D%3E%20%5BInfinity%2C%20Infinity%5D%3B%0A%20%20%20%20%20%20try%20%7B%0A%20%20%20%20%20%20%20%20return%20oldPosBubble.call(this%2C%20target)%3B%0A%20%20%20%20%20%20%7D%20finally%20%7B%0A%20%20%20%20%20%20%20%20this.runtime.renderer.getNativeSize%20%3D%20oldGetNativeSize%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%3B%0A%20%20%7D%0A%0A%20%20class%20Camera%20%7B%0A%20%20%20%20getInfo()%20%7B%0A%20%20%20%20%20%20return%20%7B%0A%20%20%20%20%20%20%20%20id%3A%20%22DTcameracontrols%22%2C%0A%20%20%20%20%20%20%20%20name%3A%20Scratch.translate(%22Camera%20(Very%20Buggy)%22)%2C%0A%0A%20%20%20%20%20%20%20%20color1%3A%20%22%23ff4da7%22%2C%0A%20%20%20%20%20%20%20%20color2%3A%20%22%23de4391%22%2C%0A%20%20%20%20%20%20%20%20color3%3A%20%22%23c83c82%22%2C%0A%0A%20%20%20%20%20%20%20%20menuIconURI%3A%20icon%2C%0A%0A%20%20%20%20%20%20%20%20blocks%3A%20%5B%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22moveSteps%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.COMMAND%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20Scratch.translate(%22move%20camera%20%5Bval%5D%20steps%22)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20val%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.NUMBER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%2010%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22rotateCW%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.COMMAND%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20Scratch.translate(%22turn%20camera%20%5Bimage%5D%20%5Bval%5D%20degrees%22)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20image%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.IMAGE%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20dataURI%3A%20CW%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20val%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.ANGLE%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%2015%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22rotateCCW%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.COMMAND%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20Scratch.translate(%22turn%20camera%20%5Bimage%5D%20%5Bval%5D%20degrees%22)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20image%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.IMAGE%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20dataURI%3A%20CCW%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20val%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.ANGLE%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%2015%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%22---%22%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22goTo%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.COMMAND%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20Scratch.translate(%22move%20camera%20to%20%5Bsprite%5D%22)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20sprite%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.STRING%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20menu%3A%20%22sprites%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22setBoth%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.COMMAND%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20Scratch.translate(%22set%20camera%20to%20x%3A%20%5Bx%5D%20y%3A%20%5By%5D%22)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20x%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.NUMBER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%200%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20y%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.NUMBER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%200%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%22---%22%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22setDirection%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.COMMAND%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20Scratch.translate(%22set%20camera%20direction%20to%20%5Bval%5D%22)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20val%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.ANGLE%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%2090%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22pointTowards%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.COMMAND%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20Scratch.translate(%22point%20camera%20towards%20%5Bsprite%5D%22)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20sprite%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.STRING%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20menu%3A%20%22sprites%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%22---%22%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22changeX%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.COMMAND%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20Scratch.translate(%22change%20camera%20x%20by%20%5Bval%5D%22)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20val%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.NUMBER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%2010%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22setX%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.COMMAND%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20Scratch.translate(%22set%20camera%20x%20to%20%5Bval%5D%22)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20val%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.NUMBER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%200%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22changeY%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.COMMAND%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20Scratch.translate(%22change%20camera%20y%20by%20%5Bval%5D%22)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20val%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.NUMBER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%2010%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22setY%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.COMMAND%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20Scratch.translate(%22set%20camera%20y%20to%20%5Bval%5D%22)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20val%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.NUMBER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%200%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%22---%22%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22getX%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.REPORTER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20Scratch.translate(%22camera%20x%22)%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22getY%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.REPORTER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20Scratch.translate(%22camera%20y%22)%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22getDirection%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.REPORTER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20Scratch.translate(%22camera%20direction%22)%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%2F*%0A%20%20%20%20%20%20%20%20%20%20%2F%2F%20debugging%20blocks%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22getCX%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.REPORTER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20%22client%20x%22%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22getCY%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.REPORTER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20%22client%20y%22%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20*%2F%0A%20%20%20%20%20%20%20%20%20%20%22---%22%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22changeZoom%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.COMMAND%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20Scratch.translate(%22change%20camera%20zoom%20by%20%5Bval%5D%22)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20val%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.NUMBER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%2010%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22setZoom%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.COMMAND%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20Scratch.translate(%22set%20camera%20zoom%20to%20%5Bval%5D%20%25%22)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20val%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.NUMBER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%20100%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22getZoom%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.REPORTER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20Scratch.translate(%22camera%20zoom%22)%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%22---%22%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22setCol%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.COMMAND%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20Scratch.translate(%22set%20background%20color%20to%20%5Bval%5D%22)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20val%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.COLOR%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22getCol%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.REPORTER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20Scratch.translate(%22background%20color%22)%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%5D%2C%0A%20%20%20%20%20%20%20%20menus%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20sprites%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20items%3A%20%22getSprites%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20acceptReporters%3A%20true%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%7D%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20getCX()%20%7B%0A%20%20%20%20%20%20return%20vm.runtime.ioDevices.mouse.getClientX()%3B%0A%20%20%20%20%7D%0A%20%20%20%20getCY()%20%7B%0A%20%20%20%20%20%20return%20vm.runtime.ioDevices.mouse.getClientY()%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20getSprites()%20%7B%0A%20%20%20%20%20%20const%20sprites%20%3D%20%5B%5D%3B%0A%20%20%20%20%20%20Scratch.vm.runtime.targets.forEach((e)%20%3D%3E%20%7B%0A%20%20%20%20%20%20%20%20if%20(e.isOriginal%20%26%26%20!e.isStage)%20sprites.push(e.sprite.name)%3B%0A%20%20%20%20%20%20%7D)%3B%0A%20%20%20%20%20%20if%20(sprites.length%20%3D%3D%3D%200)%20%7B%0A%20%20%20%20%20%20%20%20sprites.push(Scratch.translate(%22no%20sprites%20exist%22))%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20return%20sprites%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20setBoth(args%2C%20util)%20%7B%0A%20%20%20%20%20%20cameraX%20%3D%20%2Bargs.x%3B%0A%20%20%20%20%20%20cameraY%20%3D%20%2Bargs.y%3B%0A%20%20%20%20%20%20updateCamera()%3B%0A%20%20%20%20%20%20vm.runtime.requestRedraw()%3B%0A%20%20%20%20%7D%0A%20%20%20%20changeZoom(args%2C%20util)%20%7B%0A%20%20%20%20%20%20cameraZoom%20%2B%3D%20%2Bargs.val%3B%0A%20%20%20%20%20%20updateCamera()%3B%0A%20%20%20%20%20%20vm.runtime.requestRedraw()%3B%0A%20%20%20%20%7D%0A%20%20%20%20setZoom(args%2C%20util)%20%7B%0A%20%20%20%20%20%20cameraZoom%20%3D%20%2Bargs.val%3B%0A%20%20%20%20%20%20updateCamera()%3B%0A%20%20%20%20%20%20vm.runtime.requestRedraw()%3B%0A%20%20%20%20%7D%0A%20%20%20%20changeX(args%2C%20util)%20%7B%0A%20%20%20%20%20%20cameraX%20%2B%3D%20%2Bargs.val%3B%0A%20%20%20%20%20%20updateCamera()%3B%0A%20%20%20%20%20%20vm.runtime.requestRedraw()%3B%0A%20%20%20%20%7D%0A%20%20%20%20setX(args%2C%20util)%20%7B%0A%20%20%20%20%20%20cameraX%20%3D%20%2Bargs.val%3B%0A%20%20%20%20%20%20updateCamera()%3B%0A%20%20%20%20%20%20vm.runtime.requestRedraw()%3B%0A%20%20%20%20%7D%0A%20%20%20%20changeY(args%2C%20util)%20%7B%0A%20%20%20%20%20%20cameraY%20%2B%3D%20%2Bargs.val%3B%0A%20%20%20%20%20%20updateCamera()%3B%0A%20%20%20%20%20%20vm.runtime.requestRedraw()%3B%0A%20%20%20%20%7D%0A%20%20%20%20setY(args%2C%20util)%20%7B%0A%20%20%20%20%20%20cameraY%20%3D%20%2Bargs.val%3B%0A%20%20%20%20%20%20updateCamera()%3B%0A%20%20%20%20%20%20vm.runtime.requestRedraw()%3B%0A%20%20%20%20%7D%0A%20%20%20%20setDirection(args%2C%20util)%20%7B%0A%20%20%20%20%20%20cameraDirection%20%3D%20%2Bargs.val%3B%0A%20%20%20%20%20%20updateCamera()%3B%0A%20%20%20%20%20%20vm.runtime.requestRedraw()%3B%0A%20%20%20%20%7D%0A%20%20%20%20rotateCW(args%2C%20util)%20%7B%0A%20%20%20%20%20%20cameraDirection%20%3D%20cameraDirection%20%2B%20%2Bargs.val%3B%0A%20%20%20%20%20%20updateCamera()%3B%0A%20%20%20%20%20%20vm.runtime.requestRedraw()%3B%0A%20%20%20%20%7D%0A%20%20%20%20rotateCCW(args%2C%20util)%20%7B%0A%20%20%20%20%20%20cameraDirection%20%3D%20cameraDirection%20-%20%2Bargs.val%3B%0A%20%20%20%20%20%20updateCamera()%3B%0A%20%20%20%20%20%20vm.runtime.requestRedraw()%3B%0A%20%20%20%20%7D%0A%20%20%20%20getX()%20%7B%0A%20%20%20%20%20%20return%20cameraX%3B%0A%20%20%20%20%7D%0A%20%20%20%20getY()%20%7B%0A%20%20%20%20%20%20return%20cameraY%3B%0A%20%20%20%20%7D%0A%20%20%20%20getZoom()%20%7B%0A%20%20%20%20%20%20return%20cameraZoom%3B%0A%20%20%20%20%7D%0A%20%20%20%20getDirection()%20%7B%0A%20%20%20%20%20%20return%20cameraDirection%3B%0A%20%20%20%20%7D%0A%20%20%20%20setCol(args%2C%20util)%20%7B%0A%20%20%20%20%20%20cameraBG%20%3D%20args.val%3B%0A%20%20%20%20%20%20updateCameraBG()%3B%0A%20%20%20%20%7D%0A%20%20%20%20getCol()%20%7B%0A%20%20%20%20%20%20return%20cameraBG%3B%0A%20%20%20%20%7D%0A%20%20%20%20moveSteps(args)%20%7B%0A%20%20%20%20%20%20const%20dir%20%3D%20((-cameraDirection%20%2B%2090)%20*%20Math.PI)%20%2F%20180%3B%0A%20%20%20%20%20%20cameraX%20%2B%3D%20args.val%20*%20Math.cos(dir)%3B%0A%20%20%20%20%20%20cameraY%20%2B%3D%20args.val%20*%20Math.sin(dir)%3B%0A%20%20%20%20%20%20updateCamera()%3B%0A%20%20%20%20%20%20vm.runtime.requestRedraw()%3B%0A%20%20%20%20%7D%0A%20%20%20%20goTo(args%2C%20util)%20%7B%0A%20%20%20%20%20%20const%20target%20%3D%20Scratch.Cast.toString(args.sprite)%3B%0A%20%20%20%20%20%20const%20sprite%20%3D%20vm.runtime.getSpriteTargetByName(target)%3B%0A%20%20%20%20%20%20if%20(!sprite)%20return%3B%0A%20%20%20%20%20%20cameraX%20%3D%20Math.round(sprite.x)%3B%0A%20%20%20%20%20%20cameraY%20%3D%20Math.round(sprite.y)%3B%0A%20%20%20%20%20%20updateCamera()%3B%0A%20%20%20%20%20%20vm.runtime.requestRedraw()%3B%0A%20%20%20%20%7D%0A%20%20%20%20pointTowards(args%2C%20util)%20%7B%0A%20%20%20%20%20%20const%20target%20%3D%20Scratch.Cast.toString(args.sprite)%3B%0A%20%20%20%20%20%20const%20sprite%20%3D%20vm.runtime.getSpriteTargetByName(target)%3B%0A%20%20%20%20%20%20if%20(!sprite)%20return%3B%0A%20%20%20%20%20%20const%20targetX%20%3D%20sprite.x%3B%0A%20%20%20%20%20%20const%20targetY%20%3D%20sprite.y%3B%0A%20%20%20%20%20%20const%20dx%20%3D%20targetX%20-%20cameraX%3B%0A%20%20%20%20%20%20const%20dy%20%3D%20targetY%20-%20cameraY%3B%0A%20%20%20%20%20%20cameraDirection%20%3D%2090%20-%20this.radToDeg(Math.atan2(dy%2C%20dx))%3B%0A%20%20%20%20%20%20updateCamera()%3B%0A%20%20%20%20%20%20vm.runtime.requestRedraw()%3B%0A%20%20%20%20%7D%0A%20%20%20%20radToDeg(rad)%20%7B%0A%20%20%20%20%20%20return%20(rad%20*%20180)%20%2F%20Math.PI%3B%0A%20%20%20%20%7D%0A%20%20%7D%0A%0A%20%20Scratch.extensions.register(new%20Camera())%3B%0A%7D)(Scratch)%3B%0A%20%7D)(Scratch)%3B","data:text/javascript;,(function(Scratch)%20%7B%20%2F%2F%20Name%3A%20Canvas%20Effects%0A%2F%2F%20ID%3A%20theshovelcanvaseffects%0A%2F%2F%20Description%3A%20Apply%20visual%20effects%20to%20the%20entire%20stage.%0A%2F%2F%20By%3A%20TheShovel%0A%2F%2F%20By%3A%20SharkPool%20%3Chttps%3A%2F%2Fscratch.mit.edu%2Fusers%2FDemonX5%2F%3E%0A%2F%2F%20License%3A%20MIT%0A%0A(function%20(Scratch)%20%7B%0A%20%20%22use%20strict%22%3B%0A%20%20if%20(!Scratch.extensions.unsandboxed)%20%7B%0A%20%20%20%20throw%20new%20Error(%22This%20extension%20must%20run%20unsandboxed%22)%3B%0A%20%20%7D%0A%0A%20%20const%20canvas%20%3D%20Scratch.renderer.canvas%3B%0A%0A%20%20const%20updateStyle%20%3D%20()%20%3D%3E%20%7B%0A%20%20%20%20%2F%2F%20Gotta%20keep%20the%20translation%20to%20%25%20because%20of%20the%20stage%20size%2C%20window%20size%20and%20so%20on%0A%20%20%20%20const%20transform%20%3D%20%60rotate(%24%7Brotation%7Ddeg)%20scale(%24%7BscaleX%7D%25%2C%20%24%7BscaleY%7D%25)%20skew(%24%7BskewX%7Ddeg%2C%20%24%7BskewY%7Ddeg)%20translate(%24%7BoffsetX%7D%25%2C%20%24%7B%0A%20%20%20%20%20%200%20-%20offsetY%0A%20%20%20%20%7D%25)%60%3B%0A%20%20%20%20if%20(canvas.style.transform%20!%3D%3D%20transform)%20%7B%0A%20%20%20%20%20%20canvas.style.transform%20%3D%20transform%3B%0A%20%20%20%20%7D%0A%20%20%20%20const%20filter%20%3D%20%60blur(%24%7Bblur%7Dpx)%20contrast(%24%7B%0A%20%20%20%20%20%20contrast%20%2F%20100%0A%20%20%20%20%7D)%20saturate(%24%7Bsaturation%7D%25)%20hue-rotate(%24%7Bcolor%7Ddeg)%20brightness(%24%7Bbrightness%7D%25)%20invert(%24%7Binvert%7D%25)%20sepia(%24%7Bsepia%7D%25)%20opacity(%24%7B%0A%20%20%20%20%20%20100%20-%20transparency%0A%20%20%20%20%7D%25)%60%3B%0A%20%20%20%20if%20(canvas.style.filter%20!%3D%3D%20filter)%20%7B%0A%20%20%20%20%20%20canvas.style.filter%20%3D%20filter%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20const%20cssBorderRadius%20%3D%20borderRadius%20%3D%3D%3D%200%20%3F%20%22%22%20%3A%20%60%24%7BborderRadius%7D%25%60%3B%0A%20%20%20%20if%20(canvas.style.borderRadius%20!%3D%3D%20cssBorderRadius)%20%7B%0A%20%20%20%20%20%20canvas.style.borderRadius%20%3D%20cssBorderRadius%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20const%20imageRendering%20%3D%20resizeMode%20%3D%3D%3D%20%22pixelated%22%20%3F%20%22pixelated%22%20%3A%20%22%22%3B%0A%20%20%20%20if%20(canvas.style.imageRendering%20!%3D%3D%20imageRendering)%20%7B%0A%20%20%20%20%20%20canvas.style.imageRendering%20%3D%20imageRendering%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20const%20border%20%3D%20%60%24%7BborderWidth%7Dpx%20%24%7BborderStyle%7D%20%24%7BborderColor%7D%60%3B%0A%20%20%20%20if%20(canvas.style.border%20!%3D%3D%20border)%20%7B%0A%20%20%20%20%20%20canvas.style.border%20%3D%20border%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20if%20(canvas.style.backgroundColor%20!%3D%3D%20backgroundColor)%20%7B%0A%20%20%20%20%20%20canvas.style.backgroundColor%20%3D%20backgroundColor%3B%0A%20%20%20%20%7D%0A%20%20%7D%3B%0A%0A%20%20%2F%2F%20scratch-gui%20may%20reset%20canvas%20styles%20when%20resizing%20the%20window%20or%20going%20in%2Fout%20of%20fullscreen%0A%20%20new%20MutationObserver(updateStyle).observe(canvas%2C%20%7B%0A%20%20%20%20attributeFilter%3A%20%5B%22style%22%5D%2C%0A%20%20%20%20attributes%3A%20true%2C%0A%20%20%7D)%3B%0A%0A%20%20let%20borderRadius%20%3D%200%3B%0A%20%20let%20rotation%20%3D%200%3B%0A%20%20let%20offsetY%20%3D%200%3B%0A%20%20let%20offsetX%20%3D%200%3B%0A%20%20let%20skewY%20%3D%200%3B%0A%20%20let%20skewX%20%3D%200%3B%0A%20%20let%20scaleX%20%3D%20100%3B%0A%20%20let%20scaleY%20%3D%20100%3B%0A%20%20%2F%2F%20Thanks%20SharkPool%20for%20telling%20me%20about%20these%0A%20%20let%20transparency%20%3D%200%3B%0A%20%20let%20sepia%20%3D%200%3B%0A%20%20let%20blur%20%3D%200%3B%0A%20%20let%20contrast%20%3D%20100%3B%0A%20%20let%20saturation%20%3D%20100%3B%0A%20%20let%20color%20%3D%200%3B%0A%20%20let%20brightness%20%3D%20100%3B%0A%20%20let%20invert%20%3D%200%3B%0A%20%20let%20resizeMode%20%3D%20%22default%22%3B%0A%20%20let%20borderStyle%20%3D%20%22solid%22%3B%0A%20%20let%20borderWidth%20%3D%200%3B%0A%20%20let%20borderColor%20%3D%20%22%23000000%22%3B%0A%20%20let%20backgroundColor%20%3D%20%22transparent%22%3B%0A%0A%20%20const%20resetStyles%20%3D%20()%20%3D%3E%20%7B%0A%20%20%20%20borderRadius%20%3D%200%3B%0A%20%20%20%20rotation%20%3D%200%3B%0A%20%20%20%20offsetY%20%3D%200%3B%0A%20%20%20%20offsetX%20%3D%200%3B%0A%20%20%20%20skewY%20%3D%200%3B%0A%20%20%20%20skewX%20%3D%200%3B%0A%20%20%20%20scaleX%20%3D%20100%3B%0A%20%20%20%20scaleY%20%3D%20100%3B%0A%20%20%20%20transparency%20%3D%200%3B%0A%20%20%20%20sepia%20%3D%200%3B%0A%20%20%20%20blur%20%3D%200%3B%0A%20%20%20%20contrast%20%3D%20100%3B%0A%20%20%20%20saturation%20%3D%20100%3B%0A%20%20%20%20color%20%3D%200%3B%0A%20%20%20%20brightness%20%3D%20100%3B%0A%20%20%20%20invert%20%3D%200%3B%0A%20%20%20%20resizeMode%20%3D%20%22default%22%3B%0A%20%20%20%20borderStyle%20%3D%20%22solid%22%3B%0A%20%20%20%20borderWidth%20%3D%200%3B%0A%20%20%20%20borderColor%20%3D%20%22%23000000%22%3B%0A%20%20%20%20backgroundColor%20%3D%20%22transparent%22%3B%0A%20%20%20%20updateStyle()%3B%0A%20%20%7D%3B%0A%0A%20%20Scratch.vm.runtime.on(%22RUNTIME_DISPOSED%22%2C%20resetStyles)%3B%0A%0A%20%20class%20CanvasEffects%20%7B%0A%20%20%20%20getInfo()%20%7B%0A%20%20%20%20%20%20return%20%7B%0A%20%20%20%20%20%20%20%20id%3A%20%22theshovelcanvaseffects%22%2C%0A%20%20%20%20%20%20%20%20name%3A%20%22Canvas%20Effects%22%2C%0A%20%20%20%20%20%20%20%20blocks%3A%20%5B%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22seteffect%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.COMMAND%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20%22set%20canvas%20%5BEFFECT%5D%20to%20%5BNUMBER%5D%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20EFFECT%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.STRING%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20menu%3A%20%22EFFECTMENU%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20NUMBER%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.NUMBER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22changeEffect%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.COMMAND%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20%22change%20canvas%20%5BEFFECT%5D%20by%20%5BNUMBER%5D%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20EFFECT%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.STRING%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20menu%3A%20%22EFFECTMENU%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20NUMBER%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.NUMBER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%205%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22geteffect%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.REPORTER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20%22get%20canvas%20%5BEFFECT%5D%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20EFFECT%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.STRING%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20menu%3A%20%22EFFECTGETMENU%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22cleareffects%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.COMMAND%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20%22clear%20canvas%20effects%22%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%22---%22%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22setBorder%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.COMMAND%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20%22set%20canvas%20border%20to%20%5BWIDTH%5D%20pixels%20%5BSTYLE%5D%20with%20color%20%5BCOLOR1%5D%20and%20background%20%5BCOLOR2%5D%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20STYLE%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.STRING%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20menu%3A%20%22borderTypes%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20WIDTH%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.NUMBER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%205%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20COLOR1%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.COLOR%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%20%22%23ff0000%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20COLOR2%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.COLOR%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%20%22%230000ff%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22renderscale%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.COMMAND%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20%22set%20canvas%20render%20size%20to%20width%3A%20%5BX%5D%20height%3A%20%5BY%5D%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20X%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.NUMBER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%20100%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20Y%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.NUMBER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%20100%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22setrendermode%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.COMMAND%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20%22set%20canvas%20resize%20rendering%20mode%20%5BEFFECT%5D%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20EFFECT%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.STRING%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20menu%3A%20%22RENDERMODE%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%5D%2C%0A%20%20%20%20%20%20%20%20menus%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20EFFECTMENU%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20acceptReporters%3A%20true%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20items%3A%20this._getMenuItems(false)%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20RENDERMODE%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20acceptReporters%3A%20true%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20items%3A%20%5B%22pixelated%22%2C%20%22default%22%5D%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20EFFECTGETMENU%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20acceptReporters%3A%20true%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20items%3A%20this._getMenuItems(true)%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20borderTypes%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20acceptReporters%3A%20true%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20items%3A%20%5B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%22dotted%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%22dashed%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%22solid%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%22double%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%22groove%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%22ridge%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%22inset%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%22outset%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%22none%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%5D%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%7D%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20_getMenuItems(isGetter)%20%7B%0A%20%20%20%20%20%20return%20%5B%0A%20%20%20%20%20%20%20%20%22blur%22%2C%0A%20%20%20%20%20%20%20%20%22contrast%22%2C%0A%20%20%20%20%20%20%20%20%22saturation%22%2C%0A%20%20%20%20%20%20%20%20%22color%20shift%22%2C%0A%20%20%20%20%20%20%20%20%22brightness%22%2C%0A%20%20%20%20%20%20%20%20%22invert%22%2C%0A%20%20%20%20%20%20%20%20...(isGetter%20%3F%20%5B%22resize%20rendering%20mode%22%5D%20%3A%20%5B%5D)%2C%0A%20%20%20%20%20%20%20%20%22sepia%22%2C%0A%20%20%20%20%20%20%20%20%22transparency%22%2C%0A%20%20%20%20%20%20%20%20...(isGetter%20%3F%20%5B%5D%20%3A%20%5B%22scale%22%5D)%2C%0A%20%20%20%20%20%20%20%20%22scale%20X%22%2C%0A%20%20%20%20%20%20%20%20%22scale%20Y%22%2C%0A%20%20%20%20%20%20%20%20%22skew%20X%22%2C%0A%20%20%20%20%20%20%20%20%22skew%20Y%22%2C%0A%20%20%20%20%20%20%20%20%22offset%20X%22%2C%0A%20%20%20%20%20%20%20%20%22offset%20Y%22%2C%0A%20%20%20%20%20%20%20%20%22rotation%22%2C%0A%20%20%20%20%20%20%20%20%22border%20radius%22%2C%0A%20%20%20%20%20%20%20%20...(isGetter%0A%20%20%20%20%20%20%20%20%20%20%3F%20%5B%22border%20width%22%2C%20%22border%20style%22%2C%20%22border%20color%22%2C%20%22background%22%5D%0A%20%20%20%20%20%20%20%20%20%20%3A%20%5B%5D)%2C%0A%20%20%20%20%20%20%5D%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20geteffect(%7B%20EFFECT%20%7D)%20%7B%0A%20%20%20%20%20%20if%20(EFFECT%20%3D%3D%3D%20%22blur%22)%20%7B%0A%20%20%20%20%20%20%20%20return%20blur%3B%0A%20%20%20%20%20%20%7D%20else%20if%20(EFFECT%20%3D%3D%3D%20%22contrast%22)%20%7B%0A%20%20%20%20%20%20%20%20return%20contrast%3B%0A%20%20%20%20%20%20%7D%20else%20if%20(EFFECT%20%3D%3D%3D%20%22saturation%22)%20%7B%0A%20%20%20%20%20%20%20%20return%20saturation%3B%0A%20%20%20%20%20%20%7D%20else%20if%20(EFFECT%20%3D%3D%3D%20%22color%20shift%22)%20%7B%0A%20%20%20%20%20%20%20%20return%20color%3B%0A%20%20%20%20%20%20%7D%20else%20if%20(EFFECT%20%3D%3D%3D%20%22brightness%22)%20%7B%0A%20%20%20%20%20%20%20%20return%20brightness%3B%0A%20%20%20%20%20%20%7D%20else%20if%20(EFFECT%20%3D%3D%3D%20%22invert%22)%20%7B%0A%20%20%20%20%20%20%20%20return%20invert%3B%0A%20%20%20%20%20%20%7D%20else%20if%20(EFFECT%20%3D%3D%3D%20%22resize%20rendering%20mode%22)%20%7B%0A%20%20%20%20%20%20%20%20return%20resizeMode%3B%0A%20%20%20%20%20%20%7D%20else%20if%20(EFFECT%20%3D%3D%3D%20%22sepia%22)%20%7B%0A%20%20%20%20%20%20%20%20return%20sepia%3B%0A%20%20%20%20%20%20%7D%20else%20if%20(EFFECT%20%3D%3D%3D%20%22transparency%22)%20%7B%0A%20%20%20%20%20%20%20%20return%20transparency%3B%0A%20%20%20%20%20%20%7D%20else%20if%20(EFFECT%20%3D%3D%3D%20%22scale%22)%20%7B%0A%20%20%20%20%20%20%20%20%2F%2F%20old%20extension%20compatibility%0A%20%20%20%20%20%20%20%20return%20scaleX%3B%0A%20%20%20%20%20%20%7D%20else%20if%20(EFFECT%20%3D%3D%3D%20%22scale%20X%22)%20%7B%0A%20%20%20%20%20%20%20%20return%20scaleX%3B%0A%20%20%20%20%20%20%7D%20else%20if%20(EFFECT%20%3D%3D%3D%20%22scale%20Y%22)%20%7B%0A%20%20%20%20%20%20%20%20return%20scaleY%3B%0A%20%20%20%20%20%20%7D%20else%20if%20(EFFECT%20%3D%3D%3D%20%22skew%20X%22)%20%7B%0A%20%20%20%20%20%20%20%20return%20skewX%3B%0A%20%20%20%20%20%20%7D%20else%20if%20(EFFECT%20%3D%3D%3D%20%22skew%20Y%22)%20%7B%0A%20%20%20%20%20%20%20%20return%20skewY%3B%0A%20%20%20%20%20%20%7D%20else%20if%20(EFFECT%20%3D%3D%3D%20%22offset%20X%22)%20%7B%0A%20%20%20%20%20%20%20%20return%20offsetX%3B%0A%20%20%20%20%20%20%7D%20else%20if%20(EFFECT%20%3D%3D%3D%20%22offset%20Y%22)%20%7B%0A%20%20%20%20%20%20%20%20return%20offsetY%3B%0A%20%20%20%20%20%20%7D%20else%20if%20(EFFECT%20%3D%3D%3D%20%22rotation%22)%20%7B%0A%20%20%20%20%20%20%20%20return%20rotation%3B%0A%20%20%20%20%20%20%7D%20else%20if%20(EFFECT%20%3D%3D%3D%20%22border%20radius%22)%20%7B%0A%20%20%20%20%20%20%20%20return%20borderRadius%3B%0A%20%20%20%20%20%20%7D%20else%20if%20(EFFECT%20%3D%3D%3D%20%22border%20width%22)%20%7B%0A%20%20%20%20%20%20%20%20return%20borderWidth%3B%0A%20%20%20%20%20%20%7D%20else%20if%20(EFFECT%20%3D%3D%3D%20%22border%20style%22)%20%7B%0A%20%20%20%20%20%20%20%20return%20borderStyle%3B%0A%20%20%20%20%20%20%7D%20else%20if%20(EFFECT%20%3D%3D%3D%20%22border%20color%22)%20%7B%0A%20%20%20%20%20%20%20%20return%20borderColor%3B%0A%20%20%20%20%20%20%7D%20else%20if%20(EFFECT%20%3D%3D%3D%20%22background%22)%20%7B%0A%20%20%20%20%20%20%20%20return%20backgroundColor%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20return%20%22%22%3B%0A%20%20%20%20%7D%0A%20%20%20%20seteffect(%7B%20EFFECT%2C%20NUMBER%20%7D)%20%7B%0A%20%20%20%20%20%20NUMBER%20%3D%20Scratch.Cast.toNumber(NUMBER)%3B%0A%20%20%20%20%20%20if%20(EFFECT%20%3D%3D%3D%20%22blur%22)%20%7B%0A%20%20%20%20%20%20%20%20blur%20%3D%20NUMBER%3B%0A%20%20%20%20%20%20%7D%20else%20if%20(EFFECT%20%3D%3D%3D%20%22contrast%22)%20%7B%0A%20%20%20%20%20%20%20%20contrast%20%3D%20NUMBER%3B%0A%20%20%20%20%20%20%7D%20else%20if%20(EFFECT%20%3D%3D%3D%20%22saturation%22)%20%7B%0A%20%20%20%20%20%20%20%20saturation%20%3D%20NUMBER%3B%0A%20%20%20%20%20%20%7D%20else%20if%20(EFFECT%20%3D%3D%3D%20%22color%20shift%22)%20%7B%0A%20%20%20%20%20%20%20%20color%20%3D%20NUMBER%3B%0A%20%20%20%20%20%20%7D%20else%20if%20(EFFECT%20%3D%3D%3D%20%22brightness%22)%20%7B%0A%20%20%20%20%20%20%20%20brightness%20%3D%20NUMBER%3B%0A%20%20%20%20%20%20%7D%20else%20if%20(EFFECT%20%3D%3D%3D%20%22invert%22)%20%7B%0A%20%20%20%20%20%20%20%20invert%20%3D%20NUMBER%3B%0A%20%20%20%20%20%20%7D%20else%20if%20(EFFECT%20%3D%3D%3D%20%22sepia%22)%20%7B%0A%20%20%20%20%20%20%20%20sepia%20%3D%20NUMBER%3B%0A%20%20%20%20%20%20%7D%20else%20if%20(EFFECT%20%3D%3D%3D%20%22transparency%22)%20%7B%0A%20%20%20%20%20%20%20%20transparency%20%3D%20NUMBER%3B%0A%20%20%20%20%20%20%7D%20else%20if%20(EFFECT%20%3D%3D%3D%20%22scale%22)%20%7B%0A%20%20%20%20%20%20%20%20scaleX%20%3D%20NUMBER%3B%0A%20%20%20%20%20%20%20%20scaleY%20%3D%20NUMBER%3B%0A%20%20%20%20%20%20%7D%20else%20if%20(EFFECT%20%3D%3D%3D%20%22scale%20X%22)%20%7B%0A%20%20%20%20%20%20%20%20scaleX%20%3D%20NUMBER%3B%0A%20%20%20%20%20%20%7D%20else%20if%20(EFFECT%20%3D%3D%3D%20%22scale%20Y%22)%20%7B%0A%20%20%20%20%20%20%20%20scaleY%20%3D%20NUMBER%3B%0A%20%20%20%20%20%20%7D%20else%20if%20(EFFECT%20%3D%3D%3D%20%22skew%20X%22)%20%7B%0A%20%20%20%20%20%20%20%20skewX%20%3D%20NUMBER%3B%0A%20%20%20%20%20%20%7D%20else%20if%20(EFFECT%20%3D%3D%3D%20%22skew%20Y%22)%20%7B%0A%20%20%20%20%20%20%20%20skewY%20%3D%20NUMBER%3B%0A%20%20%20%20%20%20%7D%20else%20if%20(EFFECT%20%3D%3D%3D%20%22offset%20X%22)%20%7B%0A%20%20%20%20%20%20%20%20offsetX%20%3D%20NUMBER%3B%0A%20%20%20%20%20%20%7D%20else%20if%20(EFFECT%20%3D%3D%3D%20%22offset%20Y%22)%20%7B%0A%20%20%20%20%20%20%20%20offsetY%20%3D%20NUMBER%3B%0A%20%20%20%20%20%20%7D%20else%20if%20(EFFECT%20%3D%3D%3D%20%22rotation%22)%20%7B%0A%20%20%20%20%20%20%20%20rotation%20%3D%20NUMBER%3B%0A%20%20%20%20%20%20%7D%20else%20if%20(EFFECT%20%3D%3D%3D%20%22border%20radius%22)%20%7B%0A%20%20%20%20%20%20%20%20borderRadius%20%3D%20NUMBER%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20updateStyle()%3B%0A%20%20%20%20%7D%0A%20%20%20%20changeEffect(args)%20%7B%0A%20%20%20%20%20%20%2F%2F%20Scale%20needs%20some%20special%20treatment%20to%20change%20x%20%26%20y%20separately%0A%20%20%20%20%20%20if%20(args.EFFECT%20%3D%3D%3D%20%22scale%22)%20%7B%0A%20%20%20%20%20%20%20%20scaleX%20%3D%20scaleX%20%2B%20Scratch.Cast.toNumber(args.NUMBER)%3B%0A%20%20%20%20%20%20%20%20scaleY%20%3D%20scaleY%20%2B%20Scratch.Cast.toNumber(args.NUMBER)%3B%0A%20%20%20%20%20%20%20%20updateStyle()%3B%0A%20%20%20%20%20%20%20%20return%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%2F%2F%20Everything%20else%20is%20really%20generic%0A%20%20%20%20%20%20const%20currentEffect%20%3D%20Scratch.Cast.toNumber(this.geteffect(args))%3B%0A%20%20%20%20%20%20const%20newValue%20%3D%20Scratch.Cast.toNumber(args.NUMBER)%20%2B%20currentEffect%3B%0A%20%20%20%20%20%20this.seteffect(%7B%0A%20%20%20%20%20%20%20%20EFFECT%3A%20args.EFFECT%2C%0A%20%20%20%20%20%20%20%20NUMBER%3A%20newValue%2C%0A%20%20%20%20%20%20%7D)%3B%0A%20%20%20%20%7D%0A%20%20%20%20cleareffects()%20%7B%0A%20%20%20%20%20%20resetStyles()%3B%0A%20%20%20%20%7D%0A%20%20%20%20setrendermode(%7B%20EFFECT%20%7D)%20%7B%0A%20%20%20%20%20%20resizeMode%20%3D%20EFFECT%3B%0A%20%20%20%20%20%20updateStyle()%3B%0A%20%20%20%20%7D%0A%20%20%20%20renderscale(%7B%20X%2C%20Y%20%7D)%20%7B%0A%20%20%20%20%20%20Scratch.vm.renderer.resize(X%2C%20Y)%3B%0A%20%20%20%20%7D%0A%20%20%20%20setBorder(args)%20%7B%0A%20%20%20%20%20%20borderWidth%20%3D%20Scratch.Cast.toNumber(args.WIDTH)%3B%0A%20%20%20%20%20%20borderStyle%20%3D%20Scratch.Cast.toString(args.STYLE).replace(%2F%5B%5Ea-z%5D%2Fgi%2C%20%22%22)%3B%0A%20%20%20%20%20%20borderColor%20%3D%20Scratch.Cast.toString(args.COLOR1).replace(%0A%20%20%20%20%20%20%20%20%2F%5B%5E%230-9a-z%5D%2Fgi%2C%0A%20%20%20%20%20%20%20%20%22%22%0A%20%20%20%20%20%20)%3B%0A%20%20%20%20%20%20backgroundColor%20%3D%20Scratch.Cast.toString(args.COLOR2).replace(%0A%20%20%20%20%20%20%20%20%2F%5B%5E%230-9a-z%5D%2Fgi%2C%0A%20%20%20%20%20%20%20%20%22%22%0A%20%20%20%20%20%20)%3B%0A%20%20%20%20%20%20updateStyle()%3B%0A%20%20%20%20%7D%0A%20%20%7D%0A%20%20Scratch.extensions.register(new%20CanvasEffects())%3B%0A%7D)(Scratch)%3B%0A%20%7D)(Scratch)%3B","data:text/javascript;,(function(Scratch)%20%7B%20%2F%2F%20Name%3A%20Graphics%202D%0A%2F%2F%20ID%3A%20nonameawagraph%0A%2F%2F%20Description%3A%20Blocks%20to%20compute%20lengths%2C%20angles%2C%20and%20areas%20in%20two%20dimensions.%0A%2F%2F%20By%3A%20NOname-awa%0A%2F%2F%20License%3A%20MIT%0A%0A%2F*%20generated%20l10n%20code%20*%2FScratch.translate.setup(%7B%22de%22%3A%7B%22name%22%3A%22Grafiken%202D%22%7D%2C%22es%22%3A%7B%22area%22%3A%22%C3%A1rea%22%2C%22diameter%22%3A%22di%C3%A1metro%22%2C%22name%22%3A%22Gr%C3%A1ficos%202D%22%2C%22radius%22%3A%22radio%22%7D%2C%22fi%22%3A%7B%22name%22%3A%222D-grafiikka%22%7D%2C%22it%22%3A%7B%22circumference%22%3A%22circonferenza%22%2C%22diameter%22%3A%22diametro%22%2C%22graph%22%3A%22%5BCS%5D%20del%20grafo%20%5Bgraph%5D%22%2C%22line_section%22%3A%22distanza%20tra%20(%5Bx1%5D%2C%5By1%5D)%20e%20(%5Bx2%5D%2C%5By2%5D)%22%2C%22name%22%3A%22Grafica%202D%22%2C%22pi%22%3A%22pi%20greco%22%2C%22quadrilateral%22%3A%22%5BCS%5D%20del%20quadrangolo%20(%5Bx1%5D%2C%5By1%5D)%20(%5Bx2%5D%2C%5By2%5D)%20(%5Bx3%5D%2C%5By3%5D)%20(%5Bx4%5D%2C%5By4%5D)%22%2C%22radius%22%3A%22raggio%22%2C%22ray_direction%22%3A%22direzione%20da%20(%5Bx1%5D%2C%5By1%5D)%20a%20(%5Bx2%5D%2C%5By2%5D)%22%2C%22round%22%3A%22%5BCS%5D%20del%20cerchio%20%5Brd%5D%5Ba%5D%22%2C%22triangle%22%3A%22%5BCS%5D%20del%20triangolo%20(%5Bx1%5D%2C%5By1%5D)%20(%5Bx2%5D%2C%5By2%5D)%20(%5Bx3%5D%2C%5By3%5D)%22%2C%22triangle_s%22%3A%22area%20del%20triangolo%20%5Bs1%5D%20%5Bs2%5D%20%5Bs3%5D%22%7D%2C%22ja%22%3A%7B%22name%22%3A%22%E3%82%B0%E3%83%A9%E3%83%95%E3%82%A3%E3%83%83%E3%82%AF2D%22%7D%2C%22nb%22%3A%7B%22area%22%3A%22omr%C3%A5de%22%2C%22circumference%22%3A%22omkrets%22%2C%22graph%22%3A%22graf%20%5Bgraph%5D%20's%20%5BCS%5D%22%2C%22line_section%22%3A%22lengde%20fra%20(%5Bx1%5D%2C%5By1%5D)%20til%20(%5Bx2%5D%2C%5By2%5D)%22%2C%22name%22%3A%22Grafikk%202D%22%2C%22quadrilateral%22%3A%22firkant%20(%5Bx1%5D%2C%5By1%5D)%20(%5Bx2%5D%2C%5By2%5D)%20(%5Bx3%5D%2C%5By3%5D)%20(%5Bx4%5D%2C%5By4%5D)%20's%20%5BCS%5D%22%2C%22ray_direction%22%3A%22retning%20av%20(%5Bx1%5D%2C%5By1%5D)%20til%20(%5Bx2%5D%2C%5By2%5D)%22%2C%22round%22%3A%22sirkel%20av%20%5Brd%5D%5Ba%5D's%20%5BCS%5D%22%2C%22triangle%22%3A%22trekant%20(%5Bx1%5D%2C%5By1%5D)%20(%5Bx2%5D%2C%5By2%5D)%20(%5Bx3%5D%2C%5By3%5D)%20's%20%5BCS%5D%22%2C%22triangle_s%22%3A%22trekant%20%5Bs1%5D%20%5Bs2%5D%20%5Bs3%5D%20's%20areal%22%7D%2C%22nl%22%3A%7B%22area%22%3A%22oppervlakte%22%2C%22circumference%22%3A%22omtrek%22%2C%22graph%22%3A%22%5BCS%5D%20van%20grafiek%20%5Bgraph%5D%22%2C%22line_section%22%3A%22lengte%20van%20(%5Bx1%5D%2C%5By1%5D)%20naar%20(%5Bx2%5D%2C%5By2%5D)%22%2C%22name%22%3A%222D-trigonometrie%22%2C%22quadrilateral%22%3A%22%5BCS%5D%20van%20vierhoek%20(%5Bx1%5D%2C%5By1%5D)%20(%5Bx2%5D%2C%5By2%5D)%20(%5Bx3%5D%2C%5By3%5D)%20(%5Bx4%5D%2C%5By4%5D)%22%2C%22radius%22%3A%22straal%22%2C%22ray_direction%22%3A%22richting%20van%20(%5Bx1%5D%2C%5By1%5D)%20naar%20(%5Bx2%5D%2C%5By2%5D)%22%2C%22round%22%3A%22%5BCS%5D%20van%20cirkel%20met%20%5Brd%5D%20%5Ba%5D%22%2C%22triangle%22%3A%22%5BCS%5D%20van%20driehoek%20(%5Bx1%5D%2C%5By1%5D)%20(%5Bx2%5D%2C%5By2%5D)%20(%5Bx3%5D%2C%5By3%5D)%22%2C%22triangle_s%22%3A%22oppervlakte%20van%20driehoek%20%5Bs1%5D%20%5Bs2%5D%20%5Bs3%5D%22%7D%2C%22ru%22%3A%7B%22area%22%3A%22%D0%BF%D0%BB%D0%BE%D1%89%D0%B0%D0%B4%D1%8C%22%2C%22circumference%22%3A%22%D0%B4%D0%BB%D0%B8%D0%BD%D0%B0%22%2C%22diameter%22%3A%22%D0%B4%D0%B8%D0%B0%D0%BC%D0%B5%D1%82%D1%80%22%2C%22graph%22%3A%22%5BCS%5D%20%D0%B3%D1%80%D0%B0%D1%84%D0%B0%20%5Bgraph%5D%22%2C%22line_section%22%3A%22%D0%B4%D0%BB%D0%B8%D0%BD%D0%B0%20%D0%BE%D1%82%20(%5Bx1%5D%2C%5By1%5D)%20%D0%B4%D0%BE%20(%5Bx2%5D%2C%5By2%5D)%22%2C%22name%22%3A%22%D0%93%D1%80%D0%B0%D1%84%D0%B8%D0%BA%D0%B0%202D%22%2C%22pi%22%3A%22%D0%BF%D0%B8%22%2C%22quadrilateral%22%3A%22%5BCS%5D%20%D1%87%D0%B5%D1%82%D1%8B%D1%80%D0%B5%D1%85%D1%83%D0%B3%D0%BE%D0%BB%D1%8C%D0%BD%D0%B8%D0%BA%D0%B0%20(%5Bx1%5D%2C%5By1%5D)%20(%5Bx2%5D%2C%5By2%5D)%20(%5Bx3%5D%2C%5By3%5D)%20(%5Bx4%5D%2C%5By4%5D)%22%2C%22radius%22%3A%22%D1%80%D0%B0%D0%B4%D0%B8%D1%83%D1%81%22%2C%22ray_direction%22%3A%22%D0%BD%D0%B0%D0%BF%D1%80%D0%B0%D0%B2%D0%BB%D0%B5%D0%BD%D0%B8%D0%B5%20%D0%BE%D1%82%20(%5Bx1%5D%2C%5By1%5D)%20%D0%BA%20(%5Bx2%5D%2C%5By2%5D)%22%2C%22round%22%3A%22%5BCS%5D%20%D0%BA%D1%80%D1%83%D0%B3%D0%B0%20%D1%81%20%5Brd%5D%20%D0%BE%D0%BC%20%5Ba%5D%22%2C%22triangle%22%3A%22%5BCS%5D%20%D1%82%D1%80%D0%B5%D1%83%D0%B3%D0%BE%D0%BB%D1%8C%D0%BD%D0%B8%D0%BA%D0%B0%20(%5Bx1%5D%2C%5By1%5D)%20(%5Bx2%5D%2C%5By2%5D)%20(%5Bx3%5D%2C%5By3%5D)%22%2C%22triangle_s%22%3A%22%D0%BF%D0%BB%D0%BE%D1%89%D0%B0%D0%B4%D1%8C%20%D1%82%D1%80%D0%B5%D1%83%D0%B3%D0%BE%D0%BB%D1%8C%D0%BD%D0%B8%D0%BA%D0%B0%20%5Bs1%5D%20%5Bs2%5D%20%5Bs3%5D%22%7D%2C%22tr%22%3A%7B%22name%22%3A%22Grafik%202D%22%7D%2C%22zh-cn%22%3A%7B%22area%22%3A%22%E9%9D%A2%E7%A7%AF%22%2C%22circumference%22%3A%22%E5%91%A8%E9%95%BF%22%2C%22diameter%22%3A%22%E7%9B%B4%E5%BE%84%22%2C%22graph%22%3A%22%E5%9B%BE%E5%BD%A2%20%5Bgraph%5D%20%E7%9A%84%20%5BCS%5D%22%2C%22line_section%22%3A%22%EF%BC%88%5Bx1%5D%2C%5By1%5D%EF%BC%89%E5%88%B0%EF%BC%88%5Bx2%5D%2C%5By2%5D%EF%BC%89%E7%9A%84%E9%95%BF%E5%BA%A6%22%2C%22name%22%3A%22%E5%9B%BE%E5%BD%A2%202D%22%2C%22pi%22%3A%22%CF%80%22%2C%22quadrilateral%22%3A%22%E7%9F%A9%E5%BD%A2%EF%BC%88%5Bx1%5D%2C%5By1%5D%EF%BC%89%EF%BC%88%5Bx2%5D%2C%5By2%5D%EF%BC%89%EF%BC%88%5Bx3%5D%2C%5By3%5D%EF%BC%89%EF%BC%88%5Bx4%5D%2C%5By4%5D%EF%BC%89%E7%9A%84%20%5BCS%5D%22%2C%22radius%22%3A%22%E5%8D%8A%E5%BE%84%22%2C%22ray_direction%22%3A%22%EF%BC%88%5Bx1%5D%2C%5By1%5D%EF%BC%89%E7%9A%84%EF%BC%88%5Bx2%5D%2C%5By2%5D%EF%BC%89%E7%9A%84%E8%B7%9D%E7%A6%BB%22%2C%22round%22%3A%22%5Brd%5D%20%E4%B8%BA%20%5Ba%5D%20%E7%9A%84%E5%9C%86%E7%9A%84%20%5BCS%5D%22%2C%22triangle%22%3A%22%E4%B8%89%E8%A7%92%E5%BD%A2%EF%BC%88%5Bx1%5D%2C%5By1%5D%EF%BC%89%EF%BC%88%5Bx2%5D%2C%5By2%5D%EF%BC%89%EF%BC%88%5Bx3%5D%2C%5By3%5D%EF%BC%89%E7%9A%84%20%5BCS%5D%22%2C%22triangle_s%22%3A%22%E4%B8%89%E8%A7%92%E5%BD%A2%20%5Bs1%5D%20%5Bs2%5D%20%5Bs3%5D%20%E7%9A%84%E9%9D%A2%E7%A7%AF%22%7D%7D)%3B%2F*%20end%20generated%20l10n%20code%20*%2F(function%20(Scratch)%20%7B%0A%20%20%22use%20strict%22%3B%0A%20%20class%20graph%20%7B%0A%20%20%20%20getInfo()%20%7B%0A%20%20%20%20%20%20return%20%7B%0A%20%20%20%20%20%20%20%20id%3A%20%22nonameawagraph%22%2C%0A%20%20%20%20%20%20%20%20name%3A%20Scratch.translate(%7B%20id%3A%20%22name%22%2C%20default%3A%20%22Graphics%202D%22%20%7D)%2C%0A%20%20%20%20%20%20%20%20color1%3A%20%22%23ff976c%22%2C%0A%20%20%20%20%20%20%20%20color2%3A%20%22%23cc7956%22%2C%0A%20%20%20%20%20%20%20%20color3%3A%20%22%23e58861%22%2C%0A%20%20%20%20%20%20%20%20blocks%3A%20%5B%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22line_section%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.REPORTER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20Scratch.translate(%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20id%3A%20%22line_section%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20default%3A%20%22length%20from%20(%5Bx1%5D%2C%5By1%5D)%20to%20(%5Bx2%5D%2C%5By2%5D)%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20x1%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.NUMBER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%20%22-100%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20y1%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.NUMBER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%20%220%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20x2%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.NUMBER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%20%220%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20y2%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.NUMBER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%20%220%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22ray_direction%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.REPORTER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20Scratch.translate(%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20id%3A%20%22ray_direction%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20default%3A%20%22direction%20of%20(%5Bx1%5D%2C%5By1%5D)%20to%20(%5Bx2%5D%2C%5By2%5D)%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20hideFromPalette%3A%20true%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20x1%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.NUMBER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%20%220%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20y1%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.NUMBER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%20%220%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20x2%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.NUMBER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%20%22100%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20y2%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.NUMBER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%20%220%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22ray_direction2%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.REPORTER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20Scratch.translate(%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20id%3A%20%22ray_direction%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20default%3A%20%22direction%20of%20(%5Bx1%5D%2C%5By1%5D)%20to%20(%5Bx2%5D%2C%5By2%5D)%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20x1%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.NUMBER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%20%220%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20y1%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.NUMBER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%20%220%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20x2%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.NUMBER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%20%22100%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20y2%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.NUMBER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%20%220%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22vertical%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.BOOLEAN%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20%22%5Ba%5D%20%E2%8A%A5%20%5Bb%5D%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20a%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.ANGLE%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%20%220%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20b%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.ANGLE%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%20%2290%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%22---%22%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22triangle%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.REPORTER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20Scratch.translate(%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20id%3A%20%22triangle%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20default%3A%20%22triangle%20(%5Bx1%5D%2C%5By1%5D)%20(%5Bx2%5D%2C%5By2%5D)%20(%5Bx3%5D%2C%5By3%5D)%20's%20%5BCS%5D%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20x1%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.NUMBER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%20%220%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20y1%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.NUMBER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%20%2210%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20x2%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.NUMBER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%20%2210%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20y2%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.NUMBER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%20%2210%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20x3%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.NUMBER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%20%2210%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20y3%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.NUMBER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%20%220%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20CS%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.STRING%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20menu%3A%20%22cs%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22triangle_s%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.REPORTER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20Scratch.translate(%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20id%3A%20%22triangle_s%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20default%3A%20%22triangle%20%5Bs1%5D%20%5Bs2%5D%20%5Bs3%5D%20's%20area%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20s1%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.NUMBER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%20%223%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20s2%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.NUMBER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%20%224%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20s3%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.NUMBER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%20%225%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22quadrilateral%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.REPORTER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20Scratch.translate(%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20id%3A%20%22quadrilateral%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20default%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%22quadrangle%20(%5Bx1%5D%2C%5By1%5D)%20(%5Bx2%5D%2C%5By2%5D)%20(%5Bx3%5D%2C%5By3%5D)%20(%5Bx4%5D%2C%5By4%5D)%20's%20%5BCS%5D%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20x1%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.NUMBER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%20%220%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20y1%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.NUMBER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%20%2210%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20x2%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.NUMBER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%20%2210%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20y2%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.NUMBER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%20%2210%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20x3%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.NUMBER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%20%2210%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20y3%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.NUMBER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%20%220%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20x4%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.NUMBER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%20%220%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20y4%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.NUMBER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%20%220%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20CS%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.STRING%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20menu%3A%20%22cs%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22graph%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.REPORTER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20Scratch.translate(%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20id%3A%20%22graph%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20default%3A%20%22graph%20%5Bgraph%5D%20's%20%5BCS%5D%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20graph%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.STRING%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%20%22%5B%5B0%2C0%5D%2C%20%5B0%2C2%5D%2C%20%5B2%2C4%5D%2C%20%5B4%2C2%5D%2C%20%5B4%2C0%5D%5D%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20CS%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.STRING%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20menu%3A%20%22cs%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%22---%22%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22round%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.REPORTER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20Scratch.translate(%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20id%3A%20%22round%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20default%3A%20%22circle%20of%20%5Brd%5D%5Ba%5D's%20%5BCS%5D%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20rd%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.STRING%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20menu%3A%20%22rd%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20a%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.NUMBER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%20%2210%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20CS%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.STRING%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20menu%3A%20%22cs%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%22---%22%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22pi%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20disableMonitor%3A%20true%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.REPORTER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20Scratch.translate(%7B%20id%3A%20%22pi%22%2C%20default%3A%20%22pi%22%20%7D)%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%5D%2C%0A%20%20%20%20%20%20%20%20menus%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20rd%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20acceptReporters%3A%20true%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20items%3A%20%5B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20Scratch.translate(%7B%20id%3A%20%22radius%22%2C%20default%3A%20%22radius%22%20%7D)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20value%3A%20%22r%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20Scratch.translate(%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20id%3A%20%22diameter%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20default%3A%20%22diameter%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20value%3A%20%22d%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%5D%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20cs%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20acceptReporters%3A%20true%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20items%3A%20%5B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20Scratch.translate(%7B%20id%3A%20%22area%22%2C%20default%3A%20%22area%22%20%7D)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20value%3A%20%22s%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20Scratch.translate(%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20id%3A%20%22circumference%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20default%3A%20%22circumference%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20value%3A%20%22c%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%5D%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%7D%3B%0A%20%20%20%20%7D%0A%20%20%20%20line_section(args)%20%7B%0A%20%20%20%20%20%20return%20Math.sqrt(%0A%20%20%20%20%20%20%20%20Math.pow(args.x1%20-%20args.x2%2C%202)%20%2B%20Math.pow(args.y1%20-%20args.y2%2C%202)%0A%20%20%20%20%20%20)%3B%0A%20%20%20%20%7D%0A%20%20%20%20ray_direction(args)%20%7B%0A%20%20%20%20%20%20%2F%2F%20Added%20by%20NexusKitten%0A%20%20%20%20%20%20%2F%2F%20%E7%94%B1%20NexusKitten%20%E6%B7%BB%E5%8A%A0%0A%20%20%20%20%20%20const%20dx%20%3D%0A%20%20%20%20%20%20%20%20Scratch.Cast.toNumber(args.x2)%20-%20Scratch.Cast.toNumber(args.x1)%3B%0A%20%20%20%20%20%20const%20dy%20%3D%0A%20%20%20%20%20%20%20%20Scratch.Cast.toNumber(args.y2)%20-%20Scratch.Cast.toNumber(args.y1)%3B%0A%20%20%20%20%20%20if%20(dx%20%3D%3D%3D%200%20%26%26%20dy%20%3D%3D%3D%200)%20%7B%0A%20%20%20%20%20%20%20%20return%200%3B%0A%20%20%20%20%20%20%7D%20else%20if%20(dy%20%3C%200)%20%7B%0A%20%20%20%20%20%20%20%20return%20(180%20%2F%20Math.PI)%20*%20Math.atan(dx%20%2F%20dy)%20%2B%20180%3B%0A%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20return%20(180%20%2F%20Math.PI)%20*%20Math.atan(dx%20%2F%20dy)%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%20%20%20%20ray_direction2(args)%20%7B%0A%20%20%20%20%20%20const%20dx%20%3D%0A%20%20%20%20%20%20%20%20Scratch.Cast.toNumber(args.x2)%20-%20Scratch.Cast.toNumber(args.x1)%3B%0A%20%20%20%20%20%20const%20dy%20%3D%0A%20%20%20%20%20%20%20%20Scratch.Cast.toNumber(args.y2)%20-%20Scratch.Cast.toNumber(args.y1)%3B%0A%20%20%20%20%20%20return%20(Math.atan2(dx%2C%20dy)%20*%20180)%20%2F%20Math.PI%3B%0A%20%20%20%20%7D%0A%20%20%20%20vertical(args)%20%7B%0A%20%20%20%20%20%20if%20(isNaN(args.a)%20%7C%7C%20isNaN(args.b))%20%7B%0A%20%20%20%20%20%20%20%20return%20false%3B%0A%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20return%20(args.a%20-%20(args.b%20-%2090))%20%25%20180%20%3D%3D%200%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%20%20%20%20triangle(args)%20%7B%0A%20%20%20%20%20%20if%20(args.CS%20%3D%3D%20%22s%22)%20%7B%0A%20%20%20%20%20%20%20%20let%20points%20%3D%20%5B%0A%20%20%20%20%20%20%20%20%20%20%5Bargs.x1%2C%20args.y1%5D%2C%0A%20%20%20%20%20%20%20%20%20%20%5Bargs.x2%2C%20args.y2%5D%2C%0A%20%20%20%20%20%20%20%20%20%20%5Bargs.x3%2C%20args.y3%5D%2C%0A%20%20%20%20%20%20%20%20%5D%3B%0A%20%20%20%20%20%20%20%20let%20area%20%3D%200%3B%0A%20%20%20%20%20%20%20%20let%20n%20%3D%20points.length%3B%0A%20%20%20%20%20%20%20%20for%20(let%20i%20%3D%200%3B%20i%20%3C%20n%3B%20i%2B%2B)%20%7B%0A%20%20%20%20%20%20%20%20%20%20let%20x1%20%3D%20points%5Bi%5D%5B0%5D%3B%0A%20%20%20%20%20%20%20%20%20%20let%20y1%20%3D%20points%5Bi%5D%5B1%5D%3B%0A%20%20%20%20%20%20%20%20%20%20let%20x2%20%3D%20points%5B(i%20%2B%201)%20%25%20n%5D%5B0%5D%3B%0A%20%20%20%20%20%20%20%20%20%20let%20y2%20%3D%20points%5B(i%20%2B%201)%20%25%20n%5D%5B1%5D%3B%0A%20%20%20%20%20%20%20%20%20%20area%20%2B%3D%20x1%20*%20y2%3B%0A%20%20%20%20%20%20%20%20%20%20area%20-%3D%20x2%20*%20y1%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20area%20%3D%20Math.abs(area)%20%2F%202%3B%0A%20%20%20%20%20%20%20%20return%20area%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20if%20(args.CS%20%3D%3D%20%22c%22)%20%7B%0A%20%20%20%20%20%20%20%20let%20i%20%3D%200%3B%0A%20%20%20%20%20%20%20%20i%20%2B%3D%20Math.sqrt(%0A%20%20%20%20%20%20%20%20%20%20Math.pow(args.x1%20-%20args.x2%2C%202)%20%2B%20Math.pow(args.y1%20-%20args.y2%2C%202)%0A%20%20%20%20%20%20%20%20)%3B%0A%20%20%20%20%20%20%20%20i%20%2B%3D%20Math.sqrt(%0A%20%20%20%20%20%20%20%20%20%20Math.pow(args.x2%20-%20args.x3%2C%202)%20%2B%20Math.pow(args.y2%20-%20args.y3%2C%202)%0A%20%20%20%20%20%20%20%20)%3B%0A%20%20%20%20%20%20%20%20i%20%2B%3D%20Math.sqrt(%0A%20%20%20%20%20%20%20%20%20%20Math.pow(args.x3%20-%20args.x1%2C%202)%20%2B%20Math.pow(args.y3%20-%20args.y1%2C%202)%0A%20%20%20%20%20%20%20%20)%3B%0A%20%20%20%20%20%20%20%20return%20i%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20return%200%3B%0A%20%20%20%20%7D%0A%20%20%20%20triangle_s(args)%20%7B%0A%20%20%20%20%20%20const%20s%20%3D%20(args.s1%20%2B%20args.s2%20%2B%20args.s3)%20%2F%202%3B%0A%20%20%20%20%20%20const%20area%20%3D%20Math.sqrt(s%20*%20(s%20-%20args.s1)%20*%20(s%20-%20args.s2)%20*%20(s%20-%20args.s3))%3B%0A%20%20%20%20%20%20return%20area%3B%0A%20%20%20%20%7D%0A%20%20%20%20quadrilateral(args)%20%7B%0A%20%20%20%20%20%20if%20(args.CS%20%3D%3D%20%22s%22)%20%7B%0A%20%20%20%20%20%20%20%20let%20points%20%3D%20%5B%0A%20%20%20%20%20%20%20%20%20%20%5Bargs.x1%2C%20args.y1%5D%2C%0A%20%20%20%20%20%20%20%20%20%20%5Bargs.x2%2C%20args.y2%5D%2C%0A%20%20%20%20%20%20%20%20%20%20%5Bargs.x3%2C%20args.y3%5D%2C%0A%20%20%20%20%20%20%20%20%20%20%5Bargs.x4%2C%20args.y4%5D%2C%0A%20%20%20%20%20%20%20%20%5D%3B%0A%20%20%20%20%20%20%20%20let%20area%20%3D%200%3B%0A%20%20%20%20%20%20%20%20let%20n%20%3D%20points.length%3B%0A%20%20%20%20%20%20%20%20for%20(let%20i%20%3D%200%3B%20i%20%3C%20n%3B%20i%2B%2B)%20%7B%0A%20%20%20%20%20%20%20%20%20%20let%20x1%20%3D%20points%5Bi%5D%5B0%5D%3B%0A%20%20%20%20%20%20%20%20%20%20let%20y1%20%3D%20points%5Bi%5D%5B1%5D%3B%0A%20%20%20%20%20%20%20%20%20%20let%20x2%20%3D%20points%5B(i%20%2B%201)%20%25%20n%5D%5B0%5D%3B%0A%20%20%20%20%20%20%20%20%20%20let%20y2%20%3D%20points%5B(i%20%2B%201)%20%25%20n%5D%5B1%5D%3B%0A%20%20%20%20%20%20%20%20%20%20area%20%2B%3D%20x1%20*%20y2%3B%0A%20%20%20%20%20%20%20%20%20%20area%20-%3D%20x2%20*%20y1%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20area%20%3D%20Math.abs(area)%20%2F%202%3B%0A%20%20%20%20%20%20%20%20return%20area%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20if%20(args.CS%20%3D%3D%20%22c%22)%20%7B%0A%20%20%20%20%20%20%20%20let%20i%20%3D%200%3B%0A%20%20%20%20%20%20%20%20i%20%2B%3D%20Math.sqrt(%0A%20%20%20%20%20%20%20%20%20%20Math.pow(args.x1%20-%20args.x2%2C%202)%20%2B%20Math.pow(args.y1%20-%20args.y2%2C%202)%0A%20%20%20%20%20%20%20%20)%3B%0A%20%20%20%20%20%20%20%20i%20%2B%3D%20Math.sqrt(%0A%20%20%20%20%20%20%20%20%20%20Math.pow(args.x2%20-%20args.x3%2C%202)%20%2B%20Math.pow(args.y2%20-%20args.y3%2C%202)%0A%20%20%20%20%20%20%20%20)%3B%0A%20%20%20%20%20%20%20%20i%20%2B%3D%20Math.sqrt(%0A%20%20%20%20%20%20%20%20%20%20Math.pow(args.x3%20-%20args.x4%2C%202)%20%2B%20Math.pow(args.y3%20-%20args.y4%2C%202)%0A%20%20%20%20%20%20%20%20)%3B%0A%20%20%20%20%20%20%20%20i%20%2B%3D%20Math.sqrt(%0A%20%20%20%20%20%20%20%20%20%20Math.pow(args.x4%20-%20args.x1%2C%202)%20%2B%20Math.pow(args.y4%20-%20args.y1%2C%202)%0A%20%20%20%20%20%20%20%20)%3B%0A%20%20%20%20%20%20%20%20return%20i%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20return%200%3B%0A%20%20%20%20%7D%0A%20%20%20%20graph(args)%20%7B%0A%20%20%20%20%20%20let%20points%3B%0A%20%20%20%20%20%20try%20%7B%0A%20%20%20%20%20%20%20%20points%20%3D%20JSON.parse(args.graph)%3B%0A%20%20%20%20%20%20%7D%20catch%20(error)%20%7B%0A%20%20%20%20%20%20%20%20return%200%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20if%20(!Array.isArray(points))%20%7B%0A%20%20%20%20%20%20%20%20return%200%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20let%20n%20%3D%20points.length%3B%0A%20%20%20%20%20%20if%20(args.CS%20%3D%3D%20%22s%22)%20%7B%0A%20%20%20%20%20%20%20%20let%20area%20%3D%200%3B%0A%20%20%20%20%20%20%20%20for%20(let%20i%20%3D%200%3B%20i%20%3C%20n%3B%20i%2B%2B)%20%7B%0A%20%20%20%20%20%20%20%20%20%20let%20x1%20%3D%20points%5Bi%5D%5B0%5D%3B%0A%20%20%20%20%20%20%20%20%20%20let%20y1%20%3D%20points%5Bi%5D%5B1%5D%3B%0A%20%20%20%20%20%20%20%20%20%20let%20x2%20%3D%20points%5B(i%20%2B%201)%20%25%20n%5D%5B0%5D%3B%0A%20%20%20%20%20%20%20%20%20%20let%20y2%20%3D%20points%5B(i%20%2B%201)%20%25%20n%5D%5B1%5D%3B%0A%20%20%20%20%20%20%20%20%20%20area%20%2B%3D%20x1%20*%20y2%3B%0A%20%20%20%20%20%20%20%20%20%20area%20-%3D%20x2%20*%20y1%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20area%20%3D%20Math.abs(area)%20%2F%202%3B%0A%20%20%20%20%20%20%20%20return%20area%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20if%20(args.CS%20%3D%3D%20%22c%22)%20%7B%0A%20%20%20%20%20%20%20%20let%20x1%2C%20x2%2C%20y1%2C%20y2%3B%0A%20%20%20%20%20%20%20%20let%20j%20%3D%200%3B%0A%20%20%20%20%20%20%20%20j%20%3D%200%3B%0A%20%20%20%20%20%20%20%20var%20i_end%20%3D%20n%20-%201%3B%0A%20%20%20%20%20%20%20%20var%20i_inc%20%3D%201%3B%0A%20%20%20%20%20%20%20%20if%20(0%20%3E%20i_end)%20%7B%0A%20%20%20%20%20%20%20%20%20%20i_inc%20%3D%20-i_inc%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20for%20(let%20i%20%3D%200%3B%20i_inc%20%3E%3D%200%20%3F%20i%20%3C%3D%20i_end%20%3A%20i%20%3E%3D%20i_end%3B%20i%20%2B%3D%20i_inc)%20%7B%0A%20%20%20%20%20%20%20%20%20%20x1%20%3D%20points%5Bi%20%2B%201%20-%201%5D%5B0%5D%3B%0A%20%20%20%20%20%20%20%20%20%20x2%20%3D%20i%20%3D%3D%20n%20-%201%20%3F%20points%5B0%5D%5B0%5D%20%3A%20points%5Bi%20%2B%202%20-%201%5D%5B0%5D%3B%0A%20%20%20%20%20%20%20%20%20%20y1%20%3D%20points%5Bi%20%2B%201%20-%201%5D%5B1%5D%3B%0A%20%20%20%20%20%20%20%20%20%20y2%20%3D%20i%20%3D%3D%20n%20-%201%20%3F%20points%5B0%5D%5B1%5D%20%3A%20points%5Bi%20%2B%202%20-%201%5D%5B1%5D%3B%0A%20%20%20%20%20%20%20%20%20%20j%20%3D%0A%20%20%20%20%20%20%20%20%20%20%20%20(typeof%20j%20%3D%3D%20%22number%22%20%3F%20j%20%3A%200)%20%2B%0A%20%20%20%20%20%20%20%20%20%20%20%20Math.sqrt(%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20Math.pow(Math.abs(x1%20-%20x2)%2C%202)%20%2B%20Math.pow(Math.abs(y1%20-%20y2)%2C%202)%0A%20%20%20%20%20%20%20%20%20%20%20%20)%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20return%20j%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20return%200%3B%0A%20%20%20%20%7D%0A%20%20%20%20round(args)%20%7B%0A%20%20%20%20%20%20if%20(args.CS%20%3D%3D%20%22c%22)%20%7B%0A%20%20%20%20%20%20%20%20return%202%20*%20Math.PI%20*%20(args.rd%20%3D%3D%20%22r%22%20%3F%20args.a%20%3A%20args.a%20%2F%202)%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20if%20(args.CS%20%3D%3D%20%22s%22)%20%7B%0A%20%20%20%20%20%20%20%20return%20Math.PI%20*%20(args.rd%20%3D%3D%20%22r%22%20%3F%20args.a%20%3A%20args.a%20%2F%202)%20**%202%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%20%20%20%20pi()%20%7B%0A%20%20%20%20%20%20return%20Math.PI%3B%0A%20%20%20%20%7D%0A%20%20%7D%0A%20%20Scratch.extensions.register(new%20graph())%3B%0A%7D)(Scratch)%3B%0A%20%7D)(Scratch)%3B","data:text/javascript;,(function(Scratch)%20%7B%20%2F%2F%20Name%3A%20Tween%0D%0A%2F%2F%20ID%3A%20jeremygamerTweening%0D%0A%2F%2F%20Description%3A%20Easing%20methods%20for%20smooth%20animations.%0D%0A%2F%2F%20By%3A%20JeremyGamer13%20%3Chttps%3A%2F%2Fscratch.mit.edu%2Fusers%2FJeremyGamer13%2F%3E%0D%0A%2F%2F%20License%3A%20MIT%0D%0A%0D%0A(function%20(Scratch)%20%7B%0D%0A%20%20%22use%20strict%22%3B%0D%0A%0D%0A%20%20const%20BlockType%20%3D%20Scratch.BlockType%3B%0D%0A%20%20const%20ArgumentType%20%3D%20Scratch.ArgumentType%3B%0D%0A%20%20const%20Cast%20%3D%20Scratch.Cast%3B%0D%0A%0D%0A%20%20%2F**%0D%0A%20%20%20*%20%40param%20%7Bnumber%7D%20time%20should%20be%200-1%0D%0A%20%20%20*%20%40param%20%7Bnumber%7D%20a%20value%20at%200%0D%0A%20%20%20*%20%40param%20%7Bnumber%7D%20b%20value%20at%201%0D%0A%20%20%20*%20%40returns%20%7Bnumber%7D%0D%0A%20%20%20*%2F%0D%0A%20%20const%20interpolate%20%3D%20(time%2C%20a%2C%20b)%20%3D%3E%20%7B%0D%0A%20%20%20%20%2F%2F%20don't%20restrict%20range%20of%20time%20as%20some%20easing%20functions%20are%20expected%20to%20go%20outside%20the%20range%0D%0A%20%20%20%20const%20multiplier%20%3D%20b%20-%20a%3B%0D%0A%20%20%20%20const%20result%20%3D%20time%20*%20multiplier%20%2B%20a%3B%0D%0A%20%20%20%20return%20result%3B%0D%0A%20%20%7D%3B%0D%0A%0D%0A%20%20const%20linear%20%3D%20(x)%20%3D%3E%20x%3B%0D%0A%0D%0A%20%20const%20sine%20%3D%20(x%2C%20dir)%20%3D%3E%20%7B%0D%0A%20%20%20%20switch%20(dir)%20%7B%0D%0A%20%20%20%20%20%20case%20%22in%22%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20return%201%20-%20Math.cos((x%20*%20Math.PI)%20%2F%202)%3B%0D%0A%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%20%20case%20%22out%22%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20return%20Math.sin((x%20*%20Math.PI)%20%2F%202)%3B%0D%0A%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%20%20case%20%22in%20out%22%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20return%20-(Math.cos(Math.PI%20*%20x)%20-%201)%20%2F%202%3B%0D%0A%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%20%20default%3A%0D%0A%20%20%20%20%20%20%20%20return%200%3B%0D%0A%20%20%20%20%7D%0D%0A%20%20%7D%3B%0D%0A%0D%0A%20%20const%20quad%20%3D%20(x%2C%20dir)%20%3D%3E%20%7B%0D%0A%20%20%20%20switch%20(dir)%20%7B%0D%0A%20%20%20%20%20%20case%20%22in%22%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20return%20x%20*%20x%3B%0D%0A%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%20%20case%20%22out%22%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20return%201%20-%20(1%20-%20x)%20*%20(1%20-%20x)%3B%0D%0A%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%20%20case%20%22in%20out%22%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20return%20x%20%3C%200.5%20%3F%202%20*%20x%20*%20x%20%3A%201%20-%20Math.pow(-2%20*%20x%20%2B%202%2C%202)%20%2F%202%3B%0D%0A%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%20%20default%3A%0D%0A%20%20%20%20%20%20%20%20return%200%3B%0D%0A%20%20%20%20%7D%0D%0A%20%20%7D%3B%0D%0A%0D%0A%20%20const%20cubic%20%3D%20(x%2C%20dir)%20%3D%3E%20%7B%0D%0A%20%20%20%20switch%20(dir)%20%7B%0D%0A%20%20%20%20%20%20case%20%22in%22%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20return%20x%20*%20x%20*%20x%3B%0D%0A%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%20%20case%20%22out%22%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20return%201%20-%20Math.pow(1%20-%20x%2C%203)%3B%0D%0A%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%20%20case%20%22in%20out%22%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20return%20x%20%3C%200.5%20%3F%204%20*%20x%20*%20x%20*%20x%20%3A%201%20-%20Math.pow(-2%20*%20x%20%2B%202%2C%203)%20%2F%202%3B%0D%0A%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%20%20default%3A%0D%0A%20%20%20%20%20%20%20%20return%200%3B%0D%0A%20%20%20%20%7D%0D%0A%20%20%7D%3B%0D%0A%0D%0A%20%20const%20quart%20%3D%20(x%2C%20dir)%20%3D%3E%20%7B%0D%0A%20%20%20%20switch%20(dir)%20%7B%0D%0A%20%20%20%20%20%20case%20%22in%22%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20return%20x%20*%20x%20*%20x%20*%20x%3B%0D%0A%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%20%20case%20%22out%22%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20return%201%20-%20Math.pow(1%20-%20x%2C%204)%3B%0D%0A%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%20%20case%20%22in%20out%22%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20return%20x%20%3C%200.5%20%3F%208%20*%20x%20*%20x%20*%20x%20*%20x%20%3A%201%20-%20Math.pow(-2%20*%20x%20%2B%202%2C%204)%20%2F%202%3B%0D%0A%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%20%20default%3A%0D%0A%20%20%20%20%20%20%20%20return%200%3B%0D%0A%20%20%20%20%7D%0D%0A%20%20%7D%3B%0D%0A%0D%0A%20%20const%20quint%20%3D%20(x%2C%20dir)%20%3D%3E%20%7B%0D%0A%20%20%20%20switch%20(dir)%20%7B%0D%0A%20%20%20%20%20%20case%20%22in%22%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20return%20x%20*%20x%20*%20x%20*%20x%20*%20x%3B%0D%0A%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%20%20case%20%22out%22%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20return%201%20-%20Math.pow(1%20-%20x%2C%205)%3B%0D%0A%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%20%20case%20%22in%20out%22%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20return%20x%20%3C%200.5%0D%0A%20%20%20%20%20%20%20%20%20%20%3F%2016%20*%20x%20*%20x%20*%20x%20*%20x%20*%20x%0D%0A%20%20%20%20%20%20%20%20%20%20%3A%201%20-%20Math.pow(-2%20*%20x%20%2B%202%2C%205)%20%2F%202%3B%0D%0A%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%20%20default%3A%0D%0A%20%20%20%20%20%20%20%20return%200%3B%0D%0A%20%20%20%20%7D%0D%0A%20%20%7D%3B%0D%0A%0D%0A%20%20const%20expo%20%3D%20(x%2C%20dir)%20%3D%3E%20%7B%0D%0A%20%20%20%20switch%20(dir)%20%7B%0D%0A%20%20%20%20%20%20case%20%22in%22%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20return%20x%20%3D%3D%3D%200%20%3F%200%20%3A%20Math.pow(2%2C%2010%20*%20x%20-%2010)%3B%0D%0A%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%20%20case%20%22out%22%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20return%20x%20%3D%3D%3D%201%20%3F%201%20%3A%201%20-%20Math.pow(2%2C%20-10%20*%20x)%3B%0D%0A%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%20%20case%20%22in%20out%22%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20return%20x%20%3D%3D%3D%200%0D%0A%20%20%20%20%20%20%20%20%20%20%3F%200%0D%0A%20%20%20%20%20%20%20%20%20%20%3A%20x%20%3D%3D%3D%201%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%3F%201%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%3A%20x%20%3C%200.5%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3F%20Math.pow(2%2C%2020%20*%20x%20-%2010)%20%2F%202%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3A%20(2%20-%20Math.pow(2%2C%20-20%20*%20x%20%2B%2010))%20%2F%202%3B%0D%0A%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%20%20default%3A%0D%0A%20%20%20%20%20%20%20%20return%200%3B%0D%0A%20%20%20%20%7D%0D%0A%20%20%7D%3B%0D%0A%0D%0A%20%20const%20circ%20%3D%20(x%2C%20dir)%20%3D%3E%20%7B%0D%0A%20%20%20%20switch%20(dir)%20%7B%0D%0A%20%20%20%20%20%20case%20%22in%22%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20return%201%20-%20Math.sqrt(1%20-%20Math.pow(x%2C%202))%3B%0D%0A%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%20%20case%20%22out%22%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20return%20Math.sqrt(1%20-%20Math.pow(x%20-%201%2C%202))%3B%0D%0A%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%20%20case%20%22in%20out%22%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20return%20x%20%3C%200.5%0D%0A%20%20%20%20%20%20%20%20%20%20%3F%20(1%20-%20Math.sqrt(1%20-%20Math.pow(2%20*%20x%2C%202)))%20%2F%202%0D%0A%20%20%20%20%20%20%20%20%20%20%3A%20(Math.sqrt(1%20-%20Math.pow(-2%20*%20x%20%2B%202%2C%202))%20%2B%201)%20%2F%202%3B%0D%0A%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%20%20default%3A%0D%0A%20%20%20%20%20%20%20%20return%200%3B%0D%0A%20%20%20%20%7D%0D%0A%20%20%7D%3B%0D%0A%0D%0A%20%20const%20back%20%3D%20(x%2C%20dir)%20%3D%3E%20%7B%0D%0A%20%20%20%20switch%20(dir)%20%7B%0D%0A%20%20%20%20%20%20case%20%22in%22%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20const%20c1%20%3D%201.70158%3B%0D%0A%20%20%20%20%20%20%20%20const%20c3%20%3D%20c1%20%2B%201%3B%0D%0A%20%20%20%20%20%20%20%20return%20c3%20*%20x%20*%20x%20*%20x%20-%20c1%20*%20x%20*%20x%3B%0D%0A%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%20%20case%20%22out%22%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20const%20c1%20%3D%201.70158%3B%0D%0A%20%20%20%20%20%20%20%20const%20c3%20%3D%20c1%20%2B%201%3B%0D%0A%20%20%20%20%20%20%20%20return%201%20%2B%20c3%20*%20Math.pow(x%20-%201%2C%203)%20%2B%20c1%20*%20Math.pow(x%20-%201%2C%202)%3B%0D%0A%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%20%20case%20%22in%20out%22%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20const%20c1%20%3D%201.70158%3B%0D%0A%20%20%20%20%20%20%20%20const%20c2%20%3D%20c1%20*%201.525%3B%0D%0A%20%20%20%20%20%20%20%20return%20x%20%3C%200.5%0D%0A%20%20%20%20%20%20%20%20%20%20%3F%20(Math.pow(2%20*%20x%2C%202)%20*%20((c2%20%2B%201)%20*%202%20*%20x%20-%20c2))%20%2F%202%0D%0A%20%20%20%20%20%20%20%20%20%20%3A%20(Math.pow(2%20*%20x%20-%202%2C%202)%20*%20((c2%20%2B%201)%20*%20(x%20*%202%20-%202)%20%2B%20c2)%20%2B%202)%20%2F%202%3B%0D%0A%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%20%20default%3A%0D%0A%20%20%20%20%20%20%20%20return%200%3B%0D%0A%20%20%20%20%7D%0D%0A%20%20%7D%3B%0D%0A%0D%0A%20%20const%20elastic%20%3D%20(x%2C%20dir)%20%3D%3E%20%7B%0D%0A%20%20%20%20switch%20(dir)%20%7B%0D%0A%20%20%20%20%20%20case%20%22in%22%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20const%20c4%20%3D%20(2%20*%20Math.PI)%20%2F%203%3B%0D%0A%20%20%20%20%20%20%20%20return%20x%20%3D%3D%3D%200%0D%0A%20%20%20%20%20%20%20%20%20%20%3F%200%0D%0A%20%20%20%20%20%20%20%20%20%20%3A%20x%20%3D%3D%3D%201%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%3F%201%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%3A%20-Math.pow(2%2C%2010%20*%20x%20-%2010)%20*%20Math.sin((x%20*%2010%20-%2010.75)%20*%20c4)%3B%0D%0A%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%20%20case%20%22out%22%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20const%20c4%20%3D%20(2%20*%20Math.PI)%20%2F%203%3B%0D%0A%20%20%20%20%20%20%20%20return%20x%20%3D%3D%3D%200%0D%0A%20%20%20%20%20%20%20%20%20%20%3F%200%0D%0A%20%20%20%20%20%20%20%20%20%20%3A%20x%20%3D%3D%3D%201%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%3F%201%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%3A%20Math.pow(2%2C%20-10%20*%20x)%20*%20Math.sin((x%20*%2010%20-%200.75)%20*%20c4)%20%2B%201%3B%0D%0A%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%20%20case%20%22in%20out%22%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20const%20c5%20%3D%20(2%20*%20Math.PI)%20%2F%204.5%3B%0D%0A%20%20%20%20%20%20%20%20return%20x%20%3D%3D%3D%200%0D%0A%20%20%20%20%20%20%20%20%20%20%3F%200%0D%0A%20%20%20%20%20%20%20%20%20%20%3A%20x%20%3D%3D%3D%201%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%3F%201%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%3A%20x%20%3C%200.5%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3F%20-(Math.pow(2%2C%2020%20*%20x%20-%2010)%20*%20Math.sin((20%20*%20x%20-%2011.125)%20*%20c5))%20%2F%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%202%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3A%20(Math.pow(2%2C%20-20%20*%20x%20%2B%2010)%20*%20Math.sin((20%20*%20x%20-%2011.125)%20*%20c5))%20%2F%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%202%20%2B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%201%3B%0D%0A%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%20%20default%3A%0D%0A%20%20%20%20%20%20%20%20return%200%3B%0D%0A%20%20%20%20%7D%0D%0A%20%20%7D%3B%0D%0A%0D%0A%20%20const%20bounce%20%3D%20(x%2C%20dir)%20%3D%3E%20%7B%0D%0A%20%20%20%20switch%20(dir)%20%7B%0D%0A%20%20%20%20%20%20case%20%22in%22%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20return%201%20-%20bounce(1%20-%20x%2C%20%22out%22)%3B%0D%0A%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%20%20case%20%22out%22%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20const%20n1%20%3D%207.5625%3B%0D%0A%20%20%20%20%20%20%20%20const%20d1%20%3D%202.75%3B%0D%0A%20%20%20%20%20%20%20%20if%20(x%20%3C%201%20%2F%20d1)%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20return%20n1%20*%20x%20*%20x%3B%0D%0A%20%20%20%20%20%20%20%20%7D%20else%20if%20(x%20%3C%202%20%2F%20d1)%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20return%20n1%20*%20(x%20-%3D%201.5%20%2F%20d1)%20*%20x%20%2B%200.75%3B%0D%0A%20%20%20%20%20%20%20%20%7D%20else%20if%20(x%20%3C%202.5%20%2F%20d1)%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20return%20n1%20*%20(x%20-%3D%202.25%20%2F%20d1)%20*%20x%20%2B%200.9375%3B%0D%0A%20%20%20%20%20%20%20%20%7D%20else%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20return%20n1%20*%20(x%20-%3D%202.625%20%2F%20d1)%20*%20x%20%2B%200.984375%3B%0D%0A%20%20%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%20%20case%20%22in%20out%22%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20return%20x%20%3C%200.5%0D%0A%20%20%20%20%20%20%20%20%20%20%3F%20(1%20-%20bounce(1%20-%202%20*%20x%2C%20%22out%22))%20%2F%202%0D%0A%20%20%20%20%20%20%20%20%20%20%3A%20(1%20%2B%20bounce(2%20*%20x%20-%201%2C%20%22out%22))%20%2F%202%3B%0D%0A%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%20%20default%3A%0D%0A%20%20%20%20%20%20%20%20return%200%3B%0D%0A%20%20%20%20%7D%0D%0A%20%20%7D%3B%0D%0A%0D%0A%20%20const%20EasingMethods%20%3D%20%7B%0D%0A%20%20%20%20linear%2C%0D%0A%20%20%20%20sine%2C%0D%0A%20%20%20%20quad%2C%0D%0A%20%20%20%20cubic%2C%0D%0A%20%20%20%20quart%2C%0D%0A%20%20%20%20quint%2C%0D%0A%20%20%20%20expo%2C%0D%0A%20%20%20%20circ%2C%0D%0A%20%20%20%20back%2C%0D%0A%20%20%20%20elastic%2C%0D%0A%20%20%20%20bounce%2C%0D%0A%20%20%7D%3B%0D%0A%0D%0A%20%20const%20now%20%3D%20()%20%3D%3E%20Scratch.vm.runtime.currentMSecs%3B%0D%0A%0D%0A%20%20class%20Tween%20%7B%0D%0A%20%20%20%20getInfo()%20%7B%0D%0A%20%20%20%20%20%20return%20%7B%0D%0A%20%20%20%20%20%20%20%20id%3A%20%22jeremygamerTweening%22%2C%0D%0A%20%20%20%20%20%20%20%20name%3A%20%22Tweening%22%2C%0D%0A%20%20%20%20%20%20%20%20blocks%3A%20%5B%0D%0A%20%20%20%20%20%20%20%20%20%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22tweenValue%22%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20%22%5BMODE%5D%20ease%20%5BDIRECTION%5D%20%5BSTART%5D%20to%20%5BEND%5D%20by%20%5BAMOUNT%5D%25%22%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20disableMonitor%3A%20true%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20BlockType.REPORTER%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20MODE%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20ArgumentType.STRING%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20menu%3A%20%22modes%22%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20DIRECTION%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20ArgumentType.STRING%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20menu%3A%20%22direction%22%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20START%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20ArgumentType.NUMBER%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%200%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20END%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20ArgumentType.NUMBER%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%20100%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20AMOUNT%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20ArgumentType.NUMBER%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%2050%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22tweenVariable%22%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20%22tween%20variable%20%5BVAR%5D%20to%20%5BVALUE%5D%20over%20%5BSEC%5D%20seconds%20using%20%5BMODE%5D%20ease%20%5BDIRECTION%5D%22%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20BlockType.COMMAND%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20VAR%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20ArgumentType.STRING%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20menu%3A%20%22vars%22%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20VALUE%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20ArgumentType.NUMBER%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%20100%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20SEC%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20ArgumentType.NUMBER%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%201%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20MODE%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20ArgumentType.STRING%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20menu%3A%20%22modes%22%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20DIRECTION%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20ArgumentType.STRING%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20menu%3A%20%22direction%22%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22tweenXY%22%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20%22tween%20to%20x%3A%20%5BX%5D%20y%3A%20%5BY%5D%20over%20%5BSEC%5D%20seconds%20using%20%5BMODE%5D%20ease%20%5BDIRECTION%5D%22%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20BlockType.COMMAND%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20PROPERTY%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20ArgumentType.STRING%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20menu%3A%20%22properties%22%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20X%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20ArgumentType.NUMBER%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%20100%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20Y%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20ArgumentType.NUMBER%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%20100%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20SEC%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20ArgumentType.NUMBER%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%201%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20MODE%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20ArgumentType.STRING%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20menu%3A%20%22modes%22%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20DIRECTION%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20ArgumentType.STRING%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20menu%3A%20%22direction%22%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22tweenProperty%22%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20%22tween%20%5BPROPERTY%5D%20to%20%5BVALUE%5D%20over%20%5BSEC%5D%20seconds%20using%20%5BMODE%5D%20ease%20%5BDIRECTION%5D%22%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20BlockType.COMMAND%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20PROPERTY%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20ArgumentType.STRING%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20menu%3A%20%22properties%22%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20VALUE%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20ArgumentType.NUMBER%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%20100%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20SEC%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20ArgumentType.NUMBER%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%201%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20MODE%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20ArgumentType.STRING%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20menu%3A%20%22modes%22%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20DIRECTION%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20ArgumentType.STRING%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20menu%3A%20%22direction%22%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%5D%2C%0D%0A%20%20%20%20%20%20%20%20menus%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20modes%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20acceptReporters%3A%20true%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20items%3A%20Object.keys(EasingMethods)%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20direction%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20acceptReporters%3A%20true%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20items%3A%20%5B%22in%22%2C%20%22out%22%2C%20%22in%20out%22%5D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20vars%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20acceptReporters%3A%20false%2C%20%2F%2F%20for%20Scratch%20parity%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20items%3A%20%22getVariables%22%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20properties%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20acceptReporters%3A%20true%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20items%3A%20%5B%22x%20position%22%2C%20%22y%20position%22%2C%20%22direction%22%2C%20%22size%22%5D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%7D%3B%0D%0A%20%20%20%20%7D%0D%0A%0D%0A%20%20%20%20getVariables()%20%7B%0D%0A%20%20%20%20%20%20const%20variables%20%3D%0D%0A%20%20%20%20%20%20%20%20%2F%2F%20%40ts-expect-error%0D%0A%20%20%20%20%20%20%20%20typeof%20Blockly%20%3D%3D%3D%20%22undefined%22%0D%0A%20%20%20%20%20%20%20%20%20%20%3F%20%5B%5D%0D%0A%20%20%20%20%20%20%20%20%20%20%3A%20%2F%2F%20%40ts-expect-error%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20Blockly.getMainWorkspace()%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20.getVariableMap()%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20.getVariablesOfType(%22%22)%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20.map((model)%20%3D%3E%20(%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20model.name%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20value%3A%20model.getId()%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D))%3B%0D%0A%20%20%20%20%20%20if%20(variables.length%20%3E%200)%20%7B%0D%0A%20%20%20%20%20%20%20%20return%20variables%3B%0D%0A%20%20%20%20%20%20%7D%20else%20%7B%0D%0A%20%20%20%20%20%20%20%20return%20%5B%7B%20text%3A%20%22%22%2C%20value%3A%20%22%22%20%7D%5D%3B%0D%0A%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%7D%0D%0A%0D%0A%20%20%20%20tweenValue(args)%20%7B%0D%0A%20%20%20%20%20%20const%20easeMethod%20%3D%20Cast.toString(args.MODE)%3B%0D%0A%20%20%20%20%20%20const%20easeDirection%20%3D%20Cast.toString(args.DIRECTION)%3B%0D%0A%20%20%20%20%20%20const%20start%20%3D%20Cast.toNumber(args.START)%3B%0D%0A%20%20%20%20%20%20const%20end%20%3D%20Cast.toNumber(args.END)%3B%0D%0A%20%20%20%20%20%20const%20progress%20%3D%20Cast.toNumber(args.AMOUNT)%20%2F%20100%3B%0D%0A%0D%0A%20%20%20%20%20%20if%20(!Object.prototype.hasOwnProperty.call(EasingMethods%2C%20easeMethod))%20%7B%0D%0A%20%20%20%20%20%20%20%20%2F%2F%20Unknown%20method%0D%0A%20%20%20%20%20%20%20%20return%20start%3B%0D%0A%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%20%20const%20easingFunction%20%3D%20EasingMethods%5BeaseMethod%5D%3B%0D%0A%0D%0A%20%20%20%20%20%20const%20tweened%20%3D%20easingFunction(progress%2C%20easeDirection)%3B%0D%0A%20%20%20%20%20%20return%20interpolate(tweened%2C%20start%2C%20end)%3B%0D%0A%20%20%20%20%7D%0D%0A%0D%0A%20%20%20%20_tweenValue(args%2C%20util%2C%20id%2C%20valueArgName%2C%20currentValue)%20%7B%0D%0A%20%20%20%20%20%20%2F%2F%20Only%20use%20args%20on%20first%20run.%20For%20later%20executions%20grab%20everything%20from%20stackframe.%0D%0A%20%20%20%20%20%20%2F%2F%20This%20ensures%20that%20if%20the%20arguments%20change%2C%20the%20tweening%20won't%20change.%20This%20matches%0D%0A%20%20%20%20%20%20%2F%2F%20the%20vanilla%20Scratch%20glide%20blocks.%0D%0A%20%20%20%20%20%20const%20state%20%3D%20util.stackFrame%5Bid%5D%3B%0D%0A%0D%0A%20%20%20%20%20%20if%20(!state)%20%7B%0D%0A%20%20%20%20%20%20%20%20%2F%2F%20First%20run%2C%20need%20to%20start%20timer%0D%0A%20%20%20%20%20%20%20%20util.yield()%3B%0D%0A%0D%0A%20%20%20%20%20%20%20%20const%20durationMS%20%3D%20Cast.toNumber(args.SEC)%20*%201000%3B%0D%0A%20%20%20%20%20%20%20%20const%20easeMethod%20%3D%20Cast.toString(args.MODE)%3B%0D%0A%20%20%20%20%20%20%20%20const%20easeDirection%20%3D%20Cast.toString(args.DIRECTION)%3B%0D%0A%20%20%20%20%20%20%20%20const%20start%20%3D%20currentValue%3B%0D%0A%20%20%20%20%20%20%20%20const%20end%20%3D%20Cast.toNumber(args%5BvalueArgName%5D)%3B%0D%0A%0D%0A%20%20%20%20%20%20%20%20let%20easingFunction%3B%0D%0A%20%20%20%20%20%20%20%20if%20(Object.prototype.hasOwnProperty.call(EasingMethods%2C%20easeMethod))%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20easingFunction%20%3D%20EasingMethods%5BeaseMethod%5D%3B%0D%0A%20%20%20%20%20%20%20%20%7D%20else%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20easingFunction%20%3D%20EasingMethods.linear%3B%0D%0A%20%20%20%20%20%20%20%20%7D%0D%0A%0D%0A%20%20%20%20%20%20%20%20util.stackFrame%5Bid%5D%20%3D%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20startTimeMS%3A%20now()%2C%0D%0A%20%20%20%20%20%20%20%20%20%20durationMS%2C%0D%0A%20%20%20%20%20%20%20%20%20%20easingFunction%2C%0D%0A%20%20%20%20%20%20%20%20%20%20easeDirection%2C%0D%0A%20%20%20%20%20%20%20%20%20%20start%2C%0D%0A%20%20%20%20%20%20%20%20%20%20end%2C%0D%0A%20%20%20%20%20%20%20%20%7D%3B%0D%0A%0D%0A%20%20%20%20%20%20%20%20return%20start%3B%0D%0A%20%20%20%20%20%20%7D%20else%20if%20(now()%20-%20state.startTimeMS%20%3E%3D%20state.durationMS)%20%7B%0D%0A%20%20%20%20%20%20%20%20%2F%2F%20Done%0D%0A%20%20%20%20%20%20%20%20return%20util.stackFrame%5Bid%5D.end%3B%0D%0A%20%20%20%20%20%20%7D%20else%20%7B%0D%0A%20%20%20%20%20%20%20%20%2F%2F%20Still%20running%0D%0A%20%20%20%20%20%20%20%20util.yield()%3B%0D%0A%0D%0A%20%20%20%20%20%20%20%20const%20progress%20%3D%20(now()%20-%20state.startTimeMS)%20%2F%20state.durationMS%3B%0D%0A%20%20%20%20%20%20%20%20const%20tweened%20%3D%20state.easingFunction(progress%2C%20state.easeDirection)%3B%0D%0A%20%20%20%20%20%20%20%20return%20interpolate(tweened%2C%20state.start%2C%20state.end)%3B%0D%0A%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%7D%0D%0A%0D%0A%20%20%20%20tweenVariable(args%2C%20util)%20%7B%0D%0A%20%20%20%20%20%20const%20variable%20%3D%20util.target.lookupVariableById(args.VAR)%3B%0D%0A%20%20%20%20%20%20const%20value%20%3D%20this._tweenValue(args%2C%20util%2C%20%22%22%2C%20%22VALUE%22%2C%20variable.value)%3B%0D%0A%20%20%20%20%20%20if%20(variable%20%26%26%20variable.type%20%3D%3D%3D%20%22%22)%20%7B%0D%0A%20%20%20%20%20%20%20%20variable.value%20%3D%20value%3B%0D%0A%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%7D%0D%0A%0D%0A%20%20%20%20tweenXY(args%2C%20util)%20%7B%0D%0A%20%20%20%20%20%20const%20x%20%3D%20this._tweenValue(args%2C%20util%2C%20%22x%22%2C%20%22X%22%2C%20util.target.x)%3B%0D%0A%20%20%20%20%20%20const%20y%20%3D%20this._tweenValue(args%2C%20util%2C%20%22y%22%2C%20%22Y%22%2C%20util.target.y)%3B%0D%0A%20%20%20%20%20%20util.target.setXY(x%2C%20y)%3B%0D%0A%20%20%20%20%7D%0D%0A%0D%0A%20%20%20%20tweenProperty(args%2C%20util)%20%7B%0D%0A%20%20%20%20%20%20let%20currentValue%20%3D%200%3B%0D%0A%20%20%20%20%20%20if%20(args.PROPERTY%20%3D%3D%3D%20%22x%20position%22)%20%7B%0D%0A%20%20%20%20%20%20%20%20currentValue%20%3D%20util.target.x%3B%0D%0A%20%20%20%20%20%20%7D%20else%20if%20(args.PROPERTY%20%3D%3D%3D%20%22y%20position%22)%20%7B%0D%0A%20%20%20%20%20%20%20%20currentValue%20%3D%20util.target.y%3B%0D%0A%20%20%20%20%20%20%7D%20else%20if%20(args.PROPERTY%20%3D%3D%3D%20%22direction%22)%20%7B%0D%0A%20%20%20%20%20%20%20%20currentValue%20%3D%20util.target.direction%3B%0D%0A%20%20%20%20%20%20%7D%20else%20if%20(args.PROPERTY%20%3D%3D%3D%20%22size%22)%20%7B%0D%0A%20%20%20%20%20%20%20%20currentValue%20%3D%20util.target.size%3B%0D%0A%20%20%20%20%20%20%7D%0D%0A%0D%0A%20%20%20%20%20%20const%20value%20%3D%20this._tweenValue(args%2C%20util%2C%20%22%22%2C%20%22VALUE%22%2C%20currentValue)%3B%0D%0A%0D%0A%20%20%20%20%20%20if%20(args.PROPERTY%20%3D%3D%3D%20%22x%20position%22)%20%7B%0D%0A%20%20%20%20%20%20%20%20util.target.setXY(value%2C%20util.target.y)%3B%0D%0A%20%20%20%20%20%20%7D%20else%20if%20(args.PROPERTY%20%3D%3D%3D%20%22y%20position%22)%20%7B%0D%0A%20%20%20%20%20%20%20%20util.target.setXY(util.target.x%2C%20value)%3B%0D%0A%20%20%20%20%20%20%7D%20else%20if%20(args.PROPERTY%20%3D%3D%3D%20%22direction%22)%20%7B%0D%0A%20%20%20%20%20%20%20%20util.target.setDirection(value)%3B%0D%0A%20%20%20%20%20%20%7D%20else%20if%20(args.PROPERTY%20%3D%3D%3D%20%22size%22)%20%7B%0D%0A%20%20%20%20%20%20%20%20util.target.setSize(value)%3B%0D%0A%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%7D%0D%0A%20%20%7D%0D%0A%0D%0A%20%20Scratch.extensions.register(new%20Tween())%3B%0D%0A%7D)(Scratch)%3B%0D%0A%20%7D)(Scratch)%3B"]) {
        vm.extensionManager.loadExtensionURL(extension);
      }

      vm.runtime.on('PROJECT_RUN_STOP', () => {
        if (!vm.isPaused || !vm.isPaused()) {
          window.close();
        }
      });

    } catch (e) {
      handleError(e);
    }
  </script>
  
  
    <script>
      const getProjectData = (function() {
        const storage = scaffolding.storage;
        storage.onprogress = (total, loaded) => {
          setProgress(interpolate(0.75, 0.98, loaded / total));
        };
        
        let zip;
        // Allow zip to be GC'd after project loads
        vm.runtime.on('PROJECT_LOADED', () => (zip = null));
        const findFileInZip = (path) => zip.file(path) || zip.file(new RegExp("^([^/]*/)?" + path + "$"))[0];
        storage.addHelper({
          load: (assetType, assetId, dataFormat) => {
            if (!zip) {
              throw new Error('Zip is not loaded or has been closed');
            }
            const path = assetId + '.' + dataFormat;
            const file = findFileInZip(path);
            if (!file) {
              throw new Error('Asset is not in zip: ' + path)
            }
            return file
              .async('uint8array')
              .then((data) => storage.createAsset(assetType, dataFormat, data, assetId));
          }
        });
        return () => (() => new Promise((resolve, reject) => {
        const xhr = new XMLHttpRequest();
        xhr.onload = () => {
          resolve(xhr.response);
        };
        xhr.onerror = () => {
          if (location.protocol === 'file:') {
            reject(new Error('Zip environment must be used from a website, not from a file URL.'));
          } else {
            reject(new Error('Request to load project data failed.'));
          }
        };
        xhr.onprogress = (e) => {
          if (e.lengthComputable) {
            setProgress(interpolate(0.1, 0.75, e.loaded / e.total));
          }
        };
        xhr.responseType = 'arraybuffer';
        xhr.open('GET', "./project.zip");
        xhr.send();
      }))().then(async (data) => {
          zip = await Scaffolding.JSZip.loadAsync(data);
          const file = findFileInZip('project.json');
          if (!file) {
            throw new Error('project.json is not in zip');
          }
          return file.async('arraybuffer');
        });
      })();
    </script>
  <script>
    const run = async () => {
      const projectData = await getProjectData();
      await scaffolding.loadProject(projectData);
      setProgress(1);
      loadingScreen.hidden = true;
      if (true) {
        scaffolding.start();
      } else {
        launchScreen.hidden = false;
        launchScreen.addEventListener('click', () => {
          launchScreen.hidden = true;
          scaffolding.start();
        });
        launchScreen.focus();
      }
    };
    run().catch(handleError);
  </script>
</body>
</html>
